within ;
package ADAN_main

  package UsersGuide "User's Guide"
    model Nomenclature "A description of nomenclature"
      annotation (
        Icon(coordinateSystem(preserveAspectRatio=false)),
        Diagram(coordinateSystem(preserveAspectRatio=false)),
        Documentation(info="<html>
<p><b>Settings</b></p>
<p>Settings contain shared parametrization for the whole model. To counter name collisions, the parameters in settings use an informative path prefix, e.g. Systemic_artery_XXX</p>
<p><b>Name symbols</b></p>
<ul>
<li>phi - sympathetic activation</li>
<li>eta_XXX - slope parameter for sympathetic activation effect on XXX </li>
<li>chi_XXX - effect of exercise</li>
<li>xi_XXX - helper factor used for identification (e.g. scaling multiple dependent parameters)</li>
<li></li>
</ul>
</html>"));
    end Nomenclature;

    package DemonstrateInheritance "Inheritance and redeclaration examples"
      model sub_A
        replaceable parameter Integer param = 1;
        annotation (preferredView = "text");
      end sub_A;

      model sub_B
              extends sub_A(
                        param = 2);
                        parameter Integer param2 = 5;
                        annotation (preferredView = "text");
      end sub_B;

      model base_unconstrained
        replaceable sub_A a(param=3);
        parameter Integer expected_param_val = 3;
        annotation (preferredView = "text");
      end base_unconstrained;

      model A "Rewrites the param"
              extends base_unconstrained(
                        a(param = 4), expected_param_val = 4);
                        annotation (preferredView = "text");
      end A;

      model B "Redeclares, should keep the param val"
        extends A(redeclare sub_B a, expected_param_val=4);
        annotation (preferredView = "text");
      end B;

    model C "Directly redeclares, should keep the unconstrained as well"
      extends base_unconstrained(redeclare sub_B a, expected_param_val = 3);
      annotation (preferredView = "text");
    end C;

      model base_constrained
          replaceable sub_A a(param=3) constrainedby sub_A;
          parameter Integer expected_param_val = 3;
          annotation (preferredView = "text");
      end base_constrained;

      model A_con "Rewrites the param"
              extends base_constrained(
                        a(param = 4), expected_param_val = 4);
                        annotation (preferredView = "text");
      end A_con;

      model B_con "Redeclares, should keep the param val"
        extends A(redeclare sub_B a, expected_param_val=4);
        annotation (preferredView = "text");
      end B_con;

    model C_con "redeclares constrained, should keep sub_B val"
      extends base_constrained(redeclare sub_B a, expected_param_val = 2);
      annotation (preferredView = "text");
    end C_con;

    model DataStructure
      parameter Boolean a=false;
      parameter Boolean b=false;
    end DataStructure;

      model Diamond_base
      "Model to demosntrate multiple inheritance in a diamond configuration"
            parameter Real a = 0;
            parameter Boolean b = false;
            DataStructure ds annotation (Placement(transformation(extent={{-10,-10},{10,10}})));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
      end Diamond_base;

      model Diamond_a
        extends Diamond_base(ds(a=true));
      end Diamond_a;

      model Diamond_b
        extends Diamond_base(ds(b=true));
      end Diamond_b;

      model Diamond_ab
        extends Diamond_a;
        extends Diamond_b;
      end Diamond_ab;

      model Diamond_ba
        extends Diamond_b;
        extends Diamond_a;
      end Diamond_ba;

      model all
        "Demonstrates difference between constrained and unconstrained during multiple level redeclaration. "
        extends Modelica.Icons.Example;
        base_unconstrained base_unconstrained1
          annotation (Placement(transformation(extent={{-70,50},{-50,70}})));
        base_constrained base_constrained1
          annotation (Placement(transformation(extent={{-70,8},{-50,28}})));
        A a "Only rewrites the param" annotation (Placement(transformation(extent={{-28,50},
                  {-8,70}})));
        A_con a_con "Only rewrites the param"
          annotation (Placement(transformation(extent={{-28,8},{-8,28}})));
        B b "B keeps the param even after redeclaration!" annotation (Placement(transformation(extent={{10,50},
                  {30,70}})));
        B_con b_con
                   "B keeps the param even after redeclaration!" annotation (Placement(transformation(extent={{10,8},{
                  30,28}})));
        C c  annotation (Placement(transformation(extent={{50,50},{70,70}})));
        C_con c_con "param is different for constrained class!" annotation (Placement(transformation(extent={{50,8},{
                  70,28}})));

        Diamond_ab diamond_ab
          annotation (Placement(transformation(extent={{-32,-80},{-12,-60}})));
        Diamond_ba diamond_ba
          annotation (Placement(transformation(extent={{8,-80},{28,-60}})));
      annotation (preferredView = "text",
          Documentation(info="<html>
<p style=\"margin-left: 30px;\">The model here tests a potentially surprising inheritance properties of the MOdelica language.</p>
<p><br>First test demonstrates how the parameters are dropped with inheritance and surprisingly, it drops parameter value for direct child, but keeps it when modified later on.</p>
<p><br>Second demonstrates diamond multiple inheritance, that is:</p>
<ul>
<li>you are not allowed to modify value parameter of parent classes, as it leads to a conflict.</li>
<li>when the objects (i.e. the DataStructure dummy) are modified by both parents, only the first prevails and the parent parametrization is simply dropped. </li>
<li>One would expect Diamond_ab and Diamond_ba to both have ds with true and true, however that is not the case - the second parent is always ignored.</li>
</ul>
</html>"),Diagram(graphics={Text(
                extent={{-64,-52},{64,-34}},
                lineColor={238,46,47},
                lineThickness=1,
                textString="Diamond inheritance demonstration"), Text(
                extent={{-64,78},{64,96}},
                lineColor={238,46,47},
                lineThickness=1,
                textString=
                    "Dropping and keeping parameters of redeclared components")}));
      end all;
      annotation (DocumentationClass=false);
    end DemonstrateInheritance;

  annotation(DocumentationClass = true);
  end UsersGuide;

  package Components
    extends Modelica.Icons.VariantsPackage;
    model Settings "All adjustable settings are to be listed here, in form of plain numbers. Any additional factors should be separate parameters."
      import Physiolibrary.Types.*;
      // parameter settings_variant sv;

      // general
      parameter Fraction phi0=0.25   "Baseline resting phi" annotation(Dialog(group = "General"));
      parameter Physiolibrary.Types.Height height=1.7   "Subject's height for scaling vessel lengths" annotation(Dialog(group = "General"));
      parameter Modelica.Units.SI.Mass weight=BMI*(height^2) "Subject's weight"
        annotation (Dialog(group="General"));
      parameter Real age = 35 annotation(Dialog(group = "General"));
      parameter Frequency HR_nominal=1   "Resting heart rate (at phi0)"
        annotation(Dialog(group = "General"));
       parameter Frequency HR_max=3   "maximal heart rate"
        annotation(Dialog(group = "General"));
      parameter Real BMI = 24 annotation(Dialog(group = "General"));
      final parameter Real BSA = 0.007184*weight^0.425*(height*100)^0.725 "Du Bois formula for body surface area" annotation(Dialog(group = "General"));

      //INITILIZATION
      parameter Boolean initByPressure = true "Use nominal pressure to initialize vessel volume. False to use volume directly"
        annotation(Dialog(group = "General"));
      parameter Volume V_PV_init(min = -10e-3)=0                           "Volume adjustment"
        annotation(Dialog(group = "General"));
      // HEART
      // general
      parameter Physiolibrary.Types.HydraulicResistance heart_R_vlv=133322.387415
      "Open valve resistance"
        annotation(Dialog(tab = "Heart", group = "General"));
      parameter Physiolibrary.Types.HydraulicResistance heart_R_AV=7.971886e+05
      "Open aortic valve resistance"
        annotation(Dialog(tab = "Heart", group = "General"));

      parameter Physiolibrary.Types.HydraulicResistance heart_R_LA=1999835.811225
      "Resistance of left atrium"
        annotation(Dialog(tab = "Heart", group = "General"));
      parameter Physiolibrary.Types.HydraulicResistance heart_R_RA=heart_R_LA
      "Resistance of the right atrium"
        annotation(Dialog(tab = "Heart", group = "General"));

      parameter Physiolibrary.Types.HydraulicResistance heart_R_A_vis=50000
      "Viscoelastic resistance of the atria"
        annotation(Dialog(tab = "Heart", group = "General"));
      parameter Physiolibrary.Types.HydraulicInertance heart_I_A = 10678 "Inertance of the atrial inflow"  annotation(Dialog(tab = "Heart", group = "General"));
      // Smith
      parameter Physiolibrary.Types.Fraction heart_alphaE(min = 0, max = 1.33) = 0 "For Smith heart - linear dependency of active elastance on phi"
        annotation(Dialog(tab = "Heart", group = "Smith"));
      parameter Physiolibrary.Types.Fraction heart_gammaE(
        min=0,
        max=1.33) = 0
        "For Smith heart - linear dependency of passive elastances (given by nominal pressure Pi0lv, Pi0rv) on phi"
        annotation(Dialog(tab = "Heart", group = "Smith"));
      // TriSeg Ottesen's calcium drive
      parameter Real heart_vntr_D_0=0.0162625
        "nominal driving elastance offset [mmHg/um]"
        annotation(Dialog(tab="Heart",   group="TriSegOttesen drive"));
      parameter Real heart_vntr_D_0_maxAct=0.00076875
        "Driving elastance offset at maximal activation [mmHg/um]" annotation(Dialog(tab="Heart",   group=
              "TriSegOttesen drive"));

      parameter Real heart_vntr_D_A=1800
        "Amplitude of resting elastance (nominal 2*7.5*120) [mmHg/um]"
        annotation(Dialog(tab="Heart",   group="TriSegOttesen drive"));
      parameter Real heart_vntr_D_A_maxAct= 27225
        "Amplitude of ventricular elastance at maximal activation (nominal 30.25*7.5*120)[mmHg/um]"
        annotation(Dialog(tab="Heart",   group="TriSegOttesen drive"));
      parameter Physiolibrary.Types.Time heart_vntr_TS(displayUnit="s") = 0.14
        "nominal systolic contraction time"
        annotation(Dialog(tab="Heart",   group="TriSegOttesen drive"));
      parameter Physiolibrary.Types.Time heart_vntr_TS_maxAct=heart_vntr_TS*
          HR_nominal/HR_max
        "nominal systolic contraction time at maximal activation. Default holds the the same fraction of the cardiac cycle."
        annotation (Dialog(tab="Heart", group="TriSegOttesen drive"));
      parameter Physiolibrary.Types.Time heart_vntr_TR=0.45
        "Systolic relaxation time"
        annotation(Dialog(tab="Heart",   group="TriSegOttesen drive"));
      parameter Physiolibrary.Types.Time heart_vntr_TR_maxAct=heart_vntr_TR*
          HR_nominal/HR_max
        "minimal time for muscle relaxation at maximal activation. Guessed value"
        annotation (Dialog(tab="Heart", group="TriSegOttesen drive"));
      // TriSeg atria
      parameter Physiolibrary.Types.Time heart_vntr_Tact(displayUnit="s") = 0.2
        "Time delay between atrial and ventricle cycles"
        annotation(Dialog(tab="Heart",   group="TriSegOttesen drive"));
      parameter Physiolibrary.Types.Time heart_vntr_Tact_maxAct(displayUnit="s")=
           heart_vntr_Tact*HR_nominal/HR_max
        "Time from start of the atrial cycle at maximal activation"
        annotation (Dialog(tab="Heart", group="TriSegOttesen drive"));

      parameter Physiolibrary.Types.HydraulicElastance heart_atr_D_0=0.25
        "nominal driving elastance offset"
        annotation(Dialog(tab="Heart",   group="Simple atria"));
      parameter Physiolibrary.Types.HydraulicElastance heart_atr_D_A=26664477.483
        "Atrial elastance peak - Maximal elastance 0.05 + 0.15 mmhg/ml"
        annotation(Dialog(tab="Heart",   group="Simple atria"));
      parameter Physiolibrary.Types.Time heart_atr_TS(displayUnit="s") = 0.14
        "nominal atrial contraction time"
          annotation(Dialog(tab="Heart",   group="Simple atria"));
      parameter Physiolibrary.Types.Time heart_atr_TR(displayUnit="s") = 0.14
        "nominal atrial relaxation time"
          annotation(Dialog(tab="Heart",   group="Simple atria"));

      // TriSeg ventricles
      parameter Physiolibrary.Types.Fraction heart_vntr_xi_Vw=1
        "Factor affecting ventricular walls volume"
        annotation(Dialog(tab="Heart",   group="TriSegOttesen ventricles"));
      parameter Physiolibrary.Types.Fraction heart_vntr_xi_AmRef=1
        "Factor affecting ventricular diameters"
        annotation(Dialog(tab="Heart",   group="TriSegOttesen ventricles"));
      parameter Physiolibrary.Types.Fraction heart_vntr_xi_AmRef_RV=heart_vntr_xi_AmRef
        "modifier to RV midwall reference surface area, cm^2" annotation(Dialog(tab="Heart",   group="TriSegOttesen ventricles"));

      parameter Real heart_vntr_k_passive=21.9
        "Steepness of passive tension to volume coeff. Affects diastolic compliance."
        annotation(Dialog(tab="Heart",   group="TriSegOttesen ventricles"));
      parameter Real heart_vntr_Lsref=1.9 "Reference SL, [um]" annotation(Dialog(tab = "Heart", group = "TriSegOttesen ventricles"));
      parameter Real heart_vntr_L0=1.814 "zero tension sarcomere length [um]" annotation(Dialog(tab = "Heart", group = "TriSegOttesen ventricles"));
      parameter Real heart_vntr_SLcollagen=1.94 "minimal length to apply collagen force [um]" annotation(Dialog(tab = "Heart", group = "TriSegOttesen ventricles"));
      parameter Real heart_vntr_SLrest=1.51 "Resting sarcomere length [um]" annotation(Dialog(tab = "Heart", group = "TriSegOttesen ventricles"));
      parameter Real heart_vntr_PConcollagen=19.0 annotation(Dialog(tab="Heart",   group="TriSegOttesen ventricles"));
      parameter Real heart_vntr_PExpcollagen=2.93 annotation(Dialog(tab="Heart",   group="TriSegOttesen ventricles"));
      parameter Real starlingFactor_exp = 1 annotation(Dialog(tab="Heart",   group="TriSegOttesen ventricles"));

      parameter Real heartImp_LV_stiff=1.0 "Stiffening factor" annotation(Dialog(tab="Heart Imp",   group="Heart impairments"));
      parameter Real heartImp_RV_stiff=1.0 "Stiffening factor" annotation(Dialog(tab="Heart Imp",   group="Heart impairments"));
      parameter Physiolibrary.Types.Fraction heartImp_LVcont=1
        "Reducing LV and LA contractility, incl. the maximal one" annotation(Dialog(tab="Heart Imp",   group=
              "Heart impairments"));
      parameter Physiolibrary.Types.Fraction heartImp_RVcont=1
        "Reducing RV and RA contractility, incl. the maximal one" annotation(Dialog(tab="Heart Imp",   group=
              "Heart impairments"));

      // SYSTEMIC
      // general
      parameter Physiolibrary.Types.Fraction syst_abd_P_th_ratio=0.8
        "fraction of thoracic pressure in the abdominal cavity"
          annotation(Dialog(tab="Systemic",   group="General"));

      parameter Boolean systemic_limitExternalPressure=true
        "Limit Pext in large arteries, tissues and veins, when they are already empty"                               annotation(choices(checkBox=true), Dialog(tab=
              "Systemic",                                                                                                                                                        group="General"),
        Evaluate=true);

      // arteries
      parameter Physiolibrary.Types.Fraction syst_art_k_E=1
        "Adjustment of systemic arterial elasticity to fit normal arterial pressures"
        annotation(Dialog(tab="Systemic",   group="Arteries"));
      parameter Boolean syst_art_UseVasoconstrictionEffect=false
        "Change compliance of large arteries by phi and exercise"
        annotation(choices(checkBox=true), Dialog(tab="Systemic",   group="Arteries"));
      parameter Physiolibrary.Types.Fraction eta_vc=0
        "Effect fraction of arterial vasoconstriction on arterial compliance"
        annotation(Dialog(tab="Systemic",   group="Arteries",   enable=
              arteries_UseVasoconstrictionEffect));
      // tissues
      parameter Physiolibrary.Types.Fraction
        syst_tissues_hydrostaticLevel_correction=1
        "Lenghten the body to observe some reaction to tilt"
          annotation(Dialog(tab="Systemic",   group="Tissues"));
      parameter Physiolibrary.Types.HydraulicResistance syst_TPR=119990148.6735
        "Systemic total peripheral resistance"       annotation(Dialog(tab="Systemic",   group="Tissues"));
      parameter Physiolibrary.Types.Fraction syst_TR_frac=5.33333
        "Tissue resistance Ra to Rv ratio, affecting intra tissue pressure"       annotation(Dialog(tab="Systemic",   group="Tissues"));

      final parameter Physiolibrary.Types.Pressure tissues_Pa_nom=syst_TR_frac*(
          tissues_P_nom - tissues_Pv_nom) + tissues_P_nom
        "Nominal arterial pressure for initialization and calculation of arterioles resistance"
        annotation (Dialog(tab="Systemic", group="Arteries"), enable=false);

      parameter Physiolibrary.Types.Pressure tissues_P_nom=2666.4477483
        "Tissues and small arteries and veins nominal pressure. Used for calculation of arteriole and venule resistances and tissues compliance"
        annotation(Dialog(tab="Systemic",   group="Tissues"));
      final parameter Physiolibrary.Types.Pressure tissues_Pv_nom=(tissues_P_nom*(1 +
          syst_TR_frac) - syst_TPR*tissues_CO_nom)/(1 + syst_TR_frac)
        "Venous pressure used for initialization and calculation of tissue venules resistances"
        annotation (Dialog(tab="Systemic", group="Tissues"), enable = false);

      parameter Physiolibrary.Types.Volume tissues_ZPV_nom=0.002304
        "Tissues and small arteries and veins nominal pressure. Used for calculation of tissues total volume"
        annotation(Dialog(tab="Systemic",   group="Tissues"));
      parameter Physiolibrary.Types.Volume tissues_SV_nom=0.000795
        "Tissues and small arteries and veins nominal stressed volume. Used for calculation of nominal tissues compliance"
        annotation(Dialog(tab="Systemic",   group="Tissues"));
      parameter Physiolibrary.Types.VolumeFlowRate tissues_CO_nom=0.000105
        "Nominal flow through systemic tissues. Used for calculation of arteriole and venule resistances."
        annotation(Dialog(tab="Systemic",   group="Tissues"));
      parameter Physiolibrary.Types.Fraction tissues_eta_Ra=4.2625
        "Factor affecting arterioles resistance in tissues"
        annotation(Dialog(tab="Systemic",   group="Tissues"));
      parameter Physiolibrary.Types.Time tissues_tau_R=1.2e-05
        "Integrative time constant for delaying the phi effect on arterioles resistance"
        annotation(Dialog(tab="Systemic",   group="Tissues"));
      parameter Physiolibrary.Types.Fraction tissues_eta_Rv=tissues_eta_Ra
        "Exponential factor affecting venules resistance"
        annotation (Dialog(tab="Systemic", group="Tissues"));
      parameter Boolean UseNonLinear_TissuesCompliance = false "Use nonlinear tissues PV chars, using the log Vmax suggested by Hardy and collins and used in Pstras 2017"
        annotation(choices(checkBox=true), Dialog(tab = "Systemic", group = "Tissues"));
      parameter Boolean tissues_UseStraighteningReaction2Phi = false "Use V_n dependency on phi (instead of V_u and V_max as used in Pstras)"
        annotation(choices(checkBox=true), Dialog(tab = "Systemic", group = "Tissues"));
      parameter Physiolibrary.Types.Fraction tissues_V_max_breakPoint_Frac=1e-06
        "Fraction of V_Max, that sets the point for changing exponential to linear PV characteristics. E.g. V_max = 500ml, frac = 1% > exponential up to 495ml, linear after"
                                               annotation(Evaluate=false, choices(checkBox=true), Dialog(enable = UseNonLinear_TissuesCompliance and tissues_UseStraighteningReaction2Phi, tab = "Systemic", group = "Tissues"));

    //  parameter Boolean UseNonLinear_TissuesCompliance_PhiEffect = false
    //     annotation(choices(checkBox=true), Dialog(enable = UseNonLinear_TissuesCompliance, group = "Tissues"));
      parameter Physiolibrary.Types.Fraction tissues_eta_C=0.2
        "Effect of sympathetic activation (phi) on tissue's compliance"
        annotation(Dialog(enable=UseNonLinear_TissuesCompliance,   tab="Systemic",   group="Tissues"));
      parameter Fraction tissues_gamma=1   "Nonlinear tissues compliance steepness to set Vmax. Vmax = Vn + gamma*(Vn - zpv)"
        annotation (Dialog(enable = UseNonLinear_TissuesCompliance, tab = "Systemic", group = "Tissues"));

    // veins
      parameter Boolean veins_UseNonLinearVeins=true
        "Use nonlinear compliance model in all large veins"                                                      annotation(choices(checkBox=true), Dialog(tab=
              "Systemic",                                                                                                                                                    group="Veins"));
      parameter Real veins_linearE_rel(unit = "Pa") =  2454 "Venous linear compliance relative to v0 [Pa/m6], only if using linear veins" annotation(choices(checkBox=true), Dialog(tab = "Systemic", group = "Veins", enable=not
              veins_UseNonLinearVeins));
      parameter Real veins_linearV0_rel(unit = "1") =  0.9668 "Venous zero pressure volume [m3], only if using linear veins" annotation(choices(checkBox=true), Dialog(tab = "Systemic", group = "Veins", enable=not
              veins_UseNonLinearVeins));
      parameter Boolean veins_UsePhiEffect=true "Use venoconstriction in all large veins" annotation(choices(checkBox=true), Dialog(tab = "Systemic", group = "Veins"));
    //  parameter Pressure venous_p0 = 666.6 "Venous pressure used for initialization"    annotation(Dialog(tab = "Systemic", group = "Veins"));
      // parameter Real gamma;
      // parameter Real alpha;
      parameter Fraction veins_C_phi = 0 "Phi effect on linear veins compliance" annotation(Dialog(tab = "Systemic", group = "Veins"));
      parameter Fraction veins_ZPV_phi = 0 "Phi effect on linear veins ZPV" annotation(Dialog(tab = "Systemic", group = "Veins"));

      parameter Fraction veins_gamma=0.5    "Fraction of minimal collapsing diameter to nominal diameter"    annotation(Dialog(tab = "Systemic", group = "Veins"));
      parameter Fraction veins_alpha=5   "ONLY for unused alpha-based tension model> how many times the tension is larger for maximal activation from resting activation at nominal diameter"    annotation(Dialog(tab = "Systemic", group = "Veins"));
      parameter Real veins_phi_no =  0.2 "Offset of nonlinear phi adjustment, i.e. largest phi, that produces zero activation" annotation(Dialog(tab = "Systemic", group = "Veins"));

      parameter Boolean veins_delayed_activation = true annotation(choices(checkBox=true), Dialog(tab = "Systemic", group = "Veins"));
      parameter Time veins_activation_tau(displayUnit="s")=0.1
                                                "Integration delay for venous tone activation"    annotation(Dialog(tab = "Systemic", group = "Veins", enable = veins_delayed_activation));
      parameter Time veins_relaxation_tau(displayUnit="s")=10
                                                "Integration delay for venous tone activation"    annotation(Dialog(tab = "Systemic", group = "Veins", enable = veins_delayed_activation));

      parameter Physiolibrary.Types.Fraction veins_diameter_correction=1.5
        "Venous diameter enlargement to correspond to the arterial side"                                                 annotation(Dialog(tab=
              "Systemic",                                                                                                                                    group="Veins"));

      parameter Boolean veins_ignoreViscosityResistance = true "Ignore viscoelastic resistance in all large veins (negligible, but computation-heavy)" annotation(choices(checkBox=true), Dialog(tab = "Systemic", group = "Veins"));
    //  parameter Boolean veins_UseViscoElasticDelay = false;
    //   parameter Fraction gamma =   0.5

    // vessel constants
      parameter Real vessel_a=0.2802               annotation (Dialog(tab = "Systemic", group = "Vessel parameter computations"));
      parameter Real vessel_b(unit = "m-1") = -505.3 annotation (Dialog(tab = "Systemic", group = "Vessel parameter computations"));
      parameter Real vessel_c=0.1324               annotation (Dialog(tab = "Systemic", group = "Vessel parameter computations"));
      parameter Real vessel_d(unit = "m-1") = -11.14 annotation (Dialog(tab = "Systemic", group = "Vessel parameter computations"));

      parameter Real blood_mu(unit = "J.s.m-3") = 0.004 annotation (Dialog(tab = "Systemic", group = "Vessel parameter computations"));
      parameter Real blood_rho(unit = "J.s2.m-5") = 1050 annotation (Dialog(tab = "Systemic", group = "Vessel parameter computations"));

        // EXERCISE PARAMS
      parameter Fraction chi_phi=1   "Exercise level"  annotation (Dialog(tab="Exercise"));

      parameter Physiolibrary.Types.Fraction tissues_chi_Ra=13.625
        "Exercise effect factor on arterial tissue resistance"
        annotation (Dialog(tab="Exercise"));
      parameter Physiolibrary.Types.Fraction tissues_chi_Rv=0
        "Exercise effect factor on venous tissue resistance"
        annotation (Dialog(tab="Exercise"));
      parameter Physiolibrary.Types.Fraction tissues_chi_C=0.09
        "Effect of exercise induced relaxation on tissue compliance"
        annotation(Dialog(tab="Exercise"));
      parameter Physiolibrary.Types.Fraction veins_chi_pump=0
        "Pumping factor simulating contraction of large veins"
        annotation (Dialog(tab="Exercise"));
      parameter Fraction eta_adenosine = 0 "Effect of adenosine on total peripheral resistance"
        annotation (Dialog(tab = "Systemic", group = "Tissues"));

      // BAROREFLEX

      parameter Time baro_hr_delay = 0 "Delay between phi and HR";
      parameter Boolean baro_useAbsolutePressureTerm = true "Use absolute distention term instead being relative to pulse pressure only"
        annotation(choices(checkBox=true), Dialog(tab = "Baroreflex", group = "Afferent baroreceptors"));
      parameter Real baro_d0 = 1.5 "Relative absolute term multiplicator - not used in pure pulse-pressure- sensitive abroreflex"
        annotation(choices(checkBox=true), Dialog(tab = "Baroreflex", group = "Afferent baroreceptors", enable = baro_useAbsolutePressureTerm));
      parameter Time baro_tau_s=60
        "Time constant of baroreflex moving setpoint"
        annotation(Dialog(tab="Baroreflex",   group="Afferent baroreceptors"));
      parameter Real baro_a=0.0651 annotation(Dialog(tab="Baroreflex",   group="Afferent baroreceptors"));
      parameter Real baro_b=0.2004 annotation(Dialog(tab="Baroreflex",   group="Afferent baroreceptors"));
      parameter Real baro_f0=300 "Base firing frequency" annotation(Dialog(tab="Baroreflex",   group="Afferent baroreceptors"));

      parameter Real baro_xi_delta0=0.25
        "Multiplicator factor for fine tuning baroreceptors delta0 to take its different compliance into account. Used for identification single parameter instead of two separately."
          annotation(Dialog(tab="Baroreflex",   group="Afferent baroreceptors"));
      parameter Real baro_delta0_aor =  0.6 "delta0 threshold for aortic sensor"
        annotation(Dialog(tab = "Baroreflex", group = "Afferent baroreceptors"));
      parameter Real baro_delta0_car =  0.55 "delta0 threshold for carotid sensor - 0.55 (Kosinski)"
        annotation(Dialog(tab = "Baroreflex", group = "Afferent baroreceptors"));
      // Boolean baro_useStimulationInput = false
      //     annotation(Dialog(tab = "Baroreflex", group = "Afferent baroreceptors"));
      // Frequency baro_stimulation

      parameter Fraction baro_g=0.54   "Aortic / carotid sensor weight ratio [1]"
        annotation(Dialog(tab = "Baroreflex", group = "Efferent baroreflex"));
      parameter Frequency baro_fsn=0.036   "rising factor of the sympathetic activation phi [Hz]"
        annotation(Dialog(tab = "Baroreflex", group = "Efferent baroreflex"));
      parameter Real baro_f1 = 0.0031 "decrease factor of the phi"
        annotation(Dialog(tab = "Baroreflex", group = "Efferent baroreflex"));

      // PULMONARY
      parameter Physiolibrary.Types.VolumeFlowRate pulm_CO_target=8.0833333333333e-05
                                                                  "mL/min"
        annotation(Dialog(tab = "Pulmonary", group = "General"));
      parameter Physiolibrary.Types.HydraulicCompliance pulm_C_PV=1.8751539396141e-07
                                                                                   "Pulmonary venous compliance"
        annotation(Dialog(tab = "Pulmonary", group = "General"));
      parameter Physiolibrary.Types.HydraulicCompliance pulm_C_PA=4.0503325095665e-08                                                   "Pulmonary arterial compliance, CO_target/15/_HR mL/mmHg"
        annotation(Dialog(tab = "Pulmonary", group = "General"));
      parameter Physiolibrary.Types.Pressure pulm_P_PV_nom = 1066.56 "Nominal pressure for pulmonary volume" annotation(Dialog(tab="Pulmonary",   group="General"));
      parameter Physiolibrary.Types.Volume pulm_V_PV_start = pulm_C_PV*pulm_P_PV_nom + V_PV_init "Initial volume of pulmonary veins, with regards to compliance and V_PV_init"     annotation(Dialog(tab="Pulmonary",   group="General"));

      parameter Physiolibrary.Types.HydraulicResistance pulm_R=21441532.959301
        "Pulmonary vasculature resistance, mmHg*sec/mL "
        annotation(Dialog(tab="Pulmonary",   group="General"));

      parameter Physiolibrary.Types.VolumeFlowRate pulm_q_nom_maxq = 0.00025
                                                                  "Flow at which the resistance is halved"
        annotation(Dialog(tab = "Pulmonary", group = "General"));

      parameter Real pulm_R_exp=1
        "Pulmonary vasculature nonlinear resistance exponent, as in dp = R*e^(exp). Not used when pulm_q_nom_maxq is used"
        annotation(Dialog(tab="Pulmonary",   group="General"));
      parameter Physiolibrary.Types.HydraulicResistance pulm_PV_R_vis=1e6
        "Pulmonary veins viscoelastic resistance"
        annotation(Dialog(tab="Pulmonary",   group="General"));
      parameter Fraction pulm_tp_pleural_frac=1   "Pressure drop of airway pressure applied to heart and systemic due to pleural sac as a fraction of thoracic pressure"
      annotation(Dialog(tab="Pulmonary",   group="General"));
    //   parameter Physiolibrary.Types.Pressure pulm_dP_pleural=0
    //     "Pressure drop of airway pressure applied to heart and systemic due to pleural sac"
    //     annotation(Dialog(tab="Pulmonary",   group="General"));

    // OTHER - Limit result set
      parameter Boolean hideSystemic = false "Suppress writing output from systemic circulation, unless allowed by low level variables"
        annotation(choices(checkBox=true), Dialog(tab = "Other", group = "Hide results from dataset"));
      parameter Boolean hidePulmonary = false "Suppress writing output from pulmonary circulation, unless allowed by low level variables"
        annotation(choices(checkBox=true), Dialog(tab = "Other", group = "Hide results from dataset"));
      parameter Boolean hideHeart = false "Suppress writing output from heart, unless allowed by low level variables"
        annotation(choices(checkBox=true), Dialog(tab = "Other", group = "Hide results from dataset"));

      parameter Boolean hideLevel0 = false "Suppress writing output of non-physiological variables, used for debugging the model."
        annotation(choices(checkBox=true), Dialog(tab = "Other", group = "Hide results from dataset - levels"));
      parameter Boolean hideLevel1 = false "Suppress writing output of physiological, but non-important variables, used for deeper insight."
        annotation(choices(checkBox=true), Dialog(tab = "Other", group = "Hide results from dataset - levels"));
      parameter Boolean EvaluateFunctionalParams = true "Calculate some additional variables out of the results (e.g. CO, SV, EDV..). Disable for faster simulation."
        annotation(choices(checkBox=true), Dialog(tab = "Other", group = "Other"));
      parameter Real dummy = 1 "Dummy parameter not bound anywhere"
          annotation(choices(checkBox=true), Dialog(tab = "Other", group = "Other"));

      parameter Fraction experimental_zpv_factor=0.5   "A fraction of venous nominal diameter which creates ZPV for linear veins" annotation(Dialog(tab="Other"));
      parameter Fraction experimental_C_factor=1   "A fraction of nominal C" annotation(Dialog(tab="Other"));
      parameter Real experimental_L0=0.907 annotation(Dialog(tab="Other"));
      parameter Modelica.Units.SI.Time Td_phi_syst=0 annotation(Dialog(tab="Other"));
      parameter Modelica.Units.SI.Time Td_phi_hr=0 annotation(Dialog(tab="Other"));
      parameter Modelica.Units.SI.Time Td_phi_heart=0 annotation(Dialog(tab="Other"));
        annotation(Dialog(tab = "Heart", group = "Simple atria"),
                     Dialog(tab = "Heart", group = "TriSegOttesen drive"),
                   defaultComponentName =     "settings",
                 defaultComponentPrefixes = "outer",
                 missingInnerMessage =      "The Settings object is missing. Add a Settings to the top level and make it 'outer'",
      Icon(coordinateSystem(preserveAspectRatio=false), graphics={
              Polygon(
              points={{80,100},{40,100},{40,98},{40,60},{-60,-40},{-100,-40},{-100,-80},
                  {-80,-60},{-60,-80},{-80,-100},{-40,-100},{-40,-60},{60,40},{100,40},
                  {100,80},{80,60},{60,80},{80,100}},
              lineColor={0,0,0},
              fillColor={28,108,200},
              fillPattern=FillPattern.Solid), Polygon(
              points={{-80,100},{-40,100},{-40,98},{-40,60},{60,-40},{100,-40},{100,
                  -80},{80,-60},{60,-80},{80,-100},{40,-100},{40,-60},{-60,40},{-100,
                  40},{-100,80},{-80,60},{-60,80},{-80,100}},
              lineColor={0,0,0},
              fillColor={238,46,47},
              fillPattern=FillPattern.Solid)}),                      Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end Settings;

    package Interfaces
      extends Modelica.Icons.InterfacesPackage;

      model Pq_terminator_p
        "creates a P type according to Soroushs definition, therefore requires pressure (u) as an input"
        replaceable Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_a
          annotation (Placement(transformation(extent={{90,-10},{110,10}}),
              iconTransformation(extent={{90,-10},{110,10}})));
        input Physiolibrary.Types.Pressure u;
        Physiolibrary.Types.VolumeFlowRate v=port_a.q;
      equation
        u = port_a.pressure;
        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                Rectangle(
                extent={{-100,100},{-20,-100}},
                lineThickness=0.5,
                pattern=LinePattern.None,
                lineColor={0,0,0},
                fillColor={244,125,35},
                fillPattern=FillPattern.Solid), Rectangle(
                extent={{-100,100},{100,-100}},
                lineColor={28,108,200},
                lineThickness=0.5),
              Text(
                extent={{-86,-42},{-30,40}},
                lineColor={0,0,0},
                pattern=LinePattern.None,
                lineThickness=0.5,
                fillColor={244,125,35},
                fillPattern=FillPattern.None,
                textString="P
type"),       Text(
                extent={{-20,-100},{100,-20}},
                lineColor={0,0,0},
                pattern=LinePattern.None,
                lineThickness=0.5,
                fillColor={244,125,35},
                fillPattern=FillPattern.None,
                textString="%name")}),                                 Diagram(
              coordinateSystem(preserveAspectRatio=false)));
      end Pq_terminator_p;

      model Pq_terminator_v
        "creates a V type according to Soroushs definition, therefore requires flow (v) as an input"
        replaceable Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_a
          annotation (Placement(transformation(extent={{90,-10},{110,10}}),
              iconTransformation(extent={{90,-10},{110,10}})));
        Physiolibrary.Types.Pressure u = port_a.pressure;
        input Physiolibrary.Types.VolumeFlowRate v;
      equation
        v =port_a.q;
        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                Rectangle(
                extent={{-100,100},{-20,-100}},
                lineThickness=0.5,
                pattern=LinePattern.None,
                lineColor={0,0,0},
                fillColor={244,125,35},
                fillPattern=FillPattern.Solid), Rectangle(
                extent={{-100,100},{100,-100}},
                lineColor={28,108,200},
                lineThickness=0.5),
              Text(
                extent={{-86,-42},{-30,40}},
                lineColor={0,0,0},
                pattern=LinePattern.None,
                lineThickness=0.5,
                fillColor={244,125,35},
                fillPattern=FillPattern.None,
                textString="V
type"),       Text(
                extent={{-20,-100},{100,-20}},
                lineColor={0,0,0},
                pattern=LinePattern.None,
                lineThickness=0.5,
                fillColor={244,125,35},
                fillPattern=FillPattern.None,
                textString="%name")}),                                 Diagram(
              coordinateSystem(preserveAspectRatio=false)));
      end Pq_terminator_v;

      model Pq_terminator_p_leveled
        import ADAN_main;
        extends ADAN_main.Components.Interfaces.Pq_terminator_p(redeclare
            ADAN_main.Components.Interfaces.HydraulicPort_b_leveled port_a);
        parameter Modelica.Units.SI.Height level=0;
      equation
        port_a.position = level;

      end Pq_terminator_p_leveled;

      model Pq_terminator_q_leveled
        import ADAN_main;
        extends ADAN_main.Components.Interfaces.Pq_terminator_v(redeclare
            ADAN_main.Components.Interfaces.HydraulicPort_b_leveled port_a);
        parameter Modelica.Units.SI.Height level=0;
      equation
        port_a.position = level;

      end Pq_terminator_q_leveled;

      partial model OnePort "Hydraulical OnePort, with own volume"

        Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a      q_in "Volume inflow" annotation (Placement(
              transformation(extent={{-114,-14},{-86,14}})));
        Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b      q_out "Volume outflow"
                               annotation (Placement(
              transformation(extent={{86,-14},{114,14}})));
         Physiolibrary.Types.VolumeFlowRate volumeFlowRate "Volumetric flow";
         Physiolibrary.Types.Pressure dp "Pressure gradient";
         Physiolibrary.Types.Volume volume "Total volume";
      equation
        volumeFlowRate =q_in.q;
        dp = q_in.pressure - q_out.pressure;
      end OnePort;

      model OnePort_None
        "A flow-through component. Does nothing. Used for redeclarations."
        extends Interfaces.OnePort;
      equation
      //  dp = 0;
        volume = 0;
      //  q_in.q + q_out.q = 0;
        connect(q_in, q_out) annotation (Line(
            points={{-100,1.77636e-15},{1,1.77636e-15},{1,0},{100,0}},
            color={0,0,0},
            thickness=1));
        annotation (Icon(graphics={Line(points={{-110,0},{88,0},{110,0}}, color={0,0,0}), Text(
                extent={{-80,0},{80,60}},
                lineColor={0,0,0},
                textString="NIL")}));
      end OnePort_None;

      function pow
        input Real i;
        input Real j;
        output Real pou;
      algorithm
        pou :=i^j;
      end pow;

      model LeveledPressureFlowConverter
        "Converts PressureFlow to leveled pressure flow and back at given level."
        parameter Physiolibrary.Types.Height level = 0 "Reference level from which to start counting the position.";
        HydraulicPort_b_leveled leveledPort_b
       annotation (Placement(transformation(extent={{30,-10},{50,10}})));
        Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_a annotation (
            Placement(transformation(extent={{-50,-10},{-30,10}}),
              iconTransformation(extent={{-50,-10},{-30,10}})));
        parameter Boolean useLevel = true;

      equation
        leveledPort_b.pressure = port_a.pressure;
        leveledPort_b.q + port_a.q = 0;
        if useLevel then
          leveledPort_b.position = level;
        end if;

        annotation (Icon(coordinateSystem(preserveAspectRatio=false, extent={{
                  -40,-40},{40,40}}), graphics={Polygon(
                points={{0,40},{40,0},{0,-40},{-40,0},{0,40}},
                lineColor={162,29,33},
                lineThickness=0.5,
                fillColor={215,215,215},
                fillPattern=FillPattern.Solid), Line(
                points={{-20,0},{20,0}},
                color={162,29,33},
                thickness=0.5,
                arrow={Arrow.Open,Arrow.Open})}), Diagram(coordinateSystem(
                preserveAspectRatio=false, extent={{-40,-40},{40,40}})));
      end LeveledPressureFlowConverter;

      connector HydraulicPort_a_leveled
        extends Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a;
        Modelica.Units.SI.Height position;
          annotation (
          defaultComponentName="leveledPort_a",
          Icon(graphics={Ellipse(
                  extent={{-22,20},{18,-20}},
                  lineColor={162,29,33},
                  fillColor={238,46,47},
                  fillPattern=FillPattern.Solid,
                  lineThickness=0.5)}), Diagram(graphics={
                                     Ellipse(
                  extent={{-20,18},{20,-22}},
                  lineColor={162,29,33},
                  fillColor={238,46,47},
                  fillPattern=FillPattern.Solid,
                  lineThickness=0.5)}));
      end HydraulicPort_a_leveled;

      connector HydraulicPort_b_leveled
        extends Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b;
        Modelica.Units.SI.Height position;
          annotation (
          defaultComponentName="leveledPort_b",
          Icon(graphics={Ellipse(
                  extent={{-22,20},{18,-20}},
                  lineColor={162,29,33},
                  fillColor={238,46,47},
                  fillPattern=FillPattern.Solid,
                  lineThickness=0.5)}), Diagram(graphics={
                                     Ellipse(
                  extent={{-20,20},{20,-20}},
                  lineColor={162,29,33},
                  fillColor={238,46,47},
                  fillPattern=FillPattern.Solid,
                  lineThickness=0.5)}));

      end HydraulicPort_b_leveled;
    end Interfaces;

    package Signals
      extends Modelica.Icons.SourcesPackage;
      model pressure_envelope
        Physiolibrary.Types.RealIO.PressureInput p annotation (Placement(
              transformation(extent={{-60,-40},{-20,0}}), iconTransformation(extent={{
                  -60,-40},{-20,0}})));
        Modelica.Blocks.Interfaces.BooleanInput beat annotation (Placement(
              transformation(extent={{-60,0},{-20,40}}), iconTransformation(extent={{-60,
                  0},{-20,40}})));
        parameter Physiolibrary.Types.Time T=0.01 "sampling period" annotation (Dialog(enable=enable));
        Physiolibrary.Types.Time t = if enable then T else Modelica.Constants.inf;
        Physiolibrary.Types.Pressure ps;
        Physiolibrary.Types.Pressure pd;
        Physiolibrary.Types.Pressure pm=pd + 1/3*(ps - pd);
        Physiolibrary.Types.Pressure pmax;
        //= max(pmax, arteries_ADAN86.aortic_arch_C46.u_in);
        Physiolibrary.Types.Pressure pmin(start=min_max);
        Boolean B=sample(0, t);
        Integer z;
        constant Physiolibrary.Types.Pressure min_max = 1e5 "Maximal value of the diastolic pressure";
        parameter Boolean enable = true annotation(choices(checkBox=true));
        Boolean triggerFunc[:] = if not enable then {false, false} else {beat,B};
      equation
        when triggerFunc then
          if B and beat == pre(beat) then
            z = pre(z) + 1;
            ps = pre(ps);
            pd = pre(pd);

            pmax = if pre(pmax) > p then pre(pmax) else p;
            pmin = if pre(pmin) < p then pre(pmin) else p;
          else
            z = pre(z) + 100;
            ps = pre(pmax);
            pd = pre(pmin);

            pmax = 0;
            pmin = min_max;
          end if;
        end when;

        annotation (Icon(coordinateSystem(preserveAspectRatio=false, extent={{-40,-40},
                  {40,40}})), Diagram(coordinateSystem(preserveAspectRatio=false,
                extent={{-40,-40},{40,40}})));
      end pressure_envelope;

      model ConditionalConnection "Debug or experimental switch for intercepting the through signal. Does not affect the signal at all by default."
        extends Modelica.Blocks.Interfaces.SISO;
        extends Modelica.Blocks.Interfaces.SignalSource;
        Modelica.Blocks.Sources.Constant const1(k=disconnectedValue)
          annotation (Placement(transformation(extent={{-6,-48},{-22,-34}})));
        Modelica.Blocks.Logical.Switch switch1
          annotation (Placement(transformation(extent={{-20,-10},{0,10}})));
        Modelica.Blocks.Sources.BooleanExpression useClosedLoopHR(y=not disconnected)
          annotation (Placement(transformation(extent={{-88,-46},{-68,-26}})));
      /*  
  Modelica.Blocks.Interfaces.RealInput u1 annotation (Placement(transformation(
          rotation=0, extent={{-70,-8},{-50,12}}), iconTransformation(extent={{-60,-10},
            {-40,10}})));
  Modelica.Blocks.Interfaces.RealOutput y annotation (Placement(transformation(
          rotation=0, extent={{52,-10},{72,10}}), iconTransformation(extent={{50,
            -10},{70,10}})));
*/
      parameter Boolean disconnected=false   "When true, the parameter value is used as fixed output" annotation(choices(checkBox=true));
      parameter Real disconnectedValue = 0 "output for disconnected = true. Use SI units!" annotation(Dialog(enable = disconnected));
        MyDelay myDelay(delayTime=delayTransport_Time, delayEnabled=
              delayTransport_Enabled)
          annotation (Placement(transformation(extent={{40,-10},{60,10}})));
        parameter Boolean delayTransport_Enabled=false
          "Enable pure constant transport delay"
                                             annotation(choices(checkBox=true));
        parameter Modelica.Units.SI.Time delayTransport_Time=0
          "Delay time of output with respect to input signal"
          annotation (Dialog(enable=delayTransport_Enabled));
        parameter Boolean delayIntegral_Enabled=false
          "Enable assymetrical integral delay"
                                             annotation(choices(checkBox=true));
        parameter Modelica.Units.SI.Time delayInt_Act=0.001
          "Delay time of output with respect to input signal"
          annotation (Dialog(enable=delayIntegral_Enabled));
        parameter Modelica.Units.SI.Time delayInt_Relax=0.001
          "Delay time of output with respect to input signal for activation"
          annotation (Dialog(enable=delayIntegral_Enabled));

        Modelica.Blocks.Nonlinear.Limiter limiter(uMax=uMax, uMin=uMin)
          annotation (Placement(transformation(extent={{70,-10},{90,10}})));
        parameter Real uMax=Modelica.Constants.inf "Upper limits of input signals";
        parameter Real uMin=-uMax "Lower limits of input signals";
        Modelica.Blocks.Math.Gain         gain(k=phi_gain)
          annotation (Placement(transformation(extent={{-90,-10},{-70,10}})));
        Modelica.Blocks.Sources.Constant const_shiftOffset(k=const_offset)
                    if not UseAdditionalInput
          annotation (Placement(transformation(extent={{-98,24},{-82,38}})));
      parameter Boolean UseAdditionalInput =  false "Use another input" annotation(choices(checkBox=true));
        parameter Real phi0=0.25 "Default phi0";
        parameter Real phi_gain=1 "Phi Gain multiplier";
        Modelica.Blocks.Math.Add         add3_1
          annotation (Placement(transformation(extent={{-56,1},{-40,15}})));
        Modelica.Blocks.Interfaces.RealInput
                  u1 if UseAdditionalInput
                    "Connector of Real input signal" annotation (Placement(
              transformation(extent={{-140,80},{-100,120}}),iconTransformation(extent={{-140,80},
                  {-100,120}})));
        parameter Real const_offset=-(phi_gain - 1)*phi0 annotation(Dialog(enable = not UseAdditionalInput));
        IntegralActRelaxDelay integralActRelaxDelay(
          delayEnabled=delayIntegral_Enabled,
          phi0=phi0,
          delayTimeAct=delayInt_Act,
          delayTimeRelax=delayInt_Relax) annotation (Placement(transformation(
                rotation=0, extent={{10,-10},{30,10}})));
      protected
        Boolean showLimiterLine = not disconnected and (uMax <> Modelica.Constants.inf or uMax <> -uMin);
      equation

        connect(switch1.u3, const1.y) annotation (Line(points={{-22,-8},{-32,-8},
                {-32,-41},{-22.8,-41}},
                                   color={0,0,127}));
        connect(useClosedLoopHR.y,switch1. u2) annotation (Line(points={{-67,-36},
                {-36,-36},{-36,0},{-22,0}},     color={255,0,255}));
        connect(switch1.y,integralActRelaxDelay.u)
          annotation (Line(points={{1,0},{10,0}},    color={0,0,127}));
        connect(limiter.y, y) annotation (Line(points={{91,0},{110,0}},
              color={0,0,127}));
        connect(u, gain.u)
          annotation (Line(points={{-120,0},{-92,0}}, color={0,0,127}));
        connect(switch1.u1, add3_1.y) annotation (Line(points={{-22,8},{-39.2,8}},
                            color={0,0,127}));
        connect(gain.y, add3_1.u2) annotation (Line(points={{-69,0},{-60,0},{
                -60,3.8},{-57.6,3.8}},
                               color={0,0,127}));
        connect(const_shiftOffset.y, add3_1.u1) annotation (Line(points={{-81.2,
                31},{-68,31},{-68,12.2},{-57.6,12.2}},
                                            color={0,0,127}));
        connect(u1, add3_1.u1) annotation (Line(points={{-120,100},{-68,100},{-68,12.2},
                {-57.6,12.2}},
                             color={0,0,127}));
        connect(integralActRelaxDelay.y, myDelay.u)
          annotation (Line(points={{30,0},{38,0}}, color={0,0,127}));
        connect(myDelay.y, limiter.u)
          annotation (Line(points={{61,0},{68,0}}, color={0,0,127}));
        annotation (Diagram(coordinateSystem(extent={{-100,-100},{100,100}})),
                                                                           Icon(
              coordinateSystem(extent={{-100,-100},{100,100}}),
                                                            graphics={
              Rectangle(
                extent={{-60,20},{60,-40}},
                pattern=LinePattern.None,
                fillColor={215,215,215},
                fillPattern=FillPattern.Solid,
                lineColor={0,0,0}),
              Line(points={{-40,0},{52,0}}, color={28,108,200}),
              Rectangle(
                extent={{-10,10},{10,-10}},
                fillColor=DynamicSelect({0,140,72}, if not disconnected then {0,140,72} else {238,46,47}),
                fillPattern=FillPattern.Solid,
                pattern=LinePattern.None,
                lineColor={0,0,0}),
              Text(
                visible = DynamicSelect(true, if disconnected then true else false),
                extent={{-60,-34},{60,-14}},
                lineColor={28,108,200},
                fillColor={238,46,47},
                fillPattern=FillPattern.None,
                textString="%disconnectedValue"),
              Line(
                visible = DynamicSelect(true, if showLimiterLine  then true else false),
                points={{-42,-36},{-12,-36},{10,-16},{52,-16}},
                color={238,46,47},
                thickness=0.5)}));
      end ConditionalConnection;

      model MyDelay
        extends Modelica.Blocks.Interfaces.SISO;
        parameter Modelica.Units.SI.Time delayTime(start=1)
          "Delay time of output with respect to input signal";
        parameter Boolean delayEnabled=false;

        //  parameter Physiolibrary.Types.Time phiDelay = 0;
        //  Physiolibrary.Types.RealIO.FractionInput phi_in annotation (Placement(
        //       transformation(extent={{-100,-100},{-60,-60}}),
        //                                                     iconTransformation(extent={{-100,60},
        //               {-60,100}})));

      equation
        if delayEnabled then
          y = delay(
            u,
            delayTime,
            10);
        else
          y = u;
        end if;
        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
              Text(extent={{8.0,-142.0},{8.0,-102.0}}, textString="delayTime=%delayTime"),
              Rectangle(
                extent={{-100,-100},{100,100}},
                lineColor={0,0,127},
                fillColor={255,255,255},
                fillPattern=FillPattern.Solid),
              Line(
                points={{-92.0,0.0},{-80.7,34.2},{-73.5,53.1},{-67.1,66.4},{-61.4,74.6},
                    {-55.8,79.1},{-50.2,79.8},{-44.6,76.6},{-38.9,69.7},{-33.3,59.4},{
                    -26.9,44.1},{-18.83,21.2},{-1.9,-30.8},{5.3,-50.2},{11.7,-64.2},{17.3,
                    -73.1},{23.0,-78.4},{28.6,-80.0},{34.2,-77.6},{39.9,-71.5},{45.5,-61.9},
                    {51.9,-47.2},{60.0,-24.8},{68.0,0.0}},
                color={0,0,127},
                smooth=Smooth.Bezier),
              Line(
                points={{-62.0,0.0},{-50.7,34.2},{-43.5,53.1},{-37.1,66.4},{-31.4,74.6},
                    {-25.8,79.1},{-20.2,79.8},{-14.6,76.6},{-8.9,69.7},{-3.3,59.4},{3.1,
                    44.1},{11.17,21.2},{28.1,-30.8},{35.3,-50.2},{41.7,-64.2},{47.3,-73.1},
                    {53.0,-78.4},{58.6,-80.0},{64.2,-77.6},{69.9,-71.5},{75.5,-61.9},{
                    81.9,-47.2},{90.0,-24.8},{98.0,0.0}},
                color={160,160,164},
                smooth=Smooth.Bezier)}), Diagram(coordinateSystem(preserveAspectRatio=
                 false)));
      end MyDelay;

      model Volume2Distention
        Physiolibrary.Types.RealIO.VolumeInput volume annotation (Placement(
              transformation(extent={{-120,-20},{-80,20}}), iconTransformation(extent={{-120,
                  -20},{-80,20}})));
        parameter Physiolibrary.Types.Volume v0;
        Modelica.Units.SI.Diameter d;
        Modelica.Units.SI.Diameter d0;
        Modelica.Units.SI.Length l_wall;
        Modelica.Units.SI.Length l0_wall;
        Physiolibrary.Types.RealIO.FractionOutput dr = dd "Distention ratio" annotation (Placement(
              transformation(extent={{90,-10},{110,10}}), iconTransformation(extent={{-10,-10},
                  {10,10}},
              rotation=0,
              origin={100,0})));

        parameter Modelica.Units.SI.Length l=1;
        Physiolibrary.Types.Fraction cd = l_wall/l0_wall "Circumferential distention";
        Physiolibrary.Types.Fraction dd = d/d0 "diameter distention";
      equation

        v0 = Modelica.Constants.pi*d0^2/4*l;
        volume = Modelica.Constants.pi*d^2/4*l;
        l_wall = Modelica.Constants.pi * d;
        l0_wall = Modelica.Constants.pi * d0;

        annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
              coordinateSystem(preserveAspectRatio=false)));
      end Volume2Distention;

      model PhiEffect
        Modelica.Blocks.Interfaces.RealInput u annotation (Placement(transformation(
                extent={{-120,-20},{-80,20}}), iconTransformation(extent={{-120,-20},{
                  -80,20}})));
        Modelica.Blocks.Interfaces.RealOutput y annotation (Placement(transformation(
                extent={{96,-10},{116,10}}), iconTransformation(extent={{92,-10},{112,
                  10}})));

      parameter Real factor = 0;
      Real ee;
      outer Physiolibrary.Types.Fraction phi_norm;
      // Physiolibrary.Types.Fraction phi_norm = time;
      equation
        y = u*ee;
        ee = exp((phi_norm-1)*factor);
        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                                                                     Text(
                extent={{-86,40},{94,100}},
                lineColor={28,108,200},
                textString="Effect"), Text(
                extent={{-80,-100},{80,40}},
                lineColor=DynamicSelect({28,108,200},
       if factor > 0 then {0,140,72} elseif factor < 0 then {238,46,47} else {28,108,200}),
                textString="%factor"),
              Rectangle(extent={{-100,100},{100,-100}}, lineColor={28,108,200})}),                      Diagram(
              coordinateSystem(preserveAspectRatio=false)));
      end PhiEffect;

      package DataFit
        model ReadData
          parameter Real stopTime=Modelica.Constants.inf
            "Last point before repeat";
          parameter Modelica.Units.SI.Time startTime=0
            "Start time of the repeat";

          parameter Integer ExperimentNr = 1;
          parameter String filename_base = "VEc_01_sup_0";
          // parameter Integer sequenceDigits = 2;
          // parameter Integer paddingZerosLength = max(0, sequenceDigits - String(ExperimentNr));
          // parameter String sequence = Strings.repeat(n, string="0") + String(ExperimentNr);
          parameter String path = "Scripts\\data\\Valsalva\\";
          parameter String filename = path + filename_base + String(ExperimentNr) + ".mat";
          constant Real const_mmHg2Pa = 133.32;
        Modelica.Blocks.Tables.CombiTable1Ds   tbl_thoracic_pressure(
            tableOnFile=true,
            tableName="thoracic_pressure",
            fileName=filename,
            smoothness=Modelica.Blocks.Types.Smoothness.LinearSegments,
            extrapolation=Modelica.Blocks.Types.Extrapolation.HoldLastPoint)
            annotation (Placement(transformation(extent={{-10,30},{10,50}})));
        Modelica.Blocks.Tables.CombiTable1Ds   tbl_arterial_pressure(
            tableOnFile=true,
            tableName="arterial_pressure",
            fileName=filename,
            smoothness=Modelica.Blocks.Types.Smoothness.LinearSegments,
            extrapolation=Modelica.Blocks.Types.Extrapolation.HoldLastPoint)
            annotation (Placement(transformation(extent={{-10,-10},{10,10}})));
        Modelica.Blocks.Tables.CombiTable1Ds   tbl_heart_rate(
            tableOnFile=true,
            tableName="heart_rate",
            fileName=filename,
            smoothness=Modelica.Blocks.Types.Smoothness.LinearSegments,
            extrapolation=Modelica.Blocks.Types.Extrapolation.HoldLastPoint)
            annotation (Placement(transformation(extent={{-10,-50},{10,-30}})));
          Physiolibrary.Types.RealIO.PressureOutput
                                                thoracic_pressure annotation (Placement(
                transformation(extent={{92,30},{112,50}}), iconTransformation(extent={{92,
                    30},{112,50}})));
          Physiolibrary.Types.RealIO.PressureOutput arterial_pressure annotation (Placement(
                transformation(extent={{92,-10},{112,10}}), iconTransformation(extent={{
                    92,-10},{112,10}})));
          Physiolibrary.Types.RealIO.FrequencyOutput heart_rate annotation (Placement(
                transformation(extent={{92,-50},{112,-30}}), iconTransformation(extent={
                    {92,-50},{112,-30}})));
          Modelica.Blocks.Math.Gain mmHg2Pa1(k=const_mmHg2Pa)
            annotation (Placement(transformation(extent={{40,30},{60,50}})));
          Modelica.Blocks.Math.Gain mmHg2Pa2(k=const_mmHg2Pa)
            annotation (Placement(transformation(extent={{40,-10},{60,10}})));
          Modelica.Blocks.Math.Gain BPM2Hz(k=1/60)
            annotation (Placement(transformation(extent={{40,-50},{60,-30}})));
          Modelica.Blocks.Sources.SawTooth sawTooth(
            amplitude=stopTime - startTime,
            period=stopTime - startTime,
            offset=startTime)
            annotation (Placement(transformation(extent={{-80,-10},{-60,10}})));
        equation
          connect(tbl_thoracic_pressure.y[1], mmHg2Pa1.u) annotation (Line(points={{11,40},
                  {38,40}},                       color={0,0,127}));
          connect(thoracic_pressure, mmHg2Pa1.y)
            annotation (Line(points={{102,40},{61,40}}, color={0,0,127}));
          connect(tbl_arterial_pressure.y[1], mmHg2Pa2.u) annotation (Line(points={{11,0},{
                  38,0}},                       color={0,0,127}));
          connect(arterial_pressure, mmHg2Pa2.y)
            annotation (Line(points={{102,0},{61,0}}, color={0,0,127}));
          connect(tbl_heart_rate.y[1], BPM2Hz.u) annotation (Line(points={{11,-40},{38,-40}},
                                            color={0,0,127}));
          connect(heart_rate, BPM2Hz.y)
            annotation (Line(points={{102,-40},{61,-40}}, color={0,0,127}));
          connect(sawTooth.y, tbl_thoracic_pressure.u) annotation (Line(points={{-59,0},
                  {-36,0},{-36,40},{-12,40}}, color={0,0,127}));
          connect(sawTooth.y, tbl_arterial_pressure.u)
            annotation (Line(points={{-59,0},{-12,0}}, color={0,0,127}));
          connect(sawTooth.y, tbl_heart_rate.u) annotation (Line(points={{-59,0},{-36,0},
                  {-36,-40},{-12,-40}}, color={0,0,127}));
        annotation (uses(Modelica(version="3.2.3")), experiment(StopTime=100,
              __Dymola_NumberOfIntervals=50));
        end ReadData;

        model BaroreflexFit

          ReadData readData(ExperimentNr=2)
            annotation (Placement(transformation(extent={{-100,0},{-80,20}})));
          Subsystems.Baroreflex.Baroreflex baroreflex(
            f1=0.0046,
            fsn=0.041,
            g=0.5,
            resetAt=0.0)
            annotation (Placement(transformation(extent={{42,14},{62,34}})));
          Subsystems.Baroreflex.Baroreceptor baroreceptorAortic(d=da)
            annotation (Placement(transformation(extent={{-8,24},{12,44}})));
          Subsystems.Baroreflex.Baroreceptor baroreceptorCarotid(d=dc)
            annotation (Placement(transformation(extent={{-8,0},{12,20}})));

        protected
          Modelica.Blocks.Interfaces.RealInput BPa annotation (Placement(transformation(
                  extent={{-34,30},{-14,50}}), iconTransformation(extent={{-2,30},{18,50}})));
        protected
          Modelica.Blocks.Interfaces.RealInput BPc annotation (Placement(transformation(
                  extent={{-34,0},{-14,20}}), iconTransformation(extent={{-2,30},{18,50}})));
        public
          Modelica.Blocks.Math.Add add(k1=-1)
            annotation (Placement(transformation(extent={{-62,30},{-42,50}})));
           parameter Physiolibrary.Types.Volume v0a(displayUnit="ml")=2.42E-06;
            parameter Physiolibrary.Types.Volume v0c(displayUnit="ml")=1.4E-07;
            parameter Physiolibrary.Types.HydraulicCompliance Ca= 2.13e-10;
            parameter Physiolibrary.Types.HydraulicCompliance Cc= 1.10e-11;
            Physiolibrary.Types.Volume Va = BPa*Ca;
            Physiolibrary.Types.Volume Vc = BPc*Cc;

          Real da = noEvent( if Va > 0 then sqrt(Va/v0a) else 0) "The distension ratio r/r0";
          Real dc = noEvent( if Vc > 0 then sqrt(Vc/v0c) else 0) "The distension ratio r/r0";
        equation
          connect(readData.arterial_pressure, add.u2) annotation (Line(points={{-79.8,10},
                  {-70,10},{-70,34},{-64,34}}, color={0,0,127}));
          connect(readData.thoracic_pressure, add.u1) annotation (Line(points={{-79.8,14},
                  {-74,14},{-74,46},{-64,46}}, color={0,0,127}));
          connect(baroreceptorAortic.fbr, baroreflex.aortic_BR)
            annotation (Line(points={{12,34},{42,34}},   color={0,0,127}));
          connect(baroreceptorCarotid.fbr, baroreflex.carotid_BR) annotation (Line(
                points={{12,10},{28,10},{28,14},{42,14}},   color={0,0,127}));
          connect(add.y, BPa)
            annotation (Line(points={{-41,40},{-24,40}}, color={0,0,127}));
          connect(readData.arterial_pressure, BPc)
            annotation (Line(points={{-79.8,10},{-24,10}}, color={0,0,127}));
        end BaroreflexFit;

        block ThoracicPressureFromData
          extends Modelica.Blocks.Interfaces.SO;
          ReadData readData
            annotation (Placement(transformation(extent={{-44,6},{-24,26}})));
          Physiolibrary.Types.RealIO.PressureOutput aortic_pressure
            "Connector of Real output signal" annotation (Placement(transformation(
                  extent={{100,-50},{120,-30}}), iconTransformation(extent={{100,-50},{120,
                    -30}})));
          Modelica.Blocks.Interfaces.BooleanOutput beat = t0 <> pre(t0)               annotation (Placement(
              transformation(extent={{100,-100},{140,-60}}),iconTransformation(extent={{100,
                    -100},{120,-80}})));
        //             Integer z;
                    Real t = time;
                    discrete Real t0;
                    Real T =  1/readData.heart_rate + correction;

                    //             Real T =  (if readData.heart_rate > 1e-6 then 1/readData.heart_rate else Modelica.Constants.inf)  + correction;
          parameter Modelica.Units.SI.Time correction=0;

        equation
          when pre(t0) + T < t then
            t0 = t;
          end when;

        //   when beat then
        //     z = pre(z) + 1;
        //   end when;

          connect(readData.thoracic_pressure, y) annotation (Line(points={{-23.8,20},
                  {38,20},{38,0},{110,0}}, color={0,0,127}));
          connect(readData.arterial_pressure, aortic_pressure) annotation (Line(points={
                  {-23.8,16},{34,16},{34,-40},{110,-40}}, color={0,0,127}));
          annotation (Icon(graphics={
                Line(points={{-78,48},{-70,-74},{-68,-70},{-36,-44},{-34,-42},{-18,
                      -8},{-20,-6},{-30,24},{-32,24},{-54,42},{-56,42},{-76,48}},
                    color={28,108,200}),
                Line(points={{-14,-68},{-14,-66},{-4,58},{36,-64},{18,-12},{-12,-24}},
                    color={28,108,200}),
                Line(points={{48,-64},{50,-60},{16,68},{92,-52},{92,-50},{56,76}},
                    color={28,108,200})}));
        end ThoracicPressureFromData;

        model testData
          ThoracicPressureFromData thoracicPressureFromData(readData(ExperimentNr=
                 2))
            annotation (Placement(transformation(extent={{-32,16},{-12,36}})));

                String s = String(2.0, "02.0f");
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end testData;

        model HrDataElement
          ReadData readData(
            ExperimentNr=2, filename_base="V_00_sit_0",
            path="Scripts\\data\\Valsalva\\",
            stopTime=18.9 + 100,
            sawTooth(startTime=0),
            startTime=0.35)
            annotation (Placement(transformation(extent={{-100,-10},{-80,10}})));
          inner Settings settings
            annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(
              usePressureInput=true)
            annotation (Placement(transformation(extent={{-60,-10},{-40,10}})));
            inner Physiolibrary.Types.Fraction phi = 0.25;
            inner Physiolibrary.Types.Pressure thoracic_pressure = 0;
            inner Physiolibrary.Types.Pressure outer_pressure = 0;
            inner Physiolibrary.Types.Fraction Exercise = 0;

          Subsystems.Systemic.SystemicMockPressure systemicMockPressure(
            UseBaroreflexOutput=true,
            UseThoracic_PressureInput=true,
            baroreflex_system(
              baroreceptor_aortic(
                epsilon(start=1.255),
                tau_s(displayUnit="s") = Ts,
                s(start=0.87),
                delta0=0.61),
              baroreceptor_carotid(
                epsilon(start=1.08),
                tau_s(displayUnit="s") = Ts,
                s(start=0.95),
                delta0=0.2),
              baroreflex(
                fsn=0.02725,
                f1=0.00533437,
                g(displayUnit="1") = 0.394375)))
            annotation (Placement(transformation(extent={{-20,-10},{56,20}})));
          Subsystems.Baroreflex.HeartRate_HRMinMax heartRate2_1(phi0=0.25)
            annotation (Placement(transformation(extent={{60,30},{80,50}})));

        parameter Real scale=1.0;
        Real cost = (heartRate2_1.HR - readData.heart_rate)^2*scale;
        output Real sum_cost;
          ConditionalConnection conditionalConnection(delayInt_Act=0.1)
            annotation (Placement(transformation(extent={{22,32},{42,50}})));
          parameter Physiolibrary.Types.Time Ts=30
            "Time constant for averaging";
        equation
          der(sum_cost) = cost;

          connect(readData.arterial_pressure, unlimitedVolume.pressure) annotation (
              Line(
              points={{-79.8,0},{-60,0}},
              color={0,0,127},
              smooth=Smooth.Bezier));
          connect(unlimitedVolume.y, systemicMockPressure.port_a) annotation (Line(
              points={{-40,0},{-20,0}},
              color={0,0,0},
              thickness=1));
          connect(systemicMockPressure.port_b, systemicMockPressure.port_a) annotation (
             Line(
              points={{56,0},{60,0},{60,-20},{-30,-20},{-30,0},{-20,0}},
              color={0,0,0},
              thickness=1));
          connect(readData.thoracic_pressure, systemicMockPressure.thoracic_pressure_input)
            annotation (Line(points={{-79.8,4},{-70,4},{-70,20},{-14,20},{-14,-8},{4,-8}},
                color={0,0,127}));
          connect(heartRate2_1.phi, conditionalConnection.y)
            annotation (Line(points={{60,40},{43,40}}, color={0,0,127}));
          connect(conditionalConnection.u, systemicMockPressure.phi_baroreflex)
            annotation (Line(points={{20,40},{10.6,40},{10.6,17.4}}, color={0,0,
                  127}));
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)),
            experiment(
              StopTime=160,
              Interval=0.005,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode"));
        end HrDataElement;

        model FitHRData
          extends HrDataElement(readData(ExperimentNr=1,
                                         path="..\\"), conditionalConnection(
                delayIntegral_Enabled=
                             true));
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end FitHRData;

        model HrDataMoreElements

          replaceable HrDataElement hrDataElement[4](conditionalConnection(delayIntegral_Enabled=
                 true, delayInt_Act=
                                 delayTime))         constrainedby
            HrDataElement(
              readData(ExperimentNr={1,2,3,4}), systemicMockPressure(baroreflex_system(
                  baroreflex(
                  each fsn=fsn,
                  each f1=f1,
                  each g=g)))) annotation (Placement(transformation(extent={{-60,-10},{-40,
                    10}})), __Dymola_choicesAllMatching=true);
          parameter Real f1=0.00385 "decrease factor of the phi";
          parameter Physiolibrary.Types.Frequency fsn=0.01725
            "rising factor of the phi";
          parameter Physiolibrary.Types.Fraction g=0.70375 "Aortic / carotid ratio";
          parameter Modelica.Units.SI.Time delayTime=0.771875
            "Delay time of output with respect to input signal";
                Real cost = sum(hrDataElement.cost);
                output Real sum_costs = sum(hrDataElement.sum_cost);
                output Real sum_cost[:] = hrDataElement[:].sum_cost;
        // initi
        // 0.00385        0.01725        0.70375        0.771875
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end HrDataMoreElements;

        model HrDataMoreElementsSeparatedCosts
          "Using separate objectives instead of summed ones. 0.00281875\t0.01475\t0.8990625\t0.7078125"
          extends HrDataMoreElements(
            delayTime=0.7078125,
            g(displayUnit="1") = 0.8990625,
            fsn(displayUnit="Hz") = 0.01475,
            f1=0.00281875);
        end HrDataMoreElementsSeparatedCosts;

        model FitHrDataMoreElements
          "Prepared to fit using different relative data path"
          extends HrDataMoreElements(hrDataElement(readData(path="..\\")));
        end FitHrDataMoreElements;

        model testRepeat
          parameter Integer ExperimentNr = 1;
          parameter String filename_base = "VEc_01_sup_0";
          // parameter Integer sequenceDigits = 2;
          // parameter Integer paddingZerosLength = max(0, sequenceDigits - String(ExperimentNr));
          // parameter String sequence = Strings.repeat(n, string="0") + String(ExperimentNr);
          parameter String path = "Scripts\\data\\Valsalva\\";
          parameter String filename = path + filename_base + String(ExperimentNr) + ".mat";
        Modelica.Blocks.Sources.CombiTimeTable tbl_arterial_pressure(
            tableOnFile=true,
            tableName="arterial_pressure",
            fileName=filename,
            smoothness=Modelica.Blocks.Types.Smoothness.LinearSegments,
            extrapolation=Modelica.Blocks.Types.Extrapolation.HoldLastPoint)
            annotation (Placement(transformation(extent={{-60,40},{-40,60}})));
          Modelica.Blocks.Tables.CombiTable1Ds combiTable1Ds(
            tableOnFile=true,
            tableName="arterial_pressure",
            fileName=filename,
            extrapolation=Modelica.Blocks.Types.Extrapolation.HoldLastPoint,
            verboseExtrapolation=true)
            annotation (Placement(transformation(extent={{-60,0},{-40,20}})));
          Modelica.Blocks.Sources.SawTooth
                                        sawTooth(
            amplitude=stop_time - start_time,
            period=stop_time - start_time,
            startTime=start_time)
            annotation (Placement(transformation(extent={{-100,0},{-80,20}})));
        equation
          connect(sawTooth.y, combiTable1Ds.u)
            annotation (Line(points={{-79,10},{-62,10}}, color={0,0,127}));
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)),
            experiment(
              StopTime=60,
              Interval=0.02,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode"));
        end testRepeat;

        package Experiments
          model CaptureKosinski
            extends Subsystems.Baroreflex.Baroreflex_Kosinksi(
              baroreflex(
                fsn(displayUnit="Hz") = 0.036,
                f1=0.0041,
                g(displayUnit="1") = 0.54),
              baroreceptor_carotid(
                delta0=delta0_factor*0.2,
                epsilon(start=1.08),
                s(start=0.95),
                tau_s(
                   displayUnit="s") = Ts),
              baroreceptor_aortic(
                delta0=delta0_factor*0.61,
                epsilon(start=1.255),
                s(start=0.87),
                tau_s(
                   displayUnit="s") = Ts));
          end CaptureKosinski;
        end Experiments;

        model HrDataElement_Kosinski
          "Parametrizationa as in the paper from Kosinski 2018 using table 1 and male, except for afferent delta0 for both"
          extends HrDataElement(heartRate2_1(HR_max=3.0666666666667, HR_nom=1.1166666666667),
              systemicMockPressure(baroreflex_system(
                baroreflex(
                  fsn(displayUnit="Hz") = 0.036,
                  f1=0.0041,
                  g=0.54),
                baroreceptor_carotid(delta0=delta0_factor*0.2),
                baroreceptor_aortic(delta0=delta0_factor*0.61))));
          parameter Real delta0_factor=1 "Baseline delta factor";
        end HrDataElement_Kosinski;
      end DataFit;

      model Phi_factor "Multiplies the signal with the relative phi"
        Modelica.Blocks.Interfaces.RealInput u
          annotation (Placement(transformation(extent={{-20,-20},{20,20}},
              rotation=-90,
              origin={0,100})));
        Modelica.Blocks.Interfaces.RealOutput y annotation (Placement(transformation(
              extent={{-10,-10},{10,10}},
              rotation=-90,
              origin={0,-100})));
        Physiolibrary.Types.RealIO.FractionInput phi "Sympathetic activation"
          annotation (Placement(transformation(extent={{-120,-20},{-80,20}})));

      parameter Physiolibrary.Types.Fraction phi0 = 0.25;
      parameter Physiolibrary.Types.Fraction eta "Factor to multiply the relative phi";

      equation
        y = u*(1 + eta*(phi - phi0));
        annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
              coordinateSystem(preserveAspectRatio=false)));
      end Phi_factor;

      block Stepping "Constant steps up"
        extends Modelica.Blocks.Interfaces.SignalSource(y(start = offset));

        parameter Modelica.Units.SI.Time startTime=0;
        parameter Modelica.Units.SI.Time interval=1;

        parameter Physiolibrary.Types.Fraction offset = 0;
        parameter Physiolibrary.Types.Fraction increment = 1;
        parameter Physiolibrary.Types.Fraction maxVal = 10;

        Modelica.Units.SI.Time t0(start=-interval);
        Physiolibrary.Types.Fraction y_(start = offset) "non dealayed val";
        Physiolibrary.Types.Fraction plot_Step "Use as X axis for exercise stepping. Plots the state just before the next step increase";
        parameter Real tau = 1;
      equation

        der(y)*tau = y_ - y;

        when time > startTime and time > pre(t0) + interval then
          y_ = min(pre(y) + increment, maxVal);
          t0 = if y < maxVal then time else pre(t0);
        end when;

        when time > startTime - interval/2 and time > pre(t0) + interval/2 then
          plot_Step = y_ + increment/2;
        end when;

        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={Line(
                  points={{-100,-72},{-26,-72},{-26,-26},{34,-26},{34,22},{100,22}},
                  color={28,108,200})}),                               Diagram(
              coordinateSystem(preserveAspectRatio=false), graphics={
              Line(points={{-100,-74},{-26,-74},{-26,-28},{34,-28},{34,20},{100,20}},
                  color={28,108,200}),
              Text(
                extent={{-26,-82},{24,-66}},
                lineColor={28,108,200},
                textString="offset"),
              Text(
                extent={{-18,-46},{32,-30}},
                lineColor={28,108,200},
                textString="interval"),
              Text(
                extent={{-86,-54},{-36,-38}},
                lineColor={28,108,200},
                textString="increment"),
              Text(
                extent={{48,24},{98,40}},
                lineColor={28,108,200},
                textString="maxVal")}));
      end Stepping;

      model IntegralActRelaxDelay
        parameter Boolean delayEnabled=false annotation(choices(checkBox=true));
        parameter Physiolibrary.Types.Fraction phi0;
        parameter Modelica.Units.SI.Time delayTimeAct=0
          "Delay time of output with respect to input signal for activation"
          annotation (Dialog(enable=delayEnabled));
        parameter Modelica.Units.SI.Time delayTimeRelax=0
          "Delay time of output with respect to input signal for activation"
          annotation (Dialog(enable=delayEnabled));

        Modelica.Blocks.Interfaces.RealInput u annotation (Placement(transformation(
                rotation=0, extent={{-110,-10},{-90,10}})));
        Modelica.Blocks.Interfaces.RealOutput y(start = phi0) annotation (Placement(transformation(
                rotation=0, extent={{90,-10},{110,10}})));

      equation
        if delayEnabled then
          der(y) = max(u -y, 0)/delayTimeAct + min(u -y, 0)/delayTimeRelax;
        else
          y = u;
        end if;
      end IntegralActRelaxDelay;
    end Signals;

    package Basic
      extends Modelica.Icons.BasesPackage;
      model variable_arterial_resistance
        Physiolibrary.Types.RealIO.FractionInput phi = f if useVariableResistance annotation (Placement(
              transformation(extent={{96,-10},{116,10}}), iconTransformation(extent={{-104,
                  -10},{-84,10}})));
        Physiolibrary.Types.RealIO.PressureOutput resistance_modifier annotation (
            Placement(transformation(extent={{80,-20},{120,20}}),
              iconTransformation(extent={{80,-20},{120,20}})));

          parameter Boolean  useVariableResistance = true;

          parameter Physiolibrary.Types.Fraction alphaR = 1;
      //    parameter Physiolibrary.Types.HydraulicCompliance baseCompliance = 1.25e-7;

          parameter Physiolibrary.Types.Fraction nf = 0.25 "normal value of phi";
          parameter Physiolibrary.Types.Time Tau = 0 "Delay of effector in seconds";
          constant Physiolibrary.Types.Time TauMax = 10 "Maximal time delay";
          Physiolibrary.Types.Fraction rf = (1 + alphaR*(f-nf));
      protected
          Physiolibrary.Types.Fraction f;
      equation

          if not useVariableResistance then
            f = nf;
          end if;
          assert(Tau < TauMax, "The TauMax constant must be larger than Tau delay");
          resistance_modifier = delay(rf, Tau, TauMax);
        annotation (Icon(graphics={                                       Polygon(
                points={{-98,52},{100,38},{100,-46},{-98,-50},{-98,52}},
                lineColor={216,102,103},
                lineThickness=0.5,
                fillColor={234,215,67},
                fillPattern=FillPattern.Solid), Text(
                extent={{-74,-38},{72,42}},
                lineColor={216,102,103},
                lineThickness=0.5,
                fillColor={234,215,67},
                fillPattern=FillPattern.None,
                textString="φ -> R")}));
      end variable_arterial_resistance;

      model venousVariableCompliance
          Physiolibrary.Types.RealIO.HydraulicComplianceOutput compliance
            annotation (Placement(transformation(
                extent={{-20,-20},{20,20}},
                rotation=0,
                origin={100,0}), iconTransformation(extent={{100,-20},{140,20}})));
          Physiolibrary.Types.RealIO.FractionInput phi = f if useVariableCompliance annotation (Placement(
                transformation(extent={{-120,-20},{-80,20}}), iconTransformation(extent=
                   {{-120,-20},{-80,20}})));
          parameter Boolean  useVariableCompliance = false;

          parameter Physiolibrary.Types.Fraction alphaC = 2.5;
          parameter Physiolibrary.Types.Fraction alphaZPV = 2.5;
          parameter Physiolibrary.Types.HydraulicCompliance baseCompliance = 1.25e-7;

          parameter Physiolibrary.Types.Fraction nf = 0.25 "normal value of phi";
          Physiolibrary.Types.RealIO.VolumeOutput zpv
            annotation (Placement(transformation(
                extent={{-20,-20},{20,20}},
                rotation=0,
                origin={100,100}),
                                 iconTransformation(extent={{94,70},{134,110}})));
        Physiolibrary.Types.Volume zpv0 = 1e-3;
          parameter Physiolibrary.Types.Time Tau = 0 "Delay of effector in seconds";
          constant Physiolibrary.Types.Time TauMax = 10 "Maximal time delay";
          Physiolibrary.Types.Fraction c = baseCompliance / (1 + alphaC*(f-nf));
          Physiolibrary.Types.Volume z = zpv0 / (1 + alphaZPV*(f-nf));

      protected
          Physiolibrary.Types.Fraction f;
      equation

          if not useVariableCompliance then
            f = nf;
          end if;

          assert(Tau < TauMax, "The TauMax constant must be larger than Tau delay");
          compliance = delay(c, Tau, TauMax);
          zpv = delay(z, Tau, TauMax);

          annotation (Diagram(coordinateSystem(extent={{-100,-100},{100,100}})), Icon(
                coordinateSystem(extent={{-100,-100},{120,100}}), graphics={Polygon(
                  points={{-94,62},{-48,96},{38,98},{80,74},{110,0},{110,-52},{82,-94},{
                      32,-102},{-58,-90},{-110,-20},{-94,62}},
                  lineColor={216,102,103},
                  smooth=Smooth.Bezier,
                  lineThickness=0.5,
                  fillColor={234,215,67},
                  fillPattern=FillPattern.Solid), Text(
                  extent={{-80,-40},{100,60}},
                  lineColor={216,102,103},
                  lineThickness=0.5,
                  fillColor={234,215,67},
                  fillPattern=FillPattern.None,
                  textString="φ -> C")}));
      end venousVariableCompliance;

      model ElasticVessel_nonLinear
        "Elastic container for non-linear large veins"
       extends Physiolibrary.Icons.ElasticBalloon;
       extends Physiolibrary.SteadyStates.Interfaces.SteadyState(state_start=
              volume_start);
        Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a q_in
          annotation (Placement(transformation(extent={{-14,-14},{14,14}})));
        parameter Physiolibrary.Types.Volume volume_start=1e-11 "Volume start value"
          annotation (Dialog(group="Initialization"));                                 //default = 1e-5 ml
        Physiolibrary.Types.Volume excessVolume
          "Additional volume, that generate pressure";

         parameter Boolean useV0Input = false
          "=true, if zero-pressure-volume input is used"
          annotation(Evaluate=true, HideResult=true, choices(checkBox=true),Dialog(group="External inputs/outputs"));

         parameter Physiolibrary.Types.Volume ZeroPressureVolume=1e-11
          "Maximal volume, that does not generate pressure if useV0Input=false"
          annotation (Dialog(enable=not useV0Input)); //default = 1e-5 ml

          parameter Physiolibrary.Types.Volume CollapsingPressureVolume=1e-12
          "Maximal volume, which generate negative collapsing pressure"; //default = 1e-6 ml

         Physiolibrary.Types.RealIO.VolumeInput zeroPressureVolume(start=
              ZeroPressureVolume)=zpv if useV0Input annotation (Placement(
              transformation(
              extent={{-20,-20},{20,20}},
              rotation=270,
              origin={-80,80})));
        parameter Boolean useComplianceInput = false
          "=true, if compliance input is used"
          annotation(Evaluate=true, HideResult=true, choices(checkBox=true),Dialog(group="External inputs/outputs"));
        parameter Physiolibrary.Types.HydraulicCompliance Compliance=1
          "Compliance if useComplianceInput=false"
          annotation (Dialog(enable=not useComplianceInput));

        Physiolibrary.Types.RealIO.HydraulicComplianceInput compliance(start=
              Compliance)=c if useComplianceInput annotation (Placement(
              transformation(
              extent={{-20,-20},{20,20}},
              rotation=270,
              origin={0,80})));
        parameter Boolean useExternalPressureInput = false
          "=true, if external pressure input is used"
          annotation(Evaluate=true, HideResult=true, choices(checkBox=true),Dialog(group="External inputs/outputs"));
        parameter Physiolibrary.Types.Pressure ExternalPressure=0
          "External pressure. Set zero if internal pressure is relative to external. Valid only if useExternalPressureInput=false."
          annotation (Dialog(enable=not useExternalPressureInput));
        parameter Physiolibrary.Types.Pressure MinimalCollapsingPressure=-101325;
        Physiolibrary.Types.RealIO.PressureInput externalPressure(start=
              ExternalPressure)=ep if useExternalPressureInput annotation (Placement(
              transformation(
              extent={{-20,-20},{20,20}},
              rotation=270,
              origin={80,80})));

        Physiolibrary.Types.RealIO.VolumeOutput volume annotation (Placement(
              transformation(
              extent={{-20,-20},{20,20}},
              rotation=270,
              origin={0,-100}), iconTransformation(
              extent={{-20,-20},{20,20}},
              rotation=270,
              origin={60,-100})));
        Physiolibrary.Types.Pressure p_transm = q_in.pressure - ep;
        parameter Physiolibrary.Types.Volume Vmax;
      protected
        Physiolibrary.Types.Volume zpv;
        Physiolibrary.Types.HydraulicCompliance c;
        Physiolibrary.Types.Pressure ep;
        parameter Physiolibrary.Types.Pressure a=MinimalCollapsingPressure/log(
            Modelica.Constants.eps);
        constant Real pi = Modelica.Constants.pi;
      equation
        if not useV0Input then
          zpv=ZeroPressureVolume;
        end if;
        if not useComplianceInput then
          c=Compliance;
        end if;
        if not useExternalPressureInput then
          ep=ExternalPressure;
        end if;
        excessVolume = volume - zpv;

      //
      // c0 = v0/p0
       // v0 = len*pi*2*r^2
       // p0 = 5 mmHg
       //
       // C = alpha*c0;
       // v0 = alpha*V000
       // v00 = r^2*pi*len
       // zero pressure volume = current volume at p0
       // ressitances?
      // gth, E, r
      // melchior
        volume = zpv + 2*Vmax/pi*atan(pi*c/2/Vmax*p_transm);

      //   q_in.pressure =
      //   smooth(0,
      //     if noEvent(volume>CollapsingPressureVolume) then
      //       (excessVolume/c + ep)
      //     else
      //       (a*log(max(Modelica.Constants.eps,volume/CollapsingPressureVolume)) + ep));
        //then: normal physiological state
        //else: abnormal collapsing state

        //Collapsing state: the max function prevents the zero or negative input to logarithm, the logarithm brings more negative pressure for smaller volume
        //However this collapsing is limited with numerical precission, which is reached relatively soon.

        state = volume; // der(volume) =  q_in.q;
        change =q_in.q;
       // assert(volume>=-Modelica.Constants.eps,"Collapsing of vessels are not supported!");
       annotation (
          Icon(coordinateSystem(preserveAspectRatio=false,extent={{-100,-100},{
                  100,100}}), graphics={Text(
                extent={{-318,-140},{160,-100}},
                textString="%name",
                lineColor={0,0,255}), Line(
                points={{-100,-80},{24,-64},{68,60}},
                color={0,140,72},
                thickness=1,
                arrow={Arrow.None,Arrow.Filled},
                smooth=Smooth.Bezier)}),       Documentation(revisions="<html>
<p><i>2009-2014 - </i>Marek Matejak, Charles University, Prague, Czech Republic</p>
<ul>
<li>initial implementation </li>
</ul>
<p>4.5.2015 - Tom&aacute;&scaron; Kulh&aacute;nek, Charles University, Prague, Czech Republic</p>
<ul>
<li>fix of external pressure</li>
</ul>
</html>",   info="<html>
<p>Pressure can be generated by an elastic tissue surrounding some accumulated volume. Typically there is a threshold volume, below which the relative pressure is equal to external pressure and the wall of the blood vessels is not stressed. But if the volume rises above this value, the pressure increases proportionally. The slope in this pressure-volume characteristic is called &ldquo;Compliance&rdquo;.</p>
<ul>
<li>Increassing volume above ZeroPressureVolume (V0) generate positive pressure (greater than external pressure) lineary dependent on excess volume.</li>
<li>Decreasing volume below CollapsingPressureVolume (V00) generate negative pressure (lower than external pressure) logarithmicaly dependent on volume.</li>
<li>Otherwise external pressure is presented as pressure inside ElasticVessel.</li>
</ul>
<p><br><img src=\"modelica://Physiolibrary/Resources/Images/UserGuide/ElasticVessel_PV.png\"/></p>
</html>"));
      end ElasticVessel_nonLinear;

      model IdealValve_deactivable "A valve that can be deactivatd"
        extends Physiolibrary.Hydraulic.Interfaces.OnePort;
         Boolean open(start=true) "Switching state";
         Real passableVariable(start=0, final unit="1")
          "Auxiliary variable for actual position on the ideal diode characteristic";
        /*  = 0: knee point
      < 0: below knee point, diode locking
      > 0: above knee point, diode conducting */
        parameter Physiolibrary.Types.HydraulicConductance _Gon(
          final min=0,
          displayUnit="l/(mmHg.min)")=1.2501026264094e-02
          "Forward state-on conductance (open valve conductance)"
          annotation (Dialog(enable=not useLimitationInputs)); //= the same as resistance 1e-5 mmHg/(l/min)
        parameter Physiolibrary.Types.HydraulicConductance _Goff(
          final min=0,
          displayUnit="l/(mmHg.min)")=1.2501026264094e-12
          "Backward state-off conductance (closed valve conductance)"
          annotation (Dialog(enable=not useLimitationInputs)); //= 1e-5 (l/min)/mmHg
        parameter Physiolibrary.Types.Pressure Pknee(final min=0)=0
          "Forward threshold pressure";
        parameter Boolean useLimitationInputs = false
          "=true, if Gon and Goff are from inputs"
          annotation(Evaluate=true, HideResult=true, choices(checkBox=true),Dialog(group="External inputs/outputs"));
        Modelica.Blocks.Interfaces.BooleanInput ActivateLimiter(start=false)
          "Enables the valve when true, keeps it open otherwise"
          annotation (Placement(transformation(extent={{-20,-20},{20,20}}, rotation=270)));

      protected
        constant Physiolibrary.Types.Pressure unitPressure=1;
        constant Physiolibrary.Types.VolumeFlowRate unitFlow=1;
      equation

        open = passableVariable > Modelica.Constants.eps;
        dp = (passableVariable*unitFlow)*(if (not ActivateLimiter) or open then 1/_Gon else 1) + Pknee;
        volumeFlowRate = (passableVariable*unitPressure)*(if (not ActivateLimiter) or open then 1 else _Goff)  + _Goff *Pknee;
        annotation (Icon(coordinateSystem(preserveAspectRatio=false, extent={{-100,
                  -100},{100,100}}),
                               graphics={Polygon(
                points={{-76,66},{-76,-82},{34,-10},{34,12},{-66,68},{-76,74},{
                    -76,66}},
                lineColor={0,0,127},
                fillColor={0,0,255},
                fillPattern=FillPattern.Solid), Rectangle(
                extent={{40,96},{68,-94}},
                lineColor={0,0,127},
                fillColor={0,0,255},
                fillPattern=FillPattern.Solid),
              Text(
                extent={{-188,-96},{192,-118}},
                lineColor={255,0,0},
                fillPattern=FillPattern.Sphere,
                fillColor={255,85,85},
                textString="%name")}),
          Documentation(info="<html>
<p>Ideal Valve allows a volumetric flow in one direction in case of pressure gradient is greater. </p>
</html>",   revisions="<html>
<p><i>2014</i></p>
<p>Tomas Kulhanek, Charles University, Prague, Czech Republic </p>
</html>"));
      end IdealValve_deactivable;

      model IdealValveResistanceWithMeasurements
        "Adds additional output calculations"
        extends Physiolibrary.Hydraulic.Components.IdealValveResistance;
        parameter Boolean calculateAdditionalMetrics = false
          annotation(Evaluate=true, HideResult=true, choices(checkBox=true));
        parameter Boolean useCycleInput=false
          "Use any signal of beating cycle which resets to zero for precise calculations of throughput"
        annotation(Evaluate=true, HideResult=true, choices(checkBox=true),Dialog(group="External inputs/outputs"));

        Physiolibrary.Types.Pressure Pout_pulse
          "Difference between max and min output pressure (e.g. pulse pressure)";
        Physiolibrary.Types.Pressure Pout_max
          "Maximal pressure at outflow during open valve (e.g. Systolic pressure)";
        Physiolibrary.Types.Pressure Pout_min
          "Minimal pressure at outflow during closed valve (e.g. diastolic pressure)";

        Physiolibrary.Types.Pressure BP_max(start = 0);
        Physiolibrary.Types.Pressure BP_min(start = 200*133);
        parameter Physiolibrary.Types.Pressure Pmax = 39996 "Maximal possible Pout_min pressure (start point for calculations)";

        Physiolibrary.Types.Pressure Pout=q_out.pressure "Pressure at outflow";

        parameter Physiolibrary.Types.Time tau = 1e-3 "Integration costant for min-max calculations";
        parameter Physiolibrary.Types.Time epsTime = 1e-3 "Reset offset after cycle start. We better not use 0 for numerical issues.";
        Physiolibrary.Types.Time Ts(start = 1) "True time of cardiologic systole (duration of open valve)";
        Physiolibrary.Types.Time Td "True time of cardiologic diastole (duration of closed valve)";
        Physiolibrary.Types.Time T0 "Time since opening (begin of cardiologic systole)";
        Physiolibrary.Types.Time T0_cycle(start = -1e3) "Time of beggining of current cardiac cycle. May be same as T0, when the cardiacCycleOutput is not specified.";

        Physiolibrary.Types.Volume CO_acc "Accumulated volume since valve closing";
        Physiolibrary.Types.VolumeFlowRate CO;
        Modelica.Blocks.Interfaces.RealInput cardiac_cycle=cc if useCycleInput
          "Any signal that resets to zero e.g. fraction of cardiac cycle, time of cardiac cycle e.g."
          annotation (Placement(transformation(
              extent={{-20,-20},{20,20}},
              rotation=270,
              origin={0,100})));
              Real cc "signal for reseting cardiac cycle";
      equation
        if not useCycleInput then
          // when not given proper guidance, we would have to guess from opening and closing the valves
          cc = time - T0;
        end if;

      //   if open then
      //     BP_max = max(BPao, BP_max);
      //   else
      //     BP_max = 0;
      //   end if;
        if calculateAdditionalMetrics then
          der(CO_acc) = q_in.q;
        else
          der(CO_acc) = 0;
        end if;

        if calculateAdditionalMetrics and open and BP_max <Pout then
          der(BP_max)*tau =Pout  - BP_max;
        else
          der(BP_max) = 0;
        end if;

        if calculateAdditionalMetrics and not open and BP_min >Pout then
          der(BP_min)*tau =Pout  - BP_min;
        else
          der(BP_min) = 0;
        end if;

        when calculateAdditionalMetrics and open then
          T0 = time;
          Td = time - pre(T0) - Ts;
        end when;

        when calculateAdditionalMetrics and not open then
          Ts = time - T0;
        end when;

        when calculateAdditionalMetrics and not initial() and time >= epsTime and cc < epsTime then
          // this launches when the signal resets. We better not use 0 for possible numerical issues. 1ms distance from beggining of cardiac cycle must be satisfactory.
          // The T0 signal is not precise, as the valves might be chattering
          // the CO calculation threats with division by zero, so we better start after time = 0
          T0_cycle = time;
          CO = CO_acc/max(time - pre(T0_cycle), 1e-2);
          Pout_min = pre(BP_min);
          reinit(BP_min, Pmax);
          Pout_pulse = Pout_max - Pout_min;
          Pout_max = pre(BP_max);
          reinit(BP_max, 0);
          reinit(CO_acc, 0);
        end when;

      end IdealValveResistanceWithMeasurements;

      model ValveMynard "Valve by Mynard et al 2012, doi 10.1002/cnm.1466"
        extends Physiolibrary.Hydraulic.Interfaces.OnePort;
        type Area = Modelica.Units.SI.Area (
                                          nominal = 1e-4);

        Area ARef=ARef_init;

        parameter Area ARef_init
          "Starting value of reference cross-sectional area";
        parameter Modelica.Units.SI.Length l "Length of valve segment";
        parameter Physiolibrary.Types.Pressure dpO=0 "Opening pressure";
        parameter Physiolibrary.Types.Pressure dpC=0 "Closing pressure";
        parameter Real Ko(unit="m2/(N.s)") "Opening rate coefficient";
        parameter Real Kc(unit="m2/(N.s)") "Closing rate coefficient";
        parameter Physiolibrary.Types.Fraction Mrg=0 "Ratio of valve regurgitation";
        parameter Physiolibrary.Types.Fraction Mst=0 "Valve stenosis ratio";
        parameter Physiolibrary.Types.Density rho = 1060;
        parameter Area AMin_eps = 1e-6 "Anular area left open during maximally closed valve to prevent numerical issues.";

        Area A=(AMax - AMin)*s + AMin
          "Current cross-sectional area";
        Area AMin=Mrg*ARef + AMin_eps
          "Cross-sectional area when closed, with miniature hole to prevent zero division";
        Area AMax=(1 - Mst)*ARef
          "Cross-sectional area when open";

        Physiolibrary.Types.Fraction s(start=1, fixed=true)
          "Opening state (1 = open .. 0 = closed)";
        Boolean open(start = true);
        Real R(unit="kg/m7", nominal = 1e12) = rho/2/A^2 "Bernoulli resistance";
        Physiolibrary.Types.HydraulicInertance L = rho*l/A "Inertance";
      equation
        assert(A > 0, "C'mon, the valve openin area could not be negative..", AssertionLevel.warning);

      //   if noEvent(A > 0) then
          dp = R*volumeFlowRate *abs(volumeFlowRate) + L*der(volumeFlowRate);

      //   else
      //     volumeFlowRate = 0;
      //     R = Modelica.Constants.inf;
      //     L = Modelica.Constants.inf;
      //   end if;

        if dp > dpO then
          open = true;
          der(s) = (1 - s)*Ko*(dp - dpO);
        elseif dp < dpC then
          open = false;
          der(s) = s*Kc*(dp - dpC);
        else
          open = pre(open);
          der(s) = 0;
        end if;

        annotation (Icon(coordinateSystem(preserveAspectRatio=false, extent={{-100,
                  -100},{100,100}}),
                               graphics={Polygon(
                points={{-76,66},{-76,-82},{34,-10},{34,12},{-66,68},{-76,74},{
                    -76,66}},
                lineColor={0,0,127},
                fillColor={0,0,255},
                fillPattern=FillPattern.Solid),
              Text(
                extent={{-188,-96},{192,-118}},
                lineColor={255,0,0},
                fillPattern=FillPattern.Sphere,
                fillColor={255,85,85},
                textString="%name"),
              Polygon(
                points={{40,100},{20,40},{40,-40},{20,-100},{42,-100},{60,-40},{40,40},
                    {60,100},{40,100}},
                lineColor={0,0,127},
                fillColor={0,0,255},
                fillPattern=FillPattern.Solid,
                smooth=Smooth.Bezier)}),
          Documentation(info="<html>
<p>Ideal Valve allows a volumetric flow in one direction in case of pressure gradient is greater. </p>
</html>",   revisions="<html>
<p><i>2014</i></p>
<p>Tomas Kulhanek, Charles University, Prague, Czech Republic </p>
</html>"));
      end ValveMynard;

      model Resistor_NonLinear
        "Hydraulic resistor, where the pressure-flow characteristic is exponentially non-linear. Optional nominal conductance input at nominal flow."
       extends Physiolibrary.Hydraulic.Interfaces.OnePort;
       extends Physiolibrary.Icons.HydraulicResistor;

       parameter Boolean useConductanceInput = false annotation(choices(checkBox=true));
       parameter Boolean useNonlinearResistance = false annotation(choices(checkBox=true));
       parameter Boolean useNominalParametrization = false annotation(choices(checkBox=true));
       parameter Physiolibrary.Types.HydraulicResistance R_nom_fixed = 20000000 "Base Resistance or resistance for nominal resting flow if the useNominalParametrization is true";
       parameter Real exp_parameter = 1 "Fixed exponent for direct parametrization if useNominalParametrization is false" annotation (Dialog(enable = not useNominalParametrization and useNonlinearResistance));

       // initizalization
        Physiolibrary.Types.HydraulicResistance R_nom
          "Nominal resistance at nominal flow";
        Physiolibrary.Types.Pressure dp_nom=R_nom*Q_nom
          "nominal pressure drop (use default)";
        parameter Physiolibrary.Types.VolumeFlowRate Q_nom=0.0001 "nominal flow";
        Physiolibrary.Types.HydraulicResistance base= dp_nom/(Q_nom^exp_)
          "Base for exponential conductance, as in dp = base*Q^Exp, calculated from nominal values.";
        parameter Physiolibrary.Types.HydraulicResistance R_nom_maxQ(displayUnit="(Pa.s)/m3")=
             20000000 "Resistance at maximal flow during maximal exercise" annotation (Dialog(enable = useNominalParametrization and useNonlinearResistance));
        parameter Physiolibrary.Types.VolumeFlowRate Q_nom_maxQ=0.00033333333333333
          "Nominal flow for maximal flow case (e.g. exercise)" annotation (Dialog(enable = useNominalParametrization and useNonlinearResistance));
        Real exp_(start=1)=if not useNonlinearResistance then 1 elseif not useNominalParametrization then exp_parameter else log(R_nom_maxQ*Q_nom_maxQ/base)/log(Q_nom_maxQ)
          "Exponent of conductance base, as in dp = base*Q^Exp. Set to 1 for linear characteristics. Calculated from nominals.";

        parameter Physiolibrary.Types.VolumeFlowRate maxLinearFlow=Q_nom
          "Maximal flow having constant TPR to prevent multistable simulation" annotation (Dialog(enable = useNonlinearResistance));
        Physiolibrary.Types.HydraulicResistance TPR_limit=base*(
            maxLinearFlow^exp_)/maxLinearFlow;
        Physiolibrary.Types.HydraulicResistance TPR=if noEvent(q_in.q > 0)
             then dp/q_in.q else 0 "Indicator of actual total pulmonary resistance";
        Physiolibrary.Types.RealIO.HydraulicConductanceInput
                                               cond=1/R_nom if useConductanceInput
                                                         annotation (Placement(
              transformation(extent={{-20,-20},{20,20}},
              rotation=270,
              origin={-54,30}), iconTransformation(
              extent={{-20,-20},{20,20}},
              rotation=270,
              origin={0,40})));
              Real linear;
      equation
        if not useConductanceInput then
          R_nom = R_nom_fixed;
        end if;

        // we must allow also negative flows
        // linear flow under the limit, also
         if noEvent(dp >= 0 and abs(q_in.q) > maxLinearFlow) then
               q_in.q = (dp/base)^(1/exp_);
               linear = 1;
         elseif noEvent(dp < 0 and abs(q_in.q) > maxLinearFlow) then
             q_in.q = -(-dp/base)^(1/exp_);
                     linear = -1;
         else
          // linear characteristics inbetween
            q_in.q = dp/TPR_limit;
                    linear = 0;
         end if;

        annotation (Icon(coordinateSystem(preserveAspectRatio=false, extent={{
                  -100,-100},{100,100}}),
                         graphics={Text(
                extent={{-220,-40},{200,-80}},
                lineColor={0,0,255},
                fillColor={58,117,175},
                fillPattern=FillPattern.Solid,
                textString="%name"), Line(
                points={{-100,-60},{26,-26},{80,80}},
                color={0,0,0},
                smooth=Smooth.Bezier,
                thickness=0.5)}),
          Documentation(revisions="<html>
<p><i>2020</i></p>
<p>Filip Jezek, University of Michigan</p>
</html>",   info="<html>
<p>This hydraulic conductance (resistance) element contains two connector sides. No hydraulic medium volume is changing in this element during simulation. That means that sum of flow in both connector sides is zero. The flow through element is determined by an exponential relation:</p>
<p><img src=\"modelica://Physiolibrary/Resources/Images/equations/equation-BpFHrLEf.png\" alt=\"dp = base*Q^exp_
\"/></p>
<p>where base and exp are parameters.</p>
<p>To prevent infinite resistance at small flow, one can adjust linear working areas. When the flow is below maxLinearFlow, then the following linear </p>
<p><span style=\"font-family: Courier New;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q_in.q&nbsp;=&nbsp;(dp/base)^(1/exp_);</span></p>
<p><span style=\"font-family: Courier New;\">&nbsp;&nbsp;<span style=\"color: #0000ff;\">elseif&nbsp;</span><span style=\"color: #ff0000;\">noEvent</span>(dp&nbsp;&lt;&nbsp;0<span style=\"font-family: Courier New; color: #0000ff;\">&nbsp;and&nbsp;</span><span style=\"color: #ff0000;\">abs</span>(q_in.q)&nbsp;&gt;&nbsp;maxLinearFlow)<span style=\"font-family: Courier New; color: #0000ff;\">&nbsp;then</span></p>
<p><span style=\"font-family: Courier New;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q_in.q&nbsp;=&nbsp;-(-dp/base)^(1/exp_);</span></p>
<p><span style=\"font-family: Courier New;\">&nbsp;&nbsp;<span style=\"color: #0000ff;\">else</span></p>
<p><span style=\"font-family: Courier New;\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #006400;\">//&nbsp;linear&nbsp;characteristics&nbsp;inbetween</span></p>
<p><span style=\"font-family: Courier New;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q_in.q&nbsp;=&nbsp;dp/TPR_limit;</span></p>
<p><span style=\"font-family: Courier New;\">&nbsp;&nbsp;<span style=\"color: #0000ff;\">end&nbsp;if</span>;</p>
<p><br><b>Ohm&apos;s law</b>. It is used conductance (=1/resistance) because it could be numerical zero better then infinity in resistance. </p>
</html>"));
      end Resistor_NonLinear;

      model ElasticVesselComponent
        "Elastic container with replaceable PV characteristics"
       extends Physiolibrary.Icons.ElasticBalloon;
        Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a q_in
          annotation (Placement(transformation(extent={{-14,-14},{14,14}})));
        Physiolibrary.Types.Volume volume( start = 1e-6) "Volume"
          annotation (Dialog(group="Initialization"));                                 //default = 1e-5 ml

        parameter Physiolibrary.Types.HydraulicCompliance Compliance=1
          "Compliance if useComplianceInput=false"
          annotation (Dialog(enable=not useComplianceInput));
        parameter Boolean useExternalPressureInput = false
          "=true, if external pressure input is used"
          annotation(Evaluate=true, HideResult=true, choices(checkBox=true),Dialog(group="External inputs/outputs"));
        parameter Physiolibrary.Types.Pressure ExternalPressure=0
          "External pressure. Set zero if internal pressure is relative to external. Valid only if useExternalPressureInput=false."
          annotation (Dialog(enable=not useExternalPressureInput));
        Physiolibrary.Types.RealIO.PressureInput externalPressure(start=
              ExternalPressure)=ep if useExternalPressureInput annotation (Placement(
              transformation(
              extent={{-20,-20},{20,20}},
              rotation=270,
              origin={80,80})));

        Physiolibrary.Types.Pressure p_transm = q_in.pressure - ep;

        replaceable Subsystems.Systemic.Vessel_modules.Auxiliary.Compliances.compliance_nonLinearPstras compliant_vessel(
                  C0 = Compliance,
                  p0 = 133.32,
                  zpv = 1e-6)
                  constrainedby
          Subsystems.Systemic.Vessel_modules.Auxiliary.Compliances.partialCompliance(
          l=1,
          V=volume,
          phi = 0.25,
          V0 = 0)
          annotation (Placement(transformation(extent={{-50,32},{-30,52}})));

      protected
        Physiolibrary.Types.Pressure ep;
      equation
        if not useExternalPressureInput then
          ep=ExternalPressure;
        end if;

        der(volume)   =q_in.q;
        q_in.pressure = compliant_vessel.p;

       annotation (
          Icon(coordinateSystem(preserveAspectRatio=false,extent={{-100,-100},{
                  100,100}}), graphics={Text(
                extent={{-318,-140},{160,-100}},
                textString="%name",
                lineColor={0,0,255}), Line(
                points={{-100,-80},{24,-64},{68,60}},
                color={0,140,72},
                thickness=1,
                arrow={Arrow.None,Arrow.Filled},
                smooth=Smooth.Bezier)}),       Documentation(revisions="<html>
<p><i>2009-2014 - </i>Marek Matejak, Charles University, Prague, Czech Republic</p>
<ul>
<li>initial implementation </li>
</ul>
<p>4.5.2015 - Tom&aacute;&scaron; Kulh&aacute;nek, Charles University, Prague, Czech Republic</p>
<ul>
<li>fix of external pressure</li>
</ul>
</html>",   info="<html>
<p>Pressure can be generated by an elastic tissue surrounding some accumulated volume. Typically there is a threshold volume, below which the relative pressure is equal to external pressure and the wall of the blood vessels is not stressed. But if the volume rises above this value, the pressure increases proportionally. The slope in this pressure-volume characteristic is called &ldquo;Compliance&rdquo;.</p>
<ul>
<li>Increassing volume above ZeroPressureVolume (V0) generate positive pressure (greater than external pressure) lineary dependent on excess volume.</li>
<li>Decreasing volume below CollapsingPressureVolume (V00) generate negative pressure (lower than external pressure) logarithmicaly dependent on volume.</li>
<li>Otherwise external pressure is presented as pressure inside ElasticVessel.</li>
</ul>
<p><br><img src=\"modelica://Physiolibrary/Resources/Images/UserGuide/ElasticVessel_PV.png\"/></p>
</html>"));
      end ElasticVesselComponent;

      model ElasticVesselNonLinearPstras
        "Elastic container for non-linear large veins following Pstras et al"
       extends Physiolibrary.Icons.ElasticBalloon;
        Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a q_in
          annotation (Placement(transformation(extent={{-14,-14},{14,14}})));
        Physiolibrary.Types.Volume volume
                                         "Volume start value"
          annotation (Dialog(group="Initialization"));                                 //default = 1e-5 ml
        parameter Boolean useExternalPressureInput = false
          "=true, if external pressure input is used"
          annotation(Evaluate=true, HideResult=true, choices(checkBox=true),Dialog(group="External inputs/outputs"));
        parameter Physiolibrary.Types.Pressure ExternalPressure=0
          "External pressure. Set zero if internal pressure is relative to external. Valid only if useExternalPressureInput=false."
          annotation (Dialog(enable=not useExternalPressureInput));
        Physiolibrary.Types.RealIO.PressureInput externalPressure(start=
              ExternalPressure)=ep if useExternalPressureInput annotation (Placement(
              transformation(
              extent={{-20,-20},{20,20}},
              rotation=270,
              origin={80,80})));

        parameter Physiolibrary.Types.HydraulicCompliance C "Compliance or nominal compliance for non-linear PV characteristics" annotation(Evaluate=false);

        parameter Physiolibrary.Types.Volume zpv=0 "Zero-pressure volume" annotation(Evaluate = false);

        Physiolibrary.Types.Pressure p(nominal=1000) "middle pressure (at joint of viscous forces)";
        parameter Physiolibrary.Types.Pressure nominal_pressure=133.32 annotation(Evaluate=false);

        parameter Real k=C/(V_maxExponential - V_n)
          "For Pstras non-linear PV characteristics. For gamma = 0.0003750308";
        parameter Physiolibrary.Types.Volume V_maxExponential(nominal=1e-9) = V_n + (
          V_n - zpv)*gamma
          " V_n is between zpv and V_maxExponential, parameterized by gamma. 1 means its in the center. If the volume is over V_maxExponential, the PV characteristics follow the linear relation. For Pstras non-linear PV characteristics";
        parameter Physiolibrary.Types.Fraction gamma = 1 annotation(Evaluate=false);
        parameter Physiolibrary.Types.Volume V_n=nominal_pressure*C + zpv
          "nominal volume calculated from the linear relationship. nominal volume for non-linear compliance parametrization";
        parameter Physiolibrary.Types.Volume V_us=V_maxExponential - (
            V_maxExponential - V_n)*exp(nominal_pressure*k)
          "nonlinear Un-Stressed volume";
        parameter Physiolibrary.Types.Volume volume_linearBreakpoint=V_maxExponential*
            (1 - V_max_breakPoint_Frac)
          "Maximal volume for nonlinear function, usually set as a fraction of V_maxExponential.";
        parameter Real V_max_breakPoint_Frac = 1e-6;

      protected
        Physiolibrary.Types.Pressure ep;
      equation
        if not useExternalPressureInput then
          ep=ExternalPressure;
        end if;

        der(volume) =q_in.q;
        q_in.pressure = p + ep;

          // my expression based on straightening
          if noEvent(volume < volume_linearBreakpoint) then
            p =1/k*log((V_maxExponential - V_us)/(V_maxExponential - volume))
              "equation from Pstras 2017, 10.1093/imammb/dqw008, allegedly taken from Hardy & Collins 1982";
          else
            // linear steepness after volume too close to maximal volume
            // linearized by derivation of original equation, slope = 1/k_phi/(1e-6), V_max - volume = 1e-6:, u_C at point: 1/k_phi*log((V_max - V_us)/(1e-6))
            p - 1/k*log((V_maxExponential - V_us)/(V_maxExponential -
              volume_linearBreakpoint)) = 1/k/(V_maxExponential -
              volume_linearBreakpoint)*(volume - (V_maxExponential - V_maxExponential +
              volume_linearBreakpoint));
          end if;

       annotation (
          Icon(coordinateSystem(preserveAspectRatio=false,extent={{-100,-100},{
                  100,100}}), graphics={Text(
                extent={{-318,-140},{160,-100}},
                textString="%name",
                lineColor={0,0,255}), Line(
                points={{-100,-80},{24,-64},{68,60}},
                color={0,140,72},
                thickness=1,
                arrow={Arrow.None,Arrow.Filled},
                smooth=Smooth.Bezier)}),       Documentation(revisions="<html>
<p><i>2009-2014 - </i>Marek Matejak, Charles University, Prague, Czech Republic</p>
<ul>
<li>initial implementation </li>
</ul>
<p>4.5.2015 - Tom&aacute;&scaron; Kulh&aacute;nek, Charles University, Prague, Czech Republic</p>
<ul>
<li>fix of external pressure</li>
</ul>
</html>",   info="<html>
<p>Pressure can be generated by an elastic tissue surrounding some accumulated volume. Typically there is a threshold volume, below which the relative pressure is equal to external pressure and the wall of the blood vessels is not stressed. But if the volume rises above this value, the pressure increases proportionally. The slope in this pressure-volume characteristic is called &ldquo;Compliance&rdquo;.</p>
<ul>
<li>Increassing volume above ZeroPressureVolume (V0) generate positive pressure (greater than external pressure) lineary dependent on excess volume.</li>
<li>Decreasing volume below CollapsingPressureVolume (V00) generate negative pressure (lower than external pressure) logarithmicaly dependent on volume.</li>
<li>Otherwise external pressure is presented as pressure inside ElasticVessel.</li>
</ul>
<p><br><img src=\"modelica://Physiolibrary/Resources/Images/UserGuide/ElasticVessel_PV.png\"/></p>
</html>"));
      end ElasticVesselNonLinearPstras;

      package tests
        model testNonLin
          ElasticVesselNonLinearPstras
                                 elasticVesselNonLinearPstras(
            volume(start=0.0021),
            C(displayUnit="ml/mmHg") = 2.25018E-07,
            zpv=0.002,
            nominal_pressure(displayUnit="mmHg") = 1066.58,
            gamma=0.25)
            annotation (Placement(transformation(extent={{16,-14},{36,6}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump(SolutionFlow=1e-06)
            annotation (Placement(transformation(extent={{-54,-14},{-34,6}})));

          inner  Physiolibrary.Types.Fraction C_effect = 1;
          inner Physiolibrary.Types.Fraction ZPV_effect = 1;
          ElasticVessel_nonLinear elasticVessel_nonLinear(
            volume_start=0.002,
            ZeroPressureVolume=0.002,
            Compliance=1.9501600971987e-07,
            Vmax=0.0024)
            annotation (Placement(transformation(extent={{20,-58},{40,-38}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump1(SolutionFlow=1e-06)
            annotation (Placement(transformation(extent={{-54,-58},{-34,-38}})));
          ElasticVesselComponent elasticVesselComponent(volume(start=0.00015),
              Compliance=2.250184727537e-07)
            annotation (Placement(transformation(extent={{12,26},{32,46}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump2(SolutionFlow=1e-06)
            annotation (Placement(transformation(extent={{-54,26},{-34,46}})));
          ElasticVessel_nonLinearExp elasticVessel_nonLinearExp(
            ZeroPressureVolume=0.0001,
            volume(start=-1.5e-05),
            P0=1066.57909932,
            volume_full=0.0004,
            p_transm_full=5332.8954966)
            annotation (Placement(transformation(extent={{22,-90},{42,-70}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump3(SolutionFlow=1e-06)
            annotation (Placement(transformation(extent={{-56,-90},{-36,-70}})));
          Resistor_NonLinearSlow resistor_NonLinearSlow(R_nom(displayUnit=
                  "(mmHg.min)/l"))
            annotation (Placement(transformation(extent={{-36,54},{-16,74}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(P=0)
            annotation (Placement(transformation(extent={{30,54},{10,74}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(
              usePressureInput=true)
            annotation (Placement(transformation(extent={{-82,52},{-62,72}})));
          Modelica.Blocks.Sources.Ramp ramp(
            height=1332,
            duration=100,
            offset=2332,
            startTime=10) annotation (Placement(transformation(extent={{-124,52},
                    {-104,72}})));
        equation
          connect(unlimitedPump.q_out, elasticVesselNonLinearPstras.q_in) annotation (
              Line(
              points={{-34,-4},{26,-4}},
              color={0,0,0},
              thickness=1));
          connect(unlimitedPump1.q_out, elasticVessel_nonLinear.q_in) annotation (Line(
              points={{-34,-48},{30,-48}},
              color={0,0,0},
              thickness=1));
          connect(unlimitedPump2.q_out, elasticVesselComponent.q_in) annotation (Line(
              points={{-34,36},{22,36}},
              color={0,0,0},
              thickness=1));
          connect(unlimitedPump3.q_out, elasticVessel_nonLinearExp.q_in) annotation (
              Line(
              points={{-36,-80},{32,-80}},
              color={0,0,0},
              thickness=1));
          connect(unlimitedVolume1.y, resistor_NonLinearSlow.q_in) annotation (
              Line(
              points={{-62,62},{-50,62},{-50,64},{-36,64}},
              color={0,0,0},
              thickness=1));
          connect(resistor_NonLinearSlow.q_out, unlimitedVolume.y) annotation (
              Line(
              points={{-16,64},{10,64}},
              color={0,0,0},
              thickness=1));
          connect(unlimitedVolume1.pressure, ramp.y)
            annotation (Line(points={{-82,62},{-103,62}}, color={0,0,127}));
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)),
            experiment(
              StopTime=400,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end testNonLin;

        model TestPVChars

        Physiolibrary.Types.Pressure p_transm;
        Physiolibrary.Types.Pressure nt = exp(-kappa*(volume./V0-1));
        Physiolibrary.Types.Volume volume(start = 150e-6);
        parameter Physiolibrary.Types.Volume V0 = 250e-6;
        parameter Physiolibrary.Types.Pressure P0 = 1066;
        Real kappa;
        parameter Physiolibrary.Types.Volume zpv = 100e-6;

        equation
          // define the kappa
          P0*zpv/V0 = exp(-kappa*(zpv/V0-1));

          der(volume) = 1e-6;
          p_transm = P0*volume/V0 - nt;
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end TestPVChars;
      end tests;

      model ElasticVessel_nonLinearExp
        "Elastic container for non-linear large veins atanh"
       extends Physiolibrary.Icons.ElasticBalloon;
        Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a q_in
          annotation (Placement(transformation(extent={{-14,-14},{14,14}})));
      //   parameter Physiolibrary.Types.Volume volume_start=1e-11 "Volume start value"
      //     annotation (Dialog(group="Initialization"));                                 //default = 1e-5 ml
      //   Physiolibrary.Types.Volume excessVolume
      //     "Additional volume, that generate pressure";

         parameter Boolean useV0Input = false
          "=true, if zero-pressure-volume input is used"
          annotation(Evaluate=true, HideResult=true, choices(checkBox=true),Dialog(group="External inputs/outputs"));

         parameter Physiolibrary.Types.Volume ZeroPressureVolume=1e-11
          "Maximal volume, that does not generate pressure if useV0Input=false"
          annotation (Dialog(enable=not useV0Input)); //default = 1e-5 ml

          parameter Physiolibrary.Types.Volume CollapsingPressureVolume=1e-12
          "Maximal volume, which generate negative collapsing pressure"; //default = 1e-6 ml

         Physiolibrary.Types.RealIO.VolumeInput zeroPressureVolume(start=
              ZeroPressureVolume)=zpv if useV0Input annotation (Placement(
              transformation(
              extent={{-20,-20},{20,20}},
              rotation=270,
              origin={-80,80})));
      //   parameter Boolean useComplianceInput = false
      //     "=true, if compliance input is used"
      //     annotation(Evaluate=true, HideResult=true, choices(checkBox=true),Dialog(group="External inputs/outputs"));
        parameter Physiolibrary.Types.HydraulicCompliance Compliance=V0/P0
          "Compliance if useComplianceInput=false"
          annotation (Dialog(enable=not useComplianceInput));

      //   Physiolibrary.Types.RealIO.HydraulicComplianceInput compliance(start=
      //         Compliance)=c if useComplianceInput annotation (Placement(
      //         transformation(
      //         extent={{-20,-20},{20,20}},
      //         rotation=270,
      //         origin={0,80})));
        parameter Boolean useExternalPressureInput = false
          "=true, if external pressure input is used"
          annotation(Evaluate=true, HideResult=true, choices(checkBox=true),Dialog(group="External inputs/outputs"));
        parameter Physiolibrary.Types.Pressure ExternalPressure=0
          "External pressure. Set zero if internal pressure is relative to external. Valid only if useExternalPressureInput=false."
          annotation (Dialog(enable=not useExternalPressureInput));
        parameter Physiolibrary.Types.Pressure MinimalCollapsingPressure=-101325;
        Physiolibrary.Types.RealIO.PressureInput externalPressure(start=
              ExternalPressure)=ep if useExternalPressureInput annotation (Placement(
              transformation(
              extent={{-20,-20},{20,20}},
              rotation=270,
              origin={80,80})));

        Physiolibrary.Types.RealIO.VolumeOutput volume annotation (Placement(
              transformation(
              extent={{-20,-20},{20,20}},
              rotation=270,
              origin={0,-100}), iconTransformation(
              extent={{-20,-20},{20,20}},
              rotation=270,
              origin={60,-100})));
        Physiolibrary.Types.Pressure p_transm = q_in.pressure - ep;
        parameter Physiolibrary.Types.Volume Vmax = 500e-6;
        parameter Physiolibrary.Types.Volume V0 =   350e-6;
        parameter Physiolibrary.Types.Pressure P0 = 133.32;

        parameter Physiolibrary.Types.Volume volume_full =   400;
        parameter Physiolibrary.Types.Pressure p_transm_full = 20*133.32;

        Real kappa "Steepness of the negative exponential is defined by ZPV";
        Real gamma(start = 10) "steepness of the overfilled exponential";

        Physiolibrary.Types.Pressure negativeExponential= - exp(-kappa*(volume / V0 - 1));
        Physiolibrary.Types.Pressure positiveExponential= exp(gamma*(volume/V0 - 1))    "A negative exponential to subtrack at low volumes";
      protected
        Physiolibrary.Types.Volume zpv;
       // Physiolibrary.Types.HydraulicCompliance c;
        Physiolibrary.Types.Pressure ep;
        parameter Physiolibrary.Types.Pressure a=MinimalCollapsingPressure/log(
            Modelica.Constants.eps);
        constant Real pi = Modelica.Constants.pi;

      equation
        if not useV0Input then
          zpv=ZeroPressureVolume;
        end if;
      //   if not useComplianceInput then
      //     c=Compliance;
      //   end if;
        if not useExternalPressureInput then
          ep=ExternalPressure;
        end if;
       // excessVolume = volume - zpv;

      //
      // c0 = v0/p0
       // v0 = len*pi*2*r^2
       // p0 = 5 mmHg
       //
       // C = alpha*c0;
       // v0 = alpha*V000
       // v00 = r^2*pi*len
       // zero pressure volume = current volume at p0
       // ressitances?
      // gth, E, r
      // melchior

      // p_transm = atanh((volume-V0)./(Vmax-V0)) + P0;

      // tanh(p_transm - P0) = (volume-V0)/(Vmax-V0);
      // p_transm = tan(gamma*(volume-V0)./(Vmax-V0)) + P0;

      // p_transm = P0*volume./V0 - exp(-kappa*(volume./V0-1));

        // define the kappa
        P0*zpv/V0 = exp(-kappa*(zpv/V0-1));

        // define the gamma
        p_transm_full =P0*volume_full/V0 - exp(-kappa*(volume_full / V0 - 1)) + exp(gamma*(volume_full/V0 - 1));

      //  der(volume) = 1e-6;
        p_transm =P0*volume/V0 + negativeExponential + positiveExponential;

      //   q_in.pressure =
      //   smooth(0,
      //     if noEvent(volume>CollapsingPressureVolume) then
      //       (excessVolume/c + ep)
      //     else
      //       (a*log(max(Modelica.Constants.eps,volume/CollapsingPressureVolume)) + ep));
        //then: normal physiological state
        //else: abnormal collapsing state

        //Collapsing state: the max function prevents the zero or negative input to logarithm, the logarithm brings more negative pressure for smaller volume
        //However this collapsing is limited with numerical precission, which is reached relatively soon.

        der(volume) =q_in.q;

       // assert(volume>=-Modelica.Constants.eps,"Collapsing of vessels are not supported!");
       annotation (
          Icon(coordinateSystem(preserveAspectRatio=false,extent={{-100,-100},{
                  100,100}}), graphics={Text(
                extent={{-318,-140},{160,-100}},
                textString="%name",
                lineColor={0,0,255}), Line(
                points={{-100,-80},{24,-64},{68,60}},
                color={0,140,72},
                thickness=1,
                arrow={Arrow.None,Arrow.Filled},
                smooth=Smooth.Bezier)}),       Documentation(revisions="<html>
<p><i>2009-2014 - </i>Marek Matejak, Charles University, Prague, Czech Republic</p>
<ul>
<li>initial implementation </li>
</ul>
<p>4.5.2015 - Tom&aacute;&scaron; Kulh&aacute;nek, Charles University, Prague, Czech Republic</p>
<ul>
<li>fix of external pressure</li>
</ul>
</html>",   info="<html>
<p>Pressure can be generated by an elastic tissue surrounding some accumulated volume. Typically there is a threshold volume, below which the relative pressure is equal to external pressure and the wall of the blood vessels is not stressed. But if the volume rises above this value, the pressure increases proportionally. The slope in this pressure-volume characteristic is called &ldquo;Compliance&rdquo;.</p>
<ul>
<li>Increassing volume above ZeroPressureVolume (V0) generate positive pressure (greater than external pressure) lineary dependent on excess volume.</li>
<li>Decreasing volume below CollapsingPressureVolume (V00) generate negative pressure (lower than external pressure) logarithmicaly dependent on volume.</li>
<li>Otherwise external pressure is presented as pressure inside ElasticVessel.</li>
</ul>
<p><br><img src=\"modelica://Physiolibrary/Resources/Images/UserGuide/ElasticVessel_PV.png\"/></p>
</html>"));
      end ElasticVessel_nonLinearExp;

      model ResistanceWithInertance "Resistance and inertance merged into one component for easier replacements"
        extends Physiolibrary.Hydraulic.Interfaces.OnePort;
        parameter Physiolibrary.Types.HydraulicResistance resistance
          "Hydraulic conductance if useConductanceInput=false";
        parameter Physiolibrary.Types.HydraulicInertance inertance "Inertance";
        Physiolibrary.Types.Pressure dp_resistive = q_in.q*resistance;
        Physiolibrary.Types.Pressure dp_inertive =  der(q_in.q)*inertance;
      equation

        dp_resistive + dp_inertive = dp;

        annotation (Icon(graphics={  Bitmap(extent={{-100,-40},{46,46}},
                  fileName="modelica://Physiolibrary/Resources/Icons/resistance.png"),
                                               Bitmap(extent={{-16,-30},{144,36}},
                  fileName=
                    "modelica://Physiolibrary/Resources/Icons/ventilatorInertance.png")}));
      end ResistanceWithInertance;

      model Resistor_NonLinearSlow
        "Hydraulic resistor, where the pressure-flow characteristic is exponentially non-linear. Optional nominal conductance input at nominal flow. Reaction to flow integrally delayed."
       extends Physiolibrary.Hydraulic.Interfaces.OnePort;
       extends Physiolibrary.Icons.HydraulicResistor;

       parameter Boolean useConductanceInput = false annotation(choices(checkBox=true));
       parameter Boolean useNonlinearResistance = false annotation(choices(checkBox=true));
       parameter Boolean useNominalParametrization = false annotation(choices(checkBox=true));
       parameter Physiolibrary.Types.HydraulicResistance R_nom_fixed = 20000000 "Base Resistance or resistance for nominal resting flow if the useNominalParametrization is true";
       parameter Real exp_parameter = 1 "Fixed exponent for direct parametrization if useNominalParametrization is false" annotation (Dialog(enable = not useNominalParametrization and useNonlinearResistance));

       // initizalization
        parameter Physiolibrary.Types.HydraulicResistance R_nom = 20000000
          "Nominal resistance at nominal flow";
        parameter Physiolibrary.Types.Pressure dp_nom=R_nom*Q_nom
          "nominal pressure drop (use default)";
        parameter Physiolibrary.Types.Pressure dp_high=(R_nom_fixed/2)*Q_high;
        parameter Physiolibrary.Types.VolumeFlowRate Q_nom=0.0001 "nominal flow";
        parameter Physiolibrary.Types.VolumeFlowRate Q_high=0.00033333333333333
          "Nominal flow for maximal flow case (e.g. exercise)" annotation (Dialog(enable=
                useNominalParametrization and useNonlinearResistance));
        parameter Modelica.Units.SI.Time tau=1;
        parameter Physiolibrary.Types.VolumeFlowRate maxLinearFlow=Q_nom
          "Maximal flow having constant TPR to prevent multistable simulation" annotation (Dialog(enable = useNonlinearResistance));
        Physiolibrary.Types.HydraulicResistance TPR= a*q_avg + b;
        Physiolibrary.Types.HydraulicResistance TPR_lim = min(R_lim_max, max(R_lim_min, TPR));
        parameter Physiolibrary.Types.HydraulicResistance R_lim_min = R_nom/2;
        parameter Physiolibrary.Types.HydraulicResistance R_lim_max = R_nom*2;
             Real a;
             Real b;
         Physiolibrary.Types.VolumeFlowRate q_avg;

      initial equation
        q_avg = Q_nom;
      equation

        dp_nom = (a*Q_nom + b)*Q_nom;
        dp_high =(a*Q_high + b)*Q_high;

        der(q_avg)*tau = q_in.q - q_avg;

        dp = TPR_lim*q_in.q;

       // if not useConductanceInput then
      //    R_nom = R_nom_fixed;
        //end if;

      //   // we must allow also negative flows
      //   // linear flow under the limit, also
      //    if noEvent(dp >= 0 and abs(q_in.q) > maxLinearFlow) then
      //          q_in.q = (dp/base)^(1/exp_);
      //          linear = 1;
      //    elseif noEvent(dp < 0 and abs(q_in.q) > maxLinearFlow) then
      //        q_in.q = -(-dp/base)^(1/exp_);
      //                linear = -1;
      //    else
      //     // linear characteristics inbetween
      //       q_in.q = dp/TPR_limit;
      //               linear = 0;
      //    end if;

        annotation (Icon(coordinateSystem(preserveAspectRatio=false, extent={{
                  -100,-100},{100,100}}),
                         graphics={Text(
                extent={{-220,-40},{200,-80}},
                lineColor={0,0,255},
                fillColor={58,117,175},
                fillPattern=FillPattern.Solid,
                textString="%name"), Line(
                points={{-100,-60},{26,-26},{80,80}},
                color={0,0,0},
                smooth=Smooth.Bezier,
                thickness=0.5)}),
          Documentation(revisions="<html>
<p><i>2020</i></p>
<p>Filip Jezek, University of Michigan</p>
</html>",   info="<html>
<p>This hydraulic conductance (resistance) element contains two connector sides. No hydraulic medium volume is changing in this element during simulation. That means that sum of flow in both connector sides is zero. The flow through element is determined by an exponential relation:</p>
<p><img src=\"modelica://Physiolibrary/Resources/Images/equations/equation-BpFHrLEf.png\" alt=\"dp = base*Q^exp_
\"/></p>
<p>where base and exp are parameters.</p>
<p>To prevent infinite resistance at small flow, one can adjust linear working areas. When the flow is below maxLinearFlow, then the following linear </p>
<p><span style=\"font-family: Courier New;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q_in.q&nbsp;=&nbsp;(dp/base)^(1/exp_);</span></p>
<p><span style=\"font-family: Courier New;\">&nbsp;&nbsp;<span style=\"color: #0000ff;\">elseif&nbsp;</span><span style=\"color: #ff0000;\">noEvent</span>(dp&nbsp;&lt;&nbsp;0<span style=\"font-family: Courier New; color: #0000ff;\">&nbsp;and&nbsp;</span><span style=\"color: #ff0000;\">abs</span>(q_in.q)&nbsp;&gt;&nbsp;maxLinearFlow)<span style=\"font-family: Courier New; color: #0000ff;\">&nbsp;then</span></p>
<p><span style=\"font-family: Courier New;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q_in.q&nbsp;=&nbsp;-(-dp/base)^(1/exp_);</span></p>
<p><span style=\"font-family: Courier New;\">&nbsp;&nbsp;<span style=\"color: #0000ff;\">else</span></p>
<p><span style=\"font-family: Courier New;\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #006400;\">//&nbsp;linear&nbsp;characteristics&nbsp;inbetween</span></p>
<p><span style=\"font-family: Courier New;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q_in.q&nbsp;=&nbsp;dp/TPR_limit;</span></p>
<p><span style=\"font-family: Courier New;\">&nbsp;&nbsp;<span style=\"color: #0000ff;\">end&nbsp;if</span>;</p>
<p><br><b>Ohm&apos;s law</b>. It is used conductance (=1/resistance) because it could be numerical zero better then infinity in resistance. </p>
</html>"));
      end Resistor_NonLinearSlow;

    model ValveInertia "Inertia calculated for valvular orifices"
      extends Physiolibrary.Hydraulic.Components.Inertia(I = settings.blood_rho*l/(3.14*D^2/4), R = 8*3.14*l*settings.blood_mu/A);
      outer Settings settings
        annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
        parameter Physiolibrary.Types.Length l = 0.01 "length of the orifice (or the 'action cone')";
        parameter Physiolibrary.Types.Length D = 2*sqrt(A/3.14) "inner valvular diameter";
        parameter Physiolibrary.Types.Area A_ind = 2.5e-4 "Indexed valvular diameter per body size, cm2/m2";
        parameter Physiolibrary.Types.Area A = A_ind*settings.BSA;
    //     parameter Physiolibrary.Types.HydraulicResistance R = 8*3.14*l*settings.blood_mu/A;
        //parameter Physiolibrary.Types.HydraulicInertance I = settings.blood_rho*l/(3.14*D^2/4);

    end ValveInertia;

      model VolumeRegulation

        Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump(
            useSolutionFlowInput=true, SolutionFlow(displayUnit="ml/min") = 1e-06)
          annotation (Placement(transformation(extent={{-18,-60},{2,-40}})));
        Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump1(
            useSolutionFlowInput=true)
          annotation (Placement(transformation(extent={{-18,-84},{2,-64}})));
        Physiolibrary.Hydraulic.Components.ElasticVessel addedVolume(volume_start=
              settings.V_PV_init)
          annotation (Placement(transformation(extent={{6,-84},{26,-64}})));
        Physiolibrary.Hydraulic.Sensors.FlowMeasure flowMeasure
          annotation (Placement(transformation(extent={{10,-40},{30,-60}})));
        inner Components.Settings settings(
          heart_vntr_D_0=4.85,
          starlingFactor_exp=1.25,
          heart_vntr_D_A=890.0,
          V_PV_init=0,
          baro_f1=3.625e-03,
          baro_tau_s(displayUnit="s") = 10,
          veins_delayed_activation=false,
          heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 4.600005e+03,
          heart_vntr_D_0_maxAct=1.225000e-03,
          heart_vntr_TS_maxAct(displayUnit="s") = 1.047740e-01,
          heart_vntr_TR_maxAct(displayUnit="s") = 7.597690e-02,
          eta_vc=2.101054e-01,
          tissues_eta_Ra=3.145225e+00,
          tissues_eta_Rv=2.806250e+00,
          tissues_eta_C=5.708013e-01,
          tissues_chi_Ra(displayUnit="1") = 2.481250e+01,
          tissues_chi_Rv=1.384375e+01,
          tissues_chi_C=-3.125000e-02,
          heart_R_LA(displayUnit="(mmHg.s)/ml") = 1.655068e+06,
          heart_R_vlv(displayUnit="(mmHg.s)/ml") = 7.723515e+05,
          heart_vntr_TS=3.246875e-01,
          heart_vntr_TR(displayUnit="s") = 4.031250e-01,
          heart_atr_D_0=2.651364e+07,
          heart_atr_D_A=7.621357e+07,
          syst_TPR=1.287333e+08,
          syst_TR_frac(displayUnit="1") = 5.227710e+00,
          pulm_C_PA=1.635189e-08,
          pulm_R(displayUnit="(Pa.s)/m3") = 1.019753e+07,
          heart_vntr_k_passive=5.000000e+00,
          heart_vntr_SLcollagen=2.087500e+00,
          heart_vntr_PConcollagen=2.642812e+01,
          heart_vntr_PExpcollagen=2.481250e+00,
          heart_atr_TS=0.08,
          dummy=2,
          baro_fsn(displayUnit="1/min") = 0.0355333333,
          syst_art_k_E=0.4402957,
          HR_max=3.1666666666667,
          chi_phi=0.7,
          heart_R_RA(displayUnit="(dyn.s)/cm5") = settings.heart_R_LA,
          pulm_q_nom_maxq(displayUnit="l/min") = 0.00033333333333333,
          initByPressure=false,
          veins_UseNonLinearVeins=true,
          veins_linearE_rel=765,
          veins_linearV0_rel=0.793,
          veins_activation_tau=1,
          heart_vntr_Tact_maxAct=8.000000e-02,
          heart_vntr_Lsref=1.9,
          heart_atr_TR=2.631250e-01,
          heart_vntr_Tact=8.000000e-02,
          syst_tissues_hydrostaticLevel_correction=1,
          tissues_SV_nom=0.000695,
          pulm_C_PV=3.194206e-07,
          syst_abd_P_th_ratio=0.8,
          heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
          heart_vntr_L0=1.6,
          pulm_P_PV_nom=1333.22387415,
          height=1.7132,
          tissues_CO_nom=0.000105,
          EvaluateFunctionalParams=true,
          HR_nominal=1.0666666666667,
          UseNonLinear_TissuesCompliance=true,
          baro_g=0.606258,
          baro_useAbsolutePressureTerm=false,
          baro_xi_delta0=2.688000e-01,
          pulm_R_exp=9.150000e-01,
          syst_art_UseVasoconstrictionEffect=true,
          tissues_UseStraighteningReaction2Phi=true,
          tissues_ZPV_nom=0.00210124,
          tissues_gamma=0.5,
          tissues_tau_R(displayUnit="s") = 0,
          veins_C_phi=0.09)
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
        parameter Physiolibrary.Types.VolumeFlowRate volumeInfusion(displayUnit="ml/min")=
           0                                                            "Height of ramps";
        Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b q_out annotation (
            Placement(transformation(rotation=0, extent={{90,10},{110,30}})));
        Modelica.Blocks.Continuous.LimPID PID1(
          controllerType=Modelica.Blocks.Types.SimpleController.PI,
          yMax=10e-6,
          yMin=1e-6)
          annotation (Placement(transformation(extent={{-68,-10},{-48,10}})));
        Physiolibrary.Types.RealIO.PressureInput p_measured
          "measured pressure" annotation (Placement(transformation(extent={{-120,
                  -20},{-80,20}})));
        Physiolibrary.Types.RealIO.PressureInput p_target "target pressure"
          annotation (Placement(transformation(extent={{-120,-120},{-80,-80}})));
        Modelica.Blocks.Math.Gain inverseGain(k=-1)
          annotation (Placement(transformation(extent={{-34,-10},{-14,10}})));
      equation
        connect(addedVolume.q_in,unlimitedPump1. q_out) annotation (Line(
            points={{16,-74},{2,-74}},
            color={0,0,0},
            thickness=1));
        connect(unlimitedPump.q_out,flowMeasure. q_in) annotation (Line(
            points={{2,-50},{10,-50}},
            color={0,0,0},
            thickness=1));
        connect(flowMeasure.volumeFlow,unlimitedPump1. solutionFlow)
          annotation (Line(points={{20,-62},{-8,-62},{-8,-67}},      color={0,
                0,127}));
        connect(q_out, flowMeasure.q_out)
          annotation (Line(points={{100,20},{82,20},{82,-50},{30,-50}},
                                                      color={0,0,0}));
        connect(p_measured, PID1.u_s)
          annotation (Line(points={{-100,0},{-70,0}}, color={0,0,127}));
        connect(PID1.u_m, p_target) annotation (Line(points={{-58,-12},{-58,
                -100},{-100,-100}}, color={0,0,127}));
        connect(PID1.y, inverseGain.u)
          annotation (Line(points={{-47,0},{-36,0}}, color={0,0,127}));
        connect(inverseGain.y, unlimitedPump.solutionFlow) annotation (Line(
              points={{-13,0},{-8,0},{-8,-43}}, color={0,0,127}));
      end VolumeRegulation;
    end Basic;

    package Subsystems
      "Organ-level subsystems, such as heart, pulmonary and systemic circulation"
      extends Modelica.Icons.VariantsPackage;

      package Baroreflex
        model Baroreceptor
          parameter Boolean useAbsolutePressureTerm = false "Use absolute distention for delta. If not, only pulse pressure is effective";
          Physiolibrary.Types.RealIO.FractionInput d
            "The distension ratio r/r0. Should be around 1, but not necesarily exactly 1, as it is compensated by other paraemters"
          annotation (Placement(transformation(
                  extent={{-110,-8},{-90,12}}),  iconTransformation(extent={{-120,
                    -20},{-80,20}})));
          Physiolibrary.Types.RealIO.FrequencyOutput fbr "Baroreceptor firing frequency output" annotation (Placement(transformation(
                  extent={{84,-10},{104,10}}),   iconTransformation(extent={{80,-20},
                    {120,20}})));
          Real fbr_auc "Discrete area under the fbr curve, reset per each positive peak";
          Real fbr_int "Integral of fbr (area under curve), reset per each positive peak";
          Real epsilon( start = 1) "Averaged distension ratio";
          parameter Physiolibrary.Types.Time tau_s=30 "Time constant for averaging";
          Real delta "Positive peaks detected";
          parameter Physiolibrary.Types.Fraction d0 = 1.5;
          parameter Real f0( unit = "Hz")= 300 "Base firing frequency";
          parameter Real delta0 = 0.4965 "Baseline delta";
          parameter Real xi_delta0 "Factor to scale the delta0 for identification";

          Real s(start = 0.85);
          parameter Real a(unit="s-1") = 0.0651;
          parameter Real b(unit="s-1") = 0.2004;
        //   parameter Real epsilon_start = 1.075;
        //   parameter Real s_start = 0.85;
        //   parameter Modelica.SIunits.Time resetAt = -1 "resets initial conditions to counter transients";
          parameter Boolean useStimulationInput = false "Option to add baroreceptor stimulation" annotation(choices(checkBox=true));
          Physiolibrary.Types.Frequency stimulation "additional baroreceptor stimulation";
          Physiolibrary.Types.RealIO.FrequencyInput stimulationInput = stimulation if useStimulationInput
            "Artificial stimulation of the baroreceptor"
            annotation (Placement(transformation(extent={{-110,-106},{-90,-86}}),
                iconTransformation(extent={{-120,-120},{-80,-80}})));
        equation
          if not useStimulationInput then
            stimulation = 0;
          end if;

          if useAbsolutePressureTerm then
            delta =max(d - epsilon, 0)*d/d0;
          else
            delta =max(d - epsilon, 0);
          end if;

          der(fbr_int) = fbr;
          when fbr > 0 then
            reinit(fbr_int, 0);
            fbr_auc = fbr_int;
          end when;
        //   when time > resetAt then
        //     reinit(epsilon, epsilon_start);
        //     reinit(s, s_start);
        //   end when;

          fbr =f0*s*(delta/(delta + delta0*xi_delta0)) + stimulation;

          der(epsilon) =(d - epsilon)/tau_s;
          der(s) =a*(1 - s) - b*s*(delta/(delta + delta0*xi_delta0));

          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end Baroreceptor;

        model Baroreflex
          Physiolibrary.Types.RealIO.FrequencyInput carotid_BR "carotid baroreceptor firing rate" annotation (Placement(transformation(
                  extent={{-118,-68},{-78,-28}}),
                                                iconTransformation(extent={{-120,-120},{
                    -80,-80}})));
          Physiolibrary.Types.RealIO.FrequencyInput aortic_BR "aortic baroreceptor firing rate" annotation (Placement(transformation(
                  extent={{-114,48},{-74,88}}), iconTransformation(extent={{-120,80},{-80,
                    120}})));

          Physiolibrary.Types.Fraction phi_mean(start=0.25)
            "An integral mean sympathetic stimulation average to stabilize the oscillations due to pulsating heart.";
        parameter Physiolibrary.Types.Frequency fsn = 0.041 "rising factor of the phi";
        parameter Real f1 = 0.0046 "decrease factor of the phi";
        parameter Physiolibrary.Types.Fraction g = 0.66 "Aortic / carotid sensitivity ratio";
          Real fbr_ao_contrib=2*g*aortic_BR
            "Weighted contribution of aortic firing rate";
          Real fbr_car_contrib=2*(1 - g)*carotid_BR
            "Weighted contribution of carotid firing rate";
        //     parameter Modelica.SIunits.Time resetAt = -1;
          parameter Modelica.Units.SI.Time tau_mean=10
            "time constant for integral average";
          Physiolibrary.Types.RealIO.FractionOutput phi(start=0.25)
            "Generalized activation coefficient 0.25 for baseline supine resting."
                                                        annotation (Placement(
                transformation(extent={{96,70},{116,90}})));

        //         Boolean beat = sample(0.1, 1);
        //
        parameter Real phi0 = 0.25;
        // Real fbr_ao_contrib_i, fbr_ao_contrib_a(start = 1), fbr_car_contrib_i, fbr_car_contrib_a(start = 1), t0;
         Real f1_adj(start = f1);
        //, f1_set(start = f1), phi_adj(start = phi0, fixed = true);
        // Boolean init_phase = if time > t_init_phase then false else true;
        // parameter Real t_init_phase = 120;
        // Real f1_adj_a, f1_adj_i;
        equation
        //   der(fbr_ao_contrib_i) = fbr_ao_contrib;
        //   der(fbr_car_contrib_i) = fbr_car_contrib;
        //
        //   when beat then
        //     t0 = time;
        //     fbr_ao_contrib_a = fbr_ao_contrib_i/(time-pre(t0));
        //     fbr_car_contrib_a = fbr_car_contrib_i/(time-pre(t0));
        //     f1_adj_a = f1_adj_i/(time-pre(t0));
        //     reinit(fbr_ao_contrib_i, 0);
        //     reinit(fbr_car_contrib_i, 0);
        //     reinit(f1_adj_i, 0);
        //   end when;

          // what the f1 has to be given the fsn
          // der(f1_adj) = fsn*(1 - phi_adj) - phi_adj*f1_adj*max(fbr_ao_contrib_a + fbr_car_contrib_a, 1e-9);
          der(f1_adj)*10 = fsn*(1 - phi0) - phi0*f1_adj*(fbr_ao_contrib + fbr_car_contrib);
        //   der(f1_adj_i) = f1_adj;
        //
        //   if init_phase then
        //     // no change in
        //     der(phi_adj) = 0;
        //   else
        //     der(phi_adj) = fsn*(1 - phi_adj) - phi_adj*f1_set*(fbr_ao_contrib + fbr_car_contrib);
        //   end if;
        //
        //   when not init_phase then
        //     f1_set = f1_adj_a;
        //   end when;
        //

        //   when time > resetAt then
        //     reinit(fiSN, fiSN_start);
        //   end when;
          der(phi_mean)*tau_mean = phi - phi_mean;

        //   // TODO get rid of this!
        //   if time < 60 then
        // phi = phi_adj;
          der(phi)= fsn*(1 - phi) - phi*f1*(fbr_ao_contrib + fbr_car_contrib);
        //   else
        //     der(fiSN) = 0;
        //   end if;
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end Baroreflex;

        partial model partialHeartRate "Base replaceable model to calculate heart rate from sympathetic activation"
          parameter Boolean useFractionInput = true;
          Physiolibrary.Types.RealIO.FrequencyOutput HR annotation (Placement(
                transformation(extent={{90,-10},{110,10}}), iconTransformation(extent={{92,-10},
                    {112,10}})));
          Physiolibrary.Types.RealIO.FractionInput
                                               phi if useFractionInput annotation (Placement(transformation(
                  extent={{-120,-20},{-80,20}}),iconTransformation(extent={{-120,-20},{-80,
                    20}})));

          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end partialHeartRate;

        model HeartRate_simple
          "Simple lienar calculation based on H0 offset and H1 slope params"
          extends partialHeartRate;

          parameter Physiolibrary.Types.Frequency H0=0.46666666666667;
          parameter Physiolibrary.Types.Frequency H1=2.6;

        equation
          HR = H0 + H1*phi;

          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end HeartRate_simple;



        model HeartRate_HRMinMax "Extesion to use parametrization using resting at maximal HR"
          extends partialHeartRate;
          parameter Physiolibrary.Types.Fraction phi0;
          parameter Physiolibrary.Types.Frequency HR_max = 3;
          parameter Physiolibrary.Types.Frequency HR_nom = 1;

          Real eta_HR;

        //   Physiolibrary.Types.RealIO.FrequencyOutput HR annotation (Placement(
        //         transformation(extent={{90,-10},{110,10}}), iconTransformation(extent={{92,-10},
        //             {112,10}})));
        //   Physiolibrary.Types.RealIO.FractionInput
        //                                        phi annotation (Placement(transformation(
        //           extent={{-120,-20},{-80,20}}),iconTransformation(extent={{-120,-20},{-80,
        //             20}})));

        // Physiolibrary.Types.Fraction phi_avg;
        // parameter Modelica.SIunits.Time tau = 0.001 "averaging phi";

        equation
        //   der(phi_avg)*tau = phi - phi_avg;

          HR_max =HR_nom*(1 + eta_HR*(1 - phi0));
          HR =HR_nom*(1 + eta_HR*(phi - phi0));
        //   HR =HR_nom*(1 + eta_HR*(phi_avg - phi0));

        end HeartRate_HRMinMax;

        model HeartRate_PrescribedTable
        extends partialHeartRate( final useFractionInput = false);
        Modelica.Blocks.Sources.TimeTable timeTable(table=heartRateTimeTable)
          annotation (Placement(transformation(extent={{-10,30},{10,50}})));
        parameter Real heartRateTimeTable[:,2]=[0,85.92844974; 20,86.38841567; 40,87.00170358;
            60,87.97274276; 80,92.82793867; 100,97.52981261]
               "Table matrix (time = first column; e.g., table=[0, 0; 1, 1; 2, 4])";
        Modelica.Blocks.Math.Gain gain(k=ConversionToHz)
          annotation (Placement(transformation(extent={{42,30},{62,50}})));
        parameter Real ConversionToHz=1/60 "Use 1 for direct table input in Hz";
        equation
        connect(timeTable.y, gain.u)
          annotation (Line(points={{11,40},{40,40}}, color={0,0,127}));
        connect(gain.y, HR) annotation (Line(points={{63,40},{86,40},{86,0},{100,0}},
              color={0,0,127}));
        end HeartRate_PrescribedTable;

        model Baroreflex_Kosinksi "Baroreflex system as in Kosinksi et al 2018"
          extends partialBaroreflex;
          Baroreflex baroreflex(
            phi(start=settings.phi0),
            phi_mean(start=settings.phi0),
            fsn(displayUnit="1/min") = settings.baro_fsn,
            f1=settings.baro_f1,
            g=settings.baro_g)
            annotation (Placement(transformation(extent={{4,10},{24,-10}})));
          Baroreceptor baroreceptor_aortic(
            tau_s(displayUnit="s") = settings.baro_tau_s,
            useAbsolutePressureTerm=settings.baro_useAbsolutePressureTerm,
            d0=settings.baro_d0,
            delta0=settings.baro_delta0_aor,
            xi_delta0=settings.baro_xi_delta0,
            f0=settings.baro_f0,
            a=settings.baro_a,
            b=settings.baro_b)
            annotation (Placement(transformation(extent={{-24,-26},{-4,-6}})));
          Baroreceptor baroreceptor_carotid(
            tau_s(displayUnit="s") = settings.baro_tau_s,
            useAbsolutePressureTerm=settings.baro_useAbsolutePressureTerm,
            d0=settings.baro_d0,
            delta0=settings.baro_delta0_car,
            xi_delta0=settings.baro_xi_delta0,
            useStimulationInput=true,
            f0=settings.baro_f0,
            a=settings.baro_a,
            b=settings.baro_b)
            annotation (Placement(transformation(extent={{-24,2},{-4,22}})));
          Modelica.Blocks.Sources.Step externalStimulation(height=0, startTime=0)
            annotation (Placement(transformation(extent={{-10,-4},{-14,0}})));
          outer Settings settings
            annotation (Placement(transformation(extent={{-30,22},{-22,30}})));
        equation
          connect(baroreceptor_carotid.fbr,baroreflex. carotid_BR) annotation (
              Line(points={{-4,12},{-2,12},{-2,10},{4,10}},              color={0,
                  0,127}));
          connect(baroreceptor_aortic.fbr,baroreflex. aortic_BR) annotation (Line(
                points={{-4,-16},{-2,-16},{-2,-10},{4,-10}},          color={0,0,
                  127}));
          connect(aortic_distention, baroreceptor_aortic.d) annotation (Line(
                points={{-32,-16},{-24,-16}},           color={0,0,127}));
          connect(carotid_distention, baroreceptor_carotid.d) annotation (Line(
                points={{-32,12},{-24,12}},                   color={0,0,127}));
          connect(phiOutput, baroreflex.phi)
            annotation (Line(points={{30,0},{28,0},{28,-8},{24.6,-8}},
                                                       color={0,0,127}));
          connect(externalStimulation.y, baroreceptor_carotid.stimulationInput)
            annotation (Line(points={{-14.2,-2},{-28,-2},{-28,2},{-24,2}}, color={0,0,127}));
          annotation (Diagram(coordinateSystem(extent={{-30,-30},{30,30}})),
              Icon(coordinateSystem(extent={{-30,-30},{30,30}})));
        end Baroreflex_Kosinksi;

        package Testers
          extends Modelica.Icons.ExamplesPackage;
          model TestBaro
            replaceable Systemic.Postures.SystemicAV_SupineTilt
              SystemicComponent(
              UseThoracic_PressureInput=false,
              useCapillaryPressureOutputs=true,
              baroreflex_system(
                baroreflex(phi(start=0.24543865, fixed=true)),
                baroreceptor_aortic(epsilon(start=1.5542563, fixed=true), s(start=0.7949342,
                      fixed=true)),
                baroreceptor_carotid(epsilon(start=1.1805798, fixed=true), s(start=0.8705892,
                      fixed=true))),
              ascending_aorta_A(
                q(start=4.784641e-06, fixed=true),
                vol1(start=8.974011e-06, fixed=false),
                vol2(start=8.974633e-06, fixed=true)),
              ascending_aorta_B(q_in(start=9.550115e-06, fixed=true), volume(start=2.6705711e-05,
                    fixed=true)),
              ascending_aorta_C(q_in(start=1.4892833e-05, fixed=true), volume(start=2.470239e-05,
                    fixed=true)),
              ascending_aorta_D(q_in(start=2.2515153e-05, fixed=true), volume(start=2.2555705e-05,
                    fixed=true)),
              aortic_arch_C2(q_in(start=2.9155679e-05, fixed=true), volume(start=2.064052e-05,
                    fixed=true)),
              brachiocephalic_trunk_C4(q_in(start=3.8519676e-05, fixed=true), volume(
                    start=1.3627096e-05, fixed=true)),
              aortic_arch_C46(q_in(start=-3.677047e-06, fixed=true), volume(start=1.2250377e-05,
                    fixed=true)),
              aortic_arch_C64(q_in(start=-9.211159e-06, fixed=true), volume(start=8.429468e-06,
                    fixed=true)),
              aortic_arch_C94(q_in(start=-7.157527e-06, fixed=true), volume(start=4.6974157e-05,
                    fixed=true)),
              thoracic_aorta_C96(q_in(start=1.5116759e-05, fixed=true), volume(start=8.466511e-06,
                    fixed=true)),
              thoracic_aorta_C100(q_in(start=1.9280043e-05, fixed=true), volume(start=6.532062e-06,
                    fixed=true)),
              thoracic_aorta_C104(q_in(start=2.2580616e-05, fixed=true), volume(start=1.2382817e-05,
                    fixed=true)),
              thoracic_aorta_C108(q_in(start=2.912047e-05, fixed=true), volume(start=4.0759846e-06,
                    fixed=true)),
              thoracic_aorta_C112(q_in(start=3.1290554e-05, fixed=true), volume(start=7.091713e-05,
                    fixed=true)),
              abdominal_aorta_C114(q_in(start=7.6400414e-05, fixed=true), volume(start=1.4656019e-06,
                    fixed=true)),
              abdominal_aorta_C136(q_in(start=6.2481115e-05, fixed=true), volume(start=6.1949254e-06,
                    fixed=true)),
              abdominal_aorta_C164(q_in(start=5.827466e-05, fixed=true), volume(start=1.8423988e-06,
                    fixed=true)),
              abdominal_aorta_C176(q_in(start=4.588869e-05, fixed=true), volume(start=4.984005e-06,
                    fixed=true)),
              abdominal_aorta_C188(q_in(start=3.5781806e-05, fixed=true), volume(start=2.0523312e-05,
                    fixed=true)),
              abdominal_aorta_C192(q_in(start=5.3816748e-05, fixed=true), volume(start=1.3003195e-05,
                    fixed=true)),
              celiac_trunk_C116(volume(start=0.0003495136, fixed=true)),
              renal_L166(volume(start=0.00031571154, fixed=true)),
              renal_R178(volume(start=0.0003128776, fixed=true)),
              common_iliac_R216(q_in(start=3.309105e-05, fixed=true), volume(start=1.0935433e-05,
                    fixed=true)),
              internal_iliac_T1_R218(volume(start=0.00017179479, fixed=true)),
              external_iliac_R220(q_in(start=3.4185286e-05, fixed=true), volume(start=5.699143e-06,
                    fixed=true)),
              femoral_R222(q_in(start=3.5626e-05, fixed=true), volume(start=1.6191549e-06,
                    fixed=true)),
              profundus_T2_R224(volume(start=0.00019692826, fixed=true)),
              femoral_R226(q_in(start=2.5831485e-05, fixed=true), volume(start=1.2400213e-05,
                    fixed=true)),
              popliteal_R228(q_in(start=8.4409085e-06, fixed=true), volume(start=3.7300333e-06,
                    fixed=true)),
              anterior_tibial_T3_R230(volume(start=2.5783704e-05, fixed=true)),
              popliteal_R232(q_in(start=1.8875189e-06, fixed=true), volume(start=1.8572001e-07,
                    fixed=true)),
              tibiofibular_trunk_R234(q_in(start=1.7289001e-06, fixed=true), volume(start=
                     7.5467074e-07, fixed=true)),
              posterior_tibial_T4_R236(volume(start=2.8153392e-05, fixed=true)),
              common_iliac_L194(q_in(start=3.311109e-05, fixed=true), volume(start=1.0430601e-05,
                    fixed=true)),
              internal_iliac_T1_L196(volume(start=0.0001717971, fixed=true)),
              external_iliac_L198(q_in(start=3.389515e-05, fixed=true), volume(start=5.6911244e-06,
                    fixed=true)),
              femoral_L200(q_in(start=3.5471436e-05, fixed=true), volume(start=1.6171402e-06,
                    fixed=true)),
              profundus_T2_L202(volume(start=0.00019693111, fixed=true)),
              femoral_L204(q_in(start=2.5763331e-05, fixed=true), volume(start=1.2409821e-05,
                    fixed=true)),
              popliteal_L206(q_in(start=8.460637e-06, fixed=true), volume(start=3.7338016e-06,
                    fixed=true)),
              anterior_tibial_T3_L208(volume(start=2.5784042e-05, fixed=true)),
              popliteal_L210(q_in(start=1.8937637e-06, fixed=true), volume(start=1.8582689e-07,
                    fixed=true)),
              tibiofibular_trunk_L212(q_in(start=1.7348666e-06, fixed=true), volume(start=
                     7.551303e-07, fixed=true)),
              posterior_tibial_T4_L214(volume(start=2.8153798e-05, fixed=true)),
              subclavian_R28(q_in(start=3.8833914e-06, fixed=true), volume(start=2.083091e-06,
                    fixed=true)),
              subclavian_R30(q_in(start=7.8023663e-07, fixed=true), volume(start=2.7236777e-06,
                    fixed=true)),
              axillary_R32(q_in(start=-3.3741804e-07, fixed=true), volume(start=3.156617e-06,
                    fixed=true)),
              brachial_R34(q_in(start=-6.472765e-07, fixed=true), volume(start=5.0388985e-06,
                    fixed=true)),
              ulnar_T2_R36(q_in(start=2.3331286e-06, fixed=true), volume(start=2.5472679e-07,
                    fixed=true)),
              ulnar_T2_R42(volume(start=5.924357e-05, fixed=true)),
              radial_T1_R44(volume(start=4.8524747e-05, fixed=true)),
              subclavian_L66(q_in(start=6.4793505e-07, fixed=true), volume(start=5.1168176e-06,
                    fixed=true)),
              subclavian_L78(q_in(start=-3.7711735e-07, fixed=true), volume(start=2.09775e-06,
                    fixed=true)),
              axillary_L80(q_in(start=4.2408644e-08, fixed=true), volume(start=3.3026083e-06,
                    fixed=true)),
              brachial_L82(q_in(start=2.6590346e-06, fixed=true), volume(start=1.656784e-06,
                    fixed=true)),
              ulnar_T2_L84(q_in(start=2.247795e-06, fixed=true), volume(start=2.5286965e-07,
                    fixed=true)),
              ulnar_T2_L90(volume(start=5.921964e-05, fixed=true)),
              radial_T1_L92(volume(start=5.1421463e-05, fixed=true)),
              common_carotid_R6_A(q_in(start=2.87642e-05, fixed=true), volume(start=5.034432e-06,
                    fixed=true)),
              common_carotid_R6_B(q_in(start=2.21228e-05, fixed=true), volume(start=4.195916e-06,
                    fixed=true)),
              common_carotid_R6_C(q_in(start=1.383126e-05, fixed=true), volume(start=3.0840024e-06,
                    fixed=true)),
              internal_carotid_R8_A(q_in(start=4.2769607e-06, fixed=true), volume(start=1.2338952e-06,
                    fixed=true)),
              internal_carotid_R8_B(q_in(start=2.9158741e-06, fixed=true), volume(start=7.792714e-07,
                    fixed=true)),
              internal_carotid_R8_C(volume(start=7.033415e-05, fixed=true)),
              external_carotid_T2_R26(volume(start=7.056327e-05, fixed=true)),
              common_carotid_L48_A(q_in(start=9.175078e-06, fixed=true), volume(start=5.558733e-06,
                    fixed=true)),
              common_carotid_L48_B(q_in(start=9.549615e-06, fixed=true), volume(start=4.68518e-06,
                    fixed=true)),
              common_carotid_L48_C(q_in(start=8.441612e-06, fixed=true), volume(start=4.0184045e-06,
                    fixed=true)),
              common_carotid_L48_D(q_in(start=6.4192946e-06, fixed=true), volume(start=3.1807929e-06,
                    fixed=true)),
              internal_carotid_L50_A(q_in(start=2.357541e-06, fixed=true), volume(start=1.2150231e-06,
                    fixed=true)),
              internal_carotid_L50_B(q_in(start=2.0221007e-06, fixed=true), volume(start=7.688558e-07,
                    fixed=true)),
              internal_carotid_L50_C(volume(start=7.034433e-05, fixed=true)),
              external_carotid_T2_L62(volume(start=7.056697e-05, fixed=true)),
              vertebral_L2(volume(start=6.488888e-05, fixed=true)),
              vertebral_R272(volume(start=6.489194e-05, fixed=true)),
              superior_vena_cava_C2(volume(start=3.651777e-06, fixed=true)),
              superior_vena_cava_C88(volume(start=6.29278e-06, fixed=true)),
              inferior_vena_cava_C8(volume(start=5.478282e-06, fixed=true)),
              hepatic_vein_T1_C10(volume(start=2.1482604e-06, fixed=true)),
              inferior_vena_cava_C12(volume(start=1.4871928e-05, fixed=true)),
              inferior_vena_cava_C16(volume(start=1.1699178e-05, fixed=true)),
              renal_vein_T1_R18(volume(start=3.4493303e-06, fixed=true)),
              inferior_vena_cava_C20(volume(start=8.162247e-07, fixed=true)),
              renal_vein_T1_L22(volume(start=3.0487447e-06, fixed=true)),
              inferior_vena_cava_C24(volume(start=3.255737e-05, fixed=true)),
              common_iliac_vein_L56(volume(start=7.926988e-06, fixed=true)),
              common_iliac_vein_R26(volume(start=7.288392e-06, fixed=true)),
              external_iliac_vein_R28(volume(start=1.0629653e-06, fixed=true)),
              internal_iliac_vein_T1_R30(volume(start=4.551988e-06, fixed=true)),
              external_iliac_vein_R32(volume(start=1.2319785e-05, fixed=true)),
              femoral_vein_R34(volume(start=5.35532e-07, fixed=true)),
              femoral_vein_R38(volume(start=4.2438987e-06, fixed=true)),
              profunda_femoris_vein_T2_R40(volume(start=1.1848854e-05, fixed=true)),
              femoral_vein_R42(volume(start=2.9878314e-05, fixed=true)),
              femoral_vein_R46(volume(start=1.6454726e-06, fixed=true)),
              popliteal_vein_R48(volume(start=6.6941016e-06, fixed=true)),
              anterior_tibial_vein_T4_R50(volume(start=2.6734629e-06, fixed=true)),
              popliteal_vein_R52(volume(start=1.4893069e-06, fixed=true)),
              posterior_tibial_vein_T6_R54(volume(start=3.0600793e-06, fixed=true)),
              external_iliac_vein_L58(volume(start=1.0639659e-06, fixed=true)),
              internal_iliac_vein_T1_L60(volume(start=4.680765e-06, fixed=true)),
              external_iliac_vein_L62(volume(start=1.2092006e-05, fixed=true)),
              femoral_vein_L64(volume(start=6.259138e-07, fixed=true)),
              femoral_vein_L68(volume(start=4.242873e-06, fixed=true)),
              profunda_femoris_vein_T2_L70(volume(start=1.1846445e-05, fixed=true)),
              femoral_vein_L72(volume(start=2.9872468e-05, fixed=true)),
              femoral_vein_L76(volume(start=1.6451415e-06, fixed=true)),
              popliteal_vein_L78(volume(start=6.692976e-06, fixed=true)),
              anterior_tibial_vein_T4_L80(volume(start=2.673604e-06, fixed=true)),
              popliteal_vein_L82(volume(start=1.4890684e-06, fixed=true)),
              posterior_tibial_vein_T6_L84(volume(start=3.0603046e-06, fixed=true)),
              brachiocephalic_vein_R90(volume(start=7.2837274e-06, fixed=true)),
              brachiocephalic_vein_L124(volume(start=1.37234e-05, fixed=true)),
              vertebral_vein_R92(volume(start=4.6293253e-06, fixed=true)),
              brachiocephalic_vein_R94(volume(start=1.6512116e-06, fixed=true)),
              subclavian_vein_R96(volume(start=8.0291113e-07, fixed=true)),
              internal_jugular_vein_R122(volume(start=3.1718333e-05, fixed=true)),
              external_jugular_vein_R98(volume(start=2.280869e-06, fixed=true)),
              subclavian_vein_R100(volume(start=3.2838227e-06, fixed=true)),
              axillary_vein_R102(volume(start=1.1541897e-05, fixed=true)),
              brachial_vein_R104(volume(start=2.396669e-06, fixed=true)),
              brachial_vein_R114(volume(start=2.1840924e-06, fixed=true)),
              brachial_vein_R108(volume(start=3.345079e-07, fixed=true)),
              ulnar_vein_T7_R110(volume(start=3.2279786e-06, fixed=true)),
              brachial_vein_R118(volume(start=2.1298871e-07, fixed=true)),
              radial_vein_T3_R120(volume(start=2.315635e-06, fixed=true)),
              vertebral_vein_L126(volume(start=4.347298e-06, fixed=true)),
              brachiocephalic_vein_L128(volume(start=8.389463e-07, fixed=true)),
              subclavian_vein_L130(volume(start=7.178509e-07, fixed=true)),
              internal_jugular_vein_L156(volume(start=1.9355799e-05, fixed=true)),
              external_jugular_vein_L132(volume(start=2.2462707e-06, fixed=true)),
              subclavian_vein_L134(volume(start=3.217474e-06, fixed=true)),
              axillary_vein_L136(volume(start=1.1734333e-05, fixed=true)),
              brachial_vein_L138(volume(start=2.4030064e-06, fixed=true)),
              brachial_vein_L148(volume(start=2.2049367e-06, fixed=true)),
              brachial_vein_L142(volume(start=3.3534812e-07, fixed=true)),
              ulnar_vein_T7_L144(volume(start=3.2303474e-06, fixed=true)),
              brachial_vein_L152(volume(start=2.151717e-07, fixed=true)),
              radial_vein_T3_L154(volume(start=2.3521472e-06, fixed=true)),
              mesenteric_artery(q_in(start=8.37803e-06, fixed=true), volume(start=6.8901113e-06,
                    fixed=true)),
              splanchnic_tissue(volume(start=0.00025349561, fixed=true)),
              splanchnic_vein(volume(start=1.7927327e-05, fixed=true)),
              coronary_arteries(q_in(start=3.148764e-06, fixed=true), volume(start=3.725168e-08,
                    fixed=true)),
              cardiac_tissue(volume(start=0.000113939175, fixed=true)),
              coronary_veins(volume(start=5.7432025e-08, fixed=true)),
              brachial_L82_HeartLevel(q_in(start=2.5544313e-08, fixed=true), volume(start=
                     3.3158349e-06, fixed=true)),
              UsePhi_Input=false)
                                 constrainedby
              Systemic.Postures.SystemicAV_SupineTilt
                         annotation (
                __Dymola_choicesAllMatching=true, Placement(transformation(extent={{-34,-14},
                      {42,16}})));
            inner Settings            settings(
              veins_UseNonLinearVeins=true,
              veins_linearE_rel=765,
              veins_linearV0_rel=0.793,
              veins_delayed_activation=true,
              veins_activation_tau=1,
              baro_fsn(displayUnit="Hz") = 0.038,
              initByPressure=false,
              heart_R_vlv(displayUnit="(Pa.s)/m3") = 133322.387415,
              heart_R_LA(displayUnit="(mmHg.s)/ml") = 3333059.685375,
              heart_vntr_TS_maxAct(displayUnit="s") = 0.034774043,
              heart_vntr_TR_maxAct(displayUnit="s") = 0.11722694,
              heart_vntr_Tact_maxAct=8.000000e-02,
              chi_phi=0.9,
              heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 1.082188e+04,
              heart_vntr_D_0_maxAct=0.0004215625,
              eta_vc=0.2201054,
              tissues_eta_Ra=1.245225,
              tissues_eta_C=0.5058013,
              tissues_chi_Ra=0.2,
              tissues_chi_C=-0.37421876,
              V_PV_init=0,
              heart_atr_D_A=55215000,
              heart_vntr_xi_Vw=0.9014874,
              heart_vntr_xi_AmRef=1.111598,
              heart_vntr_Lsref=1.900000e+00,
              heart_atr_D_0=14055120,
              heart_atr_TS=1.882500e-01,
              heart_atr_TR=2.631250e-01,
              heart_vntr_D_0=18.15655,
              heart_vntr_D_A=2846.905,
              heart_vntr_TS=8.825000e-02,
              heart_vntr_TR(displayUnit="s") = 2.975000e-01,
              heart_vntr_Tact=8.000000e-02,
              pulm_R=3628209,
              pulm_q_nom_maxq=0.0004958,
              syst_tissues_hydrostaticLevel_correction=1,
              HR_max=2.7333333333333,
              syst_TPR=128212500,
              syst_art_k_E=0.3973268,
              tissues_SV_nom=0.000695,
              pulm_C_PV=3.194206e-07,
              pulm_C_PA=5.3325e-08,
              heart_R_RA(displayUnit="(dyn.s)/cm5") = settings.heart_R_LA,
              tissues_eta_Rv=0,
              baro_tau_s(displayUnit="s") = 10,
              syst_TR_frac(displayUnit="1") = 4.695759e+00,
              syst_abd_P_th_ratio=0.8,
              heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
              heart_vntr_L0=1.6,
              pulm_P_PV_nom=1333.22387415,
              height=1.7132,
              tissues_CO_nom=0.000105,
              EvaluateFunctionalParams=true,
              HR_nominal=1.0666666666667,
              UseNonLinear_TissuesCompliance=true,
              baro_f1=3.379000e-03,
              baro_g=0.606258,
              baro_useAbsolutePressureTerm=false,
              baro_xi_delta0=2.688000e-01,
              pulm_R_exp=9.150000e-01,
              syst_art_UseVasoconstrictionEffect=true,
              tissues_UseStraighteningReaction2Phi=true,
              tissues_ZPV_nom=0.00210124,
              tissues_gamma=0.5,
              tissues_tau_R(displayUnit="s") = 0,
              veins_C_phi=0.09) annotation (Placement(transformation(extent={{-76,
                      48},{-56,68}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(
                usePressureInput=true)
              annotation (Placement(transformation(extent={{-72,-14},{-52,6}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(P=533.28954966)
              annotation (Placement(transformation(extent={{82,-14},{62,6}})));
            constant Real mmHg2SI=133.322;
            Modelica.Blocks.Sources.Sine sine(
              f(displayUnit="1/min") = 1.2,
              amplitude=(PA_s - PA_d)/2,
              offset=PA_d + (PA_s - PA_d)/2) annotation (Placement(
                  transformation(extent={{-100,-14},{-80,6}})));
           parameter Physiolibrary.Types.Pressure PA_s=15998.6864898;
           parameter Physiolibrary.Types.Pressure PA_d=10665.7909932;
          equation
            connect(unlimitedVolume.y, SystemicComponent.port_a) annotation (Line(
                points={{-52,-4},{-34,-4}},
                color={0,0,0},
                thickness=1));
            connect(unlimitedVolume1.y, SystemicComponent.port_b) annotation (Line(
                points={{62,-4},{42,-4}},
                color={0,0,0},
                thickness=1));
            connect(unlimitedVolume.pressure, sine.y)
              annotation (Line(points={{-72,-4},{-79,-4}}, color={0,0,127}));
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)),
              experiment(
                StopTime=200,
                Interval=0.001,
                __Dymola_Algorithm="Dassl"));
          end TestBaro;

          model FitHR
            Modelica.Blocks.Math.InverseBlockConstraints
              inverseBlockConstraints annotation (Placement(transformation(
                    extent={{-22,-12},{18,12}})));
            Physiolibrary.Types.Constants.FrequencyConst frequency(k=
                  1.6333333333333)
              annotation (Placement(transformation(extent={{-48,-4},{-40,4}})));
            replaceable HeartRate_HRMinMax                         heartRate(
              phi0=settings.phi0,
              HR_max=settings.HR_max,
              HR_nom=settings.HR_nominal)
              constrainedby HeartRate_HRMinMax
              annotation (Placement(transformation(extent={{6,-6},{-6,6}})));
            inner Settings            settings(
              baro_fsn(displayUnit="Hz") = 0.036,
              baro_tau_s(displayUnit="s") = 10,
              initByPressure=false,
              V_PV_init=0,
              heart_R_LA(displayUnit="(mmHg.s)/ml") = 4139729,
              heart_vntr_D_0=12.91385,
              heart_vntr_D_A=1571.971,
              heart_atr_D_0=15407920,
              heart_atr_D_A=113536000,
              syst_TPR=124846900,
              syst_TR_frac(displayUnit="1") = 5.012728e+00,
              pulm_C_PA=4.799251e-08,
              pulm_R=5841980,
              veins_UseNonLinearVeins=true,
              veins_linearE_rel=765,
              veins_linearV0_rel=0.793,
              veins_delayed_activation=true,
              veins_activation_tau=1,
              heart_R_vlv(displayUnit="(Pa.s)/m3") = 133322.387415,
              heart_vntr_TS_maxAct(displayUnit="s") = 0.034774043,
              heart_vntr_TR_maxAct(displayUnit="s") = 0.11722694,
              heart_vntr_Tact_maxAct=8.000000e-02,
              chi_phi=0.9,
              heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 1.082188e+04,
              heart_vntr_D_0_maxAct=0.0004215625,
              eta_vc=0.2201054,
              tissues_eta_Ra=1.245225,
              tissues_eta_C=0.5058013,
              tissues_chi_Ra=0.2,
              tissues_chi_C=-0.37421876,
              heart_vntr_Lsref=1.9,
              heart_atr_TS=1.882500e-01,
              heart_atr_TR=2.631250e-01,
              heart_vntr_TS=8.825000e-02,
              heart_vntr_TR(displayUnit="s") = 2.975000e-01,
              heart_vntr_Tact=8.000000e-02,
              pulm_q_nom_maxq=0.0004958,
              syst_tissues_hydrostaticLevel_correction=1,
              HR_max=2.7333333333333,
              syst_art_k_E=0.3973268,
              tissues_SV_nom=0.000695,
              pulm_C_PV=3.194206e-07,
              heart_R_RA(displayUnit="(dyn.s)/cm5") = settings.heart_R_LA,
              tissues_eta_Rv=0,
              syst_abd_P_th_ratio=0.8,
              heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
              heart_vntr_L0=1.6,
              pulm_P_PV_nom=1333.22387415,
              height=1.7132,
              tissues_CO_nom=0.000105,
              EvaluateFunctionalParams=true,
              HR_nominal=1.0666666666667,
              UseNonLinear_TissuesCompliance=true,
              baro_f1=3.379000e-03,
              baro_g=0.606258,
              baro_useAbsolutePressureTerm=false,
              baro_xi_delta0=2.688000e-01,
              pulm_R_exp=9.150000e-01,
              syst_art_UseVasoconstrictionEffect=true,
              tissues_UseStraighteningReaction2Phi=true,
              tissues_ZPV_nom=0.00210124,
              tissues_gamma=0.5,
              tissues_tau_R(displayUnit="s") = 0,
              veins_C_phi=0.09,
              heart_vntr_PConcollagen=20.0,
              heart_vntr_PExpcollagen=2.9,
              heart_vntr_SLcollagen=2.1,
              heart_vntr_k_passive=10.0) annotation (Placement(transformation(
                    extent={{-100,80},{-80,100}})));
          equation
            connect(frequency.y, inverseBlockConstraints.u1)
              annotation (Line(points={{-39,0},{-24,0}}, color={0,0,127}));
            connect(inverseBlockConstraints.u2, heartRate.HR)
              annotation (Line(points={{-18,0},{-6.12,0}}, color={0,0,127}));
            connect(inverseBlockConstraints.y2, heartRate.phi)
              annotation (Line(points={{15,0},{6,0}}, color={0,0,127}));
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)),
                Diagram(coordinateSystem(preserveAspectRatio=false)));
          end FitHR;
        end Testers;

        partial model partialBaroreflex
          Physiolibrary.Types.RealIO.FractionInput carotid_distention
            annotation (Placement(transformation(rotation=0, extent={{-35,9},{
                    -29,15}}), iconTransformation(extent={{-30,10},{-10,30}})));
          Physiolibrary.Types.RealIO.FractionInput aortic_distention
            annotation (Placement(transformation(rotation=0, extent={{-35,-19},
                    {-29,-13}}), iconTransformation(extent={{-30,-30},{-10,-10}})));
          Physiolibrary.Types.RealIO.FractionOutput phiOutput
                                                        annotation (Placement(
                transformation(extent={{27,-3},{33,3}}, rotation=0)));
          annotation (Diagram(coordinateSystem(extent={{-40,-40},{40,40}})),
              Icon(coordinateSystem(extent={{-40,-40},{40,40}})));
        end partialBaroreflex;

        model Baroreflex_Longterm "Long-term baroreflex, identified after long-term resetting of the Kosinksi"
          import Signals;
          extends partialBaroreflex;
          Boolean beat = sample(0, 1) "reset condition, e.g. 'mod(time, 1) > 0'" annotation (Dialog(group="Dynamic reset"));
          Signals.MaxZOH
                      maxZOH(reset=beat)
            annotation (Placement(transformation(extent={{-20,-14},{0,6}})));
          Signals.MinZOH
                      minZOH(reset=beat)
            annotation (Placement(transformation(extent={{-20,-40},{0,-20}})));
          Modelica.Blocks.Math.Add add(k2=-1)
            annotation (Placement(transformation(extent={{8,-28},{28,-8}})));
          Signals.ContinuousMeanValue continuousMeanValue
            annotation (Placement(transformation(extent={{38,-28},{58,-8}})));
        equation
          // identified by matlab curve fit of long-term distention difference
          phiOutput = (0.04637) / (continuousMeanValue.y + 0.05604);
          connect(aortic_distention, minZOH.u)
            annotation (Line(points={{-32,-16},{-32,-30},{-22,-30}}, color={0,0,127}));
          connect(aortic_distention, maxZOH.u) annotation (Line(points={{-32,-16},{-28,-16},
                  {-28,-4},{-22,-4}}, color={0,0,127}));
          connect(maxZOH.y, add.u1)
            annotation (Line(points={{1,-4},{6,-4},{6,-12}}, color={0,0,127}));
          connect(add.u2, minZOH.y) annotation (Line(points={{6,-24},{6,-44},{0,-44},{0,
                  -34},{1,-34},{1,-30}}, color={0,0,127}));
          connect(add.y, continuousMeanValue.u)
            annotation (Line(points={{29,-18},{36,-18}}, color={0,0,127}));
        end Baroreflex_Longterm;
      end Baroreflex;

      package Pulmonary
        package Auxiliary
          model inset_Pulmonary_ADAN86
            Systemic.ADAN86ArterialTree.Parameters_cellml.Parameters_Pulmonary
              Parameters_Pulmonary1 annotation (Placement(transformation(extent=
                     {{-100,80},{-80,100}})));
            input Real t(unit = "s");
            Real C_pas(unit = "m6.J-1");
            Real C_pat(unit = "m6.J-1");
            Real C_par(unit = "m6.J-1");
            Real C_pcp(unit = "m6.J-1");
            Real C_pvn(unit = "m6.J-1");
            Real C_pvc(unit = "m6.J-1");
            Real R_pas(unit = "J.s.m-6");
            Real R_pat(unit = "J.s.m-6");
            Real R_par(unit = "J.s.m-6");
            Real R_pcp(unit = "J.s.m-6");
            Real R_psh(unit = "J.s.m-6");
            Real R_pvn(unit = "J.s.m-6");
            Real I_pas(unit = "J.s2.m-6");
            Real I_pat(unit = "J.s2.m-6");
            Real I_par(unit = "J.s2.m-6");
            Real I_pcp(unit = "J.s2.m-6");
            Real I_pvn(unit = "J.s2.m-6");
            Real I_psh(unit = "J.s2.m-6");
            Real u_pas(unit = "Pa", start = 4000.0);
            Real u_pat(unit = "Pa", start = 0.0);
            Real u_par(unit = "Pa", start = 0.0);
            Real u_pcp(unit = "Pa", start = 0.0);
            Real u_pvn(unit = "Pa", start = 0.0);
            input Real u_la(unit = "Pa");
            Real v_pas(unit = "m3.s-1", start = 0.0);
            Real v_pat(unit = "m3.s-1", start = 0.0);
            Real v_par(unit = "m3.s-1", start = 0.0);
            Real v_pcp(unit = "m3.s-1", start = 0.0);
            Real v_psh(unit = "m3.s-1", start = 0.0);
            Real v_pvn(unit = "m3.s-1", start = 0.0);
            input Real v_puv(unit = "m3.s-1");
           Physiolibrary.Types.RealIO.PressureInput thoracic_pressure annotation (Placement(
                  transformation(extent={{-28,-120},{12,-80}}), iconTransformation(extent={{-20,
                      -120},{20,-80}})));
            Physiolibrary.Types.RealIO.VolumeOutput volume = u_pas/C_pas + u_pat/C_pat + u_par/C_par + u_pcp/C_pcp + u_pvn/C_pvn annotation (Placement(
                  transformation(extent={{92,-6},{132,34}}),    iconTransformation(extent={{80,-20},
                      {120,20}})));
          equation
            C_pas = Parameters_Pulmonary1.C_pas;
            C_pat = Parameters_Pulmonary1.C_pat;
            C_par = Parameters_Pulmonary1.C_par;
            C_pcp = Parameters_Pulmonary1.C_pcp;
            C_pvn = Parameters_Pulmonary1.C_pvn;
            C_pvc = Parameters_Pulmonary1.C_pvc;
            R_pas = Parameters_Pulmonary1.R_pas;
            R_pat = Parameters_Pulmonary1.R_pat;
            R_par = Parameters_Pulmonary1.R_par;
            R_pcp = Parameters_Pulmonary1.R_pcp;
            R_psh = Parameters_Pulmonary1.R_psh;
            R_pvn = Parameters_Pulmonary1.R_pvn;
            I_pas = Parameters_Pulmonary1.I_pas;
            I_pat = Parameters_Pulmonary1.I_pat;
            I_par = Parameters_Pulmonary1.I_par;
            I_pcp = Parameters_Pulmonary1.I_pcp;
            I_pvn = Parameters_Pulmonary1.I_pvn;
            I_psh = Parameters_Pulmonary1.I_psh;

                der(u_pas - thoracic_pressure)  = (v_puv-v_pas)/C_pas;
                der(u_pat - thoracic_pressure) = (v_pas-v_pat)/C_pat;
                der(u_par - thoracic_pressure) = (v_pat-v_psh-v_par)/C_par;
                der(u_pcp - thoracic_pressure) = (v_par-v_pcp)/C_pcp;
                der(u_pvn - thoracic_pressure) = (v_pcp+v_psh-v_pvn)/C_pvn;
                der(v_pas) = (u_pas-u_pat-v_pas*R_pas)/I_pas;
                der(v_pat) = (u_pat-u_par-v_pat*R_pat)/I_pat;
                der(v_par) = (u_par-u_pcp-v_par*R_par)/I_par;
                der(v_pcp) = (u_pcp-u_pvn-v_pcp*R_pcp)/I_pcp;
                der(v_pvn) = (u_pvn-u_la-v_pvn*R_pvn)/I_pvn;
                der(v_psh) = (u_par-u_pvn-v_psh*R_psh)/I_psh;

          end inset_Pulmonary_ADAN86;

          model inset_Pulmonary_ADAN_VR_b580e
            ADAN_main.Components.Obsolete.Parameters_Pulmonary
              Parameters_Pulmonary1 annotation (Placement(transformation(extent=
                     {{-100,80},{-80,100}})));
            parameter Boolean UseSimplifiedInertance = true;
            input Real t(unit = "s");
            Real C_pas(unit = "m6.J-1");
            Real C_pat(unit = "m6.J-1");
            Real C_par(unit = "m6.J-1");
            Real C_pcp(unit = "m6.J-1");
            Real C_pvn(unit = "m6.J-1");
            Real C_pvc(unit = "m6.J-1");
            Real R_pas(unit = "J.s.m-6");
            Real R_pat(unit = "J.s.m-6");
            Real R_par(unit = "J.s.m-6");
            Real R_pcp(unit = "J.s.m-6");
            Real R_psh(unit = "J.s.m-6");
            Real R_pvn(unit = "J.s.m-6");
            Real I_pas(unit = "J.s2.m-6");
            Real I_pat(unit = "J.s2.m-6");
            Real I_par(unit = "J.s2.m-6");
            Real I_pcp(unit = "J.s2.m-6");
            Real I_pvn(unit = "J.s2.m-6");
            Real I_psh(unit = "J.s2.m-6");
            Real u_pas(unit = "Pa", start = 4000.0);
            Real u_pat(unit = "Pa", start = 0.0);
            Real u_par(unit = "Pa", start = 0.0);
            Real u_pcp(unit = "Pa", start = 0.0);
            Real u_pvn(unit = "Pa", start = 0.0);
            input Real u_la(unit = "Pa");
            Real v_pas(unit = "m3.s-1", nominal = 1e-6);
            Real v_pat(unit = "m3.s-1", nominal = 1e-6);
            Real v_par(unit = "m3.s-1", nominal = 1e-6);
            Real v_pcp(unit = "m3.s-1", nominal = 1e-6);
            Real v_psh(unit = "m3.s-1", nominal = 1e-6);
            Real v_pvn(unit = "m3.s-1", nominal = 1e-6);
            input Real v_puv(unit = "m3.s-1");
            Physiolibrary.Types.Volume V_pas = (u_pas - thoracic_pressure)*C_pas "Pulmonary artery volume";
            Physiolibrary.Types.Volume V_pat = (u_pat - thoracic_pressure)*C_pat "Pulmonary arteries volume";
            Physiolibrary.Types.Volume V_par = (u_par - thoracic_pressure)*C_par "Pulmonary arterioles volume";
            Physiolibrary.Types.Volume V_pcp = (u_pcp - thoracic_pressure)*C_pcp "Pulmonary capillaries volume";
            Physiolibrary.Types.Volume V_pvn = (u_pvn - thoracic_pressure)*C_pvn "Pulmonary veins volume";
            Physiolibrary.Types.Volume total_stressed_volume = V_pas + V_pat + V_par + V_pcp + V_pvn;
            input Physiolibrary.Types.Pressure thoracic_pressure;
          //  Physiolibrary.Types.Volume V_pvc = u_pvc*C_pvc;
          equation
            C_pas = Parameters_Pulmonary1.C_pas;
            C_pat = Parameters_Pulmonary1.C_pat;
            C_par = Parameters_Pulmonary1.C_par;
            C_pcp = Parameters_Pulmonary1.C_pcp;
            C_pvn = Parameters_Pulmonary1.C_pvn;
            C_pvc = Parameters_Pulmonary1.C_pvc;
            R_pas = Parameters_Pulmonary1.R_pas;
            R_pat = Parameters_Pulmonary1.R_pat;
            R_par = Parameters_Pulmonary1.R_par;
            R_pcp = Parameters_Pulmonary1.R_pcp;
            R_psh = Parameters_Pulmonary1.R_psh;
            R_pvn = Parameters_Pulmonary1.R_pvn;
            I_pas = Parameters_Pulmonary1.I_pas;
            I_pat = Parameters_Pulmonary1.I_pat;
            I_par = Parameters_Pulmonary1.I_par;
            I_pcp = Parameters_Pulmonary1.I_pcp;
            I_pvn = Parameters_Pulmonary1.I_pvn;
            I_psh = Parameters_Pulmonary1.I_psh;

                der(V_pas) = (v_puv-v_pas);
                der(V_pat) = (v_pas-v_pat);
                der(V_par) = (v_pat-v_psh-v_par);
                der(V_pcp) = (v_par-v_pcp);
                der(V_pvn) = (v_pcp+v_psh-v_pvn);
                der(v_pas) = (u_pas-u_pat-v_pas*R_pas)/I_pas;
                der(v_pat) = (u_pat-u_par-v_pat*R_pat)/I_pat;

                if not UseSimplifiedInertance then
                  der(v_par) = (u_par-u_pcp-v_par*R_par)/I_par;
                  der(v_pcp) = (u_pcp-u_pvn-v_pcp*R_pcp)/I_pcp;
                  der(v_pvn) = (u_pvn-u_la-v_pvn*R_pvn)/I_pvn;
                  der(v_psh) = (u_par-u_pvn-v_psh*R_psh)/I_psh;
                else
                  0 = (u_par-u_pcp-v_par*R_par);
                  0 = (u_pcp-u_pvn-v_pcp*R_pcp);
                  0 = (u_pvn-u_la-v_pvn*R_pvn);
                  0 = (u_par-u_pvn-v_psh*R_psh);
                end if;

          end inset_Pulmonary_ADAN_VR_b580e;

          model OuterAdenosine "Reads the outer adenosine factor"
            Physiolibrary.Types.RealIO.FractionOutput adenosineDoseOutput "Sympathetic activation"
              annotation (Placement(transformation(extent={{80,-20},{120,20}})));
            outer Physiolibrary.Types.Fraction AdenosineDose;

            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)));
          end OuterAdenosine;
        end Auxiliary;

        partial model partialPulmonary
          extends Physiolibrary.Icons.Lungs;

          Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_a
            annotation (Placement(transformation(extent={{-110,-10},{-90,10}}),
                iconTransformation(extent={{-110,-10},{-90,10}})));
         Physiolibrary.Types.RealIO.PressureInput thoracic_pressure = _thoracic_pressure if UseThoracic_PressureInput annotation (Placement(
                transformation(extent={{-28,-120},{12,-80}}), iconTransformation(extent={{-20,
                    -120},{20,-80}})));
          Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b port_b
            annotation (Placement(transformation(extent={{90,-10},{110,10}}),
                iconTransformation(extent={{90,-10},{110,10}})));
          parameter Boolean UsePhi_Input = false annotation(choices(checkBox=true));
          parameter Boolean UseThoracic_PressureInput=true    annotation(choices(checkBox=true));
          parameter Physiolibrary.Types.Volume deadVolume = 1e-3 "Additional buffer for pulmonary venous pool to apply volume additions or subtractions without running to negative volumes. Gets subtracked from the total blood volume eventually.";
          Physiolibrary.Types.Pressure _thoracic_pressure;
          Physiolibrary.Types.Volume volume;
          outer Settings settings annotation (Placement(transformation(extent={
                    {-100,80},{-80,100}})));
          Physiolibrary.Types.Constants.FractionConst phi0(k(displayUnit="(mmHg.s)/ml")=
                 settings.phi0) if not UsePhi_Input
            annotation (Placement(transformation(extent={{-90,56},{-82,64}})));
          Physiolibrary.Types.RealIO.FractionInput phi_input if UsePhi_Input annotation (Placement(
              transformation(extent={{-120,40},{-80,80}}),  iconTransformation(extent={{80,-100},
                    {120,-60}})));
        protected
          Physiolibrary.Types.RealIO.FractionInput phi_input1
            annotation (Placement(transformation(extent={{-72,58},{-68,62}})));
        equation
          if not UseThoracic_PressureInput then
            _thoracic_pressure = 0;
          end if;

          connect(phi_input, phi_input1)
            annotation (Line(points={{-100,60},{-70,60}},   color={0,0,127}));
          connect(phi0.y, phi_input1)
            annotation (Line(points={{-81,60},{-70,60}},   color={0,0,127}));
        end partialPulmonary;

        model Pulmonary_ADAN86
          extends Subsystems.Pulmonary.partialPulmonary;
          replaceable
            ADAN_main.Components.Subsystems.Pulmonary.Auxiliary.inset_Pulmonary_ADAN86
            Pulmonary1(
            u_la=la.u,
            v_puv=puv.v,
            t=0)
            annotation (Placement(transformation(extent={{-10,-10},{10,10}})));
          ADAN_main.Components.Interfaces.Pq_terminator_p puv(u=Pulmonary1.u_pas)
            annotation (Placement(transformation(extent={{-60,-10},{-80,10}})));
          ADAN_main.Components.Interfaces.Pq_terminator_v la(v=-Pulmonary1.v_pvn)
            annotation (Placement(transformation(extent={{60,-10},{80,10}})));
        equation
          volume = Pulmonary1.volume;
          connect(la.port_a, port_b) annotation (Line(
              points={{80,0},{100,0}},
              color={0,0,0},
              thickness=1));
          connect(port_a, puv.port_a) annotation (Line(
              points={{-100,0},{-80,0}},
              color={0,0,0},
              thickness=1));

        //  puv.u = Pulmonary1.u_pas;
        //  la.v = Pulmonary1.v_pvn;
          connect(Pulmonary1.thoracic_pressure, thoracic_pressure)
            annotation (Line(points={{0,-10},{-8,-10},{-8,-100}}, color={0,0,127}));
          annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                  Text(
                  extent={{-100,60},{100,100}},
                  lineColor={0,0,0},
                  textString="ADAN_86")}),                               Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end Pulmonary_ADAN86;

        model Pulmonary_ADAN_VR
          extends ADAN_main.Components.Subsystems.Pulmonary.partialPulmonary;

          ADAN_main.Components.Subsystems.Pulmonary.Auxiliary.inset_Pulmonary_ADAN_VR_b580e
            pulmonary(
            u_pas(displayUnit="Pa"),
            u_la=port_b.pressure,
            v_puv=port_a.q,
            thoracic_pressure=_thoracic_pressure,
            t=time)
            annotation (Placement(transformation(extent={{-10,-10},{10,10}})));

        equation
          volume = pulmonary.total_stressed_volume;

            port_a.pressure =pulmonary.u_pas;
          port_b.q = -pulmonary.v_pvn;

          annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                  Text(
                  extent={{-100,60},{100,100}},
                  lineColor={0,0,0},
                  textString="ADAN_VR")}),                               Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end Pulmonary_ADAN_VR;

        model Pulmonary_Smith
          extends Subsystems.Pulmonary.partialPulmonary(
                                          UseThoracic_PressureInput=true);
            Physiolibrary.Hydraulic.Components.ElasticVesselElastance
                                   pulmonaryArteries(
            ZeroPressureVolume=0,
            useExternalPressureInput=true,
            volume_start=3.904e-05,
            Elastance(displayUnit="Pa/m3") = 49195960.956135)
            annotation (Placement(transformation(extent={{-44,-10},{-24,10}})));
          Physiolibrary.Hydraulic.Components.Resistor
                   Rpul(Resistance(displayUnit="(mmHg.s)/ml") = 20691634.526808)
            annotation (HideResult = false, Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=0,
                origin={0,0})));
        Physiolibrary.Hydraulic.Components.ElasticVesselElastance
                               pulmonaryVeins(
            ZeroPressureVolume=0,
            useExternalPressureInput=true,
            volume_start=0.0008269,
            Elastance(displayUnit="Pa/m3") = 973253.4281295)
            annotation (Placement(transformation(extent={{32,-10},{52,10}})));
          Physiolibrary.Types.Constants.PressureConst pressure(k=0) if not
            UseThoracic_PressureInput
            annotation (Placement(transformation(extent={{-32,28},{-24,36}})));
        equation
          volume = pulmonaryArteries.volume + pulmonaryVeins.volume;

          connect(pulmonaryArteries.q_in,Rpul. q_in) annotation (Line(
              points={{-34,2.22045e-16},{-10,2.22045e-16},{-10,0}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(Rpul.q_out,pulmonaryVeins. q_in) annotation (Line(
              points={{10,2.22045e-16},{10,0},{42,0},{42,2.22045e-16}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(thoracic_pressure, pulmonaryVeins.externalPressure)
            annotation (Line(points={{-8,-100},{50,-100},{50,8}}, color={0,0,127}));
          connect(thoracic_pressure, pulmonaryArteries.externalPressure) annotation (
              Line(points={{-8,-100},{50,-100},{50,8},{-26,8}}, color={0,0,127}));
          connect(pulmonaryArteries.q_in, port_a) annotation (Line(
              points={{-34,2.22045e-16},{-36,2.22045e-16},{-36,0},{-100,0}},
              color={0,0,0},
              thickness=1));
          connect(pulmonaryVeins.q_in, port_b) annotation (Line(
              points={{42,0},{100,0}},
              color={0,0,0},
              thickness=1));
          connect(pressure.y, pulmonaryArteries.externalPressure) annotation (Line(
                points={{-23,32},{-20,32},{-20,8},{-26,8}}, color={0,0,127}));
          connect(pressure.y, pulmonaryVeins.externalPressure) annotation (Line(
                points={{-23,32},{18,32},{18,8},{50,8}}, color={0,0,127}));
          annotation (Icon(graphics={Text(
                  extent={{-100,60},{100,100}},
                  lineColor={0,0,0},
                  textString="Smith")}));
        end Pulmonary_Smith;

        model PulmonaryTriSeg
          "Reimplementation of CardiovascularMechanics model"
          extends partialPulmonary(UseThoracic_PressureInput=false);
          import ADAN_main.Components.Constants.*;

          parameter Boolean UseAdenosineInput = false annotation(choices(checkBox=true));

          replaceable Physiolibrary.Hydraulic.Components.Resistor r_pa(
              useConductanceInput=true, Resistance(displayUnit="(mmHg.s)/ml")=
                 settings.pulm_R) constrainedby
            Physiolibrary.Hydraulic.Interfaces.OnePort
            annotation (Placement(transformation(extent={{-10,-10},{10,10}})));

          replaceable
          Physiolibrary.Hydraulic.Components.ElasticVessel c_pa(
            volume_start(displayUnit="ml") = 3.5e-05,
            Compliance(displayUnit="ml/mmHg") = settings.pulm_C_PA,
                       useExternalPressureInput=UseThoracic_PressureInput)
            annotation (Placement(transformation(extent={{-70,-60},{-50,-40}})));
          replaceable
          Physiolibrary.Hydraulic.Components.ElasticVessel c_pv(
            volume_start(displayUnit="ml") = 65e-6 + deadVolume + settings.V_PV_init,
            ZeroPressureVolume=deadVolume,
            Compliance(displayUnit="ml/mmHg") = settings.pulm_C_PV,
                       useExternalPressureInput=UseThoracic_PressureInput)
            annotation (Placement(transformation(extent={{50,-60},{70,-40}})));

          Physiolibrary.Types.Constants.HydraulicConductanceConst
            hydraulicConductance(k=1/settings.pulm_R)
            annotation (Placement(transformation(extent={{-28,76},{-20,84}})));
          Signals.Phi_factor phi_factor(phi0=0, eta=1)
            annotation (Placement(transformation(extent={{-10,30},{10,50}})));
          Physiolibrary.Types.RealIO.FractionInput adenosine if UseAdenosineInput
            "Adenosine dose"
            annotation (Placement(transformation(extent={{-120,20},{-80,60}})));
          Physiolibrary.Types.Constants.FractionConst fraction(k=0)
                                                               if not UseAdenosineInput
            annotation (Placement(transformation(extent={{-90,46},{-82,54}})));

          replaceable Physiolibrary.Hydraulic.Components.Resistor R_pv_visc(
              useConductanceInput=false, Resistance(displayUnit="(Pa.s)/m3")=
              1) constrainedby Physiolibrary.Hydraulic.Components.Resistor
            annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=270,
                origin={60,-20})));
          replaceable Physiolibrary.Hydraulic.Components.Resistor R_pa_visc(
              useConductanceInput=false, Resistance(displayUnit="(Pa.s)/m3")=
              0.01/settings.pulm_C_PA) constrainedby
            Physiolibrary.Hydraulic.Components.Resistor annotation (Placement(
                transformation(
                extent={{-10,-10},{10,10}},
                rotation=270,
                origin={-60,-18})));
          Physiolibrary.Blocks.Factors.Normalization normalization(enabled=true)
            annotation (Placement(transformation(extent={{-10,10},{10,30}})));
          Physiolibrary.Types.RealIO.FractionInput conductanceFraction
         if UseCondFracInput "Variable change to baseline conductance"
            annotation (Placement(transformation(extent={{-120,0},{-80,40}})));
          Physiolibrary.Types.Constants.FractionConst conductance0(k=1) if not
            UseCondFracInput "Normal conductance fraction"
            annotation (Placement(transformation(extent={{-90,26},{-82,34}})));
          parameter Boolean UseCondFracInput=false "Use conductance modifier input";
          Physiolibrary.Blocks.Factors.ProportionalFactor proportionalFactor(u0=
               settings.phi0)
            annotation (Placement(transformation(extent={{-10,50},{10,70}})));
        equation
          volume =c_pa.volume + c_pv.volume - deadVolume;

          connect(port_a, r_pa.q_in) annotation (Line(
              points={{-100,0},{-10,0}},
              color={0,0,0},
              thickness=1));
          connect(r_pa.q_out, port_b) annotation (Line(
              points={{10,0},{100,0}},
              color={0,0,0},
              thickness=1));
          connect(c_pa.externalPressure, thoracic_pressure)
            annotation (Line(points={{-52,-42},{-8,-42},{-8,-100}}, color={0,0,127}));
          connect(c_pv.externalPressure, thoracic_pressure)
            annotation (Line(points={{68,-42},{-8,-42},{-8,-100}}, color={0,0,127}));
          connect(adenosine, phi_factor.phi)
            annotation (Line(points={{-100,40},{-10,40}}, color={0,0,127}));
          connect(fraction.y, phi_factor.phi) annotation (Line(points={{-81,50},{-54,50},
                  {-54,40},{-10,40}}, color={0,0,127}));
          connect(c_pv.q_in, R_pv_visc.q_out) annotation (Line(
              points={{60,-50},{60,-30}},
              color={0,0,0},
              thickness=1));
          connect(R_pv_visc.q_in, port_b) annotation (Line(
              points={{60,-10},{60,0},{100,0}},
              color={0,0,0},
              thickness=1));
          connect(c_pa.q_in, R_pa_visc.q_out) annotation (Line(
              points={{-60,-50},{-60,-28}},
              color={0,0,0},
              thickness=1));
          connect(R_pa_visc.q_in, r_pa.q_in) annotation (Line(
              points={{-60,-8},{-60,0},{-10,0}},
              color={0,0,0},
              thickness=1));
          connect(phi_factor.y, normalization.yBase)
            annotation (Line(points={{0,30},{0,22}}, color={0,0,127}));
          connect(normalization.y, r_pa.cond)
            annotation (Line(points={{0,16},{0,6}}, color={0,0,127}));
          connect(conductanceFraction, normalization.u)
            annotation (Line(points={{-100,20},{-8,20}}, color={0,0,127}));
          connect(conductance0.y, normalization.u) annotation (Line(points={{-81,30},{-54,
                  30},{-54,20},{-8,20}}, color={0,0,127}));
          connect(hydraulicConductance.y, proportionalFactor.yBase) annotation (
             Line(points={{-19,80},{0,80},{0,62}}, color={0,0,127}));
          connect(proportionalFactor.y, phi_factor.u)
            annotation (Line(points={{0,56},{0,50}}, color={0,0,127}));
          connect(phi_input1, proportionalFactor.u)
            annotation (Line(points={{-70,60},{-8,60}}, color={0,0,127}));
          annotation (Documentation(info="<html>
<p><b>Convention</b>:</p>
<p><br>The parameters are UPPERCASE, similarly to the Matlab source code.</p>
<p>The objects have LOWERCASE,  to distinguish them from parameters.</p>
<p>The parameters with original, non-SI unit start with underscore and are listed as Reals. Each used parameter have its SI counterpart.</p>
</html>"), Icon(graphics={                                  Text(
                  extent={{-100,20},{100,100}},
                  lineColor={0,0,0},
                  textString="TriSeg")}));
        end PulmonaryTriSeg;

        model PulmonaryTriSeg_Rat
          extends PulmonaryTriSeg(
            _R_PA=12/_CO_target*60,
            _C_PA=0.013778,
            _C_PV=0.25,
            _HR=300,
            _CO_target=95,
            c_pa(volume_start=vfactor*5e-07),
            c_pv(volume_start=vfactor*1e-06));
            parameter Physiolibrary.Types.Fraction vfactor = 0.732;

        // C_PV = 0.25; % Pulmonary venous compliance, mL/mmHg
        // C_PA = 0.013778; % Pulmonary arterial compliance, mL/mmHg
        // R_PA   = 12/CO_target*60; % Pulmonary vasculature resistance, mmHg*sec/mL % Match the old code(9/5 BM) DAB change 9/15
        // R_PV   = 0.25;

        end PulmonaryTriSeg_Rat;

        model PulmonaryTriSeg_NonLinear
          extends PulmonaryTriSeg(
            deadVolume=0,
            redeclare Basic.Resistor_NonLinear r_pa(
              useConductanceInput=false,
              R_nom_fixed=settings.pulm_R,
              Q_nom=settings.pulm_CO_target,
              useNonlinearResistance=true,
              useNominalParametrization=true,
              R_nom_maxQ=settings.pulm_R/2,
              Q_nom_maxQ=settings.pulm_q_nom_maxq,
              maxLinearFlow(displayUnit="l/min") = 1.6666666666667e-05),
            R_pv_visc(Resistance=settings.pulm_PV_R_vis));

          Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b PV_cannula
            if usePVCannula annotation (Placement(transformation(extent={{50,
                    -110},{70,-90}}), iconTransformation(extent={{50,-110},{70,
                    -90}})));
          parameter Boolean usePVCannula=false;
        equation
          connect(c_pv.q_in, PV_cannula) annotation (Line(
              points={{60,-50},{60,-100}},
              color={0,0,0},
              thickness=1));
          annotation (Icon(graphics={Line(
                  points={{-64,-38},{-4,-38},{16,22}},
                  color={0,0,0},
                  smooth=Smooth.Bezier,
                  thickness=0.5)}));
        end PulmonaryTriSeg_NonLinear;

        package Testers
          extends Modelica.Icons.ExamplesPackage;
          model TestResistance
            PulmonaryTriSeg_NonLinear pulmonaryTriSeg_NonLinear(r_pa(
                useConductanceInput=true,
                useNonlinearResistance=true,
                useNominalParametrization=true,
                R_nom_maxQ(displayUnit="(dyn.s)/cm5") = 10000000,
                Q_nom_maxQ(displayUnit="l/min")), fraction(k=1))
              annotation (Placement(transformation(extent={{12,-10},{32,10}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(
                usePressureInput=true)
              annotation (Placement(transformation(extent={{-60,-10},{-40,10}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1
              annotation (Placement(transformation(extent={{72,-10},{52,10}})));
            Modelica.Blocks.Sources.Ramp ramp(
              height=133*80,
              duration=100,
              startTime=1)
              annotation (Placement(transformation(extent={{-96,-10},{-76,10}})));
            inner Settings settings(pulm_R(displayUnit="(dyn.s)/cm5")=
                20000000) annotation (Placement(transformation(extent={{-100,80},
                      {-80,100}})));
            Basic.Resistor_NonLinear resistor_NonLinear(R_nom_fixed(displayUnit="(dyn.s)/cm5")=
                   100000)
              annotation (Placement(transformation(extent={{-20,-10},{0,10}})));
            Heart.Olsen.Pulmonary_Oslen
                                      pulmonary_Oslen(UseThoracic_PressureInput=
                 false)
              annotation (Placement(transformation(extent={{16,-60},{36,-40}})));
            Basic.Resistor_NonLinear resistor_NonLinear1(R_nom_fixed(
                  displayUnit="(dyn.s)/cm5") = 100000)
              annotation (Placement(transformation(extent={{-20,-60},{0,-40}})));
          equation
            connect(ramp.y, unlimitedVolume.pressure)
              annotation (Line(points={{-75,0},{-60,0}}, color={0,0,127}));
            connect(pulmonaryTriSeg_NonLinear.port_b, unlimitedVolume1.y) annotation (
                Line(
                points={{32,0},{52,0}},
                color={0,0,0},
                thickness=1));
            connect(unlimitedVolume.y, resistor_NonLinear.q_in) annotation (Line(
                points={{-40,0},{-20,0}},
                color={0,0,0},
                thickness=1));
            connect(resistor_NonLinear.q_out, pulmonaryTriSeg_NonLinear.port_a)
              annotation (Line(
                points={{0,0},{12,0}},
                color={0,0,0},
                thickness=1));
            connect(resistor_NonLinear1.q_out, pulmonary_Oslen.port_a)
              annotation (Line(
                points={{0,-50},{16,-50}},
                color={0,0,0},
                thickness=1));
            connect(pulmonary_Oslen.port_b, unlimitedVolume1.y) annotation (
                Line(
                points={{36,-50},{52,-50},{52,0}},
                color={0,0,0},
                thickness=1));
            connect(resistor_NonLinear1.q_in, unlimitedVolume.y) annotation (
                Line(
                points={{-20,-50},{-40,-50},{-40,0}},
                color={0,0,0},
                thickness=1));
            annotation (
              Icon(coordinateSystem(preserveAspectRatio=false)),
              Diagram(coordinateSystem(preserveAspectRatio=false)),
              experiment(
                StopTime=40,
                __Dymola_NumberOfIntervals=5000,
                Tolerance=1e-07,
                __Dymola_Algorithm="Dassl"));
          end TestResistance;
        end Testers;

        model PulmonaryTriSegNonLOnearVeins "duplicate of triseg pulmonary"
          extends partialPulmonary(UseThoracic_PressureInput=false);
          import ADAN_main.Components.Constants.*;

          parameter Boolean UseAdenosineInput = false annotation(choices(checkBox=true));

          replaceable Basic.Resistor_NonLinear                    r_pa(
              useConductanceInput=true,
                maxLinearFlow(displayUnit="l/min") = 1.6666666666667e-05)
                                  constrainedby
            Physiolibrary.Hydraulic.Interfaces.OnePort
            annotation (Placement(transformation(extent={{-10,-10},{10,10}})));

          replaceable
          Physiolibrary.Hydraulic.Components.ElasticVessel c_pa(
            volume_start(displayUnit="ml") = 3.5e-05,
            Compliance(displayUnit="ml/mmHg") = settings.pulm_C_PA,
                       useExternalPressureInput=UseThoracic_PressureInput)
            annotation (Placement(transformation(extent={{-70,-60},{-50,-40}})));
          Basic.ElasticVessel_nonLinearExp c_pv(
            volume(start=0.00044),
            useExternalPressureInput=UseThoracic_PressureInput,
            P0=1066.57909932)
            annotation (Placement(transformation(extent={{50,-60},{70,-40}})));

          Physiolibrary.Types.Constants.HydraulicConductanceConst
            hydraulicConductance(k=1/settings.pulm_R)
            annotation (Placement(transformation(extent={{-28,76},{-20,84}})));
          Signals.Phi_factor phi_factor(phi0=0, eta=1)
            annotation (Placement(transformation(extent={{-10,30},{10,50}})));
          Physiolibrary.Types.RealIO.FractionInput adenosine if UseAdenosineInput
            "Adenosine dose"
            annotation (Placement(transformation(extent={{-120,20},{-80,60}})));
          Physiolibrary.Types.Constants.FractionConst fraction(k=0)
                                                               if not UseAdenosineInput
            annotation (Placement(transformation(extent={{-90,46},{-82,54}})));

          replaceable Physiolibrary.Hydraulic.Components.Resistor R_pv_visc(
              useConductanceInput=false, Resistance(displayUnit="(Pa.s)/m3")=
              1) constrainedby Physiolibrary.Hydraulic.Components.Resistor
            annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=270,
                origin={60,-20})));
        equation
          volume = c_pa.volume + c_pv.volume - deadVolume;

          connect(port_a, r_pa.q_in) annotation (Line(
              points={{-100,0},{-10,0}},
              color={0,0,0},
              thickness=1));
          connect(c_pa.q_in, r_pa.q_in) annotation (Line(
              points={{-60,-50},{-60,0},{-10,0}},
              color={0,0,0},
              thickness=1));
          connect(r_pa.q_out, port_b) annotation (Line(
              points={{10,0},{100,0}},
              color={0,0,0},
              thickness=1));
          connect(c_pa.externalPressure, thoracic_pressure)
            annotation (Line(points={{-52,-42},{-8,-42},{-8,-100}}, color={0,0,127}));
          connect(c_pv.externalPressure, thoracic_pressure)
            annotation (Line(points={{68,-42},{-8,-42},{-8,-100}}, color={0,0,127}));
          connect(hydraulicConductance.y, phi_factor.u)
            annotation (Line(points={{-19,80},{0,80},{0,50}}, color={0,0,127}));
          connect(phi_factor.y, r_pa.cond)
            annotation (Line(points={{0,30},{0,4}}, color={0,0,127}));
          connect(adenosine, phi_factor.phi)
            annotation (Line(points={{-100,40},{-10,40}}, color={0,0,127}));
          connect(fraction.y, phi_factor.phi) annotation (Line(points={{-81,50},{-54,50},
                  {-54,40},{-10,40}}, color={0,0,127}));
          connect(c_pv.q_in, R_pv_visc.q_out) annotation (Line(
              points={{60,-50},{60,-30}},
              color={0,0,0},
              thickness=1));
          connect(R_pv_visc.q_in, port_b) annotation (Line(
              points={{60,-10},{60,0},{100,0}},
              color={0,0,0},
              thickness=1));
          annotation (Documentation(info="<html>
<p><b>Convention</b>:</p>
<p><br>The parameters are UPPERCASE, similarly to the Matlab source code.</p>
<p>The objects have LOWERCASE,  to distinguish them from parameters.</p>
<p>The parameters with original, non-SI unit start with underscore and are listed as Reals. Each used parameter have its SI counterpart.</p>
</html>"), Icon(graphics={                                  Text(
                  extent={{-100,20},{100,100}},
                  lineColor={0,0,0},
                  textString="TriSeg")}));
        end PulmonaryTriSegNonLOnearVeins;
      end Pulmonary;

      package Heart
        package Olsen
          partial model partialDriving_Olsen_orig
            "Model with missing equation for HRo"

          // Heart rate
            parameter Boolean HR_stepUp = true;
            parameter Physiolibrary.Types.Frequency HRo0_ref(displayUnit="1/min")=1.0333333333333
              "Reference cycle length for scaling the timing";
            parameter Physiolibrary.Types.Frequency HRo0(displayUnit="1/min")=1.0333333333333;
            Physiolibrary.Types.Frequency HRo "Olsen's heart rate";
            Physiolibrary.Types.Fraction cycleScale=HRo0_ref/HRo;
          // Activation, global
          parameter Modelica.Units.SI.Time Atact(displayUnit="ms")=0.01
                                                      " Timing of atrial activation within cycle";
          parameter Modelica.Units.SI.Time Aup(displayUnit="ms")=0.1
                                                     " Duration of upstroke of atrial activation";
          parameter Modelica.Units.SI.Time Aactdur(displayUnit="ms")=0.3
                                                         " Duration of atrial activation";
          parameter Modelica.Units.SI.Time Adown(displayUnit="ms")=0.16
                                                       " Duration of downstroke of atrial activation";

          parameter Real PRRRrel = 0.05 " Regression of PR change vs. RR change";
           // Ref: Subject-specific heart rate dependency of electrocardiographic QT, PQ, and QRS intervals.
           // Malik M1, Hnatkova K, Sisakova M, Schmidt G.
          parameter Modelica.Units.SI.Time LVdelay0(displayUnit="ms")=0.151
                                                          " Delay btw. atria and LV at HR 60";
            Real LVdelay=LVdelay0 + PRRRrel*((1/HRo) - 1)
              " Delay btw atria and LV with HR dependence";
          Real LVtact = Atact + LVdelay " Timing of LV activation within cycle";
          parameter Modelica.Units.SI.Time LVup(displayUnit="ms")=0.243
                                                      " Duration of upstroke of LV activation - no relation with HR (J Electrocardiol. 2008 Nov-Dec;41(6):491-7. doi: 10.1016/j.jelectrocard.2008.06.022. Epub 2008 Sep 24.";
          parameter Modelica.Units.SI.Time LVactdur0(displayUnit="ms")=0.571
                                                           " Duration of LV activation at HR 60";
          parameter Real LVdownpart=0.5                      " Duration of downstroke of LV activation as fraction of total duration";
            Real LVactdur=LVactdur0*(((1)/HRo)^(1/3))
              " Duration of LV activation, HR dependent";
          // Ref: Fridericia LS (1920). "The duration of systole in the electrocardiogram of normal subjects and of patients with heart disease". Acta Medica Scandinavica (53): 469â€“486.
          Real LVdown = LVactdur*LVdownpart " Duration of downstroke of LV activation";

          parameter Modelica.Units.SI.Time RVdelay0(displayUnit="ms")=0.181
                                                          " Delay btw. atria and RV at HR 60";
            Real RVdelay=RVdelay0 + PRRRrel*((1/HRo) - 1)
              " Delay btw atria and LV, HR dependent";
          Real RVtact = Atact + RVdelay " Timing of RV activation within cycle";
          parameter Modelica.Units.SI.Time RVup(displayUnit="ms")=0.207
                                                      " Duration of upstroke of RV activation";
          parameter Modelica.Units.SI.Time RVactdur0(displayUnit="ms")=0.529
                                                           " Duration of RV activation at HR 60";
            parameter Real RVdownpart=0.5
              " Duration of downstroke of RV activation as fraction of total duration";
            Real RVactdur=RVactdur0*((1/HRo)^(1/3))
              " Duration of RV activation, HR dependent, Fridericia";
            Real RVdown=RVactdur*RVdownpart " Duration of downstroke of RV activation";
          Real PI = Modelica.Constants.pi;

          // Cycle variables
           Real CycleL=1/HRo;    // Cycle length
           Integer CycleCt = integer(floor((time)/CycleL)); // Cycle count
           Real tcycle = time-CycleCt*CycleL; // Time within cycle
           Real tcycle2 = tcycle+CycleL;  // overlapping time into next cycle

          // Atria activation function
           Real Aact = if (tcycle < Atact or tcycle > Atact+Aactdur) then 0 else
               (if (tcycle <= Atact+Aup) then (1-cos((tcycle-Atact)*PI/Aup))/2 else
               (if (tcycle <= Atact+Aactdur-Adown) then 1 else
                (1+cos((tcycle-(Atact+Aactdur-Adown))/(Adown)*PI))/2));

           Real LVact_n =        if (tcycle<LVtact) then
               (if  (tcycle2 > LVtact+LVactdur or CycleCt == 0) then 0 else
                  noEvent(if (tcycle2 <= LVtact+LVup) then 1 else
                    (if (tcycle2 <= LVtact+LVactdur-LVdown) then 2 else 3)))
           else
               (if  (tcycle > LVtact+LVactdur) then 4 else
                 noEvent(if (tcycle <= LVtact+LVup) then 5 else
                   (if (tcycle <= LVtact+LVactdur-LVdown) then 6 else 7)));

                // LV activation (including septum)
            Real LVact =        if (tcycle<LVtact) then
                (if  (tcycle2 > LVtact+LVactdur or CycleCt == 0) then 0 else
                   (if (tcycle2 <= LVtact+LVup) then (sin((tcycle2-LVtact)*(PI/2)/LVup)) else
                     (if (tcycle2 <= LVtact+LVactdur-LVdown) then 1 else
                        (1+cos((tcycle2-(LVtact+LVactdur-LVdown))/(LVdown)*PI))/2)))
            else
                (if  (tcycle > LVtact+LVactdur) then 0 else
                  (if (tcycle <= LVtact+LVup) then (sin((tcycle-LVtact)*(PI/2)/LVup)) else
                    (if (tcycle <= LVtact+LVactdur-LVdown) then 1 else
                                                          (1+cos((tcycle-(LVtact+LVactdur-LVdown))/(LVdown)*PI))/2)));

          // RV activation
                  Real RVact =        if (tcycle<RVtact) then
             (if  (tcycle2 > RVtact+RVactdur or CycleCt == 0) then 0 else
               (if (tcycle2 <= RVtact+RVup) then (sin((tcycle2-RVtact)*(PI/2)/RVup)) else
                 (if (tcycle2 <= RVtact+RVactdur-RVdown) then 1 else
                                                          (1+cos((tcycle2-(RVtact+RVactdur-RVdown))/(RVdown)*PI))/2)))
                                  else
             (if  (tcycle > RVtact+RVactdur) then 0 else
               (if (tcycle <= RVtact+RVup) then (sin((tcycle-RVtact)*(PI/2)/RVup)) else
               (if (tcycle <= RVtact+RVactdur-RVdown) then 1 else
                                                          (1+cos((tcycle-(RVtact+RVactdur-RVdown))/(RVdown)*PI))/2)));

          // Pseudo-ECG
            Real pECG =  20*(-(LVact-0.5)^2+0.25) + 4*(-(Aact-0.5)^2+0.25);
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)),
              experiment(
                StopTime=100,
                __Dymola_NumberOfIntervals=5000,
                __Dymola_Algorithm="Dassl"));
          end partialDriving_Olsen_orig;

          partial model partialDriving_Olsen
            "Model enhanced timings to allow for stepping up HR and missing equation for HRo"
            parameter Boolean fixedActivation = false;
            parameter Real fixedActValue = 0;
            parameter Boolean useAlternativeDur = false "Use alternative calculation of activation duration";
            parameter Modelica.Units.SI.Duration BombBase = 361.1e-3 "Base for bombardinis slope";
          // Heart rate
            parameter Boolean HR_stepUp=false;
            parameter Real stepUpLength = 10;
            parameter Physiolibrary.Types.Frequency HRo0_ref(displayUnit="1/min")=1.0333333333333
              "Reference cycle length for scaling the timing";
            parameter Physiolibrary.Types.Frequency HRo0(displayUnit="1/min")=1.0333333333333;
            Physiolibrary.Types.Frequency HRo "Olsen's heart rate";
            Physiolibrary.Types.Fraction cycleScale=HRo0_ref/HRo;
          // Activation, global
          parameter Modelica.Units.SI.Time Atact(displayUnit="ms")=0.01
                                                      " Timing of atrial activation within cycle";
          parameter Modelica.Units.SI.Time Aup(displayUnit="ms")=0.1
                                                     " Duration of upstroke of atrial activation";
          parameter Modelica.Units.SI.Time Aactdur(displayUnit="ms")=0.3
                                                         " Duration of atrial activation";
          parameter Modelica.Units.SI.Time Adown(displayUnit="ms")=0.16
                                                       " Duration of downstroke of atrial activation";

          parameter Real PRRRrel = 0.05 " Regression of PR change vs. RR change";
           // Ref: Subject-specific heart rate dependency of electrocardiographic QT, PQ, and QRS intervals.
           // Malik M1, Hnatkova K, Sisakova M, Schmidt G.
          parameter Modelica.Units.SI.Time LVdelay0(displayUnit="ms")=0.151
                                                          " Delay btw. atria and LV at HR 60";
            Real LVdelay=LVdelay0 + PRRRrel*((1/HRo) - 1)
              " Delay btw atria and LV with HR dependence";
          Real LVtact = Atact + LVdelay " Timing of LV activation within cycle";
          parameter Modelica.Units.SI.Time LVup(displayUnit="ms")=0.243
                                                      " Duration of upstroke of LV activation - no relation with HR (J Electrocardiol. 2008 Nov-Dec;41(6):491-7. doi: 10.1016/j.jelectrocard.2008.06.022. Epub 2008 Sep 24.";
          parameter Modelica.Units.SI.Time LVactdur0(displayUnit="ms")=0.571
                                                           " Duration of LV activation at HR 60";
          parameter Real LVdownpart=0.5                      " Duration of downstroke of LV activation as fraction of total duration";
            Real LVactdur=if useAlternativeDur then (-1.079*(HRo*60) + BombBase*1000)/1000 else LVactdur0*(((1)/HRo)^(1/3))
              " Duration of LV activation, HR dependent";
          // Ref: Fridericia LS (1920). "The duration of systole in the electrocardiogram of normal subjects and of patients with heart disease". Acta Medica Scandinavica (53): 469â€“486.
          Real LVdown = LVactdur*LVdownpart " Duration of downstroke of LV activation";

          parameter Modelica.Units.SI.Time RVdelay0(displayUnit="ms")=0.181
                                                          " Delay btw. atria and RV at HR 60";
            Real RVdelay=RVdelay0 + PRRRrel*((1/HRo) - 1)
              " Delay btw atria and LV, HR dependent";
          Real RVtact = Atact + RVdelay " Timing of RV activation within cycle";
          parameter Modelica.Units.SI.Time RVup(displayUnit="ms")=0.207
                                                      " Duration of upstroke of RV activation";
          parameter Modelica.Units.SI.Time RVactdur0(displayUnit="ms")=0.529
                                                           " Duration of RV activation at HR 60";
            parameter Real RVdownpart=0.5
              " Duration of downstroke of RV activation as fraction of total duration";
            Real RVactdur=if useAlternativeDur then (-1.079*(HRo*60) + BombBase*1000)/1000 else RVactdur0*((1/HRo)^(1/3))
              " Duration of RV activation, HR dependent, Fridericia";
            Real RVdown=RVactdur*RVdownpart " Duration of downstroke of RV activation";
          Real PI = Modelica.Constants.pi;

          // Cycle variables
            Modelica.Units.SI.Time t0(start = -0.1) "Beat time";
           Real CycleL=1/HRo;    // Cycle length
           Integer CycleCt(start = 0); // Cycle count,  = integer(floor((time)/CycleL))
           Real tcycle = time-t0; // Time within cycle
           Real tcycle2 = tcycle+CycleL;  // overlapping time into next cycle

          // Atria activation function
           Real Aact = if fixedActivation then fixedActValue else if (tcycle < Atact or tcycle > Atact+Aactdur) then 0 else
               (if (tcycle <= Atact+Aup) then (1-cos((tcycle-Atact)*PI/Aup))/2 else
               (if (tcycle <= Atact+Aactdur-Adown) then 1 else
                (1+cos((tcycle-(Atact+Aactdur-Adown))/(Adown)*PI))/2));

          //  Real LVact_n =        if (tcycle<LVtact) then
          //      (if  (tcycle2 > LVtact+LVactdur or CycleCt == 0) then 0 else
          //         noEvent(if (tcycle2 <= LVtact+LVup) then 1 else
          //           (if (tcycle2 <= LVtact+LVactdur-LVdown) then 2 else 3)))
          //  else
          //      (if  (tcycle > LVtact+LVactdur) then 4 else
          //        noEvent(if (tcycle <= LVtact+LVup) then 5 else
          //          (if (tcycle <= LVtact+LVactdur-LVdown) then 6 else 7)));

                // LV activation (including septum)
            Real LVact =    if fixedActivation then fixedActValue else  if (tcycle<LVtact) then
                (if  (tcycle2 > LVtact+LVactdur or CycleCt == 0) then 0 else
                   (if (tcycle2 <= LVtact+LVup) then (sin((tcycle2-LVtact)*(PI/2)/LVup)) else
                     (if (tcycle2 <= LVtact+LVactdur-LVdown) then 1 else
                        (1+cos((tcycle2-(LVtact+LVactdur-LVdown))/(LVdown)*PI))/2)))
            else
                (if  (tcycle > LVtact+LVactdur) then 0 else
                  (if (tcycle <= LVtact+LVup) then (sin((tcycle-LVtact)*(PI/2)/LVup)) else
                    (if (tcycle <= LVtact+LVactdur-LVdown) then 1 else
                                                          (1+cos((tcycle-(LVtact+LVactdur-LVdown))/(LVdown)*PI))/2)));

          // RV activation
                  Real RVact =        if fixedActivation then fixedActValue else if (tcycle<RVtact) then
             (if  (tcycle2 > RVtact+RVactdur or CycleCt == 0) then 0 else
               (if (tcycle2 <= RVtact+RVup) then (sin((tcycle2-RVtact)*(PI/2)/RVup)) else
                 (if (tcycle2 <= RVtact+RVactdur-RVdown) then 1 else
                                                          (1+cos((tcycle2-(RVtact+RVactdur-RVdown))/(RVdown)*PI))/2)))
                                  else
             (if  (tcycle > RVtact+RVactdur) then 0 else
               (if (tcycle <= RVtact+RVup) then (sin((tcycle-RVtact)*(PI/2)/RVup)) else
               (if (tcycle <= RVtact+RVactdur-RVdown) then 1 else
                                                          (1+cos((tcycle-(RVtact+RVactdur-RVdown))/(RVdown)*PI))/2)));

          // Pseudo-ECG
            Real pECG =  20*(-(LVact-0.5)^2+0.25) + 4*(-(Aact-0.5)^2+0.25);

          equation
            when time > pre(t0) + CycleL then
              CycleCt = pre(CycleCt) + 1;
              t0 = time;
            end when;
          //   HRo = if HR_stepUp then (60 + floor(time/10)*10)/60 else HRo0;
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)),
              experiment(
                StopTime=100,
                __Dymola_NumberOfIntervals=5000,
                __Dymola_Algorithm="Dassl"));
          end partialDriving_Olsen;

          model Driving_Olsen
            extends partialDriving_Olsen;
          equation
            HRo = if HR_stepUp then (60 + floor(time/10)*10)/60 else HRo0;
            annotation (experiment(
                StartTime=20,
                StopTime=30,
                __Dymola_NumberOfIntervals=5000,
                __Dymola_Algorithm="Dassl"));
          end Driving_Olsen;

          model System_Olsen
            extends partialDriving_Olsen;
             parameter Real rho =  1060 " kg/m^3, // Density of blood";
          Real C_ao =   0.924 "mL/mmHg,  // Aortic compliance";
          Real C_vc =   40 "mL/mmHg,  // Vena cava compliance";
          Real C_pa =   0.969 "mL/mmHg,  // Pulmonary artery compliance";
          Real C_pve =   15 "mL/mmHg,  // Pulmonary veins compliance";
          //   Unstressed volumes
          Real V0_ao =   0 "mL,   // Aorta unstressed volume";
          Real V0_vc =   0 "mL,   // Vena cava unstressed volume";
          Real V0_pa =   0 "mL,   // Pulmonary artery unstressed volume";
          Real V0_pve =   0 "mL,   // Pulmonary veins unstressed volume";
          //   Inertances
          Real L_ao =   0.01 "mmHg*s^2*mL^(-1), // Aorta inertance";
          Real L_pa =   0.01 "mmHg*s^2*mL^(-1), // Pulmonary artery inertance";
          Real L_vc =  0.01 "mmHg*s^2*mL^(-1), // Vena cava inertance";
          Real L_pve =  0.01 "mmHg*s^2*mL^(-1), // Pulmonary veins inertance";

          //   Resistances
          Real R_vc =   0.001 "mmHg*s*mL^(-1), // Vena cava resistance";
          Real R_pve =   0.001 "mmHg*s*mL^(-1), // Pulmonary veins resistance";
          // Vascular resistances
          Real SVR =  1.254 "mmHg*s*mL^(-1),  // Systemic vascular resistance";
          Real PVR =  0.607 "mmHg*s*mL^(-1),  // Pulmonary vascular resistance";

          // Valves

          //   Valve areas
          Real AVAopen =  3.5 "cm^2,  // Aortic valve area (when open)";
          Real AVAclosed =  0.001 "cm^2,  // (when closed)";
          Real MVAopen =   4 "cm^2,   // Mitral valve area (when open)";
          Real MVAclosed =  0.001 "cm^2,  // (when closed)";
          Real PVAopen =  3.5 "cm^2,  // Pulmonary valve area (when open)";
          Real PVAclosed =  0.001 "cm^2,  // (when closed)";
          Real TVAopen =  4 "cm^2,   // Tricuspid valve area (when open)";
          Real TVAclosed =  0.001 "cm^2,  // (when closed)";

          // Chambers
          //   Inertances
          Real L_lvot =   0.001 "mmHg*s^2*mL^(-1),  // LVOT inertance";
          Real L_rvot =   0.001 "mmHg*s^2*mL^(-1),  // RVOT inertance";
          Real L_la =   0.0001 "mmHg*s^2*mL^(-1), // Left atrium inertance";
          Real L_ra =   0.0001 "mmHg*s^2*mL^(-1), // Right atrium inertance";

          Real L_sept =   0.00025 "mmHg*s^2*mL^(-1), // Septal displacement inertance";

          Real Lm_ym =    200 "g/m,   // Junction circle inertial component";
          Real damp_ym =   0.6 "N*s*m^(-1)*cm^(-1),   // Damping component";

          // LV - active myofiber properties (intercepts of assumed linear force-velocity relationship)
          Real LV_smax =   107 "kPa, // Maximal active myofiber stress (at zero velocity)";
          Real LV_dedtmax =  -3 "1/s, // Maximal myofiber strain rate (at zero afterload)";

          // LV - passive myofiber properties
          //   For extension above slack length and compression below slack length (assuming symmetric passive properties)
          Real LV_k =   4 "kPa,  // Parameters determining shape of compliance curve";
          Real LV_a =   11 "dimensionless,";
          //   Viscosity
          Real LV_visc =   1.5 "kPa*s, // Viscosity (stress per strain rate)";
          // Ref. Chung et al, J Mol Cell Cardiol. 2011 Sep; 51(3): 428–434.
          // They find titin-based viscosity approx 5.8 kPa at stretch rate of 1 s-1 (fig. 2)
          // in mice. A lower value gives more realistic results in this model.

          // RV - active myofiber properties
          Real RV_smax =   127 "kPa, // Maximal active myofiber stress";
          Real RV_dedtmax =  -3 "1/s, // Maximal myofiber strain rate";

          // RV - passive myofiber properties
          //   For extension above slack length and compression below slack length (assuming symmetric passive properties)
          Real RV_k =   4 "kPa, ";
          Real RV_a =   11 "dimensionless,";
          //   Viscosity
          Real RV_visc =   1.5 "kPa*s, // viscosity (stress per strain rate)";

          //  Force-length relation
          Real e0 =   -0.3 "dimensionless,  // natural fiber strain associated with zero force";
                  // force increases above this number (see formula in code)
          // LV chamber
          Real LV_Vwall =  93.7 "cm^3, // Volume of LV wall (including septum)";
          Real LV_V0 =   70.5 "cm^3,  // Unstressed volume of LV cavity";

          Real LV_Vm0 =   LV_V0 + (LV_Vwall/2) ",  // Unstressed mid-wall volume of entire LV";
          Real r0_LV =   (LV_Vm0*3/4/PI)^(1/3) ", // Unstressed mid-wall radius of spherical LV";

          // RV chamber
          Real RV_Vwall =  67.7 "cm^3, // Volume of RV wall (ref Katz et al., J Am Coll Cardiol. 1993 May;21(6):1475-81)";
          Real RV_V0 =   106.6 "cm^3,  // Unstressed volume of RV cavity ";

          // Septum
          Real Sept_ratio =  0.333 "dimensionless,  // Ratio of septal wall volume to LV wall volume";
          Real Sept_Vwall =  LV_Vwall * Sept_ratio "// Volume of septal wall";
          Real LW_Vwall =  LV_Vwall - Sept_Vwall "// Volume of left ventricle free wall";
                  // (by definition, RV wall = RV free wall)

          // Spherical caps
              // For reference, unstressed values, a spherical shape of LV + septum is assumed
           Real Sept_h0 =   2*Sept_ratio*r0_LV "  // Reference midwall height of spherical cap when ration btw cap area and spherical area is Sept_ratio";
           Real  Sept_ym0 =  (2*Sept_h0*(r0_LV-0.5*Sept_h0))^(1/2) " // Reference septum midwall junction radius";
           Real  Sept_Vm0 =  (PI*Sept_h0^2)/3*(3*r0_LV-Sept_h0) "  // Reference septum midwall cap volume";
           Real  Sept_Am0 =  2*PI*r0_LV*Sept_h0 "    // Reference septum midwall cap area";
           Real  Sept_xm0;
           Real  Sept_Cm0;

           Real  LW_Vm0 =   -LV_V0 - 0.5*LW_Vwall - 0.5*Sept_Vwall + Sept_Vm0
                                                                             " // Reference LV free wall midwall cap volume";
           Real  LW_Am0 =   2*PI*r0_LV*(2*r0_LV-Sept_h0)
                                                        "     // Reference LV free wall midwall cap area";
           Real  LW_xm0;
           Real  LW_Cm0;

           Real  RW_Vm0 =   RV_V0 + 0.5*RV_Vwall + 0.5*Sept_Vwall + Sept_Vm0 "  // Reference RV free wall midwall cap volume";
           Real  RW_h0 "  // Reference RV free wall midwall cap height";
           Real  r0_RW ",   // Reference RV free wall midwall cap radius";

           Real  RW_Am0
                       ",   // Reference RV free wall midwall cap area";
           Real  RW_xm0;
           Real  RW_Cm0;

          // Parameters, continued
          // LA
          Real V0_la =  20 "mL, // LA equilibrium volume";
          Real C_la =  8 "mL/mmHg, // LA compliance";
          Real P_maxla =  6 "mmHg, // Force of atrial contraction";

          // RA
          Real V0_ra =  20 "mL, // RA equilibrium volume";
          Real C_ra =  8 "mL/mmHg, // RA compliance";
          Real P_maxra =  4 "mmHg, // Force of RA contraction";

          // Pericardium
          Real V0_peri =  611 "mL,  // Pericardium equilibrium volume";
          Real k_peri =  1 "mmHg,  // Compliance curve constant";
          Real a_peri =  0.017 "mL^(-1), // Compliance curve constant";
          Real V_perifl = 10 "mL,  // Pericardial fluid volume";

          // Initial conditions
          //
          Real V_lvinit =                LV_V0 ",                        // LV initial volume";
          Real V_rvinit =                RV_V0 ",                        // RV initial volume";
          Real V_aoinit =                100 "mL ,                        // Aorta initial volume";
          Real V_vcinit =                315 "mL ,                        // Vena cava initial volume";
          Real V_painit =                70 "mL ,                        // PA initial volume";
          Real V_pveinit =                210 "mL ,                        // PVe initial volume";
          Real V_rainit =                70 "mL ,                        // RA initial volume";
          Real V_lainit =                110 "mL,                        // LA initial volume";

          // -----------------------------------------------------------------------------
          //   VARIABLES
          // -----------------------------------------------------------------------------
          //  Pressures
          Real P_lvw " mmHg,   // LV pressure at wall";

          Real P_rvw " mmHg,   // RV pressure at wall";

          Real P_la "  mmHg,   // LA pressure";
          Real P_ra "  mmHg,   // RA pressure";

          Real P_ao "  mmHg,   // Aortic pressure";
          Real P_vc "  mmHg,   // Vena cava pressure";
          Real P_pa "  mmHg,   // Pulmonary arterial pressure";
          Real P_pve " mmHg,   // Pulmonary veins pressure";

          Real P_peri " mmHg,   // Pericardial pressure";

          //  Volumes
          Real V_lv "  mL,   // LV volume";
          Real V_rv "  mL,   // RV volume";
          Real V_la "  mL,   // LA volume";
          Real V_ra "  mL,   // RA volume";
          Real V_ao "  mL,   // Aortic volume";
          Real V_vc "  mL,   // Vena cava volume";
          Real V_pa "  mL,   // Pulmonary artery volume";
          Real V_pve " mL,   // Pulmonary veins volume";

          Real V_peri " mL,   // Total pericardial volume";

          //  Flows
          Real Q_vc "  mL/s,   // Flow from vena cava to RA";
          Real Q_tv "  mL/s,   // Flow through tricuspid valve";
          Real Q_pva " mL/s,   // Flow through pulmonary valve";
          Real Q_pa "  mL/s,   // Flow from PA to pulmonary veins";
          Real Q_pve " mL/s,   // Flow from pulmonary veins to LA";
          Real Q_mv "  mL/s,   // Flow through mitral valve";
          Real Q_av "  mL/s,   // Flow through aortic valve";
          Real Q_ao "  mL/s,   // Flow from aorta to vena cava";

          // Valve areas
          Real AVA "  cm^2,   // Time-dependent aortic valve area";
          Real MVA "  cm^2,   // Time-dependent mitral valve area";
          Real PVA "  cm^2,   // Time-dependent pulmonary valve area";
          Real TVA "  cm^2,   // Time-dependent tricuspid valve area";

          //  Spherical cap variables
          Real Sept_ym "  cm,   // Septum midwall junction radius";

          Real Sept_xm "  cm,   // Septum midwall axial distance from origin";
          Real Sept_Vm "  cm^3,   // Septum midwall cap volume";
          Real Sept_Am "  cm^2,   // Septum midwall cap area";
          Real Sept_Cm "  cm^-1,    // Septum midwall cap curvature (1/r)";
          Real Sept_Tm "  N/m,   // Septum midwall tension";
          Real Sept_Tx "  N/m,   // Septum x-component tension at junction (axial)";
          Real Sept_Ty "  N/m,   // Septum y-component tension at junction (radial)";

          Real P_Septtrans "  kPa,   // Septum transmural pressure (signed)";

          Real Sept_e "  dimensionless,  // Myofiber natural strain";
          Real Sept_dedt "  s^(-1),   // Myofiber strain rate";
          Real Sept_s_act "  kPa,   // Myofiber active stress";
          Real Sept_s_ela "  kPa,   // Myofiber passive stress from elasticity";
          Real Sept_s_vis "  kPa,   // Myofiber passive stress from viscous resistance to motion";
          Real Sept_s "  kPa,   // Total myofiber stress";
          Real Sept_z "  dimensionless,  // Dimensionless curvature parameter";

          Real LW_xm "  cm,   // LV free wall midwall axial distance from origin";
          Real LW_Vm "  cm^3,   // LV free wall midwall cap volume";
          Real LW_Am "  cm^2,   // LV free wall midwall cap area";
          Real LW_Cm "  cm^-1,    // LV free wall midwall cap curvature (1/r)";
          Real LW_Tm "  N/m,   // LV midwall tension";
          Real LW_Tx "  N/m,   // LV x-component tension at junction (axial)";
          Real LW_Ty "  N/m,   // LV y-component tension at junction (radial)";

          Real P_LWtrans "  kPa,   // LV free wall transmural pressure (signed)";

          Real LW_e "   dimensionless,  // Myofiber natural strain";
          Real LW_dedt "  s^(-1),   // Myofiber strain rate";
          Real LW_s_act "  kPa,   // Myofiber active stress";
          Real LW_s_ela "  kPa,   // Myofiber passive stress from elasticity";
          Real LW_s_vis "  kPa,   // Myofiber passive stress from viscous resistance to motion";
          Real LW_s "   kPa,   // Total myofiber stress";
          Real LW_z "   dimensionless,  // Dimensionless curvature parameter";

          Real RW_xm "  cm,   // RV free wall midwall axial distance from origin";
          Real RW_Vm "  cm^3,   // RV free wall midwall cap volume";
          Real RW_Am "  cm^2,   // RV free wall midwall cap area";
          Real RW_Cm "  cm^-1,    // RV free wall midwall cap curvature (1/r)";
          Real RW_Tm "  N/m,   // RV midwall tension";
          Real RW_Tx "  N/m,   // RV x-component tension at junction (axial)";
          Real RW_Ty "  N/m,   // RV y-component tension at junction (radial)";

          Real P_RWtrans "  kPa,   // RV free wall transmural pressure (signed)";

          Real RW_e "   dimensionless,  // Myofiber natural strain";
          Real RW_dedt "  s^(-1),   // Myofiber strain rate";
          Real RW_s_act "  kPa,   // Myofiber active stress";
          Real RW_s_ela "  kPa,   // Myofiber passive stress from elasticity";
          Real RW_s_vis "  kPa,   // Myofiber passive stress from viscous resistance to motion";
          Real RW_s "   kPa,   // Total myofiber stress";
          Real RW_z "   dimensionless,  // Dimensionless curvature parameter";

          Real Tx_total "  N/m,   // Sum tension at junction circle in x-direction (axial)";
          Real Ty_total "  N/m,   // Sum tension at junction circle in y-direction (radial)";

          Real Q_sept "  mL/s,   // Flow into septal displacement volume";

          Real d_Sept_ym "  cm/s;   // Change in junction radius diameter";

          initial equation
          // -----------------------------------------------------------------------------
          //   INITIAL CONDITIONS
          // -----------------------------------------------------------------------------

          //        Initial Conditions
          //
          //           when(t=t.min) {
          V_ao  = V_aoinit;
          V_vc  = V_vcinit;
          V_pa  = V_painit;
          V_pve  = V_pveinit;
          V_lv  = V_lvinit;
          V_rv  = V_rvinit;
          V_la  = V_lainit;
          V_ra  = V_rainit;

          Q_tv  = 0;
          Q_pva  = 0;
          Q_pa  = 0;
          Q_vc  = 0;
          Q_pve  = 0;
          Q_mv  = 0;
          Q_av  = 0;
          Q_ao  = 0;

          Q_sept   = 0;

          d_Sept_ym  = 0;

          Sept_Vm  = Sept_Vm0;

          Sept_ym  = Sept_ym0;

          // State variables
          //         AVclosed        = 1;
          //         MVclosed        = 0;
          //         PVclosed        = 1;
          //         TVclosed        = 0;
          //
          //           }

          equation
            // Implicit equations, spherical caps
           r0_RW   = (Sept_ym0^2+RW_h0^2)/(2*RW_h0);
           RW_Vm0   = (PI*RW_h0^2)/3*(3*r0_RW-RW_h0);
           RW_Am0   = 2*PI*r0_RW*RW_h0;

           LW_Vm0 = PI/6*LW_xm0*(LW_xm0^2+3*Sept_ym0^2); // Yields LW_xm0
           LW_Cm0 = 2*LW_xm0/(LW_xm0^2+Sept_ym0^2);

           Sept_Vm0 = PI/6*Sept_xm0*(Sept_xm0^2+3*Sept_ym0^2);
           Sept_Cm0 = 2*Sept_xm0/(Sept_xm0^2+Sept_ym0^2);

           RW_Vm0 = PI/6*RW_xm0*(RW_xm0^2+3*Sept_ym0^2);
           RW_Cm0 = 2*RW_xm0/(RW_xm0^2+Sept_ym0^2);

          // -----------------------------------------------------------------------------
          //   SYSTEM OF EQUATIONS
          // -----------------------------------------------------------------------------

          // Ordinary differential equations

           // Valve flows
            // Tricuspid valve
          der(Q_tv)  = (P_ra-P_rvw-((Q_tv*abs(Q_tv)/(TVA^2))*rho/2))/L_ra;
            // Pulmonary valve
          der(Q_pva)  = (P_rvw-P_pa-((Q_pva*abs(Q_pva)/(PVA^2))*rho/2))/L_rvot;
            // Mitral valve
          der(Q_mv)  = (P_la-P_lvw-((Q_mv*abs(Q_mv)/(MVA^2))*rho/2))/L_la;
            // Aortic valve
          der(Q_av)  = (P_lvw-P_ao-((Q_av*abs(Q_av)/(AVA^2))*rho/2))/L_lvot;

           // Vessel flows
            // Vena cava
          der(Q_vc)  =  (P_vc-P_ra-Q_vc*R_vc)/L_vc;
            // Pulmonary artery
          der(Q_pa)  = (P_pa-P_pve-Q_pa*PVR)/L_pa;
            // Pulmonary veins
          der(Q_pve)  = (P_pve-P_la-Q_pve*R_pve)/L_pve;
            // Aorta
          der(Q_ao)  =  (P_ao-P_vc-Q_ao*SVR)/L_ao;

           // Conservation of mass equations

          der(V_vc)  = Q_ao - Q_vc;
          der(V_ra)  = Q_vc - Q_tv;
          der(V_rv)  = Q_tv - Q_pva;
          der(V_pa)  = Q_pva - Q_pa;
          der(V_pve)  = Q_pa - Q_pve;
          der(V_la)  = Q_pve - Q_mv;
          der(V_lv)  =  Q_mv - Q_av;
          der(V_ao)  = Q_av - Q_ao;

          // Change in valve area with state
           AVA  = if (Q_av < 0) then AVAclosed else AVAopen;
           MVA  = if (Q_mv < 0) then MVAclosed else MVAopen;
           PVA  = if (Q_pva < 0) then PVAclosed else PVAopen;
           TVA  = if (Q_tv < 0) then TVAclosed else TVAopen;

          // Spherical caps geometries
           // Displacement flow - interventricular septum
           der(Q_sept) =   -(P_LWtrans+P_Septtrans+P_RWtrans)/L_sept; // Flow acceleration into septal spherical cap

           der(Sept_Vm) =  Q_sept;      // Change in septal midwall volume (positive when curved towards RV)

           LW_Vm  =  - V_lv - 0.5*LW_Vwall - 0.5*Sept_Vwall + Sept_Vm;  // LV free wall spherical cap volume - adjusted according to septal displacement
           RW_Vm   =  V_rv + 0.5*RV_Vwall + 0.5*Sept_Vwall + Sept_Vm;  // RV free wall spherical cap volume - same

          // Geometry changes of septal junction circle

           der(d_Sept_ym) = -(Ty_total+d_Sept_ym*damp_ym)/Lm_ym; // Acceleration in junction radius caused by summed tension forces + damping
           der(Sept_ym) = d_Sept_ym;    // Change in junction radius

          // Solve for xm - cap midwall height (positive in direction of RV)
           LW_Vm   = PI/6*LW_xm*(LW_xm^2+3*Sept_ym^2);      // Given Vm and ym, xm can be found
           RW_Vm   = PI/6*RW_xm*(RW_xm^2+3*Sept_ym^2);
           Sept_Vm   = PI/6*Sept_xm*(Sept_xm^2+3*Sept_ym^2);

          // Calculate Am - cap midwall area
           LW_Am  = PI*(LW_xm^2+Sept_ym^2);
           RW_Am  = PI*(RW_xm^2+Sept_ym^2);
           Sept_Am  = PI*(Sept_xm^2+Sept_ym^2);

          // Calculate Cm - cap midwall curvature (1/r)
           LW_Cm   = 2*LW_xm/(LW_xm^2+Sept_ym^2);
           RW_Cm    = 2*RW_xm/(RW_xm^2+Sept_ym^2);
           Sept_Cm   = 2*Sept_xm/(Sept_xm^2+Sept_ym^2);

          // Tx balance
           Tx_total = LW_Tx + Sept_Tx + RW_Tx;
          // Ty balance
           Ty_total = LW_Ty + Sept_Ty + RW_Ty;

          // Fiber strain
             // Relation btw fiber strain and cavity + wall volume
             // From Lumens et al., 2009, Annals of Biomedical Engineering.
           LW_z  = (3*LW_Cm*LW_Vwall)/(2*LW_Am);    // Curvature ratio
           LW_e  = 0.5*log(LW_Am/LW_Am0)-(1/12)*LW_z^2-0.019*LW_z^4;   // Natural strain. Approximation to solution for curved wall segment (Lumens 2009)
           LW_dedt  = der(LW_e);      // Strain rate

           RW_z  = (3*RW_Cm*RV_Vwall)/(2*RW_Am);    // Curvature ratio
           RW_e  = 0.5*log(RW_Am/RW_Am0)-(1/12)*RW_z^2-0.019*RW_z^4;   // Natural strain. Approximation to solution for curved wall segment (Lumens 2009)
           RW_dedt  = der(RW_e);      // Strain rate

           Sept_z  = (3*Sept_Cm*Sept_Vwall)/(2*Sept_Am);    // Curvature ratio
           Sept_e  = 0.5*log(Sept_Am/Sept_Am0)-(1/12)*Sept_z^2-0.019*Sept_z^4;   // Natural strain. Approximation to solution for curved wall segment (Lumens 2009)
           Sept_dedt = der(Sept_e);      // Strain rate

          // Fiber stress, active component (applying force-velocity and force-length relation)
                // A linear relation btw ratio of developed force vs. max force
                // and ratio of strain rate vs. max strain rate is assumed.
                // This seems reasonable for the relationship at physiological loads
                // (force 15-100% of peak force). A hyperbolic relationship
                // breaks down above 70% of peak force.
                // Note that max strain rate for this assumption is different from
                // and lower than Vmax estimated when using the hyperbolic Hill equation.
                // ref. Circ Res. 1991 Feb;68(2):588-96. Sarcomere dynamics in cat cardiac trabeculae. de Tombe PP1, ter Keurs HE.
           LW_s_act = LVact * (if (LW_dedt > 0) then (LV_smax*tanh((LW_e-e0)*3)) else (if (LW_dedt < LV_dedtmax) then  0
                                  else
              (LV_smax-LV_smax*(LW_dedt/LV_dedtmax))*tanh((LW_e-e0)*3)));

           Sept_s_act = LVact *
              (if (Sept_dedt >= 0) then (LV_smax*tanh((Sept_e-e0)*3)) else (if (Sept_dedt < LV_dedtmax) then 0 else
              (LV_smax-LV_smax*(Sept_dedt/LV_dedtmax))*tanh((Sept_e-e0)*3)));

           RW_s_act = RVact *
              (if (RW_dedt >= 0) then (RV_smax*tanh((RW_e-e0)*3)) else (if (RW_dedt < RV_dedtmax) then 0 else
              (RV_smax-RV_smax*(RW_dedt/RV_dedtmax))*tanh((RW_e-e0)*3)));

          // Fiber stress, passive components
           // Elastic stress modeled to be symmetric on both sides of slack length
           // Viscous force modeled to be proportional to strain rate

           LW_s_ela = if (LW_e >= 0) then (LV_k*(exp(LV_a*LW_e)-1))
              else -(LV_k*(exp(LV_a*(-LW_e))-1));

           LW_s_vis = LW_dedt * LV_visc;

           Sept_s_ela = if (Sept_e >= 0) then (LV_k*(exp(LV_a*Sept_e)-1))
              else -(LV_k*(exp(LV_a*(-Sept_e))-1));

           Sept_s_vis = Sept_dedt * LV_visc;

           RW_s_ela = if (RW_e >= 0) then (RV_k*(exp(RV_a*RW_e)-1))
              else -(RV_k*(exp(RV_a*(-RW_e))-1));

           RW_s_vis = RW_dedt * RV_visc;

          // Fiber stress, total (sum of active and passive components)

           LW_s  = LW_s_act + LW_s_ela + LW_s_vis;
           Sept_s  = Sept_s_act + Sept_s_ela + Sept_s_vis;
           RW_s  = RW_s_act + RW_s_ela + RW_s_vis;

          // Wall tension (Approximation, Lumens 2009)
           LW_Tm  = (LW_Vwall*LW_s)/(2*LW_Am)*(1+LW_z^2/3+LW_z^4/5);
           LW_Tx  = LW_Tm * (2*LW_xm*Sept_ym)/(LW_xm^2+Sept_ym^2);
           LW_Ty  = LW_Tm * (-(LW_xm^2)+Sept_ym^2)/(LW_xm^2+Sept_ym^2);

           Sept_Tm  = (Sept_Vwall*Sept_s)/(2*Sept_Am)*(1+Sept_z^2/3+Sept_z^4/5);
           Sept_Tx  = Sept_Tm * (2*Sept_xm*Sept_ym)/(Sept_xm^2+Sept_ym^2);
           Sept_Ty  = Sept_Tm * (-(Sept_xm^2)+Sept_ym^2)/(Sept_xm^2+Sept_ym^2);

           RW_Tm  = (RV_Vwall*RW_s)/(2*RW_Am)*(1+RW_z^2/3+RW_z^4/5);
           RW_Tx  = RW_Tm * (2*RW_xm*Sept_ym)/(RW_xm^2+Sept_ym^2);
           RW_Ty  = RW_Tm * (-(RW_xm^2)+Sept_ym^2)/(RW_xm^2+Sept_ym^2);

          // Axial transmural pressure (in x-direction)
           P_LWtrans = 2*LW_Tx/Sept_ym;
           P_Septtrans = 2*Sept_Tx/Sept_ym;
           P_RWtrans = 2*RW_Tx/Sept_ym;

          // LV pressure
           P_lvw  = -P_LWtrans + P_peri;

          // RV pressure

           P_rvw  = P_RWtrans + P_peri;

          // Atrial pressures
             // Passive component + active component
             // Linear compliance curve
           P_la  = (V_la-V0_la)/C_la + Aact*P_maxla + P_peri;
           P_ra  = (V_ra-V0_ra)/C_ra + Aact*P_maxra + P_peri;

          // Vessels pressures

           P_ao  = (V_ao-V0_ao)/C_ao;
           P_vc  = (V_vc-V0_vc)/C_vc;
           P_pa  = (V_pa-V0_pa)/C_pa;
           P_pve  = (V_pve-V0_pve)/C_pve;

          // Pericardial volume and pressure
           V_peri  = V_lv+V_rv+V_ra+V_la+LV_Vwall+RV_Vwall+V_perifl;
           P_peri  = k_peri*(exp((V_peri-V0_peri)*a_peri)-1);

            annotation (experiment(
                StopTime=10,
                Interval=0.01,
                Tolerance=1e-06,
                __Dymola_Algorithm="Dassl"));
          end System_Olsen;

          model System_OlsenSIUnits
            extends partialDriving_Olsen(t0(start=0));
            parameter Real rho=1060 " kg/m^3, // Density of blood";
            parameter Physiolibrary.Types.HydraulicCompliance C_ao(displayUnit="ml/mmHg")=
               8.1231668664085e-09   "mL/mmHg,  // Aortic compliance";
            parameter Physiolibrary.Types.HydraulicCompliance C_vc(displayUnit="ml/mmHg")=
               3.0002463033826e-07   "mL/mmHg,  // Vena cava compliance";
            parameter Physiolibrary.Types.HydraulicCompliance C_pa(displayUnit="ml/mmHg")=
               2.7752278306289e-08   "mL/mmHg,  // Pulmonary artery compliance";
            parameter Physiolibrary.Types.HydraulicCompliance C_pve(displayUnit="ml/mmHg")=
               1.1250923637685e-07   "mL/mmHg,  // Pulmonary veins compliance";
            //   Unstressed volumes
            parameter Physiolibrary.Types.Volume V0_ao=0
              "mL,   // Aorta unstressed volume";
            parameter Physiolibrary.Types.Volume V0_vc=0
              "mL,   // Vena cava unstressed volume";
            parameter Physiolibrary.Types.Volume V0_pa=0
              "mL,   // Pulmonary artery unstressed volume";
            parameter Physiolibrary.Types.Volume V0_pve=0
              "mL,   // Pulmonary veins unstressed volume";
            //   Inertances
            parameter Physiolibrary.Types.HydraulicInertance L_ao(displayUnit="mmHg.s2/ml")=
               1333223.87415   "mmHg*s^2*mL^(-1), // Aorta inertance";
            parameter Physiolibrary.Types.HydraulicInertance L_pa(displayUnit="mmHg.s2/ml")=
               1333223.87415   "mmHg*s^2*mL^(-1), // Pulmonary artery inertance";
            parameter Physiolibrary.Types.HydraulicInertance L_vc(displayUnit="mmHg.s2/ml")=
               1333223.87415   "mmHg*s^2*mL^(-1), // Vena cava inertance";
            parameter Physiolibrary.Types.HydraulicInertance L_pve(displayUnit="mmHg.s2/ml")=
               1333223.87415   "mmHg*s^2*mL^(-1), // Pulmonary veins inertance";

            //   Resistances
            parameter Physiolibrary.Types.HydraulicResistance R_vc(displayUnit="(mmHg.s)/ml")=
               133322.387415   "mmHg*s*mL^(-1), // Vena cava resistance";
            parameter Physiolibrary.Types.HydraulicResistance R_pve(displayUnit="(mmHg.s)/ml")=
               133322.387415   "mmHg*s*mL^(-1), // Pulmonary veins resistance";
            // Vascular resistances
            parameter Physiolibrary.Types.HydraulicResistance SVR(displayUnit="(mmHg.s)/ml")=
               160920121.60991   "mmHg*s*mL^(-1),  // Systemic vascular resistance";
            parameter Physiolibrary.Types.HydraulicResistance PVR(displayUnit="(mmHg.s)/ml")=
               10012511.294867   "mmHg*s*mL^(-1),  // Pulmonary vascular resistance";

            // Valves

            //   Valve areas
            parameter Physiolibrary.Types.Area AVAopen=0.00035
              "cm^2,  // Aortic valve area (when open)";
            parameter Physiolibrary.Types.Area AVAclosed(displayUnit="cm2")=1e-07
              "cm^2,  // (when closed)";
            parameter Physiolibrary.Types.Area MVAopen(displayUnit="cm2")=0.0004
              "cm^2,   // Mitral valve area (when open)";
            parameter Physiolibrary.Types.Area MVAclosed=1e-07 "cm^2,  // (when closed)";
            parameter Physiolibrary.Types.Area PVAopen=0.00035
              "cm^2,  // Pulmonary valve area (when open)";
            parameter Physiolibrary.Types.Area PVAclosed=1e-07 "cm^2,  // (when closed)";
            parameter Physiolibrary.Types.Area TVAopen=0.0004
              "cm^2,   // Tricuspid valve area (when open)";
            parameter Physiolibrary.Types.Area TVAclosed=1e-07 "cm^2,  // (when closed)";

            // Chambers
            //   Inertances
            parameter Physiolibrary.Types.HydraulicInertance L_lvot(displayUnit="mmHg.s2/ml")=
               133322.387415   "mmHg*s^2*mL^(-1),  // LVOT inertance";
            parameter Physiolibrary.Types.HydraulicInertance L_rvot(displayUnit="mmHg.s2/ml")=
               133322.387415   "mmHg*s^2*mL^(-1),  // RVOT inertance";
            parameter Physiolibrary.Types.HydraulicInertance L_la(displayUnit="mmHg.s2/ml")=
               13332.2387415   "mmHg*s^2*mL^(-1), // Left atrium inertance";
            parameter Physiolibrary.Types.HydraulicInertance L_ra(displayUnit="mmHg.s2/ml")=
               13332.2387415   "mmHg*s^2*mL^(-1), // Right atrium inertance";

            parameter Physiolibrary.Types.HydraulicInertance L_sept(displayUnit="mmHg.s2/ml")=
               33330.59685375   "mmHg*s^2*mL^(-1), // Septal displacement inertance";

            parameter Real Lm_ym=0.2 "g/m,   // Junction circle inertial component";
            parameter Real damp_ym=60  "N*s*m^(-1)*cm^(-1),   // Damping component";

            // LV - active myofiber properties (intercepts of assumed linear force-velocity relationship)
            parameter Modelica.Units.SI.Stress LV_smax(displayUnit="kPa")=134000
              "kPa, // Maximal active myofiber stress (at zero velocity)";

            parameter Real LV_dedtmax=-3
              "1/s, // Maximal myofiber strain rate (at zero afterload)";

            // LV - passive myofiber properties
            //   For extension above slack length and compression below slack length (assuming symmetric passive properties)
            parameter Physiolibrary.Types.Pressure LV_k(displayUnit="kPa")=4000
              "kPa,  // Parameters determining shape of compliance curve";
            parameter Real LV_a=11 "dimensionless,";
            //   Viscosity
            parameter Real LV_visc=1.5e3 "kPa*s, // Viscosity (stress per strain rate)";
            // Ref. Chung et al, J Mol Cell Cardiol. 2011 Sep; 51(3): 428–434.
            // They find titin-based viscosity approx 5.8 kPa at stretch rate of 1 s-1 (fig. 2)
            // in mice. A lower value gives more realistic results in this model.

            // RV - active myofiber properties
            parameter Physiolibrary.Types.Pressure RV_smax(displayUnit="kPa")=70000
              "kPa, // Maximal active myofiber stress at nominal";
            parameter Real RV_dedtmax=-3 "1/s, // Maximal myofiber strain rate";

            // RV - passive myofiber properties
            //   For extension above slack length and compression below slack length (assuming symmetric passive properties)
            parameter Physiolibrary.Types.Pressure RV_k(displayUnit="kPa")=4000   "kPa, ";
            parameter Real RV_a=11 "dimensionless,";
            //   Viscosity
            parameter Real RV_visc=1.5e3 "kPa*s, // viscosity (stress per strain rate)";

            //  Force-length relation
            parameter Real e0=-0.3
              "dimensionless,  // natural fiber strain associated with zero force";
            // force increases above this number (see formula in code)
            // LV chamber
            parameter Physiolibrary.Types.Volume LV_Vwall=0.0001015
              "cm^3, // Volume of LV wall (including septum)";
            parameter Physiolibrary.Types.Volume LV_V0=9.21e-05
              "cm^3,  // Unstressed volume of LV cavity";

            parameter Physiolibrary.Types.Volume LV_Vm0=LV_V0 + (LV_Vwall/2)
              ",  // Unstressed mid-wall volume of entire LV";
            Physiolibrary.Types.Volume r0_LV=(LV_Vm0*3/4/PI)^(1/3)
              ", // Unstressed mid-wall radius of spherical LV";

            // RV chamber
            parameter Physiolibrary.Types.Volume RV_Vwall=4.6e-05
              "cm^3, // Volume of RV wall (ref Katz et al., J Am Coll Cardiol. 1993 May;21(6):1475-81)";
            parameter Physiolibrary.Types.Volume RV_V0=0.000116
              "cm^3,  // Unstressed volume of RV cavity ";

            // Septum
            parameter Real Sept_ratio=0.333
              "dimensionless,  // Ratio of septal wall volume to LV wall volume";
            parameter Physiolibrary.Types.Volume Sept_Vwall=LV_Vwall*Sept_ratio
              "// Volume of septal wall";
            parameter Physiolibrary.Types.Volume LW_Vwall=LV_Vwall - Sept_Vwall
              "// Volume of left ventricle free wall";
            // (by definition, RV wall = RV free wall)

            // Spherical caps
            // For reference, unstressed values, a spherical shape of LV + septum is assumed
            Modelica.Units.SI.Height Sept_h0=2*Sept_ratio*r0_LV
              "  // Reference midwall height of spherical cap when ration btw cap area and spherical area is Sept_ratio";
            Real Sept_ym0=(2*Sept_h0*(r0_LV - 0.5*Sept_h0))^(1/2)
              " // Reference septum midwall junction radius";
            Physiolibrary.Types.Volume Sept_Vm0=(PI*Sept_h0^2)/3*(3*r0_LV - Sept_h0)
              "  // Reference septum midwall cap volume";
            Real Sept_Am0=2*PI*r0_LV*Sept_h0 "    // Reference septum midwall cap area";
            Real Sept_xm0;
            Real Sept_Cm0;

            Physiolibrary.Types.Volume LW_Vm0=-LV_V0 - 0.5*LW_Vwall - 0.5*Sept_Vwall +
                Sept_Vm0 " // Reference LV free wall midwall cap volume";
            Real LW_Am0=2*PI*r0_LV*(2*r0_LV - Sept_h0)
              "     // Reference LV free wall midwall cap area";
            Real LW_xm0;
            Real LW_Cm0;

            Physiolibrary.Types.Volume RW_Vm0=RV_V0 + 0.5*RV_Vwall + 0.5*Sept_Vwall +
                Sept_Vm0 "  // Reference RV free wall midwall cap volume";
            Real RW_h0 "  // Reference RV free wall midwall cap height";
            Real r0_RW ",   // Reference RV free wall midwall cap radius";

            Real RW_Am0 ",   // Reference RV free wall midwall cap area";
            Real RW_xm0;
            Real RW_Cm0;

            // Parameters, continued
            // LA
            parameter Physiolibrary.Types.Volume V0_la=2e-05
              "mL, // LA equilibrium volume";
            parameter Physiolibrary.Types.HydraulicCompliance C_la(displayUnit="ml/mmHg")=
               6.0004926067653e-08   "mL/mmHg, // LA compliance";
            parameter Physiolibrary.Types.Pressure P_maxla(displayUnit="mmHg")=799.93432449
              "mmHg, // Force of atrial contraction";

            // RA
            parameter Physiolibrary.Types.Volume V0_ra=2e-05
              "mL, // RA equilibrium volume";
            parameter Physiolibrary.Types.HydraulicCompliance C_ra(displayUnit="ml/mmHg")=
               6.0004926067653e-08   "mL/mmHg, // RA compliance";
            parameter Physiolibrary.Types.Pressure P_maxra(displayUnit="mmHg")=533.28954966
              "mmHg, // Force of RA contraction";

            // Pericardium
            parameter Physiolibrary.Types.Volume V0_peri=0.000599
              "mL,  // Pericardium equilibrium volume";
            parameter Physiolibrary.Types.Pressure k_peri(displayUnit="mmHg")=133.322387415
              "mmHg,  // Compliance curve constant";
            parameter Real a_peri=0.017e6 "mL^(-1), // Compliance curve constant";
            parameter Physiolibrary.Types.Volume V_perifl=1e-05
              "mL,  // Pericardial fluid volume";

            // Initial conditions
            //
            parameter Physiolibrary.Types.Volume V_lvinit=LV_V0
              ",                        // LV initial volume";
            parameter Physiolibrary.Types.Volume V_rvinit=RV_V0
              ",                        // RV initial volume";
            parameter Physiolibrary.Types.Volume V_aoinit=0.0001
              "mL ,                        // Aorta initial volume";
            parameter Physiolibrary.Types.Volume V_vcinit=0.000123
              "mL ,                        // Vena cava initial volume";
            parameter Physiolibrary.Types.Volume V_painit=7e-05
              "mL ,                        // PA initial volume";
            parameter Physiolibrary.Types.Volume V_pveinit=0.00015
              "mL ,                        // PVe initial volume";
            parameter Physiolibrary.Types.Volume V_rainit=5e-05
              "mL ,                        // RA initial volume";
            parameter Physiolibrary.Types.Volume V_lainit=8e-05
              "mL,                        // LA initial volume";

            // -----------------------------------------------------------------------------
            //   VARIABLES
            // -----------------------------------------------------------------------------
            //  Pressures
            Physiolibrary.Types.Pressure P_lvw " mmHg,   // LV pressure at wall";

            Physiolibrary.Types.Pressure P_rvw " mmHg,   // RV pressure at wall";

            Physiolibrary.Types.Pressure P_la "  mmHg,   // LA pressure";
            Physiolibrary.Types.Pressure P_ra "  mmHg,   // RA pressure";

            Physiolibrary.Types.Pressure P_ao "  mmHg,   // Aortic pressure";
            Physiolibrary.Types.Pressure P_vc "  mmHg,   // Vena cava pressure";
            Physiolibrary.Types.Pressure P_pa "  mmHg,   // Pulmonary arterial pressure";
            Physiolibrary.Types.Pressure P_pve " mmHg,   // Pulmonary veins pressure";

            Physiolibrary.Types.Pressure P_peri " mmHg,   // Pericardial pressure";

            //  Volumes
            Physiolibrary.Types.Volume V_lv "  mL,   // LV volume";
            Physiolibrary.Types.Volume V_rv "  mL,   // RV volume";
            Physiolibrary.Types.Volume V_la "  mL,   // LA volume";
            Physiolibrary.Types.Volume V_ra "  mL,   // RA volume";
            Physiolibrary.Types.Volume V_ao "  mL,   // Aortic volume";
            Physiolibrary.Types.Volume V_vc "  mL,   // Vena cava volume";
            Physiolibrary.Types.Volume V_pa "  mL,   // Pulmonary artery volume";
            Physiolibrary.Types.Volume V_pve " mL,   // Pulmonary veins volume";

            Physiolibrary.Types.Volume V_peri " mL,   // Total pericardial volume";

            //  Flows
            Physiolibrary.Types.VolumeFlowRate Q_vc
              "  mL/s,   // Flow from vena cava to RA";
            Physiolibrary.Types.VolumeFlowRate Q_tv
              "  mL/s,   // Flow through tricuspid valve";
            Physiolibrary.Types.VolumeFlowRate Q_pva
              " mL/s,   // Flow through pulmonary valve";
            Physiolibrary.Types.VolumeFlowRate Q_pa
              "  mL/s,   // Flow from PA to pulmonary veins";
            Physiolibrary.Types.VolumeFlowRate Q_pve
              " mL/s,   // Flow from pulmonary veins to LA";
            Physiolibrary.Types.VolumeFlowRate Q_mv
              "  mL/s,   // Flow through mitral valve";
            Physiolibrary.Types.VolumeFlowRate Q_av
              "  mL/s,   // Flow through aortic valve";
            Physiolibrary.Types.VolumeFlowRate Q_ao
              "  mL/s,   // Flow from aorta to vena cava";

            // Valve areas
            Physiolibrary.Types.Area AVA "  cm^2,   // Time-dependent aortic valve area";
            Physiolibrary.Types.Area MVA "  cm^2,   // Time-dependent mitral valve area";
            Physiolibrary.Types.Area PVA
              "  cm^2,   // Time-dependent pulmonary valve area";
            Physiolibrary.Types.Area TVA
              "  cm^2,   // Time-dependent tricuspid valve area";

            //  Spherical cap variables
            Modelica.Units.SI.Radius Sept_ym "  cm,   // Septum midwall junction radius";

            Physiolibrary.Types.Length Sept_xm
              "  cm,   // Septum midwall axial distance from origin";
            Physiolibrary.Types.Volume Sept_Vm "  cm^3,   // Septum midwall cap volume";
            Physiolibrary.Types.Area Sept_Am "  cm^2,   // Septum midwall cap area";
            Real Sept_Cm "  cm^-1,    // Septum midwall cap curvature (1/r)";
            Modelica.Units.SI.SurfaceTension Sept_Tm "  N/m,   // Septum midwall tension";
            Modelica.Units.SI.SurfaceTension Sept_Tx
              "  N/m,   // Septum x-component tension at junction (axial)";
            Modelica.Units.SI.SurfaceTension Sept_Ty
              "  N/m,   // Septum y-component tension at junction (radial)";

            Physiolibrary.Types.Pressure P_Septtrans
              "  kPa,   // Septum transmural pressure (signed)";

            Real Sept_e "  dimensionless,  // Myofiber natural strain";
            Modelica.Units.SI.Frequency Sept_dedt "  s^(-1),   // Myofiber strain rate";
            Physiolibrary.Types.Pressure Sept_s_act "  kPa,   // Myofiber active stress";
            Physiolibrary.Types.Pressure Sept_s_ela
              "  kPa,   // Myofiber passive stress from elasticity";
            Physiolibrary.Types.Pressure Sept_s_vis
              "  kPa,   // Myofiber passive stress from viscous resistance to motion";
            Physiolibrary.Types.Pressure Sept_s "  kPa,   // Total myofiber stress";
            Real Sept_z "  dimensionless,  // Dimensionless curvature parameter";

            Physiolibrary.Types.Length LW_xm
              "  cm,   // LV free wall midwall axial distance from origin";
            Physiolibrary.Types.Volume LW_Vm
              "  cm^3,   // LV free wall midwall cap volume";
            Physiolibrary.Types.Area LW_Am "  cm^2,   // LV free wall midwall cap area";
            Physiolibrary.Types.Area LW_Cm
              "  cm^-1,    // LV free wall midwall cap curvature (1/r)";
            Modelica.Units.SI.SurfaceTension LW_Tm "  N/m,   // LV midwall tension";
            Modelica.Units.SI.SurfaceTension LW_Tx
              "  N/m,   // LV x-component tension at junction (axial)";
            Modelica.Units.SI.SurfaceTension LW_Ty
              "  N/m,   // LV y-component tension at junction (radial)";

            Physiolibrary.Types.Pressure P_LWtrans
              "  kPa,   // LV free wall transmural pressure (signed)";

            Real LW_e "   dimensionless,  // Myofiber natural strain";
            Modelica.Units.SI.Frequency LW_dedt "  s^(-1),   // Myofiber strain rate";
            Physiolibrary.Types.Pressure LW_s_act "  kPa,   // Myofiber active stress";
            Physiolibrary.Types.Pressure LW_s_ela
              "  kPa,   // Myofiber passive stress from elasticity";
            Physiolibrary.Types.Pressure LW_s_vis
              "  kPa,   // Myofiber passive stress from viscous resistance to motion";
            Physiolibrary.Types.Pressure LW_s "   kPa,   // Total myofiber stress";
            Real LW_z "   dimensionless,  // Dimensionless curvature parameter";

            Physiolibrary.Types.Length RW_xm
              "  cm,   // RV free wall midwall axial distance from origin";
            Physiolibrary.Types.Volume RW_Vm
              "  cm^3,   // RV free wall midwall cap volume";
            Physiolibrary.Types.Area RW_Am "  cm^2,   // RV free wall midwall cap area";
            Real RW_Cm "  cm^-1,    // RV free wall midwall cap curvature (1/r)";
            Modelica.Units.SI.SurfaceTension RW_Tm "  N/m,   // RV midwall tension";
            Modelica.Units.SI.SurfaceTension RW_Tx
              "  N/m,   // RV x-component tension at junction (axial)";
            Modelica.Units.SI.SurfaceTension RW_Ty
              "  N/m,   // RV y-component tension at junction (radial)";

            Real P_RWtrans "  kPa,   // RV free wall transmural pressure (signed)";

            Real RW_e "   dimensionless,  // Myofiber natural strain";
            Modelica.Units.SI.Frequency RW_dedt "  s^(-1),   // Myofiber strain rate";
            Physiolibrary.Types.Pressure RW_s_act "  kPa,   // Myofiber active stress";
            Physiolibrary.Types.Pressure RW_s_ela
              "  kPa,   // Myofiber passive stress from elasticity";
            Physiolibrary.Types.Pressure RW_s_vis
              "  kPa,   // Myofiber passive stress from viscous resistance to motion";
            Physiolibrary.Types.Pressure RW_s "   kPa,   // Total myofiber stress";
            Real RW_z "   dimensionless,  // Dimensionless curvature parameter";

            Modelica.Units.SI.SurfaceTension Tx_total
              "  N/m,   // Sum tension at junction circle in x-direction (axial)";
            Modelica.Units.SI.SurfaceTension Ty_total
              "  N/m,   // Sum tension at junction circle in y-direction (radial)";

            Physiolibrary.Types.VolumeFlowRate Q_sept
              "  mL/s,   // Flow into septal displacement volume";

            Physiolibrary.Types.Velocity d_Sept_ym
              "  cm/s;   // Change in junction radius diameter";

          initial equation
            // -----------------------------------------------------------------------------
            //   INITIAL CONDITIONS
            // -----------------------------------------------------------------------------

            //        Initial Conditions
            //
            //           when(t=t.min) {
            V_ao = V_aoinit;
            V_vc = V_vcinit;
            V_pa = V_painit;
            V_pve = V_pveinit;
            V_lv = V_lvinit;
            V_rv = V_rvinit;
            V_la = V_lainit;
            V_ra = V_rainit;

            Q_tv = 0;
            Q_pva = 0;
            Q_pa = 0;
            Q_vc = 0;
            Q_pve = 0;
            Q_mv = 0;
            Q_av = 0;
            Q_ao = 0;

            Q_sept = 0;

            d_Sept_ym = 0;

            Sept_Vm = Sept_Vm0;

            Sept_ym = Sept_ym0;

            // State variables
            //         AVclosed        = 1;
            //         MVclosed        = 0;
            //         PVclosed        = 1;
            //         TVclosed        = 0;
            //
            //           }

          equation
            HRo = if HR_stepUp then (60 + floor(time/stepUpLength) *10)/60 else HRo0;
            // Implicit equations, spherical caps
            r0_RW = (Sept_ym0^2 + RW_h0^2)/(2*RW_h0);
            RW_Vm0 = (PI*RW_h0^2)/3*(3*r0_RW - RW_h0);
            RW_Am0 = 2*PI*r0_RW*RW_h0;

            LW_Vm0 = PI/6*LW_xm0*(LW_xm0^2 + 3*Sept_ym0^2);
            // Yields LW_xm0
            LW_Cm0 = 2*LW_xm0/(LW_xm0^2 + Sept_ym0^2);

            Sept_Vm0 = PI/6*Sept_xm0*(Sept_xm0^2 + 3*Sept_ym0^2);
            Sept_Cm0 = 2*Sept_xm0/(Sept_xm0^2 + Sept_ym0^2);

            RW_Vm0 = PI/6*RW_xm0*(RW_xm0^2 + 3*Sept_ym0^2);
            RW_Cm0 = 2*RW_xm0/(RW_xm0^2 + Sept_ym0^2);

            // -----------------------------------------------------------------------------
            //   SYSTEM OF EQUATIONS
            // -----------------------------------------------------------------------------

            // Ordinary differential equations

            // Valve flows
            // Tricuspid valve
            der(Q_tv) = (P_ra - P_rvw - ((Q_tv*abs(Q_tv)/(TVA^2))*rho/2))/L_ra;
            // Pulmonary valve
            der(Q_pva) = (P_rvw - P_pa - ((Q_pva*abs(Q_pva)/(PVA^2))*rho/2))/L_rvot;
            // Mitral valve
            der(Q_mv) = (P_la - P_lvw - ((Q_mv*abs(Q_mv)/(MVA^2))*rho/2))/L_la;
            // Aortic valve
            der(Q_av) = (P_lvw - P_ao - ((Q_av*abs(Q_av)/(AVA^2))*rho/2))/L_lvot;

            // Vessel flows
            // Vena cava
            der(Q_vc) = (P_vc - P_ra - Q_vc*R_vc)/L_vc;
            // Pulmonary artery
            der(Q_pa) = (P_pa - P_pve - Q_pa*PVR)/L_pa;
            // Pulmonary veins
            der(Q_pve) = (P_pve - P_la - Q_pve*R_pve)/L_pve;
            // Aorta
            der(Q_ao) = (P_ao - P_vc - Q_ao*SVR)/L_ao;

            // Conservation of mass equations

            // der(V_vc)  = Q_ao - Q_vc;
            // der(V_ra)  = 0;//!Q_vc - Q_tv;
            // der(V_rv)  = 0;//!Q_tv - Q_pva;
            // der(V_pa)  = Q_pva - Q_pa;
            // der(V_pve)  = Q_pa - Q_pve;
            // der(V_la)  = 0;//!Q_pve - Q_mv;
            // der(V_lv)  =  0;//!Q_mv - Q_av;
            // der(V_ao)  = Q_av - Q_ao;
            der(V_vc) = Q_ao - Q_vc;
            der(V_ra) = Q_vc - Q_tv;
            der(V_rv) = Q_tv - Q_pva;
            der(V_pa) = Q_pva - Q_pa;
            der(V_pve) = Q_pa - Q_pve;
            der(V_la) = Q_pve - Q_mv;
            der(V_lv) = Q_mv - Q_av;
            der(V_ao) = Q_av - Q_ao;

            // Change in valve area with state
            AVA = if (Q_av < 0) then AVAclosed else AVAopen;
            MVA = if (Q_mv < 0) then MVAclosed else MVAopen;
            PVA = if (Q_pva < 0) then PVAclosed else PVAopen;
            TVA = if (Q_tv < 0) then TVAclosed else TVAopen;

            // Spherical caps geometries
            // Displacement flow - interventricular septum
            der(Q_sept) = -(P_LWtrans + P_Septtrans + P_RWtrans)/L_sept;
            // Flow acceleration into septal spherical cap

            der(Sept_Vm) = Q_sept;
            // Change in septal midwall volume (positive when curved towards RV)

            LW_Vm = -V_lv - 0.5*LW_Vwall - 0.5*Sept_Vwall + Sept_Vm;
            // LV free wall spherical cap volume - adjusted according to septal displacement
            RW_Vm = V_rv + 0.5*RV_Vwall + 0.5*Sept_Vwall + Sept_Vm;
            // RV free wall spherical cap volume - same

            // Geometry changes of septal junction circle

            der(d_Sept_ym) = -(Ty_total + d_Sept_ym*damp_ym)/Lm_ym;
            // Acceleration in junction radius caused by summed tension forces + damping
            der(Sept_ym) = d_Sept_ym;
            // Change in junction radius

            // Solve for xm - cap midwall height (positive in direction of RV)
            LW_Vm = PI/6*LW_xm*(LW_xm^2 + 3*Sept_ym^2);
            // Given Vm and ym, xm can be found
            RW_Vm = PI/6*RW_xm*(RW_xm^2 + 3*Sept_ym^2);
            Sept_Vm = PI/6*Sept_xm*(Sept_xm^2 + 3*Sept_ym^2);

            // Calculate Am - cap midwall area
            LW_Am = PI*(LW_xm^2 + Sept_ym^2);
            RW_Am = PI*(RW_xm^2 + Sept_ym^2);
            Sept_Am = PI*(Sept_xm^2 + Sept_ym^2);

            // Calculate Cm - cap midwall curvature (1/r)
            LW_Cm = 2*LW_xm/(LW_xm^2 + Sept_ym^2);
            RW_Cm = 2*RW_xm/(RW_xm^2 + Sept_ym^2);
            Sept_Cm = 2*Sept_xm/(Sept_xm^2 + Sept_ym^2);

            // Tx balance
            Tx_total = LW_Tx + Sept_Tx + RW_Tx;
            // Ty balance
            Ty_total = LW_Ty + Sept_Ty + RW_Ty;

            // Fiber strain
            // Relation btw fiber strain and cavity + wall volume
            // From Lumens et al., 2009, Annals of Biomedical Engineering.
            LW_z = (3*LW_Cm*LW_Vwall)/(2*LW_Am);
            // Curvature ratio
            LW_e = 0.5*log(LW_Am/LW_Am0) - (1/12)*LW_z^2 - 0.019*LW_z^4;
            // Natural strain. Approximation to solution for curved wall segment (Lumens 2009)
            LW_dedt = der(LW_e);
            // Strain rate

            RW_z = (3*RW_Cm*RV_Vwall)/(2*RW_Am);
            // Curvature ratio
            RW_e = 0.5*log(RW_Am/RW_Am0) - (1/12)*RW_z^2 - 0.019*RW_z^4;
            // Natural strain. Approximation to solution for curved wall segment (Lumens 2009)
            RW_dedt = der(RW_e);
            // Strain rate

            Sept_z = (3*Sept_Cm*Sept_Vwall)/(2*Sept_Am);
            // Curvature ratio
            Sept_e = 0.5*log(Sept_Am/Sept_Am0) - (1/12)*Sept_z^2 - 0.019*Sept_z^4;
            // Natural strain. Approximation to solution for curved wall segment (Lumens 2009)
            Sept_dedt = der(Sept_e);
            // Strain rate

            // Fiber stress, active component (applying force-velocity and force-length relation)
            // A linear relation btw ratio of developed force vs. max force
            // and ratio of strain rate vs. max strain rate is assumed.
            // This seems reasonable for the relationship at physiological loads
            // (force 15-100% of peak force). A hyperbolic relationship
            // breaks down above 70% of peak force.
            // Note that max strain rate for this assumption is different from
            // and lower than Vmax estimated when using the hyperbolic Hill equation.
            // ref. Circ Res. 1991 Feb;68(2):588-96. Sarcomere dynamics in cat cardiac trabeculae. de Tombe PP1, ter Keurs HE.
            LW_s_act = LVact*(if (LW_dedt > 0) then (LV_smax*tanh((LW_e - e0)*3)) else (
              if (LW_dedt < LV_dedtmax) then 0 else (LV_smax - LV_smax*(LW_dedt/
              LV_dedtmax))*tanh((LW_e - e0)*3)));

            Sept_s_act = LVact*(if (Sept_dedt >= 0) then (LV_smax*tanh((Sept_e - e0)*3))
               else (if (Sept_dedt < LV_dedtmax) then 0 else (LV_smax - LV_smax_phi*(
              Sept_dedt/LV_dedtmax))*tanh((Sept_e - e0)*3)));

            RW_s_act = RVact*(if (RW_dedt >= 0) then (RV_smax*tanh((RW_e - e0)*3)) else (
              if (RW_dedt < RV_dedtmax) then 0 else (RV_smax - RV_smax_phi*(RW_dedt/
              RV_dedtmax))*tanh((RW_e - e0)*3)));

            // Fiber stress, passive components
            // Elastic stress modeled to be symmetric on both sides of slack length
            // Viscous force modeled to be proportional to strain rate

            LW_s_ela = if (LW_e >= 0) then (LV_k*(exp(LV_a*LW_e) - 1)) else -(LV_k*(exp(
              LV_a*(-LW_e)) - 1));

            LW_s_vis = LW_dedt*LV_visc;

            Sept_s_ela = if (Sept_e >= 0) then (LV_k*(exp(LV_a*Sept_e) - 1)) else -(LV_k*(
              exp(LV_a*(-Sept_e)) - 1));

            Sept_s_vis = Sept_dedt*LV_visc;

            RW_s_ela = if (RW_e >= 0) then (RV_k*(exp(RV_a*RW_e) - 1)) else -(RV_k*(exp(
              RV_a*(-RW_e)) - 1));

            RW_s_vis = RW_dedt*RV_visc;

            // Fiber stress, total (sum of active and passive components)

            LW_s = LW_s_act + LW_s_ela + LW_s_vis;
            Sept_s = Sept_s_act + Sept_s_ela + Sept_s_vis;
            RW_s = RW_s_act + RW_s_ela + RW_s_vis;

            // Wall tension (Approximation, Lumens 2009)
            LW_Tm = (LW_Vwall*LW_s)/(2*LW_Am)*(1 + LW_z^2/3 + LW_z^4/5);
            LW_Tx = LW_Tm*(2*LW_xm*Sept_ym)/(LW_xm^2 + Sept_ym^2);
            LW_Ty = LW_Tm*(-(LW_xm^2) + Sept_ym^2)/(LW_xm^2 + Sept_ym^2);

            Sept_Tm = (Sept_Vwall*Sept_s)/(2*Sept_Am)*(1 + Sept_z^2/3 + Sept_z^4/5);
            Sept_Tx = Sept_Tm*(2*Sept_xm*Sept_ym)/(Sept_xm^2 + Sept_ym^2);
            Sept_Ty = Sept_Tm*(-(Sept_xm^2) + Sept_ym^2)/(Sept_xm^2 + Sept_ym^2);

            RW_Tm = (RV_Vwall*RW_s)/(2*RW_Am)*(1 + RW_z^2/3 + RW_z^4/5);
            RW_Tx = RW_Tm*(2*RW_xm*Sept_ym)/(RW_xm^2 + Sept_ym^2);
            RW_Ty = RW_Tm*(-(RW_xm^2) + Sept_ym^2)/(RW_xm^2 + Sept_ym^2);

            // Axial transmural pressure (in x-direction)
            P_LWtrans = 2*LW_Tx/Sept_ym;
            P_Septtrans = 2*Sept_Tx/Sept_ym;
            P_RWtrans = 2*RW_Tx/Sept_ym;

            // LV pressure
            P_lvw = -P_LWtrans + P_peri;

            // RV pressure

            P_rvw = P_RWtrans + P_peri;

            // Atrial pressures
            // Passive component + active component
            // Linear compliance curve
            P_la = (V_la - V0_la)/C_la + Aact*P_maxla + P_peri;
            P_ra = (V_ra - V0_ra)/C_ra + Aact*P_maxra + P_peri;

            // Vessels pressures

            P_ao = (V_ao - V0_ao)/C_ao;
            P_vc = (V_vc - V0_vc)/C_vc;
            P_pa = (V_pa - V0_pa)/C_pa;
            P_pve = (V_pve - V0_pve)/C_pve;

            // Pericardial volume and pressure
            V_peri = V_lv + V_rv + V_ra + V_la + LV_Vwall + RV_Vwall + V_perifl;
            P_peri = k_peri*(exp((V_peri - V0_peri)*a_peri) - 1);

            annotation (experiment(
                StopTime=20,
                Interval=0.001,
                Tolerance=1e-07,
                __Dymola_Algorithm="Dassl"));
          end System_OlsenSIUnits;

          model System_OlsenSIUnits_Ctrl "Already parametrized in base as control"
            extends Olsen.System_OlsenSIUnits;
            annotation (experiment(
                StopTime=150,
                __Dymola_NumberOfIntervals=5000,
                Tolerance=1e-05,
                __Dymola_Algorithm="Cvode"));
          end System_OlsenSIUnits_Ctrl;

          model System_OlsenSIUnits_PAH
            extends Olsen.System_OlsenSIUnits_Ctrl(
              HRo0=1.1333333333333,
              V_lainit=0.00011,
              V_rainit=7e-05,
              V_pveinit=0.00021,
              V_vcinit=0.000315,
              V0_peri=0.000611,
              RV_V0=0.0001066,
              RV_Vwall=6.77e-05,
              LV_V0=7.05e-05,
              LV_Vwall=9.37e-05,
              RV_smax=127000,
              LV_smax=107000,
              PVR=80966685.877129,
              SVR=167186273.81841,
              C_pa=7.265096423641e-09,
              C_ao=6.9275687145105e-09,
              RVactdur0=0.585,
              RVdelay0=0.186,
              LVactdur0=0.564,
              LVup=0.255,
              LVdelay0=0.17);
          end System_OlsenSIUnits_PAH;

          model System_OlsenSIUnits_PAHEx
            extends Olsen.System_OlsenSIUnits(
              HRo0(displayUnit="1/min") = 1.7833333333333,
              V_lainit=0.00011,
              V_rainit=0.0001,
              V_pveinit=0.00025,
              V_painit=0.0001,
              V_vcinit=0.000355,
              V0_peri=0.000631,
              P_maxra=799.93432449,
              P_maxla=1199.901486735,
              RV_V0=0.000116,
              RV_Vwall=7.3e-05,
              LV_V0=7.1e-05,
              LV_Vwall=9.95e-05,
              RV_smax=202000,
              LV_smax=161000,
              L_ra=13332.2387415,
              L_la=13332.2387415,
              LVdelay0=0.196,
              LVup=0.157,
              LVactdur0=0.477,
              RVdelay0=0.185,
              RVup=0.123,
              RVactdur0=0.53,
              C_ao(displayUnit="ml/mmHg") = 7.0490786897975e-09,
              C_vc(displayUnit="ml/mmHg") = 1.5001231516913e-07,
              C_pa(displayUnit="ml/mmHg") = 7.0490786897975e-09,
              SVR(displayUnit="(mmHg.s)/ml") = 115110549.29411,
              PVR(displayUnit="(mmHg.s)/ml") = 86219587.941281);
          end System_OlsenSIUnits_PAHEx;

          model Heart_Olsen_base "Olsens heart, equation based. Implemented from Olsen 2021, PMID 34448636"
            import Signals;
            extends partialDriving_Olsen(t0(start=0));
            extends partialHeart;

            parameter Boolean deactivateHeart = false;
            parameter Boolean closeValves = false;

            parameter Real rho=1060 " kg/m^3, // Density of blood";
            parameter Physiolibrary.Types.Pressure mmHg2SI=133.322387415;
            parameter Physiolibrary.Types.VolumeFlowRate mls2SI=1e-06;

            //   Resistances
            parameter Physiolibrary.Types.HydraulicResistance R_vc(displayUnit="(mmHg.s)/ml")=
               133322.387415   "mmHg*s*mL^(-1), // Vena cava resistance";
            parameter Physiolibrary.Types.HydraulicResistance R_pve(displayUnit="(mmHg.s)/ml")=
               133322.387415   "mmHg*s*mL^(-1), // Pulmonary veins resistance";
            //   Inertances
            parameter Physiolibrary.Types.HydraulicInertance L_vc(displayUnit="mmHg.s2/ml")=
               1333223.87415   "mmHg*s^2*mL^(-1), // Vena cava inertance";
            parameter Physiolibrary.Types.HydraulicInertance L_pve(displayUnit="mmHg.s2/ml")=
               1333223.87415   "mmHg*s^2*mL^(-1), // Pulmonary veins inertance";

            // Valves

            //   Valve areas
            parameter Physiolibrary.Types.Area AVAopen=0.00035
              "cm^2,  // Aortic valve area (when open)";
            parameter Physiolibrary.Types.Area AVAclosed(displayUnit="cm2")=1e-07
              "cm^2,  // (when closed)";
            parameter Physiolibrary.Types.Area MVAopen(displayUnit="cm2")=0.0004
              "cm^2,   // Mitral valve area (when open)";
            parameter Physiolibrary.Types.Area MVAclosed=1e-07 "cm^2,  // (when closed)";
            parameter Physiolibrary.Types.Area PVAopen=0.00035
              "cm^2,  // Pulmonary valve area (when open)";
            parameter Physiolibrary.Types.Area PVAclosed=1e-07 "cm^2,  // (when closed)";
            parameter Physiolibrary.Types.Area TVAopen=0.0004
              "cm^2,   // Tricuspid valve area (when open)";
            parameter Physiolibrary.Types.Area TVAclosed=1e-07 "cm^2,  // (when closed)";

            // Chambers
            //   Inertances
            parameter Physiolibrary.Types.HydraulicInertance L_lvot(displayUnit="mmHg.s2/ml")=
               133322.387415   "mmHg*s^2*mL^(-1),  // LVOT inertance";
            parameter Physiolibrary.Types.HydraulicInertance L_rvot(displayUnit="mmHg.s2/ml")=
               133322.387415   "mmHg*s^2*mL^(-1),  // RVOT inertance";
            parameter Physiolibrary.Types.HydraulicInertance L_la(displayUnit="mmHg.s2/ml")=
               13332.2387415   "mmHg*s^2*mL^(-1), // Left atrium inertance";
            parameter Physiolibrary.Types.HydraulicInertance L_ra(displayUnit="mmHg.s2/ml")=
               13332.2387415   "mmHg*s^2*mL^(-1), // Right atrium inertance";

            parameter Physiolibrary.Types.HydraulicInertance L_sept(displayUnit="mmHg.s2/ml")=
               33330.59685375   "mmHg*s^2*mL^(-1), // Septal displacement inertance";

            parameter Real Lm_ym=0.2 "g/m,   // Junction circle inertial component";
            parameter Real damp_ym=60  "N*s*m^(-1)*cm^(-1),   // Damping component";

            // LV - active myofiber properties (intercepts of assumed linear force-velocity relationship)
            parameter Physiolibrary.Types.Fraction eta_smax = 0 "Inotropic increase in contractility at max exercise";

            parameter Modelica.Units.SI.Stress LV_smax(displayUnit="kPa")=134000
              "kPa, // Maximal active myofiber stress (at zero velocity)";
            Physiolibrary.Types.Pressure LV_smax_phi(displayUnit="kPa")=LV_smax*(1 + eta_smax*phi)
              "kPa, // Maximal active myofiber stress on eta";

            parameter Real LV_dedtmax=-3
              "1/s, // Maximal myofiber strain rate (at zero afterload)";

            // LV - passive myofiber properties
            //   For extension above slack length and compression below slack length (assuming symmetric passive properties)
            parameter Physiolibrary.Types.Pressure LV_k(displayUnit="kPa")=4000
              "kPa,  // Parameters determining shape of compliance curve";
            parameter Real LV_a=11 "dimensionless,";
            //   Viscosity
            parameter Real LV_visc=1.5e3
              "kPa*s, // Viscosity (stress per strain rate)";
            // Ref. Chung et al, J Mol Cell Cardiol. 2011 Sep; 51(3): 428–434.
            // They find titin-based viscosity approx 5.8 kPa at stretch rate of 1 s-1 (fig. 2)
            // in mice. A lower value gives more realistic results in this model.

            // RV - active myofiber properties
            parameter Physiolibrary.Types.Pressure RV_smax(displayUnit="kPa")=70000
              "kPa, // Maximal active myofiber stress";
            Physiolibrary.Types.Pressure RV_smax_phi(displayUnit="kPa")=RV_smax*(1 + eta_smax*phi)
              "kPa, // Maximal active myofiber stress on eta";

            parameter Real RV_dedtmax=-3 "1/s, // Maximal myofiber strain rate";

            // RV - passive myofiber properties
            //   For extension above slack length and compression below slack length (assuming symmetric passive properties)
            parameter Physiolibrary.Types.Pressure RV_k(displayUnit="kPa")=4000   "kPa, ";
            parameter Real RV_a=11 "dimensionless,";
            //   Viscosity
            parameter Real RV_visc=1.5e3
              "kPa*s, // viscosity (stress per strain rate)";

            //  Force-length relation
            parameter Real e0=-0.3
              "dimensionless,  // natural fiber strain associated with zero force";
            // force increases above this number (see formula in code)
            // LV chamber
            parameter Physiolibrary.Types.Volume LV_Vwall=0.0001015
              "cm^3, // Volume of LV wall (including septum)";
            parameter Physiolibrary.Types.Volume LV_V0=9.21e-05
              "cm^3,  // Unstressed volume of LV cavity";

            parameter Physiolibrary.Types.Volume LV_Vm0=LV_V0 + (LV_Vwall/2)
              ",  // Unstressed mid-wall volume of entire LV";
            Physiolibrary.Types.Volume r0_LV=(LV_Vm0*3/4/PI)^(1/3)
              ", // Unstressed mid-wall radius of spherical LV";

            // RV chamber
            parameter Physiolibrary.Types.Volume RV_Vwall=4.6e-05
              "cm^3, // Volume of RV wall (ref Katz et al., J Am Coll Cardiol. 1993 May;21(6):1475-81)";
            parameter Physiolibrary.Types.Volume RV_V0=0.000116
              "cm^3,  // Unstressed volume of RV cavity ";

            // Septum
            parameter Real Sept_ratio=0.333
              "dimensionless,  // Ratio of septal wall volume to LV wall volume";
            parameter Physiolibrary.Types.Volume Sept_Vwall=LV_Vwall*Sept_ratio
              "// Volume of septal wall";
            parameter Physiolibrary.Types.Volume LW_Vwall=LV_Vwall - Sept_Vwall
              "// Volume of left ventricle free wall";
            // (by definition, RV wall = RV free wall)

            // Spherical caps
            // For reference, unstressed values, a spherical shape of LV + septum is assumed
            Modelica.Units.SI.Height Sept_h0=2*Sept_ratio*r0_LV
              "  // Reference midwall height of spherical cap when ration btw cap area and spherical area is Sept_ratio";
            Real Sept_ym0=(2*Sept_h0*(r0_LV - 0.5*Sept_h0))^(1/2)
              " // Reference septum midwall junction radius";
            Physiolibrary.Types.Volume Sept_Vm0=(PI*Sept_h0^2)/3*(3*r0_LV - Sept_h0)
              "  // Reference septum midwall cap volume";
            Real Sept_Am0=2*PI*r0_LV*Sept_h0 "    // Reference septum midwall cap area";
            Real Sept_xm0;
            Real Sept_Cm0;

            Physiolibrary.Types.Volume LW_Vm0=-LV_V0 - 0.5*LW_Vwall - 0.5*Sept_Vwall +
                Sept_Vm0 " // Reference LV free wall midwall cap volume";
            Real LW_Am0=2*PI*r0_LV*(2*r0_LV - Sept_h0)
              "     // Reference LV free wall midwall cap area";
            Real LW_xm0;
            Real LW_Cm0;

            Physiolibrary.Types.Volume RW_Vm0=RV_V0 + 0.5*RV_Vwall + 0.5*Sept_Vwall +
                Sept_Vm0 "  // Reference RV free wall midwall cap volume";
            Real RW_h0 "  // Reference RV free wall midwall cap height";
            Real r0_RW ",   // Reference RV free wall midwall cap radius";

            Real RW_Am0 ",   // Reference RV free wall midwall cap area";
            Real RW_xm0;
            Real RW_Cm0;

            // Parameters, continued
            // LA
            parameter Physiolibrary.Types.Volume V0_la=2e-05
              "mL, // LA equilibrium volume";
            parameter Physiolibrary.Types.HydraulicCompliance C_la(displayUnit="ml/mmHg")=
               6.0004926067653e-08   "mL/mmHg, // LA compliance";
            parameter Physiolibrary.Types.Pressure P_maxla(displayUnit="mmHg")=799.93432449
              "mmHg, // Force of atrial contraction";

            // RA
            parameter Physiolibrary.Types.Volume V0_ra=2e-05
              "mL, // RA equilibrium volume";
            parameter Physiolibrary.Types.HydraulicCompliance C_ra(displayUnit="ml/mmHg")=
               6.0004926067653e-08   "mL/mmHg, // RA compliance";
            parameter Physiolibrary.Types.Pressure P_maxra(displayUnit="mmHg")=533.28954966
              "mmHg, // Force of RA contraction";

            // Pericardium
            parameter Physiolibrary.Types.Volume V0_peri=0.000599
              "mL,  // Pericardium equilibrium volume";
            parameter Physiolibrary.Types.Pressure k_peri(displayUnit="mmHg")=133.322387415
              "mmHg,  // Compliance curve constant";
            parameter Real a_peri=0.017e6 "mL^(-1), // Compliance curve constant";
            parameter Physiolibrary.Types.Volume V_perifl=1e-05
              "mL,  // Pericardial fluid volume";

            // Initial conditions
            //
            parameter Physiolibrary.Types.Volume V_lvinit=LV_V0
              ",                        // LV initial volume";
            parameter Physiolibrary.Types.Volume V_rvinit=RV_V0
              ",                        // RV initial volume";
            parameter Physiolibrary.Types.Volume V_rainit=5e-05
              "mL ,                        // RA initial volume";
            parameter Physiolibrary.Types.Volume V_lainit=8e-05
              "mL,                        // LA initial volume";

            // -----------------------------------------------------------------------------
            //   VARIABLES
            // -----------------------------------------------------------------------------
            //  Pressures
            Physiolibrary.Types.Pressure P_lvw " mmHg,   // LV pressure at wall";

            Physiolibrary.Types.Pressure P_rvw " mmHg,   // RV pressure at wall";

            Physiolibrary.Types.Pressure P_la "  mmHg,   // LA pressure";
            Physiolibrary.Types.Pressure P_ra "  mmHg,   // RA pressure";

            Physiolibrary.Types.Pressure P_ao "  mmHg,   // Aortic pressure";
            Physiolibrary.Types.Pressure P_vc "  mmHg,   // Vena cava pressure";
            Physiolibrary.Types.Pressure P_pa "  mmHg,   // Pulmonary arterial pressure";
            Physiolibrary.Types.Pressure P_pve " mmHg,   // Pulmonary veins pressure";

            Physiolibrary.Types.Pressure P_peri " mmHg,   // Pericardial pressure";

            //  Volumes
            Physiolibrary.Types.Volume V_lv "  mL,   // LV volume";
            Physiolibrary.Types.Volume V_rv "  mL,   // RV volume";
            Physiolibrary.Types.Volume V_la "  mL,   // LA volume";
            Physiolibrary.Types.Volume V_ra "  mL,   // RA volume";

            Physiolibrary.Types.Volume V_peri " mL,   // Total pericardial volume";

            //  Flows
            Physiolibrary.Types.VolumeFlowRate Q_vc
              "  mL/s,   // Flow from vena cava to RA";
            Physiolibrary.Types.VolumeFlowRate Q_tv
              "  mL/s,   // Flow through tricuspid valve";
            Physiolibrary.Types.VolumeFlowRate Q_pva
              " mL/s,   // Flow through pulmonary valve";
            //  Physiolibrary.Types.VolumeFlowRate Q_pa "  mL/s,   // Flow from PA to pulmonary veins";
            Physiolibrary.Types.VolumeFlowRate Q_pve
              " mL/s,   // Flow from pulmonary veins to LA";
            Physiolibrary.Types.VolumeFlowRate Q_mv
              "  mL/s,   // Flow through mitral valve";
            Physiolibrary.Types.VolumeFlowRate Q_av
              "  mL/s,   // Flow through aortic valve";
            //  Physiolibrary.Types.VolumeFlowRate Q_ao "  mL/s,   // Flow from aorta to vena cava";

            // Valve areas
            Physiolibrary.Types.Area AVA "  cm^2,   // Time-dependent aortic valve area";
            Physiolibrary.Types.Area MVA "  cm^2,   // Time-dependent mitral valve area";
            Physiolibrary.Types.Area PVA
              "  cm^2,   // Time-dependent pulmonary valve area";
            Physiolibrary.Types.Area TVA
              "  cm^2,   // Time-dependent tricuspid valve area";

            //  Spherical cap variables
            Modelica.Units.SI.Radius Sept_ym "  cm,   // Septum midwall junction radius";

            Physiolibrary.Types.Length Sept_xm
              "  cm,   // Septum midwall axial distance from origin";
            Physiolibrary.Types.Volume Sept_Vm "  cm^3,   // Septum midwall cap volume";
            Physiolibrary.Types.Area Sept_Am "  cm^2,   // Septum midwall cap area";
            Real Sept_Cm "  cm^-1,    // Septum midwall cap curvature (1/r)";
            Modelica.Units.SI.SurfaceTension Sept_Tm "  N/m,   // Septum midwall tension";
            Modelica.Units.SI.SurfaceTension Sept_Tx
              "  N/m,   // Septum x-component tension at junction (axial)";
            Modelica.Units.SI.SurfaceTension Sept_Ty
              "  N/m,   // Septum y-component tension at junction (radial)";

            Physiolibrary.Types.Pressure P_Septtrans
              "  kPa,   // Septum transmural pressure (signed)";

            Real Sept_e "  dimensionless,  // Myofiber natural strain";
            Modelica.Units.SI.Frequency Sept_dedt "  s^(-1),   // Myofiber strain rate";
            Physiolibrary.Types.Pressure Sept_s_act "  kPa,   // Myofiber active stress";
            Physiolibrary.Types.Pressure Sept_s_ela
              "  kPa,   // Myofiber passive stress from elasticity";
            Physiolibrary.Types.Pressure Sept_s_vis
              "  kPa,   // Myofiber passive stress from viscous resistance to motion";
            Physiolibrary.Types.Pressure Sept_s "  kPa,   // Total myofiber stress";
            Real Sept_z "  dimensionless,  // Dimensionless curvature parameter";

            Physiolibrary.Types.Length LW_xm
              "  cm,   // LV free wall midwall axial distance from origin";
            Physiolibrary.Types.Volume LW_Vm
              "  cm^3,   // LV free wall midwall cap volume";
            Physiolibrary.Types.Area LW_Am "  cm^2,   // LV free wall midwall cap area";
            Physiolibrary.Types.Area LW_Cm
              "  cm^-1,    // LV free wall midwall cap curvature (1/r)";
            Modelica.Units.SI.SurfaceTension LW_Tm "  N/m,   // LV midwall tension";
            Modelica.Units.SI.SurfaceTension LW_Tx
              "  N/m,   // LV x-component tension at junction (axial)";
            Modelica.Units.SI.SurfaceTension LW_Ty
              "  N/m,   // LV y-component tension at junction (radial)";

            Physiolibrary.Types.Pressure P_LWtrans
              "  kPa,   // LV free wall transmural pressure (signed)";

            Real LW_e "   dimensionless,  // Myofiber natural strain";
            Modelica.Units.SI.Frequency LW_dedt "  s^(-1),   // Myofiber strain rate";
            Physiolibrary.Types.Pressure LW_s_act "  kPa,   // Myofiber active stress";
            Physiolibrary.Types.Pressure LW_s_ela
              "  kPa,   // Myofiber passive stress from elasticity";
            Physiolibrary.Types.Pressure LW_s_vis
              "  kPa,   // Myofiber passive stress from viscous resistance to motion";
            Physiolibrary.Types.Pressure LW_s "   kPa,   // Total myofiber stress";
            Real LW_z "   dimensionless,  // Dimensionless curvature parameter";

            Physiolibrary.Types.Length RW_xm
              "  cm,   // RV free wall midwall axial distance from origin";
            Physiolibrary.Types.Volume RW_Vm
              "  cm^3,   // RV free wall midwall cap volume";
            Physiolibrary.Types.Area RW_Am "  cm^2,   // RV free wall midwall cap area";
            Real RW_Cm "  cm^-1,    // RV free wall midwall cap curvature (1/r)";
            Modelica.Units.SI.SurfaceTension RW_Tm "  N/m,   // RV midwall tension";
            Modelica.Units.SI.SurfaceTension RW_Tx
              "  N/m,   // RV x-component tension at junction (axial)";
            Modelica.Units.SI.SurfaceTension RW_Ty
              "  N/m,   // RV y-component tension at junction (radial)";

            Physiolibrary.Types.Pressure P_RWtrans
              "  kPa,   // RV free wall transmural pressure (signed)";

            Real RW_e "   dimensionless,  // Myofiber natural strain";
            Modelica.Units.SI.Frequency RW_dedt "  s^(-1),   // Myofiber strain rate";
            Physiolibrary.Types.Pressure RW_s_act "  kPa,   // Myofiber active stress";
            Physiolibrary.Types.Pressure RW_s_ela
              "  kPa,   // Myofiber passive stress from elasticity";
            Physiolibrary.Types.Pressure RW_s_vis
              "  kPa,   // Myofiber passive stress from viscous resistance to motion";
            Physiolibrary.Types.Pressure RW_s "   kPa,   // Total myofiber stress";
            Real RW_z "   dimensionless,  // Dimensionless curvature parameter";

            Modelica.Units.SI.SurfaceTension Tx_total
              "  N/m,   // Sum tension at junction circle in x-direction (axial)";
            Modelica.Units.SI.SurfaceTension Ty_total
              "  N/m,   // Sum tension at junction circle in y-direction (radial)";

            Physiolibrary.Types.VolumeFlowRate Q_sept
              "  mL/s,   // Flow into septal displacement volume";

            Physiolibrary.Types.Velocity d_Sept_ym
              "  cm/s;   // Change in junction radius diameter";

            Signals.Power power_LV(
              HR=HRo,
              p=P_lvw,
              v=V_LV,
              beat=beat)
              annotation (Placement(transformation(extent={{-20,20},{0,40}})));
            Signals.Power power_RV(
              HR=HRo,
              p=P_rvw,
              v=V_rv,
              beat=beat)
              annotation (Placement(transformation(extent={{-20,-20},{0,0}})));
          protected
            Physiolibrary.Types.RealIO.FrequencyOutput HRinner "Frequency constant"
              annotation (Placement(transformation(extent={{-61,-1},{-59,1}})));
          initial equation
            // -----------------------------------------------------------------------------
            //   INITIAL CONDITIONS
            // -----------------------------------------------------------------------------

            //        Initial Conditions
            //
            //           when(t=t.min) {
            V_lv = V_lvinit;
            V_rv = V_rvinit;
            V_la = V_lainit;
            V_ra = V_rainit;

            Q_tv = 0;
            Q_pva = 0;
            // Q_pa  = 0;
            Q_vc = 0;
            Q_pve = 0;
            Q_mv = 0;
            Q_av = 0;
            // Q_ao  = 0;

            Q_sept = 0;

            d_Sept_ym = 0;

            Sept_Vm = Sept_Vm0;

            Sept_ym = Sept_ym0;

            // State variables
            //         AVclosed        = 1;
            //         MVclosed        = 0;
            //         PVclosed        = 1;
            //         TVclosed        = 0;
            //
            //           }

          equation
            volume = V_lv + V_rv + V_ra + V_la;
            V_LV = V_lv;
            HR_true = HRo;
            beat = time > pre(t0) + CycleL;

            HRo = if HR_stepUp then (60 + floor(time/stepUpLength) *10)/60 else HRinner;

            pa.pressure = P_pa;
            pa.q = -Q_pva;
            pv.pressure = P_pve;
            pv.q = Q_pve;
            sa.pressure = P_ao;
            sa.q = -Q_av;
            sv.pressure = P_vc;
            sv.q = Q_vc;

            // Implicit equations, spherical caps
            r0_RW = (Sept_ym0^2 + RW_h0^2)/(2*RW_h0);
            RW_Vm0 = (PI*RW_h0^2)/3*(3*r0_RW - RW_h0);
            RW_Am0 = 2*PI*r0_RW*RW_h0;

            LW_Vm0 = PI/6*LW_xm0*(LW_xm0^2 + 3*Sept_ym0^2);
            // Yields LW_xm0
            LW_Cm0 = 2*LW_xm0/(LW_xm0^2 + Sept_ym0^2);

            Sept_Vm0 = PI/6*Sept_xm0*(Sept_xm0^2 + 3*Sept_ym0^2);
            Sept_Cm0 = 2*Sept_xm0/(Sept_xm0^2 + Sept_ym0^2);

            RW_Vm0 = PI/6*RW_xm0*(RW_xm0^2 + 3*Sept_ym0^2);
            RW_Cm0 = 2*RW_xm0/(RW_xm0^2 + Sept_ym0^2);

            // -----------------------------------------------------------------------------
            //   SYSTEM OF EQUATIONS
            // -----------------------------------------------------------------------------

            // Ordinary differential equations

            // Valve flows
            if closeValves then
              Q_tv = 0;
              Q_pva = 0;
              Q_mv = 0;
              Q_av = 0;
            else
              // Tricuspid valve
              der(Q_tv) = (P_ra - P_rvw - ((Q_tv*abs(Q_tv)/(TVA^2))*rho/2))/L_ra;
              // Pulmonary valve
              der(Q_pva) = (P_rvw - P_pa - ((Q_pva*abs(Q_pva)/(PVA^2))*rho/2))/L_rvot;
              // Mitral valve
              der(Q_mv) = (P_la - P_lvw - ((Q_mv*abs(Q_mv)/(MVA^2))*rho/2))/L_la;
              // Aortic valve
              der(Q_av) = (P_lvw - P_ao - ((Q_av*abs(Q_av)/(AVA^2))*rho/2))/L_lvot;
            end if;

            // Conservation of mass equations
          if deactivateHeart then
          // der(V_vc)  = Q_ao - Q_vc;
           der(V_ra)  = 0;//!Q_vc - Q_tv;
           der(V_rv)  = 0;//!Q_tv - Q_pva;
          // der(V_pa)  = Q_pva - Q_pa;
          // der(V_pve)  = Q_pa - Q_pve;
           der(V_la)  = Q_pve - Q_mv;
           der(V_lv)  =  Q_mv - Q_av;
           // der(V_ao)  = Q_av - Q_ao;

            // Vessel flows
            // Vena cava
            Q_vc = 0;
            // Pulmonary artery
            // der(Q_pa)  = (P_pa-P_pve-Q_pa*PVR)/L_pa;
            // Pulmonary veins
            Q_pve = 0;
            // Aorta
            // der(Q_ao)  =  (P_ao-P_vc-Q_ao*SVR)/L_ao;

          else
            // der(V_vc)  = Q_ao - Q_vc;
            der(V_ra) = Q_vc - Q_tv;
            der(V_rv) = Q_tv - Q_pva;
            // der(V_pa)  = Q_pva - Q_pa;
            // der(V_pve) = Q_pa - Q_pve;
            der(V_la) = Q_pve - Q_mv;
            der(V_lv) = Q_mv - Q_av;
            // der(V_ao)  = Q_av - Q_ao;

            // Vessel flows
            // Vena cava
            der(Q_vc) = (P_vc - P_ra - Q_vc*R_vc)/L_vc;
            // Pulmonary artery
            // der(Q_pa)  = (P_pa-P_pve-Q_pa*PVR)/L_pa;
            // Pulmonary veins
            der(Q_pve) = (P_pve - P_la - Q_pve*R_pve)/L_pve;
            // Aorta
            // der(Q_ao)  =  (P_ao-P_vc-Q_ao*SVR)/L_ao;

          end if;

            // Change in valve area with state
            AVA = if (Q_av < 0) then AVAclosed else AVAopen;
            MVA = if (Q_mv < 0) then MVAclosed else MVAopen;
            PVA = if (Q_pva < 0) then PVAclosed else PVAopen;
            TVA = if (Q_tv < 0) then TVAclosed else TVAopen;

            // Spherical caps geometries
            // Displacement flow - interventricular septum
            der(Q_sept) = -(P_LWtrans + P_Septtrans + P_RWtrans)/L_sept;
            // Flow acceleration into septal spherical cap

            der(Sept_Vm) = Q_sept;
            // Change in septal midwall volume (positive when curved towards RV)

            LW_Vm = -V_lv - 0.5*LW_Vwall - 0.5*Sept_Vwall + Sept_Vm;
            // LV free wall spherical cap volume - adjusted according to septal displacement
            RW_Vm = V_rv + 0.5*RV_Vwall + 0.5*Sept_Vwall + Sept_Vm;
            // RV free wall spherical cap volume - same

            // Geometry changes of septal junction circle

            der(d_Sept_ym) = -(Ty_total + d_Sept_ym*damp_ym)/Lm_ym;
            // Acceleration in junction radius caused by summed tension forces + damping
            der(Sept_ym) = d_Sept_ym;
            // Change in junction radius

            // Solve for xm - cap midwall height (positive in direction of RV)
            LW_Vm = PI/6*LW_xm*(LW_xm^2 + 3*Sept_ym^2);
            // Given Vm and ym, xm can be found
            RW_Vm = PI/6*RW_xm*(RW_xm^2 + 3*Sept_ym^2);
            Sept_Vm = PI/6*Sept_xm*(Sept_xm^2 + 3*Sept_ym^2);

            // Calculate Am - cap midwall area
            LW_Am = PI*(LW_xm^2 + Sept_ym^2);
            RW_Am = PI*(RW_xm^2 + Sept_ym^2);
            Sept_Am = PI*(Sept_xm^2 + Sept_ym^2);

            // Calculate Cm - cap midwall curvature (1/r)
            LW_Cm = 2*LW_xm/(LW_xm^2 + Sept_ym^2);
            RW_Cm = 2*RW_xm/(RW_xm^2 + Sept_ym^2);
            Sept_Cm = 2*Sept_xm/(Sept_xm^2 + Sept_ym^2);

            // Tx balance
            Tx_total = LW_Tx + Sept_Tx + RW_Tx;
            // Ty balance
            Ty_total = LW_Ty + Sept_Ty + RW_Ty;

            // Fiber strain
            // Relation btw fiber strain and cavity + wall volume
            // From Lumens et al., 2009, Annals of Biomedical Engineering.
            LW_z = (3*LW_Cm*LW_Vwall)/(2*LW_Am);
            // Curvature ratio
            LW_e = 0.5*log(LW_Am/LW_Am0) - (1/12)*LW_z^2 - 0.019*LW_z^4;
            // Natural strain. Approximation to solution for curved wall segment (Lumens 2009)
            LW_dedt = der(LW_e);
            // Strain rate

            RW_z = (3*RW_Cm*RV_Vwall)/(2*RW_Am);
            // Curvature ratio
            RW_e = 0.5*log(RW_Am/RW_Am0) - (1/12)*RW_z^2 - 0.019*RW_z^4;
            // Natural strain. Approximation to solution for curved wall segment (Lumens 2009)
            RW_dedt = der(RW_e);
            // Strain rate

            Sept_z = (3*Sept_Cm*Sept_Vwall)/(2*Sept_Am);
            // Curvature ratio
            Sept_e = 0.5*log(Sept_Am/Sept_Am0) - (1/12)*Sept_z^2 - 0.019*Sept_z^4;
            // Natural strain. Approximation to solution for curved wall segment (Lumens 2009)
            Sept_dedt = der(Sept_e);
            // Strain rate

            // Fiber stress, active component (applying force-velocity and force-length relation)
            // A linear relation btw ratio of developed force vs. max force
            // and ratio of strain rate vs. max strain rate is assumed.
            // This seems reasonable for the relationship at physiological loads
            // (force 15-100% of peak force). A hyperbolic relationship
            // breaks down above 70% of peak force.
            // Note that max strain rate for this assumption is different from
            // and lower than Vmax estimated when using the hyperbolic Hill equation.
            // ref. Circ Res. 1991 Feb;68(2):588-96. Sarcomere dynamics in cat cardiac trabeculae. de Tombe PP1, ter Keurs HE.
            LW_s_act = LVact*(if (LW_dedt > 0) then (LV_smax_phi*tanh((LW_e - e0)*3)) else (
              if (LW_dedt < LV_dedtmax) then 0 else (LV_smax_phi - LV_smax_phi*(LW_dedt/
              LV_dedtmax))*tanh((LW_e - e0)*3)));

            Sept_s_act = LVact*(if (Sept_dedt >= 0) then (LV_smax_phi*tanh((Sept_e - e0)*3))
               else (if (Sept_dedt < LV_dedtmax) then 0 else (LV_smax_phi - LV_smax_phi*(
              Sept_dedt/LV_dedtmax))*tanh((Sept_e - e0)*3)));

            RW_s_act = RVact*(if (RW_dedt >= 0) then (RV_smax_phi*tanh((RW_e - e0)*3)) else (
              if (RW_dedt < RV_dedtmax) then 0 else (RV_smax_phi - RV_smax_phi*(RW_dedt/
              RV_dedtmax))*tanh((RW_e - e0)*3)));

            // Fiber stress, passive components
            // Elastic stress modeled to be symmetric on both sides of slack length
            // Viscous force modeled to be proportional to strain rate

            LW_s_ela = if (LW_e >= 0) then (LV_k*(exp(LV_a*LW_e) - 1)) else -(LV_k*(exp(
              LV_a*(-LW_e)) - 1));

            LW_s_vis = LW_dedt*LV_visc;

            Sept_s_ela = if (Sept_e >= 0) then (LV_k*(exp(LV_a*Sept_e) - 1)) else -(LV_k*(
              exp(LV_a*(-Sept_e)) - 1));

            Sept_s_vis = Sept_dedt*LV_visc;

            RW_s_ela = if (RW_e >= 0) then (RV_k*(exp(RV_a*RW_e) - 1)) else -(RV_k*(exp(
              RV_a*(-RW_e)) - 1));

            RW_s_vis = RW_dedt*RV_visc;

            // Fiber stress, total (sum of active and passive components)

            LW_s = LW_s_act + LW_s_ela + LW_s_vis;
            Sept_s = Sept_s_act + Sept_s_ela + Sept_s_vis;
            RW_s = RW_s_act + RW_s_ela + RW_s_vis;

            // Wall tension (Approximation, Lumens 2009)
            LW_Tm = (LW_Vwall*LW_s)/(2*LW_Am)*(1 + LW_z^2/3 + LW_z^4/5);
            LW_Tx = LW_Tm*(2*LW_xm*Sept_ym)/(LW_xm^2 + Sept_ym^2);
            LW_Ty = LW_Tm*(-(LW_xm^2) + Sept_ym^2)/(LW_xm^2 + Sept_ym^2);

            Sept_Tm = (Sept_Vwall*Sept_s)/(2*Sept_Am)*(1 + Sept_z^2/3 + Sept_z^4/5);
            Sept_Tx = Sept_Tm*(2*Sept_xm*Sept_ym)/(Sept_xm^2 + Sept_ym^2);
            Sept_Ty = Sept_Tm*(-(Sept_xm^2) + Sept_ym^2)/(Sept_xm^2 + Sept_ym^2);

            RW_Tm = (RV_Vwall*RW_s)/(2*RW_Am)*(1 + RW_z^2/3 + RW_z^4/5);
            RW_Tx = RW_Tm*(2*RW_xm*Sept_ym)/(RW_xm^2 + Sept_ym^2);
            RW_Ty = RW_Tm*(-(RW_xm^2) + Sept_ym^2)/(RW_xm^2 + Sept_ym^2);

            // Axial transmural pressure (in x-direction)
            P_LWtrans = 2*LW_Tx/Sept_ym;
            P_Septtrans = 2*Sept_Tx/Sept_ym;
            P_RWtrans = 2*RW_Tx/Sept_ym;

            // LV pressure
            P_lvw = -P_LWtrans + P_peri;

            // RV pressure

            P_rvw = P_RWtrans + P_peri;

            // Atrial pressures
            // Passive component + active component
            // Linear compliance curve
            P_la = (V_la - V0_la)/C_la + Aact*P_maxla + P_peri;
            P_ra = (V_ra - V0_ra)/C_ra + Aact*P_maxra + P_peri;

            // Vessels pressures

            //  P_ao  = (V_ao-V0_ao)/C_ao;
            //  P_vc  = (V_vc-V0_vc)/C_vc;
            //  P_pa  = (V_pa-V0_pa)/C_pa;
            //  P_pve  = (V_pve-V0_pve)/C_pve;

            // Pericardial volume and pressure
            V_peri = V_lv + V_rv + V_ra + V_la + LV_Vwall + RV_Vwall + V_perifl;
            P_peri = k_peri*(exp((V_peri - V0_peri)*a_peri) - 1);

            connect(HR0.y, HRinner)
              annotation (Line(points={{-87,0},{-60,0}}, color={0,0,127}));
            connect(frequency_input, HRinner)
              annotation (Line(points={{-106,0},{-60,0}}, color={0,0,127}));
            annotation (experiment(
                StopTime=20,
                Interval=0.001,
                Tolerance=1e-07,
                __Dymola_Algorithm="Dassl"));
          end Heart_Olsen_base;

          model Systemic_Olsen
            extends Systemic.partialSystemic;
            Physiolibrary.Types.Volume volume = V_ao + V_vc;
            Physiolibrary.Types.VolumeFlowRate Q_vc = -port_b.q, Q_av = port_a.q;

             parameter Physiolibrary.Types.HydraulicCompliance  C_vc(
                displayUnit="ml/mmHg")=3.0002463033826e-07                  "mL/mmHg,  // Vena cava compliance";

             parameter Physiolibrary.Types.HydraulicCompliance C_ao(displayUnit=
                 "ml/mmHg")=8.1231668664085e-09                               "mL/mmHg,  // Aortic compliance";
          //   Unstressed volumes
             parameter Physiolibrary.Types.Volume V0_ao =   0 "mL,   // Aorta unstressed volume";
             parameter Physiolibrary.Types.Volume V0_vc =   0 "mL,   // Vena cava unstressed volume";
          //   Inertances
             parameter Physiolibrary.Types.HydraulicInertance L_ao(displayUnit=
                  "mmHg.s2/ml")=1333223.87415                               "mmHg*s^2*mL^(-1), // Aorta inertance";
             parameter Physiolibrary.Types.HydraulicInertance L_vc(displayUnit=
                  "mmHg.s2/ml")=1333223.87415                              "mmHg*s^2*mL^(-1), // Vena cava inertance";

          //   Resistances
             parameter Physiolibrary.Types.HydraulicResistance R_vc(displayUnit=
                 "(mmHg.s)/ml")=133322.387415                                 "mmHg*s*mL^(-1), // Vena cava resistance";
          // Vascular resistances
             parameter Physiolibrary.Types.HydraulicResistance SVR(displayUnit=
                  "(mmHg.s)/ml")=160920121.60991                            "mmHg*s*mL^(-1),  // Systemic vascular resistance";

          // Valves

          parameter Physiolibrary.Types.Volume V_aoinit=0.0001                  "mL ,                        // Aorta initial volume";
          parameter Physiolibrary.Types.Volume V_vcinit=0.000123                "mL ,                        // Vena cava initial volume";

          // -----------------------------------------------------------------------------
          //   VARIABLES
          // -----------------------------------------------------------------------------
          //  Pressures
           Physiolibrary.Types.Pressure P_ao = port_a.pressure "  mmHg,   // Aortic pressure";
           Physiolibrary.Types.Pressure P_vc = port_b.pressure "  mmHg,   // Vena cava pressure";
          //  Physiolibrary.Types.Pressure P_pa "  mmHg,   // Pulmonary arterial pressure";
          //  Physiolibrary.Types.Pressure P_pve " mmHg,   // Pulmonary veins pressure";

          //  Physiolibrary.Types.Pressure P_peri " mmHg,   // Pericardial pressure";

          //  Volumes
          //  Physiolibrary.Types.Volume V_lv "  mL,   // LV volume";
          //  Physiolibrary.Types.Volume V_rv "  mL,   // RV volume";
          //  Physiolibrary.Types.Volume V_la "  mL,   // LA volume";
          //  Physiolibrary.Types.Volume V_ra "  mL,   // RA volume";
           Physiolibrary.Types.Volume V_ao "  mL,   // Aortic volume";
           Physiolibrary.Types.Volume V_vc "  mL,   // Vena cava volume";
          //  Physiolibrary.Types.Volume V_pa "  mL,   // Pulmonary artery volume";
          //  Physiolibrary.Types.Volume V_pve " mL,   // Pulmonary veins volume";

          //  Physiolibrary.Types.Volume V_peri " mL,   // Total pericardial volume";

          //  Flows
          //  Physiolibrary.Types.VolumeFlowRate Q_vc "  mL/s,   // Flow from vena cava to RA";
          //  Physiolibrary.Types.VolumeFlowRate Q_tv "  mL/s,   // Flow through tricuspid valve";
          //  Physiolibrary.Types.VolumeFlowRate Q_pva " mL/s,   // Flow through pulmonary valve";
          //  Physiolibrary.Types.VolumeFlowRate Q_pa "  mL/s,   // Flow from PA to pulmonary veins";
          //  Physiolibrary.Types.VolumeFlowRate Q_pve " mL/s,   // Flow from pulmonary veins to LA";
          //  Physiolibrary.Types.VolumeFlowRate Q_mv "  mL/s,   // Flow through mitral valve";
          //  Physiolibrary.Types.VolumeFlowRate Q_av "  mL/s,   // Flow through aortic valve";
           Physiolibrary.Types.VolumeFlowRate Q_ao "  mL/s,   // Flow from aorta to vena cava";

          initial equation
          // -----------------------------------------------------------------------------
          //   INITIAL CONDITIONS
          // -----------------------------------------------------------------------------

          //        Initial Conditions
          //
          //           when(t=t.min) {
          V_ao  = V_aoinit;
          V_vc  = V_vcinit;
          // V_pa  = V_painit;
          // V_pve  = V_pveinit;
          // V_lv  = V_lvinit;
          // V_rv  = V_rvinit;
          // V_la  = V_lainit;
          // V_ra  = V_rainit;

          // Q_tv  = 0;
          // Q_pva  = 0;
          // Q_pa  = 0;
          // Q_vc  = 0;
          // Q_pve  = 0;
          // Q_mv  = 0;
          // Q_av  = 0;
          // Q_ao  = 0;

          // Q_sept   = 0;
          //
          // d_Sept_ym  = 0;
          //
          // Sept_Vm  = Sept_Vm0;
          //
          // Sept_ym  = Sept_ym0;

          // State variables
          //         AVclosed        = 1;
          //         MVclosed        = 0;
          //         PVclosed        = 1;
          //         TVclosed        = 0;
          //
          //           }

          equation

          // -----------------------------------------------------------------------------
          //   SYSTEM OF EQUATIONS
          // -----------------------------------------------------------------------------

          // Ordinary differential equations

          //  // Valve flows
          //   // Tricuspid valve
          // der(Q_tv)  = (P_ra-P_rvw-((Q_tv*abs(Q_tv)/(TVA^2))*rho/2))/L_ra;
          //   // Pulmonary valve
          // der(Q_pva)  = (P_rvw-P_pa-((Q_pva*abs(Q_pva)/(PVA^2))*rho/2))/L_rvot;
          //   // Mitral valve
          // der(Q_mv)  = (P_la-P_lvw-((Q_mv*abs(Q_mv)/(MVA^2))*rho/2))/L_la;
          //   // Aortic valve
          // der(Q_av)  = (P_lvw-P_ao-((Q_av*abs(Q_av)/(AVA^2))*rho/2))/L_lvot;

           // Vessel flows
            // Vena cava
          // der(Q_vc)  =  (P_vc-P_ra-Q_vc*R_vc)/L_vc;
            // Pulmonary artery
          // der(Q_pa)  = (P_pa-P_pve-Q_pa*PVR)/L_pa;
            // Pulmonary veins
          // der(Q_pve)  = (P_pve-P_la-Q_pve*R_pve)/L_pve;
            // Aorta
          der(Q_ao)  =  (P_ao-P_vc-Q_ao*SVR)/L_ao;

           // Conservation of mass equations

          // der(V_vc)  = Q_ao - Q_vc;
          // der(V_ra)  = 0;//!Q_vc - Q_tv;
          // der(V_rv)  = 0;//!Q_tv - Q_pva;
          // der(V_pa)  = Q_pva - Q_pa;
          // der(V_pve)  = Q_pa - Q_pve;
          // der(V_la)  = 0;//!Q_pve - Q_mv;
          // der(V_lv)  =  0;//!Q_mv - Q_av;
          // der(V_ao)  = Q_av - Q_ao;
          der(V_vc)  = Q_ao - Q_vc;
          // der(V_pa)  = Q_pva - Q_pa;
          // der(V_pve) = Q_pa - Q_pve;
          der(V_ao)  = Q_av - Q_ao;

          // Vessels pressures

           P_ao  = (V_ao-V0_ao)/C_ao;
           P_vc  = (V_vc-V0_vc)/C_vc;
          //  P_pa  = (V_pa-V0_pa)/C_pa;
          //  P_pve  = (V_pve-V0_pve)/C_pve;

            annotation (experiment(
                StopTime=20,
                Interval=0.001,
                Tolerance=1e-07,
                __Dymola_Algorithm="Dassl"));
          end Systemic_Olsen;

          model test_olsen
            Heart_Olsen_base heart_Olsen_base(
              HR_stepUp=false,
              UseFrequencyInput=false,
              UseThoracic_PressureInput=false,
              UsePhiInput=false,
              L_vc=133322.387415,
              L_pve=133322.387415)
              annotation (Placement(transformation(extent={{12,-6},{-8,14}})));
            Pulmonary.PulmonaryTriSeg                       pulmonaryTriSeg(
              UsePhi_Input=false,
              deadVolume=0,
              c_pv(
                volume_start(displayUnit="m3") = 65e-6 + settings.V_PV_init,
                ZeroPressureVolume=0,
                Compliance=1.8751539396141e-07,
                useExternalPressureInput=false),
              c_pa(Compliance=4.0503325095665e-08),
              r_pa(useConductanceInput=true, Resistance=6666119.37075),
              R_pa_visc(enable=false),
              R_pv_visc(enable=false),
              proportionalFactor(scalingFactor=0.5, u0=0))
              annotation (Placement(transformation(extent={{10,-56},{-10,-36}})));
            replaceable Systemic.Systemic_TriSeg                       systemic_TriSeg(
              UsePhi_Input=false,
              UseExerciseInput=false,
              _C_Ao=0.65,
              _C_SA=1.65,
              _C_SV=1.4*250,
              _R_Ao=0.01,
              _R_SA=0.965,
              _R_tAo=0.0020,
              _R_tSA=0.05,
              c_sa(volume_start=0.0002),
              c_sv(volume_start=0.001175))
              annotation (Placement(transformation(extent={{-40,40},{36,70}})));
            outer Settings settings(phi0=0) annotation (Placement(
                  transformation(extent={{-100,80},{-80,100}})));
          equation
            connect(pulmonaryTriSeg.port_b, heart_Olsen_base.pv) annotation (
                Line(
                points={{-10,-46},{-28,-46},{-28,-6},{-8,-6}},
                color={0,0,0},
                thickness=1));
            connect(heart_Olsen_base.sa, systemic_TriSeg.port_a) annotation (
                Line(
                points={{-8,14},{-30,14},{-30,16},{-50,16},{-50,50},{-40,50}},
                color={0,0,0},
                thickness=1));
            connect(heart_Olsen_base.sv, systemic_TriSeg.port_b) annotation (
                Line(
                points={{12,14},{36,14},{36,16},{56,16},{56,50},{36,50}},
                color={0,0,0},
                thickness=1));
            connect(heart_Olsen_base.pa, pulmonaryTriSeg.port_a) annotation (
                Line(
                points={{12,-6},{36,-6},{36,-46},{10,-46}},
                color={0,0,0},
                thickness=1));
            annotation (
              Icon(coordinateSystem(preserveAspectRatio=false)),
              Diagram(coordinateSystem(preserveAspectRatio=false)),
              experiment(
                StartTime=1,
                StopTime=400,
                __Dymola_NumberOfIntervals=5000,
                Tolerance=1e-07,
                __Dymola_Algorithm="Cvode"));
          end test_olsen;

          model System_OlsenSIUnits_HeartBase
            extends partialDriving_Olsen;
            parameter Physiolibrary.Types.Pressure p_sa=13332.2387415;
            parameter Physiolibrary.Types.Pressure p_sv=266.64477483;
            parameter Physiolibrary.Types.Pressure p_pa=2666.4477483;
            parameter Physiolibrary.Types.Pressure p_pv=1333.22387415;
            Physiolibrary.Types.VolumeFlowRate q_sa = Q_av;
            Physiolibrary.Types.VolumeFlowRate q_sv = Q_vc;
            Physiolibrary.Types.VolumeFlowRate q_pa = Q_pva;
            Physiolibrary.Types.VolumeFlowRate q_pv = Q_pve;

             parameter Real rho =  1060 " kg/m^3, // Density of blood";
             parameter Physiolibrary.Types.HydraulicCompliance C_ao(displayUnit="ml/mmHg")=
               6.9305689608139e-09                                            "mL/mmHg,  // Aortic compliance";
             parameter Physiolibrary.Types.HydraulicCompliance  C_vc(displayUnit="ml/mmHg")=
               3.0002463033826e-07                                          "mL/mmHg,  // Vena cava compliance";
             parameter Physiolibrary.Types.HydraulicCompliance  C_pa(displayUnit="ml/mmHg")=
               7.2680966699444e-09                                             "mL/mmHg,  // Pulmonary artery compliance";
             parameter Physiolibrary.Types.HydraulicCompliance  C_pve(displayUnit="ml/mmHg")=
               1.1250923637685e-07                                           "mL/mmHg,  // Pulmonary veins compliance";
          //   Unstressed volumes
             parameter Physiolibrary.Types.Volume V0_ao =   0 "mL,   // Aorta unstressed volume";
             parameter Physiolibrary.Types.Volume V0_vc =   0 "mL,   // Vena cava unstressed volume";
             parameter Physiolibrary.Types.Volume V0_pa =   0 "mL,   // Pulmonary artery unstressed volume";
             parameter Physiolibrary.Types.Volume V0_pve =   0 "mL,   // Pulmonary veins unstressed volume";
          //   Inertances
             parameter Physiolibrary.Types.HydraulicInertance L_ao(displayUnit="mmHg.s2/ml")=
               1333223.87415                                                "mmHg*s^2*mL^(-1), // Aorta inertance";
             parameter Physiolibrary.Types.HydraulicInertance L_pa(displayUnit="mmHg.s2/ml")=
               1333223.87415                                                "mmHg*s^2*mL^(-1), // Pulmonary artery inertance";
             parameter Physiolibrary.Types.HydraulicInertance L_vc(displayUnit="mmHg.s2/ml")=
               1333223.87415                                               "mmHg*s^2*mL^(-1), // Vena cava inertance";
             parameter Physiolibrary.Types.HydraulicInertance L_pve(displayUnit="mmHg.s2/ml")=
               1333223.87415                                                "mmHg*s^2*mL^(-1), // Pulmonary veins inertance";

          //   Resistances
             parameter Physiolibrary.Types.HydraulicResistance R_vc(displayUnit="(mmHg.s)/ml")=
               133322.387415                                                  "mmHg*s*mL^(-1), // Vena cava resistance";
             parameter Physiolibrary.Types.HydraulicResistance R_pve(displayUnit="(mmHg.s)/ml")=
               133322.387415                                                   "mmHg*s*mL^(-1), // Pulmonary veins resistance";
          // Vascular resistances
             parameter Physiolibrary.Types.HydraulicResistance SVR(displayUnit="(mmHg.s)/ml")=
               167186273.81841                                              "mmHg*s*mL^(-1),  // Systemic vascular resistance";
             parameter Physiolibrary.Types.HydraulicResistance PVR(displayUnit="(mmHg.s)/ml")=
               80926689.160905                                              "mmHg*s*mL^(-1),  // Pulmonary vascular resistance";

          // Valves

          //   Valve areas
             parameter Physiolibrary.Types.Area AVAopen=0.00035    "cm^2,  // Aortic valve area (when open)";
             parameter Physiolibrary.Types.Area AVAclosed(displayUnit="cm2")=1e-07
                                                                   "cm^2,  // (when closed)";
             parameter Physiolibrary.Types.Area MVAopen(displayUnit="cm2")=0.0004
                                                              "cm^2,   // Mitral valve area (when open)";
             parameter Physiolibrary.Types.Area MVAclosed=1e-07    "cm^2,  // (when closed)";
             parameter Physiolibrary.Types.Area PVAopen=0.00035    "cm^2,  // Pulmonary valve area (when open)";
             parameter Physiolibrary.Types.Area PVAclosed=1e-07       "cm^2,  // (when closed)";
             parameter Physiolibrary.Types.Area TVAopen=0.0004    "cm^2,   // Tricuspid valve area (when open)";
             parameter Physiolibrary.Types.Area TVAclosed=1e-07       "cm^2,  // (when closed)";

          // Chambers
          //   Inertances
          parameter Physiolibrary.Types.HydraulicInertance L_lvot(displayUnit="mmHg.s2/ml")=
               133322.387415                                                                               "mmHg*s^2*mL^(-1),  // LVOT inertance";
          parameter Physiolibrary.Types.HydraulicInertance L_rvot(displayUnit="mmHg.s2/ml")=
               133322.387415                                                                               "mmHg*s^2*mL^(-1),  // RVOT inertance";
          parameter Physiolibrary.Types.HydraulicInertance L_la(displayUnit="mmHg.s2/ml")=
               133322.387415                                                                             "mmHg*s^2*mL^(-1), // Left atrium inertance";
          parameter Physiolibrary.Types.HydraulicInertance L_ra(displayUnit="mmHg.s2/ml")=
               133322.387415                                                                             "mmHg*s^2*mL^(-1), // Right atrium inertance";

          parameter Physiolibrary.Types.HydraulicInertance L_sept(displayUnit="mmHg.s2/ml")=
               33330.59685375                                                 "mmHg*s^2*mL^(-1), // Septal displacement inertance";

          parameter Real Lm_ym =    200 "g/m,   // Junction circle inertial component";
          parameter Real damp_ym =   60 "N*s*m^(-1)*cm^(-1),   // Damping component";

          // LV - active myofiber properties (intercepts of assumed linear force-velocity relationship)
          parameter Modelica.Units.SI.Stress LV_smax(displayUnit="kPa")=107000
                                                                 "kPa, // Maximal active myofiber stress (at zero velocity)";
          parameter Real LV_dedtmax =  -3 "1/s, // Maximal myofiber strain rate (at zero afterload)";

          // LV - passive myofiber properties
          //   For extension above slack length and compression below slack length (assuming symmetric passive properties)
          parameter Physiolibrary.Types.Pressure LV_k(displayUnit="kPa")=4000
                                                                 "kPa,  // Parameters determining shape of compliance curve";
          parameter Real LV_a =   11 "dimensionless,";
          //   Viscosity
          parameter Real LV_visc =   1.5*1000 "kPa*s, // Viscosity (stress per strain rate)";
          // Ref. Chung et al, J Mol Cell Cardiol. 2011 Sep; 51(3): 428–434.
          // They find titin-based viscosity approx 5.8 kPa at stretch rate of 1 s-1 (fig. 2)
          // in mice. A lower value gives more realistic results in this model.

          // RV - active myofiber properties
          parameter Physiolibrary.Types.Pressure RV_smax(displayUnit="kPa")=127000
                                                                 "kPa, // Maximal active myofiber stress";
          parameter Real RV_dedtmax =  -3 "1/s, // Maximal myofiber strain rate";

          // RV - passive myofiber properties
          //   For extension above slack length and compression below slack length (assuming symmetric passive properties)
          parameter Physiolibrary.Types.Pressure RV_k(displayUnit="kPa")=4000
                                                                 "kPa, ";
          parameter Real RV_a =   11 "dimensionless,";
          //   Viscosity
          parameter Real RV_visc =   1.5*1000 "kPa*s, // viscosity (stress per strain rate)";

          //  Force-length relation
          parameter Real e0 =   -0.3 "dimensionless,  // natural fiber strain associated with zero force";
                  // force increases above this number (see formula in code)
          // LV chamber
          parameter Physiolibrary.Types.Volume LV_Vwall=9.37e-05   "cm^3, // Volume of LV wall (including septum)";
          parameter Physiolibrary.Types.Volume  LV_V0=7.05e-05    "cm^3,  // Unstressed volume of LV cavity";

          parameter Physiolibrary.Types.Volume LV_Vm0 =   LV_V0 + (LV_Vwall/2) ",  // Unstressed mid-wall volume of entire LV";
          Physiolibrary.Types.Volume r0_LV =   (LV_Vm0*3/4/PI)^(1/3) ", // Unstressed mid-wall radius of spherical LV";

          // RV chamber
          parameter Physiolibrary.Types.Volume  RV_Vwall=6.77e-05   "cm^3, // Volume of RV wall (ref Katz et al., J Am Coll Cardiol. 1993 May;21(6):1475-81)";
          parameter Physiolibrary.Types.Volume  RV_V0=0.0001066    "cm^3,  // Unstressed volume of RV cavity ";

          // Septum
          parameter Real Sept_ratio =  0.333 "dimensionless,  // Ratio of septal wall volume to LV wall volume";
          parameter Physiolibrary.Types.Volume  Sept_Vwall =  LV_Vwall * Sept_ratio "// Volume of septal wall";
          parameter Physiolibrary.Types.Volume  LW_Vwall =  LV_Vwall - Sept_Vwall "// Volume of left ventricle free wall";
                  // (by definition, RV wall = RV free wall)

          // Spherical caps
              // For reference, unstressed values, a spherical shape of LV + septum is assumed
           Modelica.Units.SI.Height Sept_h0 =   2*Sept_ratio*r0_LV "  // Reference midwall height of spherical cap when ration btw cap area and spherical area is Sept_ratio";
           Real  Sept_ym0 =  (2*Sept_h0*(r0_LV-0.5*Sept_h0))^(1/2) " // Reference septum midwall junction radius";
           Physiolibrary.Types.Volume  Sept_Vm0 =  (PI*Sept_h0^2)/3*(3*r0_LV-Sept_h0) "  // Reference septum midwall cap volume";
           Real  Sept_Am0 =  2*PI*r0_LV*Sept_h0 "    // Reference septum midwall cap area";
           Real  Sept_xm0;
           Real  Sept_Cm0;

           Physiolibrary.Types.Volume  LW_Vm0 =   -LV_V0 - 0.5*LW_Vwall - 0.5*Sept_Vwall + Sept_Vm0
                                                                             " // Reference LV free wall midwall cap volume";
           Real  LW_Am0 =   2*PI*r0_LV*(2*r0_LV-Sept_h0)
                                                        "     // Reference LV free wall midwall cap area";
           Real  LW_xm0;
           Real  LW_Cm0;

           Physiolibrary.Types.Volume  RW_Vm0 =   RV_V0 + 0.5*RV_Vwall + 0.5*Sept_Vwall + Sept_Vm0 "  // Reference RV free wall midwall cap volume";
           Real  RW_h0 "  // Reference RV free wall midwall cap height";
           Real  r0_RW ",   // Reference RV free wall midwall cap radius";

           Real  RW_Am0
                       ",   // Reference RV free wall midwall cap area";
           Real  RW_xm0;
           Real  RW_Cm0;

          // Parameters, continued
          // LA
          parameter Physiolibrary.Types.Volume V0_la=2e-05    "mL, // LA equilibrium volume";
          parameter Physiolibrary.Types.HydraulicCompliance C_la(displayUnit="ml/mmHg")=6.0004926067653e-08
                                                                      "mL/mmHg, // LA compliance";
          parameter Physiolibrary.Types.Pressure P_maxla(displayUnit="mmHg")=799.93432449
                                                              "mmHg, // Force of atrial contraction";

          // RA
          parameter Physiolibrary.Types.Volume V0_ra=2e-05    "mL, // RA equilibrium volume";
          parameter Physiolibrary.Types.HydraulicCompliance C_ra(displayUnit="ml/mmHg")=6.0004926067653e-08
                                                                      "mL/mmHg, // RA compliance";
          parameter Physiolibrary.Types.Pressure P_maxra(displayUnit="mmHg")=533.28954966
                                                              "mmHg, // Force of RA contraction";

          // Pericardium
          parameter Physiolibrary.Types.Volume V0_peri=0.000611  "mL,  // Pericardium equilibrium volume";
          parameter Physiolibrary.Types.Pressure k_peri(displayUnit="mmHg")=133.322387415
                                                             "mmHg,  // Compliance curve constant";
          parameter Real a_peri =  0.017e6 "mL^(-1), // Compliance curve constant";
          parameter Physiolibrary.Types.Volume V_perifl=1e-05   "mL,  // Pericardial fluid volume";

          // Initial conditions
          //
          parameter Physiolibrary.Types.Volume V_lvinit =                LV_V0 ",                        // LV initial volume";
          parameter Physiolibrary.Types.Volume V_rvinit =                RV_V0 ",                        // RV initial volume";
          parameter Physiolibrary.Types.Volume V_aoinit=0.0001                  "mL ,                        // Aorta initial volume";
          parameter Physiolibrary.Types.Volume V_vcinit=0.000315                "mL ,                        // Vena cava initial volume";
          parameter Physiolibrary.Types.Volume V_painit=7e-05                  "mL ,                        // PA initial volume";
          parameter Physiolibrary.Types.Volume V_pveinit=0.00021                 "mL ,                        // PVe initial volume";
          parameter Physiolibrary.Types.Volume V_rainit=7e-05                  "mL ,                        // RA initial volume";
          parameter Physiolibrary.Types.Volume V_lainit=0.00011                 "mL,                        // LA initial volume";

          // -----------------------------------------------------------------------------
          //   VARIABLES
          // -----------------------------------------------------------------------------
          //  Pressures
          Physiolibrary.Types.Pressure P_lvw " mmHg,   // LV pressure at wall";

           Physiolibrary.Types.Pressure P_rvw " mmHg,   // RV pressure at wall";

           Physiolibrary.Types.Pressure P_la "  mmHg,   // LA pressure";
           Physiolibrary.Types.Pressure P_ra "  mmHg,   // RA pressure";

           Physiolibrary.Types.Pressure P_ao "  mmHg,   // Aortic pressure";
           Physiolibrary.Types.Pressure P_vc "  mmHg,   // Vena cava pressure";
           Physiolibrary.Types.Pressure P_pa "  mmHg,   // Pulmonary arterial pressure";
           Physiolibrary.Types.Pressure P_pve " mmHg,   // Pulmonary veins pressure";

           Physiolibrary.Types.Pressure P_peri " mmHg,   // Pericardial pressure";

          //  Volumes
           Physiolibrary.Types.Volume V_lv "  mL,   // LV volume";
           Physiolibrary.Types.Volume V_rv "  mL,   // RV volume";
           Physiolibrary.Types.Volume V_la "  mL,   // LA volume";
           Physiolibrary.Types.Volume V_ra "  mL,   // RA volume";
           Physiolibrary.Types.Volume V_ao "  mL,   // Aortic volume";
           Physiolibrary.Types.Volume V_vc "  mL,   // Vena cava volume";
           Physiolibrary.Types.Volume V_pa "  mL,   // Pulmonary artery volume";
           Physiolibrary.Types.Volume V_pve " mL,   // Pulmonary veins volume";

           Physiolibrary.Types.Volume V_peri " mL,   // Total pericardial volume";

          //  Flows
           Physiolibrary.Types.VolumeFlowRate Q_vc "  mL/s,   // Flow from vena cava to RA";
           Physiolibrary.Types.VolumeFlowRate Q_tv "  mL/s,   // Flow through tricuspid valve";
           Physiolibrary.Types.VolumeFlowRate Q_pva " mL/s,   // Flow through pulmonary valve";
           Physiolibrary.Types.VolumeFlowRate Q_pa "  mL/s,   // Flow from PA to pulmonary veins";
           Physiolibrary.Types.VolumeFlowRate Q_pve " mL/s,   // Flow from pulmonary veins to LA";
           Physiolibrary.Types.VolumeFlowRate Q_mv "  mL/s,   // Flow through mitral valve";
           Physiolibrary.Types.VolumeFlowRate Q_av "  mL/s,   // Flow through aortic valve";
           Physiolibrary.Types.VolumeFlowRate Q_ao "  mL/s,   // Flow from aorta to vena cava";

          // Valve areas
          Physiolibrary.Types.Area AVA "  cm^2,   // Time-dependent aortic valve area";
          Physiolibrary.Types.Area MVA "  cm^2,   // Time-dependent mitral valve area";
          Physiolibrary.Types.Area PVA "  cm^2,   // Time-dependent pulmonary valve area";
          Physiolibrary.Types.Area TVA "  cm^2,   // Time-dependent tricuspid valve area";

          //  Spherical cap variables
          Modelica.Units.SI.Radius Sept_ym "  cm,   // Septum midwall junction radius";

          Physiolibrary.Types.Length Sept_xm "  cm,   // Septum midwall axial distance from origin";
          Physiolibrary.Types.Volume Sept_Vm "  cm^3,   // Septum midwall cap volume";
          Physiolibrary.Types.Area Sept_Am "  cm^2,   // Septum midwall cap area";
          Real Sept_Cm "  cm^-1,    // Septum midwall cap curvature (1/r)";
          Modelica.Units.SI.SurfaceTension Sept_Tm "  N/m,   // Septum midwall tension";
          Modelica.Units.SI.SurfaceTension Sept_Tx "  N/m,   // Septum x-component tension at junction (axial)";
          Modelica.Units.SI.SurfaceTension Sept_Ty "  N/m,   // Septum y-component tension at junction (radial)";

          Physiolibrary.Types.Pressure P_Septtrans "  kPa,   // Septum transmural pressure (signed)";

          Real Sept_e "  dimensionless,  // Myofiber natural strain";
          Modelica.Units.SI.Frequency Sept_dedt "  s^(-1),   // Myofiber strain rate";
          Physiolibrary.Types.Pressure Sept_s_act "  kPa,   // Myofiber active stress";
          Physiolibrary.Types.Pressure Sept_s_ela "  kPa,   // Myofiber passive stress from elasticity";
          Physiolibrary.Types.Pressure Sept_s_vis "  kPa,   // Myofiber passive stress from viscous resistance to motion";
          Physiolibrary.Types.Pressure Sept_s "  kPa,   // Total myofiber stress";
          Real Sept_z "  dimensionless,  // Dimensionless curvature parameter";

          Physiolibrary.Types.Length LW_xm "  cm,   // LV free wall midwall axial distance from origin";
          Physiolibrary.Types.Volume LW_Vm "  cm^3,   // LV free wall midwall cap volume";
          Physiolibrary.Types.Area LW_Am "  cm^2,   // LV free wall midwall cap area";
          Physiolibrary.Types.Area LW_Cm "  cm^-1,    // LV free wall midwall cap curvature (1/r)";
          Modelica.Units.SI.SurfaceTension LW_Tm "  N/m,   // LV midwall tension";
          Modelica.Units.SI.SurfaceTension LW_Tx "  N/m,   // LV x-component tension at junction (axial)";
          Modelica.Units.SI.SurfaceTension LW_Ty "  N/m,   // LV y-component tension at junction (radial)";

          Physiolibrary.Types.Pressure P_LWtrans "  kPa,   // LV free wall transmural pressure (signed)";

          Real LW_e "   dimensionless,  // Myofiber natural strain";
          Modelica.Units.SI.Frequency LW_dedt "  s^(-1),   // Myofiber strain rate";
          Physiolibrary.Types.Pressure  LW_s_act "  kPa,   // Myofiber active stress";
          Physiolibrary.Types.Pressure  LW_s_ela "  kPa,   // Myofiber passive stress from elasticity";
          Physiolibrary.Types.Pressure  LW_s_vis "  kPa,   // Myofiber passive stress from viscous resistance to motion";
          Physiolibrary.Types.Pressure  LW_s "   kPa,   // Total myofiber stress";
          Real LW_z "   dimensionless,  // Dimensionless curvature parameter";

          Physiolibrary.Types.Length RW_xm "  cm,   // RV free wall midwall axial distance from origin";
          Physiolibrary.Types.Volume RW_Vm "  cm^3,   // RV free wall midwall cap volume";
          Physiolibrary.Types.Area RW_Am "  cm^2,   // RV free wall midwall cap area";
          Real RW_Cm "  cm^-1,    // RV free wall midwall cap curvature (1/r)";
          Modelica.Units.SI.SurfaceTension RW_Tm "  N/m,   // RV midwall tension";
          Modelica.Units.SI.SurfaceTension RW_Tx "  N/m,   // RV x-component tension at junction (axial)";
          Modelica.Units.SI.SurfaceTension RW_Ty "  N/m,   // RV y-component tension at junction (radial)";

          Real P_RWtrans "  kPa,   // RV free wall transmural pressure (signed)";

          Real RW_e "   dimensionless,  // Myofiber natural strain";
          Modelica.Units.SI.Frequency RW_dedt "  s^(-1),   // Myofiber strain rate";
          Physiolibrary.Types.Pressure  RW_s_act "  kPa,   // Myofiber active stress";
          Physiolibrary.Types.Pressure  RW_s_ela "  kPa,   // Myofiber passive stress from elasticity";
          Physiolibrary.Types.Pressure  RW_s_vis "  kPa,   // Myofiber passive stress from viscous resistance to motion";
          Physiolibrary.Types.Pressure  RW_s "   kPa,   // Total myofiber stress";
          Real RW_z "   dimensionless,  // Dimensionless curvature parameter";

          Modelica.Units.SI.SurfaceTension Tx_total "  N/m,   // Sum tension at junction circle in x-direction (axial)";
          Modelica.Units.SI.SurfaceTension Ty_total "  N/m,   // Sum tension at junction circle in y-direction (radial)";

          Physiolibrary.Types.VolumeFlowRate Q_sept "  mL/s,   // Flow into septal displacement volume";

          Physiolibrary.Types.Velocity d_Sept_ym "  cm/s;   // Change in junction radius diameter";

          initial equation
          // -----------------------------------------------------------------------------
          //   INITIAL CONDITIONS
          // -----------------------------------------------------------------------------

          //        Initial Conditions
          //
          //           when(t=t.min) {
          V_ao  = V_aoinit;
          V_vc  = V_vcinit;
          V_pa  = V_painit;
          V_pve  = V_pveinit;
          V_lv  = V_lvinit;
          V_rv  = V_rvinit;
          V_la  = V_lainit;
          V_ra  = V_rainit;

          Q_sept   = 0;

          d_Sept_ym  = 0;

          Sept_Vm  = Sept_Vm0;

          Sept_ym  = Sept_ym0;

          // State variables
          //         AVclosed        = 1;
          //         MVclosed        = 0;
          //         PVclosed        = 1;
          //         TVclosed        = 0;
          //
          //           }

          equation
            // Implicit equations, spherical caps
           r0_RW   = (Sept_ym0^2+RW_h0^2)/(2*RW_h0);
           RW_Vm0   = (PI*RW_h0^2)/3*(3*r0_RW-RW_h0);
           RW_Am0   = 2*PI*r0_RW*RW_h0;

           LW_Vm0 = PI/6*LW_xm0*(LW_xm0^2+3*Sept_ym0^2); // Yields LW_xm0
           LW_Cm0 = 2*LW_xm0/(LW_xm0^2+Sept_ym0^2);

           Sept_Vm0 = PI/6*Sept_xm0*(Sept_xm0^2+3*Sept_ym0^2);
           Sept_Cm0 = 2*Sept_xm0/(Sept_xm0^2+Sept_ym0^2);

           RW_Vm0 = PI/6*RW_xm0*(RW_xm0^2+3*Sept_ym0^2);
           RW_Cm0 = 2*RW_xm0/(RW_xm0^2+Sept_ym0^2);

          // -----------------------------------------------------------------------------
          //   SYSTEM OF EQUATIONS
          // -----------------------------------------------------------------------------

          // Ordinary differential equations

           // Valve flows
            // Tricuspid valve
          0  = (P_ra-P_rvw-((Q_tv*abs(Q_tv)/(TVA^2))*rho/2));
            // Pulmonary valve
          0  = (P_rvw-P_pa-((Q_pva*abs(Q_pva)/(PVA^2))*rho/2));
            // Mitral valve
          0 = (P_la-P_lvw-((Q_mv*abs(Q_mv)/(MVA^2))*rho/2));
            // Aortic valve
          0  = (P_lvw-P_ao-((Q_av*abs(Q_av)/(AVA^2))*rho/2));

           // Vessel flows
            // Vena cava
          0  =  (P_vc-P_ra-Q_vc*R_vc)/L_vc;
            // Pulmonary artery
          der(Q_pa)  = (P_pa-P_pve-Q_pa*PVR);
            // Pulmonary veins
          0  = (P_pve-P_la-Q_pve*R_pve);
            // Aorta
          der(Q_ao)  =  (P_ao-P_vc-Q_ao*SVR)/L_ao;

           // Conservation of mass equations

          // der(V_vc)  = Q_ao - Q_vc;
          // der(V_ra)  = 0;//!Q_vc - Q_tv;
          // der(V_rv)  = 0;//!Q_tv - Q_pva;
          // der(V_pa)  = Q_pva - Q_pa;
          // der(V_pve)  = Q_pa - Q_pve;
          // der(V_la)  = 0;//!Q_pve - Q_mv;
          // der(V_lv)  =  0;//!Q_mv - Q_av;
          // der(V_ao)  = Q_av - Q_ao;
          der(V_vc)  = Q_ao - Q_vc;
          der(V_ra)  = Q_vc - Q_tv;
          der(V_rv)  = Q_tv - Q_pva;
          der(V_pa)  = Q_pva - Q_pa;
          der(V_pve) = Q_pa - Q_pve;
          der(V_la)  = Q_pve - Q_mv;
          der(V_lv)  = Q_mv - Q_av;
          der(V_ao)  = Q_av - Q_ao;

          // Change in valve area with state
           AVA  = if (Q_av < 0) then AVAclosed else AVAopen;
           MVA  = if (Q_mv < 0) then MVAclosed else MVAopen;
           PVA  = if (Q_pva < 0) then PVAclosed else PVAopen;
           TVA  = if (Q_tv < 0) then TVAclosed else TVAopen;

          // Spherical caps geometries
           // Displacement flow - interventricular septum
           der(Q_sept) =   -(P_LWtrans+P_Septtrans+P_RWtrans)/L_sept; // Flow acceleration into septal spherical cap

           der(Sept_Vm) =  Q_sept;      // Change in septal midwall volume (positive when curved towards RV)

           LW_Vm  =  - V_lv - 0.5*LW_Vwall - 0.5*Sept_Vwall + Sept_Vm;  // LV free wall spherical cap volume - adjusted according to septal displacement
           RW_Vm   =  V_rv + 0.5*RV_Vwall + 0.5*Sept_Vwall + Sept_Vm;  // RV free wall spherical cap volume - same

          // Geometry changes of septal junction circle

           der(d_Sept_ym) = -(Ty_total+d_Sept_ym*damp_ym)/Lm_ym; // Acceleration in junction radius caused by summed tension forces + damping
           der(Sept_ym) = d_Sept_ym;    // Change in junction radius

          // Solve for xm - cap midwall height (positive in direction of RV)
           LW_Vm   = PI/6*LW_xm*(LW_xm^2+3*Sept_ym^2);      // Given Vm and ym, xm can be found
           RW_Vm   = PI/6*RW_xm*(RW_xm^2+3*Sept_ym^2);
           Sept_Vm   = PI/6*Sept_xm*(Sept_xm^2+3*Sept_ym^2);

          // Calculate Am - cap midwall area
           LW_Am  = PI*(LW_xm^2+Sept_ym^2);
           RW_Am  = PI*(RW_xm^2+Sept_ym^2);
           Sept_Am  = PI*(Sept_xm^2+Sept_ym^2);

          // Calculate Cm - cap midwall curvature (1/r)
           LW_Cm   = 2*LW_xm/(LW_xm^2+Sept_ym^2);
           RW_Cm    = 2*RW_xm/(RW_xm^2+Sept_ym^2);
           Sept_Cm   = 2*Sept_xm/(Sept_xm^2+Sept_ym^2);

          // Tx balance
           Tx_total = LW_Tx + Sept_Tx + RW_Tx;
          // Ty balance
           Ty_total = LW_Ty + Sept_Ty + RW_Ty;

          // Fiber strain
             // Relation btw fiber strain and cavity + wall volume
             // From Lumens et al., 2009, Annals of Biomedical Engineering.
           LW_z  = (3*LW_Cm*LW_Vwall)/(2*LW_Am);    // Curvature ratio
           LW_e  = 0.5*log(LW_Am/LW_Am0)-(1/12)*LW_z^2-0.019*LW_z^4;   // Natural strain. Approximation to solution for curved wall segment (Lumens 2009)
           LW_dedt  = der(LW_e);      // Strain rate

           RW_z  = (3*RW_Cm*RV_Vwall)/(2*RW_Am);    // Curvature ratio
           RW_e  = 0.5*log(RW_Am/RW_Am0)-(1/12)*RW_z^2-0.019*RW_z^4;   // Natural strain. Approximation to solution for curved wall segment (Lumens 2009)
           RW_dedt  = der(RW_e);      // Strain rate

           Sept_z  = (3*Sept_Cm*Sept_Vwall)/(2*Sept_Am);    // Curvature ratio
           Sept_e  = 0.5*log(Sept_Am/Sept_Am0)-(1/12)*Sept_z^2-0.019*Sept_z^4;   // Natural strain. Approximation to solution for curved wall segment (Lumens 2009)
           Sept_dedt = der(Sept_e);      // Strain rate

          // Fiber stress, active component (applying force-velocity and force-length relation)
                // A linear relation btw ratio of developed force vs. max force
                // and ratio of strain rate vs. max strain rate is assumed.
                // This seems reasonable for the relationship at physiological loads
                // (force 15-100% of peak force). A hyperbolic relationship
                // breaks down above 70% of peak force.
                // Note that max strain rate for this assumption is different from
                // and lower than Vmax estimated when using the hyperbolic Hill equation.
                // ref. Circ Res. 1991 Feb;68(2):588-96. Sarcomere dynamics in cat cardiac trabeculae. de Tombe PP1, ter Keurs HE.
           LW_s_act = LVact * (if (LW_dedt > 0) then (LV_smax*tanh((LW_e-e0)*3)) else (if (LW_dedt < LV_dedtmax) then  0
                                  else
              (LV_smax-LV_smax*(LW_dedt/LV_dedtmax))*tanh((LW_e-e0)*3)));

           Sept_s_act = LVact *
              (if (Sept_dedt >= 0) then (LV_smax*tanh((Sept_e-e0)*3)) else (if (Sept_dedt < LV_dedtmax) then 0 else
              (LV_smax-LV_smax*(Sept_dedt/LV_dedtmax))*tanh((Sept_e-e0)*3)));

           RW_s_act = RVact *
              (if (RW_dedt >= 0) then (RV_smax*tanh((RW_e-e0)*3)) else (if (RW_dedt < RV_dedtmax) then 0 else
              (RV_smax-RV_smax*(RW_dedt/RV_dedtmax))*tanh((RW_e-e0)*3)));

          // Fiber stress, passive components
           // Elastic stress modeled to be symmetric on both sides of slack length
           // Viscous force modeled to be proportional to strain rate

           LW_s_ela = if (LW_e >= 0) then (LV_k*(exp(LV_a*LW_e)-1))
              else -(LV_k*(exp(LV_a*(-LW_e))-1));

           LW_s_vis = LW_dedt * LV_visc;

           Sept_s_ela = if (Sept_e >= 0) then (LV_k*(exp(LV_a*Sept_e)-1))
              else -(LV_k*(exp(LV_a*(-Sept_e))-1));

           Sept_s_vis = Sept_dedt * LV_visc;

           RW_s_ela = if (RW_e >= 0) then (RV_k*(exp(RV_a*RW_e)-1))
              else -(RV_k*(exp(RV_a*(-RW_e))-1));

           RW_s_vis = RW_dedt * RV_visc;

          // Fiber stress, total (sum of active and passive components)

           LW_s  = LW_s_act + LW_s_ela + LW_s_vis;
           Sept_s  = Sept_s_act + Sept_s_ela + Sept_s_vis;
           RW_s  = RW_s_act + RW_s_ela + RW_s_vis;

          // Wall tension (Approximation, Lumens 2009)
           LW_Tm  = (LW_Vwall*LW_s)/(2*LW_Am)*(1+LW_z^2/3+LW_z^4/5);
           LW_Tx  = LW_Tm * (2*LW_xm*Sept_ym)/(LW_xm^2+Sept_ym^2);
           LW_Ty  = LW_Tm * (-(LW_xm^2)+Sept_ym^2)/(LW_xm^2+Sept_ym^2);

           Sept_Tm  = (Sept_Vwall*Sept_s)/(2*Sept_Am)*(1+Sept_z^2/3+Sept_z^4/5);
           Sept_Tx  = Sept_Tm * (2*Sept_xm*Sept_ym)/(Sept_xm^2+Sept_ym^2);
           Sept_Ty  = Sept_Tm * (-(Sept_xm^2)+Sept_ym^2)/(Sept_xm^2+Sept_ym^2);

           RW_Tm  = (RV_Vwall*RW_s)/(2*RW_Am)*(1+RW_z^2/3+RW_z^4/5);
           RW_Tx  = RW_Tm * (2*RW_xm*Sept_ym)/(RW_xm^2+Sept_ym^2);
           RW_Ty  = RW_Tm * (-(RW_xm^2)+Sept_ym^2)/(RW_xm^2+Sept_ym^2);

          // Axial transmural pressure (in x-direction)
           P_LWtrans = 2*LW_Tx/Sept_ym;
           P_Septtrans = 2*Sept_Tx/Sept_ym;
           P_RWtrans = 2*RW_Tx/Sept_ym;

          // LV pressure
           P_lvw  = -P_LWtrans + P_peri;

          // RV pressure

           P_rvw  = P_RWtrans + P_peri;

          // Atrial pressures
             // Passive component + active component
             // Linear compliance curve
           P_la  = (V_la-V0_la)/C_la + Aact*P_maxla + P_peri;
           P_ra  = (V_ra-V0_ra)/C_ra + Aact*P_maxra + P_peri;

          // Vessels pressures

          //  P_ao  = (V_ao-V0_ao)/C_ao;
          //  P_vc  = (V_vc-V0_vc)/C_vc;
          //  P_pa  = (V_pa-V0_pa)/C_pa;
          //  P_pve  = (V_pve-V0_pve)/C_pve;

           P_ao  = p_sa;
           P_vc  = p_sv;
           P_pa  = p_pa;
           P_pve  = p_pv;

          // Pericardial volume and pressure
           V_peri  = V_lv+V_rv+V_ra+V_la+LV_Vwall+RV_Vwall+V_perifl;
           P_peri  = k_peri*(exp((V_peri-V0_peri)*a_peri)-1);

            annotation (experiment(
                StopTime=140,
                Interval=0.0001,
                Tolerance=1e-09,
                __Dymola_Algorithm="Dassl"));
          end System_OlsenSIUnits_HeartBase;

          model System_OlsenSIUnits_NoL
            extends partialDriving_Olsen;
             parameter Real rho =  1060 " kg/m^3, // Density of blood";
             parameter Physiolibrary.Types.HydraulicCompliance C_ao(displayUnit="ml/mmHg")=
               6.9305689608139e-09                                            "mL/mmHg,  // Aortic compliance";
             parameter Physiolibrary.Types.HydraulicCompliance  C_vc(displayUnit="ml/mmHg")=
               3.0002463033826e-07                                          "mL/mmHg,  // Vena cava compliance";
             parameter Physiolibrary.Types.HydraulicCompliance  C_pa(displayUnit="ml/mmHg")=
               7.2680966699444e-09                                             "mL/mmHg,  // Pulmonary artery compliance";
             parameter Physiolibrary.Types.HydraulicCompliance  C_pve(displayUnit="ml/mmHg")=
               1.1250923637685e-07                                           "mL/mmHg,  // Pulmonary veins compliance";
          //   Unstressed volumes
             parameter Physiolibrary.Types.Volume V0_ao =   0 "mL,   // Aorta unstressed volume";
             parameter Physiolibrary.Types.Volume V0_vc =   0 "mL,   // Vena cava unstressed volume";
             parameter Physiolibrary.Types.Volume V0_pa =   0 "mL,   // Pulmonary artery unstressed volume";
             parameter Physiolibrary.Types.Volume V0_pve =   0 "mL,   // Pulmonary veins unstressed volume";
          //   Inertances
             parameter Physiolibrary.Types.HydraulicInertance L_ao(displayUnit="mmHg.s2/ml")=
               1333223.87415                                                "mmHg*s^2*mL^(-1), // Aorta inertance";
             parameter Physiolibrary.Types.HydraulicInertance L_pa(displayUnit="mmHg.s2/ml")=
               1333223.87415                                                "mmHg*s^2*mL^(-1), // Pulmonary artery inertance";
             parameter Physiolibrary.Types.HydraulicInertance L_vc(displayUnit="mmHg.s2/ml")=
               1333223.87415                                               "mmHg*s^2*mL^(-1), // Vena cava inertance";
             parameter Physiolibrary.Types.HydraulicInertance L_pve(displayUnit="mmHg.s2/ml")=
               1333223.87415                                                "mmHg*s^2*mL^(-1), // Pulmonary veins inertance";

          //   Resistances
             parameter Physiolibrary.Types.HydraulicResistance R_vc(displayUnit="(mmHg.s)/ml")=
               133322.387415                                                  "mmHg*s*mL^(-1), // Vena cava resistance";
             parameter Physiolibrary.Types.HydraulicResistance R_pve(displayUnit="(mmHg.s)/ml")=
               133322.387415                                                   "mmHg*s*mL^(-1), // Pulmonary veins resistance";
          // Vascular resistances
             parameter Physiolibrary.Types.HydraulicResistance SVR(displayUnit="(mmHg.s)/ml")=
               167186273.81841                                              "mmHg*s*mL^(-1),  // Systemic vascular resistance";
             parameter Physiolibrary.Types.HydraulicResistance PVR(displayUnit="(mmHg.s)/ml")=
               80926689.160905                                              "mmHg*s*mL^(-1),  // Pulmonary vascular resistance";

          // Valves

          //   Valve areas
             parameter Physiolibrary.Types.Area AVAopen=0.00035    "cm^2,  // Aortic valve area (when open)";
             parameter Physiolibrary.Types.Area AVAclosed(displayUnit="cm2")=1e-07
                                                                   "cm^2,  // (when closed)";
             parameter Physiolibrary.Types.Area MVAopen(displayUnit="cm2")=0.0004
                                                              "cm^2,   // Mitral valve area (when open)";
             parameter Physiolibrary.Types.Area MVAclosed=1e-07    "cm^2,  // (when closed)";
             parameter Physiolibrary.Types.Area PVAopen=0.00035    "cm^2,  // Pulmonary valve area (when open)";
             parameter Physiolibrary.Types.Area PVAclosed=1e-07       "cm^2,  // (when closed)";
             parameter Physiolibrary.Types.Area TVAopen=0.0004    "cm^2,   // Tricuspid valve area (when open)";
             parameter Physiolibrary.Types.Area TVAclosed=1e-07       "cm^2,  // (when closed)";

          // Chambers
          //   Inertances
          parameter Physiolibrary.Types.HydraulicInertance L_lvot(displayUnit="mmHg.s2/ml")=
               133322.387415                                                                               "mmHg*s^2*mL^(-1),  // LVOT inertance";
          parameter Physiolibrary.Types.HydraulicInertance L_rvot(displayUnit="mmHg.s2/ml")=
               133322.387415                                                                               "mmHg*s^2*mL^(-1),  // RVOT inertance";
          parameter Physiolibrary.Types.HydraulicInertance L_la(displayUnit="mmHg.s2/ml")=
               133322.387415                                                                             "mmHg*s^2*mL^(-1), // Left atrium inertance";
          parameter Physiolibrary.Types.HydraulicInertance L_ra(displayUnit="mmHg.s2/ml")=
               133322.387415                                                                             "mmHg*s^2*mL^(-1), // Right atrium inertance";

          parameter Physiolibrary.Types.HydraulicInertance L_sept(displayUnit="mmHg.s2/ml")=
               33330.59685375                                                 "mmHg*s^2*mL^(-1), // Septal displacement inertance";

          parameter Real Lm_ym =    200 "g/m,   // Junction circle inertial component";
          parameter Real damp_ym =   60 "N*s*m^(-1)*cm^(-1),   // Damping component";

          // LV - active myofiber properties (intercepts of assumed linear force-velocity relationship)
          parameter Modelica.Units.SI.Stress LV_smax(displayUnit="kPa")=107000
                                                                 "kPa, // Maximal active myofiber stress (at zero velocity)";
          parameter Real LV_dedtmax =  -3 "1/s, // Maximal myofiber strain rate (at zero afterload)";

          // LV - passive myofiber properties
          //   For extension above slack length and compression below slack length (assuming symmetric passive properties)
          parameter Physiolibrary.Types.Pressure LV_k(displayUnit="kPa")=4000
                                                                 "kPa,  // Parameters determining shape of compliance curve";
          parameter Real LV_a =   11 "dimensionless,";
          //   Viscosity
          parameter Real LV_visc =   1.5*1000 "kPa*s, // Viscosity (stress per strain rate)";
          // Ref. Chung et al, J Mol Cell Cardiol. 2011 Sep; 51(3): 428–434.
          // They find titin-based viscosity approx 5.8 kPa at stretch rate of 1 s-1 (fig. 2)
          // in mice. A lower value gives more realistic results in this model.

          // RV - active myofiber properties
          parameter Physiolibrary.Types.Pressure RV_smax(displayUnit="kPa")=127000
                                                                 "kPa, // Maximal active myofiber stress";
          parameter Real RV_dedtmax =  -3 "1/s, // Maximal myofiber strain rate";

          // RV - passive myofiber properties
          //   For extension above slack length and compression below slack length (assuming symmetric passive properties)
          parameter Physiolibrary.Types.Pressure RV_k(displayUnit="kPa")=4000
                                                                 "kPa, ";
          parameter Real RV_a =   11 "dimensionless,";
          //   Viscosity
          parameter Real RV_visc =   1.5*1000 "kPa*s, // viscosity (stress per strain rate)";

          //  Force-length relation
          parameter Real e0 =   -0.3 "dimensionless,  // natural fiber strain associated with zero force";
                  // force increases above this number (see formula in code)
          // LV chamber
          parameter Physiolibrary.Types.Volume LV_Vwall=9.37e-05   "cm^3, // Volume of LV wall (including septum)";
          parameter Physiolibrary.Types.Volume  LV_V0=7.05e-05    "cm^3,  // Unstressed volume of LV cavity";

          parameter Physiolibrary.Types.Volume LV_Vm0 =   LV_V0 + (LV_Vwall/2) ",  // Unstressed mid-wall volume of entire LV";
          Physiolibrary.Types.Volume r0_LV =   (LV_Vm0*3/4/PI)^(1/3) ", // Unstressed mid-wall radius of spherical LV";

          // RV chamber
          parameter Physiolibrary.Types.Volume  RV_Vwall=6.77e-05   "cm^3, // Volume of RV wall (ref Katz et al., J Am Coll Cardiol. 1993 May;21(6):1475-81)";
          parameter Physiolibrary.Types.Volume  RV_V0=0.0001066    "cm^3,  // Unstressed volume of RV cavity ";

          // Septum
          parameter Real Sept_ratio =  0.333 "dimensionless,  // Ratio of septal wall volume to LV wall volume";
          parameter Physiolibrary.Types.Volume  Sept_Vwall =  LV_Vwall * Sept_ratio "// Volume of septal wall";
          parameter Physiolibrary.Types.Volume  LW_Vwall =  LV_Vwall - Sept_Vwall "// Volume of left ventricle free wall";
                  // (by definition, RV wall = RV free wall)

          // Spherical caps
              // For reference, unstressed values, a spherical shape of LV + septum is assumed
           Modelica.Units.SI.Height Sept_h0 =   2*Sept_ratio*r0_LV "  // Reference midwall height of spherical cap when ration btw cap area and spherical area is Sept_ratio";
           Real  Sept_ym0 =  (2*Sept_h0*(r0_LV-0.5*Sept_h0))^(1/2) " // Reference septum midwall junction radius";
           Physiolibrary.Types.Volume  Sept_Vm0 =  (PI*Sept_h0^2)/3*(3*r0_LV-Sept_h0) "  // Reference septum midwall cap volume";
           Real  Sept_Am0 =  2*PI*r0_LV*Sept_h0 "    // Reference septum midwall cap area";
           Real  Sept_xm0;
           Real  Sept_Cm0;

           Physiolibrary.Types.Volume  LW_Vm0 =   -LV_V0 - 0.5*LW_Vwall - 0.5*Sept_Vwall + Sept_Vm0
                                                                             " // Reference LV free wall midwall cap volume";
           Real  LW_Am0 =   2*PI*r0_LV*(2*r0_LV-Sept_h0)
                                                        "     // Reference LV free wall midwall cap area";
           Real  LW_xm0;
           Real  LW_Cm0;

           Physiolibrary.Types.Volume  RW_Vm0 =   RV_V0 + 0.5*RV_Vwall + 0.5*Sept_Vwall + Sept_Vm0 "  // Reference RV free wall midwall cap volume";
           Real  RW_h0 "  // Reference RV free wall midwall cap height";
           Real  r0_RW ",   // Reference RV free wall midwall cap radius";

           Real  RW_Am0
                       ",   // Reference RV free wall midwall cap area";
           Real  RW_xm0;
           Real  RW_Cm0;

          // Parameters, continued
          // LA
          parameter Physiolibrary.Types.Volume V0_la=2e-05    "mL, // LA equilibrium volume";
          parameter Physiolibrary.Types.HydraulicCompliance C_la(displayUnit="ml/mmHg")=6.0004926067653e-08
                                                                      "mL/mmHg, // LA compliance";
          parameter Physiolibrary.Types.Pressure P_maxla(displayUnit="mmHg")=799.93432449
                                                              "mmHg, // Force of atrial contraction";

          // RA
          parameter Physiolibrary.Types.Volume V0_ra=2e-05    "mL, // RA equilibrium volume";
          parameter Physiolibrary.Types.HydraulicCompliance C_ra(displayUnit="ml/mmHg")=6.0004926067653e-08
                                                                      "mL/mmHg, // RA compliance";
          parameter Physiolibrary.Types.Pressure P_maxra(displayUnit="mmHg")=533.28954966
                                                              "mmHg, // Force of RA contraction";

          // Pericardium
          parameter Physiolibrary.Types.Volume V0_peri=0.000611  "mL,  // Pericardium equilibrium volume";
          parameter Physiolibrary.Types.Pressure k_peri(displayUnit="mmHg")=133.322387415
                                                             "mmHg,  // Compliance curve constant";
          parameter Real a_peri =  0.017e6 "mL^(-1), // Compliance curve constant";
          parameter Physiolibrary.Types.Volume V_perifl=1e-05   "mL,  // Pericardial fluid volume";

          // Initial conditions
          //
          parameter Physiolibrary.Types.Volume V_lvinit =                LV_V0 ",                        // LV initial volume";
          parameter Physiolibrary.Types.Volume V_rvinit =                RV_V0 ",                        // RV initial volume";
          parameter Physiolibrary.Types.Volume V_aoinit=0.0001                  "mL ,                        // Aorta initial volume";
          parameter Physiolibrary.Types.Volume V_vcinit=0.000315                "mL ,                        // Vena cava initial volume";
          parameter Physiolibrary.Types.Volume V_painit=7e-05                  "mL ,                        // PA initial volume";
          parameter Physiolibrary.Types.Volume V_pveinit=0.00021                 "mL ,                        // PVe initial volume";
          parameter Physiolibrary.Types.Volume V_rainit=7e-05                  "mL ,                        // RA initial volume";
          parameter Physiolibrary.Types.Volume V_lainit=0.00011                 "mL,                        // LA initial volume";

          // -----------------------------------------------------------------------------
          //   VARIABLES
          // -----------------------------------------------------------------------------
          //  Pressures
          Physiolibrary.Types.Pressure P_lvw " mmHg,   // LV pressure at wall";

           Physiolibrary.Types.Pressure P_rvw " mmHg,   // RV pressure at wall";

           Physiolibrary.Types.Pressure P_la "  mmHg,   // LA pressure";
           Physiolibrary.Types.Pressure P_ra "  mmHg,   // RA pressure";

           Physiolibrary.Types.Pressure P_ao "  mmHg,   // Aortic pressure";
           Physiolibrary.Types.Pressure P_vc "  mmHg,   // Vena cava pressure";
           Physiolibrary.Types.Pressure P_pa "  mmHg,   // Pulmonary arterial pressure";
           Physiolibrary.Types.Pressure P_pve " mmHg,   // Pulmonary veins pressure";

           Physiolibrary.Types.Pressure P_peri " mmHg,   // Pericardial pressure";

          //  Volumes
           Physiolibrary.Types.Volume V_lv "  mL,   // LV volume";
           Physiolibrary.Types.Volume V_rv "  mL,   // RV volume";
           Physiolibrary.Types.Volume V_la "  mL,   // LA volume";
           Physiolibrary.Types.Volume V_ra "  mL,   // RA volume";
           Physiolibrary.Types.Volume V_ao "  mL,   // Aortic volume";
           Physiolibrary.Types.Volume V_vc "  mL,   // Vena cava volume";
           Physiolibrary.Types.Volume V_pa "  mL,   // Pulmonary artery volume";
           Physiolibrary.Types.Volume V_pve " mL,   // Pulmonary veins volume";

           Physiolibrary.Types.Volume V_peri " mL,   // Total pericardial volume";

          //  Flows
           Physiolibrary.Types.VolumeFlowRate Q_vc "  mL/s,   // Flow from vena cava to RA";
           Physiolibrary.Types.VolumeFlowRate Q_tv "  mL/s,   // Flow through tricuspid valve";
           Physiolibrary.Types.VolumeFlowRate Q_pva " mL/s,   // Flow through pulmonary valve";
           Physiolibrary.Types.VolumeFlowRate Q_pa "  mL/s,   // Flow from PA to pulmonary veins";
           Physiolibrary.Types.VolumeFlowRate Q_pve " mL/s,   // Flow from pulmonary veins to LA";
           Physiolibrary.Types.VolumeFlowRate Q_mv "  mL/s,   // Flow through mitral valve";
           Physiolibrary.Types.VolumeFlowRate Q_av "  mL/s,   // Flow through aortic valve";
           Physiolibrary.Types.VolumeFlowRate Q_ao "  mL/s,   // Flow from aorta to vena cava";

          // Valve areas
          Physiolibrary.Types.Area AVA "  cm^2,   // Time-dependent aortic valve area";
          Physiolibrary.Types.Area MVA "  cm^2,   // Time-dependent mitral valve area";
          Physiolibrary.Types.Area PVA "  cm^2,   // Time-dependent pulmonary valve area";
          Physiolibrary.Types.Area TVA "  cm^2,   // Time-dependent tricuspid valve area";

          //  Spherical cap variables
          Modelica.Units.SI.Radius Sept_ym "  cm,   // Septum midwall junction radius";

          Physiolibrary.Types.Length Sept_xm "  cm,   // Septum midwall axial distance from origin";
          Physiolibrary.Types.Volume Sept_Vm "  cm^3,   // Septum midwall cap volume";
          Physiolibrary.Types.Area Sept_Am "  cm^2,   // Septum midwall cap area";
          Real Sept_Cm "  cm^-1,    // Septum midwall cap curvature (1/r)";
          Modelica.Units.SI.SurfaceTension Sept_Tm "  N/m,   // Septum midwall tension";
          Modelica.Units.SI.SurfaceTension Sept_Tx "  N/m,   // Septum x-component tension at junction (axial)";
          Modelica.Units.SI.SurfaceTension Sept_Ty "  N/m,   // Septum y-component tension at junction (radial)";

          Physiolibrary.Types.Pressure P_Septtrans "  kPa,   // Septum transmural pressure (signed)";

          Real Sept_e "  dimensionless,  // Myofiber natural strain";
          Modelica.Units.SI.Frequency Sept_dedt "  s^(-1),   // Myofiber strain rate";
          Physiolibrary.Types.Pressure Sept_s_act "  kPa,   // Myofiber active stress";
          Physiolibrary.Types.Pressure Sept_s_ela "  kPa,   // Myofiber passive stress from elasticity";
          Physiolibrary.Types.Pressure Sept_s_vis "  kPa,   // Myofiber passive stress from viscous resistance to motion";
          Physiolibrary.Types.Pressure Sept_s "  kPa,   // Total myofiber stress";
          Real Sept_z "  dimensionless,  // Dimensionless curvature parameter";

          Physiolibrary.Types.Length LW_xm "  cm,   // LV free wall midwall axial distance from origin";
          Physiolibrary.Types.Volume LW_Vm "  cm^3,   // LV free wall midwall cap volume";
          Physiolibrary.Types.Area LW_Am "  cm^2,   // LV free wall midwall cap area";
          Physiolibrary.Types.Area LW_Cm "  cm^-1,    // LV free wall midwall cap curvature (1/r)";
          Modelica.Units.SI.SurfaceTension LW_Tm "  N/m,   // LV midwall tension";
          Modelica.Units.SI.SurfaceTension LW_Tx "  N/m,   // LV x-component tension at junction (axial)";
          Modelica.Units.SI.SurfaceTension LW_Ty "  N/m,   // LV y-component tension at junction (radial)";

          Physiolibrary.Types.Pressure P_LWtrans "  kPa,   // LV free wall transmural pressure (signed)";

          Real LW_e "   dimensionless,  // Myofiber natural strain";
          Modelica.Units.SI.Frequency LW_dedt "  s^(-1),   // Myofiber strain rate";
          Physiolibrary.Types.Pressure  LW_s_act "  kPa,   // Myofiber active stress";
          Physiolibrary.Types.Pressure  LW_s_ela "  kPa,   // Myofiber passive stress from elasticity";
          Physiolibrary.Types.Pressure  LW_s_vis "  kPa,   // Myofiber passive stress from viscous resistance to motion";
          Physiolibrary.Types.Pressure  LW_s "   kPa,   // Total myofiber stress";
          Real LW_z "   dimensionless,  // Dimensionless curvature parameter";

          Physiolibrary.Types.Length RW_xm "  cm,   // RV free wall midwall axial distance from origin";
          Physiolibrary.Types.Volume RW_Vm "  cm^3,   // RV free wall midwall cap volume";
          Physiolibrary.Types.Area RW_Am "  cm^2,   // RV free wall midwall cap area";
          Real RW_Cm "  cm^-1,    // RV free wall midwall cap curvature (1/r)";
          Modelica.Units.SI.SurfaceTension RW_Tm "  N/m,   // RV midwall tension";
          Modelica.Units.SI.SurfaceTension RW_Tx "  N/m,   // RV x-component tension at junction (axial)";
          Modelica.Units.SI.SurfaceTension RW_Ty "  N/m,   // RV y-component tension at junction (radial)";

          Real P_RWtrans "  kPa,   // RV free wall transmural pressure (signed)";

          Real RW_e "   dimensionless,  // Myofiber natural strain";
          Modelica.Units.SI.Frequency RW_dedt "  s^(-1),   // Myofiber strain rate";
          Physiolibrary.Types.Pressure  RW_s_act "  kPa,   // Myofiber active stress";
          Physiolibrary.Types.Pressure  RW_s_ela "  kPa,   // Myofiber passive stress from elasticity";
          Physiolibrary.Types.Pressure  RW_s_vis "  kPa,   // Myofiber passive stress from viscous resistance to motion";
          Physiolibrary.Types.Pressure  RW_s "   kPa,   // Total myofiber stress";
          Real RW_z "   dimensionless,  // Dimensionless curvature parameter";

          Modelica.Units.SI.SurfaceTension Tx_total "  N/m,   // Sum tension at junction circle in x-direction (axial)";
          Modelica.Units.SI.SurfaceTension Ty_total "  N/m,   // Sum tension at junction circle in y-direction (radial)";

          Physiolibrary.Types.VolumeFlowRate Q_sept "  mL/s,   // Flow into septal displacement volume";

          Physiolibrary.Types.Velocity d_Sept_ym "  cm/s;   // Change in junction radius diameter";

          initial equation
          // -----------------------------------------------------------------------------
          //   INITIAL CONDITIONS
          // -----------------------------------------------------------------------------

          //        Initial Conditions
          //
          //           when(t=t.min) {
          V_ao  = V_aoinit;
          V_vc  = V_vcinit;
          V_pa  = V_painit;
          V_pve  = V_pveinit;
          V_lv  = V_lvinit;
          V_rv  = V_rvinit;
          V_la  = V_lainit;
          V_ra  = V_rainit;

          Q_sept   = 0;

          d_Sept_ym  = 0;

          Sept_Vm  = Sept_Vm0;

          Sept_ym  = Sept_ym0;

          // State variables
          //         AVclosed        = 1;
          //         MVclosed        = 0;
          //         PVclosed        = 1;
          //         TVclosed        = 0;
          //
          //           }

          equation
            // Implicit equations, spherical caps
           r0_RW   = (Sept_ym0^2+RW_h0^2)/(2*RW_h0);
           RW_Vm0   = (PI*RW_h0^2)/3*(3*r0_RW-RW_h0);
           RW_Am0   = 2*PI*r0_RW*RW_h0;

           LW_Vm0 = PI/6*LW_xm0*(LW_xm0^2+3*Sept_ym0^2); // Yields LW_xm0
           LW_Cm0 = 2*LW_xm0/(LW_xm0^2+Sept_ym0^2);

           Sept_Vm0 = PI/6*Sept_xm0*(Sept_xm0^2+3*Sept_ym0^2);
           Sept_Cm0 = 2*Sept_xm0/(Sept_xm0^2+Sept_ym0^2);

           RW_Vm0 = PI/6*RW_xm0*(RW_xm0^2+3*Sept_ym0^2);
           RW_Cm0 = 2*RW_xm0/(RW_xm0^2+Sept_ym0^2);

          // -----------------------------------------------------------------------------
          //   SYSTEM OF EQUATIONS
          // -----------------------------------------------------------------------------

          // Ordinary differential equations

           // Valve flows
            // Tricuspid valve
          0  = (P_ra-P_rvw-((Q_tv*abs(Q_tv)/(TVA^2))*rho/2));
            // Pulmonary valve
          0  = (P_rvw-P_pa-((Q_pva*abs(Q_pva)/(PVA^2))*rho/2));
            // Mitral valve
          0 = (P_la-P_lvw-((Q_mv*abs(Q_mv)/(MVA^2))*rho/2));
            // Aortic valve
          0  = (P_lvw-P_ao-((Q_av*abs(Q_av)/(AVA^2))*rho/2));

           // Vessel flows
            // Vena cava
          0  =  (P_vc-P_ra-Q_vc*R_vc)/L_vc;
            // Pulmonary artery
          der(Q_pa)  = (P_pa-P_pve-Q_pa*PVR);
            // Pulmonary veins
          0  = (P_pve-P_la-Q_pve*R_pve);
            // Aorta
          der(Q_ao)  =  (P_ao-P_vc-Q_ao*SVR)/L_ao;

           // Conservation of mass equations

          // der(V_vc)  = Q_ao - Q_vc;
          // der(V_ra)  = 0;//!Q_vc - Q_tv;
          // der(V_rv)  = 0;//!Q_tv - Q_pva;
          // der(V_pa)  = Q_pva - Q_pa;
          // der(V_pve)  = Q_pa - Q_pve;
          // der(V_la)  = 0;//!Q_pve - Q_mv;
          // der(V_lv)  =  0;//!Q_mv - Q_av;
          // der(V_ao)  = Q_av - Q_ao;
          der(V_vc)  = Q_ao - Q_vc;
          der(V_ra)  = Q_vc - Q_tv;
          der(V_rv)  = Q_tv - Q_pva;
          der(V_pa)  = Q_pva - Q_pa;
          der(V_pve) = Q_pa - Q_pve;
          der(V_la)  = Q_pve - Q_mv;
          der(V_lv)  = Q_mv - Q_av;
          der(V_ao)  = Q_av - Q_ao;

          // Change in valve area with state
           AVA  = if (Q_av < 0) then AVAclosed else AVAopen;
           MVA  = if (Q_mv < 0) then MVAclosed else MVAopen;
           PVA  = if (Q_pva < 0) then PVAclosed else PVAopen;
           TVA  = if (Q_tv < 0) then TVAclosed else TVAopen;

          // Spherical caps geometries
           // Displacement flow - interventricular septum
           der(Q_sept) =   -(P_LWtrans+P_Septtrans+P_RWtrans)/L_sept; // Flow acceleration into septal spherical cap

           der(Sept_Vm) =  Q_sept;      // Change in septal midwall volume (positive when curved towards RV)

           LW_Vm  =  - V_lv - 0.5*LW_Vwall - 0.5*Sept_Vwall + Sept_Vm;  // LV free wall spherical cap volume - adjusted according to septal displacement
           RW_Vm   =  V_rv + 0.5*RV_Vwall + 0.5*Sept_Vwall + Sept_Vm;  // RV free wall spherical cap volume - same

          // Geometry changes of septal junction circle

           der(d_Sept_ym) = -(Ty_total+d_Sept_ym*damp_ym)/Lm_ym; // Acceleration in junction radius caused by summed tension forces + damping
           der(Sept_ym) = d_Sept_ym;    // Change in junction radius

          // Solve for xm - cap midwall height (positive in direction of RV)
           LW_Vm   = PI/6*LW_xm*(LW_xm^2+3*Sept_ym^2);      // Given Vm and ym, xm can be found
           RW_Vm   = PI/6*RW_xm*(RW_xm^2+3*Sept_ym^2);
           Sept_Vm   = PI/6*Sept_xm*(Sept_xm^2+3*Sept_ym^2);

          // Calculate Am - cap midwall area
           LW_Am  = PI*(LW_xm^2+Sept_ym^2);
           RW_Am  = PI*(RW_xm^2+Sept_ym^2);
           Sept_Am  = PI*(Sept_xm^2+Sept_ym^2);

          // Calculate Cm - cap midwall curvature (1/r)
           LW_Cm   = 2*LW_xm/(LW_xm^2+Sept_ym^2);
           RW_Cm    = 2*RW_xm/(RW_xm^2+Sept_ym^2);
           Sept_Cm   = 2*Sept_xm/(Sept_xm^2+Sept_ym^2);

          // Tx balance
           Tx_total = LW_Tx + Sept_Tx + RW_Tx;
          // Ty balance
           Ty_total = LW_Ty + Sept_Ty + RW_Ty;

          // Fiber strain
             // Relation btw fiber strain and cavity + wall volume
             // From Lumens et al., 2009, Annals of Biomedical Engineering.
           LW_z  = (3*LW_Cm*LW_Vwall)/(2*LW_Am);    // Curvature ratio
           LW_e  = 0.5*log(LW_Am/LW_Am0)-(1/12)*LW_z^2-0.019*LW_z^4;   // Natural strain. Approximation to solution for curved wall segment (Lumens 2009)
           LW_dedt  = der(LW_e);      // Strain rate

           RW_z  = (3*RW_Cm*RV_Vwall)/(2*RW_Am);    // Curvature ratio
           RW_e  = 0.5*log(RW_Am/RW_Am0)-(1/12)*RW_z^2-0.019*RW_z^4;   // Natural strain. Approximation to solution for curved wall segment (Lumens 2009)
           RW_dedt  = der(RW_e);      // Strain rate

           Sept_z  = (3*Sept_Cm*Sept_Vwall)/(2*Sept_Am);    // Curvature ratio
           Sept_e  = 0.5*log(Sept_Am/Sept_Am0)-(1/12)*Sept_z^2-0.019*Sept_z^4;   // Natural strain. Approximation to solution for curved wall segment (Lumens 2009)
           Sept_dedt = der(Sept_e);      // Strain rate

          // Fiber stress, active component (applying force-velocity and force-length relation)
                // A linear relation btw ratio of developed force vs. max force
                // and ratio of strain rate vs. max strain rate is assumed.
                // This seems reasonable for the relationship at physiological loads
                // (force 15-100% of peak force). A hyperbolic relationship
                // breaks down above 70% of peak force.
                // Note that max strain rate for this assumption is different from
                // and lower than Vmax estimated when using the hyperbolic Hill equation.
                // ref. Circ Res. 1991 Feb;68(2):588-96. Sarcomere dynamics in cat cardiac trabeculae. de Tombe PP1, ter Keurs HE.
           LW_s_act = LVact * (if (LW_dedt > 0) then (LV_smax*tanh((LW_e-e0)*3)) else (if (LW_dedt < LV_dedtmax) then  0
                                  else
              (LV_smax-LV_smax*(LW_dedt/LV_dedtmax))*tanh((LW_e-e0)*3)));

           Sept_s_act = LVact *
              (if (Sept_dedt >= 0) then (LV_smax*tanh((Sept_e-e0)*3)) else (if (Sept_dedt < LV_dedtmax) then 0 else
              (LV_smax-LV_smax*(Sept_dedt/LV_dedtmax))*tanh((Sept_e-e0)*3)));

           RW_s_act = RVact *
              (if (RW_dedt >= 0) then (RV_smax*tanh((RW_e-e0)*3)) else (if (RW_dedt < RV_dedtmax) then 0 else
              (RV_smax-RV_smax*(RW_dedt/RV_dedtmax))*tanh((RW_e-e0)*3)));

          // Fiber stress, passive components
           // Elastic stress modeled to be symmetric on both sides of slack length
           // Viscous force modeled to be proportional to strain rate

           LW_s_ela = if (LW_e >= 0) then (LV_k*(exp(LV_a*LW_e)-1))
              else -(LV_k*(exp(LV_a*(-LW_e))-1));

           LW_s_vis = LW_dedt * LV_visc;

           Sept_s_ela = if (Sept_e >= 0) then (LV_k*(exp(LV_a*Sept_e)-1))
              else -(LV_k*(exp(LV_a*(-Sept_e))-1));

           Sept_s_vis = Sept_dedt * LV_visc;

           RW_s_ela = if (RW_e >= 0) then (RV_k*(exp(RV_a*RW_e)-1))
              else -(RV_k*(exp(RV_a*(-RW_e))-1));

           RW_s_vis = RW_dedt * RV_visc;

          // Fiber stress, total (sum of active and passive components)

           LW_s  = LW_s_act + LW_s_ela + LW_s_vis;
           Sept_s  = Sept_s_act + Sept_s_ela + Sept_s_vis;
           RW_s  = RW_s_act + RW_s_ela + RW_s_vis;

          // Wall tension (Approximation, Lumens 2009)
           LW_Tm  = (LW_Vwall*LW_s)/(2*LW_Am)*(1+LW_z^2/3+LW_z^4/5);
           LW_Tx  = LW_Tm * (2*LW_xm*Sept_ym)/(LW_xm^2+Sept_ym^2);
           LW_Ty  = LW_Tm * (-(LW_xm^2)+Sept_ym^2)/(LW_xm^2+Sept_ym^2);

           Sept_Tm  = (Sept_Vwall*Sept_s)/(2*Sept_Am)*(1+Sept_z^2/3+Sept_z^4/5);
           Sept_Tx  = Sept_Tm * (2*Sept_xm*Sept_ym)/(Sept_xm^2+Sept_ym^2);
           Sept_Ty  = Sept_Tm * (-(Sept_xm^2)+Sept_ym^2)/(Sept_xm^2+Sept_ym^2);

           RW_Tm  = (RV_Vwall*RW_s)/(2*RW_Am)*(1+RW_z^2/3+RW_z^4/5);
           RW_Tx  = RW_Tm * (2*RW_xm*Sept_ym)/(RW_xm^2+Sept_ym^2);
           RW_Ty  = RW_Tm * (-(RW_xm^2)+Sept_ym^2)/(RW_xm^2+Sept_ym^2);

          // Axial transmural pressure (in x-direction)
           P_LWtrans = 2*LW_Tx/Sept_ym;
           P_Septtrans = 2*Sept_Tx/Sept_ym;
           P_RWtrans = 2*RW_Tx/Sept_ym;

          // LV pressure
           P_lvw  = -P_LWtrans + P_peri;

          // RV pressure

           P_rvw  = P_RWtrans + P_peri;

          // Atrial pressures
             // Passive component + active component
             // Linear compliance curve
           P_la  = (V_la-V0_la)/C_la + Aact*P_maxla + P_peri;
           P_ra  = (V_ra-V0_ra)/C_ra + Aact*P_maxra + P_peri;

          // Vessels pressures

           P_ao  = (V_ao-V0_ao)/C_ao;
           P_vc  = (V_vc-V0_vc)/C_vc;
           P_pa  = (V_pa-V0_pa)/C_pa;
           P_pve  = (V_pve-V0_pve)/C_pve;

          // Pericardial volume and pressure
           V_peri  = V_lv+V_rv+V_ra+V_la+LV_Vwall+RV_Vwall+V_perifl;
           P_peri  = k_peri*(exp((V_peri-V0_peri)*a_peri)-1);

            annotation (experiment(
                StopTime=20,
                Interval=0.001,
                Tolerance=1e-07,
                __Dymola_Algorithm="Dassl"));
          end System_OlsenSIUnits_NoL;

          model Pulmonary_Oslen
            extends Pulmonary.partialPulmonary(UseThoracic_PressureInput=false);

           Physiolibrary.Types.Pressure P_pa = port_a.pressure "  mmHg,   // Pulmonary arterial pressure";
           Physiolibrary.Types.Pressure P_pve = port_b.pressure " mmHg,   // Pulmonary veins pressure";
           Physiolibrary.Types.Volume V_pa(start = 70e-6) "  mL,   // Pulmonary artery volume";
           Physiolibrary.Types.Volume V_pve(start = 150e-6) " mL,   // Pulmonary veins volume";
           Physiolibrary.Types.VolumeFlowRate Q_pa "  mL/s,   // Flow from PA to pulmonary veins";

             parameter Physiolibrary.Types.HydraulicCompliance C_pa(displayUnit="ml/mmHg")=
               2.7752278306289e-08   "mL/mmHg,  // Pulmonary artery compliance";
            parameter Physiolibrary.Types.HydraulicCompliance C_pve(displayUnit="ml/mmHg")=
               1.1250923637685e-07   "mL/mmHg,  // Pulmonary veins compliance";

            parameter Physiolibrary.Types.Volume V0_pa=0
              "mL,   // Pulmonary artery unstressed volume";
            parameter Physiolibrary.Types.Volume V0_pve=0
              "mL,   // Pulmonary veins unstressed volume";

            parameter Physiolibrary.Types.HydraulicInertance L_pa(displayUnit="mmHg.s2/ml")=
               1333223.87415   "mmHg*s^2*mL^(-1), // Pulmonary artery inertance";
            parameter Physiolibrary.Types.HydraulicInertance L_pve(displayUnit="mmHg.s2/ml")=
               1333223.87415   "mmHg*s^2*mL^(-1), // Pulmonary veins inertance";

            parameter Physiolibrary.Types.HydraulicResistance R_pve(displayUnit="(mmHg.s)/ml")=
               133322.387415   "mmHg*s*mL^(-1), // Pulmonary veins resistance";
            // Vascular resistances
            parameter Physiolibrary.Types.HydraulicResistance PVR(displayUnit="(mmHg.s)/ml")=
               10012511.294867   "mmHg*s*mL^(-1),  // Pulmonary vascular resistance";

            Physiolibrary.Types.VolumeFlowRate Q_pva = port_a.q
              " mL/s,   // Flow through pulmonary valve";
            Physiolibrary.Types.VolumeFlowRate Q_pve = - port_b.q
              " mL/s,   // Flow from pulmonary veins to LA";

          equation
            volume = V_pa + V_pve;

            // Pulmonary artery
            der(Q_pa)  = (P_pa-P_pve-Q_pa*PVR)/L_pa;
            der(V_pa)  = Q_pva - Q_pa;
            der(V_pve) = Q_pa - Q_pve;
           P_pa  = (V_pa-V0_pa)/C_pa;
           P_pve  = (V_pve-V0_pve)/C_pve;

            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)));
          end Pulmonary_Oslen;

          model OlsenCirculation
            import Signals;
            Heart_Olsen_base heart_Olsen_base(
              HR_stepUp=false,
              UseFrequencyInput=true,
              UseThoracic_PressureInput=false,
              UsePhiInput=true,
              L_sept(displayUnit="mmHg.s2/ml"))
              annotation (Placement(transformation(extent={{12,-26},{-8,-6}})));
            Systemic_Olsen systemic_Olsen
              annotation (Placement(transformation(extent={{-36,34},{40,64}})));
            Pulmonary_Oslen pulmonary_Oslen(V_pve(start=150e-6 + settings.V_PV_init))
                                            annotation (Placement(
                  transformation(extent={{14,-68},{-6,-48}})));
            outer Settings settings annotation (Placement(transformation(extent=
                     {{-102,80},{-82,100}})));
            Physiolibrary.Types.Constants.FrequencyConst HR0(k(displayUnit=
                    "1/min") = 1.0333333333333)
              annotation (Placement(transformation(extent={{44,-18},{36,-10}})));
            Physiolibrary.Types.Constants.FractionConst  HR1(k(displayUnit=
                    "1/min") = 1)
              annotation (Placement(transformation(extent={{76,-16},{68,-8}})));
            Signals.Dashboard dashboard(
              V0=0.0007811,
              Q_mv=heart_Olsen_base.Q_mv,
              totalVolume=systemic_Olsen.volume + heart_Olsen_base.volume +
                  pulmonary_Oslen.volume,
              P_pv=pulmonary_Oslen.port_b.pressure,
              P_LV=heart_Olsen_base.P_lvw,
              V_LV=heart_Olsen_base.V_LV,
              P_sv=systemic_Olsen.port_b.pressure,
              HR=heart_Olsen_base.HRo,
              power_LV=heart_Olsen_base.power_LV.power,
              power_RV=heart_Olsen_base.power_RV.power,
              beat=heart_Olsen_base.beat,
              mitral_closing=heart_Olsen_base.Q_mv < 0,
              BP=systemic_Olsen.P_ao)
              annotation (Placement(transformation(extent={{-100,-100},{-80,-80}})));
          equation
            connect(heart_Olsen_base.sa, systemic_Olsen.port_a) annotation (
                Line(
                points={{-8,-6},{-48,-6},{-48,44},{-36,44}},
                color={0,0,0},
                thickness=1));
            connect(heart_Olsen_base.sv, systemic_Olsen.port_b) annotation (
                Line(
                points={{12,-6},{56,-6},{56,44},{40,44}},
                color={0,0,0},
                thickness=1));
            connect(heart_Olsen_base.pa, pulmonary_Oslen.port_a) annotation (
                Line(
                points={{12,-26},{56,-26},{56,-58},{14,-58}},
                color={0,0,0},
                thickness=1));
            connect(pulmonary_Oslen.port_b, heart_Olsen_base.pv) annotation (
                Line(
                points={{-6,-58},{-28,-58},{-28,-26},{-8,-26}},
                color={0,0,0},
                thickness=1));
            connect(HR0.y, heart_Olsen_base.frequency_input) annotation (Line(
                  points={{35,-14},{18,-14},{18,-16},{12,-16}}, color={0,0,127}));
            connect(heart_Olsen_base.phi, HR1.y) annotation (Line(points={{12,
                    -10},{24,-10},{24,-24},{62,-24},{62,-12},{67,-12}}, color={
                    0,0,127}));
            annotation (
              Icon(coordinateSystem(preserveAspectRatio=false)),
              Diagram(coordinateSystem(preserveAspectRatio=false)),
              experiment(
                StopTime=30,
                Interval=0.002,
                Tolerance=1e-07,
                __Dymola_Algorithm="Cvode"));
          end OlsenCirculation;
        end Olsen;

        package Auxiliary
          partial model partialDriving
            "Driving function for heart contraction. Usually outputs a HydraulicElastance"
            parameter Boolean usePhiInput=false    annotation(choices(checkBox=true));
          //   parameter Boolean initializeCardiac_cycle = true "if true, sets cardiac cycle using t_offset. False for initialization using start value"
          //   annotation(choices(checkBox=true));

            parameter Physiolibrary.Types.Fraction phi0 = 0.25;
            Modelica.Blocks.Interfaces.RealOutput D
              "Driving or activation function for heart muscles (ventricles and atria)"
                                                annotation (Placement(transformation(
                    extent={{100,-10},{120,10}})));
          //  parameter Modelica.SIunits.Time tau_phi "Integral time constant of delayed activation" annotation(Evaluate = true);
            Physiolibrary.Types.Fraction phi_inf "actual phi input, given infinite speed of transmission";
          //   Physiolibrary.Types.RealIO.FrequencyInput frequency annotation (Placement(
          //         transformation(extent={{-120,-110},{-80,-70}}),
          //                                                       iconTransformation(extent={{-42,-80},
          //             {-2,-40}})));
            Physiolibrary.Types.RealIO.FractionInput phiInput=phi_inf if usePhiInput
              "Sympathetic activation"
              annotation (Placement(transformation(extent={{-120,70},{-80,110}}),
                  iconTransformation(extent={{-120,60},{-80,100}})));
            Physiolibrary.Types.Fraction phi_;
            Modelica.Blocks.Interfaces.RealInput t0
              "Start time of current cardiac cycle"
              annotation (Placement(transformation(extent={{-120,-20},{-80,20}}),
                  iconTransformation(extent={{-120,-20},{-80,20}})));
            parameter Modelica.Units.SI.Time t0_delay=0
              "Delay of contraction after SA node ";
            parameter Modelica.Units.SI.Time t0_delay_maxAct=t0_delay
              "Delay of contraction after SA node ";
            Real t0_delay_coeff "delay activation slope coefficient";
            Modelica.Units.SI.Time t0_delay_phi=t0_delay + t0_delay_coeff*(phi_
                 - phi0) "Systolic delay varying on phi";
            Modelica.Units.SI.Time tm=if t0_delay_phi > 0 then time - time0
                 else t0 "Time since beggining of the (delayed) systole";
            Modelica.Units.SI.Time time0(start=-Modelica.Constants.inf)
              "time of the last beat";

                  // initial equation
          //   if initializeCardiac_cycle and t_offset <> 0 then
          //     t_offset*frequency = -cardiac_cycle;
          //   end if;
          //   Modelica.Blocks.Interfaces.BooleanInput beat
          //     "Start time of current cardiac cycle" annotation (Placement(transformation(
          //           extent={{-120,-70},{-80,-30}}), iconTransformation(extent={{-120,-100},
          //             {-80,-60}})));
          equation

          //   when beat then
          //     beat_time = time + t0_delay_phi;
          //   end when;
          //
          //   when time >= beat_time then
          //     //    tm =
          //   end when;

            when t0 > t0_delay_phi then
              time0 = time;
            end when;
            // if t0_delay <> 0 then
            t0_delay_maxAct   = t0_delay + t0_delay_coeff *(1 - phi0);
            // else
            //   t0_delay_coeff = 0;
            // end if;

            if not usePhiInput then
              phi_inf = phi0;
            end if;

          //  if tau_phi == 0.0 then
              // its turned off
              phi_ = phi_inf;
          //   else
          //     der(phi_)/tau_phi = phi_inf - phi_;
          //   end if;

            annotation(Dialog(enable=initializeCardiac_cycle),
                        Icon(graphics={    Rectangle(extent={{-80,80},{100,-40}},
                      lineColor={0,0,0},
                    fillColor={255,255,255},
                    fillPattern=FillPattern.Solid),
                                       Line(
                    points={{-66,-36},{-46,-36},{-46,4},{-26,44},{-6,44},{4,4},
                        {14,-16},{34,-26},{54,-36},{74,-36},{94,-36}},
                    color={0,0,0},
                    smooth=Smooth.Bezier,
                    thickness=0.5)}));
          end partialDriving;

          partial model partialAtrium
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_a
              annotation (Placement(transformation(extent={{-10,-90},{10,-70}})));

                        parameter Boolean enabled = true "Atria enabled. False means thay are disabled and are therefore not filling nor pulsing"
           annotation(choices(checkBox=true));

            annotation (Icon(graphics={            Bitmap(extent={{-100,100},{100,-100}},
                               fileName=
                        "modelica://Physiolibrary/Resources/Icons/sequerestedVolume.png")}));
          end partialAtrium;

          model AtriumSimple "Simple atrium with external driving function"
            extends partialAtrium;
            Modelica.Blocks.Interfaces.RealInput     D
              "Driving function fro activation of the atrial muscles"
              annotation (Placement(transformation(extent={{-114,-10},{-94,10}})));

          //  parameter Real Emin = 0.05 "tats 25%";
          //  parameter Real Emax = 0.15;
          //  parameter Physiolibrary.Types.HydraulicElastance E_0=26664477.483
          //                                                             "0.05 + 0.15 mmhg/ml";

          //   Real _E = (Emin + Emax*drivingFunction) "Elastance function in ml/mmhg";
          //   Physiolibrary.Types.HydraulicElastance E=_E/Constants.ml_per_mmhg2SI;

            Physiolibrary.Types.HydraulicElastance E=contractilityFraction*D;

            Physiolibrary.Types.Volume volume(start=100e-6);// = _VLA*Constants.ml2SI;
            parameter Physiolibrary.Types.Volume zpv = 0 "Zero pressure volume";
            parameter Physiolibrary.Types.Volume volume_min=5e-06  "Volume limiter for external pressures";

            Physiolibrary.Types.RealIO.PressureInput thoracic_pressure_input  annotation (Placement(
                  transformation(extent={{-20,-20},{20,20}},
                  rotation=180,
                  origin={100,0}),                              iconTransformation(extent={{120,-20},
                      {80,20}})));
                      Physiolibrary.Types.Pressure thoracic_pressure_inside = thoracic_pressure_input
                *max(min(volume /volume_min, 1), 0) "limiting external pressure for small or negative volumes";

            Modelica.Units.SI.Work currentWork;
            Modelica.Units.SI.Work work;

            parameter Physiolibrary.Types.Fraction contractilityFraction=1;
            parameter Boolean enableCollagen = false "Enab;e nonlinear collagen force, effectively limiting atrial volume" annotation(choices(checkBox=true));
            parameter Physiolibrary.Types.Volume V0_col=100e-6
              "minimal volume to produce collagen pressure";
            parameter Real s = 10 "exponential steepness of stiffness";
            Physiolibrary.Types.Pressure P_c = if enableCollagen then exp(s*(volume/V0_col - 1)) else 0;
          equation

            // since the flow is derivation of volume, we have already differentiated it
            der(currentWork) =port_a.pressure*port_a.q;

            when D > 1 then
              // anywhere, jsut to reset it once a cycle
              reinit(currentWork, 0);
              work = currentWork;
            end when;

            if enabled then
              der(volume) =port_a.q;
              port_a.pressure =E*(volume - zpv) + P_c +
                thoracic_pressure_inside;
            else
              der(volume) = 0;
              port_a.q = 0;
            end if;

            annotation (Icon(coordinateSystem(preserveAspectRatio=false),
                  graphics={
                    Rectangle(extent={{-100,100},{100,-100}}, lineColor={28,
                        108,200})}),                                       Diagram(
                  coordinateSystem(preserveAspectRatio=false)));
          end AtriumSimple;

          model Atrium
            extends partialAtrium;
            Physiolibrary.Types.RealIO.FractionInput cardiac_cycle
              "Time from start of the cycle" annotation (Placement(transformation(extent={
                      {-114,-10},{-94,10}}), iconTransformation(extent={{-120,
                      -20},{-80,20}})));

          parameter Physiolibrary.Types.Time Tact= 0
                                                  annotation (Evaluate = false);
          //
            Real atriaCycle "Time from start of the atrial cycle";

           parameter Real Emin = 0.05;
           parameter Real Emax = 0.15;
          //  % Emin = 0.05 ;
          //  % Emax = 0.15 ;
           parameter Real sigma_a = 0.125;
            parameter Real stiffness_scaling=1 "arbitrary scaling the atrial stiffness";
            Real act=exp(-(atriaCycle/sigma_a)^2);
            Real _E = stiffness_scaling*(Emin + Emax*act);
            Physiolibrary.Types.HydraulicElastance E=_E/Constants.ml_per_mmhg2SI;

            Physiolibrary.Types.Volume volume(start=100e-6);// = _VLA*Constants.ml2SI;
            parameter Physiolibrary.Types.Volume volume_min = 5e-6;

            Physiolibrary.Types.RealIO.PressureInput thoracic_pressure_input  annotation (Placement(
                  transformation(extent={{-20,-20},{20,20}},
                  rotation=180,
                  origin={100,0}),                              iconTransformation(extent={{120,-20},
                      {80,20}})));
                      Physiolibrary.Types.Pressure thoracic_pressure_inside = thoracic_pressure_input
                *max(min(volume /volume_min, 1), 0) "limiting external pressure for small or negative volumes";

            Modelica.Units.SI.Work currentWork;
            Modelica.Units.SI.Work work;

          equation

            // since the flow is derivation of volume, we have already differentiated it
            der(currentWork) =port_a.pressure*port_a.q;

            when cardiac_cycle > 1 then
              // anywhere, jsut to reset it once a cycle
              reinit(currentWork, 0);
              work = currentWork;
            end when;

            if enabled then

              der(volume) =port_a.q;
              port_a.pressure =E*volume + thoracic_pressure_inside;
            else
              der(volume) = 0;
              port_a.q = 0;
            end if;

            if enabled and cardiac_cycle - Tact > 0.5 then
              atriaCycle =cardiac_cycle - Tact - 1;
            elseif enabled and cardiac_cycle - Tact < -0.5 then
              atriaCycle =cardiac_cycle - Tact + 1;
            else
              // its between
              atriaCycle =cardiac_cycle - Tact;
            end if;

            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)));
          end Atrium;

          partial model partialVentricles
            Physiolibrary.Types.RealIO.FrequencyInput frequency annotation (Placement(
                  transformation(extent={{-120,-20},{-80,20}}), iconTransformation(extent=
                     {{-120,-20},{-80,20}})));
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_rv annotation (
                Placement(transformation(extent={{70,30},{90,50}}), iconTransformation(
                    extent={{70,30},{90,50}})));
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_lv annotation (
                Placement(transformation(extent={{70,-50},{90,-30}}),
                                                                    iconTransformation(
                    extent={{70,-70},{90,-50}})));
            Physiolibrary.Types.RealIO.FractionOutput cardiac_cycle
              "Time from start of the cycle" annotation (Placement(
                  transformation(extent={{-56,14},{-36,34}}),
                  iconTransformation(extent={{90,-10},{110,10}})));
            Physiolibrary.Types.RealIO.PressureInput thoracic_pressure_input  annotation (Placement(
                  transformation(extent={{-20,-20},{20,20}},
                  rotation=90,
                  origin={0,-100}),                             iconTransformation(extent={{-20,-20},
                      {20,20}},
                  rotation=90,
                  origin={0,-100})));
            Modelica.Blocks.Interfaces.BooleanOutput volumeLimiterLV(start=true)
              "When true, it limits outflow from the ventricle to maintain minimal ventricular volume."
              annotation (Placement(transformation(extent={{-20,-20},{20,20}}, rotation=270,
                  origin={40,-100})));
            Modelica.Blocks.Interfaces.BooleanOutput volumeLimiterRV(start=true)
              "When true, it limits outflow from the ventricle to maintain minimal ventricular volume."
              annotation (Placement(transformation(extent={{-20,-20},{20,20}}, rotation=90,
                  origin={40,100})));
            Physiolibrary.Types.RealIO.FractionInput phi_input
              annotation (Placement(transformation(extent={{-20,-20},{20,20}},
                  rotation=270,
                  origin={0,100}),
                  iconTransformation(extent={{-20,-20},{20,20}},
                  rotation=270,
                  origin={0,100})));
            outer Settings settings annotation (Placement(transformation(
                    extent={{-100,80},{-80,100}})));
            annotation (Icon(graphics={
                            Bitmap(extent={{100,-100},{-100,100}}, fileName=
                        "modelica://Physiolibrary/Resources/Icons/komoraSrdce.png",
                    origin={14,22},
                    rotation=270),
                            Bitmap(extent={{-106,-100},{106,100}}, fileName=
                        "modelica://Physiolibrary/Resources/Icons/komoraSrdce.png",
                    origin={18,-40},
                    rotation=270)}));
          end partialVentricles;

          model Ventricle_Smith
            "Ventricle with Smith ventricular interaction logic"
            extends partialVentricles;
            Smith_DrivenVentricularInteraction smith_DrivenVentricularInteraction
              annotation (Placement(transformation(extent={{-14,-52},{48,16}})));
            Driving_Smith calciumMechanics
              annotation (Placement(transformation(extent={{-68,-42},{-48,-22}})));
            Modelica.Blocks.Interfaces.BooleanOutput
                                  beat
                                     annotation (Placement(transformation(extent={{-60,-108},
                      {-100,-68}}),         iconTransformation(extent={{-60,-80},{-100,-40}})));
            Modelica.Blocks.Sources.BooleanConstant booleanConstant(k=false)
              annotation (Placement(transformation(extent={{100,-82},{80,-62}})));
            Modelica.Blocks.Sources.BooleanConstant booleanConstant1(k=false)
              annotation (Placement(transformation(extent={{100,78},{80,98}})));

            Physiolibrary.Types.Volume V_RV = smith_DrivenVentricularInteraction.V_RV;
            Physiolibrary.Types.Volume V_LV = smith_DrivenVentricularInteraction.V_LV;
          equation
            connect(calciumMechanics.frequency, frequency) annotation (Line(points={{-67,-32},
                    {-90,-32},{-90,0},{-100,0}}, color={0,0,127}));
            connect(phi_input, smith_DrivenVentricularInteraction.phi)
              annotation (Line(points={{0,100},{-7.8,100},{-7.8,9.2}}, color={0,0,127}));
            connect(thoracic_pressure_input, smith_DrivenVentricularInteraction.Pth)
              annotation (Line(points={{0,-100},{0,-60},{42.42,-60},{42.42,-18}}, color={0,
                    0,127}));
            connect(smith_DrivenVentricularInteraction.lvflow, port_lv) annotation (Line(
                points={{17,-52},{48.5,-52},{48.5,-40},{80,-40}},
                color={0,0,0},
                thickness=1));
            connect(smith_DrivenVentricularInteraction.rvflow, port_rv) annotation (Line(
                points={{16.38,16},{48.19,16},{48.19,40},{80,40}},
                color={0,0,0},
                thickness=1));
            connect(calciumMechanics.D, smith_DrivenVentricularInteraction.D) annotation (
               Line(points={{-47,-32},{-28,-32},{-28,-38.4},{-7.8,-38.4}}, color={0,0,127}));
            connect(calciumMechanics.cardiac_cycle, cardiac_cycle) annotation (Line(
                  points={{-47,-26},{-50,-26},{-50,24},{-46,24}}, color={0,0,127}));
            connect(calciumMechanics.beat, beat) annotation (Line(points={{-66,-38},{-66,-64},
                    {-66,-88},{-80,-88}}, color={255,0,255}));
            connect(booleanConstant.y, volumeLimiterLV)
              annotation (Line(points={{79,-72},{40,-72},{40,-100}}, color={255,0,255}));
            connect(volumeLimiterRV, booleanConstant1.y) annotation (Line(points={{40,100},
                    {60,100},{60,88},{79,88}}, color={255,0,255}));
          end Ventricle_Smith;

          model Smith_VentricularInteraction_flat
              import Physiolibrary.Types.*;
            Volume Vsept(start=V0sept), Vrv(start=0.0001042), Vlv(start=
                  0.0001042), Vperi;
            parameter Volume V0sept=2e-06, V0peri = 0.0002;

            Pressure Psept, Pperi;
            parameter Pressure Pi0sept=148.00118226939, Pi0rv=28.757638965416, Pi0lv=16.038683206025, Pi0peri=66.701190423724
              "peak isovolumic pressure";
            Pressure Pirv = Pi0rv*PhiEffect_passEl;
            Pressure Pilv = Pi0lv*PhiEffect_passEl;

            parameter HydraulicElastance Essept0 = 6499999676.0309, Esrv0= 77993596.637775, Eslv0=383941811.27772;

          //   parameter Physiolibrary.Types.Volume VS0sept = 1e-3 "Volume Threshold for linear Frank-starling effect";
          //   parameter Physiolibrary.Types.Volume VS0lv = 1e-3 "Volume Threshold for linear Frank-starling effect";
          //   parameter Physiolibrary.Types.Volume VS0rv = 1e-3 "Volume Threshold for linear Frank-starling effect";

          //   parameter Real Escale = 1;
            Physiolibrary.Types.Fraction PhiEffect_activeEl=(1 + alphaE*(phi - phi0))
              "Effect of Phi on active elastances, i.e. decreasing ESV";
            Physiolibrary.Types.Fraction PhiEffect_passEl=(1 - gammaE*(phi - phi0))
              "Effect of Phi on passiveElastances, i.e. increasing EDV";

            HydraulicElastance Essept=Essept0*PhiEffect_activeEl;
            HydraulicElastance Esrv=Esrv0*PhiEffect_activeEl;
            HydraulicElastance Eslv=Eslv0*PhiEffect_activeEl "elastance of systole";
            // HydraulicElastance Essept = Essept0*(1 + alphaE*(phi - phi0))*(1 + (Escale*Vsept/VS0sept-1)*(tanh(Vsept/VS0sept-2)+1)/2);
            // HydraulicElastance Esrv = Esrv0*(1 + alphaE*(phi - phi0))*(1 + (Escale*Vrv/VS0rv-1)*(tanh(Vrv/VS0rv-2)+1)/2);
            // HydraulicElastance Eslv = Eslv0*(1 + alphaE*(phi - phi0))*(1 + (Escale*Vlv/VS0lv-1)*(tanh(Vlv/VS0lv-2)+1)/2)
            //   "elastance of systole";
            parameter Real A=1 "Multiplier of driving function";
            Real B= 60/HP;
            // Real CC=HP*SystolicFraction;
            Real CC=ts/2;
          //  parameter Physiolibrary.Types.Fraction SystolicFraction = 0.5;
              Time tm;
              discrete Time HP "heart period";
              discrete Time t0 "time of beginning of the cardiac cycle";
              discrete Time ts "duration of systole";
              Time td = HP - ts "duration of diastole";
              parameter Real lambdas= 435000 "Lambda of septum [1/m3]";
              parameter Real lambdarv = 23000 "Lambda of RV [1/m3]";
              parameter Real lambdalv = 33000 "Lambda of LV [1/m3]";
              parameter Real lambdaperi = 30000 "Lambda of pericardium [1/m3]";
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a rvflow annotation (
               Placement(transformation(extent={{-48,20},{-28,40}}),
                  iconTransformation(extent={{-12,90},{8,110}})));
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a lvflow annotation (
               Placement(transformation(extent={{-46,-22},{-26,-2}}),
                  iconTransformation(extent={{-10,-110},{10,-90}})));
            RealIO.FrequencyInput HR annotation (Placement(transformation(extent=
                      {{-78,-40},{-38,0}}), iconTransformation(extent={{-100,-20},
                      {-60,20}})));
            RealIO.PressureInput Pth annotation (Placement(transformation(extent=
                      {{-6,24},{14,44}}), iconTransformation(
                  extent={{-20,-20},{20,20}},
                  rotation=180,
                  origin={82,0})));
            Physiolibrary.Types.RealIO.FractionInput
                                  phi
                                     annotation (Placement(transformation(extent={{-80,-100},
                      {-40,-60}}),          iconTransformation(extent={{-100,60},{-60,100}})));
            Physiolibrary.Types.Fraction phi0 = 0.25;
            parameter Physiolibrary.Types.Fraction alphaE(min = 0, max = 4) = 0 "linear dependency of active elastances (Essept, Esrv, Eslv) on phi";
            parameter Physiolibrary.Types.Fraction gammaE(min = 0, max = 1.33) = 0 "linear dependency of passive elastances (given by nominal pressure Pi0lv, Pi0rv) on phi";

            Physiolibrary.Types.Pressure Prv = rvflow.pressure - Pperi;
            Physiolibrary.Types.Pressure Plv = lvflow.pressure - Pperi;
              Physiolibrary.Types.Pressure Plv_passive = (1 - driving)*Pi0lv*(exp(PhiEffect_passEl*lambdalv*(Vlv - Vsept)) - 1);

            parameter Physiolibrary.Types.Fraction alphaDriving = 0 "Experimental sensitivity of driving funtion on phi";
            Real driving = (1 + alphaDriving*(phi - phi0))*A*exp(-B*(tm - CC)^2) "Linear dependency of driving on phi";

            Modelica.Blocks.Interfaces.BooleanOutput
                                  beat = tm >= pre(HP)
                                     annotation (Placement(transformation(extent={{-28,-120},
                      {12,-80}}),           iconTransformation(extent={{-60,-80},{-100,-40}})));
          //             Physiolibrary.Types.Volume ESV_LV;
          //             Physiolibrary.Types.Volume ESV_RV;
          //             Physiolibrary.Types.Volume EDV_LV;
          //             Physiolibrary.Types.Volume EDV_RV;
          //             Physiolibrary.Types.Volume SV_LV;
          //             Physiolibrary.Types.Volume SV_RV;
          //             Physiolibrary.Types.VolumeFlowRate CO_LV = SV_LV/HP;
          //             Physiolibrary.Types.VolumeFlowRate CO_RV = SV_RV/HP;
                      parameter Time ts_a1 = 0.1 "Part of calculation for t_systole = a1 + a2*period. Guessed from Bombardino 2008 doi:10.1186/1476-7120-6-15";
                      parameter Real ts_a2 = 0.2 "Part of calculation for t_systole = a1 + a2*period. Guessed from Bombardino 2008 doi:10.1186/1476-7120-6-15";
          equation
            //timing
            tm = time - pre(t0);
            when {initial(),beat} then
              HP = 1/HR;
              t0 = time;
              //    ts = 0.16 + 0.3*HP;
              ts = ts_a1 + ts_a2*HP "Guessed from Bombardino 2008 doi:10.1186/1476-7120-6-15";
          //     EDV_LV = Vlv;
          //     EDV_RV = Vrv;
            end when;

          //   when time > t0 + ts then
          //     ESV_LV = Vlv;
          //     ESV_RV = Vrv;
          //     SV_LV = EDV_LV - ESV_LV;
          //     SV_RV = EDV_RV - ESV_RV;
          //   end when;
            //  septum
            Psept = lvflow.pressure - rvflow.pressure;
            Psept = (Vsept - V0sept)*driving*Essept +
              (1 - driving)*Pi0sept*(exp(lambdas*Vsept) - 1);
            // rightventricle
            rvflow.pressure - Pperi = (Vrv + Vsept)*driving*Esrv +
              (1 - driving)*Pi0rv*(exp(PhiEffect_passEl*lambdarv*(Vrv + Vsept)) - 1);
            der(Vrv) =rvflow.q;
            //leftventricle
            lvflow.pressure - Pperi = (Vlv - Vsept)*driving*Eslv +
              Plv_passive;
            der(Vlv) =lvflow.q;
            //pericardium
            Vperi = Vrv + Vlv;
            Pperi = Pth + Pi0peri*(exp(lambdaperi*(Vperi - V0peri)) - 1);
            annotation (Icon(coordinateSystem(preserveAspectRatio=false, extent={
                      {-100,-100},{100,100}}), graphics={Text(
                    extent={{102,-32},{76,-20}},
                    lineColor={0,0,255},
                    fillColor={255,170,170},
                    fillPattern=FillPattern.Forward,
                            textString="Pth"),Text(
                    extent={{-100,-22},{-74,-34}},
                    lineColor={0,0,255},
                            textString="HR"),Rectangle(
                            extent={{-20,80},{20,-60}},
                            lineColor={0,0,255},
                    fillPattern=FillPattern.Solid,
                            fillColor={0,0,255}),Text(
                    extent={{-100,-60},{100,-80}},
                    lineColor={0,0,255},
                    textString="%name"),      Text(
                    extent={{-64,70},{-38,58}},
                    lineColor={0,0,255},
                    textString="phi")}));
          end Smith_VentricularInteraction_flat;

          model SmithOlufsen_VentricularInteraction_flat_
              import Physiolibrary.Types.*;
            Volume Vsept(start=V0sept), Vperi;
            output Volume Vrv(start=0.0001042), Vlv(start=
                  0.0001042);
            parameter Volume V0sept=2e-06, V0peri = 0.0002;

            Pressure Psept, Pperi;
            parameter Pressure Pi0sept=148.00118226939, Pi0rv=28.757638965416, Pi0lv=16.038683206025, Pi0peri=66.701190423724
              "peak isovolumic pressure";
            Pressure Pirv = Pi0rv*PhiEffect_passEl;
            Pressure Pilv = Pi0lv*PhiEffect_passEl;

            parameter HydraulicElastance Essept0 = 6499999676.0309, Esrv0= 77993596.637775, Eslv0=383941811.27772;

          //   parameter Physiolibrary.Types.Volume VS0sept = 1e-3 "Volume Threshold for linear Frank-starling effect";
          //   parameter Physiolibrary.Types.Volume VS0lv = 1e-3 "Volume Threshold for linear Frank-starling effect";
          //   parameter Physiolibrary.Types.Volume VS0rv = 1e-3 "Volume Threshold for linear Frank-starling effect";

          //   parameter Real Escale = 1;
            Physiolibrary.Types.Fraction PhiEffect_activeEl=(1 + alphaE*(phi - phi0))
              "Effect of Phi on active elastances, i.e. decreasing ESV";
            Physiolibrary.Types.Fraction PhiEffect_passEl=(1 - gammaE*(phi - phi0))
              "Effect of Phi on passiveElastances, i.e. increasing EDV";

            HydraulicElastance Essept=Essept0*PhiEffect_activeEl;
            HydraulicElastance Esrv=Esrv0*PhiEffect_activeEl;
            HydraulicElastance Eslv=Eslv0*PhiEffect_activeEl "elastance of systole";
            // HydraulicElastance Essept = Essept0*(1 + alphaE*(phi - phi0))*(1 + (Escale*Vsept/VS0sept-1)*(tanh(Vsept/VS0sept-2)+1)/2);
            // HydraulicElastance Esrv = Esrv0*(1 + alphaE*(phi - phi0))*(1 + (Escale*Vrv/VS0rv-1)*(tanh(Vrv/VS0rv-2)+1)/2);
            // HydraulicElastance Eslv = Eslv0*(1 + alphaE*(phi - phi0))*(1 + (Escale*Vlv/VS0lv-1)*(tanh(Vlv/VS0lv-2)+1)/2)
            //   "elastance of systole";
            parameter Real A=1 "Multiplier of driving function";
            Real B= 60/HP;
            // Real CC=HP*SystolicFraction;
            Real CC=ts/2;
          //  parameter Physiolibrary.Types.Fraction SystolicFraction = 0.5;
              Time tm;
              Time HP "heart period";
              discrete Time t0 "time of beginning of the cardiac cycle";
              Time ts = TS + TR "duration of systole";
              Time td = HP - ts "duration of diastole";
              parameter Real lambdas= 435000 "Lambda of septum [1/m3]";
              parameter Real lambdarv = 23000 "Lambda of RV [1/m3]";
              parameter Real lambdalv = 33000 "Lambda of LV [1/m3]";
              parameter Real lambdaperi = 30000 "Lambda of pericardium [1/m3]";
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a rvflow annotation (
               Placement(transformation(extent={{-48,20},{-28,40}}),
                  iconTransformation(extent={{-12,90},{8,110}})));
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a lvflow annotation (
               Placement(transformation(extent={{-46,-22},{-26,-2}}),
                  iconTransformation(extent={{-10,-110},{10,-90}})));
            RealIO.FrequencyInput HR annotation (Placement(transformation(extent=
                      {{-78,-40},{-38,0}}), iconTransformation(extent={{-100,-20},
                      {-60,20}})));
            RealIO.PressureInput Pth annotation (Placement(transformation(extent=
                      {{-6,24},{14,44}}), iconTransformation(
                  extent={{-20,-20},{20,20}},
                  rotation=180,
                  origin={82,0})));
            Physiolibrary.Types.RealIO.FractionInput
                                  phi
                                     annotation (Placement(transformation(extent={{-80,-100},
                      {-40,-60}}),          iconTransformation(extent={{-100,60},{-60,100}})));
            Physiolibrary.Types.Fraction phi0 = 0.25;
            parameter Physiolibrary.Types.Fraction alphaE(min = 0, max = 4) = 0 "linear dependency of active elastances (Essept, Esrv, Eslv) on phi";
            parameter Physiolibrary.Types.Fraction gammaE(min = 0, max = 1.33) = 0 "linear dependency of passive elastances (given by nominal pressure Pi0lv, Pi0rv) on phi";

            output Physiolibrary.Types.Pressure Prv = rvflow.pressure - Pperi;
            output Physiolibrary.Types.Pressure Plv = lvflow.pressure - Pperi;
              Physiolibrary.Types.Pressure Plv_passive = (1 - driving)*Pi0lv*(exp(PhiEffect_passEl*lambdalv*(Vlv - Vsept)) - 1);

            parameter Physiolibrary.Types.Fraction alphaDriving = 0 "Experimental sensitivity of driving funtion on phi";
          //   Real driving = (1 + alphaDriving*(phi - phi0))*A*exp(-B*(tm - CC)^2) "Linear dependency of driving on phi";
            Physiolibrary.Types.Fraction driving;

            Modelica.Blocks.Interfaces.BooleanOutput
                                  beat = tm >= HP
                                     annotation (Placement(transformation(extent={{-28,-120},
                      {12,-80}}),           iconTransformation(extent={{-60,-80},{-100,-40}})));
          //             Physiolibrary.Types.Volume ESV_LV;
          //             Physiolibrary.Types.Volume ESV_RV;
          //             Physiolibrary.Types.Volume EDV_LV;
          //             Physiolibrary.Types.Volume EDV_RV;
          //             Physiolibrary.Types.Volume SV_LV;
          //             Physiolibrary.Types.Volume SV_RV;
          //             Physiolibrary.Types.VolumeFlowRate CO_LV = SV_LV/HP;
          //             Physiolibrary.Types.VolumeFlowRate CO_RV = SV_RV/HP;
            parameter Time ts_a1 = 0.1 "Part of calculation for t_systole = a1 + a2*period. Guessed from Bombardino 2008 doi:10.1186/1476-7120-6-15";
            parameter Real ts_a2 = 0.2 "Part of calculation for t_systole = a1 + a2*period. Guessed from Bombardino 2008 doi:10.1186/1476-7120-6-15";
            parameter Physiolibrary.Types.Time k_TS = 0.3 "systolic contraction, value from Benjamin E. Randall's implementation of Olufsen's model, personal communication";
            parameter Physiolibrary.Types.Time k_TR = 0.15 "Systolic relaxation time, value from Benjamin E. Randall's implementation of Olufsen's model, personal communication";
            Physiolibrary.Types.Time k_TR_phi = k_TR*(1-k_RS*(phi - phi0));
            Real k_RS( fixed = false) "Relaxation slope dependent on phi linearly";
            parameter Physiolibrary.Types.Time k_TR_min = 0.05
              "minimal time for muscle relaxation at maximal activation. Guessed value";
            Real TS, TR;
            Boolean systolicContraction = tm >= 0 and tm < TS;
            Boolean systolicRelaxation = tm >= TS and tm < TR + TS;
          equation
            k_TR_min = k_TR*(1-k_RS*(1 - phi0));
          //T = 1/HR;
          TS = k_TS*HP;
          TR = k_TR_phi*HP;

          if systolicContraction then
              driving = 0.5*(1 - cos(Modelica.Constants.pi*tm/TS));
          elseif systolicRelaxation then
              driving = 0.5*(1 + cos(Modelica.Constants.pi*(tm - TS)/TR));
          else
              driving = 0;
          end if;
          HP = 1/HR;

            //timing
            tm = time - pre(t0);
            when {initial(),beat} then
          //    HP = 1/HR;
              t0 = time;
              //    ts = 0.16 + 0.3*HP;
          //    ts = ts_a1 + ts_a2*HP "Guessed from Bombardino 2008 doi:10.1186/1476-7120-6-15";
          //     EDV_LV = Vlv;
          //     EDV_RV = Vrv;
            end when;

          //   when time > t0 + ts then
          //     ESV_LV = Vlv;
          //     ESV_RV = Vrv;
          //     SV_LV = EDV_LV - ESV_LV;
          //     SV_RV = EDV_RV - ESV_RV;
          //   end when;
            //  septum
            Psept = lvflow.pressure - rvflow.pressure;
            Psept = (Vsept - V0sept)*driving*Essept +
              (1 - driving)*Pi0sept*(exp(lambdas*Vsept) - 1);
            // rightventricle
            rvflow.pressure - Pperi = (Vrv + Vsept)*driving*Esrv +
              (1 - driving)*Pi0rv*(exp(PhiEffect_passEl*lambdarv*(Vrv + Vsept)) - 1);
            der(Vrv) =rvflow.q;
            //leftventricle
            lvflow.pressure - Pperi = (Vlv - Vsept)*driving*Eslv +
              Plv_passive;
            der(Vlv) =lvflow.q;
            //pericardium
            Vperi = Vrv + Vlv;
            Pperi = Pth + Pi0peri*(exp(lambdaperi*(Vperi - V0peri)) - 1);
            annotation (Icon(coordinateSystem(preserveAspectRatio=false, extent={
                      {-100,-100},{100,100}}), graphics={Text(
                    extent={{102,-32},{76,-20}},
                    lineColor={0,0,255},
                    fillColor={255,170,170},
                    fillPattern=FillPattern.Forward,
                            textString="Pth"),Text(
                    extent={{-100,-22},{-74,-34}},
                    lineColor={0,0,255},
                            textString="HR"),Rectangle(
                            extent={{-20,80},{20,-60}},
                            lineColor={0,0,255},
                    fillPattern=FillPattern.Solid,
                            fillColor={0,0,255}),Text(
                    extent={{-100,-60},{100,-80}},
                    lineColor={0,0,255},
                    textString="%name"),      Text(
                    extent={{-64,70},{-38,58}},
                    lineColor={0,0,255},
                    textString="phi")}));
          end SmithOlufsen_VentricularInteraction_flat_;

          model Smith_DrivenVentricularInteraction
            "Smith ventricular model but with external driving"
              import Physiolibrary.Types.*;
            Volume Vsept(start=V0sept);
            Physiolibrary.Types.Volume V_RV(start=0.0001042);
            Physiolibrary.Types.Volume V_LV(start=0.0001042);
            Volume            Vperi;
            parameter Volume V0sept=2e-06, V0peri = 0.0002;

            Pressure Psept, Pperi;
            parameter Pressure Pi0sept=148.00118226939, Pi0rv=28.757638965416, Pi0lv=16.038683206025, Pi0peri=66.701190423724
              "peak isovolumic pressure";
            Pressure Pirv = Pi0rv*PhiEffect_passEl;
            Pressure Pilv = Pi0lv*PhiEffect_passEl;

            parameter HydraulicElastance Essept0 = 6499999676.0309, Esrv0= 77993596.637775, Eslv0=383941811.27772;

          //   parameter Physiolibrary.Types.Volume VS0sept = 1e-3 "Volume Threshold for linear Frank-starling effect";
          //   parameter Physiolibrary.Types.Volume VS0lv = 1e-3 "Volume Threshold for linear Frank-starling effect";
          //   parameter Physiolibrary.Types.Volume VS0rv = 1e-3 "Volume Threshold for linear Frank-starling effect";

          //   parameter Real Escale = 1;
            Physiolibrary.Types.Fraction PhiEffect_activeEl=(1 + alphaE*(phi - phi0))
              "Effect of Phi on active elastances, i.e. decreasing ESV";
            Physiolibrary.Types.Fraction PhiEffect_passEl=(1 - gammaE*(phi - phi0))
              "Effect of Phi on passiveElastances, i.e. increasing EDV";

            HydraulicElastance Essept=Essept0*PhiEffect_activeEl;
            HydraulicElastance Esrv=Esrv0*PhiEffect_activeEl;
            HydraulicElastance Eslv=Eslv0*PhiEffect_activeEl "elastance of systole";
            // HydraulicElastance Essept = Essept0*(1 + alphaE*(phi - phi0))*(1 + (Escale*Vsept/VS0sept-1)*(tanh(Vsept/VS0sept-2)+1)/2);
            // HydraulicElastance Esrv = Esrv0*(1 + alphaE*(phi - phi0))*(1 + (Escale*Vrv/VS0rv-1)*(tanh(Vrv/VS0rv-2)+1)/2);
            // HydraulicElastance Eslv = Eslv0*(1 + alphaE*(phi - phi0))*(1 + (Escale*Vlv/VS0lv-1)*(tanh(Vlv/VS0lv-2)+1)/2)
            //   "elastance of systole";
              parameter Real lambdas= 435000 "Lambda of septum [1/m3]";
              parameter Real lambdarv = 23000 "Lambda of RV [1/m3]";
              parameter Real lambdalv = 33000 "Lambda of LV [1/m3]";
              parameter Real lambdaperi = 30000 "Lambda of pericardium [1/m3]";
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a rvflow annotation (
               Placement(transformation(extent={{42,14},{62,34}}),
                  iconTransformation(extent={{-12,90},{8,110}})));
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a lvflow annotation (
               Placement(transformation(extent={{44,-28},{64,-8}}),
                  iconTransformation(extent={{-10,-110},{10,-90}})));
            RealIO.PressureInput Pth annotation (Placement(transformation(extent={{-8,-102},
                      {12,-82}}),         iconTransformation(
                  extent={{20,-20},{-20,20}},
                  rotation=180,
                  origin={82,0})));
            Physiolibrary.Types.RealIO.FractionInput
                                  phi
                                     annotation (Placement(transformation(extent={{-60,66},
                      {-20,106}}),          iconTransformation(extent={{-100,60},{-60,100}})));
            Physiolibrary.Types.Fraction phi0 = 0.25;
            parameter Physiolibrary.Types.Fraction alphaE(min = 0, max = 4) = 0 "linear dependency of active elastances (Essept, Esrv, Eslv) on phi";
            parameter Physiolibrary.Types.Fraction gammaE(min = 0, max = 1.33) = 0 "linear dependency of passive elastances (given by nominal pressure Pi0lv, Pi0rv) on phi";

            Physiolibrary.Types.Pressure Prv = rvflow.pressure - Pperi;
            Physiolibrary.Types.Pressure Plv = lvflow.pressure - Pperi;
            Physiolibrary.Types.Pressure Plv_passive=(1 - D)*Pi0lv*(exp(
                PhiEffect_passEl*lambdalv*(V_LV - Vsept)) - 1);

          //             Physiolibrary.Types.Volume ESV_LV;
          //             Physiolibrary.Types.Volume ESV_RV;
          //             Physiolibrary.Types.Volume EDV_LV;
          //             Physiolibrary.Types.Volume EDV_RV;
          //             Physiolibrary.Types.Volume SV_LV;
          //             Physiolibrary.Types.Volume SV_RV;
          //             Physiolibrary.Types.VolumeFlowRate CO_LV = SV_LV/HP;
          //             Physiolibrary.Types.VolumeFlowRate CO_RV = SV_RV/HP;
            Modelica.Blocks.Interfaces.RealInput D
              "Driving or activation function for heart muscles (ventricles and atria)"
                                                annotation (Placement(transformation(
                    extent={{-100,-80},{-60,-40}})));

          equation
          //   when time > t0 + ts then
          //     ESV_LV = Vlv;
          //     ESV_RV = Vrv;
          //     SV_LV = EDV_LV - ESV_LV;
          //     SV_RV = EDV_RV - ESV_RV;
          //   end when;
            //  septum
            Psept = lvflow.pressure - rvflow.pressure;
            Psept =(Vsept - V0sept)*D*Essept + (1 - D)*Pi0sept*(exp(lambdas*Vsept) - 1);
            // rightventricle
            rvflow.pressure - Pperi =(V_RV + Vsept)*D*Esrv + (1 - D)*Pi0rv*(exp(
              PhiEffect_passEl*lambdarv*(V_RV + Vsept)) - 1);
            der(V_RV) =rvflow.q;
            //leftventricle
            lvflow.pressure - Pperi =(V_LV - Vsept)*D*Eslv + Plv_passive;
            der(V_LV) =lvflow.q;
            //pericardium
            Vperi =V_RV + V_LV;
            Pperi = Pth + Pi0peri*(exp(lambdaperi*(Vperi - V0peri)) - 1);
            annotation (Icon(coordinateSystem(preserveAspectRatio=false, extent={
                      {-100,-100},{100,100}}), graphics={Text(
                    extent={{102,-32},{76,-20}},
                    lineColor={0,0,255},
                    fillColor={255,170,170},
                    fillPattern=FillPattern.Forward,
                            textString="Pth"),
                                             Rectangle(
                            extent={{-20,80},{20,-60}},
                            lineColor={0,0,255},
                    fillPattern=FillPattern.Solid,
                            fillColor={0,0,255}),Text(
                    extent={{-100,-60},{100,-80}},
                    lineColor={0,0,255},
                    textString="%name"),      Text(
                    extent={{-64,70},{-38,58}},
                    lineColor={0,0,255},
                    textString="phi")}));
          end Smith_DrivenVentricularInteraction;

          model HeartInputs "Heart model from adan venous red commit _7af7a4"
            ADAN_main.Components.Subsystems.Heart.Auxiliary.Parameters_Heart
              Parameters_Heart1 annotation (Placement(transformation(extent={{-100,
                      80},{-80,100}})));
            input Real t(unit = "s");
            input Real thoracic_pressure;
            Real mt(unit = "s", start = 0, fixed = true);
          //   Real mt_(unit = "s");
            Real mta(unit = "s", start = 0, fixed = true);
          //   Real mta_;
            input Real T(unit = "s");
            Physiolibrary.Types.Frequency f = 1/T;
            discrete Modelica.Units.SI.Time last_beat(start=0);
          //  Real int_f;
            Real d_mt = t_onset_a/f;

            Real CQ_trv;//(unit = "UnitValve");
            Real CQ_puv;//(unit = "UnitValve");
            Real CQ_miv;//(unit = "UnitValve");
            Real CQ_aov;//(unit = "UnitValve");
            Real q_ra_0(unit = "m3");
            Real q_rv_0(unit = "m3");
            Real q_la_0(unit = "m3");
            Real q_lv_0(unit = "m3");
            Real E_lv_max(unit = "J.m-6");
            Real E_lv_min(unit = "J.m-6");
            Real E_la_max(unit = "J.m-6");
            Real E_la_min(unit = "J.m-6");
            Real E_rv_max(unit = "J.m-6");
            Real E_rv_min(unit = "J.m-6");
            Real E_ra_max(unit = "J.m-6");
            Real E_ra_min(unit = "J.m-6");
            Real tau_1_lv(unit = "1");
            Real tau_2_lv(unit = "1");
            Real tau_1_la(unit = "1");
            Real tau_2_la(unit = "1");
            Real tau_1_rv(unit = "1");
            Real tau_2_rv(unit = "1");
            Real tau_1_ra(unit = "1");
            Real tau_2_ra(unit = "1");
            Real m_1_lv(unit = "1");
            Real m_2_lv(unit = "1");
            Real m_1_la(unit = "1");
            Real m_2_la(unit = "1");
            Real m_1_rv(unit = "1");
            Real m_2_rv(unit = "1");
            Real m_1_ra(unit = "1");
            Real m_2_ra(unit = "1");
            Real g_1_lv(unit = "1");
            Real g_2_lv(unit = "1");
            Real g_1_la(unit = "1");
            Real g_2_la(unit = "1");
            Real g_1_rv(unit = "1");
            Real g_2_rv(unit = "1");
            Real g_1_ra(unit = "1");
            Real g_2_ra(unit = "1");
            Real t_onset_a(unit = "1") = 0.85 "According to Mynard thesis 2011 and in contrdiction to Safaei repos";
            Real E_lv(unit = "J.m-6");
            Real E_la(unit = "J.m-6");
            Real E_rv(unit = "J.m-6");
            Real E_ra(unit = "J.m-6");
            Real H_la(unit = "1");
            Real H_lv(unit = "1");
            Real H_ra(unit = "1");
            Real H_rv(unit = "1");
            Real u_ra(unit = "Pa");
            Real u_rv(unit = "Pa");
            Real u_la(unit = "Pa");
            Real u_lv(unit = "Pa");
            input Real u_sas(unit = "Pa");
            input Real u_par(unit = "Pa");
            Real v_trv(unit = "m3.s-1");
            Real v_puv(unit = "m3.s-1");
            Real v_miv(unit = "m3.s-1");
            Real v_aov(unit = "m3.s-1");
            input Real v_sup_venacava(unit = "m3.s-1");
            input Real v_inf_venacava(unit = "m3.s-1");
            input Real v_pvn(unit = "m3.s-1");
            Real q_lv(unit = "m3", start = 600.0e-6);
            Real q_rv(unit = "m3", start = 600.0e-6);
            Real q_la(unit = "m3", start = 20.0e-6);
            Real q_ra(unit = "m3", start = 20.0e-6);
            Physiolibrary.Types.Volume stressed_volume = q_la + q_lv + q_ra + q_rv;
            Physiolibrary.Types.Volume zp_volume = q_la_0 + q_lv_0 + q_ra_0 + q_rv_0;
            Physiolibrary.Types.Volume total_volume = stressed_volume + zp_volume;
            Physiolibrary.Types.VolumeFlowRate v_ra_filling = v_sup_venacava+v_inf_venacava;
            Physiolibrary.Types.Pressure boundedTP_ra = max(thoracic_pressure*min(q_ra/q_ra_0, 1), 0);
            Physiolibrary.Types.Pressure boundedTP_rv = max(thoracic_pressure*min(q_rv/q_rv_0, 1), 0);
            Physiolibrary.Types.Pressure boundedTP_la = max(thoracic_pressure*min(q_la/q_la_0, 1), 0);
            Physiolibrary.Types.Pressure boundedTP_lv = max(thoracic_pressure*min(q_lv/q_lv_0, 1), 0);
          equation
          //  T = Parameters_Heart1.T;
            CQ_trv = Parameters_Heart1.CQ_trv;
            CQ_puv = Parameters_Heart1.CQ_puv;
            CQ_miv = Parameters_Heart1.CQ_miv;
            CQ_aov = Parameters_Heart1.CQ_aov;
            E_lv_max = Parameters_Heart1.E_lv_max;
            E_lv_min = Parameters_Heart1.E_lv_min;
            E_la_max = Parameters_Heart1.E_la_max;
            E_la_min = Parameters_Heart1.E_la_min;
            E_rv_max = Parameters_Heart1.E_rv_max;
            E_rv_min = Parameters_Heart1.E_rv_min;
            E_ra_max = Parameters_Heart1.E_ra_max;
            E_ra_min = Parameters_Heart1.E_ra_min;
            tau_1_lv = Parameters_Heart1.tau_1_lv;
            tau_2_lv = Parameters_Heart1.tau_2_lv;
            tau_1_la = Parameters_Heart1.tau_1_la;
            tau_2_la = Parameters_Heart1.tau_2_la;
            tau_1_rv = Parameters_Heart1.tau_1_rv;
            tau_2_rv = Parameters_Heart1.tau_2_rv;
            tau_1_ra = Parameters_Heart1.tau_1_ra;
            tau_2_ra = Parameters_Heart1.tau_2_ra;
            m_1_lv = Parameters_Heart1.m_1_lv;
            m_2_lv = Parameters_Heart1.m_2_lv;
            m_1_la = Parameters_Heart1.m_1_la;
            m_2_la = Parameters_Heart1.m_2_la;
            m_1_rv = Parameters_Heart1.m_1_rv;
            m_2_rv = Parameters_Heart1.m_2_rv;
            m_1_ra = Parameters_Heart1.m_1_ra;
            m_2_ra = Parameters_Heart1.m_2_ra;
          //  t_onset_a = Parameters_Heart1.t_onset_a;
            q_ra_0 = Parameters_Heart1.q_ra_0;
            q_rv_0 = Parameters_Heart1.q_rv_0;
            q_la_0 = Parameters_Heart1.q_la_0;
            q_lv_0 = Parameters_Heart1.q_lv_0;

            H_lv =ADAN_main.Components.Interfaces.pow((tau_1_lv + tau_2_lv)/(
              tau_1_lv + tau_1_lv), m_1_lv)/(
              ADAN_main.Components.Interfaces.pow((tau_1_lv + tau_2_lv)/(
              tau_1_lv + tau_1_lv), m_1_lv) + 1)*1/(
              ADAN_main.Components.Interfaces.pow((tau_1_lv + tau_2_lv)/(
              tau_2_lv + tau_2_lv), m_2_lv) + 1);
            H_la =ADAN_main.Components.Interfaces.pow((tau_1_la + tau_2_la)/(
              tau_1_la + tau_1_la), m_1_la)/(
              ADAN_main.Components.Interfaces.pow((tau_1_la + tau_2_la)/(
              tau_1_la + tau_1_la), m_1_la) + 1)*1/(
              ADAN_main.Components.Interfaces.pow((tau_1_la + tau_2_la)/(
              tau_2_la + tau_2_la), m_2_la) + 1);
            H_rv =ADAN_main.Components.Interfaces.pow((tau_1_rv + tau_2_rv)/(
              tau_1_rv + tau_1_rv), m_1_rv)/(
              ADAN_main.Components.Interfaces.pow((tau_1_rv + tau_2_rv)/(
              tau_1_rv + tau_1_rv), m_1_rv) + 1)*1/(
              ADAN_main.Components.Interfaces.pow((tau_1_rv + tau_2_rv)/(
              tau_2_rv + tau_2_rv), m_2_rv) + 1);
            H_ra =ADAN_main.Components.Interfaces.pow((tau_1_ra + tau_2_ra)/(
              tau_1_ra + tau_1_ra), m_1_ra)/(
              ADAN_main.Components.Interfaces.pow((tau_1_ra + tau_2_ra)/(
              tau_1_ra + tau_1_ra), m_1_ra) + 1)*1/(
              ADAN_main.Components.Interfaces.pow((tau_1_ra + tau_2_ra)/(
              tau_2_ra + tau_2_ra), m_2_ra) + 1);
                E_lv = (E_lv_max-E_lv_min)*g_1_lv/((g_1_lv+1)*(g_2_lv+1)*H_lv)+E_lv_min;
            g_1_lv =ADAN_main.Components.Interfaces.pow(mt/(tau_1_lv*T), m_1_lv);
            g_2_lv =ADAN_main.Components.Interfaces.pow(mt/(tau_2_lv*T), m_2_lv);
                E_la = (E_la_max-E_la_min)*g_1_la/((g_1_la+1)*(g_2_la+1)*H_la)+E_la_min;
            g_1_la =ADAN_main.Components.Interfaces.pow(mta/(tau_1_la*T),
              m_1_la);
            g_2_la =ADAN_main.Components.Interfaces.pow(mta/(tau_2_la*T),
              m_2_la);
                E_rv = (E_rv_max-E_rv_min)*g_1_rv/((g_1_rv+1)*(g_2_rv+1)*H_rv)+E_rv_min;
            g_1_rv =ADAN_main.Components.Interfaces.pow(mt/(tau_1_rv*T), m_1_rv);
            g_2_rv =ADAN_main.Components.Interfaces.pow(mt/(tau_2_rv*T), m_2_rv);
                E_ra = (E_ra_max-E_ra_min)*g_1_ra/((g_1_ra+1)*(g_2_ra+1)*H_ra)+E_ra_min;
            g_1_ra =ADAN_main.Components.Interfaces.pow(mta/(tau_1_ra*T),
              m_1_ra);
            g_2_ra =ADAN_main.Components.Interfaces.pow(mta/(tau_2_ra*T),
              m_2_ra);

                // Original model
          //       mt = t-T*floor(t/T);
          //       mta = t-t_onset_a*T-T*floor((t-t_onset_a*T)/T);

                 //improvement for varying frequency
                der(mt) = 1;
                der(mta) = 1;

                when (time > pre(last_beat) + T) then
                  reinit(mt, 0);
                  last_beat = time;
                end when;

                when (time > last_beat + t_onset_a*T) then
                  reinit(mta, 0);
                end when;

                //mta = t-t_onset_a*T-floor((t-t_onset_a*T));

                v_trv = noEvent(if u_ra >= u_rv and q_ra + q_ra_0 > 0 then
                        CQ_trv*sqrt(u_ra -u_rv)
                    else
                        0.0);
                         /*  u_ra < u_rv */

                v_puv = noEvent(if u_rv >= u_par and q_rv + q_rv_0 > 0 then
                        CQ_puv*sqrt(u_rv-u_par)
                    else
                        0.0);
                         /*  u_rv < u_par */

                v_miv = noEvent(if u_la >= u_lv and q_la + q_la_0 > 0 then
                        CQ_miv*sqrt(u_la-u_lv)
                    else
                        0.0);
                         /*  u_la < u_lv */

                v_aov = noEvent(if u_lv >= u_sas and q_lv + q_lv_0 > 0 then
                        CQ_aov*sqrt(u_lv-u_sas)
                    else
                        0.0);
                         /*  u_lv < u_sas */

                u_ra = E_ra*(q_ra-q_ra_0) + boundedTP_ra;
                u_rv = E_rv*(q_rv-q_rv_0) + boundedTP_rv;
                u_la = E_la*(q_la-q_la_0) + boundedTP_la;
                u_lv = E_lv*(q_lv-q_lv_0) + boundedTP_lv;

                der(q_ra) = v_sup_venacava+v_inf_venacava-v_trv;
                der(q_rv) = v_trv-v_puv;
                der(q_la) = v_pvn-v_miv;
                der(q_lv) = v_miv-v_aov;

          end HeartInputs;

          model Parameters_Heart "AdanVenousRed _7af7a4"
            parameter Real T(unit = "s") = 1.0;
            parameter Real CQ_trv = 34.6427e-6 "UnitValve";
            parameter Real CQ_puv = 30.3124e-6 "UnitValve";
            parameter Real CQ_miv = 34.6427e-6 "UnitValve";
            parameter Real CQ_aov = 30.3124e-6 "UnitValve";
            parameter Real E_la_max(unit = "J.m-6") = 213.28e+5;
            parameter Real E_lv_max(unit = "J.m-6") = 2857.39e+5;
            parameter Real E_ra_max(unit = "J.m-6") = 173.29e+5;
            parameter Real E_rv_max(unit = "J.m-6") = 799.8e+5;
            parameter Real E_la_min(unit = "J.m-6") = 119.97e+5;
            parameter Real E_lv_min(unit = "J.m-6") = 106.64e+5;
            parameter Real E_ra_min(unit = "J.m-6") = 93.31e+5;
            parameter Real E_rv_min(unit = "J.m-6") = 66.65e+5;
            parameter Real q_lv_0(unit = "m3") = 5.0e-6;
            parameter Real q_rv_0(unit = "m3") = 10.0e-6;
            parameter Real q_la_0(unit = "m3") = 4.0e-6;
            parameter Real q_ra_0(unit = "m3") = 4.0e-6;
            parameter Real tau_1_lv(unit = "1") = 0.215;
            parameter Real tau_1_rv(unit = "1") = 0.215;
            parameter Real tau_1_la(unit = "1") = 0.042;
            parameter Real tau_1_ra(unit = "1") = 0.042;
            parameter Real tau_2_lv(unit = "1") = 0.362;
            parameter Real tau_2_rv(unit = "1") = 0.362;
            parameter Real tau_2_la(unit = "1") = 0.138;
            parameter Real tau_2_ra(unit = "1") = 0.138;
            parameter Real t_onset_a(unit = "1") = 0.65;
            parameter Real m_1_lv(unit = "1") = 1.32;
            parameter Real m_1_rv(unit = "1") = 1.32;
            parameter Real m_1_la(unit = "1") = 1.99;
            parameter Real m_1_ra(unit = "1") = 1.99;
            parameter Real m_2_lv(unit = "1") = 21.9;
            parameter Real m_2_rv(unit = "1") = 21.9;
            parameter Real m_2_la(unit = "1") = 11.2;
            parameter Real m_2_ra(unit = "1") = 11.2;
          equation

          end Parameters_Heart;

          package TriSeg_components "Heart and its subparts"

            package Environment "Central model settings and environment"

              import Physiolibrary.Types.*;

              model ComplexEnvironment "Class encompassing all settings"
                import ADAN_main;
                extends ADAN_main.Components.Icons.Settings;
              //   import Cardiovascular.Model.Complex.Components.Main.SystemicArteries.*;

              //   inner replaceable Conditions.Rest_NoAdapt condition constrainedby
              //     Conditions.Abstraction.Condition
              //     "Selected global condition and adaptation"
              //     annotation (choicesAllMatching=true);

              //   replaceable Supports.No supports constrainedby Supports.Abstraction.Supports
              //     "Selected settings of cardiac supports"
              //     annotation (choicesAllMatching=true);

                replaceable Initialization.PhysiologicalAdapted initialization
                  constrainedby Initialization.Abstraction.Initialization
                  "Selected initialization of components"
                  annotation (choicesAllMatching=true);

                replaceable ModelConstants.Standard constants constrainedby
                  ModelConstants.Standard "Selected set of basic constants"
                  annotation (choicesAllMatching=true);

              equation

              //   // Controling adaptation convergence
              //   when change(stepCycle) then
              //     feedback[:] = {avg_PC_dp. average  * 760 / 101325, avg_cVSA_q. average * 1e6, avg_cVSA_p. average * 760 / 101325};
              //     feedbackError = sum((feedback[i] - pre(feedback[i])) ^ 2 for i in 1 : size(feedback, 1));
              //     newMode = settings.condition.processFeedback(feedbackError, pre(counter) >= 14);
              //     counter = if pre(counter) < 14 and settings. condition. adaptationPhase and pre(settings. condition. adaptationPhase) then (if newMode <> pre(settings. condition. mode) then pre(counter) + 1 else max(0, pre(counter) - 1)) else pre(counter);
              //     reinit(settings. condition. mode, newMode);
              //   end when;

                annotation (
                        defaultComponentName="triSeg_environment",
                  defaultComponentPrefixes="inner",
                  missingInnerMessage="No \"triSeg_environment\" component is defined. A default triSeg_environment
    component is required for proper function. Its enough to drop it to the top-level scene!",
                        Icon(coordinateSystem(preserveAspectRatio=false, extent={{-100,-100},
                          {100,100}})));
              end ComplexEnvironment;

              package Conditions "Setting global condition including adaptation"
                package Abstraction "Common ancestors"
                  partial model Condition "Basic condition definition"
                    import Cardiovascular.Types.*;

                    parameter Frequency heartBeat(displayUnit="1/s") = 1/0.85
                      "Heart beat";
                    parameter Pressure aortalPressureRef=12200
                      "Reference pressure in aorta";
                    parameter Pressure pulmonaryPressureDropRef=1500
                      "Reference pressure drop over pulmonary capillaries";

                    Time cycleDuration=1/heartBeat "Duration of cardiac cycle";
                    VolumeFlowRate aortalFlowRef=85e-6 "Reference flow through aorta";
                    Volume bloodVolumeRef=0.95e-3 "Reference blood volume";

                    Boolean adaptCapillaryResistance=true
                      "Whether capillary resistance should be adapted";
                    Boolean adaptVesselDiameter=false
                      "Whether cross-sectional area of vessels should be adapted";
                    Boolean adaptValveDiameter=false
                      "Whether valve cross-sectional area should be adapted";
                    Boolean adaptVesselWVolume=false
                      "Whether wall volume of vessels should be adapted";
                    Boolean adaptTriSegJunction=false
                      "Whether correctional coefficient for heart geometry should be adapted";
                    Boolean adaptChamberWVolume=false
                      "Whether wall volume in heart walls should be adapted";
                    Boolean adaptChamberWArea=false
                      "Whether wall surface area in heart walls should be adapted";
                    Boolean adaptChamberEcmStress=false
                      "Whether reference myofiber passive stress should be adapted";
                    Boolean adaptPericardium=false
                      "Whether pericardium should be adapted";
                    Boolean adaptationPhase=false "Whether adaptation is in progress";

                    Real mode(start=0, fixed=true)
                      "Inner state used in adaptation protocol";

                    function processFeedback = ProcessFeedback (mode=mode)
                      "Evaluates convergence";

                    replaceable partial function ProcessFeedback
                      "Can evaluate and react to convergence when redeclared"
                      input Real error "Feedback error to evaluate convergence";
                      input Boolean inEndPhase=false
                        "Whether global convergence has been reached";
                      input Real mode
                        "Inner state through which the function interacts";
                      output Real result=mode "New state";
                    algorithm
                    end ProcessFeedback;

                  equation
                    der(mode) = 0;

                  end Condition;
                end Abstraction;

                model Rest_NoAdapt "Resting condition with no adaptation"
                  extends Conditions.Abstraction.Condition(adaptCapillaryResistance=
                        false);

                end Rest_NoAdapt;

                model Rest_MinimalAdapt
                  "Resting condition with adaptation of capillary resistance"
                  extends Conditions.Abstraction.Condition(adaptCapillaryResistance=
                        true, adaptationPhase=true);

                end Rest_MinimalAdapt;

                model Rest_Adapt "Adaptation phase in resting condition"
                  extends Conditions.Rest_MinimalAdapt(adaptVesselDiameter=true,
                    adaptValveDiameter=true);

                end Rest_Adapt;

                model Exercise_Adapt "Adaptation phase for exercise"
                  extends Conditions.Rest_MinimalAdapt(
                    heartBeat=1/0.425,
                    aortalFlowRef=255e-6,
                    bloodVolumeRef=1.3e-3,
                    adaptVesselWVolume=true,
                    adaptTriSegJunction=true,
                    adaptChamberWVolume=true,
                    adaptChamberWArea=true,
                    adaptChamberEcmStress=true,
                    adaptPericardium=true);

                end Exercise_Adapt;

                model AdaptationProtocol
                  "Adaptation protocol switching between resting and exercise adaptation phases"
                  extends Conditions.Abstraction.Condition(
                    cycleDuration=if mode < 2 then adaptRest.cycleDuration else
                        adaptEx.cycleDuration,
                    adaptCapillaryResistance=true,
                    adaptVesselDiameter=mode >= 1 and mode < 2,
                    adaptValveDiameter=mode >= 1 and mode < 2,
                    adaptVesselWVolume=mode >= 3,
                    adaptTriSegJunction=mode >= 3,
                    adaptChamberWVolume=mode >= 3,
                    adaptChamberWArea=mode >= 3,
                    adaptChamberEcmStress=mode >= 3,
                    adaptPericardium=mode >= 3,
                    aortalFlowRef=if mode < 2 then adaptRest.aortalFlowRef else
                        adaptEx.aortalFlowRef,
                    bloodVolumeRef=if mode < 2 then adaptRest.bloodVolumeRef else
                        adaptEx.bloodVolumeRef,
                    adaptationPhase=mode >= 1 and mode < 2 or mode >= 3);

                  Conditions.Rest_Adapt adaptRest "Resting adaptation phase settings";
                  Conditions.Exercise_Adapt adaptEx
                    "Exercise adaptation phase settings";

                  redeclare partial function ProcessFeedback
                    "Evaluates changes between two cardiac cycles and adjusts adaptation mode"
                    input Real error "Feedback error to evaluate convergence";
                    input Boolean inEndPhase=false
                      "Whether global convergence has been reach - parking in resting condition is awaited";
                    input Real mode
                      "Adaptation phase - 0-1: stabilization at rest, 1-2: adaptation at rest, 2-3: stabilization during exercise, 3-4: adaptation during exercise";
                    output Real result=if error < 1e-2 then (if mode > 0 then (if
                        inEndPhase and mode >= 1 and mode <= 1.25 then mode else mod(
                        mode + 0.25, 4)) else mode + 0.25) else mode "New mode";
                  algorithm
                  end ProcessFeedback;

                end AdaptationProtocol;

              end Conditions;

              package Initialization "Initialization for components"
                package Abstraction "Common ancestors"
                  partial record Initialization "Initial values for circuit segments"
                    import Physiolibrary.Types.*;

                    parameter Pressure SA_pRef
                      "Reference pressure for systemic arteries";
                    parameter Area SA_ARef
                      "Reference cavity cross-sectional area for systemic arteries";
                    parameter Area SA_AW
                      "Wall cross-sectional area for systemic arteries";
                    parameter Length SA_l
                      "Length of systemic arteries";
                    parameter Real SA_k
                      "Stiffness non-linearity coefficient for systemic arteries";

                    parameter Pressure SV_pRef
                      "Reference pressure for systemic veins";
                    parameter Area SV_ARef
                      "Reference cavity cross-sectional area for systemic veins";
                    parameter Area SV_AW
                      "Wall cross-sectional area for systemic veins";
                    parameter Length SV_l
                      "Length of systemic veins";
                    parameter Real SV_k
                      "Stiffness non-linearity coefficient for systemic veins";

                    parameter Pressure PA_pRef
                      "Reference pressure for pulmonary arteries";
                    parameter Area PA_ARef
                      "Reference cavity cross-sectional area for pulmonary arteries";
                    parameter Area PA_AW
                      "Wall cross-sectional area for pulmonary arteries";
                    parameter Length PA_l
                      "Length of pulmonary arteries";
                    parameter Real PA_k
                      "Stiffness non-linearity coefficient for pulmonary arteries";

                    parameter Pressure PV_pRef
                      "Reference pressure for pulmonary veins";
                    parameter Area PV_ARef
                      "Reference cavity cross-sectional area for pulmonary veins";
                    parameter Area PV_AW
                      "Wall cross-sectional area for pulmonary veins";
                    parameter Length PV_l
                      "Length of pulmonary veins";
                    parameter Real PV_k
                      "Stiffness non-linearity coefficient for pulmonary veins";

                    parameter HydraulicResistance SC_R
                      "Resistence of systemic capillaries";
                    parameter HydraulicResistance PC_R
                      "Resistence of pulmonary capillaries";

                    parameter Area vLAV_ARef
                      "Reference cross-sectional area of left atrio-ventricular valve";
                    parameter Length vLAV_l
                      "Length of left atrio-ventricular valve";
                    parameter Real vLAV_Ko
                      "Time coefficient for opening of left atrio-ventricular valve";
                    parameter Real vLAV_Kc
                      "Time coefficient for closing of left atrio-ventricular valve";
                    parameter Fraction vLAV_Mrg
                      "Severity of left atrio-ventricular valve regurgitation";
                    parameter Fraction vLAV_Mst
                      "Severity of left atrio-ventricular valve stenosis";
                    parameter Pressure vLAV_dpO
                      "Opening pressure for left atrio-ventricular valve";
                    parameter Pressure vLAV_dpC
                      "Closing pressure for left atrio-ventricular valve";

                    parameter Area vRAV_ARef
                      "Reference cross-sectional area of right atrio-ventricular valve";
                    parameter Length vRAV_l
                      "Length of right atrio-ventricular valve";
                    parameter Real vRAV_Ko
                      "Time coefficient for opening of right atrio-ventricular valve";
                    parameter Real vRAV_Kc
                      "Time coefficient for closing of right atrio-ventricular valve";
                    parameter Real vRAV_Mrg
                      "Severity of right atrio-ventricular valve regurgitation";
                    parameter Real vRAV_Mst
                      "Severity of right atrio-ventricular valve stenosis";
                    parameter Pressure vRAV_dpO
                      "Opening pressure for right atrio-ventricular valve";
                    parameter Pressure vRAV_dpC
                      "Closing pressure for right atrio-ventricular valve";

                    parameter Area vSA_ARef
                      "Reference cross-sectional area of aortic valve";
                    parameter Length vSA_l
                      "Length of aortic valve";
                    parameter Real vSA_Ko
                      "Time coefficient for opening of aortic valve";
                    parameter Real vSA_Kc
                      "Time coefficient for closing of aortic valve";
                    parameter Fraction vSA_Mrg
                      "Severity of aortic valve regurgitation";
                    parameter Fraction vSA_Mst "Severity of aortic valve stenosis";
                    parameter Pressure vSA_dpO "Opening pressure for aortic valve";
                    parameter Pressure vSA_dpC "Closing pressure for aortic valve";

                    parameter Area vPA_ARef
                      "Reference cross-sectional area of pulmonary valve";
                    parameter Length vPA_l
                      "Length of pulmonary valve";
                    parameter Real vPA_Ko
                      "Time coefficient for opening of pulmonary valve";
                    parameter Real vPA_Kc
                      "Time coefficient for closing of pulmonary valve";
                    parameter Fraction vPA_Mrg
                      "Severity of pulmonary valve regurgitation";
                    parameter Fraction vPA_Mst "Severity of pulmonary valve stenosis";
                    parameter Pressure vPA_dpO "Opening pressure for pulmonary valve";
                    parameter Pressure vPA_dpC "Closing pressure for pulmonary valve";

                    parameter Area vSV_ARef
                      "Reference cross-sectional area of left atrial inlet";
                    parameter Length vSV_l
                      "Length of left atrial inlet";
                    parameter Real vSV_Ko
                      "Time coefficient for opening of left atrial inlet";
                    parameter Real vSV_Kc
                      "Time coefficient for closing of left atrial inlet";
                    parameter Fraction vSV_Mrg
                      "Severity left atrial inlet regurgitation (pseudo-valve - should be 100 %)";
                    parameter Fraction vSV_Mst
                      "Severity of left atrial inlet stenosis";
                    parameter Pressure vSV_dpO
                      "Opening pressure for left atrial inlet";
                    parameter Pressure vSV_dpC
                      "Closing pressure for left atrial inlet";

                    parameter Area vPV_ARef
                      "Reference cross-sectional area of right atrial inlet";
                    parameter Length vPV_l
                      "Length of right atrial inlet";
                    parameter Real vPV_Ko
                      "Time coefficient for opening of right atrial inlet";
                    parameter Real vPV_Kc
                      "Time coefficient for closing of right atrial inlet";
                    parameter Fraction vPV_Mrg
                      "Severity of right atrial inlet regurgitation (pseudo-valve - should be 100 %)";
                    parameter Fraction vPV_Mst
                      "Severity of right atrial inlet stenosis";
                    parameter Pressure vPV_dpO
                      "Opening pressure for right atrial inlet";
                    parameter Pressure vPV_dpC
                      "Closing pressure for right atrial inlet";

                    parameter Volume RA_Am "Mid-wall area of right atrium";
                    parameter Area RA_AmRef
                      "Reference mid-wall area of right atrium";
                    parameter Area RA_Am0
                      "Dead space mid-wall area of right atrium";
                    parameter Volume RA_VW "Wall volume of right atrium";
                    parameter Pressure RA_sigmaPRef
                      "Reference passive myofiber stress in right atrium";
                    parameter Time RA_tauA_Base(displayUnit="s")
                      "Activation time offset for right atrium";
                    parameter Real RA_tauA_CycleFraction
                      "Activation time fraction of cardiac cycle duration for right atrium";
                    parameter Time RA_tDelay_Base(displayUnit="s")
                      "Activation delay offset for right atrium";
                    parameter Real RA_tDelay_CycleFraction
                      "Activation delay fraction of cardiac cycle duration for right atrium";

                    parameter Volume LA_Am "Mid-wall area of left atrium";
                    parameter Area LA_AmRef
                      "Reference mid-wall area of left atrium";
                    parameter Area LA_Am0
                      "Dead space mid-wall area of left atrium";
                    parameter Volume LA_VW "Wall volume of left atrium";
                    parameter Pressure LA_sigmaPRef
                      "Reference passive myofiber stress in left atrium";
                    parameter Time LA_tauA_Base(displayUnit="s")
                      "Activation time offset for left atrium";
                    parameter Real LA_tauA_CycleFraction
                      "Activation time fraction of cardiac cycle duration for left atrium";
                    parameter Time LA_tDelay_Base(displayUnit="s")
                      "Activation delay offset for left atrium";
                    parameter Real LA_tDelay_CycleFraction
                      "Activation delay fraction of cardiac cycle duration for left atrium";

                    parameter Area LW_EAmRef
                      "Correctional coefficient of ventricle geometry for left ventricular wall";
                    parameter Area LW_AmRef
                      "Reference mid-wall area of left ventricular wall";
                    parameter Area LW_Am0
                      "Dead space mid-wall area of left ventricular wall";
                    parameter Volume LW_VW "Wall volume of left ventricular wall";
                    parameter Pressure LW_sigmaPRef
                      "Reference passive myofiber stress in left ventricular wall";
                    parameter Time LW_tauA_Base(displayUnit="s")
                      "Activation time offset for left ventricular wall";
                    parameter Real LW_tauA_CycleFraction
                      "Activation time fraction of cardiac cycle duration for left ventricular wall";
                    parameter Time LW_tDelay_Base(displayUnit="s")
                      "Activation delay offset for left ventricular wall";
                    parameter Real LW_tDelay_CycleFraction
                      "Activation delay fraction of cardiac cycle duration for left ventricular wall";

                    parameter Area SW_EAmRef
                      "Correctional coefficient of ventricle geometry for sepal wall";
                    parameter Area SW_AmRef
                      "Reference mid-wall area of sepal wall";
                    parameter Area SW_Am0
                      "Dead space mid-wall area of sepal wall";
                    parameter Volume SW_VW "Wall volume of sepal wall";
                    parameter Pressure SW_sigmaPRef
                      "Reference passive myofiber stress in sepal wall";
                    parameter Time SW_tauA_Base(displayUnit="s")
                      "Activation time offset for sepal wall";
                    parameter Real SW_tauA_CycleFraction
                      "Activation time fraction of cardiac cycle duration for sepal wall";
                    parameter Time SW_tDelay_Base(displayUnit="s")
                      "Activation delay offset for sepal wall";
                    parameter Real SW_tDelay_CycleFraction
                      "Activation delay fraction of cardiac cycle duration for sepal wall";

                    parameter Area RW_EAmRef
                      "Correctional coefficient of ventricle geometry for right ventricular wall";
                    parameter Area RW_AmRef
                      "Reference mid-wall area of right ventricular wall";
                    parameter Area RW_Am0
                      "Dead space mid-wall area of right ventricular wall";
                    parameter Volume RW_VW "Wall volume of right ventricular wall";
                    parameter Pressure RW_sigmaPRef
                      "Reference passive myofiber stress in right ventricular wall";
                    parameter Time RW_tauA_Base(displayUnit="s")
                      "Activation time offset for right ventricular wall";
                    parameter Real RW_tauA_CycleFraction
                      "Activation time fraction of cardiac cycle duration for right ventricular wall";
                    parameter Time RW_tDelay_Base(displayUnit="s")
                      "Activation delay offset for right ventricular wall";
                    parameter Real RW_tDelay_CycleFraction
                      "Activation delay fraction of cardiac cycle duration for right ventricular wall";

                    parameter Real peri_k
                      "Stiffness non-linearity coefficient for pericardium";
                    parameter Volume peri_VRef "Reference volume of pericardium";
                    parameter Pressure peri_pRef "Reference pericardial pressure";

                  end Initialization;
                end Abstraction;

                record Original
                  "Original set of initialization parameters based on source code for CircAdapt by Arts et al. (2012)"
                  extends Abstraction.Initialization(
                    SA_pRef=12289,
                    SA_ARef=499e-6,
                    SA_AW=117e-6,
                    SA_l=0.4001,
                    SA_k=8,
                    SV_pRef=133,
                    SV_ARef=499e-6,
                    SV_AW=34e-6,
                    SV_l=0.4001,
                    SV_k=10,
                    PA_pRef=1804,
                    PA_ARef=507e-6,
                    PA_AW=50e-6,
                    PA_l=0.2001,
                    PA_k=8,
                    PV_pRef=326,
                    PV_ARef=504e-6,
                    PV_AW=49e-6,
                    PV_l=0.2001,
                    PV_k=10,
                    SC_R=141.81e6,
                    PC_R=17.663e6,
                    vLAV_ARef=7.474e-4,
                    vLAV_l=0.0246,
                    vLAV_Ko=0.3,
                    vLAV_Kc=0.4,
                    vLAV_Mrg=0,
                    vLAV_Mst=0,
                    vLAV_dpO=0,
                    vLAV_dpC=0,
                    vRAV_ARef=7.4785e-4,
                    vRAV_l=0.0246,
                    vRAV_Ko=0.3,
                    vRAV_Kc=0.4,
                    vRAV_Mrg=0,
                    vRAV_Mst=0,
                    vRAV_dpO=0,
                    vRAV_dpC=0,
                    vSA_ARef=4.9827e-4,
                    vSA_l=0.0201,
                    vSA_Ko=0.12,
                    vSA_Kc=0.12,
                    vSA_Mrg=0,
                    vSA_Mst=0,
                    vSA_dpO=0,
                    vSA_dpC=0,
                    vPA_ARef=4.9857e-4,
                    vPA_l=0.0201,
                    vPA_Ko=0.2,
                    vPA_Kc=0.2,
                    vPA_Mrg=0,
                    vPA_Mst=0,
                    vPA_dpO=0,
                    vPA_dpC=0,
                    vSV_ARef=5.2312e-4,
                    vSV_l=0.0201,
                    vSV_Ko=1/inf,
                    vSV_Kc=1/inf,
                    vSV_Mrg=1,
                    vSV_Mst=0,
                    vSV_dpO=0,
                    vSV_dpC=0,
                    vPV_ARef=5.1906e-4,
                    vPV_l=0.0201,
                    vPV_Ko=1/inf,
                    vPV_Kc=1/inf,
                    vPV_Mrg=1,
                    vPV_Mst=0,
                    vPV_dpO=0,
                    vPV_dpC=0,
                    RA_Am=57e-4,
                    RA_AmRef=55e-4,
                    RA_Am0=12e-4,
                    RA_VW=4.8e-6,
                    RA_sigmaPRef=19353,
                    RA_tauA_Base=0,
                    RA_tauA_CycleFraction=0.15/0.85,
                    RA_tDelay_Base=0,
                    RA_tDelay_CycleFraction=0,
                    LA_Am=68e-4,
                    LA_AmRef=62e-4,
                    LA_Am0=12e-4,
                    LA_VW=15e-6,
                    LA_sigmaPRef=11156,
                    LA_tauA_Base=0,
                    LA_tauA_CycleFraction=0.15/0.85,
                    LA_tDelay_Base=0.02,
                    LA_tDelay_CycleFraction=0,
                    LW_EAmRef=0,
                    LW_AmRef=89e-4,
                    LW_Am0=12e-4,
                    LW_VW=99e-6,
                    LW_sigmaPRef=4373,
                    LW_tauA_Base=0.085,
                    LW_tauA_CycleFraction=0.4,
                    LW_tDelay_Base=0,
                    LW_tDelay_CycleFraction=0.185,
                    SW_EAmRef=-0.1059,
                    SW_AmRef=52e-4,
                    SW_Am0=5e-10,
                    SW_VW=44e-6,
                    SW_sigmaPRef=4629,
                    SW_tauA_Base=0.085,
                    SW_tauA_CycleFraction=0.4,
                    SW_tDelay_Base=0,
                    SW_tDelay_CycleFraction=0.185,
                    RW_EAmRef=0,
                    RW_AmRef=119e-4,
                    RW_Am0=12e-4,
                    RW_VW=43e-6,
                    RW_sigmaPRef=5144,
                    RW_tauA_Base=0.085,
                    RW_tauA_CycleFraction=0.4,
                    RW_tDelay_Base=0,
                    RW_tDelay_CycleFraction=0.185,
                    peri_k=10,
                    peri_VRef=609e-6,
                    peri_pRef=500);
                  import Modelica.Constants.*;

                end Original;

                record PhysiologicalAdapted
                  "Set of parameters adapted to the model structure"
                  extends Original(
                    SA_pRef=1.269250e+04,
                    SA_ARef=5.200303e-04,
                    SA_AW=1.047177e-04,
                    SV_pRef=2.378004e+02,
                    SV_ARef=5.164770e-04,
                    SV_AW=3.530430e-05,
                    PA_pRef=2.221040e+03,
                    PA_ARef=5.527450e-04,
                    PA_AW=5.971791e-05,
                    PV_pRef=7.568972e+02,
                    PV_ARef=5.486271e-04,
                    PV_AW=5.756578e-05,
                    SC_R=140736288,
                    PC_R=16254300,
                    vLAV_ARef=7.738475e-04,
                    vRAV_ARef=8.142545e-04,
                    vSA_ARef=5.158983e-04,
                    vPA_ARef=5.428363e-04,
                    vSV_ARef=5.159014e-04,
                    vPV_ARef=5.428373e-04,
                    RA_AmRef=5.399583e-03,
                    RA_Am0=1.357092e-03,
                    RA_VW=7.999816e-06,
                    RA_sigmaPRef=1.358824e+04,
                    LA_AmRef=6.022352e-03,
                    LA_Am0=1.289749e-03,
                    LA_VW=2.016152e-05,
                    LA_sigmaPRef=1.471949e+04,
                    LW_AmRef=8.534521e-03,
                    LW_Am0=1.289746e-03,
                    LW_VW=9.951744e-05,
                    LW_sigmaPRef=8.666301e+03*0.64,
                    LW_EAmRef=0,
                    SW_AmRef=5.111006e-03,
                    SW_Am0=0,
                    SW_VW=4.050521e-05,
                    SW_sigmaPRef=8.638455e+03*0.64,
                    SW_EAmRef=-8.544202e-03,
                    RW_AmRef=1.268816e-02,
                    RW_Am0=1.357091e-03,
                    RW_VW=5.069673e-05,
                    RW_sigmaPRef=9.300374e+03*0.64,
                    RW_EAmRef=0,
                    peri_VRef=6.651555e-04);

                end PhysiologicalAdapted;
              end Initialization;

              package Supports "Settings of cardiac supports"
                package Abstraction "Common ancestors"
                  partial record Supports
                    "Definition of standard settings for cardiac supports"
                    import Cardiovascular.Types.*;

                    parameter Boolean _DT_IABP_isEnabled
                      "Whether IABP is implanted (derived tree only)";
                    parameter Time _DT_IABP_inflationTime(displayUnit="s") = 0.57
                      "IABP inflation timing with respect to cardiac cycle (derived tree only)";
                    parameter Time _DT_IABP_deflationTime(displayUnit="s") = 0.28
                      "IABP deflation timing with respect to cardiac cycle (derived tree only)";

                    parameter Boolean ECMO_isEnabled "Whether ECMO is connected";
                    parameter VolumeFlowRate ECMO_qMeanRef=1.6666666666667e-06
                      "Reference mean flow through ECMO";
                    parameter Cardiovascular.Types.PulseShape ECMO_pulseShapeRef=
                        PulseShape.pulseless "Shape of ECMO pulse or constant flow";
                    parameter Time ECMO_cycleDuration(displayUnit="s") = 0.85
                      "Cycle duration for ECMO pulses";
                    parameter Time ECMO_pulseDuration(displayUnit="s") = 0.85/4
                      "Duration of reference ECMO pulse";
                    parameter Time ECMO_pulseStartTime(displayUnit="s") = 0
                      "Starting time of reference ECMO pulse with respect to cardiac cycle";
                    parameter Cardiovascular.Types.CannulaPlacement
                      ECMO_cannulaPlacement=CannulaPlacement.ascendingAorta
                      "Insertion location of ECMO cannula (arterial trees only)";
                    parameter Cardiovascular.Types.Length ECMO_cannulaLength=0.15
                      "Length of ECMO cannulas";
                    parameter Cardiovascular.Types.Length ECMO_cannulaInnerDiameter=
                        0.005 "Inner diameter of ECMO cannulas";
                    parameter Cardiovascular.Types.Length
                      _DT_ECMO_cannulaOuterDiameter=0.007
                      "Outer diameter of ECMO cannulas (derived tree only)";
                    parameter Cardiovascular.Types.Length _DT_ECMO_cannulaDepth=0.007
                      "Insertion depth of ECMO cannulas (derived tree only)";

                    annotation (__Dymola_Commands);
                  end Supports;
                end Abstraction;

                record No "No supports are applied"
                  extends Supports.Abstraction.Supports(ECMO_isEnabled=false,
                      _DT_IABP_isEnabled=false);

                end No;

                record IABP "IABP enabled"
                  extends Supports.No(_DT_IABP_isEnabled=true);

                end IABP;

                record ECMO_Nonpulsatile "ECMO enabled in non-pulsatile mode"
                  extends Supports.No(ECMO_isEnabled=true, ECMO_pulseShapeRef=
                        PulseShape.pulseless);
                  import Cardiovascular.Types.*;

                end ECMO_Nonpulsatile;

                record ECMO_Pulsatile "ECMO enabled in pulsatile mode"
                  extends Supports.No(ECMO_isEnabled=true, ECMO_pulseShapeRef=
                        PulseShape.parabolic);
                  import Cardiovascular.Types.*;

                end ECMO_Pulsatile;
              end Supports;

              package ModelConstants "Adjustable model constants"
                package Abstraction "Common ancestors"
                  partial record ModelConstants
                    "Declaration of model constants (should be relatively fixed)"
                    import Physiolibrary.Types.*;

                    parameter Time bloodVolumeAdaptationRate
                      "Speed of adjusting blood volume when reference volume changes";
                    parameter Real CRest "Contractility when myofiber is at rest";
                    parameter Real ecmoPumpPressureAdaptationRate
                      "Speed of adjusting ECMO pump pressure to reference value";
                    parameter Length Lsc0
                      "Length of contractile sarcomere element with zero passive stress";
                    parameter Length LseIso
                      "Reference length of isometrically stressed elastic sarcomere element";
                    parameter Length LsMaxAdapt
                      "Maximal sarcomere length for adaptation";
                    parameter Length LsMinAdapt
                      "Minimal sarcomere length for adaptation";
                    parameter Length LsP0
                      "Sarcomere length with zero passive stress";
                    parameter Length LsRef
                      "Reference sarcomere length";
                    parameter Length atriumDLsP
                      "Passive stress coefficient for atria";
                    parameter Pressure atriumSigmaARef
                      "Reference active myofiber stress in atria";
                    parameter Pressure atriumSigmaPAdapt
                      "Reference passive myofiber stress in atria for adaptation";
                    parameter Real atriumTauS
                      "Contractility time coefficient for atria";
                    parameter Velocity atriumVMax
                      "Maximal sarcomere velocity in atria";
                    parameter Length ventricleDLsP
                      "Passive stress coefficient for ventricles";
                    parameter Pressure ventricleSigmaARef
                      "Reference active myofiber stress in ventricles";
                    parameter Pressure ventricleSigmaPAdapt
                      "Reference passive myofiber stress in ventricles for adaptation";
                    parameter Real ventricleTauS
                      "Contractility time coefficient for ventricles";
                    parameter Velocity ventricleVMax
                      "Maximal sarcomere velocity in ventricles";
                    parameter Velocity vImpact
                      "Reference velocity of blood due to movement impacts";

                    parameter Fraction _DT_aorticArchStenosisRatio=0
                      "Severity of stenosis in aortic arch (derived tree only)";
                    parameter Fraction _DT_arterialStiffnessScale=1
                      "Scaling coefficient for arterial stiffness (derived tree only)";
                    parameter Fraction bloodVolumeRefScale=1
                      "Scaling coefficient for blood volume";
                    parameter Fraction systemicResistanceScale=1
                      "Scaling coefficient for systemic resistance";
                    parameter Fraction LW_contractilityScale=1
                      "Scaling coefficient for contractility of left ventricle wall";
                    parameter Fraction SW_contractilityScale=1
                      "Scaling coefficient for contractility of sepal wall";
                    parameter Fraction RW_contractilityScale=1
                      "Scaling coefficient for contractility of right ventricle wall";
                    parameter Fraction LA_contractilityScale=1
                      "Scaling coefficient for contractility of left atrium";
                    parameter Fraction RA_contractilityScale=1
                      "Scaling coefficient for contractility of right atrium";

                  end ModelConstants;
                end Abstraction;

                record Standard "Standard set of model constants"
                  extends Abstraction.ModelConstants(
                    vImpact=3,
                    LsMaxAdapt=2.2e-6,
                    LsMinAdapt=1.75e-6,
                    LsP0=1.8e-6,
                    CRest=0.02,
                    Lsc0=1.51e-6,
                    LsRef=2.0e-6,
                    LseIso=0.04e-6,
                    ventricleVMax=7e-6,
                    atriumVMax=10.5e-6,
                    ventricleDLsP=0.6e-6,
                    atriumDLsP=0.8e-6,
                    ventricleSigmaARef=120e3,
                    ventricleSigmaPAdapt=7.5e3,
                    atriumSigmaARef=84e3,
                    atriumSigmaPAdapt=52.5e3,
                    ventricleTauS=0.25,
                    atriumTauS=0.5,
                    bloodVolumeAdaptationRate=1,
                    ecmoPumpPressureAdaptationRate=4e9);

                end Standard;

                record LVFailure
                  extends Standard(
                    LW_contractilityScale=0.1,
                    RW_contractilityScale=x,
                    SW_contractilityScale=x);
                  constant Real x = 1;
                end LVFailure;
              end ModelConstants;
            end Environment;

            model Valve "Heart valves with finite-time state transition"
              import ADAN_main;
              extends Physiolibrary.Hydraulic.Interfaces.OnePort;
              extends ADAN_main.Components.Icons.Valve;
              import Physiolibrary.Types.*;

              // discrete input Cardiovascular.Types.Area ARef(start=ARef_init,
              //       fixed=true) "Adaptable cross-sectional area";
            // DISABLING THE ADAPTATION
              Area ARef=ARef_init;

              parameter Area ARef_init
                "Starting value of reference cross-sectional area";
              parameter Position l "Length of valve segment";
              parameter Pressure dpO=0 "Opening pressure";
              parameter Pressure dpC=0 "Closing pressure";
              parameter Real Ko(unit="m2/(N.s)") "Opening rate coefficient";
              parameter Real Kc(unit="m2/(N.s)") "Closing rate coefficient";
              parameter Fraction Mrg=0 "Ratio of valve regurgitation";
              parameter Fraction Mst=0 "Valve stenosis ratio";
              parameter Density rho = 1060 "Default density";

              Area A=(AMax - AMin)*s + AMin
                "Current cross-sectional area";
              Area AMin=Mrg*ARef + 1e-10
                "Cross-sectional area when closed, with miniature hole to prevent zero division";
              Area AMax=(1 - Mst)*ARef
                "Cross-sectional area when open";

              Real s(start=1, fixed=true)
                "Opening state (1 = open .. 0 = closed)";
              Real R(unit="kg/m7") "Bernoulli resistance";
              HydraulicInertance L "Inertance";
            equation
              if noEvent(A > 0) then
                dp = R*q_in.q*abs(q_in.q) + L*der(q_in.q);
                R = rho/2/A^2;
                L = rho*l/A;
              else
                q_in.q = 0;
                R = Modelica.Constants.inf;
                L = Modelica.Constants.inf;
              end if;

              if dp > dpO then
                der(s) = (1 - s)*Ko*(dp - dpO);
              elseif dp < dpC then
                der(s) = s*Kc*(dp - dpC);
              else
                der(s) = 0;
              end if;

              annotation (Icon(coordinateSystem(preserveAspectRatio=false,
                      extent={{-100,-100},{100,100}})));
            end Valve;

            partial model partialHeartWall
              "Heart wall with sarcomere mechanics based on source code for CircAdapt by Arts et al. (2012)"
              import ADAN_main.Components.Subsystems.Heart.Auxiliary.TriSeg_components.Environment.*;
              import Modelica.Constants.*;
              import Physiolibrary.Types.*;

              outer Environment.ComplexEnvironment triSeg_environment
                "Everything is out there...";
              outer Time cycleDuration;

            //   discrete input Cardiovascular.Types.Area Am0(start=Am0_init,
            //       fixed=true) "Adaptable mid-wall area of dead space";
            //   discrete input Cardiovascular.Types.Area AmRef(start=AmRef_init,
            //       fixed=true) "Adaptable mid-wall area of cavity";
            //   discrete input Pressure sigmaPRef(start = sigmaPRef_init, fixed = true)
            //     "Adaptable reference passive myofiber stress";
            //   discrete input Volume VW(start = VW_init, fixed = true)
            //     "Adaptable wall volume";
            // DISABLING THE ADAPTATION
              Area Am0=Am0_init;
              Area AmRef=AmRef_init;
              Pressure sigmaPRef=sigmaPRef_init;
              Volume VW=VW_init;

              input Real tauA "Activation time coefficient";
              input Time tDelay
                "Delay in contraction with respect to start of cardiac cycle";

              // constant parameters
              parameter Length LsP0=triSeg_environment.constants.LsP0
                "Sarcomere length with zero passive stress";
              parameter Length Lsc0=triSeg_environment.constants.Lsc0
                "Length of contractile sarcomere element with zero passive stress";
              parameter Length LseIso=triSeg_environment.constants.LseIso
                "Reference length of isometrically stressed elastic sarcomere element";
              parameter Length LsRef=triSeg_environment.constants.LsRef
                "Reference sarcomere length";

              // top-level parameters
              parameter Area Am0_init
                "Starting value of mid-wall area of dead space";
              parameter Area AmRef_init
                "Starting value of mid-wall surface area";
              parameter Fraction contractilityScale=1
                "Scaling coefficient of contractility";
              parameter Real CRest=triSeg_environment.constants.CRest
                "Contractility at fiber rest";

              parameter Pressure sigmaPRef_init
                "Starting value of reference passive myofiber stress";
              parameter Volume VW_init "Starting value of wall volume";

              // parameters to distinguish Atria and Ventricles during inheritance
              parameter Length dLsP
                "Passive stress coefficient";
              parameter Pressure sigmaARef "Reference active myofiber stress";
              parameter Real tauS "Time scaling coefficient";
              parameter Velocity vMax
                "Reference maximal sarcomere contraction velocity";

              Real epsilon=0.5*log(max(1e-9, Am - Am0)/AmRef) - 1/12*z^2 -
                  0.019*z^4 "Natural myofiber strain";
              Length Ls=LsRef*exp(epsilon)
                "Sarcomere length";
              Length LscNorm=max(0.0001, (Lsc - Lsc0)*
                  1e6) "Normalized length of contractile sarcomere element";
              Length Lse=Ls - Lsc
                "Length of elastic sarcomere element";
              Real LseNorm=max(-0.02, Lse/LseIso)
                "Normalized length of elastic sarcomere element";
              Pressure pT=2*Tm*Cm "Transmural pressure";
              Pressure sigma=max(0.2*sigmaP, sigmaP) + sigmaA
                "Total myofiber stress";
              Pressure sigmaA=sigmaARef*LscNorm*((C + CRest)*LseNorm - CRest)
                "Active myofiber stress";
              Pressure sigmaP=sigmaPRef*(0.12*(cosh(5*smooth(1, noEvent(if Ls
                   > LsP0 then LsP0/dLsP*log(Ls/LsP0) else 0.0))) - 1) + (log(
                  Ls/LsRef) + 0.1)) "Passive myofiber stress";
              Real tauD=tauS*0.33*tauA
                "Time coefficient for contractility decay";
              Real tauR=tauS*0.55*tauA
                "Time coefficient for contractility rise";
              Real Tm(unit="kg/s2") = VW*sigma/2/Am*(1 + 0.27*z^2)
                "Total wall tension";
              Real xD=(t - tDelay - tauA*(0.65 + 0.7*LscNorm))/tauD
                "Auxiliary coefficient for modeling contractility decay";
              Real xR=min(8, max(0, (t - tDelay)/tauR))
                "Auxiliary coefficient for modeling contractility rise";
              Real z=3*Cm*VW/2/(Am - Am0)
                "Auxiliary coefficient for computing natural myofiber strain";

              // differentiated variables
              Length Lsc
                "Length of contractile sarcomere element";
              Real C(start=0, fixed=true) "Current contractility";
              Time t(start=0, fixed=true) "Time from start of cardiac cycle";

              // abstract variables
              Area Am(start=AmRef_init, fixed=true)
                "Current mid-wall area";
              Volume Vm "Current Mid-wall volume";
              Real Cm(unit="m-1") "Mid-wall curvature";
              Boolean beat=t - tDelay >= cycleDuration;
            equation
              der(Lsc) = max(LseNorm - 1, tanh(10*C + max(0, 1e-4*sigmaP^2))*
                (LseNorm - 1))*vMax;
              der(C) = contractilityScale*(if t - tDelay < 0 then 0 else 1/
                tauR*tanh(4*LscNorm^2)*0.02*xR^3*(8 - xR)^2*exp(-xR) - 1/tauD
                *C*(0.5 + 0.5*sin((if xD >= 0 then 1 else -1)*min(pi/2, abs(
                xD)))));
              der(t) = 1;
              when beat then
                reinit(t, t - cycleDuration);
              end when;

            end partialHeartWall;

            model AtrialWall "Atrial wall and cavity"
              import ADAN_main;
              extends ADAN_main.Components.Icons.Atrium;
              extends partialHeartWall(
                dLsP=triSeg_environment.constants.atriumDLsP,
                vMax=triSeg_environment.constants.atriumVMax,
                tauS=triSeg_environment.constants.atriumTauS,
                sigmaARef=triSeg_environment.constants.atriumSigmaARef);

              import Modelica.Constants.*;
              import Physiolibrary.Types.*;

              input Pressure pP "Pericardial pressure";

              Pressure p=pT + pP "Current atria pressure";
              Volume V "Current atria volume";

              Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a c annotation (
                  Placement(transformation(extent={{-72,62},{-52,82}}),
                    iconTransformation(extent={{-60,60},{-40,80}})));
            equation
              // connector connection - 1+
              c.q = der(V) - (if V < 10e-6 then 700*(10e-6 - V) else 0);
              // Protection against near-zero volumes
              c.pressure = p;

              // implementation of inherited variables
              Vm = V + 0.5*VW;
              Cm = (4*pi/(3*Vm))^(1/3);
              Am = 4*pi/Cm^2;
              annotation (Documentation(info="<html>
<p>from triseg nodel</p>
</html>"),             Icon(coordinateSystem(preserveAspectRatio=false, extent={{-100,-100},
                        {100,100}})));
            end AtrialWall;

            model VentricularWall "Ventricular free or sepal wall"
              extends partialHeartWall(
                dLsP=triSeg_environment.constants.ventricleDLsP,
                vMax=triSeg_environment.constants.ventricleVMax,
                tauS=triSeg_environment.constants.ventricleTauS,
                sigmaARef=triSeg_environment.constants.ventricleSigmaARef);
              extends Physiolibrary.Icons.HeartVentricle;
              import Physiolibrary.Types.*;

            //   discrete input Real EAmRef(start = EAmRef_init, fixed = true)
            //     "Adaptable correctional coefficient for sepal wall geometry";
            // DISABLING THE ADAPTATION
              Real EAmRef=EAmRef_init;

              parameter Real EAmRef_init=0
                "Starting value of the correctional coefficient";

              input Length xm
                "Wall extension along the x-axis";
              input Length ym(start=0.033)
                "Wall extension along the y-axis";

              Real sinAlpha=2*xm*ym/(xm^2 + ym^2)
                "Sinus of angle of spherical surface";
              Real cosAlpha=(ym^2 - xm^2)/(xm^2 + ym^2)
                "Cosinus of angle of spherical surface";
              Real Tx(unit="kg/s2") = Tm*sinAlpha "Axial wall tension";
              Real Ty(unit="kg/s2") = Tm*cosAlpha "Radial wall tension";

            equation
              // implementation of inherited variables
              Vm = Modelica.Constants.pi/6*xm*(xm^2 + 3*ym^2);
              Am = Modelica.Constants.pi*(xm^2 + ym^2);
              Cm = 2*xm/(xm^2 + ym^2);

            end VentricularWall;

            model Ventricles "Model of interacting ventricles"
              import ADAN_main;
              extends ADAN_main.Components.Icons.Ventricle;

              import ADAN_main.Components.Subsystems.Heart.Auxiliary.TriSeg_components.Environment.*;
              import Physiolibrary.Types.*;

              outer Environment.ComplexEnvironment triSeg_environment
                "Everything is out there...";
              outer Time cycleDuration;

              input Pressure pP "Pericardial pressure";

              Volume VLV "Volume of left ventricle";
              Volume VRV "Volume of right ventricle";
              Pressure pLV=LW.pT + pP "Pressure in left ventricle";
              Pressure pRV=RW.pT + pP "Pressure in right ventricle";
              Pressure pM=sigmaRM + pLV*(rO - rM)/(rO - rI)
                "Intramyocardial pressure for left ventricle";

            protected
              Length rO=(3*(VLV + (LW.VW + SW.VW)*1)/4/
                  Modelica.Constants.pi)^(1/3)
                "Radial position at outer surface";
              Length rI=(3*(VLV + (LW.VW + SW.VW)*0)/4/
                  Modelica.Constants.pi)^(1/3)
                "Radial position at inner surface";
              Length rM=(3*(VLV + (LW.VW + SW.VW)/3)/4/
                  Modelica.Constants.pi)^(1/3)
                "Radial possition at representative position (1 / 3) inside the wall";
              Real lambdaR=(((VLV + (LW.VW + SW.VW)/3)/(60e-6 + (LW.VW + SW.VW)
                  /3))^(1/3))^(-2) "Radial fiber stretch ratio";
              Pressure sigmaRM=if lambdaR < 1 then 0 else 0.2e3*(exp(9*(lambdaR
                   - 1)) - 1) "Radial passive wall stress";
              Real e
                "Error in sum of radial wall tensions for their adjustment";

            public
              Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a cRV "Connector to right ventricle" annotation (Placement(
                    transformation(extent={{-42,30},{-22,50}}),
                    iconTransformation(extent={{-42,30},{-22,50}})));
              Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a cLV "Connector to left ventricle" annotation (Placement(
                    transformation(extent={{26,32},{46,52}}),
                    iconTransformation(extent={{26,32},{46,52}})));

              VentricularWall LW(
                AmRef_init=triSeg_environment.initialization.LW_AmRef,
                sigmaPRef_init=triSeg_environment.initialization.LW_sigmaPRef,
                Am0_init=triSeg_environment.initialization.LW_Am0,
                tauA=triSeg_environment.initialization.LW_tauA_Base + triSeg_environment.initialization.LW_tauA_CycleFraction
                    *cycleDuration,
                tDelay=triSeg_environment.initialization.LW_tDelay_Base +
                    triSeg_environment.initialization.LW_tDelay_CycleFraction*
                    cycleDuration,
                EAmRef_init=triSeg_environment.initialization.LW_EAmRef,
                VW_init=triSeg_environment.initialization.LW_VW,
                contractilityScale=triSeg_environment.constants.LW_contractilityScale)
                annotation (Placement(transforMation(extent={{-48,26},{-28,46}})));
              VentricularWall SW(
                AmRef_init=triSeg_environment.initialization.SW_AmRef,
                sigmaPRef_init=triSeg_environment.initialization.SW_sigmaPRef,
                Am0_init=triSeg_environment.initialization.SW_Am0,
                tauA=triSeg_environment.initialization.SW_tauA_Base + triSeg_environment.initialization.SW_tauA_CycleFraction
                    *cycleDuration,
                tDelay=triSeg_environment.initialization.SW_tDelay_Base +
                    triSeg_environment.initialization.SW_tDelay_CycleFraction
                    *cycleDuration,
                EAmRef_init=triSeg_environment.initialization.SW_EAmRef,
                VW_init=triSeg_environment.initialization.SW_VW,
                contractilityScale=triSeg_environment.constants.SW_contractilityScale)
                annotation (Placement(transforMation(extent={{-18,4},{2,24}})));
              VentricularWall RW(
                AmRef_init=triSeg_environment.initialization.RW_AmRef,
                sigmaPRef_init=triSeg_environment.initialization.RW_sigmaPRef,
                Am0_init=triSeg_environment.initialization.RW_Am0,
                tauA=triSeg_environment.initialization.RW_tauA_Base + triSeg_environment.initialization.RW_tauA_CycleFraction
                    *cycleDuration,
                tDelay=triSeg_environment.initialization.RW_tDelay_Base +
                    triSeg_environment.initialization.RW_tDelay_CycleFraction
                    *cycleDuration,
                EAmRef_init=triSeg_environment.initialization.RW_EAmRef,
                VW_init=triSeg_environment.initialization.RW_VW,
                contractilityScale=triSeg_environment.constants.RW_contractilityScale)
                annotation (Placement(transforMation(extent={{10,-20},{30,0}})));

            equation
              // missing definitions for following inputs :
              // Am0 (ihnerited from HeartWall)
              // AmRef (ihnerited from HeartWall)
              // EAmRef (ihnerited from HeartWall)
              // VW (ihnerited from HeartWall)
              // sigmaPRef (from VentricularWall)

              LW.Tx = RW.Tx + SW.Tx;
              LW.Ty + RW.Ty + SW.Ty = e;
              // This workaround needed because direct enforcement of equality of radial tensions led to numerical crashes in some cases
              der(LW.ym) = -e*1e6;
              // part of the workaround
              SW.ym = RW.ym;
              SW.ym = LW.ym;

              // ventricles volume
              LW.Vm = +VLV + 0.5*LW.VW + 0.5*SW.VW - SW.Vm;
              RW.Vm = +VRV + 0.5*RW.VW + 0.5*SW.VW + SW.Vm;

              // connectors connection
              cLV.pressure = pLV;
              cRV.pressure = pRV;
              cLV.q = der(VLV);
              cRV.q = der(VRV);

              annotation (Diagram(coordinateSystem(preserveAspectRatio=false,
                      extent={{-100,-100},{100,100}}), graphics), Icon(
                    coordinateSystem(preserveAspectRatio=false, extent={{-100,-100},
                        {100,100}})));
            end Ventricles;

            block Timing "TriSeg cycle duration calculation"
              Physiolibrary.Types.RealIO.FrequencyInput heart_rate annotation (Placement(
                    transformation(extent={{-120,-20},{-80,20}}), iconTransformation(extent={{-120,
                        -20},{-80,20}})));

              Physiolibrary.Types.Time t(start=0, fixed=true)
                "Time with respect to start of cardiac cycle";
              Boolean stepCycle(start=true, fixed=true)
                "Change denote start of new cardiac cycle";

              Physiolibrary.Types.Time cycleDuration = 1/heart_rate;
            equation

              // Watching cardiac cycle time
              der(t) = 1;
              when t >= cycleDuration then
                reinit(t, t - cycleDuration);
                stepCycle = not pre(stepCycle);
              end when;

              annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end Timing;
          end TriSeg_components;

          package TriSegMechanics_components

            model Driving_Calcium "HeartBeat origins in Calcium mechanics"
              extends
                ADAN_main.Components.Subsystems.Heart.Auxiliary.partialDriving;

                // Calcium mechanics
              Real Ca_i=(a/(cardiac_cycle + eps))*exp(-b*(log(cardiac_cycle +
                  eps) + c)^2) + Ca0;
            // Ca_i = 2*(a/phi)*exp(-b*(log(phi)+c)^2) + 0.1*Ca0; // EXERCISE

            parameter Real a =    0.3099/2.98 " rat parameter ";
            parameter Real b =    1.6107 " rat parameter ";
            parameter Real c =    1.6932 " rat parameter ";
            parameter Real Ca0 =  0.150 " rat parameter ";

            // Physiolibrary.Types.Time stim_period = 1/frequency;
            parameter Real eps = 0.001 "Minimal Ca_i to prevent division by zero";
            equation
              D = Ca_i;

            //   der(t_cycle) = frequency;
            //
            //   when t_cycle > 1 then
            //     reinit(t_cycle, 0);
            //   end when;

              annotation (Icon(coordinateSystem(preserveAspectRatio=false),
                    graphics={Text(
                      extent={{-60,-100},{80,-40}},
                      lineColor={0,0,0},
                      pattern=LinePattern.None,
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="Calcium")}),                               Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end Driving_Calcium;

            model Driving_Lumens
              extends
                ADAN_main.Components.Subsystems.Heart.Auxiliary.partialDriving;

              parameter Modelica.Units.SI.Time tauR0=0.048;
              Real x=min(8, max(0, t0/tauR0));
              Real Fr = 0.02*(x^3)*((8-x)^2)*exp(-x);
              parameter Physiolibrary.Types.Fraction phi_effect_Ca = 0;
              Physiolibrary.Types.Fraction phi_effect = (1 + phi_effect_Ca*(phi_ - phi0));

            equation
              D =Fr/tauR0*phi_effect;

              annotation (Icon(graphics={Text(
                      extent={{-60,-100},{80,-40}},
                      lineColor={0,0,0},
                      pattern=LinePattern.None,
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="Lumens")}));
            end Driving_Lumens;

            model Driving_LumensExercise
              "Lumens driving with scaling of taus by HR"
              extends ADAN_main.Components.Subsystems.Heart.Auxiliary.partialDriving;

              parameter Modelica.Units.SI.Time tauR0=0.048;
              Modelica.Units.SI.Time tauR = tauR0/frequency;
              Real x=min(8, max(0, t0/tauR));
              Real Fr = 0.02*(x^3)*((8-x)^2)*exp(-x);
              parameter Physiolibrary.Types.Fraction phi_effect_Ca = 0;
              Physiolibrary.Types.Fraction phi_effect = (1 + phi_effect_Ca*(phi_ - phi0));

              Modelica.Blocks.Interfaces.RealInput frequency "Current HR" annotation (
                  Placement(transformation(extent={{-120,-120},{-80,-80}}),
                    iconTransformation(extent={{-120,-120},{-80,-80}})));
            equation
              D =Fr/tauR*phi_effect;

              annotation (Icon(graphics={Text(
                      extent={{-60,-100},{80,-40}},
                      lineColor={0,0,0},
                      pattern=LinePattern.None,
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="Lumens")}));
            end Driving_LumensExercise;

            model Driving_Olufsen "Outputs an activation fraction empirically constructed after Olufsen and Ottesen from systolic contraction and systolic relaxation. This enables detailed control of the systolic timing."
              extends
                ADAN_main.Components.Subsystems.Heart.Auxiliary.partialDriving;

              parameter Physiolibrary.Types.HydraulicElastance D_0=1e-4 "Offset for activation function at rest";
              parameter Physiolibrary.Types.HydraulicElastance D_0_maxAct=D_0 "Offset for activation function at maximal activation";
              Real D_0_coeff
                "Inotropic effect on driving offset coefficient. Automatically calculated";
              Physiolibrary.Types.HydraulicElastance D_0_phi=D_0*(1 + D_0_coeff*(phi_ - phi0))
                "D_0 but with phi effect included";

              parameter Physiolibrary.Types.HydraulicElastance D_A=26664477.483 "Peak amplitude at rest";
              parameter Physiolibrary.Types.HydraulicElastance D_A_maxAct=26664477.483 "Peak amplitude at maximal activation";
              Real D_A_coeff "Slope of max amplitude change for activation. Calculated from nominal and max active";
              Physiolibrary.Types.HydraulicElastance D_A_phi = D_A*(1 + D_A_coeff*(phi_ - phi0));

              parameter Real TS=0.1 "nominal systolic contraction time";
              parameter Real TS_maxAct=0.1
                "nominal systolic contraction at maximal activation";
              Real TS_coeff;
              Real TS_phi=TS*(1 + TS_coeff*(phi_ - phi0));

              parameter Real TR=0.3
                "Systolic relaxation time, value from Benjamin E. Randall's implementation of Olufsen's model, personal communication";
              Real TR_phi=TR*(1 + TR_coeff*(phi_ - phi0))
                "systolic relaxation time at current phi";
              Real TR_coeff(fixed=false)
                "Lusitropic relaxation slope dependent on phi linearly. Given by k_tr_min";
              parameter Physiolibrary.Types.Time TR_maxAct=0.15
                "minimal time for muscle relaxation at maximal activation. Guessed value";

              Boolean systolicContraction=tm >= 0 and tm < TS_phi;
              Boolean systolicRelaxation=tm >= TS_phi and tm < TR_phi + TS_phi;
              Physiolibrary.Types.Fraction D_rel = D/D_A "D relative to resting D_A to compare timings";
            equation
              // these equations for known XXX_maxAct parameters calculate the _coeff slopes at maximal activation (=1)
              TS_maxAct = TS*(1 + TS_coeff*(1 - phi0));
              TR_maxAct = TR*(1 + TR_coeff*(1 - phi0));
              D_0_maxAct = D_0*(1 + D_0_coeff*(1 - phi0));
              D_A_maxAct = D_A*(1 + D_A_coeff*(1 - phi0));

            if systolicContraction then
                D =(D_A_phi - D_0_phi)/2*(1 - cos(Modelica.Constants.pi*tm/TS_phi)) + D_0_phi;
            elseif systolicRelaxation then
                D =(D_A_phi - D_0_phi)/2*(1 + cos(Modelica.Constants.pi*(tm - TS_phi)/TR_phi)) +
                  D_0_phi;
            else
                D =0 + D_0_phi;
            end if;

              annotation (Icon(graphics={Text(
                      extent={{-60,-100},{80,-40}},
                      lineColor={0,0,0},
                      pattern=LinePattern.None,
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="Olufsen")}), Diagram(graphics={
                                             Rectangle(extent={{-74,60},{92,-44}},
                        lineColor={0,0,0},
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid),
                    Line(
                      points={{-74,-16},{-64,-16},{-50,62},{-4,0},{6,-14},{24,-14},{86,-14}},
                      color={0,0,0},
                      thickness=1,
                      smooth=Smooth.Bezier),
                    Line(
                      points={{74,-44},{74,-14}},
                      color={28,108,200},
                      arrow={Arrow.Filled,Arrow.Filled}),
                    Line(points={{-46,44},{-46,-44}}, color={28,108,200},
                      arrow={Arrow.Filled,Arrow.Filled}),
                    Line(
                      points={{-74,-34},{-46,-34}},
                      color={28,108,200},
                      arrow={Arrow.Open,Arrow.Open}),
                    Line(
                      points={{-48,-34},{12,-34}},
                      color={28,108,200},
                      arrow={Arrow.Open,Arrow.Open}),
                    Line(points={{12,-14},{12,-44}}, color={28,108,200}),
                    Text(
                      extent={{36,-38},{76,-22}},
                      lineColor={28,108,200},
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="D_0"),
                    Text(
                      extent={{-72,-34},{-48,-18}},
                      lineColor={28,108,200},
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="TS"),
                    Text(
                      extent={{-36,-34},{-12,-18}},
                      lineColor={28,108,200},
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="TR"),
                    Text(
                      extent={{-18,22},{8,32}},
                      lineColor={0,0,0},
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="1 + cos"),
                    Text(
                      extent={{-74,42},{-46,60}},
                      lineColor={0,0,0},
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="1 - cos"),
                    Text(
                      extent={{-52,-8},{-12,8}},
                      lineColor={28,108,200},
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="D_A")}));
            end Driving_Olufsen;

            partial model partialVentricleWall "base class to be plug-in usable"
              input Real xm;
              input Real ym;
              Modelica.Blocks.Interfaces.RealInput D
                "Connector of driving function input signal. It might be calcium concentration or whatever appropriate."
                annotation (Placement(transformation(extent={{-120,-20},{-80,20}})));

              parameter Boolean UseFrequencyInput = true annotation(choices(checkBox=true), showResult = false);
              parameter Boolean UseCardiacCycleInput = true annotation(choices(checkBox=true), showResult = false);

              parameter Real Vw "Heart wall volumes (mL)";
              parameter Real Amref "midwall reference surface area, cm^2";
              parameter Real Lsref=1.9 " Resting SL, um";

              // experimentally moved from child class - Its a bug that it must be here, should be only in LumensSimple
              parameter Real L0=1.814 "micron";
              parameter Real k_passive=25 "mmHg / um";
              parameter Real k_passive_negative=k_passive "mmHg / um";

              parameter Physiolibrary.Types.Fraction phi0=0.25;
              parameter Real LSEiso=0.04 "Length of isometrically stressed series elastic element [micron]";
              parameter Real SLrest=1.51 "microns";
              // Collagen force
              parameter Real SLcollagen=2.25 "threshold for collagen activation, [um]";
              parameter Real PConcollagen=0.01 "contriubtion of collagen [1]";
              parameter Real PExpcollagen=70 "contriubtion of collagen [1]";
              parameter Physiolibrary.Types.Fraction contractilityFraction=1;

              Real Tm "Represenattive midwall tension [mmHg.cm]";
              Real Tx=Tm*2*xm*ym/(xm^2 + ym^2) "Axial midwall component";
              Real Ty=Tm*(-xm^2 + ym^2)/(xm^2 + ym^2) "Radial midwall component";
              // ventricular mechanics
              Real Vm=(Modelica.Constants.pi/6)*xm*(xm^2 + 3*ym^2) "Volume of spherical cap, formed by midwall surface of wall segment";
              Real Am=Modelica.Constants.pi*(xm^2 + ym^2) "Midwall surface area of curved wall segment";
              Real Cm=2*xm/(xm^2 + ym^2) "Curvature of midwall surface (reciprocal of radius) ";

              Real z=3*Cm*Vw/(2*Am) "Ratio of wall thickness to midwall radius of curvature of curved wall segment";
              Real epsf=(1/2)*log(Am/Amref) - (1/12)*z^2 - 0.019*z^4 "Natural myofiber strain";
              Real SLo(nominal=1e-6) = Lsref*exp(epsf) "Sarcomere length, um";
              Real SL(nominal=1e-6, start=2.3) "Length of sarcomere contractile element, um";

              Modelica.Blocks.Interfaces.RealInput frequency if UseFrequencyInput "Stimulation frequency"
                annotation (Placement(transformation(extent={{-120,80},{-80,120}})));
              Physiolibrary.Types.RealIO.FractionInput cardiacCycle if UseCardiacCycleInput
                annotation (Placement(transformation(extent={{-120,-120},{-80,-80}})));
              annotation (Icon(coordinateSystem(preserveAspectRatio=false),
                    graphics={
                    Ellipse(
                      extent={{-72,80},{80,-72}},
                      fillColor={162,29,33},
                      fillPattern=FillPattern.Solid,
                      pattern=LinePattern.None),
                    Ellipse(
                      extent={{-46,54},{54,-46}},
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      pattern=LinePattern.None),
                    Polygon(
                      points={{2,-2},{-20,80},{100,80},{100,-82},{20,-80},{2,-2}},
                      pattern=LinePattern.None,
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      lineColor={0,0,0})}),                                  Diagram(
                    coordinateSystem(preserveAspectRatio=false)));

            end partialVentricleWall;

            model VentricleWall_Calcium
              extends partialVentricleWall;

              // Inlcuded in the base class:
            //   input Real xm;
            //   input Real ym;
            //   Modelica.Blocks.Interfaces.RealInput Ca_i "Connector of Calcium input signal"
            //     annotation (Placement(transformation(extent={{-120,-20},{-80,20}}),
            //         iconTransformation(extent={{-120,-20},{-80,20}})));
            //
            //   parameter Real Vw "Heart wall volumes (mL)";
            //   parameter Real Amref "midwall reference surface area, cm^2";
            //   Real Tm;
            //   Real Tx=Tm*2*xm*ym/(xm^2 + ym^2);
            //   Real Ty=Tm*(-xm^2 + ym^2)/(xm^2 + ym^2);
              // Real SL(nominal=1e-6, start=2.3) "sarcomere length, um";

              // Collagen force
              parameter Real SLcollagen=2.25;
              // threshold for collagen activation, microns
              parameter Real PConcollagen=0.01;
              // contriubtion of collagen (??)
              parameter Real PExpcollagen=70;
              // expresion of collagen (??), unitless

              parameter Real eta=1 " visconsity, mmHg s /micron ";
              parameter Real Kse=50000
                " series element elastance, mmHg/micron (Changed to match the value in Tewaris code) (9/5 BM)";

              // Metabolite levels (use the values from Tewari's paper) (9/5 BM)
              parameter Real MgATP=9.0675 " cytosolic Mg-ATP concentration, mM ";
              parameter Real MgADP=55.848e-3 " cytosolic Mg-ADP concentration, mM ";
              parameter Real Pi=0.37033 " cytosolic Pi concentration, mM ";

              // Sarcomere geometry parameters
              parameter Real L_thick=1.67 " Length of thick filament, um ";
              parameter Real L_hbare=0.10 " Length of bare region of thick filament, um ";
              parameter Real L_thin=1.20 " Length of thin filament, um ";
              parameter Real deltaR=0.010 " um ";

              parameter Real K_coop=5 " Campbell et al, Biophysical Journal 2018, ";
              parameter Real k_on=250 " Campbell et al, Biophysical Journal 2018 ";
              parameter Real k_off=150 " manually tuned parameter ";

              // transitions between super relaxed state and non relaxed state
              parameter Real k1sr=0.008*6.17;
              parameter Real kforce=0.150;

              parameter Real k2sr=10 " made-up number ";

              parameter Real kstiff1=15000;
              // kPa/um (9/5 BM)
              parameter Real kstiff2=300000;
              // kPa/um (9/5 BM)

              // Cross bridge rate constants Q10s values have been use for Temprature effect (9/5 BM)
              // Used the values from Tewari etal JMCC (9/5 BM)
              parameter Real K_Pi=4.00;
              parameter Real K_T=0.4897;
              parameter Real K_D=0.194;
              parameter Real ka=681.1559 " myosin-actin attach rate constant, 1/sec ";
              parameter Real kd_0=2.0909e+03 " myosin-actin detach rate constant, 1/sec";
              parameter Real k1_0=152.0917 " transition A1 to A2 rate constant, 1/sec ";
              parameter Real km1=33.5885 " transition A2 to A1 rate constant, 1/sec ";
              parameter Real k2=648.1694 " transition A2 to A3 rate constant, 1/sec ";
              parameter Real km2_0=33.7370;
              // transition A3 to A2 rate constant, 1/sec
              parameter Real k3_0=119.8460 " transition A3 to P rate constant, 1/sec ";
              parameter Real alpha1=10.0 " Stretch sensing parameter for k1 and k1, 1/um ";
              parameter Real alpha2=9.1 " Stretch sensing parameter for k2 and k2, 1/um ";
              parameter Real alpha3=59.3 " Stretch sensing parameter for k3, 1/um ";
              parameter Real s3=9.9e-3 " Strain at which k3 is minimum, um ";

              // corrections
              parameter Real kd=kd_0*(Pi/K_Pi)/(1.0 + Pi/K_Pi);
              parameter Real k1=k1_0/(1.0 + Pi/K_Pi);
              parameter Real km2=km2_0*(MgADP/K_D)/(1.0 + MgADP/K_D + MgATP/K_T);
              parameter Real k3=k3_0*(MgATP/K_T)/(1.0 + MgATP/K_T + MgADP/K_D);
            //   // ventricular mechanics
            //   Real Vm=(Modelica.Constants.pi/6)*xm*(xm^2 + 3*ym^2);
            //   Real Am=Modelica.Constants.pi*(xm^2 + ym^2);
            //   Real Cm=2*xm/(xm^2 + ym^2);
            //   Real z=3*Cm*Vw/(2*Am);
            //   Real epsf=(1/2)*log(Am/Amref) - (1/12)*z^2 - 0.019*z^4;
            //   Real SLo(nominal=1e-6) = Lsref*exp(epsf);
              // Sarcomere geometry
              Real sovr_ze=min(L_thick*0.5, SL*0.5);
              Real sovr_cle=max(SL*0.5 - (SL - L_thin), L_hbare*0.5);
              Real L_sovr=sovr_ze - sovr_cle;
              // Length of single overlap region
              Real N_overlap=L_sovr*2/(L_thick - L_hbare);
              // Collagen force
              Real sigma_collagen=if (SLo > SLcollagen) then PConcollagen*(exp(PExpcollagen*
                  (SLo - SLcollagen)) - 1) else 0;
              Real sigmapas=k_passive*(SLo - L0) + sigma_collagen;
              // Active forces
              parameter Boolean useOverlap = false "False for original human model, true for rat";
              Real sigmaact= if useOverlap then
                N_overlap*(kstiff2*deltaR*(P3_0) + kstiff1*(P2_1 + P3_1))
                else      (kstiff2*deltaR*(P3_0) + kstiff1*(P2_1 + P3_1))
                " % mmHg * normalised force";

              // mmHg * normalised force DAB 2/2/20
              // Total forces
              Real sigmaM=sigmaact + sigmapas;
              // equilibrium of forces at junction circle already in base class

              // Myofiber Mechanics
              Real dSL=(Kse*(SLo - SL) - sigmaM)/eta;
              //
              //// Myofiber Mechanics: LV
              // Calculations for stretch-senstive rates
              Real f_alpha1o=(P1_0 - alpha1*P1_1 + 0.5*(alpha1*alpha1)*P1_2);
              Real f_alpha1i=(P1_1 - alpha1*P1_2);

              Real f_alpha0o=(P2_0 + alpha1*P2_1 + 0.5*alpha1*alpha1*P2_2);
              Real f_alpha0i=(P2_1 + alpha1*P2_2);

              Real f_alpha2o=(P2_0 - alpha2*P2_1 + 0.5*(alpha2*alpha2)*P2_2);
              Real f_alpha2i=(P2_1 - alpha2*P2_2);

              Real f_alpha3o=(P3_0 + alpha3*(s3*s3*P3_0 + 2.0*s3*P3_1 + P3_2));
              // f_alpha3o = (P3_0 + alpha3*(s3*s3*P3_0 + 2.0*s3*P3_1) + P3_2);
              Real f_alpha3i=(P3_1 + alpha3*(s3*s3*P3_1 + 2.0*s3*P3_2));

              Real P0=1.0 - N - P1_0 - P2_0 - P3_0;
              // DAB 10/8/2019

              Real U_SR=1 - U_NR;
              Real Jon=k_on*D*N*(1 + K_coop*(1 - N));
              Real Joff=k_off*P0*(1 + K_coop*N);

              // Real dP1_0 = ka*P0*U_NR*N_overlap - kd*P1_0 - k1*f_alpha1o + km1*f_alpha0o;
              // Real dP1_1 = dSL*P1_0 - kd*P1_1 - k1*f_alpha1i + km1*f_alpha0i;
              // Real dP1_2 = 2*dSL*P1_1 - kd*P1_2 - k1*P1_2 + km1*P2_2;
              // Real dP2_0 = -km1*f_alpha0o - k2*f_alpha2o + km2*P3_0 + k1*f_alpha1o;
              // Real dP2_1 = dSL*P2_0 - k1*f_alpha0i - k2*f_alpha2i + km2*P3_1 + k1*f_alpha1i;
              // Real dP2_2 = 2*dSL*P2_1 - km1*P2_2 - k2*P2_2 + km2*P3_2 + k1*P1_2;
              // Real dP3_0 = +k2*f_alpha2o - km2*P3_0 - k3*f_alpha3o;
              // Real dP3_1 = dSL*P3_0 + k2*f_alpha2i - km2*P3_1 - k3*f_alpha3i;
              // Real dP3_2 = 2*dSL*P3_1 + k2*P2_2 - km2*P3_2 - k3*P3_2;
              // Real dN =    - Jon + Joff;
              // Real dU_NR = k1sr*(1 + kforce*(sigmapas + sigmaact))*U_SR - k2sr*U_NR;

              Real P1_0 "0th moment state A1,";
              Real P1_1 "1st moment state A1,";
              Real P1_2 "2nd moment state A1,";
              Real P2_0 "0th moment state A2,";
              Real P2_1 "1st moment state A2,";
              Real P2_2 "2nd moment state A2,";
              Real P3_0 "0th moment state A3,";
              Real P3_1 "1st moment state A3,";
              Real P3_2 "2nd moment state A3,";
              Real N(start=1) "nonpermissive fraction";
              Real U_NR "U_NR represents the Non relaxed state";
            equation

              der(P1_0) = ka*P0*U_NR*N_overlap - kd*P1_0 - k1*f_alpha1o + km1*f_alpha0o;
              der(P1_1) = dSL*P1_0 - kd*P1_1 - k1*f_alpha1i + km1*f_alpha0i;
              der(P1_2) = 2*dSL*P1_1 - kd*P1_2 - k1*P1_2 + km1*P2_2;
              der(P2_0) = -km1*f_alpha0o - k2*f_alpha2o + km2*P3_0 + k1*f_alpha1o;
              der(P2_1) = dSL*P2_0 - k1*f_alpha0i - k2*f_alpha2i + km2*P3_1 + k1*f_alpha1i;
              der(P2_2) = 2*dSL*P2_1 - km1*P2_2 - k2*P2_2 + km2*P3_2 + k1*P1_2;
              der(P3_0) = +k2*f_alpha2o - km2*P3_0 - k3*f_alpha3o;
              der(P3_1) = dSL*P3_0 + k2*f_alpha2i - km2*P3_1 - k3*f_alpha3i;
              der(P3_2) = 2*dSL*P3_1 + k2*P2_2 - km2*P3_2 - k3*P3_2;
              der(N) = -Jon + Joff;
              der(U_NR) = k1sr*(1 + kforce*(sigmapas + sigmaact))*U_SR - k2sr*U_NR;
              der(SL) = dSL;

              Tm=(Vw*Kse*(SLo - SL)/(2*Am))*(1 + (z^2)/3 + (z^4)/5);
              // Tx and Ty are defined in the parent base class
              // Real Tx =  Tm*2*xm*ym/(xm^2 + ym^2);
              // Real Ty =  Tm*(-xm^2 + ym^2)/(xm^2 + ym^2);

              annotation (Icon(coordinateSystem(preserveAspectRatio=false),
                    graphics={Text(
                      extent={{-40,-38},{98,20}},
                      lineColor={0,0,0},
                      pattern=LinePattern.None,
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="Calcium")}),                               Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end VentricleWall_Calcium;

            model VentricleWall_Calcium_Rat "Based on DAB version"
              extends VentricleWall_Calcium(
                kforce=0.8*0.1835,
                kstiff2=375000,
                kstiff1=20000,
                k2sr=226.5,
                useOverlap=true,
                alpha3=0.1*59.3,
                k3_0=142.23,
                km2_0=43.25,
                k2=811.72,
                km1=21.296,
                kd_0=905.1,
                ka=536.86,
                k1sr=0.80*25,
                L0=1.8,
                k_passive=40,
                k_off=184.464,
                k_on=49.045,
                K_coop=11.659,
                Pi=1,
                MgADP=43.1555e-3,
                MgATP=7.9326,
                eta=0.1,
                SL(start = 2.2));
            end VentricleWall_Calcium_Rat;

            model VentricleWall_LumensOriginal
              "As close to original Lumens model as possible, with exercise capabilities"
              extends partialVentricleWall;
              Real sinalpha = Tx/Tm;
              Modelica.Units.SI.Angle alpha=asin(sinalpha);

              // Inlcuded in the base class:
              //   input Real xm;
              //   input Real ym;
              //   Modelica.Blocks.Interfaces.RealInput Ca_i "Connector of Calcium input signal"
              //     annotation (Placement(transformation(extent={{-120,-20},{-80,20}}),
              //         iconTransformation(extent={{-120,-20},{-80,20}})));
              //
              //   parameter Real Vw "Heart wall volumes (mL)";
              //   parameter Real Amref "midwall reference surface area, cm^2";
              //   Real Tm;
              //   Real Tx=Tm*2*xm*ym/(xm^2 + ym^2);
              //   Real Ty=Tm*(-xm^2 + ym^2)/(xm^2 + ym^2);
              // // ventricular mechanics
              // Real Vm=(Modelica.Constants.pi/6)*xm*(xm^2 + 3*ym^2);
              // Real Am=Modelica.Constants.pi*(xm^2 + ym^2);
              // Real Cm=2*xm/(xm^2 + ym^2);
              //
              // Real z=3*Cm*Vw/(2*Am);
              // Real epsf=(1/2)*log(Am/Amref) - (1/12)*z^2 - 0.019*z^4;
              // Real SLo(nominal=1e-6) = Lsref*exp(epsf);
              // Real SL(nominal=1e-6, start=2.3) "sarcomere length, um";
              // parameter Real k_passive=50 "mN / mm^2 / micro";
              // parameter Real L0=0.907 "micron";

              // Triseg parameters
              parameter Real Lsref=1.9 "Resting SL, micron";
              parameter Real vmax=7 "Sarcomere shortening velocity with zero load micron/sec";
              parameter Real LSEiso=0.04 "Length of isometrically stressed series elastic element [micron]";
              parameter Real sigma_act0=7.5*96 "mmHg ";
              Real sigma_act = sigma_act0*(1 + inotropy_factor*phi_input);
              // not used in the current version. Using k_passive instead
            //  parameter Real sigma_pas=7.5*7 "mmHg";
              parameter Real SLrest=1.51 "microns";

              // time constants
              parameter Modelica.Units.SI.Time tauD0=0.032
                "Factor scaling contraction decay time";
              Modelica.Units.SI.Time tauD=tauD0/frequency
                "Factor scaling contraction decay time";

            //   parameter Modelica.Units.SI.Time tauR=0.048
            //     "Factor scaling contraction rise time";
              parameter Modelica.Units.SI.Time tauSC0=0.425
                "Factor scaling duration of contraction";
            Modelica.Units.SI.Time tauSC=tauSC0/frequency
                "Factor scaling duration of contraction";
              parameter Real Crest0=0.02 "Diastolic resting level of activation";
              Real Crest=Crest0/(1 + calcium_factor*phi_input);
              parameter Real inotropy_factor = 2.5;
              parameter Real calcium_factor = 5;

              Real CL=tanh(4*(SL - SLrest)^2) "increase of activation with sarcomere length";
              Real T=tauSC*(0.29 + 0.3*SL) "decrease of activation duration with decrease of sarcomere length";

              Real C(fixed = false) "activation function, related to intracellular calcium conncentration";
              Real dC=CL*D + (Crest - C)/(1 + exp((T - cardiacCycle/frequency)/tauD))/tauD;
              // Sliding velocities -- Eq. (B2) Lumens et al.
              Real dSL=((SLo - SL)/LSEiso - 1)*vmax;

              // Collagen force
              parameter Real SLcollagen=2.25;
              // threshold for collagen activation, microns
              parameter Real PConcollagen=0.01;
              // contriubtion of collagen (??)
              parameter Real PExpcollagen=70;
              // expresion of collagen (??), unitless

              // Collagen force
              Real sigma_collagen=22*max(0, SLo - 1.8)^3;

              // Passive forces (Lumens) do not really work here atm so we are using DAB variant
              // sigmapas_LV  = sigma_pas*(36*max(0,(epsf_LV-1)^2)  + 0.1*(epsf_LV-1)  + 0.0025*exp(30*epsf_LV) ) ;
              Real sigmapas=22*(SLo - 1.6) + sigma_collagen;
              // Active forces could not go negative
              Real sigmaact=sigma_act0*(1 + phi_input*inotropy_factor)*C*(SL - SLrest)*(SLo -
                  SL)/LSEiso;
              // Total forces
              Real sigmaM=sigmaact + sigmapas;
              // equilibrium of forces at junction circle already in base class

              Physiolibrary.Types.RealIO.FractionInput phi_input
                annotation (Placement(transformation(extent={{-20,-20},{20,20}},
                    rotation=270,
                    origin={0,100}),
                    iconTransformation(extent={{-20,-20},{20,20}},
                    rotation=270,
                    origin={0,100})));
            equation

              der(C) = dC;
            //   C = drivingInput;
              der(SL) = dSL;

              Tm = (Vw*sigmaM/(2*Am))*(1 + (z^2)/3 + (z^4)/5);
              // Tx and Ty are defined in the parent base class
              // Real Tx =  Tm*2*xm*ym/(xm^2 + ym^2);
              // Real Ty =  Tm*(-xm^2 + ym^2)/(xm^2 + ym^2);

              annotation (Icon(coordinateSystem(preserveAspectRatio=false),
                    graphics={Text(
                      extent={{-80,-20},{64,40}},
                      lineColor={0,0,0},
                      pattern=LinePattern.None,
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="L")}),                                     Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end VentricleWall_LumensOriginal;

            model VentricleWall_LumensOriginalEDPVR
              "As close to original Lumens model as possible, with exercise capabilities and EDPVR properties"
              extends partialVentricleWall;
              Real sinalpha = Tx/Tm;
              Modelica.Units.SI.Angle alpha=asin(sinalpha);

              // Inlcuded in the base class:
              //   input Real xm;
              //   input Real ym;
              //   Modelica.Blocks.Interfaces.RealInput Ca_i "Connector of Calcium input signal"
              //     annotation (Placement(transformation(extent={{-120,-20},{-80,20}}),
              //         iconTransformation(extent={{-120,-20},{-80,20}})));
              //
              //   parameter Real Vw "Heart wall volumes (mL)";
              //   parameter Real Amref "midwall reference surface area, cm^2";
              //   Real Tm;
              //   Real Tx=Tm*2*xm*ym/(xm^2 + ym^2);
              //   Real Ty=Tm*(-xm^2 + ym^2)/(xm^2 + ym^2);
              // // ventricular mechanics
              // Real Vm=(Modelica.Constants.pi/6)*xm*(xm^2 + 3*ym^2);
              // Real Am=Modelica.Constants.pi*(xm^2 + ym^2);
              // Real Cm=2*xm/(xm^2 + ym^2);
              //
              // Real z=3*Cm*Vw/(2*Am);
              // Real epsf=(1/2)*log(Am/Amref) - (1/12)*z^2 - 0.019*z^4;
              // Real SLo(nominal=1e-6) = Lsref*exp(epsf);
              // Real SL(nominal=1e-6, start=2.3) "sarcomere length, um";
              // parameter Real k_passive=50 "mN / mm^2 / micro";
              // parameter Real L0=0.907 "micron";

              // Triseg parameters
              parameter Real Lsref=1.9 "Resting SL, micron";
              parameter Real vmax=7 "Sarcomere shortening velocity with zero load micron/sec";
              parameter Real LSEiso=0.04 "Length of isometrically stressed series elastic element [micron]";
              parameter Real sigma_act0=7.5*96 "mmHg ";
              Real sigma_act = sigma_act0*(1 + inotropy_factor*phi_input);
              // not used in the current version. Using k_passive instead
            //  parameter Real sigma_pas=7.5*7 "mmHg";
              parameter Real SLrest=1.51 "microns";

              // time constants
              parameter Modelica.Units.SI.Time tauD0=0.032
                "Factor scaling contraction decay time";
              Modelica.Units.SI.Time tauD=tauD0/frequency
                "Factor scaling contraction decay time";

            //   parameter Modelica.Units.SI.Time tauR=0.048
            //     "Factor scaling contraction rise time";
              parameter Modelica.Units.SI.Time tauSC0=0.425
                "Factor scaling duration of contraction";
            Modelica.Units.SI.Time tauSC=tauSC0/frequency
                "Factor scaling duration of contraction";
              parameter Real Crest0=0.02 "Diastolic resting level of activation";
              Real Crest=Crest0/(1 + calcium_factor*phi_input);
              parameter Real inotropy_factor = 2.5;
              parameter Real calcium_factor = 5;

              Real CL=tanh(4*(SL - SLrest)^2) "increase of activation with sarcomere length";
              Real T=tauSC*(0.29 + 0.3*SL) "decrease of activation duration with decrease of sarcomere length";

              Real C(fixed = false) "activation function, related to intracellular calcium conncentration";
              Real dC=CL*D + (Crest - C)/(1 + exp((T - cardiacCycle/frequency)/tauD))/tauD;
              // Sliding velocities -- Eq. (B2) Lumens et al.
              Real dSL=((SLo - SL)/LSEiso - 1)*vmax;

              // Collagen force
              parameter Real SLcollagen=2.25;
              // threshold for collagen activation, microns
              parameter Real PConcollagen=0.01;
              // contriubtion of collagen (??)
              parameter Real PExpcollagen=70;
              // expresion of collagen (??), unitless

              // Passive forces (Lumens) do not really work here atm so we are using DAB variant
              // sigmapas_LV  = sigma_pas*(36*max(0,(epsf_LV-1)^2)  + 0.1*(epsf_LV-1)  + 0.0025*exp(30*epsf_LV) ) ;
              Real sigmapas_old= 22*(SLo - 1.6) + 22*max(0, SLo - 1.8)^3;
              Real sigma_collagen= (PConcollagen * max(0,SLo - SLcollagen))^PExpcollagen;
              Real sigmapas= k_passive*(SLo - L0) + sigma_collagen "Passive tension [mmHg]";

              // Active forces could not go negative
              Real sigmaact=sigma_act0*(1 + phi_input*inotropy_factor)*C*(SL - SLrest)*(SLo -
                  SL)/LSEiso;
              // Total forces
              Real sigmaM=sigmaact + sigmapas;
              // equilibrium of forces at junction circle already in base class

              Physiolibrary.Types.RealIO.FractionInput phi_input
                annotation (Placement(transformation(extent={{-20,-20},{20,20}},
                    rotation=270,
                    origin={0,100}),
                    iconTransformation(extent={{-20,-20},{20,20}},
                    rotation=270,
                    origin={0,100})));
            equation

              der(C) = dC;
            //   C = drivingInput;
              der(SL) = dSL;

              Tm = (Vw*sigmaM/(2*Am))*(1 + (z^2)/3 + (z^4)/5);
              // Tx and Ty are defined in the parent base class
              // Real Tx =  Tm*2*xm*ym/(xm^2 + ym^2);
              // Real Ty =  Tm*(-xm^2 + ym^2)/(xm^2 + ym^2);

              annotation (Icon(coordinateSystem(preserveAspectRatio=false),
                    graphics={Text(
                      extent={{-80,-20},{64,40}},
                      lineColor={0,0,0},
                      pattern=LinePattern.None,
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="L")}),                                     Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end VentricleWall_LumensOriginalEDPVR;

            model VentricleWall_Lumens
              "As close to original Lumens model as possible, with exception of passive force."
              extends partialVentricleWall;
              Real sinalpha = Tx/Tm;
              Modelica.Units.SI.Angle alpha=asin(sinalpha);

              // Inlcuded in the base class:
              //   input Real xm;
              //   input Real ym;
              //   Modelica.Blocks.Interfaces.RealInput Ca_i "Connector of Calcium input signal"
              //     annotation (Placement(transformation(extent={{-120,-20},{-80,20}}),
              //         iconTransformation(extent={{-120,-20},{-80,20}})));
              //
              //   parameter Real Vw "Heart wall volumes (mL)";
              //   parameter Real Amref "midwall reference surface area, cm^2";
              //   Real Tm;
              //   Real Tx=Tm*2*xm*ym/(xm^2 + ym^2);
              //   Real Ty=Tm*(-xm^2 + ym^2)/(xm^2 + ym^2);
              // // ventricular mechanics
              // Real Vm=(Modelica.Constants.pi/6)*xm*(xm^2 + 3*ym^2);
              // Real Am=Modelica.Constants.pi*(xm^2 + ym^2);
              // Real Cm=2*xm/(xm^2 + ym^2);
              //
              // Real z=3*Cm*Vw/(2*Am);
              // Real epsf=(1/2)*log(Am/Amref) - (1/12)*z^2 - 0.019*z^4;
              // Real SLo(nominal=1e-6) = Lsref*exp(epsf);
              // Real SL(nominal=1e-6, start=2.3) "sarcomere length, um";
              // parameter Real k_passive=50 "mN / mm^2 / micro";
              // parameter Real L0=0.907 "micron";

              // Triseg parameters
              parameter Real Lsref=1.9 "Resting SL, micron";
              parameter Real vmax=7 "Sarcomere shortening velocity with zero load micron/sec";
              parameter Real LSEiso=0.04 "Length of isometrically stressed series elastic element [micron]";
              parameter Real sigma_act=7.5*120 "mmHg ";
              // not used in the current version. Using k_passive instead
            //  parameter Real sigma_pas=7.5*7 "mmHg";
              parameter Real SLrest=1.51 "microns";

              // same parameters as in driving function. Change with care.
              parameter Modelica.Units.SI.Time tauD=0.032
                "Factor scaling contraction decay time";
            //   parameter Modelica.Units.SI.Time tauR=0.048
            //     "Factor scaling contraction rise time";
              parameter Modelica.Units.SI.Time tauSC=0.425
                "Factor scaling duration of contraction";
              parameter Real Crest=0.02 "Diastolic resting level of activation";

              Real CL=tanh(4*(SL - SLrest)^2) "increase of activation with sarcomere length";
              Real T=tauSC*(0.29 + 0.3*SL) "decrease of activation duration with decrease of sarcomere length";
              Real C(fixed = false) "activation function, related to intracellular calcium conncentration";
              Real dC=CL*D + (Crest - C)/(1 + exp((T - cardiacCycle/
                  frequency)/tauD))/tauD;
              // Sliding velocities -- Eq. (B2) Lumens et al.
              Real dSL=((SLo - SL)/LSEiso - 1)*vmax;

              // Collagen force
              parameter Real SLcollagen=2.25;
              // threshold for collagen activation, microns
              parameter Real PConcollagen=0.01;
              // contriubtion of collagen (??)
              parameter Real PExpcollagen=70;
              // expresion of collagen (??), unitless

              // Collagen force
              Real sigma_collagen=if (SLo > SLcollagen) then PConcollagen*(exp(PExpcollagen*
                  (SLo - SLcollagen)) - 1) else 0;

              // Passive forces (Lumens) do not really work here atm so we are using DAB variant
              // sigmapas_LV  = sigma_pas*(36*max(0,(epsf_LV-1)^2)  + 0.1*(epsf_LV-1)  + 0.0025*exp(30*epsf_LV) ) ;
              Real sigmapas=k_passive*(SLo - L0) + sigma_collagen;
              // Active forces could not go negative
              Real sigmaact=max(0, sigma_act*C*(SL - SLrest)*(SLo - SL)/LSEiso);
              // Total forces
              Real sigmaM=sigmaact + sigmapas;
              // equilibrium of forces at junction circle already in base class

            equation

              der(C) = dC;
            //   C = drivingInput;
              der(SL) = dSL;

              Tm = (Vw*sigmaM/(2*Am))*(1 + (z^2)/3 + (z^4)/5);
              // Tx and Ty are defined in the parent base class
              // Real Tx =  Tm*2*xm*ym/(xm^2 + ym^2);
              // Real Ty =  Tm*(-xm^2 + ym^2)/(xm^2 + ym^2);

              annotation (Icon(coordinateSystem(preserveAspectRatio=false),
                    graphics={Text(
                      extent={{-80,-20},{64,40}},
                      lineColor={0,0,0},
                      pattern=LinePattern.None,
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="L")}),                                     Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end VentricleWall_Lumens;

            model VentricleWall_LumensSimple
              "Lumens model, but with driving directly the mechanical activation"
              extends partialVentricleWall(
                  UseCardiacCycleInput=false,
                  UseFrequencyInput=false);
              outer Physiolibrary.Types.Fraction phi;

              Real sinalpha = Tx/Tm;
              Modelica.Units.SI.Angle alpha=asin(sinalpha);

              // Inlcuded in the base class:
              //   input Real xm;
              //   input Real ym;
              //   Modelica.Blocks.Interfaces.RealInput Ca_i "Connector of Calcium input signal"
              //     annotation (Placement(transformation(extent={{-120,-20},{-80,20}}),
              //         iconTransformation(extent={{-120,-20},{-80,20}})));
              //
              //   parameter Real Vw "Heart wall volumes (mL)";
              //   parameter Real Amref "midwall reference surface area, cm^2";
              //   Real Tm;
              //   Real Tx=Tm*2*xm*ym/(xm^2 + ym^2);
              //   Real Ty=Tm*(-xm^2 + ym^2)/(xm^2 + ym^2);
              // // ventricular mechanics
              // Real Vm=(Modelica.Constants.pi/6)*xm*(xm^2 + 3*ym^2);
              // Real Am=Modelica.Constants.pi*(xm^2 + ym^2);
              // Real Cm=2*xm/(xm^2 + ym^2);
              //
              // Real z=3*Cm*Vw/(2*Am);
              // Real epsf=(1/2)*log(Am/Amref) - (1/12)*z^2 - 0.019*z^4;
              // Real SLo(nominal=1e-6) = Lsref*exp(epsf);
              // Real SL(nominal=1e-6, start=2.3) "sarcomere length, um";
              // parameter Physiolibrary.Types.Fraction phi0=0.25;

              // Triseg parameters

              parameter Real vmax=7 "Sarcomere shortening velocity with zero load micron/sec";
            //   parameter Real sigma_act=7.5*120 "mmHg ";
            //   parameter Real sigma_act_maxAct = sigma_act "Sigma at maximal activation";
            //   parameter Physiolibrary.Types.Fraction phi_limit = 0 "Minimal value of phi to drop to. Experimental parameter, try using phi0 here";
            //   Real sigma_act_coeff "Slope of sigma change for activation. Calculated from nominal and max active";
            //   Real sigma_act_phi = sigma_act*(1 + sigma_act_coeff*max(phi_limit,phi - phi0));

              // not used in the current version. Using k_passive instead
            //  parameter Real sigma_pas=7.5*7 "mmHg";
            //   parameter Real SLrest=1.51 "microns";

              // same parameters as in driving function. Change with care.
            //   parameter Modelica.SIunits.Time tauD=0.032 "Factor scaling contraction decay time";
            //   parameter Modelica.SIunits.Time tauR=0.048 "Factor scaling contraction rise time";
            //   parameter Modelica.SIunits.Time tauSC=0.425 "Factor scaling duration of contraction";
            //   parameter Real Crest=0.02 "Diastolic resting level of activation";

            //   Real CL=tanh(4*(SL - SLrest)^2) "increase of activation with sarcomere length";
            //   Real T=tauSC*(0.29 + 0.3*SL) "decrease of activation duration with decrease of sarcomere length";
            //   Real C(fixed = false) "activation function, related to intracellular calcium conncentration";
            //   Real dC=CL*drivingInput/tauR + (Crest - C)/(1 + exp((T - cardiac_cycle/
            //       frequency)/tauD))/tauD;

              // Sliding velocities -- Eq. (B2) Lumens et al.
              Real dSL=((SLo - SL)/LSEiso - 1)*vmax;

              // moved to base class
              //  parameter Real L0=0.907 "micron";
              // parameter Real k_passive=50 "mN / mm^2 / micro";
              // parameter Real k_passive_negative=50 "mN / mm^2 / micro";

              // Collagen force
            //   Real sigma_collagen=if (SLo > SLcollagen) then PConcollagen*(exp(PExpcollagen*
            //       (SLo - SLcollagen)) - 1) else 0;
              Real sigma_collagen=max(0, PConcollagen*(exp(PExpcollagen*(SLo - SLcollagen)) - 1));

              // Passive forces (Lumens) do not really work here atm so we are using DAB variant
              // sigmapas_LV  = sigma_pas*(36*max(0,(epsf_LV-1)^2)  + 0.1*(epsf_LV-1)  + 0.0025*exp(30*epsf_LV) ) ;
              Real sigmapas=max(0, k_passive*(SLo - L0)) + min(0, k_passive_negative*(SLo - L0)) + sigma_collagen;

              // Active forces could not go negative
              Real sigmaact=max(0, contractilityFraction*D*(SL - SLrest)*(SLo
                   - SL)/LSEiso);
              // (SL - SLrest)
              Real debug_SL = (SL - SLrest);
              Real debug_SLo = (SLo - SL);
              // Total forces
              Real sigmaM=sigmaact + sigmapas;
              // equilibrium of forces at junction circle already in base class

            equation
            //   sigma_act_maxAct = sigma_act*(1 + sigma_act_coeff*(1 - phi0));

              // der(C) = dC;
            //   C =D;
              der(SL) = dSL;

              Tm = (Vw*sigmaM/(2*Am))*(1 + (z^2)/3 + (z^4)/5);
              // Tx and Ty are defined in the parent base class
              // Real Tx =  Tm*2*xm*ym/(xm^2 + ym^2);
              // Real Ty =  Tm*(-xm^2 + ym^2)/(xm^2 + ym^2);

              annotation (Icon(coordinateSystem(preserveAspectRatio=false),
                    graphics={Text(
                      extent={{-80,-20},{62,40}},
                      lineColor={0,0,0},
                      pattern=LinePattern.None,
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="Ls")}),                                    Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end VentricleWall_LumensSimple;

            model VentricleWall_LumensSimplePassiveTension
              "Lumens model, but with volume as an input and passive tension output"
              extends partialVentricleWall(
                  UseCardiacCycleInput=false,
                  UseFrequencyInput=false);
              outer Physiolibrary.Types.Fraction phi;

              // Real sinalpha = Tx/Tm;
              // Modelica.SIunits.Angle alpha = asin(sinalpha);

              // Inlcuded in the base class:
              //   input Real xm;
              //   input Real ym;
              //   Modelica.Blocks.Interfaces.RealInput Ca_i "Connector of Calcium input signal"
              //     annotation (Placement(transformation(extent={{-120,-20},{-80,20}}),
              //         iconTransformation(extent={{-120,-20},{-80,20}})));
              //
              //   parameter Real Vw "Heart wall volumes (mL)";
              //   parameter Real Amref "midwall reference surface area, cm^2";
              //   Real Tm;
              //   Real Tx=Tm*2*xm*ym/(xm^2 + ym^2);
              //   Real Ty=Tm*(-xm^2 + ym^2)/(xm^2 + ym^2);
              // // ventricular mechanics
              // Real Vm=(Modelica.Constants.pi/6)*xm*(xm^2 + 3*ym^2);
              // Real Am=Modelica.Constants.pi*(xm^2 + ym^2);
              // Real Cm=2*xm/(xm^2 + ym^2);
              //
              // Real z=3*Cm*Vw/(2*Am);
              // Real epsf=(1/2)*log(Am/Amref) - (1/12)*z^2 - 0.019*z^4;
              // Real SLo(nominal=1e-6) = Lsref*exp(epsf);
              // Real SL(nominal=1e-6, start=2.3) "sarcomere length, um";
              // parameter Physiolibrary.Types.Fraction phi0=0.25;

              // Triseg parameters

              parameter Real vmax=7 "Sarcomere shortening velocity with zero load micron/sec";
            //   parameter Real sigma_act=7.5*120 "mmHg ";
            //   parameter Real sigma_act_maxAct = sigma_act "Sigma at maximal activation";
            //   parameter Physiolibrary.Types.Fraction phi_limit = 0 "Minimal value of phi to drop to. Experimental parameter, try using phi0 here";
            //   Real sigma_act_coeff "Slope of sigma change for activation. Calculated from nominal and max active";
            //   Real sigma_act_phi = sigma_act*(1 + sigma_act_coeff*max(phi_limit,phi - phi0));

              // not used in the current version. Using k_passive instead
            //  parameter Real sigma_pas=7.5*7 "mmHg";
            //   parameter Real SLrest=1.51 "microns";

              // same parameters as in driving function. Change with care.
            //   parameter Modelica.SIunits.Time tauD=0.032 "Factor scaling contraction decay time";
            //   parameter Modelica.SIunits.Time tauR=0.048 "Factor scaling contraction rise time";
            //   parameter Modelica.SIunits.Time tauSC=0.425 "Factor scaling duration of contraction";
            //   parameter Real Crest=0.02 "Diastolic resting level of activation";

            //   Real CL=tanh(4*(SL - SLrest)^2) "increase of activation with sarcomere length";
            //   Real T=tauSC*(0.29 + 0.3*SL) "decrease of activation duration with decrease of sarcomere length";
            //   Real C(fixed = false) "activation function, related to intracellular calcium conncentration";
            //   Real dC=CL*drivingInput/tauR + (Crest - C)/(1 + exp((T - cardiac_cycle/
            //       frequency)/tauD))/tauD;

              // Sliding velocities -- Eq. (B2) Lumens et al.
              Real dSL=((SLo - SL)/LSEiso - 1)*vmax;

              // moved to base class
              //  parameter Real L0=0.907 "micron";
              // parameter Real k_passive=50 "mN / mm^2 / micro";
              // parameter Real k_passive_negative=50 "mN / mm^2 / micro";

              // Collagen force
            //   Real sigma_collagen=if (SLo > SLcollagen) then PConcollagen*(exp(PExpcollagen*
            //       (SLo - SLcollagen)) - 1) else 0;
              Real sigma_collagen=max(0, PConcollagen*(exp(PExpcollagen*(SLo - SLcollagen)) - 1));

              // Passive forces (Lumens) do not really work here atm so we are using DAB variant
              // sigmapas_LV  = sigma_pas*(36*max(0,(epsf_LV-1)^2)  + 0.1*(epsf_LV-1)  + 0.0025*exp(30*epsf_LV) ) ;
              input Real sigmapas_k "Passive sigma output";
              Real sigmapas = sigmapas_k*(SLo);
              // =max(0, k_passive*(SLo - L0)) + min(0, k_passive_negative*(SLo - L0)) + sigma_collagen;

              // Active forces could not go negative
              Real sigmaact= max(0, contractilityFraction*D*(SL - SLrest)*(SLo  - SL)/LSEiso);
              // (SL - SLrest)
              Real debug_SL = (SL - SLrest);
              Real debug_SLo = (SLo - SL);
              // Total forces
              Real sigmaM=sigmaact + sigmapas;
              // equilibrium of forces at junction circle already in base class

            equation
            //   sigma_act_maxAct = sigma_act*(1 + sigma_act_coeff*(1 - phi0));

              // der(C) = dC;
            //   C =D;
              der(SL) = dSL;

              Tm = (Vw*sigmaM/(2*Am))*(1 + (z^2)/3 + (z^4)/5);
              // Tx and Ty are defined in the parent base class
              // Real Tx =  Tm*2*xm*ym/(xm^2 + ym^2);
              // Real Ty =  Tm*(-xm^2 + ym^2)/(xm^2 + ym^2);

              annotation (Icon(coordinateSystem(preserveAspectRatio=false),
                    graphics={Text(
                      extent={{-80,-20},{62,40}},
                      lineColor={0,0,0},
                      pattern=LinePattern.None,
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="Ls")}),                                    Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end VentricleWall_LumensSimplePassiveTension;

            model VentricleWall_LumensSimpleEDPVR
              "Lumens model, but with driving directly the mechanical activation and experimental passive tension"
              extends partialVentricleWall(
                  UseCardiacCycleInput=false,
                  UseFrequencyInput=false);
              outer Physiolibrary.Types.Fraction phi;

              Real sinalpha = Tx/Tm;
              Modelica.Units.SI.Angle alpha=asin(sinalpha);

              // Inlcuded in the base class:
              //   input Real xm;
              //   input Real ym;
              //   Modelica.Blocks.Interfaces.RealInput Ca_i "Connector of Calcium input signal"
              //     annotation (Placement(transformation(extent={{-120,-20},{-80,20}}),
              //         iconTransformation(extent={{-120,-20},{-80,20}})));
              //
              //   parameter Real Vw "Heart wall volumes (mL)";
              //   parameter Real Amref "midwall reference surface area, cm^2";
              //   Real Tm;
              //   Real Tx=Tm*2*xm*ym/(xm^2 + ym^2);
              //   Real Ty=Tm*(-xm^2 + ym^2)/(xm^2 + ym^2);
              // // ventricular mechanics
              // Real Vm=(Modelica.Constants.pi/6)*xm*(xm^2 + 3*ym^2);
              // Real Am=Modelica.Constants.pi*(xm^2 + ym^2);
              // Real Cm=2*xm/(xm^2 + ym^2);
              //
              // Real z=3*Cm*Vw/(2*Am);
              // Real epsf=(1/2)*log(Am/Amref) - (1/12)*z^2 - 0.019*z^4;
              // Real SLo(nominal=1e-6) = Lsref*exp(epsf);
              // Real SL(nominal=1e-6, start=2.3) "sarcomere length, um";
              // parameter Physiolibrary.Types.Fraction phi0=0.25;

              // Triseg parameters

              parameter Real vmax=7 "Sarcomere shortening velocity with zero load micron/sec";
            //   parameter Real sigma_act=7.5*120 "mmHg ";
            //   parameter Real sigma_act_maxAct = sigma_act "Sigma at maximal activation";
            //   parameter Physiolibrary.Types.Fraction phi_limit = 0 "Minimal value of phi to drop to. Experimental parameter, try using phi0 here";
            //   Real sigma_act_coeff "Slope of sigma change for activation. Calculated from nominal and max active";
            //   Real sigma_act_phi = sigma_act*(1 + sigma_act_coeff*max(phi_limit,phi - phi0));

              // not used in the current version. Using k_passive instead
            //  parameter Real sigma_pas=7.5*7 "mmHg";
            //   parameter Real SLrest=1.51 "microns";

              // same parameters as in driving function. Change with care.
            //   parameter Modelica.SIunits.Time tauD=0.032 "Factor scaling contraction decay time";
            //   parameter Modelica.SIunits.Time tauR=0.048 "Factor scaling contraction rise time";
            //   parameter Modelica.SIunits.Time tauSC=0.425 "Factor scaling duration of contraction";
            //   parameter Real Crest=0.02 "Diastolic resting level of activation";

            //   Real CL=tanh(4*(SL - SLrest)^2) "increase of activation with sarcomere length";
            //   Real T=tauSC*(0.29 + 0.3*SL) "decrease of activation duration with decrease of sarcomere length";
            //   Real C(fixed = false) "activation function, related to intracellular calcium conncentration";
            //   Real dC=CL*drivingInput/tauR + (Crest - C)/(1 + exp((T - cardiac_cycle/
            //       frequency)/tauD))/tauD;

              // Sliding velocities -- Eq. (B2) Lumens et al.
              Real dSL=((SLo - SL)/LSEiso - 1)*vmax;

              // moved to base class
              //  parameter Real L0=0.907 "micron";
              // parameter Real k_passive=50 "mN / mm^2 / micro";
              // parameter Real k_passive_negative=50 "mN / mm^2 / micro";

              // Collagen force
            //   Real sigma_collagen=if (SLo > SLcollagen) then PConcollagen*(exp(PExpcollagen*
            //       (SLo - SLcollagen)) - 1) else 0;
             // Real sigma_collagen=max(1e-3, PConcollagen*(exp(PExpcollagen*(SLo - SLcollagen))));
             Real sigma_collagen= (PConcollagen * max(0,SLo - SLcollagen))^PExpcollagen;

              // Passive forces (Lumens) do not really work here atm so we are using DAB variant
              // sigmapas_LV  = sigma_pas*(36*max(0,(epsf_LV-1)^2)  + 0.1*(epsf_LV-1)  + 0.0025*exp(30*epsf_LV) ) ;
              Real sigmapas= k_passive*(SLo - L0) + sigma_collagen "Passive tension [mmHg]";

              // Active forces could not go negative
              Real sigmaact=max(0, contractilityFraction*D*starlingFactor_1*starlingFactor_2) "Active tension [mmHg]";

              Real starlingFactor = (SL - SLrest)*(SLo  - SL)/LSEiso;
              parameter Real starlingFactor_exp =  1;
              Real starlingFactor_1 = starlingFactor_1_base^starlingFactor_exp;
              Real starlingFactor_1_base = (SL - SLrest)/LSEiso;
              Real starlingFactor_2 = (SLo  - SL);
              // (SL - SLrest)
            //   Real debug_SL = (SL - SLrest);
            //   Real debug_SLo = (SLo - SL);
              // Total forces
              Real sigmaM=sigmaact + sigmapas "Total tension [mmHg]";
              // equilibrium of forces at junction circle already in base class

            equation
            //   sigma_act_maxAct = sigma_act*(1 + sigma_act_coeff*(1 - phi0));

              // der(C) = dC;
            //   C =D;
              der(SL) = dSL;

              Tm = (Vw*sigmaM/(2*Am))*(1 + (z^2)/3 + (z^4)/5);
              // Tx and Ty are defined in the parent base class
              // Real Tx =  Tm*2*xm*ym/(xm^2 + ym^2);
              // Real Ty =  Tm*(-xm^2 + ym^2)/(xm^2 + ym^2);

              annotation (Icon(coordinateSystem(preserveAspectRatio=false),
                    graphics={Text(
                      extent={{-80,-20},{62,40}},
                      lineColor={0,0,0},
                      pattern=LinePattern.None,
                      fillColor={255,255,255},
                      fillPattern=FillPattern.Solid,
                      textString="Ls")}),                                    Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end VentricleWall_LumensSimpleEDPVR;

            partial model partialVentricles_TS
              "Partial ventricles for the TriSeg model variants"
              //  extends ADAN_main.Components.Subsystems.Heart.Auxiliary.partialVentricles;
              Physiolibrary.Types.RealIO.FrequencyInput frequency annotation (Placement(
                    transformation(extent={{-120,-60},{-80,-20}}),iconTransformation(extent={{-120,
                        -60},{-80,-20}})));
              Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_rv annotation (
                  Placement(transformation(extent={{70,30},{90,50}}), iconTransformation(
                      extent={{70,30},{90,50}})));
              Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_lv annotation (
                  Placement(transformation(extent={{70,-50},{90,-30}}),
                                                                      iconTransformation(
                      extent={{70,-70},{90,-50}})));
              Physiolibrary.Types.RealIO.FractionInput  cardiac_cycle
                "Time from start of the cycle" annotation (Placement(
                    transformation(extent={{-120,-100},{-80,-60}}),
                    iconTransformation(extent={{-120,-120},{-80,-80}})));
              Physiolibrary.Types.RealIO.PressureInput thoracic_pressure_input  annotation (Placement(
                    transformation(extent={{-20,-20},{20,20}},
                    rotation=90,
                    origin={0,-100}),                             iconTransformation(extent={{-20,-20},
                        {20,20}},
                    rotation=90,
                    origin={0,-100})));
              Modelica.Blocks.Interfaces.BooleanOutput volumeLimiterLV(start=true)
                "When true, it limits outflow from the ventricle to maintain minimal ventricular volume."
                annotation (Placement(transformation(extent={{-20,-20},{20,20}}, rotation=270,
                    origin={40,-100})));
              Modelica.Blocks.Interfaces.BooleanOutput volumeLimiterRV(start=true)
                "When true, it limits outflow from the ventricle to maintain minimal ventricular volume."
                annotation (Placement(transformation(extent={{-20,-20},{20,20}}, rotation=90,
                    origin={40,100})));
              Physiolibrary.Types.RealIO.FractionInput phi_input
                annotation (Placement(transformation(extent={{-20,-20},{20,20}},
                    rotation=270,
                    origin={0,100}),
                    iconTransformation(extent={{-20,-20},{20,20}},
                    rotation=270,
                    origin={0,100})));
              outer Settings settings annotation (Placement(transformation(
                      extent={{-100,80},{-80,100}})));
              replaceable model VentricleWall = VentricleWall_Calcium constrainedby
                partialVentricleWall annotation (choicesAllMatching=true);

              replaceable VentricleWall LV_wall   annotation (Placement(transformation(extent={{-10,30},{10,50}})));
              replaceable VentricleWall SEP_wall
                annotation (Placement(transformation(extent={{-10,-10},{10,10}})));
              replaceable VentricleWall RV_wall
                annotation (Placement(transformation(extent={{-10,-50},{10,-30}})));
              replaceable ADAN_main.Components.Subsystems.Heart.Auxiliary.partialDriving
                calciumMechanics(usePhiInput=true) constrainedby
                ADAN_main.Components.Subsystems.Heart.Auxiliary.partialDriving
                annotation (Placement(transformation(extent={{-62,-10},{-42,10}})));
              parameter Physiolibrary.Types.Volume V_min=5e-06;
              Real _P_LV annotation (HideResult=true);
              Real _P_RV annotation (HideResult=true);
              Real _V_LV annotation (HideResult=true);
              Real _V_RV annotation (HideResult=true);

              // conversion to SI units
              Physiolibrary.Types.Volume V_LV(start=200e-6, fixed = true)=_V_LV*Constants.ml2SI;
              Physiolibrary.Types.Volume V_RV(start=200e-6, fixed = true)=_V_RV*Constants.ml2SI;
              Physiolibrary.Types.Pressure P_LV=_P_LV*Constants.mmHg2SI;
              Physiolibrary.Types.Pressure P_RV=_P_RV*Constants.mmHg2SI;
              inner Physiolibrary.Types.Fraction phi = phi_input "Global provider of phi for any components interested";

              Modelica.Units.SI.Work currentWork_LV;
             Physiolibrary.Types.Power power_LV;
              Modelica.Units.SI.Work currentWork_RV;
             Physiolibrary.Types.Power power_RV;

              Physiolibrary.Types.RealIO.TimeInput t0
                "time since start of the current cardiac cycle" annotation (
                  Placement(transformation(extent={{-120,-20},{-80,20}}),
                    iconTransformation(extent={{-120,0},{-80,40}})));

              Real ptrans_LV=2*LV_wall.Tx/ym annotation (HideResult=true);
              Real ptrans_RV=2*RV_wall.Tx/ym annotation (HideResult=true);

              Real xm_LV(start=-4.6627) "LV heart geometry variable, cm";
              Real xm_SEP(start=2.90348) "septum heart geometry variable, cm";
              Real xm_RV(start=6.26344) "RV heart geometry variable, cm";
              Real ym(start=3.50013) "Heart geometry variable, cm";

              Real e;
              parameter Real eps=1e-6;

              Real Tysq=-1/ym;
            equation
              // ports are already in SI units
              der(V_LV) =port_lv.q;
              der(V_RV) =port_rv.q;
              _P_LV = -ptrans_LV;
              _P_RV = +ptrans_RV;

              port_lv.pressure = P_LV + thoracic_pressure_input;
              port_rv.pressure = P_RV + thoracic_pressure_input;

              //   // TriSeg
              // _V_LV = - 0.5*LV_wall.Vw - 0.5*SEP_wall.Vw + SEP_wall.Vm - LV_wall.Vm;
              LV_wall.Vm = -0.5*LV_wall.Vw - 0.5*SEP_wall.Vw + SEP_wall.Vm - _V_LV;

              // _V_RV = - 0.5*RV_wall.Vw - 0.5*SEP_wall.Vw - SEP_wall.Vm + RV_wall.Vm;
              RV_wall.Vm = _V_RV + 0.5*RV_wall.Vw + 0.5*SEP_wall.Vw + SEP_wall.Vm;

              // not as in paper though, but same as in CircAdapt Matlab routine
              // Lv.Vm= Sv.Vm-Lv.V-0.5*(Lv.VWall+Sv.VWall);
              // Rv.Vm= Sv.Vm+Rv.V+0.5*(Sv.VWall+Rv.VWall);

              0 = (LV_wall.Tx + SEP_wall.Tx + RV_wall.Tx);

              // This workaround needed because direct enforcement of equality of radial tensions led to numerical crashes in some cases
              e = (LV_wall.Ty + SEP_wall.Ty + RV_wall.Ty + Tysq);
              der(LV_wall.ym)*eps = -e;

              // since the flow is derivation of volume, we have already differentiated it
              der(currentWork_LV)  = -P_LV*der(V_LV);
              der(currentWork_RV)  = -P_RV*der(V_RV);

              when t0 < 1e-3 then
                // the t0 is zeroed once a cycle, so it would fire this event as well
                reinit(currentWork_LV, 0);
                reinit(currentWork_RV, 0);
                if pre(t0) > 0.2 then
                power_LV = currentWork_LV/pre(t0);
                power_RV = currentWork_RV/pre(t0);
                else
                  power_LV = 0;
                  power_RV = 0;
                end if;
              end when;

              volumeLimiterRV = V_RV < V_min;
              volumeLimiterLV = V_LV < V_min;

              connect(calciumMechanics.D, SEP_wall.D) annotation (Line(points={{-41,0},
                      {-10,0}},                             color={0,140,72},
                  thickness=0.5));
              connect(calciumMechanics.D, LV_wall.D) annotation (Line(points={{-41,0},
                      {-20,0},{-20,40},{-10,40}},            color={0,140,72},
                  thickness=0.5));
              connect(calciumMechanics.D, RV_wall.D) annotation (Line(points={{-41,0},
                      {-20,0},{-20,-40},{-10,-40}},            color={0,140,72},
                  thickness=0.5));

              connect(SEP_wall.frequency, frequency) annotation (Line(points={{-10,10},
                      {-32,10},{-32,-40},{-100,-40}},
                                             color={0,0,127},
                  thickness=0.5));
              connect(LV_wall.frequency, frequency) annotation (Line(points={{-10,50},
                      {-32,50},{-32,-40},{-100,-40}},      color={0,0,127},
                  thickness=0.5));
              connect(RV_wall.frequency, frequency) annotation (Line(points={{-10,-30},
                      {-32,-30},{-32,-40},{-100,-40}},          color={0,0,127},
                  thickness=0.5));

              connect(calciumMechanics.phiInput, phi_input) annotation (Line(
                    points={{-62,8},{-70,8},{-70,100},{0,100}},     color={0,0,
                      127}));
              connect(calciumMechanics.t0, t0) annotation (Line(points={{-62,0},
                      {-100,0}},                 color={0,0,127}));
              connect(LV_wall.cardiacCycle, SEP_wall.cardiacCycle) annotation (
                  Line(
                  points={{-10,30},{-26,30},{-26,-10},{-10,-10}},
                  color={244,125,35},
                  thickness=0.5));
              connect(SEP_wall.cardiacCycle, RV_wall.cardiacCycle) annotation (
                  Line(
                  points={{-10,-10},{-26,-10},{-26,-50},{-10,-50}},
                  color={244,125,35},
                  thickness=0.5));
              connect(RV_wall.cardiacCycle, cardiac_cycle) annotation (Line(
                  points={{-10,-50},{-26,-50},{-26,-80},{-100,-80}},
                  color={244,125,35},
                  thickness=0.5));
              annotation (Icon(graphics={
                              Bitmap(extent={{100,-100},{-100,100}}, fileName=
                          "modelica://Physiolibrary/Resources/Icons/komoraSrdce.png",
                      origin={14,22},
                      rotation=270),
                              Bitmap(extent={{-106,-100},{106,100}}, fileName=
                          "modelica://Physiolibrary/Resources/Icons/komoraSrdce.png",
                      origin={18,-40},
                      rotation=270)}));
            end partialVentricles_TS;

            model Ventricles_Calcium
              extends partialVentricles_TS(
                redeclare replaceable VentricleWall_Calcium LV_wall(Vw=89,
                    Amref=0.95*86) constrainedby partialVentricleWall(xm=xm_LV,
                    ym=ym),
                redeclare replaceable VentricleWall_Calcium SEP_wall(Vw=34,
                    Amref=0.95*39) constrainedby partialVentricleWall(xm=xm_SEP,
                    ym=ym),
                redeclare replaceable VentricleWall_Calcium RV_wall(Vw=27,
                    Amref=0.95*110) constrainedby partialVentricleWall(xm=xm_RV,
                    ym=ym),
                redeclare Driving_Calcium calciumMechanics);

            equation

              annotation (Icon(coordinateSystem(preserveAspectRatio=false),
                    graphics={Text(
                      extent={{-40,60},{50,-78}},
                      lineColor={0,0,0},
                      textString="C")}),                                     Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end Ventricles_Calcium;

            model Ventricles_Lumens
              extends partialVentricles_TS(
                redeclare replaceable Driving_Lumens calciumMechanics(
                    usePhiInput=true),
                redeclare replaceable model VentricleWall =
                    VentricleWall_Lumens,
                 LV_wall(
                  Vw=89,
                  Amref=0.95*86,       xm=xm_LV, ym=ym),
                SEP_wall(
                  Vw=34,
                  Amref=0.95*39,       xm=xm_SEP, ym=ym),
            RV_wall(
                  Vw=27,
                  Amref=0.95*110,      xm=xm_RV, ym=ym));

              Real ptrans_LV=2*LV_wall.Tx/ym;
              Real ptrans_RV=2*RV_wall.Tx/ym;

              Real xm_LV(start=-4.6627) "LV heart geometry variable, cm";
              Real xm_SEP(start=2.90348) "septum heart geometry variable, cm";
              Real xm_RV(start=6.26344) "RV heart geometry variable, cm";
              Real ym(start=3.50013) "Heart geometry variable, cm";

              // Init of the rest of the circulatory
              // V_SV start( 1423.2186 ),
              // V_PV start( 160.54788 ),
              // V_SA start( 173.32166 ),
              // V_PA start( 64.736908 ),
              // V_Ao start( 83.768949 ),
              // V_RA start( 8.414623 ),
              // V_LA start( 39.666051 ),
              Real e;
              parameter Real eps=1e-6;

              Real Tysq=-1/ym;
            //   parameter Physiolibrary.Types.Fraction sigma_act_factor=1
            //     "Factor affecting systolic strength";
            //   parameter Physiolibrary.Types.Fraction k_passive_factor=1
            //     "Factor affecting diastolic compliance";
            equation

              annotation (Icon(coordinateSystem(preserveAspectRatio=false),
                    graphics={Text(
                      extent={{-40,60},{50,-78}},
                      lineColor={0,0,0},
                      textString="L")}),                                     Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end Ventricles_Lumens;

            model Ventricles_LumensOriginal
              "Original Lumens implementation including simple exercise"
              extends partialVentricles_TS(
                redeclare replaceable Driving_LumensExercise
                                                     calciumMechanics(
                  usePhiInput=false,
                  phi0=settings.phi0,
                  t0_delay=0.1),
                redeclare replaceable model VentricleWall =
                    VentricleWall_LumensOriginal,
                 LV_wall(xm=xm_LV, ym=ym,
                  Vw=80,
                  Amref=0.975*80,
                  phi0=settings.phi0),
                SEP_wall(xm=xm_SEP, ym=ym,
                  Vw=38,
                  Amref=0.975*45,
                  phi0=settings.phi0),
                RV_wall(xm=xm_RV, ym=ym,
                  Vw=28,
                  Amref=1.12*100,
                  phi0=settings.phi0));

              Real ptrans_LV=2*LV_wall.Tx/ym;
              Real ptrans_RV=2*RV_wall.Tx/ym;

            equation
              connect(phi_input, LV_wall.phi_input)
                annotation (Line(points={{0,100},{0,50}}, color={0,0,127}));
              connect(phi_input, SEP_wall.phi_input)
                annotation (Line(points={{0,100},{0,10}}, color={0,0,127}));
              connect(phi_input, RV_wall.phi_input)
                annotation (Line(points={{0,100},{0,-30}}, color={0,0,127}));
              connect(frequency, calciumMechanics.frequency) annotation (Line(
                    points={{-100,-40},{-72,-40},{-72,-10},{-62,-10}}, color={0,
                      0,127}));
            end Ventricles_LumensOriginal;

            model Ventricles_Lumens_Simple "Simplified Lumens ventricles"
              extends Ventricles_Lumens(
                redeclare Auxiliary.TriSegMechanics_components.Driving_Olufsen
                  calciumMechanics(
                  t0_delay=settings.heart_vntr_Tact,
                  D_A=settings.heart_vntr_D_A,
                  D_A_maxAct=settings.heart_vntr_D_A_maxAct,
                  TR_maxAct(displayUnit="s") = settings.heart_vntr_TR_maxAct,
                  phi0=settings.phi0,
                  D_0=settings.heart_vntr_D_0,
                  D_0_maxAct=settings.heart_vntr_D_0_maxAct,
                  TS_maxAct=settings.heart_vntr_TS_maxAct,
                  TS=settings.heart_vntr_TS,
                  TR=settings.heart_vntr_TR,
                  usePhiInput=true,
                  t0_delay_maxAct=settings.heart_vntr_Tact_maxAct),
                redeclare model VentricleWall = VentricleWall_LumensSimple,
                LV_wall(
                  Vw=settings.heart_vntr_xi_Vw*89,
                  Amref=settings.heart_vntr_xi_AmRef*86,
                  Lsref=settings.heart_vntr_Lsref,
                  L0=settings.heart_vntr_L0,
                  k_passive=settings.heart_vntr_k_passive,
                  phi0=settings.phi0,
                  SLrest=settings.heart_vntr_SLrest,
                  SLcollagen=settings.heart_vntr_SLcollagen),
                RV_wall(
                  Vw=settings.heart_vntr_xi_Vw*27,
                  Amref=settings.heart_vntr_xi_AmRef*110,
                  Lsref=settings.heart_vntr_Lsref,
                  L0=settings.heart_vntr_L0,
                  k_passive=settings.heart_vntr_k_passive,
                  phi0=settings.phi0,
                  SLrest=settings.heart_vntr_SLrest,
                  SLcollagen=settings.heart_vntr_SLcollagen),
                SEP_wall(
                  Vw=settings.heart_vntr_xi_Vw*34,
                  Amref=settings.heart_vntr_xi_AmRef*39,
                  Lsref=settings.heart_vntr_Lsref,
                  L0=settings.heart_vntr_L0,
                  k_passive=settings.heart_vntr_k_passive,
                  phi0=settings.phi0,
                  SLrest=settings.heart_vntr_SLrest,
                  SLcollagen=settings.heart_vntr_SLcollagen));

              annotation (Icon(graphics={Rectangle(extent={{-100,100},{100,-100}},
                        lineColor={28,108,200}), Text(
                      extent={{-20,80},{70,-58}},
                      lineColor={0,0,0},
                      textString="s")}));
            end Ventricles_Lumens_Simple;

            model Ventricles_LumensSimple
              "Simplified Lumens ventricles, limited inheritance"
              extends partialVentricles_TS(
                redeclare Auxiliary.TriSegMechanics_components.Driving_Olufsen
                  calciumMechanics(
                  t0_delay=settings.heart_vntr_Tact,
                  D_A=settings.heart_vntr_D_A,
                  D_A_maxAct=settings.heart_vntr_D_A_maxAct,
                  TR_maxAct(displayUnit="s") = settings.heart_vntr_TR_maxAct,
                  phi0=settings.phi0,
                  D_0=settings.heart_vntr_D_0,
                  D_0_maxAct=settings.heart_vntr_D_0_maxAct,
                  TS_maxAct=settings.heart_vntr_TS_maxAct,
                  TS=settings.heart_vntr_TS,
                  TR=settings.heart_vntr_TR,
                  usePhiInput=true,
                  t0_delay_maxAct=settings.heart_vntr_Tact_maxAct),
                redeclare replaceable model VentricleWall =
                    VentricleWall_LumensSimple,
                LV_wall(
                  Vw=settings.heart_vntr_xi_Vw*89,
                  Amref=settings.heart_vntr_xi_AmRef*86,
                  Lsref=settings.heart_vntr_Lsref,
                  L0=settings.heart_vntr_L0,
                  k_passive=settings.heart_vntr_k_passive,
                  phi0=settings.phi0,
                  SLrest=settings.heart_vntr_SLrest,
                  SLcollagen=settings.heart_vntr_SLcollagen,
                  xm=xm_LV,
                  ym=ym),
                RV_wall(
                  Vw=settings.heart_vntr_xi_Vw*27,
                  Amref=settings.heart_vntr_xi_AmRef*110,
                  Lsref=settings.heart_vntr_Lsref,
                  L0=settings.heart_vntr_L0,
                  k_passive=settings.heart_vntr_k_passive,
                  phi0=settings.phi0,
                  SLrest=settings.heart_vntr_SLrest,
                  SLcollagen=settings.heart_vntr_SLcollagen,
                  xm=xm_RV,
                  ym=ym),
                SEP_wall(
                  Vw=settings.heart_vntr_xi_Vw*34,
                  Amref=settings.heart_vntr_xi_AmRef*39,
                  Lsref=settings.heart_vntr_Lsref,
                  L0=settings.heart_vntr_L0,
                  k_passive=settings.heart_vntr_k_passive,
                  phi0=settings.phi0,
                  SLrest=settings.heart_vntr_SLrest,
                  SLcollagen=settings.heart_vntr_SLcollagen,
                  xm=xm_SEP,
                  ym=ym));

              //   parameter Physiolibrary.Types.Fraction sigma_act_factor=1
              //     "Factor affecting systolic strength";
              //   parameter Physiolibrary.Types.Fraction k_passive_factor=1
              //     "Factor affecting diastolic compliance";
            equation

              annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={Text(
                      extent={{-40,60},{50,-78}},
                      lineColor={0,0,0},
                      textString="L"), Text(
                      extent={{-18,78},{72,-60}},
                      lineColor={135,135,135},
                      textString="s")}), Diagram(coordinateSystem(preserveAspectRatio=false)));
            end Ventricles_LumensSimple;

            model Ventricles_LumensSimpleEDPVR
              "Simplified Lumens ventricles, limited inheritance, experimental passive tension fitted to EDPVR"
              extends partialVentricles_TS(
                redeclare Auxiliary.TriSegMechanics_components.Driving_Olufsen
                  calciumMechanics(
                  t0_delay=settings.heart_vntr_Tact,
                  D_A=settings.heart_vntr_D_A,
                  D_A_maxAct=settings.heart_vntr_D_A_maxAct,
                  TR_maxAct(displayUnit="s") = settings.heart_vntr_TR_maxAct,
                  phi0=settings.phi0,
                  D_0=settings.heart_vntr_D_0,
                  D_0_maxAct=settings.heart_vntr_D_0_maxAct,
                  TS_maxAct=settings.heart_vntr_TS_maxAct,
                  TS=settings.heart_vntr_TS,
                  TR=settings.heart_vntr_TR,
                  usePhiInput=true,
                  t0_delay_maxAct=settings.heart_vntr_Tact_maxAct),
                redeclare replaceable model VentricleWall =
                    VentricleWall_LumensSimpleEDPVR,
                LV_wall(
                  Vw=settings.heart_vntr_xi_Vw*89,
                  Amref=settings.heart_vntr_xi_AmRef*86,
                  Lsref=settings.heart_vntr_Lsref,
                  L0=settings.heart_vntr_L0,
                  k_passive=settings.heart_vntr_k_passive,
                  phi0=settings.phi0,
                  SLrest=settings.heart_vntr_SLrest,
                  xm=xm_LV,
                  ym=ym,
                  SLcollagen=settings.heart_vntr_SLcollagen,
                  PConcollagen=settings.heart_vntr_PConcollagen,
                  PExpcollagen=settings.heart_vntr_PExpcollagen,
                  starlingFactor_exp=settings.starlingFactor_exp),
                RV_wall(
                  Vw=settings.heart_vntr_xi_Vw*27,
                  Amref=settings.heart_vntr_xi_AmRef*110,
                  Lsref=settings.heart_vntr_Lsref,
                  L0=settings.heart_vntr_L0,
                  k_passive=settings.heart_vntr_k_passive,
                  phi0=settings.phi0,
                  SLrest=settings.heart_vntr_SLrest,
                  xm=xm_RV,
                  ym=ym,
                  SLcollagen=settings.heart_vntr_SLcollagen,
                  PConcollagen=settings.heart_vntr_PConcollagen,
                  PExpcollagen=settings.heart_vntr_PExpcollagen,
                  starlingFactor_exp=settings.starlingFactor_exp),
                SEP_wall(
                  Vw=settings.heart_vntr_xi_Vw*34,
                  Amref=settings.heart_vntr_xi_AmRef*39,
                  Lsref=settings.heart_vntr_Lsref,
                  L0=settings.heart_vntr_L0,
                  k_passive=settings.heart_vntr_k_passive,
                  phi0=settings.phi0,
                  SLrest=settings.heart_vntr_SLrest,
                  xm=xm_SEP,
                  ym=ym,
                  SLcollagen=settings.heart_vntr_SLcollagen,
                  PConcollagen=settings.heart_vntr_PConcollagen,
                  PExpcollagen=settings.heart_vntr_PExpcollagen,
                  starlingFactor_exp=settings.starlingFactor_exp));

            equation

              annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={Text(
                      extent={{-40,60},{50,-78}},
                      lineColor={0,0,0},
                      textString="L"), Text(
                      extent={{-18,78},{72,-60}},
                      lineColor={135,135,135},
                      textString="s")}), Diagram(coordinateSystem(preserveAspectRatio=false)));
            end Ventricles_LumensSimpleEDPVR;

            model Ventricles_LumensSimplePassiveTensionOutput
              "Simplified Lumens ventricles, limited inheritance, experimental input of passive tension"
              extends partialVentricles_TS(
                redeclare Auxiliary.TriSegMechanics_components.Driving_Olufsen
                  calciumMechanics(
                  t0_delay=settings.heart_vntr_Tact,
                  D_A=settings.heart_vntr_D_A,
                  D_A_maxAct=settings.heart_vntr_D_A_maxAct,
                  TR_maxAct(displayUnit="s") = settings.heart_vntr_TR_maxAct,
                  phi0=settings.phi0,
                  D_0=settings.heart_vntr_D_0,
                  D_0_maxAct=settings.heart_vntr_D_0_maxAct,
                  TS_maxAct=settings.heart_vntr_TS_maxAct,
                  TS=settings.heart_vntr_TS,
                  TR=settings.heart_vntr_TR,
                  usePhiInput=true,
                  t0_delay_maxAct=settings.heart_vntr_Tact_maxAct),
                redeclare replaceable model VentricleWall =
                    VentricleWall_LumensSimplePassiveTension,
                LV_wall(
                  Vw=settings.heart_vntr_xi_Vw*89,
                  Amref=settings.heart_vntr_xi_AmRef*86,
                  Lsref=settings.heart_vntr_Lsref,
                  L0=settings.heart_vntr_L0,
                  k_passive=settings.heart_vntr_k_passive,
                  phi0=settings.phi0,
                  SLrest=settings.heart_vntr_SLrest,
                  SLcollagen=settings.heart_vntr_SLcollagen,
                  xm=xm_LV,
                  ym=ym,
                  sigmapas_k = sigmapas_k),
                RV_wall(
                  Vw=settings.heart_vntr_xi_Vw*27,
                  Amref=settings.heart_vntr_xi_AmRef*110,
                  Lsref=settings.heart_vntr_Lsref,
                  L0=settings.heart_vntr_L0,
                  k_passive=settings.heart_vntr_k_passive,
                  phi0=settings.phi0,
                  SLrest=settings.heart_vntr_SLrest,
                  SLcollagen=settings.heart_vntr_SLcollagen,
                  xm=xm_RV,
                  ym=ym,
                  sigmapas_k = sigmapas_k),
                SEP_wall(
                  Vw=settings.heart_vntr_xi_Vw*34,
                  Amref=settings.heart_vntr_xi_AmRef*39,
                  Lsref=settings.heart_vntr_Lsref,
                  L0=settings.heart_vntr_L0,
                  k_passive=settings.heart_vntr_k_passive,
                  phi0=settings.phi0,
                  SLrest=settings.heart_vntr_SLrest,
                  SLcollagen=settings.heart_vntr_SLcollagen,
                  xm=xm_SEP,
                  ym=ym,
                  sigmapas_k = sigmapas_k));

              //   parameter Physiolibrary.Types.Fraction sigma_act_factor=1
              //     "Factor affecting systolic strength";
              //   parameter Physiolibrary.Types.Fraction k_passive_factor=1
              //     "Factor affecting diastolic compliance";
              Physiolibrary.Types.RealIO.PressureInput PLV
                annotation (Placement(transformation(
                    extent={{-20,-20},{20,20}},
                    rotation=0,
                    origin={-100,40}), iconTransformation(
                    extent={{-20,-20},{20,20}},
                    rotation=180,
                    origin={100,0})));
                     // = P_LV if directPressureEnforcement
              // parameter Boolean directPressureEnforcement=false;
              Real sigmapas_k(start = 40);

            equation

              PLV = P_LV;

              annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={Text(
                      extent={{-40,60},{50,-78}},
                      lineColor={0,0,0},
                      textString="L"), Text(
                      extent={{-18,78},{72,-60}},
                      lineColor={135,135,135},
                      textString="s")}), Diagram(coordinateSystem(preserveAspectRatio=false)));
            end Ventricles_LumensSimplePassiveTensionOutput;
          end TriSegMechanics_components;

          model Driving_Smith
            extends partialDriving;
            import Physiolibrary.Types.*;

            parameter Physiolibrary.Types.Fraction alphaDriving = 0 "Experimental sensitivity of driving funtion on phi";

            Modelica.Blocks.Interfaces.BooleanOutput
                                  beat = tm >= pre(HP)
                                     annotation (Placement(transformation(extent={{-28,-120},
                      {12,-80}}),           iconTransformation(extent={{-60,-80},{-100,-40}})));

                      parameter Time ts_a1 = 0.1 "Part of calculation for t_systole = a1 + a2*period. Guessed from Bombardino 2008 doi:10.1186/1476-7120-6-15";
                      parameter Real ts_a2 = 0.2 "Part of calculation for t_systole = a1 + a2*period. Guessed from Bombardino 2008 doi:10.1186/1476-7120-6-15";

            parameter Real A=1 "Multiplier of driving function";
            Real B= 60/HP;
            // Real CC=HP*SystolicFraction;
            Real CC=ts/2;
          //  parameter Physiolibrary.Types.Fraction SystolicFraction = 0.5;
              Time tm;
              discrete Time HP "heart period";
              discrete Time t0 "time of beginning of the cardiac cycle";
              discrete Time ts "duration of systole";
              Time td = HP - ts "duration of diastole";

          equation

            D = (1 + alphaDriving*(phi_ - phi0))*A*exp(-B*(tm - CC)^2) "Linear dependency of driving on phi";
            //timing
            tm = time - pre(t0);
            when {initial(),beat} then
              HP = 1/frequency;
              t0 = time;
              //    ts = 0.16 + 0.3*HP;
              ts = ts_a1 + ts_a2*HP "Guessed from Bombardino 2008 doi:10.1186/1476-7120-6-15";
            end when;

          end Driving_Smith;

          model SA_node
            extends Physiolibrary.Icons.SinoatrialNode;
            Modelica.Blocks.Interfaces.RealOutput t0 "time since start of cardiac cycle" annotation (Placement(transformation(
                    rotation=0, extent={{90,-10},{110,10}}), iconTransformation(extent={{80,60},
                      {120,100}})));
            Physiolibrary.Types.Time t0_last(start = 1) "length of the last cardiac cycle";
            Physiolibrary.Types.Frequency HR_true(start = 1) "Heart rate calculated from true systolic intervals";
            Physiolibrary.Types.RealIO.FrequencyInput frequency annotation (Placement(
                  transformation(rotation=0, extent={{-110,-10},{-90,10}})));
            Physiolibrary.Types.RealIO.FractionInput phiInput if usePhiInput annotation (Placement(
                  transformation(rotation=0, extent={{-110,50},{-90,70}})));

            Physiolibrary.Types.RealIO.FractionOutput cardiac_cycle
              "Fraction of the cycle length"
              annotation (Placement(transformation(extent={{90,50},{110,70}}),
                  iconTransformation(extent={{80,-20},{120,20}})));
            Modelica.Blocks.Interfaces.BooleanOutput beat = cardiac_cycle > 1 "True for beat begining" annotation (Placement(
                  transformation(rotation=0, extent={{90,-70},{110,-50}}),
                  iconTransformation(extent={{80,-100},{120,-60}})));
            Integer beats(start = 0);
            parameter Boolean usePhiInput = false;
            Modelica.Units.SI.Time time0(start = -1);
          equation

           // t0 = cardiac_cycle / frequency_avg;
            t0 = time - time0;
            der(cardiac_cycle) = frequency;

          //   when initial() then
          //     // at given frequency and cardiac cycle
          //
          //     // thus implying t0
          //     time0 = time - t0_last;
          //     time0 = pre(time0);
          //     beats = 0;
          //     HR_true = frequency;
          //     t0_last = 1/frequency;
            when beat then
              reinit(cardiac_cycle, 0);
              // t0 is zero now
              t0_last = pre(t0);
              HR_true = 1/max(1e-3, t0_last);
              beats = pre(beats) + 1;
              time0 = time;
            end when;

          end SA_node;

          model PericardiumPressure
            extends Physiolibrary.Icons.BloodElasticCompartment;
            Modelica.Blocks.Interfaces.RealOutput p_out = p annotation (Placement(
                  transformation(extent={{80,-20},{120,20}}), iconTransformation(extent={{80,-20},
                      {120,20}})));

            input Physiolibrary.Types.Volume heartVolume;
            parameter Boolean enabled =  false "enable the pericardium" annotation(choices(checkBox=true));
            parameter Physiolibrary.Types.Volume V0 = 500e-6 "minimalvolume to produce additional pressure";
            parameter Real s = 10
                                 "exponential steepness of stiffness";
            Physiolibrary.Types.Pressure p;

          equation
            p = if enabled then exp(s*(heartVolume/V0 - 1)) else 0;

            annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={Text(
                    extent={{-140,-100},{140,-60}},
                    lineColor={28,108,200},
                    textString="Pericardium")}),                           Diagram(
                  coordinateSystem(preserveAspectRatio=false)));
          end PericardiumPressure;

        end Auxiliary;

        package Testers
          extends Modelica.Icons.ExamplesPackage;

          model heartRig_base
            parameter Boolean VenousToneEffect = false;

            Components.Signals.ConditionalConnection condHR(disconnectedValue=
                  0.25, disconnected=true) annotation (Placement(transformation(
                    extent={{34,55.2592},{46,65.9259}})));
          Modelica.Blocks.Sources.Trapezoid           thoracic_pressure(
              amplitude=40*133,
              rising=2,
              width=20,
              falling=2,
              period=200,
              nperiod=1,
              offset=0,
              startTime=40)
              annotation (Placement(transformation(extent={{-110,-50},{-90,-30}})));
            Components.Signals.ConditionalConnection condTP(disconnectedValue=0,
                disconnected=true) annotation (Placement(transformation(extent=
                      {{-77,-45.3333},{-63,-33.3333}})));
            Baroreflex.HeartRate_HRMinMax heartRate2_1(phi0=0.25)
              annotation (Placement(transformation(extent={{8,-28},{-4,-16}})));
            replaceable Heart_SmithOlufsen heartComponent(
              HR=1,
              UseFrequencyInput=true,
              UseThoracic_PressureInput=true) constrainedby
              Components.Subsystems.Heart.partialHeart(UseFrequencyInput=true,
                UseThoracic_PressureInput=true) annotation (Placement(
                  transformation(extent={{-12,-32},{-32,-12}})));
            replaceable Components.Subsystems.Pulmonary.Pulmonary_Smith
              pulmonaryComponent(UseThoracic_PressureInput=true) constrainedby
              Components.Subsystems.Pulmonary.partialPulmonary annotation (
                Placement(transformation(extent={{-30,-62},{-10,-42}})));
          Modelica.Blocks.Sources.Trapezoid phi(
              amplitude=0.74,
              rising=200,
              width=50,
              period=1000,
              startTime=50,
              falling=2,
              nperiod=1,
              offset=0.25)
              annotation (Placement(transformation(extent={{-100,50},{-80,70}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume SystemicVeins(
                usePressureInput=true, P=533.28954966)
              annotation (Placement(transformation(extent={{20,0},{0,20}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume SystemicTissues(P=
                  13332.2387415)
              annotation (Placement(transformation(extent={{-120,-20},{-100,0}})));
          Modelica.Blocks.Sources.Trapezoid venousPressure(
              amplitude=133*30,
              rising=200,
              width=50,
              period=1000,
              startTime=50,
              falling=2,
              nperiod=1,
              offset=-15*133)
              annotation (Placement(transformation(extent={{-60,20},{-40,40}})));
            Components.Signals.ConditionalConnection condHR1(disconnectedValue=
                  4*133, disconnected=false) annotation (Placement(
                  transformation(extent={{-18,25.2592},{-6,35.9259}})));
          Physiolibrary.Hydraulic.Components.ElasticVesselElastance
                                 aorta(
              ZeroPressureVolume=0,
              volume_start=0.0001241,
              Elastance=92165766.41999) annotation (Placement(transformation(extent={{-52,-20},
                      {-32,0}})));
            Physiolibrary.Hydraulic.Components.Resistor
                     Rsys(Resistance(displayUnit="(mmHg.min)/l") = 7.9993432449)
              annotation (Placement(transformation(
                  extent={{-10,-10},{10,10}},
                  rotation=180,
                  origin={-70,-10})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume pulmonaryVeins(
                usePressureInput=true, P=533.28954966)
              annotation (Placement(transformation(extent={{84,-42},{64,-22}})));
            Physiolibrary.Hydraulic.Components.Resistor
                     Rsys1(Resistance(displayUnit="(mmHg.min)/l")=
                7999343.2449)
              annotation (Placement(transformation(
                  extent={{-10,-10},{10,10}},
                  rotation=180,
                  origin={28,-52})));
          equation
            connect(thoracic_pressure.y, condTP.u) annotation (Line(points={{-89,-40},
                    {-84,-40},{-84,-40},{-78.4,-40}}, color={0,0,127}));
            connect(condTP.y, heartComponent.thoracic_pressure_input) annotation (
                Line(points={{-62.3,-40},{-22,-40},{-22,-32}}, color={0,0,127}));
            connect(condTP.y, pulmonaryComponent.thoracic_pressure) annotation (Line(
                  points={{-62.3,-40},{-54,-40},{-54,-62},{-20,-62}}, color={0,0,127}));
            connect(heartRate2_1.HR, heartComponent.frequency_input)
              annotation (Line(points={{-4.12,-22},{-12,-22}}, color={0,0,127}));
            connect(condHR.y, heartRate2_1.phi) annotation (Line(points={{46.6,60},
                    {60,60},{60,-22},{8,-22}},     color={0,0,127}));
            connect(pulmonaryComponent.port_a,heartComponent. pa) annotation (Line(
                points={{-30,-52},{-48,-52},{-48,-16.4},{-32,-16.4}},
                color={0,0,0},
                thickness=1));
            connect(condHR.u, phi.y) annotation (Line(points={{32.8,60},{-24,60},
                    {-24,60},{-79,60}},color={0,0,127}));
            connect(heartComponent.sv, SystemicVeins.y) annotation (Line(
                points={{-12,-16.4},{-6,-16.4},{-6,10},{0,10}},
                color={0,0,0},
                thickness=1));
            connect(venousPressure.y, condHR1.u) annotation (Line(points={{-39,30},
                    {-30,30},{-30,30},{-19.2,30}}, color={0,0,127}));
            connect(condHR1.y, SystemicVeins.pressure) annotation (Line(points={{-5.4,30},
                    {30,30},{30,10},{20,10}},          color={0,0,127}));
            connect(SystemicTissues.y, Rsys.q_out) annotation (Line(
                points={{-100,-10},{-80,-10}},
                color={0,0,0},
                thickness=1));
            connect(Rsys.q_in, aorta.q_in) annotation (Line(
                points={{-60,-10},{-42,-10}},
                color={0,0,0},
                thickness=1));
            connect(aorta.q_in, heartComponent.sa) annotation (Line(
                points={{-42,-10},{-38,-10},{-38,-25.4},{-12,-25.4}},
                color={0,0,0},
                thickness=1));
            connect(pulmonaryVeins.y, heartComponent.pv) annotation (Line(
                points={{64,-32},{16,-32},{16,-25.4},{-32,-25.4}},
                color={0,0,0},
                thickness=1));
            connect(pulmonaryVeins.pressure, SystemicVeins.pressure)
              annotation (Line(points={{84,-32},{84,10},{20,10}}, color={0,0,
                    127}));
            connect(pulmonaryComponent.port_b, Rsys1.q_out) annotation (Line(
                points={{-10,-52},{18,-52}},
                color={0,0,0},
                thickness=1));
            connect(Rsys1.q_in, pulmonaryVeins.y) annotation (Line(
                points={{38,-52},{52,-52},{52,-32},{64,-32}},
                color={0,0,0},
                thickness=1));
            annotation (experiment(
                StopTime=300,
                Interval=0.02,
                Tolerance=1e-07,
                __Dymola_Algorithm="Dassl"));
          end heartRig_base;

          model heartRig_TriSeg
            extends heartRig_base(
              redeclare Heart_TriSegMechanics_Simple heartComponent(ventricles(
                    calciumMechanics(t0_delay=0.2, t0_delay_maxAct=0.2*settings.HR_nominal
                        /settings.HR_max))),
              heartRate2_1(HR_nom=1.25),
              condHR1(disconnected=true, disconnectedValue=8*133),
              condHR(disconnected=false));
            inner Settings settings(
              heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 9.585000e+03,
              heart_vntr_TR(displayUnit="s") = 0.38,
              heart_atr_D_0(displayUnit="1") = 9.794839e+06,
              heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
              heart_vntr_Tact=-0.2,
              baro_fsn(displayUnit="Hz") = 0.03625,
              V_PV_init=6.250000e-06,
              heart_vntr_D_0_maxAct=2.953125e-04,
              heart_vntr_TS_maxAct=1.223990e-01,
              heart_vntr_TR_maxAct=1.106879e-01,
              tissues_eta_Ra=2.545225e+00,
              tissues_eta_C=3.421191e-01,
              eta_vc=1.289172e-01,
              veins_gamma=7.343750e-01,
              heart_atr_D_A=1.795879e+07,
              heart_R_vlv=1.349889e+05,
              heart_R_LA(displayUnit="(dyn.s)/cm5") = 3.293500e+06,
              heart_vntr_D_0=2.659375e+01,
              heart_vntr_D_A=1.377187e+03,
              heart_vntr_xi_AmRef=9.180500e-01,
              heart_vntr_L0=9.977000e-01,
              syst_TPR=1.296505e+08,
              syst_TR_frac=5.215290e+00,
              syst_art_k_E=4.173268e-01,
              pulm_C_PV=3.234639e-07,
              pulm_C_PA=2.599528e-08,
              pulm_R=8.832106e+06,
              pulm_q_nom_maxq=0.0002742187,
              pulm_P_PV_nom=1333.22387415,
              heart_vntr_Lsref=1.900000e+00,
              initByPressure=false,
              height=1.7132,
              tissues_CO_nom=0.000105,
              EvaluateFunctionalParams=true,
              HR_max=2.907,
              HR_nominal=1.0666666666667,
              UseNonLinear_TissuesCompliance=true,
              baro_f1=3.379000e-03,
              baro_g=0.606258,
              baro_tau_s=98.37,
              baro_useAbsolutePressureTerm=false,
              baro_xi_delta0=2.688000e-01,
              chi_phi=1.185,
              heart_R_RA(displayUnit="(dyn.s)/cm5") = 3766520,
              heart_vntr_xi_Vw=0.8908231,
              pulm_R_exp=9.150000e-01,
              syst_abd_P_th_ratio=0.832,
              syst_art_UseVasoconstrictionEffect=true,
              tissues_chi_C=-0.12,
              tissues_UseStraighteningReaction2Phi=true,
              tissues_ZPV_nom=0.00210124,
              tissues_chi_Ra=29.376,
              tissues_gamma=0.5,
              tissues_tau_R(displayUnit="s") = 0,
              veins_C_phi=0.09,
              veins_activation_tau=0) annotation (Placement(transformation(
                    extent={{-100,80},{-80,100}})));
          equation
            connect(heartComponent.phi, heartRate2_1.phi) annotation (Line(
                  points={{-12,-16},{-12,-6},{60,-6},{60,-22},{8,-22}}, color={
                    0,0,127}));
          end heartRig_TriSeg;

          model TestCalciumMechanics
            Auxiliary.TriSegMechanics_components.Driving_Calcium
              calciumMechanics
              annotation (Placement(transformation(extent={{0,0},{20,20}})));
            Modelica.Blocks.Sources.Ramp ramp(
              duration=10,
              offset=1,
              startTime=5)
              annotation (Placement(transformation(extent={{-60,0},{-40,20}})));
          equation
            connect(ramp.y, calciumMechanics.frequency)
              annotation (Line(points={{-39,10},{1,10}}, color={0,0,127}));
            annotation (
              Icon(coordinateSystem(preserveAspectRatio=false)),
              Diagram(coordinateSystem(preserveAspectRatio=false)),
              experiment(
                StopTime=20,
                Interval=0.02,
                Tolerance=1e-06,
                __Dymola_Algorithm="Dassl"));
          end TestCalciumMechanics;

          model TestTriSegMechVentriclesOld
            Auxiliary.TriSegMechanics_components.Ventricles_Lumens ventricles
              annotation (Placement(transformation(extent={{-64,-10},{-44,10}})));
            Modelica.Blocks.Sources.Ramp ramp(
              height=0,
              duration=10,
              offset=1,
              startTime=5) annotation (Placement(transformation(extent={{-128,
                      -16},{-108,4}})));
            Physiolibrary.Hydraulic.Components.Resistor resistor(Resistance(
                  displayUnit="(mmHg.min)/l") = 7999343.2449)
              annotation (Placement(transformation(extent={{40,10},{60,30}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(
                usePressureInput=true, P=2666.4477483)
              annotation (Placement(transformation(extent={{90,10},{70,30}})));
            Physiolibrary.Hydraulic.Components.Resistor resistor1(Resistance(
                  displayUnit="(mmHg.min)/l") = 7999343.2449)  annotation (
                Placement(transformation(extent={{40,-30},{60,-10}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(
                usePressureInput=true, P=2666.4477483)
                                annotation (Placement(transformation(extent={{90,-30},
                      {70,-10}})));
            Modelica.Blocks.Sources.Ramp thoracicPressure(
              height=0,
              duration=10,
              offset=0,
              startTime=5) annotation (Placement(transformation(extent={{-92,
                      -76},{-72,-56}})));
            Modelica.Blocks.Sources.Ramp thoracicPressure1(
              height=-1200,
              duration=600,
              offset=666,
              startTime=5)
              annotation (Placement(transformation(extent={{-12,60},{8,80}})));
            Basic.IdealValve_deactivable idealValve_deactivable annotation (
                Placement(transformation(extent={{-16,-4},{-36,16}})));
            Basic.IdealValve_deactivable idealValve_deactivable1
              annotation (Placement(transformation(extent={{16,4},{-4,-16}})));
          equation
            connect(resistor.q_out, unlimitedVolume.y) annotation (Line(
                points={{60,20},{70,20}},
                color={0,0,0},
                thickness=1));
            connect(resistor1.q_out, unlimitedVolume1.y) annotation (Line(
                points={{60,-20},{70,-20}},
                color={0,0,0},
                thickness=1));
            connect(ramp.y, ventricles.frequency) annotation (Line(points={{
                    -107,-6},{-86,-6},{-86,0},{-64,0}}, color={0,0,127}));
            connect(thoracicPressure.y, ventricles.thoracic_pressure_input)
              annotation (Line(points={{-71,-66},{-54,-66},{-54,-10}}, color={0,
                    0,127}));
            connect(thoracicPressure1.y, unlimitedVolume.pressure) annotation (
                Line(points={{9,70},{112,70},{112,20},{90,20}}, color={0,0,127}));
            connect(unlimitedVolume1.pressure, unlimitedVolume.pressure)
              annotation (Line(points={{90,-20},{112,-20},{112,20},{90,20}},
                  color={0,0,127}));
            connect(resistor.q_in, idealValve_deactivable.q_in) annotation (
                Line(
                points={{40,20},{24,20},{24,6},{-16,6}},
                color={0,0,0},
                thickness=1));
            connect(idealValve_deactivable.q_out, ventricles.port_rv)
              annotation (Line(
                points={{-36,6},{-46,6}},
                color={0,0,0},
                thickness=1));
            connect(ventricles.volumeLimiterRV, idealValve_deactivable.ActivateLimiter)
              annotation (Line(points={{-50,8},{-50,24},{-20,24},{-20,16}},
                  color={255,0,255}));
            connect(idealValve_deactivable1.q_in, resistor1.q_in) annotation (
                Line(
                points={{16,-6},{28,-6},{28,-20},{40,-20}},
                color={0,0,0},
                thickness=1));
            connect(idealValve_deactivable1.q_out, ventricles.port_lv)
              annotation (Line(
                points={{-4,-6},{-46,-6}},
                color={0,0,0},
                thickness=1));
            connect(ventricles.volumeLimiterLV, idealValve_deactivable1.ActivateLimiter)
              annotation (Line(points={{-48,-8},{-48,-30},{12,-30},{12,-16}},
                  color={255,0,255}));
            annotation (
              Icon(coordinateSystem(preserveAspectRatio=false)),
              Diagram(coordinateSystem(preserveAspectRatio=false)),
              experiment(
                StopTime=605,
                __Dymola_NumberOfIntervals=1500,
                Tolerance=1e-05,
                __Dymola_Algorithm="Sdirk34hw"));
          end TestTriSegMechVentriclesOld;

          model offsets
            Auxiliary.TriSegMechanics_components.Driving_Olufsen drivingOlufsen(
              t_offset=0,
              usePhiInput=true,
              phi0=settings.phi0,
              D_0=settings.heart_vntr_D_0,
              D_0_maxAct=settings.heart_vntr_D_0_maxAct,
              D_A=settings.heart_vntr_D_A,
              D_A_maxAct=settings.heart_vntr_D_A_maxAct,
              TS=settings.heart_vntr_TS,
              TS_maxAct=settings.heart_vntr_TS_maxAct,
              TR=settings.heart_vntr_TR,
              TR_maxAct=settings.heart_vntr_TR_maxAct) annotation (Placement(
                  transformation(extent={{-20,-48},{0,-28}})));
            Auxiliary.TriSegMechanics_components.Driving_Olufsen
              drivingOlufsenDelayed(
              D_A=settings.heart_atr_D_A,
              D_A_maxAct=settings.heart_atr_D_A,
              TR_maxAct(displayUnit="s") = settings.heart_vntr_TR_maxAct,
              t_offset=-settings.heart_vntr_TS,
              usePhiInput=true,
              phi0=settings.phi0,
              D_0=settings.heart_vntr_D_0,
              D_0_maxAct=settings.heart_vntr_D_0_maxAct,
              TS_maxAct=settings.heart_vntr_TS_maxAct,
              TS=settings.heart_vntr_TS,
              TR=settings.heart_vntr_TR)
              annotation (Placement(transformation(extent={{26,-6},{46,14}})));
            Physiolibrary.Types.Constants.FrequencyConst HR0(k(displayUnit="Hz")=
                   1)
              annotation (Placement(transformation(extent={{-88,-16},{-80,-8}})));

              inner parameter Physiolibrary.Types.Fraction phi = 0.25;
            Auxiliary.Atrium atrium annotation (Placement(transformation(extent=
                     {{18,-38},{38,-18}})));
            Physiolibrary.Types.Constants.PressureConst  HR1(k(displayUnit=
                    "1/min") = 0)
              annotation (Placement(transformation(extent={{74,-32},{66,-24}})));
            Modelica.Blocks.Sources.Ramp ramp(duration=20)
              annotation (Placement(transformation(extent={{-86,40},{-66,60}})));
            inner Settings settings(
              heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 20,
              heart_vntr_TR(displayUnit="s") = 0.38,
              heart_vntr_D_A(displayUnit="Pa/m3") = 10,
              heart_vntr_D_0(displayUnit="1") = 2,
              heart_vntr_D_0_maxAct(displayUnit="1") = 1,
              V_PV_init=0.0001,
              pulm_C_PV=3.0002463033826e-07,
              pulm_P_PV_nom=1333.22387415,
              pulm_R(displayUnit="(dyn.s)/cm5") = 14388560,
              pulm_PV_R_vis(displayUnit="(dyn.s)/cm5"),
              initByPressure=false,
              height=1.7132,
              tissues_CO_nom=0.000105,
              EvaluateFunctionalParams=true,
              HR_max=2.907,
              HR_nominal=1.0666666666667,
              UseNonLinear_TissuesCompliance=true,
              baro_f1=3.379000e-03,
              baro_fsn=0.0320656,
              baro_g=0.606258,
              baro_tau_s=98.37,
              baro_useAbsolutePressureTerm=false,
              baro_xi_delta0=2.688000e-01,
              chi_phi=1.185,
              eta_vc=0.1267,
              heart_R_LA(displayUnit="(dyn.s)/cm5") = 3766520,
              heart_R_RA(displayUnit="(dyn.s)/cm5") = 3766520,
              heart_atr_D_A=16803550,
              heart_vntr_TR_maxAct=0.095472,
              heart_vntr_TS_maxAct=0.1079,
              heart_atr_D_0=0.5902815,
              heart_vntr_xi_AmRef=0.9118,
              heart_vntr_xi_Vw=0.8908231,
              pulm_C_PA=3.819551e-08,
              pulm_R_exp=9.150000e-01,
              syst_TPR=130465900,
              syst_TR_frac=5.21529,
              syst_abd_P_th_ratio=0.832,
              syst_art_UseVasoconstrictionEffect=true,
              syst_art_k_E=0.4226095,
              tissues_chi_C=-0.12,
              tissues_UseStraighteningReaction2Phi=true,
              tissues_ZPV_nom=0.00210124,
              tissues_chi_Ra=29.376,
              tissues_eta_C=0.2676726,
              tissues_eta_Ra=3.393633,
              tissues_gamma=0.5,
              tissues_tau_R(displayUnit="s") = 0,
              veins_C_phi=0.09,
              veins_activation_tau=0) annotation (Placement(transformation(
                    extent={{-100,80},{-80,100}})));
          equation
            connect(HR0.y, drivingOlufsen.frequency) annotation (Line(points={{-79,-12},
                    {-68,-12},{-68,-38},{-19,-38}},
                                               color={0,0,127}));
            connect(HR0.y, drivingOlufsenDelayed.frequency) annotation (Line(points={{-79,-12},
                    {-64,-12},{-64,18},{-4,18},{-4,10},{0,10},{0,4},{27,4}},        color=
                   {0,0,127}));
            connect(atrium.thoracic_pressure_input, HR1.y)
              annotation (Line(points={{38,-28},{65,-28}}, color={0,0,127}));
            connect(drivingOlufsen.cardiac_cycle, atrium.cardiac_cycle)
              annotation (Line(points={{1,-32},{10,-32},{10,-28},{18,-28}},
                                                            color={0,0,127}));
            connect(ramp.y, drivingOlufsenDelayed.phiInput) annotation (Line(points={{-65,
                    50},{16,50},{16,10},{27,10}}, color={0,0,127}));
            connect(ramp.y, drivingOlufsen.phiInput) annotation (Line(points={{-65,50},{-32,
                    50},{-32,-32},{-19,-32}}, color={0,0,127}));
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)),
              experiment(
                StopTime=100,
                Interval=0.01,
                __Dymola_Algorithm="Dassl"));
          end offsets;

          model ADANVR
            Heart_ADAN_VR heart_ADAN_VR(
              UseFrequencyInput=false,
              UseThoracic_PressureInput=false,
              UsePhiInput=false)
              annotation (Placement(transformation(extent={{-10,-8},{10,12}})));
            outer Settings settings(
              heart_R_vlv(displayUnit="(dyn.s)/cm5"),
              heart_R_LA(displayUnit="(mmHg.s)/ml") = 3333059.685375,
              syst_TPR(displayUnit="(dyn.s)/cm5")) annotation (Placement(
                  transformation(extent={{-76,50},{-56,70}})));
            Pulmonary.Pulmonary_ADAN_VR pulmonary_ADAN_VR(
                UseThoracic_PressureInput=false, pulmonary(u_pvn(start=
                      2666.4477483, displayUnit="mmHg")))
              annotation (Placement(transformation(extent={{28,-6},{48,14}})));
            Systemic.Systemic_TriSeg systemic_TriSeg annotation (Placement(
                  transformation(extent={{-96,-38},{-20,-8}})));
          equation
            connect(pulmonary_ADAN_VR.port_b, heart_ADAN_VR.pv) annotation (
                Line(
                points={{48,4},{52,4},{52,-1.4},{10,-1.4}},
                color={0,0,0},
                thickness=1));
            connect(heart_ADAN_VR.pa, pulmonary_ADAN_VR.port_a) annotation (
                Line(
                points={{10,7.6},{24,7.6},{24,4},{28,4}},
                color={0,0,0},
                thickness=1));
            connect(heart_ADAN_VR.sa, systemic_TriSeg.port_a) annotation (Line(
                points={{-10,-1.4},{-54,-1.4},{-54,0},{-96,0},{-96,-28}},
                color={0,0,0},
                thickness=1));
            connect(systemic_TriSeg.port_b, heart_ADAN_VR.sv) annotation (Line(
                points={{-20,-28},{-20,7.6},{-10,7.6}},
                color={0,0,0},
                thickness=1));
            annotation (
              Icon(coordinateSystem(preserveAspectRatio=false)),
              Diagram(coordinateSystem(preserveAspectRatio=false)),
              experiment(
                StopTime=100,
                Interval=0.01,
                Tolerance=1e-07,
                __Dymola_Algorithm="Cvode"));
          end ADANVR;

          model TestEDPVR

              Auxiliary.TriSegMechanics_components.Ventricles_LumensSimplePassiveTensionOutput
              ventricles(
              LV_wall(
                k_passive=k_passive,
                k_passive_negative=k_passive,
                SLcollagen=SLcollagen,
                PConcollagen=PConcollagen,
                PExpcollagen=PExpcollagen,
                ym(start=2.849624, fixed=true),
                SL(start=1.6361666, fixed=true),
                xm(start=-4.0829096, fixed=false)),
              SEP_wall(
                k_passive=k_passive,
                k_passive_negative=k_passive,
                SLcollagen=SLcollagen,
                PConcollagen=PConcollagen,
                PExpcollagen=PExpcollagen,
                       SL(start=1.6526003, fixed=true), xm(start=1.7755877, fixed=false)),
              RV_wall(
                k_passive=k_passive,
                k_passive_negative=k_passive,
                SLcollagen=SLcollagen,
                PConcollagen=PConcollagen,
                PExpcollagen=PExpcollagen,
                      SL(start=1.5763763, fixed=true), xm(start=4.486441, fixed=false)),
              V_LV(start=volume_start, fixed=true),
              V_RV(start=V_RV_start, fixed=true))
              annotation (Placement(transformation(extent={{-12,-8},{8,12}})));

            Physiolibrary.Types.Constants.FractionConst phi0(k=settings.phi0)
              annotation (Placement(transformation(extent={{-70,18},{-62,26}})));
            Physiolibrary.Types.Constants.PressureConst P0(k=0)
              annotation (Placement(transformation(extent={{4,-4},{-4,4}},
                  rotation=270,
                  origin={-2,-56})));
            Modelica.Blocks.Sources.Constant const(k=0)
              annotation (Placement(transformation(extent={{-56,-6},{-36,14}})));
            inner Settings            settings(
              baro_tau_s(displayUnit="s") = 10,
              veins_UseNonLinearVeins=true,
              veins_linearE_rel=765,
              veins_linearV0_rel=0.793,
              veins_delayed_activation=true,
              veins_activation_tau=1,
              baro_fsn(displayUnit="Hz") = 0.038,
              initByPressure=false,
              heart_R_vlv(displayUnit="(Pa.s)/m3") = 133322.387415,
              heart_R_LA(displayUnit="(mmHg.s)/ml") = 3333059.685375,
              heart_vntr_TS_maxAct(displayUnit="s") = 0.034774043,
              heart_vntr_TR_maxAct(displayUnit="s") = 0.11722694,
              heart_vntr_Tact_maxAct=8.000000e-02,
              chi_phi=0.9,
              heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 1.082188e+04,
              heart_vntr_D_0_maxAct=0.0004215625,
              eta_vc=0.2201054,
              tissues_eta_Ra=1.245225,
              tissues_eta_C=0.5058013,
              tissues_chi_Ra=0.2,
              tissues_chi_C=-0.37421876,
              V_PV_init=0,
              heart_atr_D_A=55215000,
              heart_vntr_xi_Vw=0.9014874,
              heart_vntr_xi_AmRef=1.111598,
              heart_vntr_k_passive=3.725000e+01,
              heart_vntr_Lsref=1.900000e+00,
              heart_atr_D_0=14055120,
              heart_atr_TS=1.882500e-01,
              heart_atr_TR=2.631250e-01,
              heart_vntr_D_0=18.15655,
              heart_vntr_D_A=2846.905,
              heart_vntr_TS=8.825000e-02,
              heart_vntr_TR(displayUnit="s") = 2.975000e-01,
              heart_vntr_Tact=8.000000e-02,
              pulm_R=3628209,
              pulm_q_nom_maxq=0.0004958,
              syst_tissues_hydrostaticLevel_correction=1,
              HR_max=2.7333333333333,
              syst_TPR=128212500,
              syst_art_k_E=0.3973268,
              tissues_SV_nom=0.000695,
              pulm_C_PV=3.194206e-07,
              pulm_C_PA=5.3325e-08,
              heart_R_RA(displayUnit="(dyn.s)/cm5") = settings.heart_R_LA,
              tissues_eta_Rv=0,
              syst_TR_frac(displayUnit="1") = 4.695759e+00,
              syst_abd_P_th_ratio=0.8,
              heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
              heart_vntr_L0=1.6,
              pulm_P_PV_nom=1333.22387415,
              height=1.7132,
              tissues_CO_nom=0.000105,
              EvaluateFunctionalParams=true,
              HR_nominal=1.0666666666667,
              UseNonLinear_TissuesCompliance=true,
              baro_f1=3.379000e-03,
              baro_g=0.606258,
              baro_useAbsolutePressureTerm=false,
              baro_xi_delta0=2.688000e-01,
              pulm_R_exp=9.150000e-01,
              syst_art_UseVasoconstrictionEffect=true,
              tissues_UseStraighteningReaction2Phi=true,
              tissues_ZPV_nom=0.00210124,
              tissues_gamma=0.5,
              tissues_tau_R(displayUnit="s") = 0,
              veins_C_phi=0.09) annotation (Placement(transformation(extent={{-100,
                      80},{-80,100}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedOutflowPump unlimitedOutflowPump(
                useSolutionFlowInput=false, SolutionFlow=SolutionFlow)
              annotation (Placement(transformation(extent={{34,-4},{54,16}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedOutflowPump unlimitedOutflowPump1(
                useSolutionFlowInput=false, SolutionFlow=SolutionFlow)
              annotation (Placement(transformation(extent={{34,-22},{54,-2}})));
            parameter Physiolibrary.Types.VolumeFlowRate SolutionFlow=-1e-06
              "Volumetric flow of solution if useSolutionFlowInput=false";
            Data.EDPVRnorm EDPVRnorm_P(V_m=V_m, P_m=P_m)
              annotation (Placement(transformation(extent={{38,28},{58,48}})));
            Physiolibrary.Hydraulic.Sensors.PressureMeasure pressureMeasure
              annotation (Placement(transformation(extent={{14,36},{34,56}})));
            Data.EDPVRnorm EDPVRnorm_V(
              V_m=V_m,
              P_m=P_m,                 useVolumeInput=true)
              annotation (Placement(transformation(extent={{54,-54},{74,-34}})));
            Modelica.Blocks.Sources.RealExpression realExpression(y=ventricles.V_LV)
              annotation (Placement(transformation(extent={{10,-52},{30,-32}})));
            parameter Physiolibrary.Types.Volume V30=0.0001 "EDV at EDP of 30 mmHg";
            parameter Physiolibrary.Types.Volume V0=0 "LV Zero pressure volume";
            parameter Real k_passive=37 "mN / mm^2 / micro";
            parameter Real SLcollagen=ventricles.settings.heart_vntr_SLcollagen
              "threshold for collagen activation, microns";
            parameter Real PConcollagen=0.01 "contriubtion of collagen (??)";
            parameter Real PExpcollagen=70 "contriubtion of collagen (??)";
            Physiolibrary.Hydraulic.Sources.UnlimitedOutflowPump unlimitedOutflowPump2(
                useSolutionFlowInput=false, SolutionFlow=SolutionFlow)
              annotation (Placement(transformation(extent={{40,-90},{60,-70}})));
            Physiolibrary.Hydraulic.Components.ElasticVessel elasticVessel(
                volume_start=volume_start) annotation (Placement(transformation(
                    extent={{-10,-90},{10,-70}})));
            parameter Physiolibrary.Types.Volume volume_start=4e-05
              "Volume start value";
            parameter Physiolibrary.Types.Volume V_m=0.00012;
            parameter Physiolibrary.Types.Pressure P_m=1066.57909932;
            parameter Physiolibrary.Types.Volume V_RV_start=4e-05;
          equation
            connect(ventricles.thoracic_pressure_input, P0.y)
              annotation (Line(points={{-2,-8},{-2,-51}}, color={0,0,127}));
            connect(ventricles.phi_input, phi0.y)
              annotation (Line(points={{-2,12},{-2,22},{-61,22}}, color={0,0,127}));
            connect(const.y, ventricles.t0)
              annotation (Line(points={{-35,4},{-12,4}}, color={0,0,127}));
            connect(const.y, ventricles.frequency) annotation (Line(points={{-35,4},{-18,4},
                    {-18,-2},{-12,-2}}, color={0,0,127}));
            connect(const.y, ventricles.cardiac_cycle) annotation (Line(points={{-35,4},{-18,
                    4},{-18,-8},{-12,-8}}, color={0,0,127}));
            connect(ventricles.port_rv, unlimitedOutflowPump.q_in) annotation (Line(
                points={{6,6},{34,6}},
                color={0,0,0},
                thickness=1));
            connect(ventricles.port_lv, unlimitedOutflowPump1.q_in) annotation (Line(
                points={{6,-4},{28,-4},{28,-12},{34,-12}},
                color={0,0,0},
                thickness=1));
            connect(pressureMeasure.pressure, EDPVRnorm_P.pressure) annotation (Line(
                  points={{30,42},{32,42},{32,44},{38,44}}, color={0,0,127}));
            connect(pressureMeasure.q_in, unlimitedOutflowPump1.q_in) annotation (Line(
                points={{20,40},{16,40},{16,-4},{28,-4},{28,-12},{34,-12}},
                color={0,0,0},
                thickness=1));
            connect(EDPVRnorm_V.pressureOut, ventricles.PLV) annotation (Line(
                  points={{54,-38},{42,-38},{42,-28},{14,-28},{14,2},{8,2}},
                  color={0,0,127}));
            connect(elasticVessel.q_in, unlimitedOutflowPump2.q_in) annotation (
               Line(
                points={{0,-80},{40,-80}},
                color={0,0,0},
                thickness=1));
            connect(elasticVessel.volume, EDPVRnorm_V.volume) annotation (Line(
                  points={{6,-90},{28,-90},{28,-50},{54,-50}}, color={0,0,127}));
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)),
              experiment(
                StopTime=10,
                __Dymola_NumberOfIntervals=1500,
                Tolerance=1e-09,
                __Dymola_Algorithm="Cvode"));
          end TestEDPVR;

          model TestEDPVR_fit "Try to fit the EDPVR"

              Auxiliary.TriSegMechanics_components.Ventricles_LumensSimpleEDPVR
              ventricles(
              LV_wall(
                ym(start=2.849624, fixed=true),
                SL(start=1.6361666, fixed=true),
                xm(start=-4.0829096, fixed=false)),
              SEP_wall(
                SL(start=1.6526003, fixed=true),
                xm(start=1.7755877, fixed=false)),
              RV_wall(
                SL(start=1.5763763, fixed=true),
                xm(start=4.486441, fixed=false)),
              V_LV(start=volume_start, fixed=true),
              V_RV(start=V_RV_start, fixed=true))
              annotation (Placement(transformation(extent={{-12,-8},{8,12}})));

            Physiolibrary.Types.Constants.FractionConst phi0(k=settings.phi0)
              annotation (Placement(transformation(extent={{-70,18},{-62,26}})));
            Physiolibrary.Types.Constants.PressureConst P0(k=0)
              annotation (Placement(transformation(extent={{4,-4},{-4,4}},
                  rotation=270,
                  origin={-2,-56})));
            Modelica.Blocks.Sources.Constant const(k=0)
              annotation (Placement(transformation(extent={{-56,-6},{-36,14}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedOutflowPump unlimitedOutflowPump(
                useSolutionFlowInput=false, SolutionFlow=SolutionFlow)
              annotation (Placement(transformation(extent={{34,-4},{54,16}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedOutflowPump unlimitedOutflowPump1(
                useSolutionFlowInput=false, SolutionFlow=SolutionFlow)
              annotation (Placement(transformation(extent={{34,-22},{54,-2}})));
            parameter Physiolibrary.Types.VolumeFlowRate SolutionFlow=-0.0001
              "Volumetric flow of solution if useSolutionFlowInput=false";
            Data.EDPVRnorm EDPVRnorm_P(V_m=V_m, P_m=P_m)
              annotation (Placement(transformation(extent={{38,28},{58,48}})));
            Physiolibrary.Hydraulic.Sensors.PressureMeasure pressureMeasure
              annotation (Placement(transformation(extent={{14,36},{34,56}})));
            Data.EDPVRnorm EDPVRnorm_V(
              V_m=V_m,
              P_m=P_m,                 useVolumeInput=true)
              annotation (Placement(transformation(extent={{54,-54},{74,-34}})));
            Modelica.Blocks.Sources.RealExpression realExpression(y=ventricles.V_LV)
              annotation (Placement(transformation(extent={{10,-52},{30,-32}})));
            parameter Physiolibrary.Types.Volume V30=0.0001 "EDV at EDP of 30 mmHg";
            parameter Physiolibrary.Types.Volume V0=0 "LV Zero pressure volume";
            parameter Real k_passive=settings.heart_vntr_k_passive
                                        "mN / mm^2 / micro";
            parameter Real SLcollagen=settings.heart_vntr_SLcollagen
              "threshold for collagen activation, microns";
            parameter Real PConcollagen=settings.heart_vntr_PConcollagen
                                             "contriubtion of collagen (??)";
            parameter Real PExpcollagen=settings.heart_vntr_PExpcollagen
                                           "contriubtion of collagen (??)";
            Physiolibrary.Hydraulic.Sources.UnlimitedOutflowPump unlimitedOutflowPump2(
                useSolutionFlowInput=false, SolutionFlow=SolutionFlow)
              annotation (Placement(transformation(extent={{40,-90},{60,-70}})));
            Physiolibrary.Hydraulic.Components.ElasticVessel elasticVessel(volume_start=
                  volume_start)
              annotation (Placement(transformation(extent={{-10,-90},{10,-70}})));
            parameter Physiolibrary.Types.Volume volume_start=0.0001
              "Volume start value";
            parameter Physiolibrary.Types.Volume V_m=0.00015;
            parameter Physiolibrary.Types.Pressure P_m=799.934;
            parameter Physiolibrary.Types.Volume V_RV_start=0.0001;
            output Physiolibrary.Types.Pressure EDP_err = if EDPVRnorm_V.EDP > 0 then (EDPVRnorm_V.EDP - ventricles.P_LV)^2 else 0;
            Real err;
            inner Settings            settings(
              initByPressure=false,
              veins_delayed_activation=false,
              baro_tau_s(displayUnit="s") = 93,
              heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 4.600005e+03,
              heart_vntr_D_0_maxAct=1.225000e-03,
              heart_vntr_TS_maxAct(displayUnit="s") = 1.047740e-01,
              heart_vntr_TR_maxAct(displayUnit="s") = 7.597690e-02,
              eta_vc=2.101054e-01,
              tissues_eta_Ra=3.145225e+00,
              tissues_eta_Rv=2.806250e+00,
              tissues_eta_C=5.708013e-01,
              tissues_chi_Ra(displayUnit="1") = 2.481250e+01,
              tissues_chi_Rv=1.384375e+01,
              tissues_chi_C=-3.125000e-02,
              V_PV_init=0,
              heart_R_LA(displayUnit="(mmHg.s)/ml") = 1.655068e+06,
              heart_R_vlv(displayUnit="(mmHg.s)/ml") = 7.723515e+05,
              heart_vntr_D_0=7.479470e+00,
              heart_vntr_D_A=1.298533e+03,
              heart_vntr_TS=3.246875e-01,
              heart_vntr_TR(displayUnit="s") = 4.031250e-01,
              heart_atr_D_0=2.651364e+07,
              heart_atr_D_A=7.621357e+07,
              syst_TPR=1.287333e+08,
              syst_TR_frac(displayUnit="1") = 5.227710e+00,
              pulm_C_PA=1.635189e-08,
              pulm_R(displayUnit="(Pa.s)/m3") = 1.019753e+07,
              heart_vntr_k_passive=5.000000e+00,
              heart_vntr_SLcollagen=2.087500e+00,
              heart_vntr_PConcollagen=2.642812e+01,
              heart_vntr_PExpcollagen=2.481250e+00,
              heart_atr_TS=0.08,
              baro_f1=3.5e-03,
              dummy=2,
              baro_fsn(displayUnit="1/min") = 0.0355333333,
              syst_art_k_E=0.4402957,
              HR_max=3.1666666666667,
              chi_phi=0.7,
              heart_R_RA(displayUnit="(dyn.s)/cm5") = settings.heart_R_LA,
              pulm_q_nom_maxq(displayUnit="l/min") = 0.00033333333333333,
              veins_UseNonLinearVeins=true,
              veins_linearE_rel=765,
              veins_linearV0_rel=0.793,
              veins_activation_tau=1,
              heart_vntr_Tact_maxAct=8.000000e-02,
              heart_vntr_Lsref=1.9,
              heart_atr_TR=2.631250e-01,
              heart_vntr_Tact=8.000000e-02,
              syst_tissues_hydrostaticLevel_correction=1,
              tissues_SV_nom=0.000695,
              pulm_C_PV=3.194206e-07,
              syst_abd_P_th_ratio=0.8,
              heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
              heart_vntr_L0=1.6,
              pulm_P_PV_nom=1333.22387415,
              height=1.7132,
              tissues_CO_nom=0.000105,
              EvaluateFunctionalParams=true,
              HR_nominal=1.0666666666667,
              UseNonLinear_TissuesCompliance=true,
              baro_g=0.606258,
              baro_useAbsolutePressureTerm=false,
              baro_xi_delta0=2.688000e-01,
              pulm_R_exp=9.150000e-01,
              syst_art_UseVasoconstrictionEffect=true,
              tissues_UseStraighteningReaction2Phi=true,
              tissues_ZPV_nom=0.00210124,
              tissues_gamma=0.5,
              tissues_tau_R(displayUnit="s") = 0,
              veins_C_phi=0.09)
              annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
          equation
            der(err) = EDP_err;

            connect(ventricles.thoracic_pressure_input, P0.y)
              annotation (Line(points={{-2,-8},{-2,-51}}, color={0,0,127}));
            connect(ventricles.phi_input, phi0.y)
              annotation (Line(points={{-2,12},{-2,22},{-61,22}}, color={0,0,127}));
            connect(const.y, ventricles.t0)
              annotation (Line(points={{-35,4},{-12,4}}, color={0,0,127}));
            connect(const.y, ventricles.frequency) annotation (Line(points={{-35,4},{-18,4},
                    {-18,-2},{-12,-2}}, color={0,0,127}));
            connect(const.y, ventricles.cardiac_cycle) annotation (Line(points={{-35,4},{-18,
                    4},{-18,-8},{-12,-8}}, color={0,0,127}));
            connect(ventricles.port_rv, unlimitedOutflowPump.q_in) annotation (Line(
                points={{6,6},{34,6}},
                color={0,0,0},
                thickness=1));
            connect(ventricles.port_lv, unlimitedOutflowPump1.q_in) annotation (Line(
                points={{6,-4},{28,-4},{28,-12},{34,-12}},
                color={0,0,0},
                thickness=1));
            connect(pressureMeasure.pressure, EDPVRnorm_P.pressure) annotation (Line(
                  points={{30,42},{32,42},{32,44},{38,44}}, color={0,0,127}));
            connect(pressureMeasure.q_in, unlimitedOutflowPump1.q_in) annotation (Line(
                points={{20,40},{16,40},{16,-4},{28,-4},{28,-12},{34,-12}},
                color={0,0,0},
                thickness=1));
            connect(elasticVessel.q_in, unlimitedOutflowPump2.q_in) annotation (Line(
                points={{0,-80},{40,-80}},
                color={0,0,0},
                thickness=1));
            connect(elasticVessel.volume, EDPVRnorm_V.volume) annotation (Line(points={{6,
                    -90},{28,-90},{28,-50},{54,-50}}, color={0,0,127}));
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)),
              experiment(
                __Dymola_NumberOfIntervals=200,
                Tolerance=1e-06,
                __Dymola_Algorithm="Cvode"));
          end TestEDPVR_fit;

          model TestEDPVR_fit_HFpEF
            extends TestEDPVR_fit(
              SolutionFlow=-0.00015,
              ventricles(LV_wall(
                  k_passive=ventricles.settings.heart_vntr_k_passive*LV_stiff,
                  SLcollagen=ventricles.settings.heart_vntr_SLcollagen*LV_SLcollagen_f,
                  PConcollagen=ventricles.settings.heart_vntr_PConcollagen*
                      LV_PConcollagen_f,
                  PExpcollagen=ventricles.settings.heart_vntr_PExpcollagen*
                      LV_PExpcollagen_f), SEP_wall(
                  k_passive=ventricles.settings.heart_vntr_k_passive*(LV_stiff/2 + 1/2),
                  SLcollagen=ventricles.settings.heart_vntr_SLcollagen*(LV_SLcollagen_f /2 + 1/2),
                  PConcollagen=ventricles.settings.heart_vntr_PConcollagen*(LV_PConcollagen_f /2 + 1
                      /2),
                  PExpcollagen=ventricles.settings.heart_vntr_PExpcollagen*(LV_PExpcollagen_f /2 + 1
                      /2))),
              P_m(displayUnit="mmHg") = 3999.67,
              V_RV_start(displayUnit="ml") = 5e-05,
              volume_start(displayUnit="ml") = 5e-05);
            parameter Real LV_stiff=10.0
                                      "Stiffening factor";
            parameter Real LV_SLcollagen_f=0.95
                                             "threshold for collagen activation, [um]";
            parameter Real LV_PConcollagen_f=1.1
                                               "contriubtion of collagen [1]";
            parameter Real LV_PExpcollagen_f=1.1
                                               "contriubtion of collagen [1]";
          end TestEDPVR_fit_HFpEF;

          model TestEDPVR_fit_HFpEF2
            extends TestEDPVR_fit_HFpEF(
              V_m=0.00012,
              LV_PConcollagen_f=1.0,
              LV_PExpcollagen_f=1.2,
              LV_SLcollagen_f=0.9,
              LV_stiff=15.0);
          end TestEDPVR_fit_HFpEF2;

          model TestEDPVR_fit_HFpEF3
            extends TestEDPVR_fit_HFpEF(
              V_m=0.0001,
              LV_PConcollagen_f=1.0,
              LV_PExpcollagen_f=1.2,
              LV_SLcollagen_f=0.86,
              LV_stiff=20.0);
          end TestEDPVR_fit_HFpEF3;

          model TestEDPVR_fit_scaled "With scaled ventricles"
            extends TestEDPVR_fit(ventricles(
                LV_wall(Vw=ventricles.settings.heart_vntr_xi_Vw*89*1.4, Amref=
                      ventricles.settings.heart_vntr_xi_AmRef*86*1.2),
                SEP_wall(Vw=ventricles.settings.heart_vntr_xi_Vw*34*1.4, Amref=
                      ventricles.settings.heart_vntr_xi_AmRef*39*1.2),
                RV_wall(Vw=ventricles.settings.heart_vntr_xi_Vw*27*1.4, Amref=
                      ventricles.settings.heart_vntr_xi_AmRef*110*1.2)));
          end TestEDPVR_fit_scaled;
        end Testers;

        partial model partialHeart
          extends Physiolibrary.Icons.Heart;

          parameter Boolean UseFrequencyInput=true    annotation(choices(checkBox=true));
          parameter Boolean UseThoracic_PressureInput=true   annotation(choices(checkBox=true));
          parameter Boolean UsePhiInput=true    annotation(choices(checkBox=true));
          parameter Physiolibrary.Types.Frequency HR=1   "Heart rate, when not specified externally" annotation(Dialog(enabled = not UseFrequencyInput));

          Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a sv
            annotation (Placement(transformation(extent={{-110,50},{-90,70}}),
                iconTransformation(extent={{-110,90},{-90,110}})));
          Physiolibrary.Types.RealIO.FrequencyInput frequency_input if UseFrequencyInput annotation (Placement(
                transformation(extent={{-126,-20},{-86,20}}), iconTransformation(extent={{-120,
                    -20},{-80,20}})));
          Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a pv
            annotation (Placement(transformation(extent={{90,-70},{110,-50}}),
                iconTransformation(extent={{90,-110},{110,-90}})));
          Physiolibrary.Types.RealIO.PressureInput thoracic_pressure_input
         if UseThoracic_PressureInput                                                                   annotation (Placement(
                transformation(extent={{-20,-20},{20,20}},
                rotation=90,
                origin={0,-100}),                             iconTransformation(extent={{-20,
                    -120},{20,-80}})));
          Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b pa
            annotation (Placement(transformation(extent={{90,50},{110,70}}),
                iconTransformation(extent={{-110,-110},{-90,-90}})));
          Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b sa
            annotation (Placement(transformation(extent={{-110,-70},{-90,-50}}),
                iconTransformation(extent={{90,90},{110,110}})));

          Physiolibrary.Types.Constants.FrequencyConst HR0(k(displayUnit="1/min")=
                 HR)
            if not UseFrequencyInput
            annotation (Placement(transformation(extent={{-96,-4},{-88,4}})));
          Physiolibrary.Types.Constants.PressureConst P0(k=0) if not
            UseThoracic_PressureInput
            annotation (Placement(transformation(extent={{4,-4},{-4,4}},
                rotation=270,
                origin={0,-86})));
          Physiolibrary.Types.RealIO.FractionInput phi if UsePhiInput
            annotation (Placement(transformation(extent={{-120,60},{-80,100}}),
                iconTransformation(extent={{-120,40},{-80,80}})));
          Physiolibrary.Types.Constants.FractionConst phi0(k=settings.phi0) if not UsePhiInput
            annotation (Placement(transformation(extent={{-90,76},{-82,84}})));

          outer Settings settings
            annotation (Placement(transformation(extent={{-80,80},{-60,100}})));

              Physiolibrary.Types.Frequency HR_true;
              Physiolibrary.Types.Volume V_LV;
              Physiolibrary.Types.Volume volume;
              Boolean beat;
        end partialHeart;

        model Heart_SimplestVS
          extends partialHeart;
          SimpleCirculation.ComplianceDriver complianceDriver(ep=1, alphaF=1)
            annotation (Placement(transformation(extent={{-32,-10},{-12,10}})));
          Physiolibrary.Hydraulic.Components.IdealValve idealValve(_Gon(displayUnit="ml/(mmHg.s)")=
                 7.5006157584566e-06)
            annotation (Placement(transformation(extent={{34,-36},{54,-16}})));
          Physiolibrary.Hydraulic.Components.Resistor R_TV(Resistance(displayUnit="(mmHg.s)/ml")=
                 1599868.64898) annotation (Placement(transformation(
                extent={{10,-10},{-10,10}},
                rotation=0,
                origin={48,44})));
          Physiolibrary.Hydraulic.Components.IdealValve idealValve1
            annotation (Placement(transformation(extent={{28,34},{8,54}})));
          Physiolibrary.Hydraulic.Components.ElasticVessel C_LV(
            volume_start=0.0001,
            useComplianceInput=true,
            useExternalPressureInput=true)
            annotation (Placement(transformation(extent={{20,10},{40,-10}})));
          Physiolibrary.Hydraulic.Components.ElasticVessel C_RV(
            volume_start=0.0001,
            useComplianceInput=true,
            useExternalPressureInput=true)
            annotation (Placement(transformation(extent={{-12,54},{8,74}})));
          Physiolibrary.Hydraulic.Components.IdealValve idealValve2
            annotation (Placement(transformation(extent={{-6,-36},{14,-16}})));
          Physiolibrary.Hydraulic.Components.IdealValve idealValve3(_Gon(displayUnit="ml/(mmHg.s)")=
                 7.5006157584566e-06)
            annotation (Placement(transformation(extent={{-12,34},{-32,54}})));
          Physiolibrary.Hydraulic.Components.Resistor R_PV(Resistance(displayUnit="(mmHg.s)/ml")=
                 1599868.64898) annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=0,
                origin={-26,-26})));
          SimpleCirculation.ComplianceDriver complianceDriver1(ep=0.3, alphaF=1)
            annotation (Placement(transformation(extent={{-40,58},{-20,78}})));
          SimpleCirculation.BeatDrive beatDrive
            annotation (Placement(transformation(extent={{-66,-2},{-46,18}})));
        equation
          connect(beatDrive.beatTime, complianceDriver.beatTime) annotation (Line(
                points={{-46,18},{-40,18},{-40,0},{-32,0}},     color={0,0,127}));
          connect(beatDrive.beatTime, complianceDriver1.beatTime) annotation (Line(
                points={{-46,18},{-46,68},{-40,68}},              color={0,0,127}));
          connect(R_TV.q_out,idealValve1. q_in) annotation (Line(
              points={{38,44},{28,44}},
              color={0,0,0},
              thickness=1));
          connect(idealValve.q_in,C_LV. q_in) annotation (Line(
              points={{34,-26},{30,-26},{30,-2.22045e-16}},
              color={0,0,0},
              thickness=1));
          connect(idealValve1.q_out,C_RV. q_in) annotation (Line(
              points={{8,44},{-2,44},{-2,64}},
              color={0,0,0},
              thickness=1));
          connect(idealValve.q_in,idealValve2. q_out) annotation (Line(
              points={{34,-26},{14,-26}},
              color={0,0,0},
              thickness=1));
          connect(idealValve1.q_out,idealValve3. q_in) annotation (Line(
              points={{8,44},{-12,44}},
              color={0,0,0},
              thickness=1));
          connect(complianceDriver.compliance,C_LV. compliance)
            annotation (Line(points={{-12,0},{-12,-8},{30,-8}},  color={0,0,127}));
          connect(complianceDriver1.compliance,C_RV. compliance) annotation (Line(
                points={{-20,68},{-6,68},{-6,72},{-2,72}},
                                                        color={0,0,127}));
          connect(idealValve2.q_in,R_PV. q_out) annotation (Line(
              points={{-6,-26},{-16,-26}},
              color={0,0,0},
              thickness=1));
          connect(frequency_input, beatDrive.HR) annotation (Line(points={{-106,
                  0},{-102,0},{-102,8},{-66,8}}, color={0,0,127}));
          connect(HR0.y, beatDrive.HR) annotation (Line(points={{-87,0},{-78,0},
                  {-78,8},{-66,8}}, color={0,0,127}));
          connect(sv, R_TV.q_in) annotation (Line(
              points={{-100,60},{-50,60},{-50,82},{64,82},{64,44},{58,44}},
              color={0,0,0},
              thickness=1));
          connect(idealValve3.q_out, pa) annotation (Line(
              points={{-32,44},{-54,44},{-54,24},{84,24},{84,60},{100,60}},
              color={0,0,0},
              thickness=1));
          connect(idealValve.q_out, sa) annotation (Line(
              points={{54,-26},{60,-26},{60,-48},{-100,-48},{-100,-60}},
              color={0,0,0},
              thickness=1));
          connect(R_PV.q_in, pv) annotation (Line(
              points={{-36,-26},{-56,-26},{-56,-60},{100,-60},{100,-60}},
              color={0,0,0},
              thickness=1));
          connect(C_RV.externalPressure, C_LV.externalPressure) annotation (
              Line(points={{6,72},{50,72},{50,-8},{38,-8}}, color={0,0,127}));
          connect(C_LV.externalPressure, P0.y) annotation (Line(points={{38,-8},
                  {50,-8},{50,-82},{2,-82},{2,-81},{8.88178e-16,-81}}, color={0,
                  0,127}));
          connect(C_LV.externalPressure, thoracic_pressure_input) annotation (
              Line(points={{38,-8},{50,-8},{50,-82},{0,-82},{0,-100}}, color={0,
                  0,127}));
          annotation (Diagram(coordinateSystem(extent={{-100,-100},{120,100}})), Icon(
                coordinateSystem(extent={{-100,-100},{120,100}})));
        end Heart_SimplestVS;

        model Heart_ADAN86
          "ADAN86 heart"
          extends Subsystems.Heart.partialHeart;

          replaceable ADAN_main.Components.Obsolete.Heart_ADAN_Heart Heart1(
            v_sup_venacava=systemic_veins.v,
            v_inf_venacava=0,
            u_sas=systemic_arteries.u,
            u_par=pulmonary_arteries.u,
            v_pvn=pulmonary_veins.v,
            t=t) annotation (Placement(transformation(extent={{-10,-10},{10,10}})));
          Real t;
          ADAN_main.Components.Interfaces.Pq_terminator_p systemic_veins(u=Heart1.u_ra)
            annotation (Placement(transformation(extent={{-60,20},{-80,40}})));
          ADAN_main.Components.Interfaces.Pq_terminator_v systemic_arteries(v=-Heart1.v_aov)
            annotation (Placement(transformation(extent={{60,20},{80,40}})));
          ADAN_main.Components.Interfaces.Pq_terminator_v pulmonary_arteries(v=-Heart1.v_puv)
            annotation (Placement(transformation(extent={{60,-40},{80,-20}})));
          ADAN_main.Components.Interfaces.Pq_terminator_p pulmonary_veins(u=Heart1.u_la)
            annotation (Placement(transformation(extent={{-60,-40},{-80,-20}})));

          Physiolibrary.Types.Frequency frequency;

        equation

          assert(not UsePhiInput, "This heart is not sensitive to phi");
          if not UseFrequencyInput then
            frequency = HR;
          end if;

          t = time;

          connect(systemic_arteries.port_a, sa) annotation (Line(
              points={{80,30},{90,30},{90,-60},{-100,-60}},
              color={0,0,0},
              thickness=1));
          connect(pulmonary_arteries.port_a, pa) annotation (Line(
              points={{80,-30},{90,-30},{90,60},{100,60}},
              color={0,0,0},
              thickness=1));
          connect(pulmonary_veins.port_a, pv) annotation (Line(
              points={{-80,-30},{-90,-30},{-90,-60},{100,-60}},
              color={0,0,0},
              thickness=1));
          connect(systemic_veins.port_a, sv) annotation (Line(
              points={{-80,30},{-90,30},{-90,60},{-100,60}},
              color={0,0,0},
              thickness=1));
          connect(Heart1.frequency, frequency_input)
            annotation (Line(points={{-10,0},{-106,0}}, color={0,0,127}));
          connect(Heart1.thoracic_pressure, thoracic_pressure_input)
            annotation (Line(points={{0,-10},{0,-10},{0,-100}},   color={0,0,127}));
          annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                  Text(
                  extent={{-100,60},{100,100}},
                  lineColor={0,0,0},
                  textString="ADAN_86")}),                               Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end Heart_ADAN86;

        model Heart_ADAN_VR
          "ADAN86 VenousReduced heart (Mynard-Smolich type)"
          extends Subsystems.Heart.partialHeart;
          Subsystems.Heart.Auxiliary.HeartInputs Heart1(
            v_sup_venacava=sv.q,
            v_inf_venacava=0,
            u_sas=sa.pressure,
            u_par=pa.pressure,
            v_pvn=pv.q,
            t=time,
            T=1/HR_.y,
            thoracic_pressure=TP.y)
            annotation (Placement(transformation(extent={{-10,-10},{10,10}})));

          Modelica.Blocks.Math.Gain TP(k=1) annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=90,
                origin={0,-50})));
          Modelica.Blocks.Math.Gain HR_(k=1) annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=0,
                origin={-50,0})));
        equation

          sv.pressure = Heart1.u_ra;
          sa.q = -Heart1.v_aov;
          pv.pressure = Heart1.u_la;
          pa.q = -Heart1.v_puv;

          connect(TP.u, P0.y) annotation (Line(points={{-8.88178e-16,-62},{0,
                  -62},{0,-81}},
                color={0,0,127}));
          connect(TP.u, thoracic_pressure_input) annotation (Line(points={{0,-62},
                  {0,-82},{0,-100},{0,-100}},
                                       color={0,0,127}));
          connect(HR0.y, HR_.u)
            annotation (Line(points={{-87,0},{-62,0}}, color={0,0,127}));
          connect(frequency_input, HR_.u)
            annotation (Line(points={{-106,0},{-62,0}}, color={0,0,127}));
          annotation (Icon(graphics={Text(
                  extent={{-100,60},{100,100}},
                  lineColor={0,0,0},
                  textString="ADAN_7af")}));
        end Heart_ADAN_VR;

        model Heart_Smith
          "Smith's variable elastance heart model"
          extends Subsystems.Heart.partialHeart;

          Basic.IdealValveResistanceWithMeasurements aorticValve(Pknee=0, _Ron(
                displayUnit="(mmHg.s)/ml") = 2399802.97347) annotation (
              Placement(transformation(extent={{-68,-30},{-88,-10}})));
          Physiolibrary.Hydraulic.Components.IdealValveResistance
                               tricuspidValve(Pknee=0, _Ron(displayUnit=
                  "(mmHg.s)/ml") = 3159740.5817355)
            annotation (Placement(transformation(extent={{-62,24},{-42,44}})));
          Physiolibrary.Hydraulic.Components.Inertia
                  Lav(I(displayUnit="mmHg.s2/ml") = 16250.665802014,
              volumeFlow_start(displayUnit="m3/s") = -1.4e-8) annotation (
              Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=180,
                origin={-44,-20})));
          Physiolibrary.Hydraulic.Components.Inertia
                  Lpv(I(displayUnit="mmHg.s2/ml") = 19822.372560862,
              volumeFlow_start(displayUnit="m3/s") = -1.9e-9)
            annotation (Placement(transformation(extent={{32,24},{52,44}})));
          Physiolibrary.Hydraulic.Components.IdealValveResistance
                               pulmonaryValve(Pknee=0, _Ron(displayUnit=
                  "(mmHg.s)/ml") = 733273.1307825)
            annotation (Placement(transformation(extent={{62,24},{82,44}})));
          Physiolibrary.Hydraulic.Components.IdealValveResistance
                               mitralValve(Pknee=0, _Ron(displayUnit="(mmHg.s)/ml")=
                 2106493.721157)
            annotation (Placement(transformation(extent={{52,-30},{32,-10}})));
          Physiolibrary.Hydraulic.Components.Inertia
                  Ltc(I(displayUnit="mmHg.s2/ml") = 10678.18997523,
              volumeFlow_start(displayUnit="m3/s") = 0.0001372)
            annotation (Placement(transformation(extent={{-88,24},{-68,44}})));
          Physiolibrary.Hydraulic.Components.Inertia
                  Lmt(I(displayUnit="mmHg.s2/ml") = 10261.557514558,
              volumeFlow_start(displayUnit="m3/s") = 0.0001141) annotation (
              Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=180,
                origin={70,-20})));
          Auxiliary.Smith_VentricularInteraction_flat smith_VentricularInteraction_flat(
              alphaE=settings.heart_alphaE, gammaE=settings.heart_gammaE)
            annotation (Placement(transformation(extent={{-14,-10},{16,28}})));

          // Modelica.Blocks.Interfaces.BooleanOutput
          //                       beat = tm >= pre(HP)
          //                          annotation (Placement(transformation(extent={{-28,-120},
          //           {12,-80}}),           iconTransformation(extent={{-60,-80},{-100,-40}})));
                     Physiolibrary.Types.Volume ESV_LV;
                     Physiolibrary.Types.Volume ESV_RV;
                     Physiolibrary.Types.Volume EDV_LV;
                     Physiolibrary.Types.Volume EDV_RV;
                     Physiolibrary.Types.Volume SV_LV;
                     Physiolibrary.Types.Volume SV_RV;
                     Boolean ac_rv(start=false) "antichatter for RV. When true, prevents calculation of ESV until the next beat";
                     Boolean ac_lv(start=false) "antichatter for LV. When true, prevents calculation of ESV until the next beat";
                     Physiolibrary.Types.VolumeFlowRate CO_LV = SV_LV/smith_VentricularInteraction_flat.HP;
                     Physiolibrary.Types.VolumeFlowRate CO_RV = SV_RV/smith_VentricularInteraction_flat.HP;
        equation

        //    when tricuspidValve.open then
        //      ESV_RV = smith_VentricularInteraction_flat.Vrv;
        //      SV_RV = EDV_RV - ESV_RV;
        //      ac_rv = false;
        //    end when;

           // double condition to avoid chatter
           when {tricuspidValve.open, (not pre(ac_rv) and pulmonaryValve.open)} then
              if pulmonaryValve.open then
               ESV_RV = pre(ESV_RV);
               SV_RV = pre(SV_RV);
               EDV_RV = smith_VentricularInteraction_flat.Vrv;
               ac_rv = true;
              else
               ESV_RV = smith_VentricularInteraction_flat.Vrv;
               SV_RV = EDV_RV - ESV_RV;
               EDV_RV = pre(EDV_RV);
               ac_rv = false;
              end if;
           end when;

           // double condition to avoid chatter
           when {mitralValve.open, (not pre(ac_lv) and aorticValve.open)} then
              if aorticValve.open then
               ESV_LV = pre(ESV_LV);
               SV_LV = pre(SV_LV);
               EDV_LV = smith_VentricularInteraction_flat.Vlv;
               ac_lv = true;
              else
               ESV_LV = smith_VentricularInteraction_flat.Vlv;
               SV_LV = EDV_LV - ESV_LV;
               EDV_LV = pre(EDV_LV);
               ac_lv = false;
              end if;
           end when;

          connect(Lav.q_out,aorticValve. q_in) annotation (Line(
              points={{-54,-20},{-68,-20}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(Ltc.q_out,tricuspidValve. q_in) annotation (Line(
              points={{-68,34},{-62,34}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(Lpv.q_out,pulmonaryValve. q_in) annotation (Line(
              points={{52,34},{62,34}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(mitralValve.q_in,Lmt. q_out) annotation (Line(
              points={{52,-20},{60,-20}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(mitralValve.q_out,Lav. q_in) annotation (Line(
              points={{32,-20},{-34,-20}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(sa, aorticValve.q_out) annotation (Line(
              points={{-100,-60},{-100,-60},{-96,-60},{-96,-20},{-88,-20}},
              color={0,0,0},
              thickness=1));
          connect(Lmt.q_in, pv) annotation (Line(
              points={{80,-20},{80,-82},{100,-82},{100,-60}},
              color={0,0,0},
              thickness=1));
          connect(sv, Ltc.q_in) annotation (Line(
              points={{-100,60},{-100,34},{-88,34}},
              color={0,0,0},
              thickness=1));
          connect(pulmonaryValve.q_out, pa) annotation (Line(
              points={{82,34},{92,34},{92,60},{100,60}},
              color={0,0,0},
              thickness=1));
          connect(tricuspidValve.q_out, smith_VentricularInteraction_flat.rvflow)
            annotation (Line(
              points={{-42,34},{-20,34},{-20,28},{0.7,28}},
              color={0,0,0},
              thickness=1));
          connect(Lpv.q_in, smith_VentricularInteraction_flat.rvflow) annotation (Line(
              points={{32,34},{16,34},{16,28},{0.7,28}},
              color={0,0,0},
              thickness=1));
          connect(Lav.q_in, smith_VentricularInteraction_flat.lvflow) annotation (Line(
              points={{-34,-20},{2,-20},{2,-10},{1,-10}},
              color={0,0,0},
              thickness=1));
          connect(mitralValve.q_out, smith_VentricularInteraction_flat.lvflow)
            annotation (Line(
              points={{32,-20},{2,-20},{2,-10},{1,-10}},
              color={0,0,0},
              thickness=1));
          connect(smith_VentricularInteraction_flat.HR, frequency_input) annotation (
              Line(points={{-11,9},{-55.5,9},{-55.5,0},{-106,0}}, color={0,0,127}));
          connect(smith_VentricularInteraction_flat.Pth, thoracic_pressure_input)
            annotation (Line(points={{13.3,9},{13.3,-44.5},{0,-44.5},{0,-100}},   color=
                 {0,0,127}));
          connect(phi, smith_VentricularInteraction_flat.phi) annotation (Line(points={{-100,80},
                  {-56,80},{-56,24.2},{-11,24.2}},          color={0,0,127}));
          connect(phi0.y, smith_VentricularInteraction_flat.phi) annotation (Line(
                points={{-81,80},{-20,80},{-20,24.2},{-11,24.2}}, color={0,0,127}));
          connect(smith_VentricularInteraction_flat.Pth, P0.y) annotation (Line(
                points={{13.3,9},{13.3,-44.5},{-8,-44.5},{-8,-74},{-4,-74},{-4,
                  -81},{9.4369e-16,-81}}, color={0,0,127}));
          connect(smith_VentricularInteraction_flat.HR, HR0.y) annotation (Line(
                points={{-11,9},{-55.5,9},{-55.5,0},{-87,0}}, color={0,0,127}));
          annotation (Diagram(graphics={  Rectangle(extent={{-84,54},{92,-46}},
                  lineColor={28,108,200})}), Icon(graphics={Text(
                  extent={{-100,60},{100,100}},
                  lineColor={0,0,0},
                  textString="Smith")}));
        end Heart_Smith;

        model Heart_SmithOlufsen
          "Smith's variable elastance model with Olufsen's driving function"
          extends Subsystems.Heart.partialHeart;

          Basic.IdealValveResistanceWithMeasurements aorticValve(Pknee=0, _Ron(
                displayUnit="(mmHg.s)/ml") = 2399802.97347) annotation (
              Placement(transformation(extent={{-68,-30},{-88,-10}})));
          Physiolibrary.Hydraulic.Components.IdealValveResistance
                               tricuspidValve(Pknee=0, _Ron(displayUnit=
                  "(mmHg.s)/ml") = 3159740.5817355)
            annotation (Placement(transformation(extent={{-62,24},{-42,44}})));
          Physiolibrary.Hydraulic.Components.Inertia
                  Lav(I(displayUnit="mmHg.s2/ml") = 16250.665802014,
              volumeFlow_start(displayUnit="m3/s") = -1.4e-8) annotation (
              Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=180,
                origin={-44,-20})));
          Physiolibrary.Hydraulic.Components.Inertia
                  Lpv(I(displayUnit="mmHg.s2/ml") = 19822.372560862,
              volumeFlow_start(displayUnit="m3/s") = -1.9e-9)
            annotation (Placement(transformation(extent={{32,24},{52,44}})));
          Physiolibrary.Hydraulic.Components.IdealValveResistance
                               pulmonaryValve(Pknee=0, _Ron(displayUnit=
                  "(mmHg.s)/ml") = 733273.1307825)
            annotation (Placement(transformation(extent={{62,24},{82,44}})));
          Physiolibrary.Hydraulic.Components.IdealValveResistance
                               mitralValve(Pknee=0, _Ron(displayUnit="(mmHg.s)/ml")=
                 2106493.721157)
            annotation (Placement(transformation(extent={{52,-30},{32,-10}})));
          Physiolibrary.Hydraulic.Components.Inertia
                  Ltc(I(displayUnit="mmHg.s2/ml") = 10678.18997523,
              volumeFlow_start(displayUnit="m3/s") = 0.0001372)
            annotation (Placement(transformation(extent={{-88,24},{-68,44}})));
          Physiolibrary.Hydraulic.Components.Inertia
                  Lmt(I(displayUnit="mmHg.s2/ml") = 10261.557514558,
              volumeFlow_start(displayUnit="m3/s") = 0.0001141) annotation (
              Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=180,
                origin={70,-20})));
          Auxiliary.SmithOlufsen_VentricularInteraction_flat_
            smithOttesen_VentricularInteraction_flat_(alphaE=settings.heart_alphaE,
              gammaE=settings.heart_gammaE)
            annotation (Placement(transformation(extent={{-14,-10},{16,28}})));

          // Modelica.Blocks.Interfaces.BooleanOutput
          //                       beat = tm >= pre(HP)
          //                          annotation (Placement(transformation(extent={{-28,-120},
          //           {12,-80}}),           iconTransformation(extent={{-60,-80},{-100,-40}})));
                     Physiolibrary.Types.Volume ESV_LV;
                     Physiolibrary.Types.Volume ESV_RV;
                     Physiolibrary.Types.Volume EDV_LV;
                     Physiolibrary.Types.Volume EDV_RV;
                     Physiolibrary.Types.Volume SV_LV;
                     Physiolibrary.Types.Volume SV_RV;
                     Boolean ac_rv(start=false) "antichatter for RV. When true, prevents calculation of ESV until the next beat";
                     Boolean ac_lv(start=false) "antichatter for LV. When true, prevents calculation of ESV until the next beat";
          Physiolibrary.Types.VolumeFlowRate CO_LV=SV_LV/
              smithOttesen_VentricularInteraction_flat_.HP;
          Physiolibrary.Types.VolumeFlowRate CO_RV=SV_RV/
              smithOttesen_VentricularInteraction_flat_.HP;
        equation

        //    when tricuspidValve.open then
        //      ESV_RV = smith_VentricularInteraction_flat.Vrv;
        //      SV_RV = EDV_RV - ESV_RV;
        //      ac_rv = false;
        //    end when;

           // double condition to avoid chatter
           when {tricuspidValve.open, (not pre(ac_rv) and pulmonaryValve.open)} then
              if pulmonaryValve.open then
               ESV_RV = pre(ESV_RV);
               SV_RV = pre(SV_RV);
               EDV_RV =smithOttesen_VentricularInteraction_flat_.Vrv;
               ac_rv = true;
              else
               ESV_RV =smithOttesen_VentricularInteraction_flat_.Vrv;
               SV_RV = EDV_RV - ESV_RV;
               EDV_RV = pre(EDV_RV);
               ac_rv = false;
              end if;
           end when;

           // double condition to avoid chatter
           when {mitralValve.open, (not pre(ac_lv) and aorticValve.open)} then
              if aorticValve.open then
               ESV_LV = pre(ESV_LV);
               SV_LV = pre(SV_LV);
               EDV_LV =smithOttesen_VentricularInteraction_flat_.Vlv;
               ac_lv = true;
              else
               ESV_LV =smithOttesen_VentricularInteraction_flat_.Vlv;
               SV_LV = EDV_LV - ESV_LV;
               EDV_LV = pre(EDV_LV);
               ac_lv = false;
              end if;
           end when;

          connect(Lav.q_out,aorticValve. q_in) annotation (Line(
              points={{-54,-20},{-68,-20}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(Ltc.q_out,tricuspidValve. q_in) annotation (Line(
              points={{-68,34},{-62,34}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(Lpv.q_out,pulmonaryValve. q_in) annotation (Line(
              points={{52,34},{62,34}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(mitralValve.q_in,Lmt. q_out) annotation (Line(
              points={{52,-20},{60,-20}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(mitralValve.q_out,Lav. q_in) annotation (Line(
              points={{32,-20},{-34,-20}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(sa, aorticValve.q_out) annotation (Line(
              points={{-100,-60},{-100,-60},{-96,-60},{-96,-20},{-88,-20}},
              color={0,0,0},
              thickness=1));
          connect(Lmt.q_in, pv) annotation (Line(
              points={{80,-20},{80,-82},{100,-82},{100,-60}},
              color={0,0,0},
              thickness=1));
          connect(sv, Ltc.q_in) annotation (Line(
              points={{-100,60},{-100,34},{-88,34}},
              color={0,0,0},
              thickness=1));
          connect(pulmonaryValve.q_out, pa) annotation (Line(
              points={{82,34},{92,34},{92,60},{100,60}},
              color={0,0,0},
              thickness=1));
          connect(tricuspidValve.q_out, smithOttesen_VentricularInteraction_flat_.rvflow)
            annotation (Line(
              points={{-42,34},{-20,34},{-20,28},{0.7,28}},
              color={0,0,0},
              thickness=1));
          connect(Lpv.q_in, smithOttesen_VentricularInteraction_flat_.rvflow)
            annotation (Line(
              points={{32,34},{16,34},{16,28},{0.7,28}},
              color={0,0,0},
              thickness=1));
          connect(Lav.q_in, smithOttesen_VentricularInteraction_flat_.lvflow)
            annotation (Line(
              points={{-34,-20},{2,-20},{2,-10},{1,-10}},
              color={0,0,0},
              thickness=1));
          connect(mitralValve.q_out, smithOttesen_VentricularInteraction_flat_.lvflow)
            annotation (Line(
              points={{32,-20},{2,-20},{2,-10},{1,-10}},
              color={0,0,0},
              thickness=1));
          connect(smithOttesen_VentricularInteraction_flat_.HR, frequency_input)
            annotation (Line(points={{-11,9},{-55.5,9},{-55.5,0},{-106,0}}, color=
                 {0,0,127}));
          connect(smithOttesen_VentricularInteraction_flat_.Pth,
            thoracic_pressure_input) annotation (Line(points={{13.3,9},{13.3,
                  -44.5},{0,-44.5},{0,-100}},
                                         color={0,0,127}));
          connect(phi, smithOttesen_VentricularInteraction_flat_.phi) annotation (
             Line(points={{-100,80},{-56,80},{-56,24.2},{-11,24.2}}, color={0,0,
                  127}));
          connect(phi0.y, smithOttesen_VentricularInteraction_flat_.phi)
            annotation (Line(points={{-81,80},{-20,80},{-20,24.2},{-11,24.2}},
                color={0,0,127}));
          connect(smithOttesen_VentricularInteraction_flat_.Pth, P0.y)
            annotation (Line(points={{13.3,9},{13.3,-44.5},{-8,-44.5},{-8,-74},
                  {-4,-74},{-4,-81},{9.4369e-16,-81}},
                                                   color={0,0,127}));
          connect(smithOttesen_VentricularInteraction_flat_.HR, HR0.y)
            annotation (Line(points={{-11,9},{-55.5,9},{-55.5,0},{-87,0}}, color=
                  {0,0,127}));
          annotation (Diagram(graphics={  Rectangle(extent={{-84,54},{92,-46}},
                  lineColor={28,108,200})}), Icon(graphics={Text(
                  extent={{-100,60},{100,100}},
                  lineColor={0,0,0},
                  textString="Smith-Olufsen")}));
        end Heart_SmithOlufsen;

        model Heart_SmithOlufsenMynard
          "Smith's variable elastance model with Olufsen's driving function and Mynard's dynamic valves"
          extends Subsystems.Heart.partialHeart;

          replaceable Basic.ValveMynard aorticValve(
            ARef_init(displayUnit="cm2") = 0.00049827,
            l(displayUnit="cm") = 0.0201,
            Ko=0.12,
            Kc=0.12) constrainedby Physiolibrary.Hydraulic.Interfaces.OnePort
            annotation (Placement(transformation(extent={{-68,-30},{-88,-10}})));
          replaceable Basic.ValveMynard tricuspidValve(
            ARef_init(displayUnit="cm2") = 0.00074785,
            l(displayUnit="cm") = 0.0246,
            Ko=0.3,
            Kc=0.4,
            rho(displayUnit="kg/dm3")) constrainedby
            Physiolibrary.Hydraulic.Interfaces.OnePort
            annotation (Placement(transformation(extent={{-62,24},{-42,44}})));
          Physiolibrary.Hydraulic.Components.Inertia
                  Lav(I(displayUnit="mmHg.s2/ml") = 16250.665802014,
              volumeFlow_start(displayUnit="m3/s") = -1.4e-8) annotation (
              Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=180,
                origin={-44,-20})));
          Physiolibrary.Hydraulic.Components.Inertia
                  Lpv(I(displayUnit="mmHg.s2/ml") = 19822.372560862,
              volumeFlow_start(displayUnit="m3/s") = -1.9e-9)
            annotation (Placement(transformation(extent={{32,24},{52,44}})));
          replaceable Basic.ValveMynard pulmonaryValve(
            ARef_init(displayUnit="cm2") = 0.00049857,
            l(displayUnit="cm") = 0.0201,
            Ko=0.2,
            Kc=0.2) constrainedby Physiolibrary.Hydraulic.Interfaces.OnePort
            annotation (Placement(transformation(extent={{62,24},{82,44}})));
          replaceable Basic.ValveMynard mitralValve(
            ARef_init=0.0007474,
            l(displayUnit="cm") = 0.0246,
            Ko=0.3,
            Kc=0.4) constrainedby Physiolibrary.Hydraulic.Interfaces.OnePort
            annotation (Placement(transformation(extent={{52,-30},{32,-10}})));
          Physiolibrary.Hydraulic.Components.Inertia
                  Ltc(I(displayUnit="mmHg.s2/ml") = 10678.18997523,
              volumeFlow_start(displayUnit="m3/s") = 0.0001372)
            annotation (Placement(transformation(extent={{-88,24},{-68,44}})));
          Physiolibrary.Hydraulic.Components.Inertia
                  Lmt(I(displayUnit="mmHg.s2/ml") = 10261.557514558,
              volumeFlow_start(displayUnit="m3/s") = 0.0001141) annotation (
              Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=180,
                origin={70,-20})));
          Auxiliary.SmithOlufsen_VentricularInteraction_flat_
            smithOttesen_VentricularInteraction_flat_(alphaE=settings.heart_alphaE,
              gammaE=settings.heart_gammaE)
            annotation (Placement(transformation(extent={{-14,-10},{16,28}})));

          // Modelica.Blocks.Interfaces.BooleanOutput
          //                       beat = tm >= pre(HP)
          //                          annotation (Placement(transformation(extent={{-28,-120},
          //           {12,-80}}),           iconTransformation(extent={{-60,-80},{-100,-40}})));
        //               Physiolibrary.Types.Volume ESV_LV;
        //               Physiolibrary.Types.Volume ESV_RV = 0;
        //               Physiolibrary.Types.Volume EDV_LV;
        //               Physiolibrary.Types.Volume EDV_RV = 0;
                       Physiolibrary.Types.Volume SV_LV;
        //               Physiolibrary.Types.Volume SV_RV = 0;
        //               Boolean ac_rv(start=false) "antichatter for RV. When true, prevents calculation of ESV until the next beat";
        //               Boolean ac_lv(start=false) "antichatter for LV. When true, prevents calculation of ESV until the next beat";
            Physiolibrary.Types.VolumeFlowRate CO_LV=SV_LV/
                smithOttesen_VentricularInteraction_flat_.HP "CO using SV x HR";
            Physiolibrary.Types.Volume CO_beat;
                Physiolibrary.Types.VolumeFlowRate CO_LV2 "CO using integration-reset";
        //    Physiolibrary.Types.VolumeFlowRate CO_RV=SV_RV/
        //        smithOttesen_VentricularInteraction_flat_.HP;
        //       Integer savedTheDay;
        //        Boolean ejectionPhase;
        //        Boolean fillingPhase;
          Physiolibrary.Types.Volume ESV_LV_m;
             Physiolibrary.Types.Volume ESV_LV;
          Physiolibrary.Types.Volume EDV_LV_m;
             Physiolibrary.Types.Volume EDV_LV;
             parameter Physiolibrary.Types.Time tau = 1e-3 "integration time for claculation ESV and EDV" annotation (HideResult= not settings.EvaluateFunctionalParams);
        equation
          der(CO_beat) =-sa.q;
           if settings.EvaluateFunctionalParams and smithOttesen_VentricularInteraction_flat_.Vlv > EDV_LV_m then
             der(EDV_LV_m)*tau = smithOttesen_VentricularInteraction_flat_.Vlv - EDV_LV_m;
           else
             der(EDV_LV_m) = 0;
           end if;

           if settings.EvaluateFunctionalParams and smithOttesen_VentricularInteraction_flat_.Vlv < ESV_LV_m then
             der(ESV_LV_m)*tau = smithOttesen_VentricularInteraction_flat_.Vlv - ESV_LV_m;
           else
             der(ESV_LV_m) = 0;
           end if;

          when smithOttesen_VentricularInteraction_flat_.systolicContraction then
             EDV_LV = EDV_LV_m;
             reinit(EDV_LV_m, 0);
            CO_LV2 = pre(CO_beat) / pre(smithOttesen_VentricularInteraction_flat_.tm);
             reinit(CO_beat, 0);
          end when;

          when smithOttesen_VentricularInteraction_flat_.systolicRelaxation then
            ESV_LV = ESV_LV_m;
            reinit(ESV_LV_m, 1e-3);
            SV_LV = EDV_LV - ESV_LV;
          end when;

        //
        //   when {aorticValve.open, mitralValve.open} then
        //
        //     if aorticValve.open and not mitralValve.open and not pre(ejectionPhase) then
        //       EDV_LV = smithOttesen_VentricularInteraction_flat_.Vlv;
        //     else
        //       // we are not here!
        //       EDV_LV = pre(EDV_LV);
        //     end if;
        //
        //     if mitralValve.open and not aorticValve.open and not pre(fillingPhase) then
        //       ESV_LV = smithOttesen_VentricularInteraction_flat_.Vlv;
        //     else
        //       // we are not here!
        //       ESV_LV = pre(ESV_LV);
        //     end if;
        //
        //     if aorticValve.open and not mitralValve.open then
        //       ejectionPhase = true;
        //     elseif mitralValve.open and not aorticValve.open then
        //       ejectionPhase = false;
        //     else
        //       ejectionPhase = pre(ejectionPhase);
        //     end if;
        //
        //     if mitralValve.open and not aorticValve.open then
        //       fillingPhase = true;
        //     elseif aorticValve.open and not mitralValve.open then
        //       fillingPhase = false;
        //     else
        //       fillingPhase = pre(fillingPhase);
        //     end if;
        //
        //     SV_LV = EDV_LV - ESV_LV;
        //   end when;

        //     when tricuspidValve.open then
        //       ESV_RV = smith_VentricularInteraction_flat.Vrv;
        //       SV_RV = EDV_RV - ESV_RV;
        //       ac_rv = false;
        //     end when;
        //
        //     // double condition to avoid chatter
        //     when {tricuspidValve.open, (not pre(ac_rv) and pulmonaryValve.open)} then
        //        if pulmonaryValve.open then
        //         ESV_RV = pre(ESV_RV);
        //         SV_RV = pre(SV_RV);
        //         EDV_RV =smithOttesen_VentricularInteraction_flat_.Vrv;
        //         ac_rv = true;
        //        else
        //         ESV_RV =smithOttesen_VentricularInteraction_flat_.Vrv;
        //         SV_RV = EDV_RV - ESV_RV;
        //         EDV_RV = pre(EDV_RV);
        //         ac_rv = false;
        //        end if;
        //     end when;
        //
        //     // double condition to avoid chatter
        //     when {mitralValve.open, (not pre(ac_lv) and aorticValve.open)} then
        //        if aorticValve.open then
        //         ESV_LV = pre(ESV_LV);
        //         SV_LV = pre(SV_LV);
        //         EDV_LV =smithOttesen_VentricularInteraction_flat_.Vlv;
        //         ac_lv = true;
        //        else
        //         ESV_LV =smithOttesen_VentricularInteraction_flat_.Vlv;
        //         SV_LV = EDV_LV - ESV_LV;
        //         EDV_LV = pre(EDV_LV);
        //         ac_lv = false;
        //        end if;
        //     end when;

          connect(Lav.q_out,aorticValve. q_in) annotation (Line(
              points={{-54,-20},{-68,-20}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(Ltc.q_out,tricuspidValve. q_in) annotation (Line(
              points={{-68,34},{-62,34}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(Lpv.q_out,pulmonaryValve. q_in) annotation (Line(
              points={{52,34},{62,34}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(mitralValve.q_in,Lmt. q_out) annotation (Line(
              points={{52,-20},{60,-20}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(mitralValve.q_out,Lav. q_in) annotation (Line(
              points={{32,-20},{-34,-20}},
              color={0,0,0},
              thickness=1,
              smooth=Smooth.None));
          connect(sa, aorticValve.q_out) annotation (Line(
              points={{-100,-60},{-100,-60},{-96,-60},{-96,-20},{-88,-20}},
              color={0,0,0},
              thickness=1));
          connect(Lmt.q_in, pv) annotation (Line(
              points={{80,-20},{80,-82},{100,-82},{100,-60}},
              color={0,0,0},
              thickness=1));
          connect(sv, Ltc.q_in) annotation (Line(
              points={{-100,60},{-100,34},{-88,34}},
              color={0,0,0},
              thickness=1));
          connect(pulmonaryValve.q_out, pa) annotation (Line(
              points={{82,34},{92,34},{92,60},{100,60}},
              color={0,0,0},
              thickness=1));
          connect(tricuspidValve.q_out, smithOttesen_VentricularInteraction_flat_.rvflow)
            annotation (Line(
              points={{-42,34},{-20,34},{-20,28},{0.7,28}},
              color={0,0,0},
              thickness=1));
          connect(Lpv.q_in, smithOttesen_VentricularInteraction_flat_.rvflow)
            annotation (Line(
              points={{32,34},{16,34},{16,28},{0.7,28}},
              color={0,0,0},
              thickness=1));
          connect(Lav.q_in, smithOttesen_VentricularInteraction_flat_.lvflow)
            annotation (Line(
              points={{-34,-20},{2,-20},{2,-10},{1,-10}},
              color={0,0,0},
              thickness=1));
          connect(mitralValve.q_out, smithOttesen_VentricularInteraction_flat_.lvflow)
            annotation (Line(
              points={{32,-20},{2,-20},{2,-10},{1,-10}},
              color={0,0,0},
              thickness=1));
          connect(smithOttesen_VentricularInteraction_flat_.HR, frequency_input)
            annotation (Line(points={{-11,9},{-55.5,9},{-55.5,0},{-106,0}}, color={0,0,127}));
          connect(smithOttesen_VentricularInteraction_flat_.Pth,
            thoracic_pressure_input) annotation (Line(points={{13.3,9},{13.3,
                  -44.5},{0,-44.5},{0,-100}},
                                     color={0,0,127}));
          connect(phi, smithOttesen_VentricularInteraction_flat_.phi) annotation (Line(
                points={{-100,80},{-56,80},{-56,24.2},{-11,24.2}}, color={0,0,127}));
          connect(phi0.y, smithOttesen_VentricularInteraction_flat_.phi) annotation (
              Line(points={{-81,80},{-20,80},{-20,24.2},{-11,24.2}}, color={0,0,127}));
          connect(smithOttesen_VentricularInteraction_flat_.Pth, P0.y) annotation (Line(
                points={{13.3,9},{13.3,-44.5},{-8,-44.5},{-8,-74},{-4,-74},{-4,
                  -81},{9.4369e-16,-81}},
                         color={0,0,127}));
          connect(smithOttesen_VentricularInteraction_flat_.HR, HR0.y) annotation (Line(
                points={{-11,9},{-55.5,9},{-55.5,0},{-87,0}}, color={0,0,127}));
          annotation (Diagram(graphics={  Rectangle(extent={{-84,54},{92,-46}},
                  lineColor={28,108,200})}), Icon(graphics={Text(
                  extent={{-100,0},{100,100}},
                  lineColor={0,0,0},
                  textString="Smith-Olufsen
+
Mynard")}));
        end Heart_SmithOlufsenMynard;

        model Heart_TriSeg
          "TriSeg Reimplementation from Jezek 2017 (10.1016/j.bbe.2017.08.001) following Kalecky's Thesis"
          extends partialHeart;
          import Physiolibrary.Types.*;

          inner Pressure pP=pPRef*(VP/VPRef)^kP "Pericardial pressure";
          inner Time cycleDuration = timing.cycleDuration;

        //   discrete input Volume VPRef(start = VPRef_init, fixed = true)
        //     "Adaptable reference pericardial volume";
        // DISABLING THE ADAPTATION
          Volume VPRef=VPRef_init;

          parameter Real kP = triSeg_environment.initialization.peri_k
            "Pericardial stiffness non-linearity coefficient";
          parameter Pressure pPRef = triSeg_environment.initialization.peri_pRef "Pericardiial reference pressure";
          parameter Volume VPRef_init = triSeg_environment.initialization.peri_VRef
            "Starting value of pericardial reference volume";

          Volume V=RA.V + LA.V + ventricles.VLV + ventricles.VRV
            "Current blood volume";
          Volume VP=RA.V + LA.V + ventricles.VLV + ventricles.VRV +
              ventricles.LW.VW + ventricles.SW.VW + ventricles.RW.VW + RA.VW
               + LA.VW "Current pericardial volume";

          Auxiliary.TriSeg_components.Ventricles ventricles(pP=pP) annotation (Placement(transformation(
                  extent={{-26,-70},{36,-8}})));
          Auxiliary.TriSeg_components.AtrialWall LA(
            AmRef_init=triSeg_environment.initialization.LA_AmRef,
            sigmaPRef_init=triSeg_environment.initialization.LA_sigmaPRef,
            Am0_init=triSeg_environment.initialization.LA_Am0,
            tauA=triSeg_environment.initialization.LA_tauA_Base + triSeg_environment.initialization.LA_tauA_CycleFraction
                *cycleDuration,
            tDelay=triSeg_environment.initialization.LA_tDelay_Base +
                triSeg_environment.initialization.LA_tDelay_CycleFraction*
                cycleDuration,
            VW_init=triSeg_environment.initialization.LA_VW,
            pP=0.5*pP,
            contractilityScale=triSeg_environment.constants.LA_contractilityScale)
            annotation (Placement(transformation(extent={{63,15},{21,53}})));
          Auxiliary.TriSeg_components.AtrialWall RA(
            AmRef_init=triSeg_environment.initialization.RA_AmRef,
            sigmaPRef_init=triSeg_environment.initialization.RA_sigmaPRef,
            Am0_init=triSeg_environment.initialization.RA_Am0,
            tauA=triSeg_environment.initialization.RA_tauA_Base + triSeg_environment.initialization.RA_tauA_CycleFraction
                *cycleDuration,
            tDelay=triSeg_environment.initialization.RA_tDelay_Base +
                triSeg_environment.initialization.RA_tDelay_CycleFraction*
                cycleDuration,
            VW_init=triSeg_environment.initialization.RA_VW,
            pP=pP,
            contractilityScale=triSeg_environment.constants.RA_contractilityScale)
            annotation (Placement(transformation(extent={{-54,0},{-8,46}})));
          Auxiliary.TriSeg_components.Valve vLAV(
            Ko=triSeg_environment.initialization.vLAV_Ko,
            Kc=triSeg_environment.initialization.vLAV_Kc,
            Mrg=triSeg_environment.initialization.vLAV_Mrg,
            Mst=triSeg_environment.initialization.vLAV_Mst,
            ARef_init=triSeg_environment.initialization.vLAV_ARef,
            l=triSeg_environment.initialization.vLAV_l,
            dpO=triSeg_environment.initialization.vLAV_dpO,
            dpC=triSeg_environment.initialization.vLAV_dpC) annotation (Placement(
                transformation(
                extent={{-9.5963,-8.85676},{9.5963,8.85676}},
                origin={49.3837,-26.9558},
                rotation=180)));
          Auxiliary.TriSeg_components.Valve vRAV(
            Ko=triSeg_environment.initialization.vRAV_Ko,
            Kc=triSeg_environment.initialization.vRAV_Kc,
            Mrg=triSeg_environment.initialization.vRAV_Mrg,
            Mst=triSeg_environment.initialization.vRAV_Mst,
            ARef_init=triSeg_environment.initialization.vRAV_ARef,
            l=triSeg_environment.initialization.vRAV_l,
            dpO=triSeg_environment.initialization.vRAV_dpO,
            dpC=triSeg_environment.initialization.vRAV_dpC) annotation (Placement(
                transformation(extent={{-11.8004,-11.2251},{11.8004,11.2251}}, origin={-40,
                    -20})));
          Auxiliary.TriSeg_components.Valve vSA(
            Ko=triSeg_environment.initialization.vSA_Ko,
            Kc=triSeg_environment.initialization.vSA_Kc,
            Mrg=triSeg_environment.initialization.vSA_Mrg,
            Mst=triSeg_environment.initialization.vSA_Mst,
            ARef_init=triSeg_environment.initialization.vSA_ARef,
            l=triSeg_environment.initialization.vSA_l,
            dpO=triSeg_environment.initialization.vSA_dpO,
            dpC=triSeg_environment.initialization.vSA_dpC) annotation (Placement(
                transformation(
                extent={{-10,-10},{10,10}},
                origin={16,-8},
                rotation=90)));
          Auxiliary.TriSeg_components.Valve vPA(
            Ko=triSeg_environment.initialization.vPA_Ko,
            Kc=triSeg_environment.initialization.vPA_Kc,
            Mrg=triSeg_environment.initialization.vPA_Mrg,
            Mst=triSeg_environment.initialization.vPA_Mst,
            ARef_init=triSeg_environment.initialization.vPA_ARef,
            l=triSeg_environment.initialization.vPA_l,
            dpO=triSeg_environment.initialization.vPA_dpO,
            dpC=triSeg_environment.initialization.vPA_dpC) annotation (Placement(
                transformation(
                extent={{-10,-10},{10,10}},
                origin={-4,-8},
                rotation=90)));
          Auxiliary.TriSeg_components.Valve vSV(
            Ko=triSeg_environment.initialization.vSV_Ko,
            Kc=triSeg_environment.initialization.vSV_Kc,
            Mrg=triSeg_environment.initialization.vSV_Mrg,
            Mst=triSeg_environment.initialization.vSV_Mst,
            ARef_init=triSeg_environment.initialization.vSV_ARef,
            l=triSeg_environment.initialization.vSV_l,
            dpO=triSeg_environment.initialization.vSV_dpO,
            dpC=triSeg_environment.initialization.vSV_dpC) annotation (Placement(
                transformation(
                extent={{-10,-10},{10,10}},
                origin={-52,58},
                rotation=270)));
          Auxiliary.TriSeg_components.Valve vPV(
            Ko=triSeg_environment.initialization.vPV_Ko,
            Kc=triSeg_environment.initialization.vPV_Kc,
            Mrg=triSeg_environment.initialization.vPV_Mrg,
            Mst=triSeg_environment.initialization.vPV_Mst,
            ARef_init=triSeg_environment.initialization.vPV_ARef,
            l=triSeg_environment.initialization.vPV_l,
            dpO=triSeg_environment.initialization.vPV_dpO,
            dpC=triSeg_environment.initialization.vPV_dpC) annotation (Placement(
                transformation(
                extent={{-8.92955,-9.0692},{8.92955,9.0692}},
                origin={62,60},
                rotation=270)));

          inner Auxiliary.TriSeg_components.Environment.ComplexEnvironment
            triSeg_environment
            annotation (Placement(transformation(extent={{-44,78},{-24,98}})));
          Auxiliary.TriSeg_components.Timing timing
            annotation (Placement(transformation(extent={{-60,-60},{-40,-40}})));
        equation
          connect(sv, vSV.q_in) annotation (Line(
              points={{-100,60},{-52,60},{-52,68}},
              color={0,0,0},
              thickness=1));
          connect(vRAV.q_out, ventricles.cRV) annotation (Line(
              points={{-28.1996,-20},{-18,-20},{-18,-26.6},{-4.92,-26.6}},
              color={0,0,0},
              thickness=1));
          connect(ventricles.cLV, vLAV.q_out) annotation (Line(
              points={{16.16,-25.98},{21.4,-25.98},{21.4,-26.9558},{39.7874,-26.9558}},
              color={0,0,0},
              thickness=1));

          connect(vSA.q_in, ventricles.cLV) annotation (Line(
              points={{16,-18},{16,-22},{16.16,-22},{16.16,-25.98}},
              color={0,0,0},
              thickness=1));
          connect(vSA.q_out, sa) annotation (Line(
              points={{16,2},{16,-60},{-100,-60}},
              color={0,0,0},
              thickness=1));
          connect(vSV.q_out, RA.c) annotation (Line(
              points={{-52,48},{-52,39.1},{-42.5,39.1}},
              color={0,0,0},
              thickness=1));
          connect(vRAV.q_in, RA.c) annotation (Line(
              points={{-51.8004,-20},{-52,-20},{-52,39.1},{-42.5,39.1}},
              color={0,0,0},
              thickness=1));
          connect(vPA.q_in, ventricles.cRV) annotation (Line(
              points={{-4,-18},{-4,-26.6},{-4.92,-26.6}},
              color={0,0,0},
              thickness=1));
          connect(vPA.q_out, pa) annotation (Line(
              points={{-4,2},{-4,6},{100,6},{100,60}},
              color={0,0,0},
              thickness=1));
          connect(vPV.q_in, pv) annotation (Line(
              points={{62,68.9296},{62,72},{100,72},{100,-60}},
              color={0,0,0},
              thickness=1));
          connect(LA.c, vLAV.q_in) annotation (Line(
              points={{52.5,47.3},{62,47.3},{62,-26.9558},{58.98,-26.9558}},
              color={0,0,0},
              thickness=1));
          connect(vPV.q_out, vLAV.q_in) annotation (Line(
              points={{62,51.0705},{62,-26.9558},{58.98,-26.9558}},
              color={0,0,0},
              thickness=1));
          connect(HR0.y, timing.heart_rate) annotation (Line(
              points={{-87,0},{-66,0},{-66,-50},{-60,-50}},
              color={0,0,127},
              pattern=LinePattern.Dash));
          connect(frequency_input, timing.heart_rate) annotation (Line(
              points={{-106,0},{-90,0},{-90,-50},{-60,-50}},
              color={0,0,127},
              pattern=LinePattern.Dash));
          annotation (Icon(graphics={                       Text(
                  extent={{-100,20},{100,100}},
                  lineColor={0,0,0},
                  textString="TriSeg
Kalecky")}), experiment(
              StopTime=30,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end Heart_TriSeg;

        model Heart_TriSegMechanics
          "TriSeg with crossbridge calcium mechanics"
          extends partialHeart;
          parameter String class_name = "Ca mech";
          replaceable
          Physiolibrary.Hydraulic.Components.IdealValveResistance
                               tricuspidValve(
            _Goff(displayUnit="ml/(mmHg.min)"),
            Pknee=0,
            useChatteringProtection=false,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=settings.heart_R_vlv)
                        constrainedby
            Physiolibrary.Hydraulic.Components.IdealValveResistance(
            useChatteringProtection=true,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=R_vlv)
            annotation (Placement(transformation(extent={{-6,50},{14,70}})));
          replaceable
          Physiolibrary.Hydraulic.Components.IdealValveResistance
                               pulmonaryValve(
            _Goff(displayUnit="ml/(mmHg.min)"),
            Pknee=0,
            useChatteringProtection=false,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=settings.heart_R_vlv)
                        constrainedby
            Physiolibrary.Hydraulic.Components.IdealValveResistance(
            useChatteringProtection=true,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=R_vlv)
            annotation (Placement(transformation(extent={{50,50},{70,70}})));
          replaceable
          Basic.IdealValveResistanceWithMeasurements
                               mitralValve(
            _Goff(displayUnit="ml/(mmHg.min)"),
            Pknee=0,
            useChatteringProtection=false,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=settings.heart_R_vlv,
            useCycleInput=true) constrainedby
            Physiolibrary.Hydraulic.Components.IdealValveResistance(
            useChatteringProtection=true,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=R_vlv)
            annotation (Placement(transformation(extent={{50,-70},{30,-50}})));
          replaceable Basic.IdealValveResistanceWithMeasurements aorticValve(
            _Goff(displayUnit="ml/(mmHg.min)"),
            Pknee=0,
            useCycleInput=true,
            useChatteringProtection=false,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=settings.heart_R_vlv)
                        constrainedby
            Physiolibrary.Hydraulic.Components.IdealValveResistance(
            useChatteringProtection=true,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=R_vlv) annotation (Placement(transformation(extent={{0,-70},{-20,-50}})));

          replaceable
          Physiolibrary.Hydraulic.Components.Resistor r_SystemicVenousInflow(Resistance=
               settings.heart_R_RA) constrainedby
            Physiolibrary.Hydraulic.Interfaces.OnePort
            "Resistance of the inflow to the atria"
            annotation (Placement(transformation(extent={{-88,50},{-68,70}})));
          replaceable
          Physiolibrary.Hydraulic.Components.Resistor r_PulmonaryVenousInflow(
              Resistance=settings.heart_R_LA) constrainedby
            Physiolibrary.Hydraulic.Interfaces.OnePort
            "Resistance of the inflow to the atria"
            annotation (Placement(transformation(extent={{90,-70},{70,-50}})));
          replaceable Auxiliary.TriSegMechanics_components.Ventricles_Calcium
            ventricles(V_LV(start=0.00015), V_RV(start=0.00015)) constrainedby
            Auxiliary.TriSegMechanics_components.partialVentricles_TS
            annotation (Placement(transformation(extent={{0,-20},{20,0}})));
          replaceable
          Auxiliary.AtriumSimple ra(enabled=true) constrainedby
            Auxiliary.partialAtrium
            annotation (Placement(transformation(extent={{-10,26},{-30,6}})),
              choicesAllMatching=true);
          replaceable
          Auxiliary.AtriumSimple la(enabled=true) constrainedby
            Auxiliary.partialAtrium
            annotation (Placement(transformation(extent={{70,-38},{50,-18}})),
              choicesAllMatching=true);

          Basic.IdealValve_deactivable idealValve_deactivable annotation (
              Placement(transformation(
                extent={{-4,4},{4,-4}},
                rotation=270,
                origin={22,4})));
          Basic.IdealValve_deactivable idealValve_deactivable1 annotation (
              Placement(transformation(
                extent={{-4,-4},{4,4}},
                rotation=90,
                origin={24,-22})));
          Physiolibrary.Hydraulic.Components.Resistor resistor(Resistance(
                displayUnit="(dyn.s)/cm5") = settings.heart_R_A_vis)
            annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=270,
                origin={-20,46})));
          Physiolibrary.Hydraulic.Components.Resistor resistor1(Resistance(
                displayUnit="(dyn.s)/cm5") = settings.heart_R_A_vis)
            annotation (Placement(transformation(
                extent={{-8,-8},{8,8}},
                rotation=270,
                origin={60,-48})));
          Auxiliary.SA_node sa_node annotation (Placement(transformation(
                  rotation=0, extent={{-88,22},{-68,42}})));
          Auxiliary.PericardiumPressure pericardium(
            heartVolume=volume,
            enabled=true,
            V0=0.0008,
            s=10)
            annotation (Placement(transformation(extent={{40,-100},{20,-80}})));
          Modelica.Blocks.Math.Add add annotation (Placement(transformation(
                extent={{-5,-5},{5,5}},
                rotation=90,
                origin={10,-70})));

        equation
          volume =ra.volume + la.volume + ventricles.V_LV + ventricles.V_RV;

              HR_true = sa_node.HR_true;
              V_LV = ventricles.V_LV;
              beat = sa_node.beat;
          connect(pulmonaryValve.q_out, pa) annotation (Line(
              points={{70,60},{100,60}},
              color={0,0,0},
              thickness=1));
          connect(aorticValve.q_out, sa) annotation (Line(
              points={{-20,-60},{-100,-60}},
              color={0,0,0},
              thickness=1));
          connect(tricuspidValve.q_in, r_SystemicVenousInflow.q_out) annotation (Line(
              points={{-6,60},{-68,60}},
              color={0,0,0},
              thickness=1));
          connect(r_SystemicVenousInflow.q_in, sv) annotation (Line(
              points={{-88,60},{-100,60}},
              color={0,0,0},
              thickness=1));
          connect(mitralValve.q_in, r_PulmonaryVenousInflow.q_out) annotation (Line(
              points={{50,-60},{70,-60}},
              color={0,0,0},
              thickness=1));
          connect(r_PulmonaryVenousInflow.q_in, pv) annotation (Line(
              points={{90,-60},{100,-60}},
              color={0,0,0},
              thickness=1));
          connect(tricuspidValve.q_out, pulmonaryValve.q_in) annotation (Line(
              points={{14,60},{50,60}},
              color={0,0,0},
              thickness=1));
          connect(mitralValve.q_out, aorticValve.q_in) annotation (Line(
              points={{30,-60},{0,-60}},
              color={0,0,0},
              thickness=1));
          connect(ventricles.port_rv, idealValve_deactivable.q_out) annotation (
             Line(
              points={{18,-6},{22,-6},{22,0}},
              color={0,0,0},
              thickness=1));
          connect(idealValve_deactivable.q_in, pulmonaryValve.q_in) annotation (
             Line(
              points={{22,8},{22,60},{50,60}},
              color={0,0,0},
              thickness=1));
          connect(ventricles.port_lv, idealValve_deactivable1.q_out)
            annotation (Line(
              points={{18,-16},{24,-16},{24,-18}},
              color={0,0,0},
              thickness=1));
          connect(idealValve_deactivable1.q_in, aorticValve.q_in) annotation (
              Line(
              points={{24,-26},{24,-60},{0,-60}},
              color={0,0,0},
              thickness=1));
          connect(ventricles.volumeLimiterRV, idealValve_deactivable.ActivateLimiter)
            annotation (Line(points={{14,0},{14,4},{22,4}}, color={255,0,255}));
          connect(ventricles.volumeLimiterLV, idealValve_deactivable1.ActivateLimiter)
            annotation (Line(points={{14,-20},{14,-22},{24,-22}},
                                                               color={255,0,255}));
          connect(ventricles.phi_input, phi0.y) annotation (Line(points={{10,0},{
                  10,80},{-81,80}}, color={0,0,127}));
          connect(ventricles.phi_input, phi) annotation (Line(points={{10,0},{
                  10,80},{-100,80}},
                                  color={0,0,127}));
          connect(frequency_input,sa_node.frequency)           annotation (Line(points={{-106,0},
                  {-96,0},{-96,32},{-88,32}},          color={0,0,127}));
          connect(HR0.y,sa_node.frequency)           annotation (Line(points={{-87,0},
                  {-96,0},{-96,32},{-88,32}},
                                         color={0,0,127}));
          connect(sa_node.phiInput,          phi) annotation (Line(points={{-88,38},{-96,
                  38},{-96,80},{-100,80}},          color={0,0,127}));
          connect(sa_node.phiInput,          phi0.y) annotation (Line(points={{-88,38},{
                  -96,38},{-96,80},{-81,80}},          color={0,0,127}));
          connect(ra.port_a, resistor.q_out) annotation (Line(
              points={{-20,24},{-20,36}},
              color={0,0,0},
              thickness=1));
          connect(resistor.q_in, r_SystemicVenousInflow.q_out) annotation (Line(
              points={{-20,56},{-20,60},{-68,60}},
              color={0,0,0},
              thickness=1));
          connect(la.port_a, resistor1.q_in) annotation (Line(
              points={{60,-36},{60,-40}},
              color={0,0,0},
              thickness=1));
          connect(resistor1.q_out, r_PulmonaryVenousInflow.q_out) annotation (
              Line(
              points={{60,-56},{60,-60},{70,-60}},
              color={0,0,0},
              thickness=1));
          connect(sa_node.cardiac_cycle, ventricles.cardiac_cycle) annotation (Line(
              points={{-68,32},{-66,32},{-66,-20},{0,-20}},
              color={244,125,35},
              thickness=0.5));
          connect(ventricles.thoracic_pressure_input, la.thoracic_pressure_input)
            annotation (Line(
              points={{10,-20},{10,-28},{50,-28}},
              color={162,29,33},
              thickness=0.5));
          connect(ventricles.thoracic_pressure_input, ra.thoracic_pressure_input)
            annotation (Line(
              points={{10,-20},{10,-28},{-40,-28},{-40,16},{-30,16}},
              color={162,29,33},
              thickness=0.5));
          connect(ventricles.frequency, sa_node.frequency) annotation (Line(points={{0,-14},
                  {-96,-14},{-96,32},{-88,32}},      color={0,0,127}));
          connect(mitralValve.cardiac_cycle, aorticValve.cardiac_cycle) annotation (
              Line(
              points={{40,-50},{-10,-50}},
              color={244,125,35},
              thickness=0.5));
          connect(aorticValve.cardiac_cycle, ventricles.cardiac_cycle) annotation (Line(
              points={{-10,-50},{-66,-50},{-66,-20},{0,-20}},
              color={244,125,35},
              thickness=0.5));
          connect(P0.y, add.u1) annotation (Line(points={{0,-81},{7,-81},{7,-76}},
                color={0,0,127}));
          connect(thoracic_pressure_input, add.u1) annotation (Line(points={{0,
                  -100},{7,-100},{7,-76}}, color={0,0,127}));
          connect(add.u2, pericardium.p_out) annotation (Line(points={{13,-76},
                  {13,-90},{20,-90}}, color={0,0,127}));
          connect(add.y, ventricles.thoracic_pressure_input)
            annotation (Line(points={{10,-64.5},{10,-20}}, color={162,29,33},
              thickness=0.5));
          annotation (Icon(graphics={Text(
                  extent={{-100,20},{100,100}},
                  lineColor={0,0,0},
                  textString="TriSeg
%class_name")}));
        end Heart_TriSegMechanics;

        model Heart_TriSegMechanics_Lumens
          "TriSeg with original Lumen's calcium mechanics heuristic approximation"
          extends Heart_TriSegMechanics(
            r_PulmonaryVenousInflow(Resistance=settings.heart_R_LA),
            r_SystemicVenousInflow(Resistance=settings.heart_R_RA),
            redeclare Auxiliary.TriSegMechanics_components.Ventricles_Lumens
              ventricles,
            class_name="Lumens orig",
            tricuspidValve(_Ron=settings.heart_R_vlv),
            pulmonaryValve(_Ron=settings.heart_R_vlv),
            mitralValve(_Ron=settings.heart_R_vlv),
            aorticValve(_Ron=settings.heart_R_vlv));
          Auxiliary.TriSegMechanics_components.Driving_Olufsen calciumMechanics(
            usePhiInput=false,
            TS=settings.heart_atr_TS,
            TS_maxAct=settings.heart_atr_TS,
            TR=settings.heart_atr_TR,
            TR_maxAct=settings.heart_atr_TR,
            phi0=settings.phi0,
            D_A=settings.heart_atr_D_A,
            D_A_maxAct=settings.heart_atr_D_A,
            D_0=settings.heart_vntr_D_0,
            D_0_maxAct=settings.heart_vntr_D_0_maxAct)
            annotation (Placement(transformation(extent={{-54,22},{-34,42}})));
        equation
          connect(sa_node.t0,calciumMechanics. t0)
            annotation (Line(points={{-68,40},{-62,40},{-62,32},{-54,32}},
                                                         color={0,0,127}));
          connect(ventricles.t0,calciumMechanics. t0) annotation (Line(points={{0,-8},{
                  -60,-8},{-60,32},{-54,32}}, color={0,0,127}));
          connect(calciumMechanics.D, ra.D) annotation (Line(points={{-33,32},{
                  0,32},{0,16},{-9.6,16}},    color={0,140,72},
              thickness=0.5));
          connect(calciumMechanics.D, la.D) annotation (Line(points={{-33,32},{
                  78,32},{78,-28},{70.4,-28}}, color={0,140,72},
              thickness=0.5));
        end Heart_TriSegMechanics_Lumens;

        model Heart_TriSegMechanics_Simple
          "TriSeg with simplified Ca driving function"
          extends Heart_TriSegMechanics(
            class_name="Lumens Simple",
            redeclare replaceable
              Auxiliary.TriSegMechanics_components.Ventricles_LumensSimple ventricles
              constrainedby
              Auxiliary.TriSegMechanics_components.partialVentricles_TS);

          Auxiliary.TriSegMechanics_components.Driving_Olufsen calciumMechanics(
            usePhiInput=false,
            TS=settings.heart_atr_TS,
            TS_maxAct=settings.heart_atr_TS,
            TR=settings.heart_atr_TR,
            TR_maxAct=settings.heart_atr_TR,
            phi0=settings.phi0,
            D_A=settings.heart_atr_D_A,
            D_A_maxAct=settings.heart_atr_D_A,
            D_0=settings.heart_atr_D_0,
            D_0_maxAct=settings.heart_atr_D_0)
            annotation (Placement(transformation(extent={{-54,22},{-34,42}})));
        equation
          connect(sa_node.t0,calciumMechanics. t0)
            annotation (Line(points={{-68,40},{-62,40},{-62,32},{-54,32}},
                                                         color={0,0,127}));
          connect(ventricles.t0,calciumMechanics. t0) annotation (Line(points={{0,-8},{
                  -60,-8},{-60,32},{-54,32}}, color={0,0,127}));
          connect(calciumMechanics.D, ra.D) annotation (Line(points={{-33,32},{
                  0,32},{0,16},{-9.6,16}},    color={0,140,72},
              thickness=0.5));
          connect(calciumMechanics.D, la.D) annotation (Line(points={{-33,32},{
                  78,32},{78,-28},{70.4,-28}}, color={0,140,72},
              thickness=0.5));
        end Heart_TriSegMechanics_Simple;

        model Heart_TriSegMechanics_Rat
          "Rat parametrization of Lumens heart model"
          extends Heart_TriSegMechanics(
            _R_vlv=0.05,
            _R_RA=0.25,
            _R_LA=0.25,
            class_name="Ca RAT",
            HR=5.7458333333333,
            ra(
              enabled=false,
              Tact(displayUnit="s"),
              volume(start=1e-09)),
            la(
              enabled=false,
              Tact(displayUnit="s"),
              volume(start=1e-09)),
            redeclare Auxiliary.TriSegMechanics_components.Ventricles_Calcium
              ventricles(
              calciumMechanics(a=0.3099, Ca0=0.161),
              redeclare
                Auxiliary.TriSegMechanics_components.VentricleWall_Calcium_Rat
                LV_wall(Vw=0.74183*1.05, Amref=2.077),
              redeclare
                Auxiliary.TriSegMechanics_components.VentricleWall_Calcium_Rat
                RV_wall(Vw=0.3358125*1.05, Amref=3.3),
              redeclare
                Auxiliary.TriSegMechanics_components.VentricleWall_Calcium_Rat
                SEP_wall(Vw=0.37091*1.05, Amref=0.590*2.077),
              V_min=5e-09,
              V_LV(start=4.16e-07),
              V_RV(start=4.16e-07),
              xm_LV(start=-0.60),
              xm_SEP(start=0.40),
              xm_RV(start=1.0),
              ym(start=0.50)),
            tricuspidValve(_Ron(displayUnit="(Pa.s)/m3") = 1),
            mitralValve(_Ron(displayUnit="(Pa.s)/m3") = 1),
            idealValve_deactivable1(_Gon(displayUnit="ml/(mmHg.min)"), _Goff(
                  displayUnit="m3/(Pa.s)")));

        // R_vlv  = 0.05; %  valve resistance, mmHg*sec/mL
        // R_AV   = R_vlv + R_TAC; % resistance across aortic valve

        end Heart_TriSegMechanics_Rat;

        model Heart_TriSegMechanics_Simple_AtrialValves "Triseg simple variant with atrial valves"
          extends Heart_TriSegMechanics_Simple(redeclare
              Physiolibrary.Hydraulic.Components.IdealValveResistance
              r_SystemicVenousInflow(_Goff=1/(settings.heart_R_RA*atrial_res_frac), _Ron=
                  settings.heart_R_RA/atrial_res_frac),
                                           redeclare
              Physiolibrary.Hydraulic.Components.IdealValveResistance
              r_PulmonaryVenousInflow(_Goff=1/(settings.heart_R_LA*atrial_res_frac), _Ron=
                  settings.heart_R_LA/atrial_res_frac));

          parameter Physiolibrary.Types.Fraction atrial_res_frac = 1 "Increase in atrial inflow resistance at backflow";
        end Heart_TriSegMechanics_Simple_AtrialValves;

        model Heart_TriSegMechanics_Simple_AtrialInertia "TriSeg simple variant with atrial inertance"
          extends Heart_TriSegMechanics_Simple(redeclare Basic.ResistanceWithInertance
              r_SystemicVenousInflow(resistance=settings.heart_R_RA, inertance(
                  displayUnit="mmHg.s2/ml") = settings.heart_I_A),
                                                               redeclare
              Basic.ResistanceWithInertance r_PulmonaryVenousInflow(resistance=settings.heart_R_LA,
                inertance(displayUnit="mmHg.s2/ml") = settings.heart_I_A));
        end Heart_TriSegMechanics_Simple_AtrialInertia;

        model Heart_TriSegMechanicsSimple
          "TriSeg with simplified driving, minimal inheritance"
          extends partialHeart;
          parameter String class_name="Lumens Simple";
          replaceable Physiolibrary.Hydraulic.Components.IdealValveResistance
            tricuspidValve(
            _Goff(displayUnit="ml/(mmHg.min)"),
            Pknee=0,
            useChatteringProtection=false,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=settings.heart_R_vlv) constrainedby
            Physiolibrary.Hydraulic.Components.IdealValveResistance(
            useChatteringProtection=true,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=R_vlv)
            annotation (Placement(transformation(extent={{-6,50},{14,70}})));
          replaceable Basic.IdealValveResistanceWithMeasurements
            pulmonaryValve(
            _Goff(displayUnit="ml/(mmHg.min)"),
            Pknee=0,
            useChatteringProtection=false,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=settings.heart_R_vlv,
            useCycleInput=true)        constrainedby
            Physiolibrary.Hydraulic.Components.IdealValveResistance(
            useChatteringProtection=true,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=R_vlv)
            annotation (Placement(transformation(extent={{50,50},{70,70}})));
          replaceable Basic.IdealValveResistanceWithMeasurements mitralValve(
            _Goff(displayUnit="ml/(mmHg.min)"),
            Pknee=0,
            useChatteringProtection=false,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=settings.heart_R_vlv,
            useCycleInput=true) constrainedby
            Physiolibrary.Hydraulic.Components.IdealValveResistance(
            useChatteringProtection=true,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=R_vlv)
            annotation (Placement(transformation(extent={{50,-70},{30,-50}})));
          replaceable Basic.IdealValveResistanceWithMeasurements aorticValve(
            _Goff(displayUnit="ml/(mmHg.min)"),
            Pknee=0,
            _Ron=settings.heart_R_vlv,
            useCycleInput=true,
            useChatteringProtection=false,
            chatteringProtectionTime(displayUnit="ms") = 0.01)
                                       constrainedby
            Physiolibrary.Hydraulic.Components.IdealValveResistance(
            useChatteringProtection=true,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=R_vlv)
            annotation (Placement(transformation(extent={{-18,-70},{-38,-50}})));
          replaceable Physiolibrary.Hydraulic.Components.Resistor
            r_SystemicVenousInflow(Resistance=settings.heart_R_RA)
            constrainedby Physiolibrary.Hydraulic.Interfaces.OnePort
            "Resistance of the inflow to the atria"
            annotation (Placement(transformation(extent={{-88,50},{-68,70}})));
          replaceable Physiolibrary.Hydraulic.Components.Resistor
            r_PulmonaryVenousInflow(Resistance=settings.heart_R_LA)
            constrainedby Physiolibrary.Hydraulic.Interfaces.OnePort
            "Resistance of the inflow to the atria"
            annotation (Placement(transformation(extent={{90,-70},{70,-50}})));
          replaceable
            Auxiliary.TriSegMechanics_components.Ventricles_LumensSimpleEDPVR
            ventricles(V_LV(start=0.00015), V_RV(start=0.00015)) constrainedby
            Auxiliary.TriSegMechanics_components.partialVentricles_TS
            annotation (Placement(transformation(extent={{0,-20},{20,0}})));
          Auxiliary.AtriumSimple ra(enabled=true)
            annotation (Placement(transformation(extent={{-10,26},{-30,6}})));
          Auxiliary.AtriumSimple la(enabled=true)
            annotation (Placement(transformation(extent={{70,-38},{50,-18}})));
          Physiolibrary.Types.Volume volume;
          Basic.IdealValve_deactivable idealValve_deactivable annotation (
              Placement(transformation(
                extent={{-4,4},{4,-4}},
                rotation=270,
                origin={22,4})));
          Basic.IdealValve_deactivable idealValve_deactivable1 annotation (
              Placement(transformation(
                extent={{-4,-4},{4,4}},
                rotation=90,
                origin={24,-22})));
          replaceable
          Physiolibrary.Hydraulic.Components.Resistor resistor(Resistance(
                displayUnit="(dyn.s)/cm5") = settings.heart_R_A_vis)
            constrainedby Physiolibrary.Hydraulic.Interfaces.OnePort
            annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=270,
                origin={-20,46})), choicesAllMatching=true);
          replaceable
          Physiolibrary.Hydraulic.Components.Resistor resistor1(Resistance(
                displayUnit="(dyn.s)/cm5") = settings.heart_R_A_vis)
            constrainedby Physiolibrary.Hydraulic.Interfaces.OnePort
            annotation (Placement(transformation(
                extent={{-8,-8},{8,8}},
                rotation=270,
                origin={60,-48})), choicesAllMatching=true);
          Auxiliary.SA_node sa_node annotation (Placement(transformation(
                  rotation=0, extent={{-88,14},{-68,34}})));
          Auxiliary.TriSegMechanics_components.Driving_Olufsen calciumMechanics(
            usePhiInput=true,
            TS=settings.heart_atr_TS,
            TS_maxAct=settings.heart_atr_TS*settings.HR_nominal/settings.HR_max,
            TR=settings.heart_atr_TR,
            TR_maxAct=settings.heart_atr_TR*settings.HR_nominal/settings.HR_max,
            phi0=settings.phi0,
            D_A=settings.heart_atr_D_A,
            D_A_maxAct=settings.heart_atr_D_A,
            D_0=settings.heart_atr_D_0,
            D_0_maxAct=settings.heart_atr_D_0)
            annotation (Placement(transformation(extent={{-54,22},{-34,42}})));
          Auxiliary.PericardiumPressure pericardium(
            heartVolume=volume,
            enabled=true,
            V0=0.0008,
            s=10)
            annotation (Placement(transformation(extent={{40,-100},{20,-80}})));
          Modelica.Blocks.Math.Add add annotation (Placement(transformation(
                extent={{-5,-5},{5,5}},
                rotation=90,
                origin={10,-70})));
          Basic.ValveInertia valveInertia_aortic(enabled=false, A_ind=0.0002)
            "Indexed area by Capps 2000, PMID 10788818" annotation (Placement(
                transformation(
                extent={{-10,-10},{10,10}},
                rotation=180,
                origin={-60,-60})));
          Basic.ValveInertia valveInertia_Mitral(enabled=false, A_ind=0.00053)
            "Indexed area by Sonne 10.1093/ejechocard/jen237" annotation (
              Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=180,
                origin={62,-88})));
          Basic.ValveInertia valveInertia_pulmonary(enabled=false, A_ind=
                0.00026) "Indexed area by Capps 2000, PMID 10788818"
            annotation (Placement(transformation(
                extent={{10,-10},{-10,10}},
                rotation=180,
                origin={84,60})));

        equation
          volume = ra.volume + la.volume + ventricles.V_LV + ventricles.V_RV;
          beat = sa_node.beat;
          V_LV = ventricles.V_LV;
          HR_true = sa_node.HR_true;

          connect(tricuspidValve.q_in, r_SystemicVenousInflow.q_out)
            annotation (Line(
              points={{-6,60},{-68,60}},
              color={0,0,0},
              thickness=1));
          connect(r_SystemicVenousInflow.q_in, sv) annotation (Line(
              points={{-88,60},{-100,60}},
              color={0,0,0},
              thickness=1));
          connect(r_PulmonaryVenousInflow.q_in, pv) annotation (Line(
              points={{90,-60},{100,-60}},
              color={0,0,0},
              thickness=1));
          connect(tricuspidValve.q_out, pulmonaryValve.q_in) annotation (Line(
              points={{14,60},{50,60}},
              color={0,0,0},
              thickness=1));
          connect(ventricles.port_rv, idealValve_deactivable.q_out) annotation (
             Line(
              points={{18,-6},{22,-6},{22,0}},
              color={0,0,0},
              thickness=1));
          connect(idealValve_deactivable.q_in, pulmonaryValve.q_in) annotation (
             Line(
              points={{22,8},{22,60},{50,60}},
              color={0,0,0},
              thickness=1));
          connect(ventricles.port_lv, idealValve_deactivable1.q_out)
            annotation (Line(
              points={{18,-16},{24,-16},{24,-18}},
              color={0,0,0},
              thickness=1));
          connect(ventricles.volumeLimiterRV, idealValve_deactivable.ActivateLimiter)
            annotation (Line(points={{14,0},{14,4},{22,4}}, color={255,0,255}));
          connect(ventricles.volumeLimiterLV, idealValve_deactivable1.ActivateLimiter)
            annotation (Line(points={{14,-20},{14,-22},{24,-22}}, color={255,0,
                  255}));
          connect(ventricles.phi_input, phi0.y) annotation (Line(points={{10,0},
                  {10,80},{-81,80}}, color={0,0,127}));
          connect(ventricles.phi_input, phi) annotation (Line(points={{10,0},{
                  10,80},{-100,80}}, color={0,0,127}));
          connect(frequency_input, sa_node.frequency) annotation (Line(points={{-106,0},
                  {-96,0},{-96,24},{-88,24}},          color={0,0,127}));
          connect(HR0.y, sa_node.frequency) annotation (Line(points={{-87,0},{
                  -96,0},{-96,24},{-88,24}},
                                         color={0,0,127}));
          connect(sa_node.phiInput, phi) annotation (Line(points={{-88,30},{-96,
                  30},{-96,80},{-100,80}}, color={0,0,127}));
          connect(sa_node.phiInput, phi0.y) annotation (Line(points={{-88,30},{
                  -96,30},{-96,80},{-81,80}}, color={0,0,127}));
          connect(ra.port_a, resistor.q_out) annotation (Line(
              points={{-20,24},{-20,36}},
              color={0,0,0},
              thickness=1));
          connect(resistor.q_in, r_SystemicVenousInflow.q_out) annotation (Line(
              points={{-20,56},{-20,60},{-68,60}},
              color={0,0,0},
              thickness=1));
          connect(la.port_a, resistor1.q_in) annotation (Line(
              points={{60,-36},{60,-40}},
              color={0,0,0},
              thickness=1));
          connect(resistor1.q_out, r_PulmonaryVenousInflow.q_out) annotation (
              Line(
              points={{60,-56},{60,-60},{70,-60}},
              color={0,0,0},
              thickness=1));
          connect(sa_node.t0, calciumMechanics.t0) annotation (Line(points={{-68,32},
                  {-54,32}},                       color={0,0,127}));
          connect(calciumMechanics.D, ra.D) annotation (Line(
              points={{-33,32},{0,32},{0,16},{-9.6,16}},
              color={0,140,72},
              thickness=0.5));
          connect(calciumMechanics.D, la.D) annotation (Line(
              points={{-33,32},{78,32},{78,-28},{70.4,-28}},
              color={0,140,72},
              thickness=0.5));
          connect(sa_node.cardiac_cycle, ventricles.cardiac_cycle) annotation (
              Line(
              points={{-68,24},{-66,24},{-66,-20},{0,-20}},
              color={244,125,35},
              thickness=0.5));
          connect(ventricles.thoracic_pressure_input, la.thoracic_pressure_input)
            annotation (Line(
              points={{10,-20},{10,-28},{50,-28}},
              color={162,29,33},
              thickness=0.5));
          connect(ventricles.thoracic_pressure_input, ra.thoracic_pressure_input)
            annotation (Line(
              points={{10,-20},{10,-28},{-40,-28},{-40,16},{-30,16}},
              color={162,29,33},
              thickness=0.5));
          connect(ventricles.frequency, sa_node.frequency) annotation (Line(
                points={{0,-14},{-96,-14},{-96,24},{-88,24}}, color={0,0,127}));
          connect(ventricles.t0, calciumMechanics.t0) annotation (Line(points={
                  {0,-8},{-60,-8},{-60,32},{-54,32}}, color={0,0,127}));
          connect(mitralValve.cardiac_cycle, aorticValve.cardiac_cycle)
            annotation (Line(
              points={{40,-50},{-28,-50}},
              color={244,125,35},
              thickness=0.5));
          connect(aorticValve.cardiac_cycle, ventricles.cardiac_cycle)
            annotation (Line(
              points={{-28,-50},{-66,-50},{-66,-20},{0,-20}},
              color={244,125,35},
              thickness=0.5));
          connect(P0.y, add.u1) annotation (Line(points={{0,-81},{7,-81},{7,-76}},
                color={0,0,127}));
          connect(thoracic_pressure_input, add.u1) annotation (Line(points={{0,
                  -100},{7,-100},{7,-76}}, color={0,0,127}));
          connect(add.u2, pericardium.p_out) annotation (Line(points={{13,-76},
                  {13,-90},{20,-90}}, color={0,0,127}));
          connect(add.y, ventricles.thoracic_pressure_input) annotation (Line(
              points={{10,-64.5},{10,-20}},
              color={162,29,33},
              thickness=0.5));
          connect(ventricles.phi_input, calciumMechanics.phiInput) annotation (
              Line(points={{10,0},{10,80},{-60,80},{-60,40},{-54,40}}, color={0,
                  0,127}));
          connect(mitralValve.cardiac_cycle, pulmonaryValve.cardiac_cycle)
            annotation (Line(
              points={{40,-50},{40,70},{60,70}},
              color={244,125,35},
              thickness=0.5));
          connect(aorticValve.q_out, valveInertia_aortic.q_in) annotation (Line(
              points={{-38,-60},{-50,-60}},
              color={0,0,0},
              thickness=1));
          connect(valveInertia_aortic.q_out, sa) annotation (Line(
              points={{-70,-60},{-100,-60}},
              color={0,0,0},
              thickness=1));
          connect(mitralValve.q_out, idealValve_deactivable1.q_in) annotation (
              Line(
              points={{30,-60},{24,-60},{24,-26}},
              color={0,0,0},
              thickness=1));
          connect(aorticValve.q_in, mitralValve.q_out) annotation (Line(
              points={{-18,-60},{30,-60}},
              color={0,0,0},
              thickness=1));
          connect(mitralValve.q_in, valveInertia_Mitral.q_out) annotation (Line(
              points={{50,-60},{50,-88},{52,-88}},
              color={0,0,0},
              thickness=1));
          connect(valveInertia_Mitral.q_in, r_PulmonaryVenousInflow.q_out)
            annotation (Line(
              points={{72,-88},{84,-88},{84,-76},{62,-76},{62,-60},{70,-60}},
              color={0,0,0},
              thickness=1));
          connect(pa, valveInertia_pulmonary.q_out) annotation (Line(
              points={{100,60},{94,60}},
              color={0,0,0},
              thickness=1));
          connect(valveInertia_pulmonary.q_in, pulmonaryValve.q_out)
            annotation (Line(
              points={{74,60},{70,60}},
              color={0,0,0},
              thickness=1));
          annotation (Icon(graphics={Text(
                  extent={{-100,20},{100,100}},
                  lineColor={0,0,0},
                  textString="TriSeg
%class_name")}));
        end Heart_TriSegMechanicsSimple;

        model Heart_TriSegMechanicsSimple_CoronaryLAD
          "Single coronary artery branch"
          extends Heart_TriSegMechanicsSimple;
          Coronary.CoronaryCirculation coronary_LAD(weight=settings.heart_vntr_xi_Vw
                *(89 + 34 + 27)*1.055*1e-3, useExternalPressureInput=true)
            "Left anterior descending coronary supplies front and bottom LV and front of the septum. Here: All the LV and half the septum"
            annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=90,
                origin={-130,-48})));
          Modelica.Blocks.Sources.RealExpression P_LV(y=ventricles.P_LV)
            annotation (Placement(transformation(extent={{-98,-54},{-112,-38}})));
        equation
          connect(sa, coronary_LAD.port_a) annotation (Line(
              points={{-100,-60},{-100,-58},{-130,-58}},
              color={0,0,0},
              thickness=1));
          connect(coronary_LAD.intraMuscularPressure, P_LV.y) annotation (Line(
                points={{-120,-46},{-112.7,-46}}, color={0,0,127}));
          connect(coronary_LAD.externalPressure, ventricles.thoracic_pressure_input)
            annotation (Line(
              points={{-120,-50},{-120,-54},{10,-54},{10,-20}},
              color={162,29,33},
              thickness=0.5));
          connect(coronary_LAD.port_b, sv) annotation (Line(
              points={{-130,-38},{-130,60},{-100,60}},
              color={0,0,0},
              thickness=1));
        end Heart_TriSegMechanicsSimple_CoronaryLAD;

        model Heart_TriSegMechanicsSimple_Coronary3B
          "Three branches of the coronary trunk"
          extends Heart_TriSegMechanicsSimple;
          Coronary.CoronaryCirculation coronary_Circumflex(
              useExternalPressureInput=true)
            "Supplies left atrium and side and back of the LV. Here: Arbitral value for left atrium."
            annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=90,
                origin={-132,-24})));
          Coronary.CoronaryCirculation coronary_RCA(weight=settings.heart_vntr_xi_Vw
                *(27 + 34/2)*1.055*1e-3, useExternalPressureInput=true)
            "Right coronary artery supplies right atrium, right ventricle and bottom of LV and back of the SEP. Here: RV and half of the septum"
            annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=90,
                origin={-110,-36})));
          Coronary.CoronaryCirculation coronary_LAD(weight=settings.heart_vntr_xi_Vw
                *(89 + 34/2)*1.055*1e-3, useExternalPressureInput=true)
            "Left anterior descending coronary supplies front and bottom LV and front of the septum. Here: All the LV and half the septum"
            annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=90,
                origin={-90,-48})));
          Modelica.Blocks.Sources.RealExpression P_LV(y=ventricles.P_LV)
            annotation (Placement(transformation(extent={{-58,-54},{-72,-38}})));
          Modelica.Blocks.Sources.RealExpression P_RV(y=ventricles.P_RV)
            annotation (Placement(transformation(extent={{-68,-42},{-82,-26}})));
          Modelica.Blocks.Sources.RealExpression P_LA(y=la.P_c) annotation (
              Placement(transformation(extent={{-84,-30},{-98,-14}})));
        equation
          connect(sa, coronary_LAD.port_a) annotation (Line(
              points={{-100,-60},{-90,-60},{-90,-58}},
              color={0,0,0},
              thickness=1));
          connect(coronary_RCA.port_a, sa) annotation (Line(
              points={{-110,-46},{-110,-60},{-100,-60}},
              color={0,0,0},
              thickness=1));
          connect(coronary_Circumflex.port_a, sa) annotation (Line(
              points={{-132,-34},{-132,-60},{-100,-60}},
              color={0,0,0},
              thickness=1));
          connect(coronary_LAD.port_b, coronary_RCA.port_b) annotation (Line(
              points={{-90,-38},{-90,-26},{-110,-26}},
              color={0,0,0},
              thickness=1));
          connect(coronary_RCA.port_b, coronary_Circumflex.port_b) annotation (
              Line(
              points={{-110,-26},{-110,0},{-132,0},{-132,-14}},
              color={0,0,0},
              thickness=1));
          connect(coronary_Circumflex.port_b, sv) annotation (Line(
              points={{-132,-14},{-132,60},{-100,60}},
              color={0,0,0},
              thickness=1));
          connect(coronary_LAD.intraMuscularPressure, P_LV.y)
            annotation (Line(points={{-80,-46},{-72.7,-46}}, color={0,0,127}));
          connect(coronary_RCA.intraMuscularPressure, P_RV.y) annotation (Line(
                points={{-100,-34},{-82.7,-34}}, color={0,0,127}));
          connect(coronary_Circumflex.intraMuscularPressure, P_LA.y)
            annotation (Line(points={{-122,-22},{-98.7,-22}}, color={0,0,127}));
          connect(coronary_Circumflex.externalPressure, ventricles.thoracic_pressure_input)
            annotation (Line(
              points={{-122,-26},{-122,-54},{10,-54},{10,-20}},
              color={162,29,33},
              thickness=0.5));
          connect(coronary_RCA.externalPressure, ventricles.thoracic_pressure_input)
            annotation (Line(
              points={{-100,-38},{-100,-54},{10,-54},{10,-20}},
              color={162,29,33},
              thickness=0.5));
          connect(coronary_LAD.externalPressure, ventricles.thoracic_pressure_input)
            annotation (Line(
              points={{-80,-50},{-80,-54},{10,-54},{10,-20}},
              color={162,29,33},
              thickness=0.5));
        end Heart_TriSegMechanicsSimple_Coronary3B;

        model Heart_TriSegMechanicsSimple_incrRes "Simple mechanics TriSeg with variable LA conductance"
          extends Heart_TriSegMechanicsSimple(r_SystemicVenousInflow(
                useConductanceInput=false), r_PulmonaryVenousInflow(useConductanceInput=
                 true));
          Physiolibrary.Types.RealIO.HydraulicConductanceInput
                                                    hydraulicconductance                 annotation (Placement(
                transformation(extent={{20,-20},{-20,20}},
                rotation=0,
                origin={120,-30}),                            iconTransformation(extent={{140,
                    -100},{100,-60}})));
        equation
          connect(r_PulmonaryVenousInflow.cond, hydraulicconductance)
            annotation (Line(points={{80,-54},{80,-30},{120,-30}}, color={0,0,127}));
        end Heart_TriSegMechanicsSimple_incrRes;

        package Data
          model EDPVRnorm
            "Normalized End diastolic pressure volume relationship from Klotz 2006 (10.1152/ajpheart.01240.2005)"
            Physiolibrary.Types.RealIO.PressureInput pressure = EDP if not useVolumeInput
             annotation (Placement(transformation(extent={{-120,40},{-80,80}})));

            Physiolibrary.Types.RealIO.PressureOutput pressureOut = EDP if useVolumeInput
             annotation (Placement(transformation(extent={{-120,40},{-80,80}})));

            Physiolibrary.Types.RealIO.VolumeInput volume = EDV if useVolumeInput
              annotation (Placement(transformation(extent={{-120,-80},{-80,-40}})));

            Physiolibrary.Types.RealIO.VolumeOutput volumeOut = EDV if not useVolumeInput
              annotation (Placement(transformation(extent={{-120,-80},{-80,-40}})));

          constant Physiolibrary.Types.Pressure mmHg2SI = 133.322;
          constant Physiolibrary.Types.Volume ml2SI = 1e-6;
          parameter Physiolibrary.Types.Volume V_m=0.00015;
          parameter Physiolibrary.Types.Pressure P_m=1066.57909932;
          parameter Real k = 0.6 - 0.006*P_m/mmHg2SI annotation (Dialog(enable=false));
          parameter Physiolibrary.Types.Volume V0 = k*V_m annotation (Dialog(enable=false));
          Physiolibrary.Types.Volume V30;
          //parameter Physiolibrary.Types.Volume V30=V0 + (V_m_n - V0)/((P_m/A_n/mmHg2SI)^(1/B_n)) annotation (Dialog(enable=false));
          Real V_m_n = (V_m - V0)/(V30-V0) annotation (Dialog(enable=false));
          Physiolibrary.Types.Volume EDV;
          Real _EDV_n = (EDV - V0)/(V30 - V0);
          Physiolibrary.Types.Pressure EDP;
          Real _EDP = max(0, EDP/mmHg2SI);
          parameter Real A_n = 28.2;
          parameter Real B_n = 2.79;
          parameter Boolean useVolumeInput = false;

          equation
           P_m = mmHg2SI * A_n * (V_m_n)^B_n;

            _EDP = A_n*max(0, _EDV_n)^(B_n);
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)));
          end EDPVRnorm;

          model EDPVRtest
            EDPVRnorm eDPVRnorm
              annotation (Placement(transformation(extent={{-10,-6},{10,14}})));
            Modelica.Blocks.Sources.Ramp Pressure(height=1333.22*4, duration=1)
              annotation (Placement(transformation(extent={{-70,2},{-50,22}})));
          equation
            connect(Pressure.y, eDPVRnorm.pressure) annotation (Line(points={{-49,12},{-16,
                    12},{-16,10},{-10,10}}, color={0,0,127}));
            annotation (
              Icon(coordinateSystem(preserveAspectRatio=false)),
              Diagram(coordinateSystem(preserveAspectRatio=false)),
              experiment(Tolerance=1e-07, __Dymola_Algorithm="Cvode"));
          end EDPVRtest;
        end Data;

        model Heart_4chambers_valves "A 4-chamber surrogate model"
          extends partialHeart(
            UsePhiInput=false,
            UseThoracic_PressureInput=false,
            UseFrequencyInput=true);
          parameter String class_name="valves";
          replaceable
          Physiolibrary.Hydraulic.Components.IdealValveResistance
                               tricuspidValve(
            _Goff(displayUnit="ml/(mmHg.min)"),
            Pknee=0,
            useChatteringProtection=false,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=settings.heart_R_vlv)
                        constrainedby
            Physiolibrary.Hydraulic.Components.IdealValveResistance(
            useChatteringProtection=true,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=R_vlv)
            annotation (Placement(transformation(extent={{-6,50},{14,70}})));
          replaceable
          Physiolibrary.Hydraulic.Components.IdealValveResistance
                               pulmonaryValve(
            _Goff(displayUnit="ml/(mmHg.min)"),
            Pknee=0,
            useChatteringProtection=false,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=settings.heart_R_vlv)
                        constrainedby
            Physiolibrary.Hydraulic.Components.IdealValveResistance(
            useChatteringProtection=true,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=R_vlv)
            annotation (Placement(transformation(extent={{50,50},{70,70}})));
          replaceable
          Basic.IdealValveResistanceWithMeasurements
                               mitralValve(
            _Goff(displayUnit="ml/(mmHg.min)"),
            Pknee=0,
            useChatteringProtection=false,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=settings.heart_R_vlv,
            useCycleInput=true) constrainedby
            Physiolibrary.Hydraulic.Components.IdealValveResistance(
            useChatteringProtection=true,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=R_vlv)
            annotation (Placement(transformation(extent={{50,-70},{30,-50}})));
          replaceable Basic.IdealValveResistanceWithMeasurements aorticValve(
            _Goff(displayUnit="ml/(mmHg.min)"),
            Pknee=0,
            useCycleInput=true,
            useChatteringProtection=false,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=settings.heart_R_vlv)
                        constrainedby
            Physiolibrary.Hydraulic.Components.IdealValveResistance(
            useChatteringProtection=true,
            chatteringProtectionTime(displayUnit="ms") = 0.01,
            _Ron=R_vlv) annotation (Placement(transformation(extent={{0,-70},{-20,-50}})));

          replaceable
          Physiolibrary.Hydraulic.Components.Resistor r_SystemicVenousInflow(Resistance=
               settings.heart_R_RA) constrainedby
            Physiolibrary.Hydraulic.Interfaces.OnePort
            "Resistance of the inflow to the atria"
            annotation (Placement(transformation(extent={{-88,50},{-68,70}})));
          replaceable
          Physiolibrary.Hydraulic.Components.Resistor r_PulmonaryVenousInflow(
              Resistance=settings.heart_R_LA) constrainedby
            Physiolibrary.Hydraulic.Interfaces.OnePort
            "Resistance of the inflow to the atria"
            annotation (Placement(transformation(extent={{90,-70},{70,-50}})));

        Physiolibrary.Types.Volume volume;
          Auxiliary.SA_node sa_node annotation (Placement(transformation(
                  rotation=0, extent={{-88,22},{-68,42}})));
          Modelica.Blocks.Math.Add add annotation (Placement(transformation(
                extent={{-5,-5},{5,5}},
                rotation=90,
                origin={10,-70})));
          Physiolibrary.Types.Constants.PressureConst P1(k=0) if not
            UseThoracic_PressureInput
            annotation (Placement(transformation(extent={{4,-4},{-4,4}},
                rotation=0,
                origin={28,-88})));
          Physiolibrary.Hydraulic.Components.ElasticVessel rv(volume_start=
                0.00012,                                      useComplianceInput=true)
            annotation (Placement(transformation(extent={{16,10},{36,30}})));
          Physiolibrary.Hydraulic.Components.ElasticVessel la(useComplianceInput=true)
            annotation (Placement(transformation(extent={{8,-30},{28,-10}})));
          Physiolibrary.Hydraulic.Components.ElasticVessel lv(volume_start=
                0.00013,                                      useComplianceInput=true)
            annotation (Placement(transformation(extent={{48,-30},{68,-10}})));
          Physiolibrary.Hydraulic.Components.ElasticVessel ra(useComplianceInput=true)
            annotation (Placement(transformation(extent={{-32,10},{-12,30}})));
          Physiolibrary.Types.RealIO.HydraulicComplianceInput c_ra annotation (
              Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=0,
                origin={-44,34}), iconTransformation(
                extent={{-11,-11},{11,11}},
                rotation=270,
                origin={-59,101})));
          Physiolibrary.Types.RealIO.HydraulicComplianceInput c_rv annotation (
              Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=0,
                origin={60,100}), iconTransformation(
                extent={{-10,-10},{10,10}},
                origin={60,100},
                rotation=270)));
          Physiolibrary.Types.RealIO.HydraulicComplianceInput c_lv annotation (
              Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=0,
                origin={40,-6}), iconTransformation(
                extent={{-10,-10},{10,10}},
                origin={60,-98},
                rotation=90)));
          Physiolibrary.Types.RealIO.HydraulicComplianceInput c_la annotation (
              Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=0,
                origin={-4,-6}), iconTransformation(
                extent={{-10,-10},{10,10}},
                origin={-60,-98},
                rotation=90)));
        equation
          volume =ra.volume + la.volume + lv.volume + rv.volume;
          connect(pulmonaryValve.q_out, pa) annotation (Line(
              points={{70,60},{100,60}},
              color={0,0,0},
              thickness=1));
          connect(aorticValve.q_out, sa) annotation (Line(
              points={{-20,-60},{-100,-60}},
              color={0,0,0},
              thickness=1));
          connect(tricuspidValve.q_in, r_SystemicVenousInflow.q_out) annotation (Line(
              points={{-6,60},{-68,60}},
              color={0,0,0},
              thickness=1));
          connect(r_SystemicVenousInflow.q_in, sv) annotation (Line(
              points={{-88,60},{-100,60}},
              color={0,0,0},
              thickness=1));
          connect(mitralValve.q_in, r_PulmonaryVenousInflow.q_out) annotation (Line(
              points={{50,-60},{70,-60}},
              color={0,0,0},
              thickness=1));
          connect(r_PulmonaryVenousInflow.q_in, pv) annotation (Line(
              points={{90,-60},{100,-60}},
              color={0,0,0},
              thickness=1));
          connect(tricuspidValve.q_out, pulmonaryValve.q_in) annotation (Line(
              points={{14,60},{50,60}},
              color={0,0,0},
              thickness=1));
          connect(mitralValve.q_out, aorticValve.q_in) annotation (Line(
              points={{30,-60},{0,-60}},
              color={0,0,0},
              thickness=1));
          connect(frequency_input,sa_node.frequency)           annotation (Line(points={{-106,0},
                  {-96,0},{-96,32},{-88,32}},          color={0,0,127}));
          connect(HR0.y,sa_node.frequency)           annotation (Line(points={{-87,0},
                  {-96,0},{-96,32},{-88,32}},
                                         color={0,0,127}));
          connect(sa_node.phiInput,          phi) annotation (Line(points={{-88,38},{-96,
                  38},{-96,80},{-100,80}},          color={0,0,127}));
          connect(sa_node.phiInput,          phi0.y) annotation (Line(points={{-88,38},{
                  -96,38},{-96,80},{-81,80}},          color={0,0,127}));
          connect(mitralValve.cardiac_cycle, aorticValve.cardiac_cycle) annotation (
              Line(
              points={{40,-50},{-10,-50}},
              color={244,125,35},
              thickness=0.5));
          connect(P0.y, add.u1) annotation (Line(points={{0,-81},{7,-81},{7,-76}},
                color={0,0,127}));
          connect(thoracic_pressure_input, add.u1) annotation (Line(points={{0,
                  -100},{7,-100},{7,-76}}, color={0,0,127}));
          connect(sa_node.cardiac_cycle, aorticValve.cardiac_cycle) annotation (Line(
                points={{-68,32},{-64,32},{-64,-50},{-10,-50}}, color={0,0,127}));
          connect(P1.y, add.u2)
            annotation (Line(points={{23,-88},{13,-88},{13,-76}}, color={0,0,127}));
          connect(rv.q_in, pulmonaryValve.q_in) annotation (Line(
              points={{26,20},{36,20},{36,60},{50,60}},
              color={0,0,0},
              thickness=1));
          connect(la.q_in, aorticValve.q_in) annotation (Line(
              points={{18,-20},{18,-60},{0,-60}},
              color={0,0,0},
              thickness=1));
          connect(ra.q_in, r_SystemicVenousInflow.q_out) annotation (Line(
              points={{-22,20},{-10,20},{-10,60},{-68,60}},
              color={0,0,0},
              thickness=1));
          connect(lv.q_in, r_PulmonaryVenousInflow.q_out) annotation (Line(
              points={{58,-20},{58,-60},{70,-60}},
              color={0,0,0},
              thickness=1));
          connect(ra.compliance, c_ra)
            annotation (Line(points={{-22,28},{-22,34},{-44,34}}, color={0,0,127}));
          connect(rv.compliance, c_rv)
            annotation (Line(points={{26,28},{26,100},{60,100}}, color={0,0,127}));
          connect(lv.compliance, c_lv)
            annotation (Line(points={{58,-12},{58,-6},{40,-6}}, color={0,0,127}));
          connect(la.compliance, c_la)
            annotation (Line(points={{18,-12},{18,-6},{-4,-6}}, color={0,0,127}));
          annotation (Icon(graphics={Text(
                  extent={{-100,20},{100,100}},
                  lineColor={0,0,0},
                  textString="4 Chamber
compliance
%class_name")}));
        end Heart_4chambers_valves;

        model Heart_TriSegMechanics_LumensExercise
          "TriSeg with original Lumen's calcium mechanics heuristic approximation, extended with exercise input"
          extends Heart_TriSegMechanics(
            r_PulmonaryVenousInflow(Resistance=settings.heart_R_LA),
            r_SystemicVenousInflow(Resistance=settings.heart_R_RA),
            redeclare Auxiliary.TriSegMechanics_components.Ventricles_LumensOriginal
              ventricles(redeclare replaceable model VentricleWall =
                  ADAN_main.Components.Subsystems.Heart.Auxiliary.TriSegMechanics_components.VentricleWall_LumensOriginal,
                calciumMechanics(usePhiInput=false, t0_delay=0.1)),
            class_name="Lumens orig",
            tricuspidValve(_Ron=settings.heart_R_vlv),
            pulmonaryValve(_Ron=settings.heart_R_vlv),
            mitralValve(_Ron=settings.heart_R_vlv),
            aorticValve(_Ron=settings.heart_R_vlv),
            pericardium(enabled=false),
            redeclare Auxiliary.Atrium ra(
              Tact(displayUnit="s") = 0.015,
              Emin=0.05*1.5,
              sigma_a=0.1),
            redeclare Auxiliary.Atrium la(
              Tact(displayUnit="s") = 0.015,
              Emin=0.05*1.5,
              sigma_a=0.1,
              stiffness_scaling=3));
        equation
          connect(sa_node.cardiac_cycle, ra.cardiac_cycle) annotation (Line(
              points={{-68,32},{-10,32},{-10,16}},
              color={244,125,35},
              thickness=0.5));
          connect(sa_node.cardiac_cycle, la.cardiac_cycle) annotation (Line(
              points={{-68,32},{82,32},{82,-28},{70,-28}},
              color={244,125,35},
              thickness=0.5));
          connect(sa_node.t0, ventricles.t0) annotation (Line(points={{-68,40},
                  {-58,40},{-58,-8},{0,-8}}, color={0,0,127}));
        end Heart_TriSegMechanics_LumensExercise;
      end Heart;

      package Systemic
      package Vessel_modules
        package Auxiliary
          type simplificationLevel = enumeration(
                detailed,
                original,
                simplified,
                noL3);

          partial model PartialSystemicElement
            "base for all systemic cicrulation vessel modules (arteries, veins, tissues), contains ports and basic IO interfaces"
            replaceable Interfaces.HydraulicPort_a_leveled port_a annotation (
                Placement(transformation(extent={{-110,-10},{-90,10}}),
                  iconTransformation(extent={{-110,-10},{-90,10}})),
                  Dialog(tab = "Redeclares"));
            replaceable Interfaces.HydraulicPort_b_leveled port_b annotation (
                Placement(transformation(extent={{90,-10},{110,10}}), iconTransformation(
                    extent={{90,-10},{110,10}})),
                  Dialog(tab = "Redeclares"));

            outer Settings settings
              annotation (Placement(transformation(extent={{-100,20},{-90,30}})));

            public
            parameter Boolean UseInertance = true annotation(choices(checkBox=true));
            parameter Boolean UseOuter_thoracic_pressure=false   annotation(dialog(enabled=not UseOuter_external_pressure), choices(checkBox=true), evaluate = true);
            parameter Boolean UseOuter_external_pressure=false   annotation(dialog(enabled=not UseOuter_thoracic_pressure), choices(checkBox=true), evaluate = true);

            parameter Boolean LimitBackflow=false   "Inserts a one-way valve when true" annotation(choices(checkBox=true),Dialog(group = "Parameters"));

            outer Physiolibrary.Types.Fraction phi "a systemic acitvation fraction, 1 being maximal possible. Normal resting is believed to be 1/4 of the maximum (0.25)";
            parameter Physiolibrary.Types.Fraction phi0 = settings.phi0;

            outer Physiolibrary.Types.Pressure P_th "Thoracic (airway) pressure, used as outer pressure.";
            outer Physiolibrary.Types.Pressure outer_pressure "Optional other external pressure (e.g. applied on limbs)";
            parameter Physiolibrary.Types.Fraction thoracic_pressure_ratio=1 "Optional Ratio for thoracic pressure, e.g. for abdominal cavity" annotation (Dialog(enable=UseOuter_thoracic_pressure));
            Physiolibrary.Types.Pressure external_pressure_outside "externally applied pressure - either thoracic or the other one" annotation(HideResult = settings.hideLevel0);
            Physiolibrary.Types.Pressure external_pressure_inside "Internal effect of externally applied pressure. Might be lower as the vessel is close to empty." annotation(HideResult = settings.hideLevel0);

            outer Physiolibrary.Types.Fraction Exercise "Exercise intensity input to the whole systemic circulation";
            parameter Boolean UseExercise = false "True, when this particular tissue is doing exercise" annotation(choices(checkBox=true));
            parameter Physiolibrary.Types.Fraction exercise_ratio=1 "Excercise intensity ratio of this particular tissue - e.g. some tissue could be only halfway activated" annotation (Dialog(enable=UseExercise));
            Physiolibrary.Types.Fraction exercise "Actual exercise fraction for this particular tissue" annotation(HideResult = settings.hideLevel0);

            Physiolibrary.Types.Pressure p_in=port_a.pressure
              "Input pressure" annotation(HideResult = settings.hideLevel1);
              Physiolibrary.Types.VolumeFlowRate q_in=port_a.q
                "Input flow (measured in normal blood flow direction)" annotation(HideResult = settings.hideLevel1);

            Physiolibrary.Types.Pressure p_out_valved= port_b.pressure
              "Output pressure, able to be shut by a checkvalve." annotation(HideResult = settings.hideLevel0);
            // Physiolibrary.Types.VolumeFlowRate q_out_valved= - port_b.q
            //   "Output flow (positive in normal blood flow direction), able to be closed by a checkvalve.";

            Physiolibrary.Types.Pressure p_out
              "Output pressure (measured in normal blood flow direction)" annotation(HideResult = settings.hideLevel0);
              Physiolibrary.Types.VolumeFlowRate q_out=-port_b.q
                "Output flow (positive in normal blood flow direction)." annotation(HideResult = settings.hideLevel0);

            Physiolibrary.Types.Volume volume(nominal = 1e-9) "Actual volume" annotation(HideResult = settings.hideLevel1);
            parameter Physiolibrary.Types.Volume V_min = 1e-6 "Minimal volume for limiting effects (e.g. collapsing, external pressure..)";

          // CHECKVALVE FUNCTIONALITY

            Real passableVariable(start=0, final unit="1")
              "Auxiliary variable for actual position on the ideal diode characteristic" annotation(HideResult = not LimitBackflow or settings.hideLevel0);
            parameter Physiolibrary.Types.HydraulicResistance R_on(final min=0, displayUnit="l/(mmHg.min)") = 0
              "Forward state-on conductance (open valve resistance)" annotation (Dialog(enable=LimitBackflow));
            parameter Physiolibrary.Types.HydraulicConductance G_off(final min=0, displayUnit="l/(mmHg.min)") = 1.2501026264094e-12
              "Backward state-off conductance (closed valve conductance)" annotation (Dialog(enable=LimitBackflow));
            parameter Physiolibrary.Types.Pressure Pknee(final min=0) = 0
              "Forward threshold pressure" annotation (Dialog(enable=LimitBackflow));
            Boolean open(start = true) annotation(HideResult = settings.hideLevel0);
            Physiolibrary.Types.Pressure dp_valve=p_out -p_out_valved annotation(HideResult = settings.hideLevel0);
            parameter Physiolibrary.Types.Volume zpv = 0 "Zero-pressure volume" annotation (Dialog(tab = "General", group = "Calculated parameters"));
            protected
            constant Physiolibrary.Types.Pressure unitPressure=1;
            constant Physiolibrary.Types.VolumeFlowRate unitFlow=1;
          equation
            assert(volume > 0, "Volume is negative!", AssertionLevel.warning);

           if UseExercise then
             exercise = Exercise*exercise_ratio;
           else
             exercise = 0;
           end if;

            // q_out = q_out_valved;

            if LimitBackflow then
              open = passableVariable > Modelica.Constants.eps;
              dp_valve = (passableVariable*unitFlow)*(if open then R_on else 1) + Pknee;
              q_out = (passableVariable*unitPressure)*(if open then 1 else G_off) + G_off*Pknee;
            else
              // the valve is nonexistent, therefore permanently open
              open = true;
              dp_valve = 0;
              passableVariable = 0;
            end if;

            if UseOuter_thoracic_pressure then
              external_pressure_outside = thoracic_pressure_ratio*P_th;
            elseif UseOuter_external_pressure then
              external_pressure_outside = outer_pressure;
            elseif UseOuter_external_pressure and UseOuter_thoracic_pressure then
              // should not happen
              external_pressure_outside = thoracic_pressure_ratio*P_th + outer_pressure;
            else
              external_pressure_outside = 0;
            end if;

            if settings.systemic_limitExternalPressure and (UseOuter_external_pressure
                 or UseOuter_thoracic_pressure) then
              external_pressure_inside =
                external_pressure_outside
                *max(min(volume / V_min, 1), 0);
            else
              external_pressure_inside = external_pressure_outside;
            end if;

              annotation (Icon(coordinateSystem(extent={{-100,-20},{100,20}}), graphics={
                  Rectangle(extent={{-100,20},{100,-20}}, lineColor={28,108,200},
                    fillColor={255,255,255},
                    fillPattern=FillPattern.Solid),
                  Text(
                    extent={{-100,-20},{100,0}},
                    lineColor={28,108,200},
                    textString="%name"),
                    Rectangle(extent={{-100,20},{100,-20}}, lineColor={0,140,72},
                      lineThickness =                                                          1,
                    visible = DynamicSelect(false, UseOuter_thoracic_pressure)),
                    Rectangle(extent={{-98,18},{98,-18}},   lineColor={255,255,85},
                      lineThickness=2,
                      visible = DynamicSelect(false, UseOuter_external_pressure)),
                  Text(
                    extent={{-100,-40},{100,-20}},
                    lineColor={0,140,72},
                    textString="%thoracic_pressure_ratio",
                    visible = DynamicSelect(true, thoracic_pressure_ratio <> 1)),
                  Line(
                    points={{20,40},{50,10},{80,4}},
                    color={28,108,200},
                    smooth=Smooth.Bezier,
                    thickness=0.5,
                    visible = DynamicSelect(true, LimitBackflow)),
                  Line(
                    points={{20,-40},{50,-10},{80,-4}},
                    color={28,108,200},
                    smooth=Smooth.Bezier,
                    thickness=0.5,
                    visible = DynamicSelect(true, LimitBackflow))}),                 Diagram(coordinateSystem(extent={{-100,
                      -20},{100,20}})),
                experiment(
                  StopTime=3,
                  Interval=0.001,
                  Tolerance=1e-05,
                  __Dymola_Algorithm="Cvode"));
          end PartialSystemicElement;

          partial model PartialSystemicVessel
            "Base model for all systemic arteries and veins"
            extends PartialSystemicElement(zpv = l*Modelica.Constants.pi*(r^2));
              outer Modelica.Units.SI.Angle Tilt;
            outer Physiolibrary.Types.Fraction Exercise;

            parameter Boolean UseTiltInput=false
              "Use custom vessel tilt angle, otherwise the segment takes the Systemic Tilt. Note that the sinAlpha is still taken into account."  annotation(choices(checkBox=true));

            parameter Boolean UseVasoconstrictionEffect = false annotation(choices(checkBox=true),Dialog(group = "Parameters"));
            parameter Real sinAlpha=0   "Sin of vessel orientation angle, 0 being supine, 1 being up, -1 aiming down. Used even for custom tilt input."  annotation (Dialog(tab = "General", group = "Orientations", enabled = not UseSinAlphaInput));
            parameter Boolean UseDistentionOutput = false "Provides relative distention fraction output, otherwise hidden and not calculated" annotation(choices(checkBox=true));
            parameter Physiolibrary.Types.Volume distentionBase = l*Modelica.Constants.pi*(r^2) annotation (enable = UseDistentionOutput);
            Physiolibrary.Types.Pressure P_hs = height*settings.blood_rho*Modelica.Constants.g_n "Hydrostatic pressure of whole vessel at actual orientation" annotation(HideResult = settings.hideLevel1);
            Physiolibrary.Types.Pressure p_in_hs=p_in - P_hs/2
              "input pressure including the hydrostatic pressure" annotation(HideResult = settings.hideLevel0);
            Physiolibrary.Types.Pressure p_out_hs=p_out + P_hs/2
              "Output pressure including the hydrostatic pressure" annotation(HideResult = settings.hideLevel0);
              Modelica.Units.SI.Position hydrostatic_level=(port_a.position +
                  height/2) annotation(HideResult = settings.hideLevel0);
              Modelica.Units.SI.Height height=sin(_tilt)*sinAlpha*l
                "Actual height of the vessel depends on tilt and sinAlpha" annotation(HideResult = settings.hideLevel0);

           parameter Real E(unit = "Pa") = 4e5 "Elasticity"  annotation (Dialog(tab = "General", group = "Vessel properties", enable = not UseNonLinearCompliance));
              parameter Modelica.Units.SI.Length l=1e-2 "Segment length"
                annotation (Dialog(tab="General", group="Vessel properties"));
              parameter Modelica.Units.SI.Radius r=1e-3 "Inner vessel radius"
                annotation (Dialog(tab="General", group="Vessel properties"));

              parameter Modelica.Units.SI.Thickness h=r*(settings.vessel_a*exp(
                  settings.vessel_b*r) + settings.vessel_c*exp(settings.vessel_d
                  *r)) "Thickness of the vessel wall. Eq. from (Safaei 2018)"
                annotation (Dialog(tab="General", group="Vessel properties"));

            parameter Physiolibrary.Types.HydraulicInertance I = settings.blood_rho*l/(Modelica.Constants.pi*(r)^2) "Inertance eq from (Safaei 2018)" annotation (Dialog(tab = "General", group = "Calculated parameters"));
            parameter Physiolibrary.Types.HydraulicCompliance C = 2*Modelica.Constants.pi*(r^3) *l/(E*h) "Compliance eq from (Safaei 2018)"
                                                                                                                                           annotation (Dialog(tab = "General", group = "Calculated parameters", enable = not UseNonLinearCompliance));
            parameter Physiolibrary.Types.HydraulicResistance R = 8*settings.blood_mu*l/(Modelica.Constants.pi*(r^4)) "Resistance eq from (Safaei 2018)" annotation (Dialog(tab = "General", group = "Calculated parameters"));
            parameter Physiolibrary.Types.HydraulicResistance R_vis=0.01/C "Viscoleastic resistance of the vessel wall (Voigt model) eq from (Safaei 2018)"  annotation (Dialog(                 group=
                    "Calculated parameters"));

          //   parameter Physiolibrary.Types.Volume zpv = l*Modelica.Constants.pi*(r^2) "Zero-pressure volume" annotation (Dialog(tab = "General", group = "Calculated parameters"));
            Physiolibrary.Types.RealIO.FractionOutput distentionFraction = sqrt(max(volume, 0))/sqrt(distentionBase)
           if UseDistentionOutput "Outputs distention from default, for usage by a baroreceptor" annotation (Placement(transformation(extent={{76,10},{96,
                      30}}), iconTransformation(extent={{-20,-20},{20,20}},
                  rotation=90,
                  origin={0,40})));
            Modelica.Blocks.Interfaces.RealInput TiltInput=_tilt if UseTiltInput
              "Custom tilt input" annotation (Placement(transformation(extent={{-84,10},{-64,
                      30}}), iconTransformation(
                  extent={{-20,-20},{20,20}},
                  rotation=90,
                  origin={-80,-20})));

            protected
              Modelica.Units.SI.Angle _tilt;
          equation
            if not UseTiltInput then
              // use the outer Tilt set for the whole systemic circulation
              _tilt= Tilt;
            end if;

            port_a.position + height = port_b.position;

            annotation (Icon(graphics={
                  Text(
                    extent={{-100,0},{100,20}},
                    lineColor={28,108,200},
                    textString=DynamicSelect("L, d",
                    "L = " + String(l*100, significantDigits=2) + "cm, " +
                    "D = " + String(r*2*100, significantDigits=2) + "cm")),
                    Line(
                    points=DynamicSelect({{-60,20},{-20,40}}, {{-60,20},{-60 + cos(asin(sinAlpha))*40, 20 + sinAlpha*40}}),
                    color={0,140,72},
                    thickness=1,
                    visible = DynamicSelect(false, sinAlpha > 0 or sinAlpha < 0),
                    arrow={Arrow.None,Arrow.Filled})}), Diagram(graphics={
                  Ellipse(
                    extent={{-82,2},{-78,-2}},
                    fillColor={28,108,200},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Ellipse(
                    extent={{78,2},{82,-2}},
                    lineColor={28,108,200},
                    lineThickness=0.5),
                  Line(
                    points={{-100,-20},{100,-20}},
                    color={28,108,200},
                    thickness=0.5,
                    arrow={Arrow.Open,Arrow.Open}),
                  Text(
                    extent={{-30,-30},{32,-20}},
                    lineColor={28,108,200},
                    lineThickness=0.5,
                    textString="P_hs ~ Tilt*sinAlpha*length"),
                  Text(
                    extent={{-100,-10},{-80,2}},
                    lineColor={28,108,200},
                    lineThickness=0.5,
                    textString="+
P_hs/2"),         Text(
                    extent={{80,-10},{100,2}},
                    lineColor={28,108,200},
                    lineThickness=0.5,
                    textString="+
P_hs/2")}));
          end PartialSystemicVessel;

          package Compliances
            partial model partialCompliance
                "A base model for pressure - volume characteristics"

              import Physiolibrary.Types.*;
              input Volume V "Volume";
              input Fraction phi;
              parameter Fraction phi0 = settings.phi0;

              parameter Boolean disableVenoconstriction = false "Disable the phi effect on compliance on this particular element" annotation(choices(checkBox=true),Dialog(group = "Parameters"));

              Fraction phi_ = if settings.veins_UsePhiEffect and not disableVenoconstriction then phi else phi0 "internal on-off phi";
            //  parameter Boolean UsePhiEffect = true;
                parameter Modelica.Units.SI.Length l;
              parameter Volume V0 "Initial volume";
              parameter Volume V_min "minimal collapsing pressure";
              parameter Pressure p0 "Nominal pressure for initialization";
              Pressure p "Fluid pressure";
                Modelica.Units.SI.Radius r=sqrt(max(V, 0)/(l*Modelica.Constants.pi))
                  "Actual vessel radius";

              outer Settings settings
                annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
              annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end partialCompliance;

            model compliance_linear
              extends Compliances.partialCompliance(
                                      V_min = zpv/2,
                                      V0 = p0*C + zpv);
              parameter Physiolibrary.Types.HydraulicCompliance C "Nominal compliance";
              parameter Physiolibrary.Types.Volume zpv "Nominal zero pressure volume";
              parameter Physiolibrary.Types.Fraction C_collapsing = 1e-4 "Stiffening of the collapsing vein to prevent negative volumes";

              Physiolibrary.Types.Fraction vc_effect = 1 - settings.veins_C_phi*(phi_ - phi0);
              Physiolibrary.Types.Fraction vzpv_effect = 1 - settings.veins_ZPV_phi *(phi_ - phi0);
              Physiolibrary.Types.Volume curZpv = zpv*settings.experimental_zpv_factor*vzpv_effect;

            initial equation
              if settings.initByPressure then
                p = p0;
              end if;
            equation
              assert(vc_effect > 0, "The venocostriction effect (veins_C_phi) makes the linear compliance zero or negative");

              if V > curZpv then
                 V = p * C*settings.experimental_C_factor*vc_effect + curZpv;
              else
                V = p * C*settings.experimental_C_factor*vc_effect*C_collapsing + curZpv;
              end if;

            end compliance_linear;

            model compliance_nonLinear
                "Non-linear compliance model by Melchiort"
              extends Compliances.partialCompliance(
                                      V_min = zpv/2, p0=665);
              parameter Physiolibrary.Types.HydraulicCompliance C "compliance";
              parameter Physiolibrary.Types.Volume zpv "Zero pressure V";
              parameter Boolean explicitVolumeRelation=false
                "if the equation should be inverted (solely for numerical reasons)";
              parameter Physiolibrary.Types.Volume Vmax = 2*zpv;

              outer Physiolibrary.Types.Fraction C_effect;
              outer Physiolibrary.Types.Fraction ZPV_effect;

              Physiolibrary.Types.HydraulicCompliance c0 = C_effect*zpv/p0 "nominal compliance";
              Physiolibrary.Types.Volume zpvs = zpv *ZPV_effect;
            equation
              if explicitVolumeRelation then
                  tan(V - zpvs)/(2*Vmax/Modelica.Constants.pi) = (Modelica.Constants.pi*c0/2/Vmax*p);
              else
                V = zpvs + 2*Vmax/Modelica.Constants.pi*atan(Modelica.Constants.pi*c0/2/Vmax*p);
              end if;
            end compliance_nonLinear;

            model compliance_nonLinearPstras
              "Non-linear compliance model by Pstras and extended"
              extends Compliances.partialCompliance(
                                      V_min = zpv/2, p0=665);

              parameter Boolean UseNonLinear_TissuesCompliance = true;
              parameter Boolean UseStraighteningReaction2Phi = true;
              parameter Physiolibrary.Types.HydraulicCompliance C0;
              parameter Physiolibrary.Types.Volume zpv=0 "linear Zero-pressure volume";
              parameter Physiolibrary.Types.Fraction gamma = 1 "fraction of stressed volume to zpv. Default 1 equals V_s = zpv";

              parameter Real k=C0/(V_maxExponential - V_n)
                "For Pstras non-linear PV characteristics. For gamma = 0.0003750308";
              parameter Physiolibrary.Types.Volume V_maxExponential(nominal=1e-9) = V_n + (
                V_n - zpv)*gamma
                " V_n is between zpv and V_maxExponential, parameterized by gamma. 1 means its in the center. If the volume is over V_maxExponential, the PV characteristics follow the linear relation. For Pstras non-linear PV characteristics";
              parameter Physiolibrary.Types.Volume V_n=p0*C0 + zpv
                "nominal volume calculated from the linear relationship. nominal volume for non-linear compliance parametrization";
              parameter Physiolibrary.Types.Volume V_us=V_maxExponential - (
                  V_maxExponential - V_n)*exp(p0*k)
                "nonlinear Un-Stressed volume";
              parameter Physiolibrary.Types.Volume volume_linearBreakpoint=V_maxExponential*
                  (1 - settings.tissues_V_max_breakPoint_Frac)
                "Maximal volume for nonlinear function, usually set as a fraction of V_maxExponential.";

              Real k_phi=C0/(V_maxExponential - V_n_phi)
                "For Pstras non-linear PV characteristics";
              Physiolibrary.Types.Volume V_maxExponential_phi=V_maxExponential - (V_us -
                  V_us_phi) "From Pstras";
                Physiolibrary.Types.Volume V_n_phi=V_n/(1 + settings.tissues_eta_C*
                    (phi_ - settings.phi0))
                  "Linearly dependent on phi and sensitive to exercise, re";
              Physiolibrary.Types.Volume V_us_phi=V_us/(1 + settings.tissues_eta_C*(phi_ -
                  settings.phi0)) "Linearly dependent on phi";

            equation

              if not UseNonLinear_TissuesCompliance then
                V = (p)*C0 + zpv;
              elseif UseStraighteningReaction2Phi then
                // my expression based on straightening
                if noEvent(V < volume_linearBreakpoint) then
                  p =1/k_phi*log((V_maxExponential - V_us)/(V_maxExponential - V))
                    "equation from Pstras 2017, 10.1093/imammb/dqw008, allegedly taken from Hardy & Collins 1982";
                else
                  // linear steepness after volume too close to maximal volume
                  // linearized by derivation of original equation, slope = 1/k_phi/(1e-6), V_max - volume = 1e-6:, u_C at point: 1/k_phi*log((V_max - V_us)/(1e-6))
                  p - 1/k_phi*log((V_maxExponential - V_us)/(V_maxExponential -
                    volume_linearBreakpoint)) = 1/k_phi/(V_maxExponential -
                    volume_linearBreakpoint)*(V - (V_maxExponential - V_maxExponential +
                    volume_linearBreakpoint));
                end if;
              else
                // Using the variant from Pstras
                p =1/k*log((V_maxExponential_phi - V_us_phi)/(V_maxExponential_phi -
                  V))
                  "equation from Pstras 2017, 10.1093/imammb/dqw008, allegedly taken from Hardy & Collins 1982";
              end if;

            end compliance_nonLinearPstras;

            model compliance_tensionBased
                "Exponential tension-based compliance with linear tension muscle activation. Idea based on Carlson, Secomb 2015"
              extends Compliances.partialCompliance(
                V(start=V0, fixed=true),
                V0=l*Modelica.Constants.pi*(r_n)^2,
                V_min=Modelica.Constants.pi*(wall_L_min/Modelica.Constants.pi/2)^2*l);
                parameter Modelica.Units.SI.Radius r_n
                  "Nominal vessel inner radius";
                Modelica.Units.SI.Diameter D(start=2*r_n)
                  "Vessel actual (inner) diameter";

              Physiolibrary.Types.Fraction ll0( start = 1)=wall_L/wall_L0;
                Modelica.Units.SI.Length wall_L=Modelica.Constants.pi*D
                  "Circumferential wall length";
                parameter Modelica.Units.SI.Length wall_L0=Modelica.Constants.pi
                    *r_n*2 "Circumferential wall length at nominal";
                parameter Modelica.Units.SI.Length wall_L_min=wall_L0*gamma
                  "Minimal circumferential length";
              parameter Real gamma = settings.veins_gamma "fraction of nominal diameter to minimal zero-pressure diameter";
              parameter Real alpha = settings.veins_alpha "how many times the tension is larger for maximal activation from resting activation at nominal diameter";

              Physiolibrary.Types.Fraction A_inf = phi_ "Instant muscle activation coefficient";
              Physiolibrary.Types.Fraction A "Delayed muscle activation coefficient";
              parameter Physiolibrary.Types.Time tau=5   "Time constant of the smooth muscle activation";

              Real T_total = T_pass + T_active "Total vessel wall tension";
              Real T_pass = C_pass*(exp(T_pass_exp) - 1) "Passive part of the waqll tension";
              Real T_pass_exp= (wall_L - wall_L_min) /wall_L_min;
              Real T_active = A*T_act_max "Active part of the wall tension";
              Real T_act_max= C_act*(wall_L - wall_L_min)/wall_L_min "Tension at maximal muscle activation";

            // Calculation of primary parameters
              Real T_pass_base = C_pass*(exp((wall_L0 - wall_L_min) /wall_L_min) - 1) "passive tension at nominal l = l0";
              Real T_nominal = T_pass_base + C_act*phi0 "Total tension at nominal (l = l0) and resting activation";
              Real T_nominal_max=T_pass_base + C_act
                "Total tension at nominal and maximal activation";

              Real C_pass(start = 1) "Primary parameter for passive tension";
              Real C_act(start = 1) "Primary parameter for active tension";
              Real C_act_max=p0*r_n*4;
              Real C_act_guess=p0*r_n*(gamma*(alpha - 1)/(1 + phi_*(alpha - 1)))
                "Analytically expressed equation";
              Real C_pass_guess=(p0*r_n - C_act/4)/(exp((1 - gamma)/gamma) - 1);

            initial equation
              A = A_inf;
            equation
              assert(C_pass > 0, "C_pass is negative - change alpha or gamma parameters");

              V = l * Modelica.Constants.pi * (D/2)^2;
              der(A)*tau = A_inf - A;

              // identify the c_act
              alpha =T_nominal_max / T_pass_base;
              // identify the c_pass - the vessel must exhibit the given p0 at nominal diameter
              p0*r_n = T_nominal;

              // governing equation - tension to pressure
              p * D/2 = T_total;

            end compliance_tensionBased;

            model compliance_tensionDataFit
                "Fit of venous PV data from Moreno 1970 by Ben (ebrandal@umich.edu)"
              extends Compliances.partialCompliance(
                V0 = Modelica.Constants.pi*r_n^2*l,
                V_min = Modelica.Constants.pi*r_0^2*l,
                r(start = r_n, fixed = false));
              type Tension =   Real (final quantity = "Tension", final unit = "N/m");
              type Radius =   Modelica.Units.SI.Radius (
                                                      final nominal =   1e-6);
              type CircumferentialLength =   Modelica.Units.SI.Length (
                                                                     final nominal =   1e-3);
              // GENERAL INPUT PARAMETERS
            //  parameter Boolean useViscoElasticDelay = false;
            //   parameter Physiolibrary.Types.Fraction gamma =   0.5
            //     "Fraction of minimal collapsing diameter to nominal diameter";

              // TENSIONS
              Tension T = T_p + T_a;
              Tension T_p = a*f_L + b*g_L "Passive vessel wall tension";
              Tension T_a_max = c*h_L "Maximal active vessel wall tension";
              Tension T_a = A*T_a_max "Actual active vessel wall tension";
              Real f_L = L*(L - L_0)/L_0 "Tension function on circumferential wall length";
              Real g_L = L_0*(exp(d*(L - L_0)/L_0) - 1)
                "Tension function on circumferential wall length";
              Real h_L = (L - L_0)*exp(-e*((L - L_0)/L_0)^2)
                "Tension function on circumferential wall length";

              // TENSION PARAMETERS
            //  constant Real mmHg2Pa = 133.32;
              parameter Tension a = 108.5657 "identified by Matlab's cftool and fixed";
              parameter Tension b = 0.0026 "identified by Matlab's cftool and fixed";
              parameter Tension c = 3.1191e+03 "identified by Matlab's cftool and fixed";
              parameter Real d = 11.5 "identified by Matlab's cftool and fixed";
              parameter Real e = 1;

              // DIAMETERS AND LENGTHS
            //  Radius r(start = r_n, fixed = false);
              parameter Radius r_n "nominal vessel radius";
              parameter Radius r_0 = sqrt(V_0/(l*Modelica.Constants.pi)) "Zero-pressure vessel radius";
              CircumferentialLength L = r*(2*Modelica.Constants.pi)
                "Actual circumferential wall length";
              parameter CircumferentialLength L_n = r_n*(2*Modelica.Constants.pi)
                "nominal circumferential wall length";
              parameter CircumferentialLength L_0 = r_0*(2*Modelica.Constants.pi)
                "Zero-pressure circumferential wall length";
              parameter Physiolibrary.Types.Volume V_0 =   V_n*settings.veins_gamma "Zero-pressure volume";
              parameter Physiolibrary.Types.Volume V_n =   V0 "nominal aka initial volume";

              // ACTIVE REGULATION
              Physiolibrary.Types.Fraction A(start = A_n) "Activation fraction";
              Physiolibrary.Types.Fraction A_inf = min(max(0.01, (phi_ - settings.veins_phi_no)*phi_ns), 1) "Instantenaous activation fraction";

              parameter Physiolibrary.Types.Fraction A_n = min(max(0.001, (phi0 - settings.veins_phi_no)*phi_ns), 1) "nominal activation fraction";
              parameter Real phi_ns = 1/((1 - settings.veins_phi_no)) "slope of nonlinear phi adjustment. Default is symmetric around the center";
            //  parameter Real phi_no =  0.2 "Offset of nonlinear phi adjustment";
              // parameter Modelica.SIunits.Time tau = settings.veins_activation_tau;

              // INITIALIZATION - calculations of the nominal tensions and pressures
              Tension T_n = a*f_L_n + b*g_L_n + A_n*c*h_L_n;
              Real f_L_n = L_n*(L_n - L_0)/L_0 "Tension function on circumferential wall length";
              Real g_L_n = L_0*(exp(d*(L_n - L_0)/L_0) - 1)
                "Tension function on circumferential wall length";
              Real h_L_n = (L_n - L_0)*exp(-e*((L_n - L_0)/L_0)^2)
                "Tension function on circumferential wall length";

              Physiolibrary.Types.Pressure p_n "Nominal pressure";
              Physiolibrary.Types.Pressure p_nl "nonlinear presssure";
              Physiolibrary.Types.Pressure p_lin "linear pressure";

            //      Physiolibrary.Types.HydraulicElastance E_lin= der(p)/der(V) "Calculate linear parameters from nonlinear counterparts";
            //      Real E_lin_rel(unit = "Pa")=E_lin*V_0 "Linear elastsicity parameter";
            //      Real v0_lin_rel(unit = "1") "linear v0 parameter";

              // ASSUMPTIONS used for parameter identification
              //  parameter Tension T_n  =  p0 * r_n "Tension at nominal pressure of p0";
              //  parameter Physiolibrary.Types.Pressure P_dm  =  30*133.32 "Data point - maximal pressure";
              //  parameter Physiolibrary.Types.Volume V_dm  =  4*V0 "Volume data point, corresponding to P_dm";
              //   parameter Modelica.SIunits.Length L_dm  =  2*Modelica.Constants.pi*r_dm;
              //   parameter Modelica.SIunits.Radius r_dm  =  sqrt(V_dm/Modelica.Constants.pi/l);
              //   parameter Tension T_dm  =  P_dm * r_dm;
              //   parameter Physiolibrary.Types.Fraction alpha  =  2.5;

              //   function f
              //     input Modelica.SIunits.Length L_i;
              //     input Modelica.SIunits.Length L0;
              //     output Tension T;
              //   algorithm
              //     T : =  L_i*(L_i - L0)/ L0^2;
              //   end f;
              //
              //   function g
              //     input Modelica.SIunits.Length L_i;
              //     input Modelica.SIunits.Length L0;
              //     output Tension T;
              //   algorithm
              //     T : =  exp(c*(L_i-L0)/L0) - 1;
              //   end g;
              //
              //   function h
              //     input Modelica.SIunits.Length L_i;
              //     input Modelica.SIunits.Length L0;
              //     output Tension T;
              //   algorithm
              //     T : =  (L_i-L0) / L0;
              //   end h;

              //   Real a = (T_n/(1 + A_nominal*(alpha - 1)) - b*g(L_n, L_0))/f(L_n, L_0);
              //   Real b = (T_dm - T_n/(1 + A_nominal*(alpha - 1))*f(L_dm, L_0)/f(L_n, L_0))/(g(
              //       L_dm, L_0) - g(L_n, L_0)*f(L_dm, L_0)/f(L_n, L_0));
              //   Real d = T_n*(alpha - 1)/(h(L_n, L_0)*(1 + A_nominal*(alpha - 1)));
              //  Real helper  =  T_n/(1+ A_nominal*(alpha -1));
              //  Real helper2  =  f(L_dm)/f(L_n);
            initial equation
            //     if tau > 0 then
            //       // comment out when initializing for given state already
            //       A = A_n;
            //     end if;
            equation

              // V =p/max(1e-6, E_lin_rel)*V_0 + v0_lin_rel*V_0;

             // V = p_lin/settings.veins_linearE_rel*V_0 + settings.veins_linearV0_rel*V_0;

             if p_lin > 0 then
              V = p_lin*(V_n - V_0)/(p_n) + V_0;
             else
               V = p_lin*(V_n - V_0)/(p_n)*1e-3 + V_0;
             end if;

               if settings.veins_UseNonLinearVeins then
                p = p_nl;
                    p_nl * r  =  T;
               else
                 p = p_lin;
                     p_nl =  0;

               end if;

              if settings.veins_delayed_activation then

                if A_inf >= A then
                  // constricting
                  der(A)*settings.veins_activation_tau  = A_inf  - A;
                else
                  // relaxing
                  der(A)*settings.veins_relaxation_tau  = A_inf  - A;
                end if;

              else
                A_inf = A;
              end if;

              // VOLUME equation - already contained in base class
              // Modelica.Constants.pi*r^2*l  =  V;

              // nominal pressure-tension equatino
              p_n*r_n = T_n;

            end compliance_tensionDataFit;
          end Compliances;

        end Auxiliary;

        package arterialTree
          model pp_BC_type
            // extends
              //  ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Auxiliary.PartialSystemicElement;
            parameter Real mu(unit = "J.s.m-3") = 0.004;
            parameter Real rho(unit = "J.s.m-3") = 1050;
            input Real E(unit = "Pa");
            Real E_m(unit = "Pa");
            parameter Real l(unit = "m");
            Real length(unit = "m");
            Real h(unit = "m");
            Real thickness(unit = "m");
            parameter Real r(unit = "m");
            Real radius(unit = "m");
            Real I(unit = "J.s2.m-6");
            Real C(unit = "m6.J-1");
            Real R(unit = "J.s.m-6");
            Real R_v(unit = "J.s.m-6");
            parameter Real R_T(unit = "J.s.m-6");
            Real R_T_2(unit = "J.s.m-6");
            parameter Real C_T(unit = "m6.J-1");
            parameter Real a(unit = "1") = 0.2802;
            parameter Real b(unit = "m-1") = -505.3;
            parameter Real c(unit = "1") = 0.1324;
            parameter Real d(unit = "m-1") = -11.14;
          //   input Real u_in(unit = "Pa");
          //   Real v_in(unit="m3.s-1", start=0.0);
            Real u(unit = "Pa");
            Real u_C(unit = "Pa", start = 0.0);
            Real u_C_T(unit = "Pa", start = 0.0);
            Real v_T(unit = "m3.s-1", start = 1e-7);
            Real v_T_2(unit = "m3.s-1", start = 1e-7);
            input Real p_out(unit = "Pa");
            output Real v_out(unit = "m3.s-1") = v_T;
            parameter Real ups = 1e-6;
            outer parameter Real periferyModifier = 1.3;
            Physiolibrary.Types.Pressure u1, u2, u3, u4;
            Physiolibrary.Types.VolumeFlowRate v_c, v3;

              parameter Auxiliary.simplificationLevel simplification=Auxiliary.simplificationLevel.simplified;
            Interfaces.HydraulicPort_a_leveled port_a
              annotation (Placement(transformation(extent={{-110,-10},{-90,10}})));
              Physiolibrary.Types.Volume volume;
              Physiolibrary.Types.VolumeFlowRate q_in=port_a.q;
              Physiolibrary.Types.Pressure p_in = port_a.pressure;
          equation
            volume = u_C/C + u_C_T/C_T;

                h = r*(a*exp(b*r)+c*exp(d*r));
                I = rho*l/(Modelica.Constants.pi*(r)^2);
                C = 2*Modelica.Constants.pi*(r^3) *l/(E*h);
                R = 8*mu*l/(Modelica.Constants.pi*(r^4));
                R_v = 0.01/C;
                R_T_2 = 4*R_T;
                length = l;
                E_m = E;
                radius = r;
                thickness = h;

              if simplification == Auxiliary.simplificationLevel.original then
                der(q_in) = (p_in-u-R*q_in)/I;
                der(u_C) = (q_in-v_T)/C;
                u = u_C+R_v*(q_in-v_T);
                der(v_T) = (u-p_out-u_C_T-1.3*R_T*v_T)/(I*1e-6);
                der(u_C_T) = (v_T-v_T_2)/C_T;
                der(v_T_2) = (u_C_T-1.3*R_T_2*v_T_2)/(I*1e-6);
                u1 =p_in -R*q_in;
                v_c =q_in  - v_T;
                u2 = u - periferyModifier*R_T*v_T;
                v3 = (v_T-u_C_T/(periferyModifier*R_T_2));
                u3 =p_out +u_C_T;
                u4 = u3 - periferyModifier*R_T_2*v_T_2;
                //v_T_2 = u_C_T/(periferyModifier*R_T_2);
              elseif simplification == Auxiliary.simplificationLevel.detailed then
                der(q_in) = (u1 - u)/I;
                R*q_in =p_in  - u1 "u1 = u_in - R*v_in";
                u = u_C + R_v*(v_c);
                der(u_C) =(v_c)/C;
                v_c =q_in  - v_T;
                u2 = u - periferyModifier*R_T*v_T;
                der(v_T) = (u2-u3)/(I*ups);
                u3 =p_out +u_C_T;
                v3 = v_T-v_T_2;
                der(u_C_T) = (v3)/C_T;
                u4 = u3 - periferyModifier*R_T_2*v_T_2;
                der(v_T_2) = (p_out-u4)/(I*ups);
              elseif simplification == Auxiliary.simplificationLevel.simplified then
                // simplified model acc to Soroush 2019/03 commit
                der(q_in) = (p_in-u-R*q_in)/I;
                der(u_C) = (q_in-v_T)/C;
                u = u_C+R_v*(q_in-v_T);
                der(v_T) = (u-p_out-u_C_T-periferyModifier*R_T*v_T)/(I*ups);
                der(u_C_T) = (v_T-u_C_T/(periferyModifier*R_T_2))/C_T;
                u1 =p_in -R*q_in;
                v_c =q_in  - v_T;
                u2 = u - periferyModifier*R_T*v_T;
                v3 = (v_T-u_C_T/(periferyModifier*R_T_2));
                u3 =p_out -u_C_T;
                u4 = u3 - periferyModifier*R_T_2*v_T_2;
                v_T_2 = u_C_T/(periferyModifier*R_T_2);
              elseif simplification == Auxiliary.simplificationLevel.noL3 then
                der(q_in) = (u1 - u)/I;
                R*q_in =p_in  - u1 "u1 = u_in - R*v_in";
                u = u_C + R_v*(v_c);
                der(u_C) =(v_c)/C;
                v_c =q_in  - v_T;
                u2 = u - periferyModifier*R_T*v_T;
                //u2=u3;
                der(v_T) = (u2-u3)/(I*ups);
                u3 =p_out +u_C_T;
                v3 = v_T-v_T_2;
                der(u_C_T) = (v3)/C_T;
                u4 = u3 - periferyModifier*R_T_2*v_T_2;
                u4 =p_out;
          //      der(v_T_2) = (u_out-u4)/(I*ups);
            end if;

            annotation (Icon(graphics={
                  Rectangle(
                    extent={{80,20},{100,-20}},
                    lineThickness=0.5,
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Line(
                    points={{-100,0},{-60,0}},
                    color={28,108,200},
                    arrow={Arrow.None,Arrow.Filled}),
                  Line(
                    points={{60,0},{100,0}},
                    color={28,108,200},
                    arrow={Arrow.None,Arrow.Filled})}), Diagram(graphics={
                  Rectangle(extent={{-74,6},{-64,10}}, lineColor={28,108,200}),
                  Line(
                    points={{-58,8},{-56,12},{-54,8}},
                    color={28,108,200},
                    smooth=Smooth.Bezier),
                  Line(
                    points={{-54,8},{-52,12},{-50,8}},
                    color={28,108,200},
                    smooth=Smooth.Bezier),
                  Line(
                    points={{-50,8},{-48,12},{-46,8}},
                    color={28,108,200},
                    smooth=Smooth.Bezier),
                  Line(
                    points={{-44,-10},{-36,-10}},
                    color={28,108,200},
                    smooth=Smooth.Bezier),
                  Line(
                    points={{-44,-12},{-36,-12}},
                    color={28,108,200},
                    smooth=Smooth.Bezier),
                  Line(
                    points={{-44,-18},{-36,-18}},
                    color={28,108,200},
                    smooth=Smooth.Bezier,
                    thickness=1),
                  Rectangle(extent={{-34,6},{-24,10}}, lineColor={28,108,200}),
                  Line(
                    points={{-18,8},{-16,12},{-14,8}},
                    color={28,108,200},
                    smooth=Smooth.Bezier),
                  Line(
                    points={{-14,8},{-12,12},{-10,8}},
                    color={28,108,200},
                    smooth=Smooth.Bezier),
                  Line(
                    points={{-10,8},{-8,12},{-6,8}},
                    color={28,108,200},
                    smooth=Smooth.Bezier),
                  Rectangle(
                    extent={{-5,-2},{5,2}},
                    lineColor={28,108,200},
                    origin={-40,-1},
                    rotation=90),
                  Rectangle(extent={{6,10},{16,14}}, lineColor={28,108,200}),
                  Line(
                    points={{22,12},{24,16},{26,12}},
                    color={28,108,200},
                    smooth=Smooth.Bezier),
                  Line(
                    points={{26,12},{28,16},{30,12}},
                    color={28,108,200},
                    smooth=Smooth.Bezier),
                  Line(
                    points={{30,12},{32,16},{34,12}},
                    color={28,108,200},
                    smooth=Smooth.Bezier),
                  Line(
                    points={{-4,-1},{4,-1}},
                    color={28,108,200},
                    smooth=Smooth.Bezier,
                    origin={19,4},
                    rotation=90),
                  Line(
                    points={{-4,1},{4,1}},
                    color={28,108,200},
                    smooth=Smooth.Bezier,
                    origin={23,4},
                    rotation=90),
                  Line(points={{-80,8},{-74,8}}, color={28,108,200}),
                  Line(points={{-64,8},{-58,8}}, color={28,108,200}),
                  Line(points={{-46,8},{-40,8}}, color={28,108,200}),
                  Line(points={{-40,8},{-34,8}}, color={28,108,200}),
                  Line(
                    points={{-2,1},{2,1}},
                    color={28,108,200},
                    origin={-39,6},
                    rotation=90),
                  Line(
                    points={{-2,1},{2,1}},
                    color={28,108,200},
                    origin={-39,-8},
                    rotation=90),
                  Line(
                    points={{-4,1},{2,1}},
                    color={28,108,200},
                    origin={-39,-14},
                    rotation=90),
                  Line(points={{-24,8},{-18,8}}, color={28,108,200}),
                  Line(points={{-6,8},{0,8}}, color={28,108,200}),
                  Line(points={{0,12},{6,12}}, color={28,108,200}),
                  Line(points={{16,12},{22,12}}, color={28,108,200}),
                  Line(points={{34,12},{40,12}}, color={28,108,200}),
                  Line(points={{0,4},{20,4}}, color={28,108,200}),
                  Line(points={{22,4},{40,4}}, color={28,108,200}),
                  Line(
                    points={{-2,1},{2,1}},
                    color={28,108,200},
                    origin={1,10},
                    rotation=90),
                  Line(
                    points={{-2,1},{2,1}},
                    color={28,108,200},
                    origin={1,6},
                    rotation=90),
                  Line(
                    points={{-2,1},{2,1}},
                    color={28,108,200},
                    origin={41,10},
                    rotation=90),
                  Line(
                    points={{-2,1},{2,1}},
                    color={28,108,200},
                    origin={41,6},
                    rotation=90),
                  Line(points={{40,8},{46,8}}, color={28,108,200}),
                  Text(
                    extent={{-84,10},{-74,14}},
                    lineColor={0,0,0},
                    textString="u_in"),
                  Text(
                    extent={{-66,10},{-56,14}},
                    lineColor={0,0,0},
                    textString="u1"),
                  Text(
                    extent={{-44,10},{-34,14}},
                    lineColor={0,0,0},
                    textString="u"),
                  Text(
                    extent={{-26,10},{-16,14}},
                    lineColor={0,0,0},
                    textString="u2"),
                  Text(
                    extent={{-8,10},{2,14}},
                    lineColor={0,0,0},
                    textString="u3"),
                  Text(
                    extent={{14,14},{24,18}},
                    lineColor={0,0,0},
                    textString="u4"),
                  Text(
                    extent={{16,-6},{26,-2}},
                    lineColor={0,0,0},
                    textString="u_C_T"),
                  Text(
                    extent={{40,10},{50,14}},
                    lineColor={0,0,0},
                    textString="u_out"),
                  Text(
                    extent={{-18,2},{-8,6}},
                    lineColor={28,108,200},
                    textString="L2"),
                  Text(
                    extent={{24,8},{34,12}},
                    lineColor={28,108,200},
                    textString="L3"),
                  Text(
                    extent={{-74,10},{-64,18}},
                    lineColor={28,108,200},
                    textString="R"),
                  Text(
                    extent={{-38,-4},{-28,4}},
                    lineColor={28,108,200},
                    textString="R_v"),
                  Text(
                    extent={{-34,12},{-24,20}},
                    lineColor={28,108,200},
                    textString="R_T"),
                  Text(
                    extent={{6,18},{16,26}},
                    lineColor={28,108,200},
                    textString="R_T_2")}));
          end pp_BC_type;

          model arterial_terminator
             extends
                ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Auxiliary.PartialSystemicElement(
                  final terminator=true);
             // Input parameters
            parameter Real E(unit = "Pa");
            parameter Real l(unit = "m");
            parameter Real r(unit = "m") "Vascular radius";
            parameter Real R_T(unit = "J.s.m-6");
            parameter Real C_T(unit = "m6.J-1");

           // parameter constants
            parameter Real mu(unit = "J.s.m-3") = 0.004;
            parameter Real rho(unit = "J.s.m-3") = 1050;
            parameter Real a(unit = "1") = 0.2802;
            parameter Real b(unit = "m-1") = -505.3;
            parameter Real c(unit = "1") = 0.1324;
            parameter Real d(unit = "m-1") = -11.14;

           // Calculated parameters
            parameter Real h(unit = "m") = r*(a*exp(b*r)+c*exp(d*r)) "Wall thickness";

            parameter Real I(unit = "J.s2.m-6")= rho*l/(Modelica.Constants.pi*(r)^2);
            parameter Real C(unit = "m6.J-1")= 2*Modelica.Constants.pi*(r^3) *l/(E*h);
            parameter Real R(unit = "J.s.m-6")= 8*mu*l/(Modelica.Constants.pi*(r^4));
            parameter Real R_v(unit = "J.s.m-6")= 0.01/C;

          //   input Real u_in(unit = "Pa");
          //   Real v_in(unit="m3.s-1", start=0.0);
          //   Real u(unit = "Pa");
          //   Real u_C(unit = "Pa", start = 0.0);
          //   Real u_C_T(unit = "Pa", start = 0.0);
          //   Real v_T(unit = "m3.s-1", start = 1e-7);
          //   Real v_T_2(unit = "m3.s-1", start = 1e-7);
            input Real u_out(unit = "Pa");
            Physiolibrary.Types.VolumeFlowRate v_T = pq_terminator_p.v;
          //   outer parameter Real periferyModifier = 1.3;
          //   Physiolibrary.Types.Pressure u1, u2, u3, u4;
          //   Physiolibrary.Types.VolumeFlowRate v_c, v3;
            parameter Physiolibrary.Types.HydraulicResistance RTA "Resistance of arterioles RTA_%name";
            parameter Physiolibrary.Types.HydraulicResistance RTV "Resistance of venules RTV_%name";
            parameter Physiolibrary.Types.HydraulicResistance RTCT = 1000 "Resistance of vascular wall";
            parameter Physiolibrary.Types.HydraulicCompliance CT "Tissue compliance CT_%name";

            Physiolibrary.Hydraulic.Components.Resistor resistor_R(Resistance=R)
              annotation (Placement(transformation(extent={{-90,-10},{-70,10}})));
            Physiolibrary.Hydraulic.Components.Inertia inertia_I(
              Simulation=Physiolibrary.Types.SimulationType.NoInit,
              volumeFlow_start(displayUnit="ml/min") = 1.6666666666667e-6,
              I=I) annotation (Placement(transformation(extent={{-60,-10},{-40,10}})));
            Physiolibrary.Hydraulic.Components.Resistor resistor_R_v(Resistance=R_v)
              annotation (Placement(transformation(
                  extent={{-10,-10},{10,10}},
                  rotation=270,
                  origin={-34,-20})));
            Physiolibrary.Hydraulic.Components.ElasticVessel elasticVessel_C(volume_start=
                 C*100*133,                                                  Compliance=C)
              annotation (Placement(transformation(
                  extent={{-10,-10},{10,10}},
                  rotation=0,
                  origin={-34,-40})));
            Physiolibrary.Hydraulic.Components.Resistor resistor_RTA(useConductanceInput=true,
                  Resistance(displayUnit="(Pa.s)/m3") = 1)
              annotation (Placement(transformation(extent={{0,-10},{20,10}})));
            Physiolibrary.Hydraulic.Components.ElasticVessel elasticVessel_CT(
                volume_start=CT*Tissue_pressure,                              Compliance=
                  CT*ctm)
              annotation (Placement(transformation(extent={{20,-50},{40,-30}})));
            Physiolibrary.Hydraulic.Components.Resistor resistor_RTV(Resistance=RTV*rtvm)
              annotation (Placement(transformation(extent={{54,-10},{74,10}})));
              ADAN_main.Components.Interfaces.Pq_terminator_p pq_terminator_p(u=p_out)
                          annotation (Placement(transformation(extent={{100,-10},
                        {80,10}})));
            Physiolibrary.Types.RealIO.PressureOutput u
              annotation (Placement(transformation(extent={{-4,10},{16,30}})));
            Physiolibrary.Types.RealIO.PressureOutput u3
              annotation (Placement(transformation(extent={{56,10},{76,30}})));
            Physiolibrary.Hydraulic.Sensors.PressureMeasure pressureMeasure_u
              annotation (Placement(transformation(extent={{-40,2},{-20,22}})));
            Physiolibrary.Hydraulic.Sensors.PressureMeasure pressureMeasure_u1
              annotation (Placement(transformation(extent={{24,4},{44,24}})));
            outer parameter Physiolibrary.Types.Fraction rtvm = 1 "modifier for Resistance of venules RTV_%name";
            outer parameter Physiolibrary.Types.Fraction ctm =  1 "modifier for Tissue compliance CT_%name";

            parameter Physiolibrary.Types.Pressure Tissue_pressure = 20*133;
            AdjustableConductanceRtam adjustableConductanceRtam(RTA=RTA)
                                                                annotation (Placement(
                  transformation(rotation=0, extent={{-14,54},{-6,62}})));
          equation
            volume =elasticVessel_C.volume + elasticVessel_CT.volume;

          //       pq_terminator_p.u = u_out;
          //       pq_terminator_p.v = v_out;

          //       der(v_in) = (u1 - u)/I;
          //       R*v_in = u_in - u1 "u1 = u_in - R*v_in";
          //       u = u_C + R_v*(v_c);
          //       der(u_C) =(v_c)/C;
          //       v_c = v_in - v_T;
          //       u2 = u - periferyModifier*R_T*v_T;
          //       der(v_T) = (u2-u3)/(I*ups);
          //       u3 = u_out+u_C_T;
          //       v3 = v_T-v_T_2;
          //       der(u_C_T) = (v3)/C_T;
          //       u4 = u3 - periferyModifier*R_T_2*v_T_2;
          //       der(v_T_2) = (u_out-u4)/(I*ups);

            connect(resistor_R.q_out, inertia_I.q_in) annotation (Line(
                points={{-70,0},{-60,0}},
                color={0,0,0},
                thickness=1));
            connect(port_a, resistor_R.q_in) annotation (Line(
                points={{-100,0},{-90,0}},
                color={0,0,0},
                thickness=1));
            connect(inertia_I.q_out, resistor_R_v.q_in) annotation (Line(
                points={{-40,0},{-34,0},{-34,-10}},
                color={0,0,0},
                thickness=1));
            connect(resistor_RTV.q_out, pq_terminator_p.port_a) annotation (Line(
                points={{74,0},{80,0}},
                color={0,0,0},
                thickness=1));
            connect(resistor_RTA.q_out, resistor_RTV.q_in) annotation (Line(
                points={{20,0},{54,0}},
                color={0,0,0},
                thickness=1));
            connect(resistor_R_v.q_out, elasticVessel_C.q_in) annotation (Line(
                points={{-34,-30},{-34,-40}},
                color={0,0,0},
                thickness=1));
            connect(inertia_I.q_out, resistor_RTA.q_in) annotation (Line(
                points={{-40,0},{0,0}},
                color={0,0,0},
                thickness=1));
            connect(inertia_I.q_out, pressureMeasure_u.q_in) annotation (Line(
                points={{-40,0},{-34,0},{-34,6}},
                color={0,0,0},
                thickness=1));
            connect(pressureMeasure_u.pressure, u) annotation (Line(points={{-24,8},{-12,8},
                    {-12,20},{6,20}}, color={0,0,127}));
            connect(pressureMeasure_u1.q_in, resistor_RTA.q_out) annotation (Line(
                points={{30,8},{30,0},{20,0}},
                color={0,0,0},
                thickness=1));
            connect(pressureMeasure_u1.pressure, u3) annotation (Line(points={{40,10},{48,
                    10},{48,20},{66,20}}, color={0,0,127}));
              connect(elasticVessel_CT.q_in, resistor_RTV.q_in) annotation (Line(
                  points={{30,-40},{30,0},{54,0}},
                  color={0,0,0},
                  thickness=1));
            connect(adjustableConductanceRtam.y, resistor_RTA.cond)
              annotation (Line(points={{-4.8,54},{10,54},{10,6}}, color={0,0,127}));
            annotation (Icon(graphics={
                  Rectangle(
                    extent={{80,20},{100,-20}},
                    lineThickness=0.5,
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Line(
                    points={{-100,0},{-60,0}},
                    color={28,108,200},
                    arrow={Arrow.None,Arrow.Filled}),
                  Line(
                    points={{60,0},{100,0}},
                    color={28,108,200},
                    arrow={Arrow.None,Arrow.Filled})}), Diagram(graphics={
                  Rectangle(extent={{-4,12},{102,-58}}, lineColor={28,108,200}), Text(
                    extent={{52,-58},{102,-40}},
                    lineColor={28,108,200},
                    textString="tissues")}));
          end arterial_terminator;

          model AdjustableConductanceRtam
            outer Physiolibrary.Types.Fraction rtam = 1 "modifier for Resistance of arterioles RTA_%name";
            parameter Physiolibrary.Types.HydraulicResistance RTA "Resistance of arterioles RTA_%name";

            Physiolibrary.Types.RealIO.HydraulicConductanceOutput y = 1/(RTA*rtam)
              annotation (Placement(transformation(extent={{16,-30},{36,-10}})));
            annotation (Diagram(coordinateSystem(extent={{-20,-20},{20,20}})), Icon(
                  coordinateSystem(extent={{-20,-20},{20,20}})));
          end AdjustableConductanceRtam;
        end arterialTree;

        package Obsolete
          model vp_vein_tDF "Extension of datafit"
              extends
                ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Vein;
          end vp_vein_tDF;

          model systemic_tissue
            extends
                ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.systemic_tissue_base;
          equation

              u_out_hs =p_out;
              u_in_hs =p_in;

            annotation (Icon(graphics={
                  Rectangle(
                    extent={{-20,20},{20,0}},
                    lineThickness=0.5,
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None)}));
          end systemic_tissue;

          partial model systemic_tissue_base
            extends
                ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Auxiliary.PartialSystemicElement(
                  UseInertance=false, volume(start=V_n, fixed=not settings.initByPressure));

            parameter Physiolibrary.Types.HydraulicInertance I;
            parameter Physiolibrary.Types.HydraulicCompliance C;
            parameter Physiolibrary.Types.HydraulicResistance Ra "Arteriole resistance";
            parameter Physiolibrary.Types.HydraulicResistance Rvis=0.01/C
              "Elastic viscosity using Voigt model of in-series resistance";
            parameter Physiolibrary.Types.HydraulicInertance I_e=I*1e-6;
            parameter Physiolibrary.Types.HydraulicResistance Rv "venule resistance";

            parameter Physiolibrary.Types.Volume zpv=0 "Zero-pressure volume";
              parameter Physiolibrary.Types.Pressure nominal_pressure=settings.tissues_P_nom;
            Physiolibrary.Types.Pressure u_C(
              start=nominal_pressure,
              nominal=1000,
              fixed=settings.initByPressure);

            Physiolibrary.Types.Pressure u(nominal=1000);

            Physiolibrary.Types.Pressure u_in_hs
              "Output pressure including the hydrostatic pressure";
            Physiolibrary.Types.Pressure u_out_hs
              "Output pressure including the hydrostatic pressure";

            // Physiolibrary.Types.HydraulicResistancse Ra_phi_inf = Ra*exp((phi-phi0)*settings.Ra_factor)/exp(exercise*settings.exercise_factor) "Arterioles resistance dependent on phi";
              Physiolibrary.Types.HydraulicResistance Ra_phi_inf=Ra*(1 + (phi
                   - settings.phi0)*settings.tissues_eta_Ra)/(1 + exercise*
                  settings.tissues_chi_Ra)
                "Arterioles resistance dependent on phi and exercise";
            Physiolibrary.Types.HydraulicResistance Ra_phi(start=Ra, fixed=false)
              "Delayed arterioles resistance dependent on phi";
            //  Physiolibrary.Types.HydraulicResistance Rv_phi = Rv*exp((phi-phi0)*settings.Rv_factor) "Arterioles resistance dependent on phi";
              Physiolibrary.Types.HydraulicResistance Rv_phi=Rv*(1 + (phi -
                  settings.phi0)*settings.tissues_eta_Rv)/(1 + exercise*
                  settings.tissues_chi_Ra)
                "Venules resistance dependent on phi and exercise";

            parameter Real k=C/(V_max - V_n)
              "For Pstras non-linear PV characteristics. For gamma = 0.0003750308";
            parameter Physiolibrary.Types.Volume V_max(nominal=1e-9) = V_n + (V_n - zpv)*
              settings.tissues_gamma
              " V_n is between zpv and V_max, parameterized by gamma. 1 means its in the center. For Pstras non-linear PV characteristics";
            parameter Physiolibrary.Types.Volume V_n=nominal_pressure*C + zpv
              "nominal volume calculated from the linear relationship. nominal volume for non-linear compliance parametrization";
            parameter Physiolibrary.Types.Volume V_us=V_max - (V_max - V_n)*exp(
                nominal_pressure*k) "nonlinear Un-Stressed volume";
            parameter Physiolibrary.Types.Volume volume_linearBreakpoint=V_max*(1 -
                settings.tissues_V_max_breakPoint_Frac)
              "Maximal volume for nonlinear function, usually set as a fraction of V_max.";

            Real k_phi=C/(V_max - V_n_phi) "For Pstras non-linear PV characteristics";
            Physiolibrary.Types.Volume V_max_phi=V_max - (V_us - V_us_phi) "From Pstras";
              Physiolibrary.Types.Volume V_n_phi=V_n/(1 + (phi - settings.phi0)
                  *settings.tissues_eta_C)*(1 + (phi - settings.phi0)*exercise*
                  settings.tissues_chi_C) "Linearly dependent on phi";
              Physiolibrary.Types.Volume V_us_phi=V_us/(1 + settings.tissues_eta_C
                  *(phi - settings.phi0)) "Linearly dependent on phi";

            //   Physiolibrary.Types.Fraction phi_shift=(1 + settings.tissues_compliance_phi_shift
            //       *(phi - phi0)) "Nonlinear compliance unstressed volume affected by phi";

            parameter Boolean UseMuscleVenousPump=false;
              parameter Physiolibrary.Types.VolumeFlowRate nominalFlow=((
                  settings.tissues_P_nom - settings.tissues_Pv_nom)/Rv)
                "Backcalculated nominal flow";
              Physiolibrary.Types.VolumeFlowRate q_mc=if UseMuscleVenousPump
                   then nominalFlow*exercise*settings.veins_chi_pump else 0
                "Flow given by muscle contractions during exercise is proportional to Rv";

          Physiolibrary.Types.HydraulicCompliance C_calculated = volume/(u_C - 1/k_phi*log((V_max - V_us)/(V_max - volume_linearBreakpoint)));
          initial equation
            //  volume = nominal_pressure*C + zpv;
          equation
            assert(Rv_phi > 0, "The exercise_factor too high, driving the venous resistance negative!");

              if settings.tissues_tau_R == 0 then
              Ra_phi = Ra_phi_inf;
            else
                der(Ra_phi)*settings.tissues_tau_R = Ra_phi_inf - Ra_phi;
            end if;

            if UseInertance then
              der(q_in) = (u_in_hs - u - Ra_phi*q_in)/I;
              der(q_out) = (u - u_out_hs - Rv_phi*(q_out - q_mc))/I_e;
            else
              0 = u_in_hs - u - Ra_phi*(q_in - q_mc);
              0 = (u - u_out_hs - Rv_phi*(q_out - q_mc));
              // (u - u_out_hs)/Rv + q_mc = v_out;
            end if;

            der(volume) = (q_in -q_out);
            if UseOuter_thoracic_pressure then
              u = u_C + Rvis*(q_in -q_out)  + thoracic_pressure*thoracic_pressure_ratio;
            else
              u = u_C + Rvis*(q_in -q_out);
            end if;

            if not settings.UseNonLinear_TissuesCompliance then
              volume = (u_C)*C + zpv;
            elseif settings.tissues_UseStraighteningReaction2Phi then

              // my expression based on straightening
              //   if noEvent(volume < volume_linearBreakpoint) then
              if noEvent(volume < volume_linearBreakpoint) then
                u_C = 1/k_phi*log((V_max - V_us)/(V_max - volume))
                  "equation from Pstras 2017, 10.1093/imammb/dqw008, allegedly taken from Hardy & Collins 1982";
              else
                // linear steepness after break
                // linearized by derivation of original equation, slope = 1/k_phi/(1e-6), V_max - volume = 1e-6:, u_C at point: 1/k_phi*log((V_max - V_us)/(1e-6))
                u_C - 1/k_phi*log((V_max - V_us)/(V_max - volume_linearBreakpoint)) = 1/
                  k_phi/(V_max - volume_linearBreakpoint)*(volume - (V_max - V_max +
                  volume_linearBreakpoint));
              end if;

            else
              // from Pstras
              //        u_C = 1/k*log((V_max - V_us)/(V_max - volume)) "equation from Pstras 2017, 10.1093/imammb/dqw008, allegedly taken from Hardy & Collins 1982";
              u_C = 1/k*log((V_max_phi - V_us_phi)/(V_max_phi - volume))
                "equation from Pstras 2017, 10.1093/imammb/dqw008, allegedly taken from Hardy & Collins 1982";

            end if;

            annotation (
              Icon(graphics={
                  Polygon(
                    points={{-20,-26},{-2,2},{-18,2},{12,30},{8,30},{24,36},{30,30},{26,30},
                        {6,10},{18,10},{-6,-24},{-20,-26}},
                    fillColor={0,0,0},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None,
                    visible=DynamicSelect(false, UseExercise)),
                  Rectangle(
                    extent={{-20,20},{20,0}},
                    lineThickness=0.5,
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Text(
                    extent={{-40,20},{40,40}},
                    lineColor={0,0,0},
                    textString="%exercise_ratio%",
                    visible=DynamicSelect(false, UseExercise and not exercise_ratio == 1))}),
              Documentation(info="<html>
<p>When <span style=\"font-family: Courier New;\">UseNonLinearCompliance</span> is true, then this formula is applied (from <span style=\"font-family: Courier New; color: #006400;\">Pstras, Math Med Biol 2017,&nbsp;10.1093/imammb/dqw008):</span></p>
<p><img src=\"modelica://ADAN_main/Resources/tissuePV.png\"/></p>
<p>Otherwise, the linear (green) relation is used instead.</p>
<p><br>Unlike the original Pstras publication, when the VMax is set as Vn + 500ml for veins, resp. Vn + 100 ml for Vena Cava, the Vmax difference here is delta-times the ZPV-Vn:</p>
<p><img src=\"modelica://ADAN_main/Resources/Images/equations/equation-sfHOF1Pk.png\" alt=\"Vmax = Vn + delta*(Vn-ZPV)\"/> </p>
<p>and thus shares the linear parametrization.</p>
</html>"),    Diagram(graphics={
                  Ellipse(
                    extent={{-82,2},{-78,-2}},
                    fillColor={28,108,200},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Ellipse(
                    extent={{78,2},{82,-2}},
                    lineColor={28,108,200},
                    lineThickness=0.5),
                  Line(points={{-80,0},{80,0}}, color={28,108,200}),
                  Line(
                    points={{14,-3.68679e-16},{46,4.04254e-15}},
                    color={28,108,200},
                    origin={0,-14},
                    rotation=90),
                  Ellipse(extent={{-14,50},{14,22}}, lineColor={28,108,200}),
                  Text(
                    extent={{-14,30},{14,42}},
                    lineColor={28,108,200},
                    textString="C"),
                  Rectangle(
                    extent={{-64,6},{-36,-6}},
                    lineColor={28,108,200},
                    fillColor={255,255,255},
                    fillPattern=FillPattern.Solid),
                  Text(
                    extent={{-66,-6},{-38,6}},
                    lineColor={28,108,200},
                    textString="Ra"),
                  Rectangle(
                    extent={{36,6},{64,-6}},
                    lineColor={28,108,200},
                    fillColor={255,255,255},
                    fillPattern=FillPattern.Solid),
                  Text(
                    extent={{34,-6},{62,6}},
                    lineColor={28,108,200},
                    textString="Rv")}));
          end systemic_tissue_base;

          model pv_artery_leveled
              extends
                ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery(
                  redeclare Interfaces.HydraulicPort_a_leveled port_a,
                  redeclare Interfaces.HydraulicPort_b_leveled port_b);
              Modelica.Units.SI.Position hydrostatic_level=(port_a.position +
                  height/2);
          //   Physiolibrary.Types.Pressure hydrostatic_pressure = hydrostatic_level*settings.blood_rho*Modelica.Constants.g_n "Total hydrostatic pressure at given point (synthetic)";
          //   Physiolibrary.Types.Pressure hydraulic_pressure = u_C + hydrostatic_pressure "Vessel pressure without the hydrostatic part (synthetic)";
          equation
            port_a.position + height = port_b.position;
          end pv_artery_leveled;

          model vp_vein_leveled
              extends
                ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Vein(
                  redeclare Interfaces.HydraulicPort_a_leveled port_a,
                  redeclare Interfaces.HydraulicPort_b_leveled port_b);
              Modelica.Units.SI.Position hydrostatic_level=(port_a.position +
                  height/2);
          //   Physiolibrary.Types.Pressure hydrostatic_pressure = hydrostatic_level*settings.blood_rho*Modelica.Constants.g_n "Total hydrostatic pressure at given point (synthetic)";
          //   Physiolibrary.Types.Pressure hydraulic_pressure = p - hydrostatic_pressure "Vessel pressure without the hydrostatic part (synthetic)";

          equation
            port_a.position + height = port_b.position;

          end vp_vein_leveled;

          model vp_vein_linear_leveled
              extends
                ADAN_main.Components.Subsystems.Systemic.Vessel_modules.vp_vein_linear(
                  redeclare Interfaces.HydraulicPort_a_leveled port_a,
                  redeclare Interfaces.HydraulicPort_b_leveled port_b);
              Modelica.Units.SI.Position hydrostatic_level=(port_a.position +
                  height/2);
          //   Physiolibrary.Types.Pressure hydrostatic_pressure = hydrostatic_level*settings.blood_rho*Modelica.Constants.g_n "Total hydrostatic pressure at given point (synthetic)";
          //   Physiolibrary.Types.Pressure hydraulic_pressure = p - hydrostatic_pressure "Vessel pressure without the hydrostatic part (synthetic)";

          equation
            port_a.position + height = port_b.position;

          end vp_vein_linear_leveled;

          model vp_vein_tDF_leveled
              extends Obsolete.vp_vein_tDF(redeclare
                  Interfaces.HydraulicPort_a_leveled port_a, redeclare
                  Interfaces.HydraulicPort_b_leveled port_b);
              Modelica.Units.SI.Position hydrostatic_level=(port_a.position +
                  height/2);

          equation
            port_a.position + height = port_b.position;

          end vp_vein_tDF_leveled;

          model vv_artery_thoracic_leveled
              extends
                ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Ascending_aorta(
                  redeclare Interfaces.HydraulicPort_a_leveled port_a,
                  redeclare Interfaces.HydraulicPort_b_leveled port_b);
          equation
            port_a.position + height = port_b.position;
          end vv_artery_thoracic_leveled;
        end Obsolete;

        model CollapsibleVesselSegment
            extends Physiolibrary.Hydraulic.Interfaces.OnePort;
            extends Physiolibrary.Icons.CollapsingVessel;

        outer Physiolibrary.Types.Pressure thoracic_pressure;

          parameter Physiolibrary.Types.Pressure PR1LL = 0
          "start-collapsing sucking pressure, when external pressure is zero";
          parameter Boolean enabled = true;
        equation
           q_in.pressure = if (enabled or q_out.pressure > (PR1LL+thoracic_pressure)) then q_out.pressure else (PR1LL+thoracic_pressure);

          annotation (Icon(graphics={
                Text(
                  extent={{-62,-32},{58,-58}},
                  lineColor={0,0,255},
                  textString="%name")}));
        end CollapsibleVesselSegment;

        model Ascending_aorta
          "Ascending artery to be put directly at the beginning of the arterial tree. Has two volume compartmetns on the sides to run smoothly. Its the VV type in the Bond-graph nomenclature."
          extends Auxiliary.PartialSystemicVessel(
                                       final UseOuter_thoracic_pressure = true);
          Physiolibrary.Types.VolumeFlowRate q;
          Physiolibrary.Types.Pressure p1 "Pressure at first volume compartment";
          Physiolibrary.Types.Pressure p2 "Pressure at second volume compartment";
          Physiolibrary.Types.Volume vol1(fixed = not settings.initByPressure);
          Physiolibrary.Types.Volume vol2(fixed = not settings.initByPressure);
        equation
          volume = vol1 + vol2;
          vol1 = (p_in - P_th)*C/2;
          vol2 =p2*C/2;

          der(q) =(p_out - p1 - R*q)/I;
          der(vol1) = (q_in-q);
          der(vol2) = (q-q_out);
          p_out     =(p_in - P_th) + 2*R_vis*(q_in - q);
          p1 =p2 + 2*R_vis*(q - q_out);

          annotation (Icon(graphics={
                Line(
                  points={{-100,0},{-60,0}},
                  color={28,108,200},
                  arrow={Arrow.None,Arrow.Open}),
                Line(
                  points={{60,0},{100,0}},
                  color={28,108,200},
                  arrow={Arrow.None,Arrow.Open})}));
        end Ascending_aorta;

        model Artery "Artery element with resistance, inertance and one volume compartment. It is the PV type in the Bond graph nomenclature."
            extends
              ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Auxiliary.PartialSystemicVessel(
                UseVasoconstrictionEffect=settings.syst_art_UseVasoconstrictionEffect,
                UseExercise=true,
                volume(fixed = not settings.initByPressure));

          parameter Boolean UseIABPInput = false annotation(choices(checkBox=true), Evaluate = true);
            parameter Modelica.Units.SI.Diameter d_IABP=0 "diameter of IABP"
              annotation (Evaluate=UseIABPInput, HideResult=not UseIABPInput);
          Physiolibrary.Types.Volume iabp_volume = if not UseIABPInput then 0 else _iabp*l*Modelica.Constants.pi*((d_IABP/2)^2) annotation(HideResult = not UseIABPInput);
          Physiolibrary.Types.RealIO.FractionInput IABPInput=_iabp if UseIABPInput
            "Custom IABP input" annotation (Placement(transformation(extent={{-44,10},{-24,
                    30}}), iconTransformation(
                extent={{-20,-20},{20,20}},
                rotation=90,
                origin={-40,-20})));
          parameter Boolean UseStent=false   "Use constant linear complinace to mimic implanted stent. Disables conditional vasoconstriction." annotation(choices(checkBox=true), Evaluate = true);

          Physiolibrary.Types.Pressure p_C(
            start=10000.0,
            fixed=settings.initByPressure) "Pressure of elastic compartment" annotation(HideResult = settings.hideLevel1);

          Physiolibrary.Types.HydraulicCompliance compliance "Real compliance after all effects" annotation(HideResult = settings.hideLevel0);
          Physiolibrary.Types.Fraction r_phi = r*(1 - settings.eta_vc*(phi - phi0)) "Radius depends on sympathetic activation phi" annotation(HideResult = settings.hideLevel0);

          Physiolibrary.Types.Fraction _iabp annotation(HideResult = settings.hideLevel0);
        equation
          if not UseIABPInput then
            _iabp = 0;
          end if;

          if UseVasoconstrictionEffect and not UseStent then
            // TODO divide for arteries and veins
            compliance = 2*Modelica.Constants.pi*(r_phi^3) *l/(E*h);
          else
            compliance = C;
          end if;

          if not UseIABPInput then
            volume = (p_C)  *compliance + zpv;
          else
            volume = max((p_C)  *compliance + zpv - iabp_volume, 0);
          end if;

          if UseInertance then
            der(q_in) = (p_in_hs-p_out_hs-R*q_in)/I;
          else
            0 =p_in_hs -p_out_hs-R*q_in;
          end if;

          der(volume) = (q_in-q_out);
          // external pressure is 0 if disabled by UseOuter_thoracic_pressure being false
          p_out_hs = p_C + R_vis*(q_in - q_out) + external_pressure_inside;

            annotation (Icon(graphics={Line(
                    points={{-80,0},{80,0}},
                    color={238,46,47},
                    arrow={Arrow.None,Arrow.Filled},
                    thickness=1), Ellipse(
                  extent={{-100,-20},{100,-44}},
                  pattern=LinePattern.None,
                  lineColor={0,0,0},
                  fillColor={255,255,0},
                  fillPattern=FillPattern.Solid,
                   visible = DynamicSelect(false, UseIABPInput)),
                Line(
                  points={{-100,20},{-30,50}},
                  color={0,0,0},
                  pattern=LinePattern.None),
                Line(
                  points={{-98,28},{-20,30},{-64,32},{-16,32},{-38,34},{-10,-30}},
                  color={0,0,0},
                  pattern=LinePattern.None),
                Line(points={{-110,20},{110,20}}, color={0,0,0},
                  thickness=0.5),
                Line(points={{-110,-20},{110,-20}}, color={0,0,0},
                  thickness=0.5)}),   Diagram(graphics={
                Rectangle(extent={{-44,6},{-16,-6}}, lineColor={28,108,200}),
                Ellipse(extent={{6,60},{34,32}}, lineColor={28,108,200}),
                Line(points={{-80,0},{-44,0}}, color={28,108,200}),
                Line(points={{-16,0},{80,0}}, color={28,108,200}),
                Text(
                  extent={{-46,-6},{-18,6}},
                  lineColor={28,108,200},
                  textString="R&I"),
                Text(
                  extent={{6,40},{34,52}},
                  lineColor={28,108,200},
                  textString="C"),
                Rectangle(
                  extent={{-14,6},{14,-6}},
                  lineColor={28,108,200},
                  origin={20,16},
                  rotation=90),
                Line(
                  points={{14,-3.68679e-16},{16,-1.34708e-15}},
                  color={28,108,200},
                  origin={20,16},
                  rotation=90),
                Line(
                  points={{14,-3.68679e-16},{16,-1.34708e-15}},
                  color={28,108,200},
                  origin={20,-14},
                  rotation=90),
                Text(
                  extent={{-14,-6},{14,6}},
                  lineColor={28,108,200},
                  origin={20,16},
                  rotation=90,
                  textString="R_vis")}));
        end Artery;

        model Systemic_tissue
            "Model of systemic tissue element, comprising arterial and venous resistances and a single compliance compartment."
          extends
              ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Auxiliary.PartialSystemicElement(
              UseInertance=false, volume(start=V_n, fixed=not settings.initByPressure));

          parameter Physiolibrary.Types.HydraulicInertance I "Optional arteriole inertance";
          parameter Physiolibrary.Types.HydraulicCompliance C "Compliance or nominal compliance for non-linear PV characteristics";
          parameter Physiolibrary.Types.HydraulicResistance Ra "Arteriole resistance";
          parameter Physiolibrary.Types.HydraulicResistance R_vis=0.01/C
            "Elastic viscosity using Voigt model of in-series resistance";
          parameter Physiolibrary.Types.HydraulicInertance I_e=I*1e-6 "Optional venule intertance";
          parameter Physiolibrary.Types.HydraulicResistance Rv "venule resistance";

        //   parameter Physiolibrary.Types.Volume zpv=0 "Zero-pressure volume";
          parameter Physiolibrary.Types.Pressure nominal_pressure=settings.tissues_P_nom;
          Physiolibrary.Types.Pressure p_C(
            start=nominal_pressure,
            nominal=1000,
            fixed=settings.initByPressure)
            "Inner pressure of compliant chamber (after viscoelastic resistance)";

          Physiolibrary.Types.Pressure p(nominal=1000) "Transmural pressure (at joint of the viscous forces)";

          Physiolibrary.Types.Pressure p_in_hs=p_in   - P_hs/2 - P_hs_plus_dist
            "Arterial side pressure including the hydrostatic pressure";
          Physiolibrary.Types.Pressure p_out_hs=p_out   + P_hs/2 - P_hs_plus_dist
            "Venous side pressure including the hydrostatic pressure";

          Physiolibrary.Types.HydraulicResistance Ra_phi_inf=
              Ra*(1 + (phi - settings.phi0)*settings.tissues_eta_Ra)/(1 + exercise*settings.tissues_chi_Ra)/(1 +
              settings.eta_adenosine*adenosine)
              "Arterioles resistance dependent on phi and exercise and adenosine";
          Physiolibrary.Types.HydraulicResistance Ra_phi(start=Ra, fixed=false)
            "Delayed arterioles resistance dependent on phi";
            Physiolibrary.Types.HydraulicResistance Rv_phi=
              Rv*(1 + (phi - settings.phi0)*settings.tissues_eta_Rv)/(1 + exercise*settings.tissues_chi_Rv)
              "Venules resistance dependent on phi and exercise"; // *1/(1 + exercise*settings.tissues_chi_R)

          parameter Real k=C/(V_maxExponential - V_n)
            "For Pstras non-linear PV characteristics. For gamma = 0.0003750308";
          parameter Physiolibrary.Types.Volume V_maxExponential(nominal=1e-9) = V_n + (
            V_n - zpv)*settings.tissues_gamma
            " V_n is between zpv and V_maxExponential, parameterized by gamma. 1 means its in the center. If the volume is over V_maxExponential, the PV characteristics follow the linear relation. For Pstras non-linear PV characteristics";
          parameter Physiolibrary.Types.Volume V_n=nominal_pressure*C + zpv
            "nominal volume calculated from the linear relationship. nominal volume for non-linear compliance parametrization";
          parameter Physiolibrary.Types.Volume V_us=V_maxExponential - (
              V_maxExponential - V_n)*exp(nominal_pressure*k)
            "nonlinear Un-Stressed volume";
          parameter Physiolibrary.Types.Volume volume_linearBreakpoint=V_maxExponential*
              (1 - settings.tissues_V_max_breakPoint_Frac)
            "Maximal volume for nonlinear function, usually set as a fraction of V_maxExponential.";

          Real k_phi=C/(V_maxExponential - V_n_phi)
            "For Pstras non-linear PV characteristics";
          Physiolibrary.Types.Volume V_maxExponential_phi=V_maxExponential - (V_us -
              V_us_phi) "From Pstras";
            Physiolibrary.Types.Volume V_n_phi
              "Linearly dependent on phi and sensitive to exercise";
          Physiolibrary.Types.Volume V_us_phi=V_us/(1 + settings.tissues_eta_C*(phi -
              settings.phi0)) "Linearly dependent on phi";

          parameter Boolean UseMuscleVenousPump=false;
          parameter Physiolibrary.Types.VolumeFlowRate nominalFlow=((settings.tissues_P_nom
               - settings.tissues_Pv_nom)/Rv) "Backcalculated nominal flow";
            Physiolibrary.Types.VolumeFlowRate q_mc=if UseMuscleVenousPump
                 then nominalFlow*exercise*settings.veins_chi_pump else 0
              "Flow given by muscle contractions during exercise is proportional to Rv";

        //Physiolibrary.Types.HydraulicCompliance C_calculated = volume/(p_C - 1/k_phi*log((V_max - V_us)/(V_max - volume_linearBreakpoint)));

            outer Modelica.Units.SI.Angle Tilt;
          Physiolibrary.Types.Pressure P_hs = height*settings.blood_rho*Modelica.Constants.g_n "Hydrostatic pressure of the whole tissue";
          Physiolibrary.Types.Pressure P_hs_plus_dist=added_height/2*settings.blood_rho*
              Modelica.Constants.g_n "Hydrostatic pressure of the half of additional distance (gravity center)";
            parameter Modelica.Units.SI.Height add_length=0
              "Additional height of the tissue at vertical position, negative value points downwards. Moves the center of gravity by half of its size.";

            Modelica.Units.SI.Height added_height=(port_a.position + height/2)*
                (settings.syst_tissues_hydrostaticLevel_correction - 1) + sin(
                Tilt)*add_length
              "Tilted additional height of the tissue mass center";
            Modelica.Units.SI.Height height=port_b.position - port_a.position
              "height difference between connectors. Already includes Tilt information, as the distances in ports are tilted";
            Modelica.Units.SI.Position hydrostatic_level=port_a.position + (
                height + sin(Tilt)*added_height)/2;

          outer Physiolibrary.Types.Fraction adenosine "adenosine dose fraction";
        //   Physiolibrary.Types.Pressure collapsingPressure "the vessel PV lower limb";

          Physiolibrary.Types.Fraction V_r = volume/V_n;
        //   Real k_collapse = (V_maxExponential - V_n_phi)/(C);

        // Real phi_exercise = 0.25 + exercise*0.75;
        // parameter Real tissue_chi_C = 0.09;
        // Real tissue_chi_C_max;
        Physiolibrary.Types.Volume linearOverflow;
        Physiolibrary.Types.Fraction phi_delayed( start = phi0);
        equation

          der(phi_delayed) = max(phi - phi_delayed, 0)/settings.veins_activation_tau + min(phi - phi_delayed, 0)/settings.veins_relaxation_tau;

           if exercise > 0 then
        //     V_n_phi =V_n*(1 + exercise*settings.tissue_chi_C)/(1 + settings.tissues_eta_C*
        //         (phi_exercise - settings.phi0));
             V_n_phi =V_n/(1 + exercise*settings.tissues_chi_C*(1 - settings.phi0));
        //     V_maxExponential = V_n*(1 + 1*tissue_chi_C_max);
           else
            V_n_phi =V_n/(1 + settings.tissues_eta_C*
                (phi_delayed - settings.phi0));
        //         0 = tissue_chi_C_max;
        //     0 = tissue_chi_C;
           end if;

          assert(Rv_phi > 0, "The exercise_factor too high, driving the venous resistance negative!");
          assert(V_maxExponential > V_n_phi, "The V_n is higher than V_max!");

          der(volume) = (q_in -q_out);

          if settings.tissues_tau_R == 0 then
            Ra_phi = Ra_phi_inf;
          else
            der(Ra_phi)*settings.tissues_tau_R = Ra_phi_inf - Ra_phi;
          end if;

          if UseInertance then
            der(q_in) = (p_in_hs -(p+ external_pressure_inside)  - Ra_phi*q_in)/I;
            der(q_out) = (p+ external_pressure_inside -p_out_hs  - Rv_phi*(q_out - q_mc))/I_e;
          else
            0 =p_in_hs  -(p + external_pressure_inside)  - Ra_phi*(q_in - q_mc);
            // jsut a different form of (u - u_out_hs)/Rv + q_mc = v_out;
            0 = (p+ external_pressure_inside -p_out_hs  - Rv_phi*(q_out - q_mc));
          end if;

          p =p_C + R_vis*(q_in - q_out);

        //   collapsingPressure = 1/k_phi *log(volume/V_us);

        //   p_lin - 1/k_phi*log((V_maxExponential - V_us)/(V_maxExponential - V_wp)) = 1/
        //     k_phi/(V_maxExponential - V_wp)*(volume - (V_maxExponential -
        //     V_maxExponential + V_wp));
        //
        //   volume = (p_lin2)*C + zpv;
          if not settings.UseNonLinear_TissuesCompliance then
        //     p_C - 1/k_phi*log((V_maxExponential - V_us)/(V_maxExponential - V_wp)) = 1/
        //       k_phi/(V_maxExponential - V_wp)*(volume - (V_maxExponential -
        //       V_maxExponential + V_wp));
           volume = (p_C)*C + zpv;
           linearOverflow = 0;
          else
            //elseif settings.tissues_UseStraighteningReaction2Phi then
            // my expression based on straightening
            if noEvent(volume < V_us) then
              // p_C = collapsingPressure;
              p_C = 1/k_phi *log(volume/V_us);
                 linearOverflow = 0;
            elseif noEvent(volume < volume_linearBreakpoint) then
              p_C =1/k_phi*log((V_maxExponential - V_us)/(V_maxExponential - volume))
                "equation from Pstras 2017, 10.1093/imammb/dqw008, allegedly taken from Hardy & Collins 1982";
                   linearOverflow = 0;
            else
              // linear steepness after volume too close to maximal volume
              // linearized by derivation of original equation, slope = 1/k_phi/(1e-6), V_max - volume = 1e-6:, u_C at point: 1/k_phi*log((V_max - V_us)/(1e-6))
              p_C - 1/k_phi*log((V_maxExponential - V_us)/(V_maxExponential -
                volume_linearBreakpoint)) = 1/k_phi/(V_maxExponential -
                volume_linearBreakpoint)*(volume - (V_maxExponential - V_maxExponential +
                volume_linearBreakpoint));
                   linearOverflow = volume - volume_linearBreakpoint;
            end if;
        //   else
        //     // Using the variant from Pstras
        //     p_C =1/k*log((V_maxExponential_phi - V_us_phi)/(V_maxExponential_phi -
        //       volume))
        //       "equation from Pstras 2017, 10.1093/imammb/dqw008, allegedly taken from Hardy & Collins 1982";
         end if;

          annotation (
            Icon(graphics={
                Polygon(
                  points={{-20,-26},{-2,2},{-18,2},{12,30},{8,30},{24,36},{30,30},{26,30},
                      {6,10},{18,10},{-6,-24},{-20,-26}},
                  fillColor={0,0,0},
                  fillPattern=FillPattern.Solid,
                  pattern=LinePattern.None,
                  visible=DynamicSelect(false, UseExercise)),
                  Text(
                  extent={{-100,20},{-20,40}},
                  lineColor={0,140,72},
                  lineThickness=1,
                  textString=DynamicSelect("level A", String(port_a.position*100, significantDigits=2)+ " cm"),
                  horizontalAlignment=TextAlignment.Left),
                  Text(
                  extent={{20,20},{100,40}},
                  lineColor={0,140,72},
                  lineThickness=1,
                  horizontalAlignment=TextAlignment.Right,
                  textString=DynamicSelect("level B", String(port_b.position*100, significantDigits=2) + " cm")),
                Rectangle(
                  extent={{-20,20},{20,0}},
                  lineThickness=0.5,
                  fillColor={244,125,35},
                  fillPattern=FillPattern.Solid,
                  pattern=LinePattern.None),
                Text(
                  extent={{-40,20},{40,40}},
                  lineColor={0,0,0},
                  textString="%exercise_ratio%",
                  visible=DynamicSelect(false, UseExercise and not exercise_ratio == 1))}),
            Documentation(info="<html>
<p>When <span style=\"font-family: Courier New;\">UseNonLinearCompliance</span> is true, then this formula is applied (from <span style=\"font-family: Courier New; color: #006400;\">Pstras, Math Med Biol 2017,&nbsp;10.1093/imammb/dqw008):</span></p>
<p><img src=\"modelica://ADAN_main/Resources/tissuePV.png\"/></p>
<p>Otherwise, the linear (green) relation is used instead.</p>
<p><br>Unlike the original Pstras publication, when the VMax is set as Vn + 500ml for veins, resp. Vn + 100 ml for Vena Cava, the Vmax difference here is delta-times the ZPV-Vn:</p>
<p><img src=\"modelica://ADAN_main/Resources/Images/equations/equation-sfHOF1Pk.png\" alt=\"Vmax = Vn + delta*(Vn-ZPV)\"/> </p>
<p>and thus shares the linear parametrization.</p>
</html>"),  Diagram(graphics={
                Ellipse(
                  extent={{-82,2},{-78,-2}},
                  fillColor={28,108,200},
                  fillPattern=FillPattern.Solid,
                  pattern=LinePattern.None),
                Ellipse(
                  extent={{78,2},{82,-2}},
                  lineColor={28,108,200},
                  lineThickness=0.5),
                Line(points={{-80,0},{80,0}}, color={28,108,200}),
                Line(
                  points={{14,-3.68679e-16},{52,2.93663e-15}},
                  color={28,108,200},
                  origin={0,-14},
                  rotation=90),
                Ellipse(extent={{-14,66},{14,38}}, lineColor={28,108,200}),
                Text(
                  extent={{-14,46},{14,58}},
                  lineColor={28,108,200},
                  textString="C"),
                Rectangle(
                  extent={{-64,6},{-36,-6}},
                  lineColor={28,108,200},
                  fillColor={255,255,255},
                  fillPattern=FillPattern.Solid),
                Text(
                  extent={{-64,-6},{-36,6}},
                  lineColor={28,108,200},
                  textString="Ra"),
                Rectangle(
                  extent={{36,6},{64,-6}},
                  lineColor={28,108,200},
                  fillColor={255,255,255},
                  fillPattern=FillPattern.Solid),
                Text(
                  extent={{36,-6},{64,6}},
                  lineColor={28,108,200},
                  textString="Rv"),
                Text(
                  extent={{-100,-18},{-80,2}},
                  lineColor={28,108,200},
                  lineThickness=0.5,
                  textString="-
P_hs/2
-
P_hs_plus_dist"),
                Text(
                  extent={{-30,-32},{32,-20}},
                  lineColor={28,108,200},
                  lineThickness=0.5,
                  textString="P_hs ~ Tilt*|A B|
P_hs_plus_dist ~ Tilt*(add_length /2)"),
                Line(
                  points={{-100,-20},{100,-20}},
                  color={28,108,200},
                  thickness=0.5,
                  arrow={Arrow.Open,Arrow.Open}),
                Text(
                  extent={{80,-16},{100,2}},
                  lineColor={28,108,200},
                  lineThickness=0.5,
                  textString="-
P_hs/2
+
P_hs_plus_dist"),
                Line(
                  points={{-20,60},{-20,20}},
                  color={28,108,200},
                  arrow={Arrow.Open,Arrow.None}),
                Text(
                  extent={{-14,-6},{14,6}},
                  lineColor={28,108,200},
                  origin={-28,38},
                  rotation=90,
                  textString="+ %add_length / 2"),
                Rectangle(
                  extent={{-14,6},{14,-6}},
                  lineColor={28,108,200},
                  fillColor={255,255,255},
                  fillPattern=FillPattern.Solid,
                  origin={0,20},
                  rotation=90),
                Text(
                  extent={{-14,-6},{14,6}},
                  lineColor={28,108,200},
                  origin={0,20},
                  rotation=90,
                  textString="R_vis"),
                Text(
                  extent={{-14,-10},{14,2}},
                  lineColor={28,108,200},
                  textString="p"),
                Text(
                  extent={{2,32},{30,44}},
                  lineColor={28,108,200},
                  textString="p_C")}));
        end Systemic_tissue;

        model Vein "Model of systemic vein element. Has resistance and one volume compartment with optional nonlinear characteristics. It is the VP type in the Bond graph nomenclature."

          extends Auxiliary.PartialSystemicVessel(
            UseOuter_thoracic_pressure=false,
            UseInertance=false,
            zpv=l*Modelica.Constants.pi*((r*settings.veins_diameter_correction)^2)*
                settings.experimental_zpv_factor,
            R=8*settings.blood_mu*l/(Modelica.Constants.pi*((r*settings.veins_diameter_correction)
                ^4)),
            I=settings.blood_rho*l/(Modelica.Constants.pi*(r*settings.veins_diameter_correction)
                ^2),
            V_min=compliant_vessel.V_min,
            volume(start=compliant_vessel.V0, fixed=true));

        //   final parameter Boolean dynamicResistance = false "True for the resistance depends on actual radius based on actual volume";

          parameter Boolean disableVenoconstriction=false   "Disable the phi effect on compliance on this particular element" annotation(choices(checkBox=true),Dialog(group = "Parameters"));

          parameter Physiolibrary.Types.Pressure p_nom=settings.tissues_Pv_nom
            "nominal venous pressure";

          Physiolibrary.Types.Pressure p = compliant_vessel.p;

        //   Physiolibrary.Types.HydraulicResistance R_dynamic=if not dynamicResistance
        //        then R else 8*settings.blood_mu*l/(Modelica.Constants.pi*((
        //       compliant_vessel.r^2/r*settings.veins_diameter_correction)^4))
        //     "Resistance optionally dependent on actual vessel diameter";

          replaceable Auxiliary.Compliances.compliance_tensionDataFit compliant_vessel(
              r_n=r) constrainedby Auxiliary.Compliances.partialCompliance(
            l=l,
            p0=p_nom,
            V=volume,
            disableVenoconstriction=disableVenoconstriction,
            phi = phi)
            annotation (Placement(transformation(extent={{-50,32},{-30,52}})));

        Physiolibrary.Types.Pressure p_vol = R_vis*q_diff annotation(HideResult = settings.hideLevel0);
        Physiolibrary.Types.VolumeFlowRate q_diff = (q_in - q_out) annotation(HideResult = settings.hideLevel0);
        equation

          if E == 0 or not UseInertance then
        //       (p_in_hs -p_out_hs)/R_dynamic =q_out;
              (p_in_hs -p_out_hs)/R =q_out;
          else
            // der(q_out) = (p_in_hs -p_out_hs-R_dynamic *q_out)/I;
            der(q_out) = (p_in_hs -p_out_hs-R *q_out)/I;
          end if;

          der(volume) = q_diff;

          if not settings.veins_ignoreViscosityResistance then
              p_in_hs =p + p_vol + external_pressure_inside;
            else
              p_in_hs = p + external_pressure_inside;
          end if;

            annotation (Icon(graphics={ Rectangle(
                  extent={{-110,32},{112,-30}},
                  lineColor={0,0,0},
                  lineThickness=0.5,
                  visible=DynamicSelect(true, disableVenoconstriction)),
                                       Line(
                    points={{-78,0},{82,0}},
                    color={28,108,200},
                    arrow={Arrow.None,Arrow.Filled},
                    thickness=1)}),                                        Diagram(
                graphics={
                Line(
                  points={{-14,-1.91119e-16},{18,-1.22462e-15}},
                  color={28,108,200},
                  origin={-40,14},
                  rotation=90),
                Line(points={{-80,0},{80,0}}, color={28,108,200}),
                Rectangle(
                  extent={{16,6},{44,-6}},
                  lineColor={28,108,200},
                  fillColor={255,255,255},
                  fillPattern=FillPattern.Solid),
                Text(
                  extent={{14,-6},{42,6}},
                  lineColor={28,108,200},
        textString= DynamicSelect("R&I", if settings.veins_ignoreViscosityResistance then "R" else "R&I")),
                Text(
                  extent={{-36,36},{-8,48}},
                  lineColor={28,108,200},
                  textString="C"),
                Rectangle(
                  extent={{-14,6},{14,-6}},
                  lineColor={28,108,200},
                  origin={-40,16},
                  rotation=90,
                  fillColor={255,255,255},
                  fillPattern=FillPattern.Solid,
                  visible = DynamicSelect(true, not settings.veins_ignoreViscosityResistance)),
                Text(
                  extent={{-14,-6},{14,6}},
                  lineColor={28,108,200},
                  origin={-40,16},
                  rotation=90,
                  textString="R_vis",
                  visible = DynamicSelect(true, not settings.veins_ignoreViscosityResistance))}),
            Documentation(info="<html>
<p>Uses general attribute <span style=\"font-family: Courier New;\">veins_ignoreViscosityResistance </span>from settings whether to ignore viscosity resistance R_vis or to apply it. Our results so far suggests the viscoelastic properties of veins do not affect overall results.</p>
</html>"));
        end Vein;

        model Vein_linear
          "Model of systemic vein element. Has resistance and one volume compartment with linear characteristics. It is the VP type in the Bond graph nomenclature."

          extends Auxiliary.PartialSystemicVessel(
            UseOuter_thoracic_pressure=false,
            UseInertance=false,
            zpv=l*Modelica.Constants.pi*((r*settings.veins_diameter_correction)^2)*
                settings.experimental_zpv_factor,
            R=8*settings.blood_mu*l/(Modelica.Constants.pi*((r*settings.veins_diameter_correction)
                ^4)),
            I=settings.blood_rho*l/(Modelica.Constants.pi*(r*settings.veins_diameter_correction)
                ^2),
            V_min=compliant_vessel.V_min,
            volume(start=compliant_vessel.V0, fixed=true));

        //   final parameter Boolean dynamicResistance = false "True for the resistance depends on actual radius based on actual volume";

          parameter Boolean disableVenoconstriction=false   "Disable the phi effect on compliance on this particular element" annotation(choices(checkBox=true),Dialog(group = "Parameters"));

          parameter Physiolibrary.Types.Pressure p_nom=settings.tissues_Pv_nom
            "nominal venous pressure";

          Physiolibrary.Types.Pressure p = compliant_vessel.p;

        //   Physiolibrary.Types.HydraulicResistance R_dynamic=if not dynamicResistance
        //        then R else 8*settings.blood_mu*l/(Modelica.Constants.pi*((
        //       compliant_vessel.r^2/r*settings.veins_diameter_correction)^4))
        //     "Resistance optionally dependent on actual vessel diameter";

          Auxiliary.Compliances.compliance_linear compliant_vessel(
            C=l*Modelica.Constants.pi*((r*settings.veins_diameter_correction)
                    ^2)/settings.tissues_Pv_nom,
            zpv=l*Modelica.Constants.pi*((
                    r*settings.veins_diameter_correction)^2),
            l=l,
            p0=p_nom,
            V=volume,
            disableVenoconstriction=disableVenoconstriction,
            phi = phi)
            annotation (Placement(transformation(extent={{-50,32},{-30,52}})));

        Physiolibrary.Types.Pressure p_vol = R_vis*q_diff;
        Physiolibrary.Types.VolumeFlowRate q_diff = (q_in - q_out);
        equation

          if E == 0 or not UseInertance then
        //       (p_in_hs -p_out_hs)/R_dynamic =q_out;
              (p_in_hs -p_out_hs)/R =q_out;
          else
            // der(q_out) = (p_in_hs -p_out_hs-R_dynamic *q_out)/I;
            der(q_out) = (p_in_hs -p_out_hs-R *q_out)/I;
          end if;

          der(volume) = q_diff;

          if not settings.veins_ignoreViscosityResistance then
              p_in_hs =p + p_vol + external_pressure_inside;
            else
              p_in_hs = p + external_pressure_inside;
          end if;

            annotation (Icon(graphics={ Rectangle(
                  extent={{-110,32},{112,-30}},
                  lineColor={0,0,0},
                  lineThickness=0.5,
                  visible=DynamicSelect(true, disableVenoconstriction)),
                                       Line(
                    points={{-78,0},{82,0}},
                    color={28,108,200},
                    arrow={Arrow.None,Arrow.Filled},
                    thickness=1)}),                                        Diagram(
                graphics={
                Line(
                  points={{-14,-1.91119e-16},{18,-1.22462e-15}},
                  color={28,108,200},
                  origin={-40,14},
                  rotation=90),
                Line(points={{-80,0},{80,0}}, color={28,108,200}),
                Rectangle(
                  extent={{16,6},{44,-6}},
                  lineColor={28,108,200},
                  fillColor={255,255,255},
                  fillPattern=FillPattern.Solid),
                Text(
                  extent={{14,-6},{42,6}},
                  lineColor={28,108,200},
        textString= DynamicSelect("R&I", if settings.veins_ignoreViscosityResistance then "R" else "R&I")),
                Text(
                  extent={{-36,36},{-8,48}},
                  lineColor={28,108,200},
                  textString="C"),
                Rectangle(
                  extent={{-14,6},{14,-6}},
                  lineColor={28,108,200},
                  origin={-40,16},
                  rotation=90,
                  fillColor={255,255,255},
                  fillPattern=FillPattern.Solid,
                  visible = DynamicSelect(true, not settings.veins_ignoreViscosityResistance)),
                Text(
                  extent={{-14,-6},{14,6}},
                  lineColor={28,108,200},
                  origin={-40,16},
                  rotation=90,
                  textString="R_vis",
                  visible = DynamicSelect(true, not settings.veins_ignoreViscosityResistance))}),
            Documentation(info="<html>
<p>Uses general attribute <span style=\"font-family: Courier New;\">veins_ignoreViscosityResistance </span>from settings whether to ignore viscosity resistance R_vis or to apply it. Our results so far suggests the viscoelastic properties of veins do not affect overall results.</p>
</html>"));
        end Vein_linear;

        model vp_vein_linear "Vein with linear PV characteristics"
            extends Vein(
                redeclare Auxiliary.Compliances.compliance_linear
                compliant_vessel(C=l*Modelica.Constants.pi*((r*settings.veins_diameter_correction)
                    ^2)/settings.tissues_Pv_nom, zpv=l*Modelica.Constants.pi*((
                    r*settings.veins_diameter_correction)^2)));

        end vp_vein_linear;

        package Info

          model schematics "Just a schematics figures for vessel components"
              Modelica.Electrical.Analog.Basic.Resistor resistor annotation (
                  Placement(transformation(extent={{24,70},{44,90}})));
              Modelica.Electrical.Analog.Basic.Inductor inductor annotation (
                  Placement(transformation(extent={{46,70},{66,90}})));
              Modelica.Electrical.Analog.Basic.Capacitor capacitor annotation (
                  Placement(transformation(
                    extent={{-10,-10},{10,10}},
                    rotation=270,
                    origin={74,50})));
              Modelica.Electrical.Analog.Basic.Resistor resistor1 annotation (
                  Placement(transformation(
                    extent={{-10,-10},{10,10}},
                    rotation=270,
                    origin={74,70})));
              Modelica.Electrical.Analog.Basic.Ground ground annotation (
                  Placement(transformation(extent={{64,20},{84,40}})));
              Modelica.Electrical.Analog.Interfaces.NegativePin n2
                          "Negative electrical pin" annotation (Placement(
                    transformation(extent={{86,70},{106,90}})));
              Modelica.Electrical.Analog.Interfaces.PositivePin p1
                          "Positive electrical pin" annotation (Placement(
                    transformation(extent={{6,70},{26,90}})));
              Modelica.Electrical.Analog.Basic.Resistor resistor2 annotation (
                  Placement(transformation(extent={{60,-10},{80,10}})));
              Modelica.Electrical.Analog.Basic.Capacitor capacitor1 annotation (
                 Placement(transformation(
                    extent={{-10,-10},{10,10}},
                    rotation=270,
                    origin={52,-10})));
              Modelica.Electrical.Analog.Basic.Ground ground1 annotation (
                  Placement(transformation(extent={{42,-40},{62,-20}})));
              Modelica.Electrical.Analog.Interfaces.NegativePin n1
                          "Negative electrical pin" annotation (Placement(
                    transformation(extent={{86,-10},{106,10}})));
              Modelica.Electrical.Analog.Interfaces.PositivePin p2
                          "Positive electrical pin" annotation (Placement(
                    transformation(extent={{2,-10},{22,10}})));
              Modelica.Electrical.Analog.Basic.Resistor resistor4 annotation (
                  Placement(transformation(extent={{-80,-10},{-60,10}})));
              Modelica.Electrical.Analog.Basic.Capacitor capacitor2 annotation (
                 Placement(transformation(
                    extent={{-10,-10},{10,10}},
                    rotation=270,
                    origin={-50,-10})));
              Modelica.Electrical.Analog.Basic.Ground ground2 annotation (
                  Placement(transformation(extent={{-60,-40},{-40,-20}})));
              Modelica.Electrical.Analog.Interfaces.NegativePin n3
                          "Negative electrical pin" annotation (Placement(
                    transformation(extent={{-16,-10},{4,10}})));
              Modelica.Electrical.Analog.Interfaces.PositivePin p3
                          "Positive electrical pin" annotation (Placement(
                    transformation(extent={{-102,-10},{-82,10}})));
              Modelica.Electrical.Analog.Basic.Resistor resistor6 annotation (
                  Placement(transformation(extent={{-38,-10},{-18,10}})));
              Modelica.Electrical.Analog.Basic.Resistor resistor5 annotation (
                  Placement(transformation(extent={{-70,70},{-50,90}})));
              Modelica.Electrical.Analog.Basic.Inductor inductor1 annotation (
                  Placement(transformation(extent={{-50,70},{-30,90}})));
              Modelica.Electrical.Analog.Basic.Capacitor capacitor3 annotation (
                 Placement(transformation(
                    extent={{-10,-10},{10,10}},
                    rotation=270,
                    origin={-20,50})));
              Modelica.Electrical.Analog.Basic.Resistor resistor7 annotation (
                  Placement(transformation(
                    extent={{-10,-10},{10,10}},
                    rotation=270,
                    origin={-20,70})));
              Modelica.Electrical.Analog.Basic.Ground ground3 annotation (
                  Placement(transformation(extent={{-30,20},{-10,40}})));
              Modelica.Electrical.Analog.Interfaces.NegativePin n4
                          "Negative electrical pin" annotation (Placement(
                    transformation(extent={{-16,70},{4,90}})));
              Modelica.Electrical.Analog.Interfaces.PositivePin p4
                          "Positive electrical pin" annotation (Placement(
                    transformation(extent={{-104,70},{-84,90}})));
              Modelica.Electrical.Analog.Basic.Capacitor capacitor4 annotation (
                 Placement(transformation(
                    extent={{-10,-10},{10,10}},
                    rotation=270,
                    origin={-80,50})));
              Modelica.Electrical.Analog.Basic.Resistor resistor8 annotation (
                  Placement(transformation(
                    extent={{-10,-10},{10,10}},
                    rotation=270,
                    origin={-80,70})));
              Modelica.Electrical.Analog.Basic.Ground ground4 annotation (
                  Placement(transformation(extent={{-90,20},{-70,40}})));
              Modelica.Electrical.Analog.Basic.Resistor resistor3 annotation (
                  Placement(transformation(extent={{-60,-70},{-40,-50}})));
              Modelica.Electrical.Analog.Interfaces.NegativePin n5
                          "Negative electrical pin" annotation (Placement(
                    transformation(extent={{-20,-70},{0,-50}}),
                    iconTransformation(extent={{12,-88},{32,-68}})));
              Modelica.Electrical.Analog.Interfaces.PositivePin p5
                          "Positive electrical pin" annotation (Placement(
                    transformation(extent={{-100,-70},{-80,-50}}),
                    iconTransformation(extent={{-74,-88},{-54,-68}})));
          equation
              connect(resistor.n, inductor.p)
                annotation (Line(points={{44,80},{46,80}}, color={0,0,255}));
              connect(capacitor.p, resistor1.n)
                annotation (Line(points={{74,60},{74,60}},   color={0,0,255}));
              connect(resistor1.p, inductor.n) annotation (Line(points={{74,80},
                      {66,80}},         color={0,0,255}));
              connect(ground.p, capacitor.n)
                annotation (Line(points={{74,40},{74,40}},   color={0,0,255}));
              connect(inductor.n, n2)
                annotation (Line(points={{66,80},{96,80}},color={0,0,255}));
              connect(resistor.p, p1)
                annotation (Line(points={{24,80},{16,80}}, color={0,0,255}));
              connect(ground1.p, capacitor1.n)
                annotation (Line(points={{52,-20},{52,-20}}, color={0,0,255}));
              connect(p2, resistor2.p)
                annotation (Line(points={{12,0},{60,0}},   color={0,0,255}));
              connect(resistor2.n, n1)
                annotation (Line(points={{80,0},{96,0}},   color={0,0,255}));
              connect(ground2.p, capacitor2.n)
                annotation (Line(points={{-50,-20},{-50,-20}},
                                                           color={0,0,255}));
              connect(resistor4.p, p3)
                annotation (Line(points={{-80,0},{-92,0}},
                                                         color={0,0,255}));
              connect(resistor6.n, n3)
                annotation (Line(points={{-18,0},{-6,0}},  color={0,0,255}));
              connect(resistor4.n, resistor6.p)
                annotation (Line(points={{-60,0},{-38,0}},
                                                         color={0,0,255}));
              connect(capacitor2.p, resistor6.p) annotation (Line(points={{-50,0},
                      {-38,0}},           color={0,0,255}));
              connect(resistor5.n, inductor1.p)
                annotation (Line(points={{-50,80},{-50,80}}, color={0,0,255}));
              connect(capacitor3.p, resistor7.n) annotation (Line(points={{-20,60},
                      {-20,60}},      color={0,0,255}));
              connect(resistor7.p, inductor1.n) annotation (Line(points={{-20,80},
                      {-30,80}},             color={0,0,255}));
              connect(ground3.p, capacitor3.n) annotation (Line(points={{-20,40},
                      {-20,40}},      color={0,0,255}));
              connect(inductor1.n, n4)
                annotation (Line(points={{-30,80},{-6,80}},  color={0,0,255}));
              connect(resistor5.p, p4)
                annotation (Line(points={{-70,80},{-94,80}}, color={0,0,255}));
              connect(capacitor4.p, resistor8.n) annotation (Line(points={{-80,60},
                      {-80,60}},      color={0,0,255}));
              connect(ground4.p, capacitor4.n) annotation (Line(points={{-80,40},
                      {-80,40}},      color={0,0,255}));
              connect(resistor8.p, p4) annotation (Line(points={{-80,80},{-94,
                      80}},         color={0,0,255}));
              connect(capacitor1.p, resistor2.p)
                annotation (Line(points={{52,0},{60,0}}, color={0,0,255}));
              annotation (Icon(coordinateSystem(preserveAspectRatio=false)),
                  Diagram(coordinateSystem(preserveAspectRatio=false), graphics=
                     {Text(
                      extent={{-84,-52},{-64,-68}},
                      lineColor={28,108,200},
                      textString="+ Phs/2"), Text(
                      extent={{-36,-52},{-16,-68}},
                      lineColor={28,108,200},
                      textString="+ Phs/2")}));
          end schematics;
        end Info;

        package tests
          model TestTissuePV

              inner Modelica.Units.SI.Angle Tilt=0;
            inner Physiolibrary.Types.Pressure P_th = 0
              "Thoracic pressure, developed by the airway pressure. Might affect also abdominal cavity.";
            inner Physiolibrary.Types.Pressure outer_pressure = 0;
            inner Physiolibrary.Types.Fraction phi = phi_ramp.y "a systemic acitvation fraction, 1 being maximal possible. Normal resting is believed to be 1/4 of the maximum (0.25)";
            inner Physiolibrary.Types.Fraction Exercise = exercise_ramp.y;
            inner Physiolibrary.Types.Fraction adenosine = 0;

            Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter
              annotation (Placement(transformation(extent={{-44,-4},{-36,4}})));
            Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter1
              annotation (Placement(transformation(extent={{44,-4},{36,4}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(
                  usePressureInput=true, P(displayUnit="mmHg") = 1333.22387415)
              annotation (Placement(transformation(extent={{-80,-10},{-60,10}})));
            Modelica.Blocks.Sources.Ramp pressure_ramp(
                height=33332,
              duration=1000,
                offset=-6666,
              startTime=0)
              annotation (Placement(transformation(extent={{-60,40},{-80,60}})));
            Systemic_tissue renal_R178(
                UseExercise=true,
              Ra=tissueParameters.Ra_renal_R178,
              Rv=tissueParameters.Rv_renal_R178,
              I=tissueParameters.I_renal_R178,
              C=tissueParameters.C_renal_R178,
              zpv=tissueParameters.Zpv_renal_R178,
              nominal_pressure=tissueParameters.tissue_pressure,
                volume(start=1e-6))
            annotation (Placement(transformation(extent={{-10,-2.5},{10,2.5}})));
            Systemic_tissue posterior_tibial_T4_L214(
                UseExercise=true,
              Ra=tissueParameters.Ra_posterior_tibial_T4_L214,
              Rv=tissueParameters.Rv_posterior_tibial_T4_L214,
              I=tissueParameters.I_posterior_tibial_T4_L214,
              C=tissueParameters.C_posterior_tibial_T4_L214,
              zpv=tissueParameters.Zpv_posterior_tibial_T4_L214,
              nominal_pressure=tissueParameters.tissue_pressure)
            annotation (Placement(transformation(extent={{-11,-23},{9,-18}})));
            replaceable Parametrization.SystemicTissueParameters_Calculated
              tissueParameters(
              tissue_pressure=settings.tissues_P_nom,
              arterioles_pressure=settings.tissues_Pa_nom,
              venules_pressure=settings.tissues_Pv_nom,
              total_zpv=settings.tissues_ZPV_nom,
              stressed_volume=settings.tissues_SV_nom,
              cardiac_output=settings.tissues_CO_nom) constrainedby
                Parametrization.SystemicTissueParameters_Calculated
                                                       annotation (Placement(
                  transformation(extent={{-10,-100},{10,-80}})),
                __Dymola_choicesAllMatching=true);
            inner Settings            settings(
                tissues_chi_C(displayUnit="%") = -0.1,
              initByPressure=false,
              heart_R_vlv(displayUnit="(Pa.s)/m3") = 133322.387415,
              heart_R_LA(displayUnit="(mmHg.s)/ml") = 3333059.685375,
              heart_vntr_TS_maxAct(displayUnit="s") = 0.034774043,
              heart_vntr_TR_maxAct(displayUnit="s") = 0.11722694,
              heart_vntr_Tact_maxAct=8.000000e-02,
                chi_phi=0.9,
              heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 1.082188e+04,
                heart_vntr_D_0_maxAct=0.0004215625,
                eta_vc=0.2201054,
                tissues_eta_Ra=1.245225,
                tissues_eta_C=0.5058013,
                tissues_chi_Ra=0,
              V_PV_init=0,
                heart_atr_D_A=55215000,
                heart_vntr_xi_Vw=0.9014874,
                heart_vntr_xi_AmRef=1.111598,
              heart_vntr_k_passive=3.725000e+01,
              heart_vntr_Lsref=1.900000e+00,
                heart_atr_D_0=14055120,
              heart_atr_TS=1.882500e-01,
              heart_atr_TR=2.631250e-01,
                heart_vntr_D_0=18.15655,
                heart_vntr_D_A=2846.905,
              heart_vntr_TS=8.825000e-02,
              heart_vntr_TR(displayUnit="s") = 2.975000e-01,
              heart_vntr_Tact=8.000000e-02,
              baro_fsn(displayUnit="Hz") = 0.0383,
                pulm_R=3628209,
                pulm_q_nom_maxq=0.0004958,
                syst_tissues_hydrostaticLevel_correction=1,
                HR_max=2.7333333333333,
                syst_TPR=128212500,
                syst_art_k_E=0.3973268,
                veins_gamma=0.365625,
                tissues_SV_nom=0.000695,
                pulm_C_PV=3.194206e-07,
                pulm_C_PA=5.3325e-08,
              heart_R_RA(displayUnit="(dyn.s)/cm5") = settings.heart_R_LA,
              tissues_eta_Rv=0,
              baro_tau_s(displayUnit="s") = 93,
              syst_TR_frac(displayUnit="1") = 4.695759e+00,
                syst_abd_P_th_ratio=0.8,
              heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
              heart_vntr_L0=1.6,
                pulm_P_PV_nom=1333.22387415,
                height=1.7132,
                tissues_CO_nom=0.000105,
              EvaluateFunctionalParams=true,
                HR_nominal=1.0666666666667,
              UseNonLinear_TissuesCompliance=true,
              baro_f1=3.379000e-03,
                baro_g=0.606258,
              baro_useAbsolutePressureTerm=false,
              baro_xi_delta0=2.688000e-01,
              pulm_R_exp=9.150000e-01,
              syst_art_UseVasoconstrictionEffect=true,
              tissues_UseStraighteningReaction2Phi=true,
                tissues_ZPV_nom=0.00210124,
                tissues_gamma=0.5,
              tissues_tau_R(displayUnit="s") = 0,
                veins_C_phi=0.09,
                veins_activation_tau=1e-3) annotation (Placement(transformation(
                      extent={{-100,80},{-80,100}})));
            Modelica.Blocks.Sources.Ramp phi_ramp(
                height=0,
                duration=10,
                offset=0.25,
                startTime=0)
              annotation (Placement(transformation(extent={{-18,74},{-38,94}})));
            Modelica.Blocks.Sources.Ramp exercise_ramp(
                height=0,
                duration=900,
                offset=0,
                startTime=100)
                           annotation (Placement(transformation(extent={{20,74},{0,94}})));
          equation
            connect(leveledPressureFlowConverter.port_a, unlimitedVolume.y) annotation (
                Line(
                points={{-44,0},{-60,0}},
                color={0,0,0},
                thickness=1));
            connect(unlimitedVolume.y, leveledPressureFlowConverter1.port_a) annotation (
                Line(
                points={{-60,0},{-52,0},{-52,20},{60,20},{60,0},{44,0}},
                color={0,0,0},
                thickness=1));
            connect(pressure_ramp.y, unlimitedVolume.pressure) annotation (Line(points={{-81,
                    50},{-92,50},{-92,0},{-80,0}}, color={0,0,127}));
            connect(renal_R178.port_a, leveledPressureFlowConverter.leveledPort_b)
              annotation (Line(
                points={{-10,0},{-36,0}},
                color={162,29,33},
                thickness=0.5));
            connect(renal_R178.port_b, leveledPressureFlowConverter1.leveledPort_b)
              annotation (Line(
                points={{10,0},{36,0}},
                color={162,29,33},
                thickness=0.5));
            connect(leveledPressureFlowConverter.leveledPort_b, posterior_tibial_T4_L214.port_a)
              annotation (Line(
                points={{-36,0},{-16,0},{-16,-20.5},{-11,-20.5}},
                color={162,29,33},
                thickness=0.5));
            connect(leveledPressureFlowConverter1.leveledPort_b, posterior_tibial_T4_L214.port_b)
              annotation (Line(
                points={{36,0},{16,0},{16,-20.5},{9,-20.5}},
                color={162,29,33},
                thickness=0.5));
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)),
              experiment(
                  StopTime=1000,
                  Tolerance=1e-07,
                  __Dymola_Algorithm="Cvode"));
          end TestTissuePV;

          model TestVeinPV

              inner Modelica.Units.SI.Angle Tilt=0;
            inner Physiolibrary.Types.Pressure P_th = 0
              "Thoracic pressure, developed by the airway pressure. Might affect also abdominal cavity.";
            inner Physiolibrary.Types.Pressure outer_pressure = 0;
            inner Physiolibrary.Types.Fraction phi = phi_ramp.y "a systemic acitvation fraction, 1 being maximal possible. Normal resting is believed to be 1/4 of the maximum (0.25)";
            inner Physiolibrary.Types.Fraction Exercise = exercise_ramp.y;
            inner Physiolibrary.Types.Fraction adenosine = 0;

            Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter(useLevel=
                  false)
              annotation (Placement(transformation(extent={{-44,-4},{-36,4}})));
            Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter1
              annotation (Placement(transformation(extent={{44,-4},{36,4}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(
                usePressureInput=true,  P(displayUnit="Pa") = 6666.11937075)
              annotation (Placement(transformation(extent={{-80,-10},{-60,10}})));
            Modelica.Blocks.Sources.Ramp pressure_ramp(
                height=23333.2,
              duration=1000,
                offset=-6666.6,
              startTime=0)
              annotation (Placement(transformation(extent={{-60,40},{-80,60}})));
            replaceable Parametrization.SystemicTissueParameters_Calculated
              tissueParameters(
              tissue_pressure=settings.tissues_P_nom,
              arterioles_pressure=settings.tissues_Pa_nom,
              venules_pressure=settings.tissues_Pv_nom,
              total_zpv=settings.tissues_ZPV_nom,
              stressed_volume=settings.tissues_SV_nom,
              cardiac_output=settings.tissues_CO_nom) constrainedby
                Parametrization.SystemicTissueParameters_Calculated
                                                       annotation (Placement(
                  transformation(extent={{-10,-100},{10,-80}})),
                __Dymola_choicesAllMatching=true);
            inner Settings            settings(
                tissues_chi_C(displayUnit="1") = 0.5,
              initByPressure=false,
              heart_R_vlv(displayUnit="(Pa.s)/m3") = 133322.387415,
              heart_R_LA(displayUnit="(mmHg.s)/ml") = 3333059.685375,
              heart_vntr_TS_maxAct(displayUnit="s") = 0.034774043,
              heart_vntr_TR_maxAct(displayUnit="s") = 0.11722694,
              heart_vntr_Tact_maxAct=8.000000e-02,
                chi_phi=0.9,
              heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 1.082188e+04,
                heart_vntr_D_0_maxAct=0.0004215625,
                eta_vc=0.2201054,
                tissues_eta_Ra=1.245225,
                tissues_eta_C=0.5058013,
                tissues_chi_Ra=16.578623,
              V_PV_init=0,
                heart_atr_D_A=55215000,
                heart_vntr_xi_Vw=0.9014874,
                heart_vntr_xi_AmRef=1.111598,
              heart_vntr_k_passive=3.725000e+01,
              heart_vntr_Lsref=1.900000e+00,
                heart_atr_D_0=14055120,
              heart_atr_TS=1.882500e-01,
              heart_atr_TR=2.631250e-01,
                heart_vntr_D_0=18.15655,
                heart_vntr_D_A=2846.905,
              heart_vntr_TS=8.825000e-02,
              heart_vntr_TR(displayUnit="s") = 2.975000e-01,
              heart_vntr_Tact=8.000000e-02,
                veins_UseNonLinearVeins=true,
              baro_fsn(displayUnit="Hz") = 0.0383,
                pulm_R=3628209,
                pulm_q_nom_maxq=0.0004958,
                syst_tissues_hydrostaticLevel_correction=1,
                HR_max=2.7333333333333,
                syst_TPR=128212500,
                syst_art_k_E=0.3973268,
                veins_gamma=0.5,
                tissues_SV_nom=0.000695,
                pulm_C_PV=3.194206e-07,
                pulm_C_PA=5.3325e-08,
              heart_R_RA(displayUnit="(dyn.s)/cm5") = settings.heart_R_LA,
              tissues_eta_Rv=0,
              baro_tau_s(displayUnit="s") = 93,
              syst_TR_frac(displayUnit="1") = 4.695759e+00,
                syst_abd_P_th_ratio=0.8,
              heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
              heart_vntr_L0=1.6,
                pulm_P_PV_nom=1333.22387415,
                height=1.7132,
                tissues_CO_nom=0.000105,
              EvaluateFunctionalParams=true,
                HR_nominal=1.0666666666667,
              UseNonLinear_TissuesCompliance=true,
              baro_f1=3.379000e-03,
                baro_g=0.606258,
              baro_useAbsolutePressureTerm=false,
              baro_xi_delta0=2.688000e-01,
              pulm_R_exp=9.150000e-01,
              syst_art_UseVasoconstrictionEffect=true,
              tissues_UseStraighteningReaction2Phi=true,
                tissues_ZPV_nom=0.00210124,
                tissues_gamma=0.5,
              tissues_tau_R(displayUnit="s") = 0,
                veins_C_phi=0.09,
                veins_activation_tau=0) annotation (Placement(transformation(
                      extent={{-100,80},{-80,100}})));
            Modelica.Blocks.Sources.Ramp phi_ramp(
                height=0,
                duration=10,
                offset=0.95,
                startTime=10)
              annotation (Placement(transformation(extent={{-18,74},{-38,94}})));
            Modelica.Blocks.Sources.Ramp exercise_ramp(
                height=0,
                duration=10,
                offset=0,
                startTime=1)
                           annotation (Placement(transformation(extent={{20,74},{0,94}})));
            Vein          inferior_vena_cava_C24(
              sinAlpha=1,
              UseOuter_thoracic_pressure=true,
              thoracic_pressure_ratio=settings.syst_abd_P_th_ratio,
              l=venousParameters.l_inferior_vena_cava_C24,
              E=venousParameters.E_inferior_vena_cava_C24,
              r=venousParameters.r_inferior_vena_cava_C24,
              volume(fixed=false))
              annotation (Placement(transformation(extent={{-12,-15},{8,-10}})));
            Vein          popliteal_vein_R52(
              sinAlpha=1,
              l=venousParameters.l_popliteal_vein_R52,
              E=venousParameters.E_popliteal_vein_R52,
              r=venousParameters.r_popliteal_vein_R52,
              volume(fixed=false))
              annotation (Placement(transformation(extent={{-11,7},{9,12}})));
            Parametrization.Parameters_Venous venousParameters(height_actual=settings.height)
              annotation (Placement(transformation(extent={{-40,22},{-20,42}})));
            Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter2(useLevel=
                  false)
              annotation (Placement(transformation(extent={{-44,-18},{-36,-10}})));
            parameter Real x=4000 annotation(Evaluate = false);
            parameter Real y=0.95
                                annotation(Evaluate = false);
          equation
            connect(leveledPressureFlowConverter.port_a, unlimitedVolume.y) annotation (
                Line(
                points={{-44,0},{-60,0}},
                color={0,0,0},
                thickness=1));
            connect(unlimitedVolume.y, leveledPressureFlowConverter1.port_a) annotation (
                Line(
                points={{-60,0},{-52,0},{-52,20},{60,20},{60,0},{44,0}},
                color={0,0,0},
                thickness=1));
            connect(pressure_ramp.y, unlimitedVolume.pressure) annotation (Line(points={{-81,
                    50},{-92,50},{-92,0},{-80,0}}, color={0,0,127}));
            connect(leveledPressureFlowConverter.leveledPort_b, popliteal_vein_R52.port_a)
              annotation (Line(
                points={{-36,0},{-26,0},{-26,10},{-12,10},{-12,9.5},{-11,9.5}},
                color={162,29,33},
                thickness=0.5));
            connect(leveledPressureFlowConverter1.leveledPort_b, popliteal_vein_R52.port_b)
              annotation (Line(
                points={{36,0},{8,0},{8,6},{9,6},{9,9.5}},
                color={162,29,33},
                thickness=0.5));
            connect(leveledPressureFlowConverter1.leveledPort_b, inferior_vena_cava_C24.port_b)
              annotation (Line(
                points={{36,0},{14,0},{14,-12.5},{8,-12.5}},
                color={162,29,33},
                thickness=0.5));
            connect(leveledPressureFlowConverter2.port_a, unlimitedVolume.y) annotation (
                Line(
                points={{-44,-14},{-52,-14},{-52,0},{-60,0}},
                color={0,0,0},
                thickness=1));
            connect(inferior_vena_cava_C24.port_a, leveledPressureFlowConverter2.leveledPort_b)
              annotation (Line(
                points={{-12,-12.5},{-30,-12.5},{-30,-14},{-36,-14}},
                color={162,29,33},
                thickness=0.5));
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)),
              experiment(
                  StopTime=1000,
                  Tolerance=1e-07,
                  __Dymola_Algorithm="Cvode"));
          end TestVeinPV;

          model TestVeinPV_volumes

              inner Modelica.Units.SI.Angle Tilt=0;
            inner Physiolibrary.Types.Pressure P_th = 0
              "Thoracic pressure, developed by the airway pressure. Might affect also abdominal cavity.";
            inner Physiolibrary.Types.Pressure outer_pressure = 0;
            inner Physiolibrary.Types.Fraction phi = phi_ramp.y "a systemic acitvation fraction, 1 being maximal possible. Normal resting is believed to be 1/4 of the maximum (0.25)";
            inner Physiolibrary.Types.Fraction Exercise = exercise_ramp.y;
            inner Physiolibrary.Types.Fraction adenosine = 0;

            Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter(useLevel=
                  false)
              annotation (Placement(transformation(extent={{-44,-4},{-36,4}})));
            Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter1
              annotation (Placement(transformation(extent={{44,-4},{36,4}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(
                  usePressureInput=false, P(displayUnit="Pa") = 666.11937075)
              annotation (Placement(transformation(extent={{-80,-10},{-60,10}})));
            Modelica.Blocks.Sources.Ramp pressure_ramp(
              height=23333.2,
              duration=1000,
              offset=-6666.6,
              startTime=0)
              annotation (Placement(transformation(extent={{-60,40},{-80,60}})));
            replaceable Parametrization.SystemicTissueParameters_Calculated
              tissueParameters(
              tissue_pressure=settings.tissues_P_nom,
              arterioles_pressure=settings.tissues_Pa_nom,
              venules_pressure=settings.tissues_Pv_nom,
              total_zpv=settings.tissues_ZPV_nom,
              stressed_volume=settings.tissues_SV_nom,
              cardiac_output=settings.tissues_CO_nom) constrainedby
                Parametrization.SystemicTissueParameters_Calculated
                                                       annotation (Placement(
                  transformation(extent={{-10,-100},{10,-80}})),
                __Dymola_choicesAllMatching=true);
            inner Settings            settings(
                tissues_chi_C(displayUnit="1") = 0.5,
              initByPressure=false,
              heart_R_vlv(displayUnit="(Pa.s)/m3") = 133322.387415,
              heart_R_LA(displayUnit="(mmHg.s)/ml") = 3333059.685375,
              heart_vntr_TS_maxAct(displayUnit="s") = 0.034774043,
              heart_vntr_TR_maxAct(displayUnit="s") = 0.11722694,
              heart_vntr_Tact_maxAct=8.000000e-02,
              chi_phi=0.9,
              heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 1.082188e+04,
              heart_vntr_D_0_maxAct=0.0004215625,
              eta_vc=0.2201054,
              tissues_eta_Ra=1.245225,
              tissues_eta_C=0.5058013,
                tissues_chi_Ra=16.578623,
              V_PV_init=0,
              heart_atr_D_A=55215000,
              heart_vntr_xi_Vw=0.9014874,
              heart_vntr_xi_AmRef=1.111598,
              heart_vntr_k_passive=3.725000e+01,
              heart_vntr_Lsref=1.900000e+00,
              heart_atr_D_0=14055120,
              heart_atr_TS=1.882500e-01,
              heart_atr_TR=2.631250e-01,
              heart_vntr_D_0=18.15655,
              heart_vntr_D_A=2846.905,
              heart_vntr_TS=8.825000e-02,
              heart_vntr_TR(displayUnit="s") = 2.975000e-01,
              heart_vntr_Tact=8.000000e-02,
              baro_fsn(displayUnit="Hz") = 0.0383,
              pulm_R=3628209,
              pulm_q_nom_maxq=0.0004958,
              syst_tissues_hydrostaticLevel_correction=1,
              HR_max=2.7333333333333,
              syst_TPR=128212500,
              syst_art_k_E=0.3973268,
              veins_gamma=0.5,
              tissues_SV_nom=0.000695,
              pulm_C_PV=3.194206e-07,
              pulm_C_PA=5.3325e-08,
              heart_R_RA(displayUnit="(dyn.s)/cm5") = settings.heart_R_LA,
              tissues_eta_Rv=0,
              baro_tau_s(displayUnit="s") = 93,
              syst_TR_frac(displayUnit="1") = 4.695759e+00,
              syst_abd_P_th_ratio=0.8,
              heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
              heart_vntr_L0=1.6,
              pulm_P_PV_nom=1333.22387415,
              height=1.7132,
              tissues_CO_nom=0.000105,
              EvaluateFunctionalParams=true,
              HR_nominal=1.0666666666667,
              UseNonLinear_TissuesCompliance=true,
              baro_f1=3.379000e-03,
              baro_g=0.606258,
              baro_useAbsolutePressureTerm=false,
              baro_xi_delta0=2.688000e-01,
              pulm_R_exp=9.150000e-01,
              syst_art_UseVasoconstrictionEffect=true,
              tissues_UseStraighteningReaction2Phi=true,
              tissues_ZPV_nom=0.00210124,
              tissues_gamma=0.5,
              tissues_tau_R(displayUnit="s") = 0,
              veins_C_phi=0.09,
                veins_activation_tau=0) annotation (Placement(transformation(
                      extent={{-100,80},{-80,100}})));
            Modelica.Blocks.Sources.Ramp phi_ramp(
                height=1,
                duration=10,
                offset=0,
                startTime=10)
              annotation (Placement(transformation(extent={{-18,74},{-38,94}})));
            Modelica.Blocks.Sources.Ramp exercise_ramp(
                height=0,
                duration=10,
                offset=0,
                startTime=1)
                           annotation (Placement(transformation(extent={{20,74},{0,94}})));
            Vein          inferior_vena_cava_C24(
              sinAlpha=1,
              UseOuter_thoracic_pressure=true,
              thoracic_pressure_ratio=0,
              l(displayUnit="cm") = 0.003179,
              E=1,
              r(displayUnit="cm") = 0.01,
              volume(fixed=false),
              compliant_vessel(phi_no=phi_no))
              annotation (Placement(transformation(extent={{-12,-15},{8,-10}})));
            Vein          popliteal_vein_R52(
              thoracic_pressure_ratio=0,
              sinAlpha=1,
              l(displayUnit="cm") = 0.01,
              E=1,
              r(displayUnit="cm") = 0.005638,
              volume(fixed=false),
              compliant_vessel(phi_no=phi_no))
              annotation (Placement(transformation(extent={{-11,7},{9,12}})));
            Parametrization.Parameters_Venous venousParameters(height_actual=settings.height)
              annotation (Placement(transformation(extent={{-40,22},{-20,42}})));
            Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter2(useLevel=
                  false)
              annotation (Placement(transformation(extent={{-44,-18},{-36,-10}})));
            parameter Real x=4000 annotation(Evaluate = false);
            parameter Real y=0.95
                                annotation(Evaluate = false);
            parameter Real phi_ns=1 "slope of nonlinear phi adjustment";
            parameter Real phi_no=0 "Offset of nonlinear phi adjustment";
          equation
            connect(leveledPressureFlowConverter.port_a, unlimitedVolume.y) annotation (
                Line(
                points={{-44,0},{-60,0}},
                color={0,0,0},
                thickness=1));
            connect(unlimitedVolume.y, leveledPressureFlowConverter1.port_a) annotation (
                Line(
                points={{-60,0},{-52,0},{-52,20},{60,20},{60,0},{44,0}},
                color={0,0,0},
                thickness=1));
            connect(pressure_ramp.y, unlimitedVolume.pressure) annotation (Line(points={{-81,
                    50},{-92,50},{-92,0},{-80,0}}, color={0,0,127}));
            connect(leveledPressureFlowConverter.leveledPort_b, popliteal_vein_R52.port_a)
              annotation (Line(
                points={{-36,0},{-26,0},{-26,10},{-12,10},{-12,9.5},{-11,9.5}},
                color={162,29,33},
                thickness=0.5));
            connect(leveledPressureFlowConverter1.leveledPort_b, popliteal_vein_R52.port_b)
              annotation (Line(
                points={{36,0},{8,0},{8,6},{9,6},{9,9.5}},
                color={162,29,33},
                thickness=0.5));
            connect(leveledPressureFlowConverter1.leveledPort_b, inferior_vena_cava_C24.port_b)
              annotation (Line(
                points={{36,0},{14,0},{14,-12.5},{8,-12.5}},
                color={162,29,33},
                thickness=0.5));
            connect(leveledPressureFlowConverter2.port_a, unlimitedVolume.y) annotation (
                Line(
                points={{-44,-14},{-52,-14},{-52,0},{-60,0}},
                color={0,0,0},
                thickness=1));
            connect(inferior_vena_cava_C24.port_a, leveledPressureFlowConverter2.leveledPort_b)
              annotation (Line(
                points={{-12,-12.5},{-30,-12.5},{-30,-14},{-36,-14}},
                color={162,29,33},
                thickness=0.5));
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)),
              experiment(
                  StopTime=1000,
                  Tolerance=1e-07,
                  __Dymola_Algorithm="Cvode"));
          end TestVeinPV_volumes;
        end tests;
      end Vessel_modules;

        package Parametrization
        model SystemicTissueParameters "AdanVenousRed _7af7a4"
          import Physiolibrary.Types.*;
          parameter Pressure tissue_pressure=2666.4;
          parameter HydraulicResistance Ra_celiac_trunk_C116 = 8.65E+08 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_celiac_trunk_C116 = 1.62E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_celiac_trunk_C116 = 5.21E+05 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_celiac_trunk_C116 = 3.69E-08 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_celiac_trunk_C116 = 2.85E-04 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_renal_L166 = 9.58E+08 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_renal_L166 = 1.80E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_renal_L166 = 9.83E+05 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_renal_L166 = 3.33E-08 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_renal_L166 = 2.57E-04 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_renal_R178 = 9.61E+08 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_renal_R178 = 1.80E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_renal_R178 = 1.43E+06 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_renal_R178 = 3.32E-08 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_renal_R178 = 2.56E-04 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_internal_iliac_T1_R218 = 1.75E+09 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_internal_iliac_T1_R218 = 3.28E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_internal_iliac_T1_R218 = 3.05E+06 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_internal_iliac_T1_R218 = 1.82E-08 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_internal_iliac_T1_R218 = 1.41E-04 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_profundus_T2_R224 = 1.53E+09 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_profundus_T2_R224 = 2.87E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_profundus_T2_R224 = 1.73E+07 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_profundus_T2_R224 = 2.08E-08 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_profundus_T2_R224 = 1.61E-04 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_anterior_tibial_T3_R230 = 1.20E+10 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_anterior_tibial_T3_R230 = 2.25E+09 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_anterior_tibial_T3_R230 = 9.49E+07 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_anterior_tibial_T3_R230 = 2.65E-09 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_anterior_tibial_T3_R230 = 2.05E-05 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_posterior_tibial_T4_R236 = 1.03E+10 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_posterior_tibial_T4_R236 = 1.93E+09 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_posterior_tibial_T4_R236 = 8.47E+07 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_posterior_tibial_T4_R236 = 3.10E-09 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_posterior_tibial_T4_R236 = 2.39E-05 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_internal_iliac_T1_L196 = 1.75E+09 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_internal_iliac_T1_L196 = 3.29E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_internal_iliac_T1_L196 = 3.05E+06 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_internal_iliac_T1_L196 = 1.82E-08 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_internal_iliac_T1_L196 = 1.40E-04 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_profundus_T2_L202 = 1.53E+09 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_profundus_T2_L202 = 2.87E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_profundus_T2_L202 = 1.73E+07 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_profundus_T2_L202 = 2.08E-08 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_profundus_T2_L202 = 1.61E-04 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_anterior_tibial_T3_L208 = 1.20E+10 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_anterior_tibial_T3_L208 = 2.25E+09 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_anterior_tibial_T3_L208 = 9.49E+07 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_anterior_tibial_T3_L208 = 2.65E-09 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_anterior_tibial_T3_L208 = 2.05E-05 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_posterior_tibial_T4_L214 = 1.03E+10 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_posterior_tibial_T4_L214 = 1.93E+09 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_posterior_tibial_T4_L214 = 8.47E+07 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_posterior_tibial_T4_L214 = 3.10E-09 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_posterior_tibial_T4_L214 = 2.39E-05 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_ulnar_T2_R42 = 5.13E+09 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_ulnar_T2_R42 = 9.61E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_ulnar_T2_R42 = 4.03E+07 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_ulnar_T2_R42 = 6.22E-09 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_ulnar_T2_R42 = 4.81E-05 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_radial_T1_R44 = 6.11E+09 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_radial_T1_R44 = 1.15E+09 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_radial_T1_R44 = 5.32E+07 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_radial_T1_R44 = 5.21E-09 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_radial_T1_R44 = 4.03E-05 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_ulnar_T2_L90 = 5.21E+09 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_ulnar_T2_L90 = 9.77E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_ulnar_T2_L90 = 4.03E+07 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_ulnar_T2_L90 = 6.12E-09 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_ulnar_T2_L90 = 4.73E-05 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_radial_T1_L92 = 6.02E+09 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_radial_T1_L92 = 1.13E+09 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_radial_T1_L92 = 5.32E+07 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_radial_T1_L92 = 5.29E-09 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_radial_T1_L92 = 4.09E-05 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_internal_carotid_R8_C = 4.26E+09 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_internal_carotid_R8_C = 7.99E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_internal_carotid_R8_C = 6.13E+06 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_internal_carotid_R8_C = 7.48E-09 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_internal_carotid_R8_C = 5.78E-05 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_external_carotid_T2_R26 = 4.19E+09 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_external_carotid_T2_R26 = 7.86E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_external_carotid_T2_R26 = 3.97E+06 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_external_carotid_T2_R26 = 7.60E-09 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_external_carotid_T2_R26 = 5.87E-05 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_internal_carotid_L50_C = 4.28E+09 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_internal_carotid_L50_C = 8.02E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_internal_carotid_L50_C = 6.13E+06 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_internal_carotid_L50_C = 7.45E-09 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_internal_carotid_L50_C = 5.76E-05 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_external_carotid_T2_L62 = 4.21E+09 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_external_carotid_T2_L62 = 7.89E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_external_carotid_T2_L62 = 3.97E+06 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_external_carotid_T2_L62 = 7.57E-09 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_external_carotid_T2_L62 = 5.85E-05 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_vertebral_L2 = 4.70E+09 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_vertebral_L2 = 8.80E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_vertebral_L2 = 3.93E+07 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_vertebral_L2 = 6.79E-09 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_vertebral_L2 = 5.25E-05 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_vertebral_R272 = 4.68E+09 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_vertebral_R272 = 8.77E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_vertebral_R272 = 3.94E+07 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_vertebral_R272 = 6.81E-09 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_vertebral_R272 = 5.26E-05 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_splachnic_tissue = 1.19E+09 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_splachnic_tissue = 2.23E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_splachnic_tissue = 1.00E+07 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_splachnic_tissue = 7.78E-08 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_splachnic_tissue = 2.07E-04 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          parameter HydraulicResistance Ra_cardiac_tissue = 2.67E+09 annotation(Dialog(tab="Tissue parametrization", group="Arterioles resistance"));
          parameter HydraulicResistance Rv_cardiac_tissue = 5.01E+08 annotation(Dialog(tab="Tissue parametrization", group="Venules resistance"));
          parameter HydraulicInertance I_cardiac_tissue = 1.00E+07 annotation(Dialog(tab="Tissue parametrization", group="Inertances"));
          parameter HydraulicCompliance C_cardiac_tissue = 3.46E-08 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
          parameter Volume Zpv_cardiac_tissue = 9.22E-05 annotation(Dialog(tab="Tissue parametrization", group="Zero pressure volumes"));
          annotation(defaultComponentName = "tissueParameters");
        end SystemicTissueParameters;

          model SystemicTissueParameters_Calculated
            extends
              Subsystems.Systemic.Parametrization.SystemicTissueParameters(
              Ra_celiac_trunk_C116 = (arterioles_pressure - tissue_pressure)/q_celiac_trunk_C116,
              Rv_celiac_trunk_C116 = (tissue_pressure - venules_pressure) /q_celiac_trunk_C116,
              C_celiac_trunk_C116 = stressed_volume/tissue_pressure*qf_celiac_trunk_C116,
              Zpv_celiac_trunk_C116 = total_zpv*qf_celiac_trunk_C116,
              Ra_renal_L166 = (arterioles_pressure - tissue_pressure)/q_renal_L166,
              Rv_renal_L166 = (tissue_pressure - venules_pressure) /q_renal_L166,
              C_renal_L166 = stressed_volume/tissue_pressure*qf_renal_L166,
              Zpv_renal_L166 = total_zpv*qf_renal_L166,
              Ra_renal_R178 = (arterioles_pressure - tissue_pressure)/q_renal_R178,
              Rv_renal_R178 = (tissue_pressure - venules_pressure) /q_renal_R178,
              C_renal_R178 = stressed_volume/tissue_pressure*qf_renal_R178,
              Zpv_renal_R178 = total_zpv*qf_renal_R178,
              Ra_internal_iliac_T1_R218 = (arterioles_pressure - tissue_pressure)/q_internal_iliac_T1_R218,
              Rv_internal_iliac_T1_R218 = (tissue_pressure - venules_pressure) /q_internal_iliac_T1_R218,
              C_internal_iliac_T1_R218 = stressed_volume/tissue_pressure*qf_internal_iliac_T1_R218,
              Zpv_internal_iliac_T1_R218 = total_zpv*qf_internal_iliac_T1_R218,
              Ra_profundus_T2_R224 = (arterioles_pressure - tissue_pressure)/q_profundus_T2_R224,
              Rv_profundus_T2_R224 = (tissue_pressure - venules_pressure) /q_profundus_T2_R224,
              C_profundus_T2_R224 = stressed_volume/tissue_pressure*qf_profundus_T2_R224,
              Zpv_profundus_T2_R224 = total_zpv*qf_profundus_T2_R224,
              Ra_anterior_tibial_T3_R230 = (arterioles_pressure - tissue_pressure)/q_anterior_tibial_T3_R230,
              Rv_anterior_tibial_T3_R230 = (tissue_pressure - venules_pressure) /q_anterior_tibial_T3_R230,
              C_anterior_tibial_T3_R230 = stressed_volume/tissue_pressure*qf_anterior_tibial_T3_R230,
              Zpv_anterior_tibial_T3_R230 = total_zpv*qf_anterior_tibial_T3_R230,
              Ra_posterior_tibial_T4_R236 = (arterioles_pressure - tissue_pressure)/q_posterior_tibial_T4_R236,
              Rv_posterior_tibial_T4_R236 = (tissue_pressure - venules_pressure) /q_posterior_tibial_T4_R236,
              C_posterior_tibial_T4_R236 = stressed_volume/tissue_pressure*qf_posterior_tibial_T4_R236,
              Zpv_posterior_tibial_T4_R236 = total_zpv*qf_posterior_tibial_T4_R236,
              Ra_internal_iliac_T1_L196 = (arterioles_pressure - tissue_pressure)/q_internal_iliac_T1_L196,
              Rv_internal_iliac_T1_L196 = (tissue_pressure - venules_pressure) /q_internal_iliac_T1_L196,
              C_internal_iliac_T1_L196 = stressed_volume/tissue_pressure*qf_internal_iliac_T1_L196,
              Zpv_internal_iliac_T1_L196 = total_zpv*qf_internal_iliac_T1_L196,
              Ra_profundus_T2_L202 = (arterioles_pressure - tissue_pressure)/q_profundus_T2_L202,
              Rv_profundus_T2_L202 = (tissue_pressure - venules_pressure) /q_profundus_T2_L202,
              C_profundus_T2_L202 = stressed_volume/tissue_pressure*qf_profundus_T2_L202,
              Zpv_profundus_T2_L202 = total_zpv*qf_profundus_T2_L202,
              Ra_anterior_tibial_T3_L208 = (arterioles_pressure - tissue_pressure)/q_anterior_tibial_T3_L208,
              Rv_anterior_tibial_T3_L208 = (tissue_pressure - venules_pressure) /q_anterior_tibial_T3_L208,
              C_anterior_tibial_T3_L208 = stressed_volume/tissue_pressure*qf_anterior_tibial_T3_L208,
              Zpv_anterior_tibial_T3_L208 = total_zpv*qf_anterior_tibial_T3_L208,
              Ra_posterior_tibial_T4_L214 = (arterioles_pressure - tissue_pressure)/q_posterior_tibial_T4_L214,
              Rv_posterior_tibial_T4_L214 = (tissue_pressure - venules_pressure) /q_posterior_tibial_T4_L214,
              C_posterior_tibial_T4_L214 = stressed_volume/tissue_pressure*qf_posterior_tibial_T4_L214,
              Zpv_posterior_tibial_T4_L214 = total_zpv*qf_posterior_tibial_T4_L214,
              Ra_ulnar_T2_R42 = (arterioles_pressure - tissue_pressure)/q_ulnar_T2_R42,
              Rv_ulnar_T2_R42 = (tissue_pressure - venules_pressure) /q_ulnar_T2_R42,
              C_ulnar_T2_R42 = stressed_volume/tissue_pressure*qf_ulnar_T2_R42,
              Zpv_ulnar_T2_R42 = total_zpv*qf_ulnar_T2_R42,
              Ra_radial_T1_R44 = (arterioles_pressure - tissue_pressure)/q_radial_T1_R44,
              Rv_radial_T1_R44 = (tissue_pressure - venules_pressure) /q_radial_T1_R44,
              C_radial_T1_R44 = stressed_volume/tissue_pressure*qf_radial_T1_R44,
              Zpv_radial_T1_R44 = total_zpv*qf_radial_T1_R44,
              Ra_ulnar_T2_L90 = (arterioles_pressure - tissue_pressure)/q_ulnar_T2_L90,
              Rv_ulnar_T2_L90 = (tissue_pressure - venules_pressure) /q_ulnar_T2_L90,
              C_ulnar_T2_L90 = stressed_volume/tissue_pressure*qf_ulnar_T2_L90,
              Zpv_ulnar_T2_L90 = total_zpv*qf_ulnar_T2_L90,
              Ra_radial_T1_L92 = (arterioles_pressure - tissue_pressure)/q_radial_T1_L92,
              Rv_radial_T1_L92 = (tissue_pressure - venules_pressure) /q_radial_T1_L92,
              C_radial_T1_L92 = stressed_volume/tissue_pressure*qf_radial_T1_L92,
              Zpv_radial_T1_L92 = total_zpv*qf_radial_T1_L92,
              Ra_internal_carotid_R8_C = (arterioles_pressure - tissue_pressure)/q_internal_carotid_R8_C,
              Rv_internal_carotid_R8_C = (tissue_pressure - venules_pressure) /q_internal_carotid_R8_C,
              C_internal_carotid_R8_C = stressed_volume/tissue_pressure*qf_internal_carotid_R8_C,
              Zpv_internal_carotid_R8_C = total_zpv*qf_internal_carotid_R8_C,
              Ra_external_carotid_T2_R26 = (arterioles_pressure - tissue_pressure)/q_external_carotid_T2_R26,
              Rv_external_carotid_T2_R26 = (tissue_pressure - venules_pressure) /q_external_carotid_T2_R26,
              C_external_carotid_T2_R26 = stressed_volume/tissue_pressure*qf_external_carotid_T2_R26,
              Zpv_external_carotid_T2_R26 = total_zpv*qf_external_carotid_T2_R26,
              Ra_internal_carotid_L50_C = (arterioles_pressure - tissue_pressure)/q_internal_carotid_L50_C,
              Rv_internal_carotid_L50_C = (tissue_pressure - venules_pressure) /q_internal_carotid_L50_C,
              C_internal_carotid_L50_C = stressed_volume/tissue_pressure*qf_internal_carotid_L50_C,
              Zpv_internal_carotid_L50_C = total_zpv*qf_internal_carotid_L50_C,
              Ra_external_carotid_T2_L62 = (arterioles_pressure - tissue_pressure)/q_external_carotid_T2_L62,
              Rv_external_carotid_T2_L62 = (tissue_pressure - venules_pressure) /q_external_carotid_T2_L62,
              C_external_carotid_T2_L62 = stressed_volume/tissue_pressure*qf_external_carotid_T2_L62,
              Zpv_external_carotid_T2_L62 = total_zpv*qf_external_carotid_T2_L62,
              Ra_vertebral_L2 = (arterioles_pressure - tissue_pressure)/q_vertebral_L2,
              Rv_vertebral_L2 = (tissue_pressure - venules_pressure) /q_vertebral_L2,
              C_vertebral_L2 = stressed_volume/tissue_pressure*qf_vertebral_L2,
              Zpv_vertebral_L2 = total_zpv*qf_vertebral_L2,
              Ra_vertebral_R272 = (arterioles_pressure - tissue_pressure)/q_vertebral_R272,
              Rv_vertebral_R272 = (tissue_pressure - venules_pressure) /q_vertebral_R272,
              C_vertebral_R272 = stressed_volume/tissue_pressure*qf_vertebral_R272,
              Zpv_vertebral_R272 = total_zpv*qf_vertebral_R272,
              Ra_splachnic_tissue = (arterioles_pressure - tissue_pressure)/q_splachnic_tissue,
              Rv_splachnic_tissue = (tissue_pressure - venules_pressure) /q_splachnic_tissue,
              C_splachnic_tissue = stressed_volume/tissue_pressure*qf_splachnic_tissue,
              Zpv_splachnic_tissue = total_zpv*qf_splachnic_tissue,
              Ra_cardiac_tissue = (arterioles_pressure - tissue_pressure)/q_cardiac_tissue,
              Rv_cardiac_tissue = (tissue_pressure - venules_pressure) /q_cardiac_tissue,
              C_cardiac_tissue = stressed_volume/tissue_pressure*qf_cardiac_tissue,
              Zpv_cardiac_tissue = total_zpv*qf_cardiac_tissue);
            import Physiolibrary.Types.*;

          parameter Pressure arterioles_pressure=13332;
          parameter Pressure venules_pressure=666.6;
          parameter Volume total_zpv=0.002304;
          parameter Volume stressed_volume=0.000795 annotation(Evaluate = false);
          parameter VolumeFlowRate cardiac_output=9.98e-5;

          parameter Fraction qf_celiac_trunk_C116=0.124          "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_renal_L166=0.112                 "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_renal_R178=0.111                 "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_internal_iliac_T1_R218=0.061     "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_profundus_T2_R224=0.07           "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_anterior_tibial_T3_R230=0.009    "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_posterior_tibial_T4_R236=0.01    "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_internal_iliac_T1_L196=0.061     "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_profundus_T2_L202=0.07           "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_anterior_tibial_T3_L208=0.009    "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_posterior_tibial_T4_L214=0.01    "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_ulnar_T2_R42=0.021               "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_radial_T1_R44=0.017              "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_ulnar_T2_L90=0.021               "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_radial_T1_L92=0.018              "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_internal_carotid_R8_C=0.025      "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_external_carotid_T2_R26=0.025    "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_internal_carotid_L50_C=0.025     "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_external_carotid_T2_L62=0.025    "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_vertebral_L2=0.023               "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_vertebral_R272=0.023             "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_splachnic_tissue=0.09            "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));
          parameter Fraction qf_cardiac_tissue=0.04              "Fraction of tissue size, estimated from flow fraction" annotation(Dialog(tab="General", group="Flow fractions"));

          parameter VolumeFlowRate q_celiac_trunk_C116 =        cardiac_output*qf_celiac_trunk_C116 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_renal_L166 =               cardiac_output*qf_renal_L166 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_renal_R178 =               cardiac_output*qf_renal_R178 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_internal_iliac_T1_R218 =   cardiac_output*qf_internal_iliac_T1_R218 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_profundus_T2_R224 =        cardiac_output*qf_profundus_T2_R224 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_anterior_tibial_T3_R230 =  cardiac_output*qf_anterior_tibial_T3_R230 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_posterior_tibial_T4_R236 = cardiac_output*qf_posterior_tibial_T4_R236 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_internal_iliac_T1_L196 =   cardiac_output*qf_internal_iliac_T1_L196 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_profundus_T2_L202 =        cardiac_output*qf_profundus_T2_L202 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_anterior_tibial_T3_L208 =  cardiac_output*qf_anterior_tibial_T3_L208 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_posterior_tibial_T4_L214 = cardiac_output*qf_posterior_tibial_T4_L214 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_ulnar_T2_R42 =             cardiac_output*qf_ulnar_T2_R42 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_radial_T1_R44 =            cardiac_output*qf_radial_T1_R44 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_ulnar_T2_L90 =             cardiac_output*qf_ulnar_T2_L90 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_radial_T1_L92 =            cardiac_output*qf_radial_T1_L92 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_internal_carotid_R8_C =    cardiac_output*qf_internal_carotid_R8_C "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_external_carotid_T2_R26 =  cardiac_output*qf_external_carotid_T2_R26 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_internal_carotid_L50_C =   cardiac_output*qf_internal_carotid_L50_C "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_external_carotid_T2_L62 =  cardiac_output*qf_external_carotid_T2_L62 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_vertebral_L2 =             cardiac_output*qf_vertebral_L2 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_vertebral_R272 =           cardiac_output*qf_vertebral_R272 "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_splachnic_tissue =         cardiac_output*qf_splachnic_tissue "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));
          parameter VolumeFlowRate q_cardiac_tissue =           cardiac_output*qf_cardiac_tissue "Tissue flow" annotation(Dialog(tab="Calculated", group="Flows"));

          end SystemicTissueParameters_Calculated;

          model Parameters_Systemic "AdanVenousRed _7af7a4"
            parameter Real C_svl(unit = "m6.J-1") = 0.0037509e-6;
            parameter Real C_svn(unit = "m6.J-1") = 0.1125281e-6;
            parameter Real C_svc(unit = "m6.J-1") = 0.0375094e-6;
            parameter Real C_ivl(unit = "m6.J-1") = 0.0112528e-6;
            parameter Real C_ivn(unit = "m6.J-1") = 0.5626407e-6;
            parameter Real C_ivc(unit = "m6.J-1") = 0.1125281e-6;
            parameter Real R_svl(unit = "J.s.m-6") = 18.662e+6;
            parameter Real R_svn(unit = "J.s.m-6") = 3.999e+6;
            parameter Real R_svc(unit = "J.s.m-6") = 0.06665e+6;
            parameter Real R_ivl(unit = "J.s.m-6") = 5.332e+6;
            parameter Real R_ivn(unit = "J.s.m-6") = 1.1997e+6;
            parameter Real R_ivc(unit = "J.s.m-6") = 0.06665e+6;
            parameter Real I_svl(unit = "J.s2.m-6") = 0.1333e+6;
            parameter Real I_svn(unit = "J.s2.m-6") = 0.06665e+6;
            parameter Real I_svc(unit = "J.s2.m-6") = 0.06665e+6;
            parameter Real I_ivl(unit = "J.s2.m-6") = 0.1333e+6;
            parameter Real I_ivn(unit = "J.s2.m-6") = 0.06665e+6;
            parameter Real I_ivc(unit = "J.s2.m-6") = 0.06665e+6;
            parameter Real r_ascending_aorta_A(unit = "m") = 15.642e-03;
            parameter Real r_ascending_aorta_B(unit = "m") = 15.08e-03;
            parameter Real r_ascending_aorta_C(unit = "m") = 14.5305e-03;
            parameter Real r_ascending_aorta_D(unit = "m") = 13.914e-03;
            parameter Real r_aortic_arch_C2(unit = "m") = 13.3364e-03;
            parameter Real r_brachiocephalic_trunk_C4(unit = "m") = 6.41887e-03;
            parameter Real r_aortic_arch_C46(unit = "m") = 12.76710e-03;
            parameter Real r_aortic_arch_C64(unit = "m") = 12.42880e-03;
            parameter Real r_aortic_arch_C94(unit = "m") = 11.7401e-03;
            parameter Real r_thoracic_aorta_C96(unit = "m") = 10.4579e-03;
            parameter Real r_thoracic_aorta_C100(unit = "m") = 10.2897e-03;
            parameter Real r_thoracic_aorta_C104(unit = "m") = 10.0681e-03;
            parameter Real r_thoracic_aorta_C108(unit = "m") = 9.87279e-03;
            parameter Real r_thoracic_aorta_C112(unit = "m") = 8.47543e-03;
            parameter Real r_abdominal_aorta_C114(unit = "m") = 7.51533e-03;
            parameter Real r_abdominal_aorta_C136(unit = "m") = 7.42666e-03;
            parameter Real r_abdominal_aorta_C164(unit = "m") = 7.29199e-03;
            parameter Real r_abdominal_aorta_C176(unit = "m") = 7.18902e-03;
            parameter Real r_abdominal_aorta_C188(unit = "m") = 6.79934e-03;
            parameter Real r_abdominal_aorta_C192(unit = "m") = 6.12422e-03;
            parameter Real r_posterior_intercostal_T1_R98(unit = "m") = 1.4e-03;
            parameter Real r_posterior_intercostal_T1_L102(unit = "m") = 1.4e-03;
            parameter Real r_posterior_intercostal_T2_R106(unit = "m") = 1.55e-03;
            parameter Real r_posterior_intercostal_T2_L110(unit = "m") = 1.55e-03;
            parameter Real r_celiac_trunk_C116(unit = "m") = 3.29653e-03;
            parameter Real r_splenic_T2_C118(unit = "m") = 2.16682e-03;
            parameter Real r_left_gastric_T3_C120(unit = "m") = 1.50666e-03;
            parameter Real r_splenic_T2_C122(unit = "m") = 2.16682e-03;
            parameter Real r_dorsal_pancreatic_T1_C124(unit = "m") = 0.558491e-03;
            parameter Real r_splenic_T2_C126(unit = "m") = 2.16682e-03;
            parameter Real r_common_hepatic_C128(unit = "m") = 2.68614e-03;
            parameter Real r_hepatic_artery_proper_C130(unit = "m") = 1.77555e-03;
            parameter Real r_hepatic_artery_proper_left_branch_C132(unit = "m") = 1.1663e-03;
            parameter Real r_hepatic_artery_proper_right_branch_C134(unit = "m") = 1.42068e-03;
            parameter Real r_superior_mesenteric_T4_C138(unit = "m") = 3.72737e-03;
            parameter Real r_middle_colic_T8_C140(unit = "m") = 1.425e-03;
            parameter Real r_superior_mesenteric_T4_C142(unit = "m") = 3.40146e-03;
            parameter Real r_jejunal_3_T10_C144(unit = "m") = 1.58037e-03;
            parameter Real r_superior_mesenteric_T4_C146(unit = "m") = 3.06914e-03;
            parameter Real r_jejunal_6_T11_C148(unit = "m") = 1.58037e-03;
            parameter Real r_superior_mesenteric_T4_C150(unit = "m") = 2.85201e-03;
            parameter Real r_ileocolic_T9_C152(unit = "m") = 2.0e-03;
            parameter Real r_superior_mesenteric_T4_C154(unit = "m") = 2.69257e-03;
            parameter Real r_ileal_4_T12_C156(unit = "m") = 1.8015e-03;
            parameter Real r_superior_mesenteric_T4_C158(unit = "m") = 2.49385e-03;
            parameter Real r_ileal_6_T13_C160(unit = "m") = 1.80150e-03;
            parameter Real r_superior_mesenteric_T4_C162(unit = "m") = 2.18233e-03;
            parameter Real r_renal_L166(unit = "m") = 2.73574e-03;
            parameter Real r_renal_anterior_branch_L168(unit = "m") = 2.48193e-03;
            parameter Real r_inferior_segmental_T5_L170(unit = "m") = 1.92732e-03;
            parameter Real r_superior_segmental_T4_L172(unit = "m") = 1.92732e-03;
            parameter Real r_renal_posterior_branch_T3_L174(unit = "m") = 1.59319e-03;
            parameter Real r_renal_R178(unit = "m") = 2.96767e-03;
            parameter Real r_renal_anterior_branch_R180(unit = "m") = 2.48193e-03;
            parameter Real r_superior_segmental_T4_R182(unit = "m") = 1.92732e-03;
            parameter Real r_inferior_segmental_T5_R184(unit = "m") = 1.92732e-03;
            parameter Real r_renal_posterior_branch_T3_R186(unit = "m") = 1.59319e-03;
            parameter Real r_inferior_mesenteric_T5_C190(unit = "m") = 2.07748e-03;
            parameter Real r_common_iliac_R216(unit = "m") = 4.30633e-03;
            parameter Real r_internal_iliac_T1_R218(unit = "m") = 2.81829e-03;
            parameter Real r_external_iliac_R220(unit = "m") = 3.28821e-03;
            parameter Real r_femoral_R222(unit = "m") = 3.17347e-03;
            parameter Real r_profundus_T2_R224(unit = "m") = 2.14445e-03;
            parameter Real r_femoral_R226(unit = "m") = 2.89103e-03;
            parameter Real r_popliteal_R228(unit = "m") = 2.51554e-03;
            parameter Real r_anterior_tibial_T3_R230(unit = "m") = 1.1663e-03;
            parameter Real r_popliteal_R232(unit = "m") = 2.35852e-03;
            parameter Real r_tibiofibular_trunk_R234(unit = "m") = 2.34646e-03;
            parameter Real r_posterior_tibial_T4_R236(unit = "m") = 1.22936e-03;
            parameter Real r_common_iliac_L194(unit = "m") = 4.28142e-03;
            parameter Real r_internal_iliac_T1_L196(unit = "m") = 2.81829e-03;
            parameter Real r_external_iliac_L198(unit = "m") = 3.28821e-03;
            parameter Real r_femoral_L200(unit = "m") = 3.17347e-03;
            parameter Real r_profundus_T2_L202(unit = "m") = 2.14445e-03;
            parameter Real r_femoral_L204(unit = "m") = 2.89103e-03;
            parameter Real r_popliteal_L206(unit = "m") = 2.51554e-03;
            parameter Real r_anterior_tibial_T3_L208(unit = "m") = 1.1663e-03;
            parameter Real r_popliteal_L210(unit = "m") = 2.35852e-03;
            parameter Real r_tibiofibular_trunk_L212(unit = "m") = 2.34646e-03;
            parameter Real r_posterior_tibial_T4_L214(unit = "m") = 1.22936e-03;
            parameter Real r_subclavian_R28(unit = "m") = 4.52027e-03;
            parameter Real r_subclavian_R30(unit = "m") = 3.32268e-03;
            parameter Real r_axillary_R32(unit = "m") = 2.18463e-03;
            parameter Real r_brachial_R34(unit = "m") = 1.96732e-03;
            parameter Real r_ulnar_T2_R36(unit = "m") = 1.408e-03;
            parameter Real r_common_interosseous_R38(unit = "m") = 0.959006e-03;
            parameter Real r_posterior_interosseous_T3_R40(unit = "m") = 0.675992e-03;
            parameter Real r_ulnar_T2_R42(unit = "m") = 1.408e-03;
            parameter Real r_radial_T1_R44(unit = "m") = 1.378e-03;
            parameter Real r_subclavian_L66(unit = "m") = 3.99235e-03;
            parameter Real r_subclavian_L78(unit = "m") = 2.90824e-03;
            parameter Real r_axillary_L80(unit = "m") = 2.18463e-03;
            parameter Real r_brachial_L82(unit = "m") = 1.96732e-03;
            parameter Real r_ulnar_T2_L84(unit = "m") = 1.408e-03;
            parameter Real r_common_interosseous_L86(unit = "m") = 0.959006e-03;
            parameter Real r_posterior_interosseous_T3_L88(unit = "m") = 0.675992e-03;
            parameter Real r_ulnar_T2_L90(unit = "m") = 1.408e-03;
            parameter Real r_radial_T1_L92(unit = "m") = 1.378e-03;
            parameter Real r_common_carotid_R6_A(unit = "m") = 4.43053e-03;
            parameter Real r_common_carotid_R6_B(unit = "m") = 4.137e-03;
            parameter Real r_common_carotid_R6_C(unit = "m") = 3.64938e-03;
            parameter Real r_internal_carotid_R8_A(unit = "m") = 2.53763e-03;
            parameter Real r_internal_carotid_R8_B(unit = "m") = 2.04793e-03;
            parameter Real r_internal_carotid_R8_C(unit = "m") = 1.56726e-03;
            parameter Real r_external_carotid_T2_R26(unit = "m") = 2.26547e-03;
            parameter Real r_common_carotid_L48_A(unit = "m") = 4.36635e-03;
            parameter Real r_common_carotid_L48_B(unit = "m") = 4.12756e-03;
            parameter Real r_common_carotid_L48_C(unit = "m") = 3.92047e-03;
            parameter Real r_common_carotid_L48_D(unit = "m") = 3.57978e-03;
            parameter Real r_internal_carotid_L50_A(unit = "m") = 2.53763e-03;
            parameter Real r_internal_carotid_L50_B(unit = "m") = 2.04793e-03;
            parameter Real r_internal_carotid_L50_C(unit = "m") = 1.56726e-03;
            parameter Real r_external_carotid_T2_L62(unit = "m") = 2.26547e-03;
            parameter Real r_vertebral_L2(unit = "m") = 0.133527e-2;
            parameter Real r_vertebral_R272(unit = "m") = 0.133527e-2;
            parameter Real r_basilar_C4(unit = "m") = 0.172394e-2;
            parameter Real r_posterior_cerebral_precommunicating_part_L6(unit = "m") = 0.0816459e-2;
            parameter Real r_posterior_cerebral_precommunicating_part_R204(unit = "m") = 0.0816459e-2;
            parameter Real r_posterior_communicating_L8(unit = "m") = 0.0494463e-2;
            parameter Real r_posterior_communicating_R206(unit = "m") = 0.0494463e-2;
            parameter Real r_posterior_cerebral_postcommunicating_part_L12(unit = "m") = 0.0869072e-2;
            parameter Real r_posterior_cerebral_postcommunicating_part_R208(unit = "m") = 0.0869072e-2;
            parameter Real r_occipital_lateral_L14(unit = "m") = 0.064999e-2;
            parameter Real r_occipital_lateral_R210(unit = "m") = 0.0649994e-2;
            parameter Real r_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "m") = 0.06e-2;
            parameter Real r_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "m") = 0.06e-2;
            parameter Real r_occipital_lateral_L18(unit = "m") = 0.0649994e-2;
            parameter Real r_occipital_lateral_R214(unit = "m") = 0.0649994e-2;
            parameter Real r_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "m") = 0.028e-2;
            parameter Real r_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "m") = 0.028e-2;
            parameter Real r_occipital_lateral_L22(unit = "m") = 0.0649994e-2;
            parameter Real r_occipital_lateral_R218(unit = "m") = 0.0649994e-2;
            parameter Real r_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "m") = 0.0375006e-2;
            parameter Real r_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "m") = 0.0375006e-2;
            parameter Real r_medial_occipital_L26(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_R222(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_dorsal_branch_to_corpus_callosum_L28(unit = "m") = 0.0349979e-2;
            parameter Real r_medial_occipital_dorsal_branch_to_corpus_callosum_R224(unit = "m") = 0.0349979e-2;
            parameter Real r_pericallosal_parieto_occipital_branch_T60_L30(unit = "m") = 0.0421522e-2;
            parameter Real r_pericallosal_parieto_occipital_branch_T124_R226(unit = "m") = 0.0421522e-2;
            parameter Real r_pericallosal_L32(unit = "m") = 0.0800314e-2;
            parameter Real r_pericallosal_R228(unit = "m") = 0.0800314e-2;
            parameter Real r_pericallosal_precuneal_branch_T61_L34(unit = "m") = 0.0477132e-2;
            parameter Real r_pericallosal_precuneal_branch_T125_R230(unit = "m") = 0.0477132e-2;
            parameter Real r_pericallosal_L36(unit = "m") = 0.0800314e-2;
            parameter Real r_pericallosal_R232(unit = "m") = 0.0800314e-2;
            parameter Real r_anterior_cerebral_L38(unit = "m") = 0.0965045e-2;
            parameter Real r_anterior_cerebral_R234(unit = "m") = 0.0965045e-2;
            parameter Real r_distal_medial_striate_T44_L40(unit = "m") = 0.027251e-2;
            parameter Real r_distal_medial_striate_T109_R236(unit = "m") = 0.027251e-2;
            parameter Real r_anterior_cerebral_L42(unit = "m") = 0.0965045e-2;
            parameter Real r_anterior_cerebral_R238(unit = "m") = 0.0965045e-2;
            parameter Real r_anterior_communicating_C44(unit = "m") = 0.0656645e-2;
            parameter Real r_anterior_cerebral_L110(unit = "m") = 0.0965045e-2;
            parameter Real r_anterior_cerebral_R46(unit = "m") = 0.0965045e-2;
            parameter Real r_internal_carotid_L112(unit = "m") = 0.132843e-2;
            parameter Real r_internal_carotid_R48(unit = "m") = 0.132843e-2;
            parameter Real r_middle_cerebral_L114(unit = "m") = 0.104132e-2;
            parameter Real r_middle_cerebral_R52(unit = "m") = 0.104132e-2;
            parameter Real r_anterior_choroidal_T34_L116(unit = "m") = 0.0519606e-2;
            parameter Real r_anterior_choroidal_T98_R54(unit = "m") = 0.0519606e-2;
            parameter Real r_middle_cerebral_L118(unit = "m") = 0.104132e-2;
            parameter Real r_middle_cerebral_R56(unit = "m") = 0.104132e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_L120(unit = "m") = 0.0877201e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_R58(unit = "m") = 0.0877201e-2;
            parameter Real r_lateral_frontobasal_T45_L122(unit = "m") = 0.0385346e-2;
            parameter Real r_lateral_frontobasal_T110_R60(unit = "m") = 0.0385346e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_L124(unit = "m") = 0.0877201e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_R62(unit = "m") = 0.0877201e-2;
            parameter Real r_prefrontal_T65_L126(unit = "m") = 0.0480986e-2;
            parameter Real r_prefrontal_T130_R64(unit = "m") = 0.0480986e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_L128(unit = "m") = 0.0877201e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_R66(unit = "m") = 0.0877201e-2;
            parameter Real r_artery_of_precentral_sulcus_T38_L130(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_precentral_sulcus_T103_R68(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_central_sulcus_T36_L132(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_central_sulcus_T101_R70(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_precentral_sulcus_T38_L134(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_precentral_sulcus_T103_R72(unit = "m") = 0.0480986e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L136(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R74(unit = "m") = 0.0816459e-2;
            parameter Real r_polar_temporal_T63_L138(unit = "m") = 0.0309894e-2;
            parameter Real r_polar_temporal_T127_R76(unit = "m") = 0.0309894e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L140(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R78(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "m") = 0.0442556e-2;
            parameter Real r_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "m") = 0.0442556e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L144(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R82(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_middle_temporal_branch_T57_L146(unit = "m") = 0.046174e-2;
            parameter Real r_middle_cerebral_middle_temporal_branch_T121_R84(unit = "m") = 0.046174e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L148(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R86(unit = "m") = 0.0816459e-2;
            parameter Real r_artery_of_postcentral_sulcus_T37_L150(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_postcentral_sulcus_T102_R88(unit = "m") = 0.0480986e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L152(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R90(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_posterior_temporal_branch_T58_L154(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporal_branch_T122_R92(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L160(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R98(unit = "m") = 0.0816459e-2;
            parameter Real r_anterior_parietal_T35_L162(unit = "m") = 0.0442556e-2;
            parameter Real r_anterior_parietal_T100_R100(unit = "m") = 0.0442556e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L164(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R102(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_branch_to_angular_gyrus_T56_L166(unit = "m") = 0.0558491e-2;
            parameter Real r_middle_cerebral_branch_to_angular_gyrus_T120_R104(unit = "m") = 0.0558491e-2;
            parameter Real r_posterior_parietal_T64_L168(unit = "m") = 0.0519606e-2;
            parameter Real r_posterior_parietal_T129_R106(unit = "m") = 0.0519606e-2;
            parameter Real r_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "m") = 0.0558491e-2;
            parameter Real r_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "m") = 0.0558491e-2;
            parameter Real r_callosomarginal_L172(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_R240(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "m") = 0.0465585e-2;
            parameter Real r_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "m") = 0.0465585e-2;
            parameter Real r_callosomarginal_L176(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_R244(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "m") = 0.0521563e-2;
            parameter Real r_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "m") = 0.0521563e-2;
            parameter Real r_callosomarginal_L180(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_R248(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_cingular_branch_T40_L182(unit = "m") = 0.0475194e-2;
            parameter Real r_callosomarginal_cingular_branch_T105_R250(unit = "m") = 0.0475194e-2;
            parameter Real r_callosomarginal_L184(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_R252(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_paracentral_branch_T42_L186(unit = "m") = 0.0475194e-2;
            parameter Real r_callosomarginal_paracentral_branch_T107_R254(unit = "m") = 0.0475194e-2;
            parameter Real r_medial_occipital_L188(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_R256(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_occipitotemporal_branch_T52_L190(unit = "m") = 0.0349979e-2;
            parameter Real r_medial_occipital_occipitotemporal_branch_T80_R258(unit = "m") = 0.0349979e-2;
            parameter Real r_medial_occipital_L192(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_R260(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_parieto_occipital_branch_T54_L194(unit = "m") = 0.0500001e-2;
            parameter Real r_medial_occipital_parieto_occipital_branch_T118_R262(unit = "m") = 0.0500001e-2;
            parameter Real r_medial_occipital_parietal_branch_T53_L196(unit = "m") = 0.0295002e-2;
            parameter Real r_medial_occipital_parietal_branch_T81_R264(unit = "m") = 0.0295002e-2;
            parameter Real r_medial_occipital_parieto_occipital_branch_T54_L198(unit = "m") = 0.0500001e-2;
            parameter Real r_medial_occipital_parieto_occipital_branch_T118_R266(unit = "m") = 0.0500001e-2;
            parameter Real r_medial_occipital_L200(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_R268(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_calcarine_branch_T51_L202(unit = "m") = 0.0349979e-2;
            parameter Real r_medial_occipital_calcarine_branch_T79_R270(unit = "m") = 0.0349979e-2;
            parameter Real l_ascending_aorta_A(unit = "m") = 15.3234e-03;
            parameter Real l_ascending_aorta_B(unit = "m") = 14.796e-03;
            parameter Real l_ascending_aorta_C(unit = "m") = 14.796e-03;
            parameter Real l_ascending_aorta_D(unit = "m") = 14.796e-03;
            parameter Real l_aortic_arch_C2(unit = "m") = 14.796e-03;
            parameter Real l_brachiocephalic_trunk_C4(unit = "m") = 47.3822e-03;
            parameter Real l_aortic_arch_C46(unit = "m") = 9.60849e-03;
            parameter Real l_aortic_arch_C64(unit = "m") = 6.97955e-03;
            parameter Real l_aortic_arch_C94(unit = "m") = 43.2111e-03;
            parameter Real l_thoracic_aorta_C96(unit = "m") = 9.89803e-03;
            parameter Real l_thoracic_aorta_C100(unit = "m") = 7.88038e-03;
            parameter Real l_thoracic_aorta_C104(unit = "m") = 15.5561e-03;
            parameter Real l_thoracic_aorta_C108(unit = "m") = 5.32705e-03;
            parameter Real l_thoracic_aorta_C112(unit = "m") = 121.566e-03;
            parameter Real l_abdominal_aorta_C114(unit = "m") = 3.24767e-03;
            parameter Real l_abdominal_aorta_C136(unit = "m") = 13.9886e-03;
            parameter Real l_abdominal_aorta_C164(unit = "m") = 4.31913e-03;
            parameter Real l_abdominal_aorta_C176(unit = "m") = 11.9773e-03;
            parameter Real l_abdominal_aorta_C188(unit = "m") = 54.0907e-03;
            parameter Real l_abdominal_aorta_C192(unit = "m") = 42.231e-03;
            parameter Real l_posterior_intercostal_T1_R98(unit = "m") = 197.232e-03;
            parameter Real l_posterior_intercostal_T1_L102(unit = "m") = 178.519e-03;
            parameter Real l_posterior_intercostal_T2_R106(unit = "m") = 201.883e-03;
            parameter Real l_posterior_intercostal_T2_L110(unit = "m") = 185.547e-03;
            parameter Real l_celiac_trunk_C116(unit = "m") = 16.9374e-03;
            parameter Real l_splenic_T2_C118(unit = "m") = 3.9576e-03;
            parameter Real l_left_gastric_T3_C120(unit = "m") = 94.8344e-03;
            parameter Real l_splenic_T2_C122(unit = "m") = 2.79812e-03;
            parameter Real l_dorsal_pancreatic_T1_C124(unit = "m") = 33.4687e-03;
            parameter Real l_splenic_T2_C126(unit = "m") = 63.2749e-03;
            parameter Real l_common_hepatic_C128(unit = "m") = 69.3076e-03;
            parameter Real l_hepatic_artery_proper_C130(unit = "m") = 16.8059e-03;
            parameter Real l_hepatic_artery_proper_left_branch_C132(unit = "m") = 164.224e-03;
            parameter Real l_hepatic_artery_proper_right_branch_C134(unit = "m") = 80.0632e-03;
            parameter Real l_superior_mesenteric_T4_C138(unit = "m") = 49.5492e-03;
            parameter Real l_middle_colic_T8_C140(unit = "m") = 116.298e-03;
            parameter Real l_superior_mesenteric_T4_C142(unit = "m") = 35.1664e-03;
            parameter Real l_jejunal_3_T10_C144(unit = "m") = 47.6944e-03;
            parameter Real l_superior_mesenteric_T4_C146(unit = "m") = 32.2488e-03;
            parameter Real l_jejunal_6_T11_C148(unit = "m") = 63.8535e-03;
            parameter Real l_superior_mesenteric_T4_C150(unit = "m") = 16.7458e-03;
            parameter Real l_ileocolic_T9_C152(unit = "m") = 46.8332e-03;
            parameter Real l_superior_mesenteric_T4_C154(unit = "m") = 23.0546e-03;
            parameter Real l_ileal_4_T12_C156(unit = "m") = 45.6984e-03;
            parameter Real l_superior_mesenteric_T4_C158(unit = "m") = 20.5397e-03;
            parameter Real l_ileal_6_T13_C160(unit = "m") = 29.1584e-03;
            parameter Real l_superior_mesenteric_T4_C162(unit = "m") = 39.4879e-03;
            parameter Real l_renal_L166(unit = "m") = 22.0037e-03;
            parameter Real l_renal_anterior_branch_L168(unit = "m") = 10.8789e-03;
            parameter Real l_inferior_segmental_T5_L170(unit = "m") = 40.8761e-03;
            parameter Real l_superior_segmental_T4_L172(unit = "m") = 29.7265e-03;
            parameter Real l_renal_posterior_branch_T3_L174(unit = "m") = 22.3608e-03;
            parameter Real l_renal_R178(unit = "m") = 37.7403e-03;
            parameter Real l_renal_anterior_branch_R180(unit = "m") = 10.8792e-03;
            parameter Real l_superior_segmental_T4_R182(unit = "m") = 29.7263e-03;
            parameter Real l_inferior_segmental_T5_R184(unit = "m") = 40.8756e-03;
            parameter Real l_renal_posterior_branch_T3_R186(unit = "m") = 22.36e-03;
            parameter Real l_inferior_mesenteric_T5_C190(unit = "m") = 90.3282e-03;
            parameter Real l_common_iliac_R216(unit = "m") = 76.4393e-03;
            parameter Real l_internal_iliac_T1_R218(unit = "m") = 72.5302e-03;
            parameter Real l_external_iliac_R220(unit = "m") = 102.358e-03;
            parameter Real l_femoral_R222(unit = "m") = 31.5982e-03;
            parameter Real l_profundus_T2_R224(unit = "m") = 238.438e-03;
            parameter Real l_femoral_R226(unit = "m") = 319.297e-03;
            parameter Real l_popliteal_R228(unit = "m") = 132.06e-03;
            parameter Real l_anterior_tibial_T3_R230(unit = "m") = 386.388e-03;
            parameter Real l_popliteal_R232(unit = "m") = 8.80051e-03;
            parameter Real l_tibiofibular_trunk_R234(unit = "m") = 36.1667e-03;
            parameter Real l_posterior_tibial_T4_R236(unit = "m") = 382.987e-03;
            parameter Real l_common_iliac_L194(unit = "m") = 74.0524e-03;
            parameter Real l_internal_iliac_T1_L196(unit = "m") = 72.5301e-03;
            parameter Real l_external_iliac_L198(unit = "m") = 102.358e-03;
            parameter Real l_femoral_L200(unit = "m") = 31.5982e-03;
            parameter Real l_profundus_T2_L202(unit = "m") = 238.438e-03;
            parameter Real l_femoral_L204(unit = "m") = 319.297e-03;
            parameter Real l_popliteal_L206(unit = "m") = 132.059e-03;
            parameter Real l_anterior_tibial_T3_L208(unit = "m") = 386.389e-03;
            parameter Real l_popliteal_L210(unit = "m") = 8.80046e-03;
            parameter Real l_tibiofibular_trunk_L212(unit = "m") = 36.1676e-03;
            parameter Real l_posterior_tibial_T4_L214(unit = "m") = 382.987e-03;
            parameter Real l_subclavian_R28(unit = "m") = 15.7469e-03;
            parameter Real l_subclavian_R30(unit = "m") = 41.1419e-03;
            parameter Real l_axillary_R32(unit = "m") = 120.021e-03;
            parameter Real l_brachial_R34(unit = "m") = 223.119e-03;
            parameter Real l_ulnar_T2_R36(unit = "m") = 29.7599e-03;
            parameter Real l_common_interosseous_R38(unit = "m") = 16.2682e-03;
            parameter Real l_posterior_interosseous_T3_R40(unit = "m") = 231.694e-03;
            parameter Real l_ulnar_T2_R42(unit = "m") = 239.276e-03;
            parameter Real l_radial_T1_R44(unit = "m") = 302.156e-03;
            parameter Real l_subclavian_L66(unit = "m") = 49.4669e-03;
            parameter Real l_subclavian_L78(unit = "m") = 41.1396e-03;
            parameter Real l_axillary_L80(unit = "m") = 120.021e-03;
            parameter Real l_brachial_L82(unit = "m") = 223.119e-03;
            parameter Real l_ulnar_T2_L84(unit = "m") = 29.7594e-03;
            parameter Real l_common_interosseous_L86(unit = "m") = 16.2681e-03;
            parameter Real l_posterior_interosseous_T3_L88(unit = "m") = 231.695e-03;
            parameter Real l_ulnar_T2_L90(unit = "m") = 239.277e-03;
            parameter Real l_radial_T1_L92(unit = "m") = 302.155e-03;
            parameter Real l_common_carotid_R6_A(unit = "m") = 27.0844e-03;
            parameter Real l_common_carotid_R6_B(unit = "m") = 27.0844e-03;
            parameter Real l_common_carotid_R6_C(unit = "m") = 27.0844e-03;
            parameter Real l_internal_carotid_R8_A(unit = "m") = 45.036e-03;
            parameter Real l_internal_carotid_R8_B(unit = "m") = 45.036e-03;
            parameter Real l_internal_carotid_R8_C(unit = "m") = 45.036e-03;
            parameter Real l_external_carotid_T2_R26(unit = "m") = 61.0125e-03;
            parameter Real l_common_carotid_L48_A(unit = "m") = 30.339e-03;
            parameter Real l_common_carotid_L48_B(unit = "m") = 30.339e-03;
            parameter Real l_common_carotid_L48_C(unit = "m") = 30.339e-03;
            parameter Real l_common_carotid_L48_D(unit = "m") = 30.339e-03;
            parameter Real l_internal_carotid_L50_A(unit = "m") = 45.036e-03;
            parameter Real l_internal_carotid_L50_B(unit = "m") = 45.036e-03;
            parameter Real l_internal_carotid_L50_C(unit = "m") = 45.036e-03;
            parameter Real l_external_carotid_T2_L62(unit = "m") = 61.0127e-03;
            parameter Real l_vertebral_L2(unit = "m") = 20.9765e-2;
            parameter Real l_vertebral_R272(unit = "m") = 21.0146e-2;
            parameter Real l_basilar_C4(unit = "m") = 2.26443e-2;
            parameter Real l_posterior_cerebral_precommunicating_part_L6(unit = "m") = 0.697753e-2;
            parameter Real l_posterior_cerebral_precommunicating_part_R204(unit = "m") = 0.77827e-2;
            parameter Real l_posterior_communicating_L8(unit = "m") = 1.65974e-2;
            parameter Real l_posterior_communicating_R206(unit = "m") = 1.6597e-2;
            parameter Real l_posterior_cerebral_postcommunicating_part_L12(unit = "m") = 1.28091e-2;
            parameter Real l_posterior_cerebral_postcommunicating_part_R208(unit = "m") = 1.28083e-2;
            parameter Real l_occipital_lateral_L14(unit = "m") = 0.472985e-2;
            parameter Real l_occipital_lateral_R210(unit = "m") = 0.472973e-2;
            parameter Real l_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "m") = 2.61986e-2;
            parameter Real l_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "m") = 2.61979e-2;
            parameter Real l_occipital_lateral_L18(unit = "m") = 1.11052e-2;
            parameter Real l_occipital_lateral_R214(unit = "m") = 1.11056e-2;
            parameter Real l_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "m") = 2.1112e-2;
            parameter Real l_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "m") = 2.1112e-2;
            parameter Real l_occipital_lateral_L22(unit = "m") = 1.2455e-2;
            parameter Real l_occipital_lateral_R218(unit = "m") = 1.2455e-2;
            parameter Real l_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "m") = 2.05518e-2;
            parameter Real l_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "m") = 2.05518e-2;
            parameter Real l_medial_occipital_L26(unit = "m") = 3.21752e-2;
            parameter Real l_medial_occipital_R222(unit = "m") = 3.21754e-2;
            parameter Real l_medial_occipital_dorsal_branch_to_corpus_callosum_L28(unit = "m") = 2.51851e-2;
            parameter Real l_medial_occipital_dorsal_branch_to_corpus_callosum_R224(unit = "m") = 2.51847e-2;
            parameter Real l_pericallosal_parieto_occipital_branch_T60_L30(unit = "m") = 4.1888e-2;
            parameter Real l_pericallosal_parieto_occipital_branch_T124_R226(unit = "m") = 4.18881e-2;
            parameter Real l_pericallosal_L32(unit = "m") = 1.5668e-2;
            parameter Real l_pericallosal_R228(unit = "m") = 1.5668e-2;
            parameter Real l_pericallosal_precuneal_branch_T61_L34(unit = "m") = 5.42988e-2;
            parameter Real l_pericallosal_precuneal_branch_T125_R230(unit = "m") = 5.42989e-2;
            parameter Real l_pericallosal_L36(unit = "m") = 5.57509e-2;
            parameter Real l_pericallosal_R232(unit = "m") = 5.57509e-2;
            parameter Real l_anterior_cerebral_L38(unit = "m") = 2.809e-2;
            parameter Real l_anterior_cerebral_R234(unit = "m") = 2.80898e-2;
            parameter Real l_distal_medial_striate_T44_L40(unit = "m") = 1.24626e-2;
            parameter Real l_distal_medial_striate_T109_R236(unit = "m") = 1.24626e-2;
            parameter Real l_anterior_cerebral_L42(unit = "m") = 0.114668e-2;
            parameter Real l_anterior_cerebral_R238(unit = "m") = 0.114733e-2;
            parameter Real l_anterior_communicating_C44(unit = "m") = 0.565531e-2;
            parameter Real l_anterior_cerebral_L110(unit = "m") = 1.05951e-2;
            parameter Real l_anterior_cerebral_R46(unit = "m") = 1.05945e-2;
            parameter Real l_internal_carotid_L112(unit = "m") = 0.196966e-2;
            parameter Real l_internal_carotid_R48(unit = "m") = 0.196955e-2;
            parameter Real l_middle_cerebral_L114(unit = "m") = 0.182233e-2;
            parameter Real l_middle_cerebral_R52(unit = "m") = 0.182229e-2;
            parameter Real l_anterior_choroidal_T34_L116(unit = "m") = 2.5869e-2;
            parameter Real l_anterior_choroidal_T98_R54(unit = "m") = 2.5869e-2;
            parameter Real l_middle_cerebral_L118(unit = "m") = 2.83007e-2;
            parameter Real l_middle_cerebral_R56(unit = "m") = 2.8301e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_L120(unit = "m") = 0.251165e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_R58(unit = "m") = 0.251165e-2;
            parameter Real l_lateral_frontobasal_T45_L122(unit = "m") = 4.32804e-2;
            parameter Real l_lateral_frontobasal_T110_R60(unit = "m") = 4.32805e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_L124(unit = "m") = 1.33091e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_R62(unit = "m") = 1.3309e-2;
            parameter Real l_prefrontal_T65_L126(unit = "m") = 10.0723e-2;
            parameter Real l_prefrontal_T130_R64(unit = "m") = 10.0723e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_L128(unit = "m") = 1.2255e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_R66(unit = "m") = 1.2255e-2;
            parameter Real l_artery_of_precentral_sulcus_T38_L130(unit = "m") = 0.935653e-2;
            parameter Real l_artery_of_precentral_sulcus_T103_R68(unit = "m") = 0.935654e-2;
            parameter Real l_artery_of_central_sulcus_T36_L132(unit = "m") = 10.6498e-2;
            parameter Real l_artery_of_central_sulcus_T101_R70(unit = "m") = 10.6498e-2;
            parameter Real l_artery_of_precentral_sulcus_T38_L134(unit = "m") = 8.81918e-2;
            parameter Real l_artery_of_precentral_sulcus_T103_R72(unit = "m") = 8.81919e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L136(unit = "m") = 0.142512e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R74(unit = "m") = 0.142516e-2;
            parameter Real l_polar_temporal_T63_L138(unit = "m") = 2.17951e-2;
            parameter Real l_polar_temporal_T127_R76(unit = "m") = 2.17953e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L140(unit = "m") = 0.0932844e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R78(unit = "m") = 0.0932844e-2;
            parameter Real l_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "m") = 2.67934e-2;
            parameter Real l_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "m") = 2.67942e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L144(unit = "m") = 2.83599e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R82(unit = "m") = 2.83601e-2;
            parameter Real l_middle_cerebral_middle_temporal_branch_T57_L146(unit = "m") = 3.00383e-2;
            parameter Real l_middle_cerebral_middle_temporal_branch_T121_R84(unit = "m") = 3.00379e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L148(unit = "m") = 1.82043e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R86(unit = "m") = 1.82041e-2;
            parameter Real l_artery_of_postcentral_sulcus_T37_L150(unit = "m") = 7.36477e-2;
            parameter Real l_artery_of_postcentral_sulcus_T102_R88(unit = "m") = 7.36471e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L152(unit = "m") = 0.708809e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R90(unit = "m") = 0.708809e-2;
            parameter Real l_middle_cerebral_posterior_temporal_branch_T58_L154(unit = "m") = 0.692097e-2;
            parameter Real l_middle_cerebral_posterior_temporal_branch_T122_R92(unit = "m") = 0.692096e-2;
            parameter Real l_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "m") = 5.73679e-2;
            parameter Real l_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "m") = 5.7368e-2;
            parameter Real l_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "m") = 2.26651e-2;
            parameter Real l_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "m") = 2.26651e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L160(unit = "m") = 0.549683e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R98(unit = "m") = 0.549683e-2;
            parameter Real l_anterior_parietal_T35_L162(unit = "m") = 6.219e-2;
            parameter Real l_anterior_parietal_T100_R100(unit = "m") = 6.21893e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L164(unit = "m") = 1.05444e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R102(unit = "m") = 1.05443e-2;
            parameter Real l_middle_cerebral_branch_to_angular_gyrus_T56_L166(unit = "m") = 1.01852e-2;
            parameter Real l_middle_cerebral_branch_to_angular_gyrus_T120_R104(unit = "m") = 1.01852e-2;
            parameter Real l_posterior_parietal_T64_L168(unit = "m") = 4.2951e-2;
            parameter Real l_posterior_parietal_T129_R106(unit = "m") = 4.2951e-2;
            parameter Real l_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "m") = 4.19474e-2;
            parameter Real l_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "m") = 4.19475e-2;
            parameter Real l_callosomarginal_L172(unit = "m") = 1.13312e-2;
            parameter Real l_callosomarginal_R240(unit = "m") = 1.13311e-2;
            parameter Real l_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "m") = 3.43749e-2;
            parameter Real l_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "m") = 3.43749e-2;
            parameter Real l_callosomarginal_L176(unit = "m") = 1.72952e-2;
            parameter Real l_callosomarginal_R244(unit = "m") = 1.72952e-2;
            parameter Real l_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "m") = 4.19271e-2;
            parameter Real l_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "m") = 4.1927e-2;
            parameter Real l_callosomarginal_L180(unit = "m") = 1.39198e-2;
            parameter Real l_callosomarginal_R248(unit = "m") = 1.39198e-2;
            parameter Real l_callosomarginal_cingular_branch_T40_L182(unit = "m") = 1.75028e-2;
            parameter Real l_callosomarginal_cingular_branch_T105_R250(unit = "m") = 1.75028e-2;
            parameter Real l_callosomarginal_L184(unit = "m") = 0.496294e-2;
            parameter Real l_callosomarginal_R252(unit = "m") = 0.496295e-2;
            parameter Real l_callosomarginal_paracentral_branch_T42_L186(unit = "m") = 4.22964e-2;
            parameter Real l_callosomarginal_paracentral_branch_T107_R254(unit = "m") = 4.22964e-2;
            parameter Real l_medial_occipital_L188(unit = "m") = 0.490507e-2;
            parameter Real l_medial_occipital_R256(unit = "m") = 0.490474e-2;
            parameter Real l_medial_occipital_occipitotemporal_branch_T52_L190(unit = "m") = 2.98359e-2;
            parameter Real l_medial_occipital_occipitotemporal_branch_T80_R258(unit = "m") = 2.98366e-2;
            parameter Real l_medial_occipital_L192(unit = "m") = 0.892062e-2;
            parameter Real l_medial_occipital_R260(unit = "m") = 0.892067e-2;
            parameter Real l_medial_occipital_parieto_occipital_branch_T54_L194(unit = "m") = 1.88987e-2;
            parameter Real l_medial_occipital_parieto_occipital_branch_T118_R262(unit = "m") = 1.88989e-2;
            parameter Real l_medial_occipital_parietal_branch_T53_L196(unit = "m") = 2.80168e-2;
            parameter Real l_medial_occipital_parietal_branch_T81_R264(unit = "m") = 2.80169e-2;
            parameter Real l_medial_occipital_parieto_occipital_branch_T54_L198(unit = "m") = 2.33801e-2;
            parameter Real l_medial_occipital_parieto_occipital_branch_T118_R266(unit = "m") = 2.33801e-2;
            parameter Real l_medial_occipital_L200(unit = "m") = 1.26049e-2;
            parameter Real l_medial_occipital_R268(unit = "m") = 1.26049e-2;
            parameter Real l_medial_occipital_calcarine_branch_T51_L202(unit = "m") = 1.47666e-2;
            parameter Real l_medial_occipital_calcarine_branch_T79_R270(unit = "m") = 1.47667e-2;
            parameter Real C_ascending_aorta_A(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_ascending_aorta_B(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_ascending_aorta_C(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_ascending_aorta_D(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_aortic_arch_C2(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_brachiocephalic_trunk_C4(unit = "m6.J-1") = 0.86529e-10;
            parameter Real C_aortic_arch_C46(unit = "m6.J-1") = 0.799e-10;
            parameter Real C_aortic_arch_C64(unit = "m6.J-1") = 0.548e-10;
            parameter Real C_aortic_arch_C94(unit = "m6.J-1") = 2.83e-10;
            parameter Real C_thoracic_aorta_C96(unit = "m6.J-1") = 0.534e-10;
            parameter Real C_thoracic_aorta_C100(unit = "m6.J-1") = 0.411e-10;
            parameter Real C_thoracic_aorta_C104(unit = "m6.J-1") = 0.774e-10;
            parameter Real C_thoracic_aorta_C108(unit = "m6.J-1") = 0.254e-10;
            parameter Real C_thoracic_aorta_C112(unit = "m6.J-1") = 4.39e-10;
            parameter Real C_abdominal_aorta_C114(unit = "m6.J-1") = 0.084e-10;
            parameter Real C_abdominal_aorta_C136(unit = "m6.J-1") = 0.35e-10;
            parameter Real C_abdominal_aorta_C164(unit = "m6.J-1") = 0.104e-10;
            parameter Real C_abdominal_aorta_C176(unit = "m6.J-1") = 0.281e-10;
            parameter Real C_abdominal_aorta_C188(unit = "m6.J-1") = 1.11e-10;
            parameter Real C_abdominal_aorta_C192(unit = "m6.J-1") = 0.6966e-10;
            parameter Real C_posterior_intercostal_T1_R98(unit = "m6.J-1") = 0.0848e-10;
            parameter Real C_posterior_intercostal_T1_L102(unit = "m6.J-1") = 0.0767e-10;
            parameter Real C_posterior_intercostal_T2_R106(unit = "m6.J-1") = 0.11e-10;
            parameter Real C_posterior_intercostal_T2_L110(unit = "m6.J-1") = 0.102e-10;
            parameter Real C_celiac_trunk_C116(unit = "m6.J-1") = 0.0593e-10;
            parameter Real C_splenic_T2_C118(unit = "m6.J-1") = 0.00491e-10;
            parameter Real C_left_gastric_T3_C120(unit = "m6.J-1") = 0.04857e-10;
            parameter Real C_splenic_T2_C122(unit = "m6.J-1") = 0.00347e-10;
            parameter Real C_dorsal_pancreatic_T1_C124(unit = "m6.J-1") = 0.00179e-10;
            parameter Real C_splenic_T2_C126(unit = "m6.J-1") = 0.07847e-10;
            parameter Real C_common_hepatic_C128(unit = "m6.J-1") = 0.1468e-10;
            parameter Real C_hepatic_artery_proper_C130(unit = "m6.J-1") = 0.01254e-10;
            parameter Real C_hepatic_artery_proper_left_branch_C132(unit = "m6.J-1") = 0.046e-10;
            parameter Real C_hepatic_artery_proper_right_branch_C134(unit = "m6.J-1") = 0.0356e-10;
            parameter Real C_superior_mesenteric_T4_C138(unit = "m6.J-1") = 0.2373e-10;
            parameter Real C_middle_colic_T8_C140(unit = "m6.J-1") = 0.0521e-10;
            parameter Real C_superior_mesenteric_T4_C142(unit = "m6.J-1") = 0.13e-10;
            parameter Real C_jejunal_3_T10_C144(unit = "m6.J-1") = 0.0274e-10;
            parameter Real C_superior_mesenteric_T4_C146(unit = "m6.J-1") = 0.095e-10;
            parameter Real C_jejunal_6_T11_C148(unit = "m6.J-1") = 0.03667e-10;
            parameter Real C_superior_mesenteric_T4_C150(unit = "m6.J-1") = 0.0412e-10;
            parameter Real C_ileocolic_T9_C152(unit = "m6.J-1") = 0.04767e-10;
            parameter Real C_superior_mesenteric_T4_C154(unit = "m6.J-1") = 0.0486e-10;
            parameter Real C_ileal_4_T12_C156(unit = "m6.J-1") = 0.036e-10;
            parameter Real C_superior_mesenteric_T4_C158(unit = "m6.J-1") = 0.0361e-10;
            parameter Real C_ileal_6_T13_C160(unit = "m6.J-1") = 0.023e-10;
            parameter Real C_superior_mesenteric_T4_C162(unit = "m6.J-1") = 0.0531e-10;
            parameter Real C_renal_L166(unit = "m6.J-1") = 0.049e-10;
            parameter Real C_renal_anterior_branch_L168(unit = "m6.J-1") = 0.0189e-10;
            parameter Real C_inferior_segmental_T5_L170(unit = "m6.J-1") = 0.038e-10;
            parameter Real C_superior_segmental_T4_L172(unit = "m6.J-1") = 0.0276e-10;
            parameter Real C_renal_posterior_branch_T3_L174(unit = "m6.J-1") = 0.0131e-10;
            parameter Real C_renal_R178(unit = "m6.J-1") = 0.1e-10;
            parameter Real C_renal_anterior_branch_R180(unit = "m6.J-1") = 0.0189e-10;
            parameter Real C_superior_segmental_T4_R182(unit = "m6.J-1") = 0.02763e-10;
            parameter Real C_inferior_segmental_T5_R184(unit = "m6.J-1") = 0.038e-10;
            parameter Real C_renal_posterior_branch_T3_R186(unit = "m6.J-1") = 0.0131e-10;
            parameter Real C_inferior_mesenteric_T5_C190(unit = "m6.J-1") = 0.1e-10;
            parameter Real C_common_iliac_R216(unit = "m6.J-1") = 0.525e-10;
            parameter Real C_internal_iliac_T1_R218(unit = "m6.J-1") = 0.1733e-10;
            parameter Real C_external_iliac_R220(unit = "m6.J-1") = 0.359e-10;
            parameter Real C_femoral_R222(unit = "m6.J-1") = 0.101e-10;
            parameter Real C_profundus_T2_R224(unit = "m6.J-1") = 0.288e-10;
            parameter Real C_femoral_R226(unit = "m6.J-1") = 0.8338e-10;
            parameter Real C_popliteal_R228(unit = "m6.J-1") = 0.241e-10;
            parameter Real C_anterior_tibial_T3_R230(unit = "m6.J-1") = 0.108e-10;
            parameter Real C_popliteal_R232(unit = "m6.J-1") = 0.01345e-10;
            parameter Real C_tibiofibular_trunk_R234(unit = "m6.J-1") = 0.0546e-10;
            parameter Real C_posterior_tibial_T4_R236(unit = "m6.J-1") = 0.121e-10;
            parameter Real C_common_iliac_L194(unit = "m6.J-1") = 0.509e-10;
            parameter Real C_internal_iliac_T1_L196(unit = "m6.J-1") = 0.1733e-10;
            parameter Real C_external_iliac_L198(unit = "m6.J-1") = 0.359e-10;
            parameter Real C_femoral_L200(unit = "m6.J-1") = 0.101e-10;
            parameter Real C_profundus_T2_L202(unit = "m6.J-1") = 0.288e-10;
            parameter Real C_femoral_L204(unit = "m6.J-1") = 0.8338e-10;
            parameter Real C_popliteal_L206(unit = "m6.J-1") = 0.241e-10;
            parameter Real C_anterior_tibial_T3_L208(unit = "m6.J-1") = 0.108e-10;
            parameter Real C_popliteal_L210(unit = "m6.J-1") = 0.01345e-10;
            parameter Real C_tibiofibular_trunk_L212(unit = "m6.J-1") = 0.05466e-10;
            parameter Real C_posterior_tibial_T4_L214(unit = "m6.J-1") = 0.121e-10;
            parameter Real C_subclavian_R28(unit = "m6.J-1") = 0.1242e-10;
            parameter Real C_subclavian_R30(unit = "m6.J-1") = 0.147e-10;
            parameter Real C_axillary_R32(unit = "m6.J-1") = 0.153e-10;
            parameter Real C_brachial_R34(unit = "m6.J-1") = 0.215e-10;
            parameter Real C_ulnar_T2_R36(unit = "m6.J-1") = 0.013e-10;
            parameter Real C_common_interosseous_R38(unit = "m6.J-1") = 0.0029e-10;
            parameter Real C_posterior_interosseous_T3_R40(unit = "m6.J-1") = 0.019e-10;
            parameter Real C_ulnar_T2_R42(unit = "m6.J-1") = 0.1043e-10;
            parameter Real C_radial_T1_R44(unit = "m6.J-1") = 0.125e-10;
            parameter Real C_subclavian_L66(unit = "m6.J-1") = 0.324e-10;
            parameter Real C_subclavian_L78(unit = "m6.J-1") = 0.1075e-10;
            parameter Real C_axillary_L80(unit = "m6.J-1") = 0.153e-10;
            parameter Real C_brachial_L82(unit = "m6.J-1") = 0.215e-10;
            parameter Real C_ulnar_T2_L84(unit = "m6.J-1") = 0.013e-10;
            parameter Real C_common_interosseous_L86(unit = "m6.J-1") = 0.0029e-10;
            parameter Real C_posterior_interosseous_T3_L88(unit = "m6.J-1") = 0.019e-10;
            parameter Real C_ulnar_T2_L90(unit = "m6.J-1") = 0.1043e-10;
            parameter Real C_radial_T1_L92(unit = "m6.J-1") = 0.125e-10;
            parameter Real C_common_carotid_R6_A(unit = "m6.J-1") = 0.148e-10;
            parameter Real C_common_carotid_R6_B(unit = "m6.J-1") = 0.148e-10;
            parameter Real C_common_carotid_R6_C(unit = "m6.J-1") = 0.148e-10;
            parameter Real C_internal_carotid_R8_A(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_internal_carotid_R8_B(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_internal_carotid_R8_C(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_external_carotid_T2_R26(unit = "m6.J-1") = 0.0845e-10;
            parameter Real C_common_carotid_L48_A(unit = "m6.J-1") = 0.1661e-10;
            parameter Real C_common_carotid_L48_B(unit = "m6.J-1") = 0.1661e-10;
            parameter Real C_common_carotid_L48_C(unit = "m6.J-1") = 0.1661e-10;
            parameter Real C_common_carotid_L48_D(unit = "m6.J-1") = 0.1661e-10;
            parameter Real C_internal_carotid_L50_A(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_internal_carotid_L50_B(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_internal_carotid_L50_C(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_external_carotid_T2_L62(unit = "m6.J-1") = 0.0845e-10;
            parameter Real C_vertebral_L2(unit = "m6.J-1") = 0.0811e-10;
            parameter Real C_vertebral_R272(unit = "m6.J-1") = 0.0811e-10;
            parameter Real C_basilar_C4(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_cerebral_precommunicating_part_L6(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_cerebral_precommunicating_part_R204(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_communicating_L8(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_communicating_R206(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_cerebral_postcommunicating_part_L12(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_cerebral_postcommunicating_part_R208(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_L14(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_R210(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_L18(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_R214(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_L22(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_R218(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_L26(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_R222(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_dorsal_branch_to_corpus_callosum_L28(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_dorsal_branch_to_corpus_callosum_R224(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_parieto_occipital_branch_T60_L30(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_parieto_occipital_branch_T124_R226(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_L32(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_R228(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_precuneal_branch_T61_L34(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_precuneal_branch_T125_R230(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_L36(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_R232(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_L38(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_R234(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_distal_medial_striate_T44_L40(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_distal_medial_striate_T109_R236(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_L42(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_R238(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_communicating_C44(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_L110(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_R46(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_internal_carotid_L112(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_internal_carotid_R48(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_L114(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_R52(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_choroidal_T34_L116(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_choroidal_T98_R54(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_L118(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_R56(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_L120(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_R58(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_frontobasal_T45_L122(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_frontobasal_T110_R60(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_L124(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_R62(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_prefrontal_T65_L126(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_prefrontal_T130_R64(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_L128(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_R66(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_precentral_sulcus_T38_L130(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_precentral_sulcus_T103_R68(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_central_sulcus_T36_L132(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_central_sulcus_T101_R70(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_precentral_sulcus_T38_L134(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_precentral_sulcus_T103_R72(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L136(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R74(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_polar_temporal_T63_L138(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_polar_temporal_T127_R76(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L140(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R78(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L144(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R82(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_middle_temporal_branch_T57_L146(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_middle_temporal_branch_T121_R84(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L148(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R86(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_postcentral_sulcus_T37_L150(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_postcentral_sulcus_T102_R88(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L152(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R90(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporal_branch_T58_L154(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporal_branch_T122_R92(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L160(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R98(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_parietal_T35_L162(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_parietal_T100_R100(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L164(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R102(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_branch_to_angular_gyrus_T56_L166(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_branch_to_angular_gyrus_T120_R104(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_parietal_T64_L168(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_parietal_T129_R106(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_L172(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_R240(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_L176(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_R244(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_L180(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_R248(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_cingular_branch_T40_L182(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_cingular_branch_T105_R250(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_L184(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_R252(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_paracentral_branch_T42_L186(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_paracentral_branch_T107_R254(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_L188(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_R256(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_occipitotemporal_branch_T52_L190(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_occipitotemporal_branch_T80_R258(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_L192(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_R260(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parieto_occipital_branch_T54_L194(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parieto_occipital_branch_T118_R262(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parietal_branch_T53_L196(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parietal_branch_T81_R264(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parieto_occipital_branch_T54_L198(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parieto_occipital_branch_T118_R266(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_L200(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_R268(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_calcarine_branch_T51_L202(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_calcarine_branch_T79_R270(unit = "m6.J-1") = 1.6e-10;
            parameter Real R_T_posterior_intercostal_T1_R98(unit = "J.s.m-6") = 22.5809e+9;
            parameter Real R_T_posterior_intercostal_T1_L102(unit = "J.s.m-6") = 23.1661e+9;
            parameter Real R_T_posterior_intercostal_T2_R106(unit = "J.s.m-6") = 21.0678e+9;
            parameter Real R_T_posterior_intercostal_T2_L110(unit = "J.s.m-6") = 21.2483e+9;
            parameter Real R_T_left_gastric_T3_C120(unit = "J.s.m-6") = 31.1251e+9;
            parameter Real R_T_dorsal_pancreatic_T1_C124(unit = "J.s.m-6") = 16.6313e+9;
            parameter Real R_T_splenic_T2_C126(unit = "J.s.m-6") = 0.429028e+9;
            parameter Real R_T_hepatic_artery_proper_left_branch_C132(unit = "J.s.m-6") = 0.852085e+9;
            parameter Real R_T_hepatic_artery_proper_right_branch_C134(unit = "J.s.m-6") = 0.471438e+9;
            parameter Real R_T_middle_colic_T8_C140(unit = "J.s.m-6") = 2.6865e+9;
            parameter Real R_T_jejunal_3_T10_C144(unit = "J.s.m-6") = 1.96952e+9;
            parameter Real R_T_jejunal_6_T11_C148(unit = "J.s.m-6") = 1.96952e+9;
            parameter Real R_T_ileocolic_T9_C152(unit = "J.s.m-6") = 0.971722e+9;
            parameter Real R_T_ileal_4_T12_C156(unit = "J.s.m-6") = 1.32964e+9;
            parameter Real R_T_ileal_6_T13_C160(unit = "J.s.m-6") = 1.32964e+9;
            parameter Real R_T_superior_mesenteric_T4_C162(unit = "J.s.m-6") = 0.880745e+9;
            parameter Real R_T_inferior_segmental_T5_L170(unit = "J.s.m-6") = 0.526057e+9;
            parameter Real R_T_superior_segmental_T4_L172(unit = "J.s.m-6") = 0.526057e+9;
            parameter Real R_T_renal_posterior_branch_T3_L174(unit = "J.s.m-6") = 0.931304e+9;
            parameter Real R_T_superior_segmental_T4_R182(unit = "J.s.m-6") = 0.527823e+9;
            parameter Real R_T_inferior_segmental_T5_R184(unit = "J.s.m-6") = 0.527823e+9;
            parameter Real R_T_renal_posterior_branch_T3_R186(unit = "J.s.m-6") = 0.934431e+9;
            parameter Real R_T_inferior_mesenteric_T5_C190(unit = "J.s.m-6") = 2.16746e+9;
            parameter Real R_T_internal_iliac_T1_R218(unit = "J.s.m-6") = 0.375754e+9;
            parameter Real R_T_profundus_T2_R224(unit = "J.s.m-6") = 0.310612e+9;
            parameter Real R_T_anterior_tibial_T3_R230(unit = "J.s.m-6") = 2.22296e+9;
            parameter Real R_T_posterior_tibial_T4_R236(unit = "J.s.m-6") = 1.91761e+9;
            parameter Real R_T_internal_iliac_T1_L196(unit = "J.s.m-6") = 0.376879e+9;
            parameter Real R_T_profundus_T2_L202(unit = "J.s.m-6") = 0.310778e+9;
            parameter Real R_T_anterior_tibial_T3_L208(unit = "J.s.m-6") = 2.22365e+9;
            parameter Real R_T_posterior_tibial_T4_L214(unit = "J.s.m-6") = 1.91845e+9;
            parameter Real R_T_posterior_interosseous_T3_R40(unit = "J.s.m-6") = 4.33378e+9;
            parameter Real R_T_ulnar_T2_R36(unit = "J.s.m-6") = 1.0649e+9;
            parameter Real R_T_ulnar_T2_R42(unit = "J.s.m-6") = 1.0649e+9;
            parameter Real R_T_radial_T1_R44(unit = "J.s.m-6") = 1.04588e+9;
            parameter Real R_T_posterior_interosseous_T3_L88(unit = "J.s.m-6") = 4.34948e+9;
            parameter Real R_T_ulnar_T2_L84(unit = "J.s.m-6") = 1.08553e+9;
            parameter Real R_T_ulnar_T2_L90(unit = "J.s.m-6") = 1.08553e+9;
            parameter Real R_T_radial_T1_L92(unit = "J.s.m-6") = 1.02715e+9;
            parameter Real R_T_external_carotid_T2_R26(unit = "J.s.m-6") = 0.851183e+9;
            parameter Real R_T_external_carotid_T2_L62(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_internal_carotid_R8_C(unit = "J.s.m-6") = 0.851183e+9;
            parameter Real R_T_internal_carotid_L50_C(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_vertebral_R272(unit = "J.s.m-6") = 0.851183e+9;
            parameter Real R_T_vertebral_L2(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_renal_R178(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_renal_L166(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_celiac_trunk_C116(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "J.s.m-6") = 6.17214e+9;
            parameter Real R_T_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "J.s.m-6") = 60.7317e+9;
            parameter Real R_T_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "J.s.m-6") = 25.2811e+9;
            parameter Real R_T_pericallosal_parieto_occipital_branch_T60_L30(unit = "J.s.m-6") = 17.8019e+9;
            parameter Real R_T_pericallosal_precuneal_branch_T61_L34(unit = "J.s.m-6") = 12.2746e+9;
            parameter Real R_T_distal_medial_striate_T44_L40(unit = "J.s.m-6") = 65.8855e+9;
            parameter Real R_T_anterior_choroidal_T34_L116(unit = "J.s.m-6") = 9.50237e+9;
            parameter Real R_T_lateral_frontobasal_T45_L122(unit = "J.s.m-6") = 23.3019e+9;
            parameter Real R_T_prefrontal_T65_L126(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_artery_of_central_sulcus_T36_L132(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_artery_of_precentral_sulcus_T38_L134(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_polar_temporal_T63_L138(unit = "J.s.m-6") = 44.8075e+9;
            parameter Real R_T_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "J.s.m-6") = 15.3827e+9;
            parameter Real R_T_middle_cerebral_middle_temporal_branch_T57_L146(unit = "J.s.m-6") = 13.5433e+9;
            parameter Real R_T_artery_of_postcentral_sulcus_T37_L150(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "J.s.m-6") = 10.6482e+9;
            parameter Real R_T_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "J.s.m-6") = 10.6482e+9;
            parameter Real R_T_anterior_parietal_T35_L162(unit = "J.s.m-6") = 15.3827e+9;
            parameter Real R_T_posterior_parietal_T64_L168(unit = "J.s.m-6") = 9.50237e+9;
            parameter Real R_T_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "J.s.m-6") = 7.65279e+9;
            parameter Real R_T_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "J.s.m-6") = 13.2110e+9;
            parameter Real R_T_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "J.s.m-6") = 9.39673e+9;
            parameter Real R_T_callosomarginal_cingular_branch_T40_L182(unit = "J.s.m-6") = 12.4248e+9;
            parameter Real R_T_callosomarginal_paracentral_branch_T42_L186(unit = "J.s.m-6") = 12.4248e+9;
            parameter Real R_T_medial_occipital_occipitotemporal_branch_T52_L190(unit = "J.s.m-6") = 31.0946e+9;
            parameter Real R_T_medial_occipital_parietal_branch_T53_L196(unit = "J.s.m-6") = 51.9306e+9;
            parameter Real R_T_medial_occipital_parieto_occipital_branch_T54_L198(unit = "J.s.m-6") = 10.6655e+9;
            parameter Real R_T_medial_occipital_calcarine_branch_T51_L202(unit = "J.s.m-6") = 31.0946e+9;
            parameter Real R_T_anterior_choroidal_T98_R54(unit = "J.s.m-6") = 9.50237e+9;
            parameter Real R_T_lateral_frontobasal_T110_R60(unit = "J.s.m-6") = 23.3019e+9;
            parameter Real R_T_prefrontal_T130_R64(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_artery_of_central_sulcus_T101_R70(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_artery_of_precentral_sulcus_T103_R72(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_polar_temporal_T127_R76(unit = "J.s.m-6") = 44.8075e+9;
            parameter Real R_T_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "J.s.m-6") = 15.3827e+9;
            parameter Real R_T_middle_cerebral_middle_temporal_branch_T121_R84(unit = "J.s.m-6") = 13.5433e+9;
            parameter Real R_T_artery_of_postcentral_sulcus_T102_R88(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "J.s.m-6") = 10.6482e+9;
            parameter Real R_T_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "J.s.m-6") = 10.6482e+9;
            parameter Real R_T_anterior_parietal_T100_R100(unit = "J.s.m-6") = 15.3827e+9;
            parameter Real R_T_posterior_parietal_T129_R106(unit = "J.s.m-6") = 9.50237e+9;
            parameter Real R_T_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "J.s.m-6") = 7.65279e+9;
            parameter Real R_T_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "J.s.m-6") = 6.17214e+9;
            parameter Real R_T_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "J.s.m-6") = 60.7317e+9;
            parameter Real R_T_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "J.s.m-6") = 25.2811e+9;
            parameter Real R_T_pericallosal_parieto_occipital_branch_T124_R226(unit = "J.s.m-6") = 17.8019e+9;
            parameter Real R_T_pericallosal_precuneal_branch_T125_R230(unit = "J.s.m-6") = 12.2746e+9;
            parameter Real R_T_distal_medial_striate_T109_R236(unit = "J.s.m-6") = 65.8855e+9;
            parameter Real R_T_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "J.s.m-6") = 13.2110e+9;
            parameter Real R_T_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "J.s.m-6") = 9.39673e+9;
            parameter Real R_T_callosomarginal_cingular_branch_T105_R250(unit = "J.s.m-6") = 12.4248e+9;
            parameter Real R_T_callosomarginal_paracentral_branch_T107_R254(unit = "J.s.m-6") = 12.4248e+9;
            parameter Real R_T_medial_occipital_occipitotemporal_branch_T80_R258(unit = "J.s.m-6") = 31.0946e+9;
            parameter Real R_T_medial_occipital_parietal_branch_T81_R264(unit = "J.s.m-6") = 51.9306e+9;
            parameter Real R_T_medial_occipital_parieto_occipital_branch_T118_R266(unit = "J.s.m-6") = 10.6655e+9;
            parameter Real R_T_medial_occipital_calcarine_branch_T79_R270(unit = "J.s.m-6") = 31.0946e+9;
            parameter Real C_T_posterior_intercostal_T1_R98(unit = "m6.J-1") = 2.2736e-12;
            parameter Real C_T_posterior_intercostal_T1_L102(unit = "m6.J-1") = 2.2162e-12;
            parameter Real C_T_posterior_intercostal_T2_R106(unit = "m6.J-1") = 2.4369e-12;
            parameter Real C_T_posterior_intercostal_T2_L110(unit = "m6.J-1") = 2.4162e-12;
            parameter Real C_T_left_gastric_T3_C120(unit = "m6.J-1") = 1.6495e-12;
            parameter Real C_T_dorsal_pancreatic_T1_C124(unit = "m6.J-1") = 15.055e-12;
            parameter Real C_T_splenic_T2_C126(unit = "m6.J-1") = 119.67e-12;
            parameter Real C_T_hepatic_artery_proper_left_branch_C132(unit = "m6.J-1") = 60.253e-12;
            parameter Real C_T_hepatic_artery_proper_right_branch_C134(unit = "m6.J-1") = 108.9e-12;
            parameter Real C_T_middle_colic_T8_C140(unit = "m6.J-1") = 19.111e-12;
            parameter Real C_T_jejunal_3_T10_C144(unit = "m6.J-1") = 26.067e-12;
            parameter Real C_T_jejunal_6_T11_C148(unit = "m6.J-1") = 26.067e-12;
            parameter Real C_T_ileocolic_T9_C152(unit = "m6.J-1") = 52.835e-12;
            parameter Real C_T_ileal_4_T12_C156(unit = "m6.J-1") = 38.612e-12;
            parameter Real C_T_ileal_6_T13_C160(unit = "m6.J-1") = 38.612e-12;
            parameter Real C_T_superior_mesenteric_T4_C162(unit = "m6.J-1") = 58.292e-12;
            parameter Real C_T_inferior_segmental_T5_L170(unit = "m6.J-1") = 97.595e-12;
            parameter Real C_T_superior_segmental_T4_L172(unit = "m6.J-1") = 97.595e-12;
            parameter Real C_T_renal_posterior_branch_T3_L174(unit = "m6.J-1") = 55.127e-12;
            parameter Real C_T_superior_segmental_T4_R182(unit = "m6.J-1") = 97.268e-12;
            parameter Real C_T_inferior_segmental_T5_R184(unit = "m6.J-1") = 97.268e-12;
            parameter Real C_T_renal_posterior_branch_T3_R186(unit = "m6.J-1") = 54.943e-12;
            parameter Real C_T_inferior_mesenteric_T5_C190(unit = "m6.J-1") = 23.687e-12;
            parameter Real C_T_internal_iliac_T1_R218(unit = "m6.J-1") = 136.63e-12;
            parameter Real C_T_profundus_T2_R224(unit = "m6.J-1") = 165.29e-12;
            parameter Real C_T_anterior_tibial_T3_R230(unit = "m6.J-1") = 23.096e-12;
            parameter Real C_T_posterior_tibial_T4_R236(unit = "m6.J-1") = 26.773e-12;
            parameter Real C_T_internal_iliac_T1_L196(unit = "m6.J-1") = 136.23e-12;
            parameter Real C_T_profundus_T2_L202(unit = "m6.J-1") = 165.2e-12;
            parameter Real C_T_anterior_tibial_T3_L208(unit = "m6.J-1") = 23.088e-12;
            parameter Real C_T_posterior_tibial_T4_L214(unit = "m6.J-1") = 26.761e-12;
            parameter Real C_T_posterior_interosseous_T3_R40(unit = "m6.J-1") = 11.847e-12;
            parameter Real C_T_ulnar_T2_R36(unit = "m6.J-1") = 48.212e-12;
            parameter Real C_T_ulnar_T2_R42(unit = "m6.J-1") = 48.212e-12;
            parameter Real C_T_radial_T1_R44(unit = "m6.J-1") = 49.088e-12;
            parameter Real C_T_posterior_interosseous_T3_L88(unit = "m6.J-1") = 11.804e-12;
            parameter Real C_T_ulnar_T2_L84(unit = "m6.J-1") = 47.295e-12;
            parameter Real C_T_ulnar_T2_L90(unit = "m6.J-1") = 47.295e-12;
            parameter Real C_T_radial_T1_L92(unit = "m6.J-1") = 49.983e-12;
            parameter Real C_T_external_carotid_T2_R26(unit = "m6.J-1") = 60.317e-12;
            parameter Real C_T_external_carotid_T2_L62(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_internal_carotid_R8_C(unit = "m6.J-1") = 60.317e-12;
            parameter Real C_T_internal_carotid_L50_C(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_vertebral_R272(unit = "m6.J-1") = 60.317e-12;
            parameter Real C_T_vertebral_L2(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_renal_R178(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_renal_L166(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_celiac_trunk_C116(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "m6.J-1") = 2.60095e-12;
            parameter Real C_T_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "m6.J-1") = 0.264334e-12;
            parameter Real C_T_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "m6.J-1") = 0.634997e-12;
            parameter Real C_T_pericallosal_parieto_occipital_branch_T60_L30(unit = "m6.J-1") = 0.901782e-12;
            parameter Real C_T_pericallosal_precuneal_branch_T61_L34(unit = "m6.J-1") = 1.30786e-12;
            parameter Real C_T_distal_medial_striate_T44_L40(unit = "m6.J-1") = 0.243656e-12;
            parameter Real C_T_anterior_choroidal_T34_L116(unit = "m6.J-1") = 1.68941e-12;
            parameter Real C_T_lateral_frontobasal_T45_L122(unit = "m6.J-1") = 0.688932e-12;
            parameter Real C_T_prefrontal_T65_L126(unit = "m6.J-1") = 1.33978e-12;
            parameter Real C_T_artery_of_central_sulcus_T36_L132(unit = "m6.J-1") = 1.33978e-12;
            parameter Real C_T_artery_of_precentral_sulcus_T38_L134(unit = "m6.J-1") = 1.33978e-12;
            parameter Real C_T_polar_temporal_T63_L138(unit = "m6.J-1") = 0.35828e-12;
            parameter Real C_T_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "m6.J-1") = 1.0436e-12;
            parameter Real C_T_middle_cerebral_middle_temporal_branch_T57_L146(unit = "m6.J-1") = 1.1853e-12;
            parameter Real C_T_artery_of_postcentral_sulcus_T37_L150(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "m6.J-1") = 1.5076e-12;
            parameter Real C_T_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "m6.J-1") = 1.5076e-12;
            parameter Real C_T_anterior_parietal_T35_L162(unit = "m6.J-1") = 1.0436e-12;
            parameter Real C_T_posterior_parietal_T64_L168(unit = "m6.J-1") = 1.6894e-12;
            parameter Real C_T_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "m6.J-1") = 2.0977e-12;
            parameter Real C_T_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "m6.J-1") = 1.2152e-12;
            parameter Real C_T_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "m6.J-1") = 1.7084e-12;
            parameter Real C_T_callosomarginal_cingular_branch_T40_L182(unit = "m6.J-1") = 1.2921e-12;
            parameter Real C_T_callosomarginal_paracentral_branch_T42_L186(unit = "m6.J-1") = 1.2921e-12;
            parameter Real C_T_medial_occipital_occipitotemporal_branch_T52_L190(unit = "m6.J-1") = 0.51628e-12;
            parameter Real C_T_medial_occipital_parietal_branch_T53_L196(unit = "m6.J-1") = 0.30913e-12;
            parameter Real C_T_medial_occipital_parieto_occipital_branch_T54_L198(unit = "m6.J-1") = 1.5052e-12;
            parameter Real C_T_medial_occipital_calcarine_branch_T51_L202(unit = "m6.J-1") = 0.51628e-12;
            parameter Real C_T_anterior_choroidal_T98_R54(unit = "m6.J-1") = 1.6894e-12;
            parameter Real C_T_lateral_frontobasal_T110_R60(unit = "m6.J-1") = 0.68893e-12;
            parameter Real C_T_prefrontal_T130_R64(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_artery_of_central_sulcus_T101_R70(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_artery_of_precentral_sulcus_T103_R72(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_polar_temporal_T127_R76(unit = "m6.J-1") = 0.35828e-12;
            parameter Real C_T_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "m6.J-1") = 1.0436e-12;
            parameter Real C_T_middle_cerebral_middle_temporal_branch_T121_R84(unit = "m6.J-1") = 1.1853e-12;
            parameter Real C_T_artery_of_postcentral_sulcus_T102_R88(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "m6.J-1") = 1.5076e-12;
            parameter Real C_T_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "m6.J-1") = 1.5076e-12;
            parameter Real C_T_anterior_parietal_T100_R100(unit = "m6.J-1") = 1.0436e-12;
            parameter Real C_T_posterior_parietal_T129_R106(unit = "m6.J-1") = 1.6894e-12;
            parameter Real C_T_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "m6.J-1") = 2.0977e-12;
            parameter Real C_T_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "m6.J-1") = 2.6009e-12;
            parameter Real C_T_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "m6.J-1") = 0.26433e-12;
            parameter Real C_T_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "m6.J-1") = 0.635e-12;
            parameter Real C_T_pericallosal_parieto_occipital_branch_T124_R226(unit = "m6.J-1") = 0.90178e-12;
            parameter Real C_T_pericallosal_precuneal_branch_T125_R230(unit = "m6.J-1") = 1.3079e-12;
            parameter Real C_T_distal_medial_striate_T109_R236(unit = "m6.J-1") = 0.24366e-12;
            parameter Real C_T_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "m6.J-1") = 1.2152e-12;
            parameter Real C_T_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "m6.J-1") = 1.7084e-12;
            parameter Real C_T_callosomarginal_cingular_branch_T105_R250(unit = "m6.J-1") = 1.2921e-12;
            parameter Real C_T_callosomarginal_paracentral_branch_T107_R254(unit = "m6.J-1") = 1.2921e-12;
            parameter Real C_T_medial_occipital_occipitotemporal_branch_T80_R258(unit = "m6.J-1") = 0.51628e-12;
            parameter Real C_T_medial_occipital_parietal_branch_T81_R264(unit = "m6.J-1") = 0.30913e-12;
            parameter Real C_T_medial_occipital_parieto_occipital_branch_T118_R266(unit = "m6.J-1") = 1.5052e-12;
            parameter Real C_T_medial_occipital_calcarine_branch_T79_R270(unit = "m6.J-1") = 0.51628e-12;
            parameter Real E_ascending_aorta_A(unit = "Pa") = 0.4e+6;
            parameter Real E_ascending_aorta_B(unit = "Pa") = 0.4e+6;
            parameter Real E_ascending_aorta_C(unit = "Pa") = 0.4e+6;
            parameter Real E_ascending_aorta_D(unit = "Pa") = 0.4e+6;
            parameter Real E_aortic_arch_C2(unit = "Pa") = 0.4e+6;
            parameter Real E_brachiocephalic_trunk_C4(unit = "Pa") = 0.4e+6;
            parameter Real E_aortic_arch_C46(unit = "Pa") = 0.4e+6;
            parameter Real E_aortic_arch_C64(unit = "Pa") = 0.4e+6;
            parameter Real E_aortic_arch_C94(unit = "Pa") = 0.4e+6;
            parameter Real E_thoracic_aorta_C96(unit = "Pa") = 0.4e+6;
            parameter Real E_thoracic_aorta_C100(unit = "Pa") = 0.4e+6;
            parameter Real E_thoracic_aorta_C104(unit = "Pa") = 0.4e+6;
            parameter Real E_thoracic_aorta_C108(unit = "Pa") = 0.4e+6;
            parameter Real E_thoracic_aorta_C112(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C114(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C136(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C164(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C176(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C188(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C192(unit = "Pa") = 0.4e+6;
            parameter Real E_posterior_intercostal_T1_R98(unit = "Pa") = 0.4e+6;
            parameter Real E_posterior_intercostal_T1_L102(unit = "Pa") = 0.4e+6;
            parameter Real E_posterior_intercostal_T2_R106(unit = "Pa") = 0.4e+6;
            parameter Real E_posterior_intercostal_T2_L110(unit = "Pa") = 0.4e+6;
            parameter Real E_celiac_trunk_C116(unit = "Pa") = 0.4e+6;
            parameter Real E_splenic_T2_C118(unit = "Pa") = 0.4e+6;
            parameter Real E_left_gastric_T3_C120(unit = "Pa") = 0.4e+6;
            parameter Real E_splenic_T2_C122(unit = "Pa") = 0.4e+6;
            parameter Real E_dorsal_pancreatic_T1_C124(unit = "Pa") = 0.4e+6;
            parameter Real E_splenic_T2_C126(unit = "Pa") = 0.4e+6;
            parameter Real E_common_hepatic_C128(unit = "Pa") = 0.4e+6;
            parameter Real E_hepatic_artery_proper_C130(unit = "Pa") = 0.4e+6;
            parameter Real E_hepatic_artery_proper_left_branch_C132(unit = "Pa") = 0.4e+6;
            parameter Real E_hepatic_artery_proper_right_branch_C134(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C138(unit = "Pa") = 0.4e+6;
            parameter Real E_middle_colic_T8_C140(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C142(unit = "Pa") = 0.4e+6;
            parameter Real E_jejunal_3_T10_C144(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C146(unit = "Pa") = 0.4e+6;
            parameter Real E_jejunal_6_T11_C148(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C150(unit = "Pa") = 0.4e+6;
            parameter Real E_ileocolic_T9_C152(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C154(unit = "Pa") = 0.4e+6;
            parameter Real E_ileal_4_T12_C156(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C158(unit = "Pa") = 0.4e+6;
            parameter Real E_ileal_6_T13_C160(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C162(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_L166(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_anterior_branch_L168(unit = "Pa") = 0.4e+6;
            parameter Real E_inferior_segmental_T5_L170(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_segmental_T4_L172(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_posterior_branch_T3_L174(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_R178(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_anterior_branch_R180(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_segmental_T4_R182(unit = "Pa") = 0.4e+6;
            parameter Real E_inferior_segmental_T5_R184(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_posterior_branch_T3_R186(unit = "Pa") = 0.4e+6;
            parameter Real E_inferior_mesenteric_T5_C190(unit = "Pa") = 0.4e+6;
            parameter Real E_common_iliac_R216(unit = "Pa") = 0.4e+6;
            parameter Real E_internal_iliac_T1_R218(unit = "Pa") = 1.6e+6;
            parameter Real E_external_iliac_R220(unit = "Pa") = 0.8e+6;
            parameter Real E_femoral_R222(unit = "Pa") = 0.8e+6;
            parameter Real E_profundus_T2_R224(unit = "Pa") = 0.8e+6;
            parameter Real E_femoral_R226(unit = "Pa") = 0.8e+6;
            parameter Real E_popliteal_R228(unit = "Pa") = 0.8e+6;
            parameter Real E_anterior_tibial_T3_R230(unit = "Pa") = 1.6e+6;
            parameter Real E_popliteal_R232(unit = "Pa") = 1.6e+6;
            parameter Real E_tibiofibular_trunk_R234(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_tibial_T4_R236(unit = "Pa") = 1.6e+6;
            parameter Real E_common_iliac_L194(unit = "Pa") = 0.4e+6;
            parameter Real E_internal_iliac_T1_L196(unit = "Pa") = 1.6e+6;
            parameter Real E_external_iliac_L198(unit = "Pa") = 0.8e+6;
            parameter Real E_femoral_L200(unit = "Pa") = 0.8e+6;
            parameter Real E_profundus_T2_L202(unit = "Pa") = 0.8e+6;
            parameter Real E_femoral_L204(unit = "Pa") = 0.8e+6;
            parameter Real E_popliteal_L206(unit = "Pa") = 0.8e+6;
            parameter Real E_anterior_tibial_T3_L208(unit = "Pa") = 1.6e+6;
            parameter Real E_popliteal_L210(unit = "Pa") = 1.6e+6;
            parameter Real E_tibiofibular_trunk_L212(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_tibial_T4_L214(unit = "Pa") = 1.6e+6;
            parameter Real E_subclavian_R28(unit = "Pa") = 0.4e+6;
            parameter Real E_subclavian_R30(unit = "Pa") = 0.4e+6;
            parameter Real E_axillary_R32(unit = "Pa") = 0.4e+6;
            parameter Real E_brachial_R34(unit = "Pa") = 0.4e+6;
            parameter Real E_ulnar_T2_R36(unit = "Pa") = 0.8e+6;
            parameter Real E_common_interosseous_R38(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_interosseous_T3_R40(unit = "Pa") = 1.6e+6;
            parameter Real E_ulnar_T2_R42(unit = "Pa") = 0.8e+6;
            parameter Real E_radial_T1_R44(unit = "Pa") = 0.8e+6;
            parameter Real E_subclavian_L66(unit = "Pa") = 0.4e+6;
            parameter Real E_subclavian_L78(unit = "Pa") = 0.4e+6;
            parameter Real E_axillary_L80(unit = "Pa") = 0.4e+6;
            parameter Real E_brachial_L82(unit = "Pa") = 0.4e+6;
            parameter Real E_ulnar_T2_L84(unit = "Pa") = 0.8e+6;
            parameter Real E_common_interosseous_L86(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_interosseous_T3_L88(unit = "Pa") = 1.6e+6;
            parameter Real E_ulnar_T2_L90(unit = "Pa") = 0.8e+6;
            parameter Real E_radial_T1_L92(unit = "Pa") = 0.8e+6;
            parameter Real E_common_carotid_R6_A(unit = "Pa") = 0.2e+6;
            parameter Real E_common_carotid_R6_B(unit = "Pa") = 0.2e+6;
            parameter Real E_common_carotid_R6_C(unit = "Pa") = 0.2e+6;
            parameter Real E_internal_carotid_R8_A(unit = "Pa") = 0.8e+6;
            parameter Real E_internal_carotid_R8_B(unit = "Pa") = 0.8e+6;
            parameter Real E_internal_carotid_R8_C(unit = "Pa") = 1.6e+6;
            parameter Real E_external_carotid_T2_R26(unit = "Pa") = 0.8e+6;
            parameter Real E_common_carotid_L48_A(unit = "Pa") = 0.2e+6;
            parameter Real E_common_carotid_L48_B(unit = "Pa") = 0.2e+6;
            parameter Real E_common_carotid_L48_C(unit = "Pa") = 0.2e+6;
            parameter Real E_common_carotid_L48_D(unit = "Pa") = 0.2e+6;
            parameter Real E_internal_carotid_L50_A(unit = "Pa") = 0.8e+6;
            parameter Real E_internal_carotid_L50_B(unit = "Pa") = 0.8e+6;
            parameter Real E_internal_carotid_L50_C(unit = "Pa") = 1.6e+6;
            parameter Real E_external_carotid_T2_L62(unit = "Pa") = 0.8e+6;
            parameter Real E_vertebral_L2(unit = "Pa") = 0.8e+6;
            parameter Real E_vertebral_R272(unit = "Pa") = 0.8e+6;
            parameter Real E_basilar_C4(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_cerebral_precommunicating_part_L6(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_cerebral_precommunicating_part_R204(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_communicating_L8(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_communicating_R206(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_cerebral_postcommunicating_part_L12(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_cerebral_postcommunicating_part_R208(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_L14(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_R210(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_L18(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_R214(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_L22(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_R218(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_L26(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_R222(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_dorsal_branch_to_corpus_callosum_L28(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_dorsal_branch_to_corpus_callosum_R224(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_parieto_occipital_branch_T60_L30(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_parieto_occipital_branch_T124_R226(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_L32(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_R228(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_precuneal_branch_T61_L34(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_precuneal_branch_T125_R230(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_L36(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_R232(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_L38(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_R234(unit = "Pa") = 1.6e+6;
            parameter Real E_distal_medial_striate_T44_L40(unit = "Pa") = 1.6e+6;
            parameter Real E_distal_medial_striate_T109_R236(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_L42(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_R238(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_communicating_C44(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_L110(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_R46(unit = "Pa") = 1.6e+6;
            parameter Real E_internal_carotid_L112(unit = "Pa") = 1.6e+6;
            parameter Real E_internal_carotid_R48(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_L114(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_R52(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_choroidal_T34_L116(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_choroidal_T98_R54(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_L118(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_R56(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_L120(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_R58(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_frontobasal_T45_L122(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_frontobasal_T110_R60(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_L124(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_R62(unit = "Pa") = 1.6e+6;
            parameter Real E_prefrontal_T65_L126(unit = "Pa") = 1.6e+6;
            parameter Real E_prefrontal_T130_R64(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_L128(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_R66(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_precentral_sulcus_T38_L130(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_precentral_sulcus_T103_R68(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_central_sulcus_T36_L132(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_central_sulcus_T101_R70(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_precentral_sulcus_T38_L134(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_precentral_sulcus_T103_R72(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L136(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R74(unit = "Pa") = 1.6e+6;
            parameter Real E_polar_temporal_T63_L138(unit = "Pa") = 1.6e+6;
            parameter Real E_polar_temporal_T127_R76(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L140(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R78(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L144(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R82(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_middle_temporal_branch_T57_L146(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_middle_temporal_branch_T121_R84(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L148(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R86(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_postcentral_sulcus_T37_L150(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_postcentral_sulcus_T102_R88(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L152(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R90(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporal_branch_T58_L154(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporal_branch_T122_R92(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L160(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R98(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_parietal_T35_L162(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_parietal_T100_R100(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L164(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R102(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_branch_to_angular_gyrus_T56_L166(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_branch_to_angular_gyrus_T120_R104(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_parietal_T64_L168(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_parietal_T129_R106(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_L172(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_R240(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_L176(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_R244(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_L180(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_R248(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_cingular_branch_T40_L182(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_cingular_branch_T105_R250(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_L184(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_R252(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_paracentral_branch_T42_L186(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_paracentral_branch_T107_R254(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_L188(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_R256(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_occipitotemporal_branch_T52_L190(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_occipitotemporal_branch_T80_R258(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_L192(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_R260(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parieto_occipital_branch_T54_L194(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parieto_occipital_branch_T118_R262(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parietal_branch_T53_L196(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parietal_branch_T81_R264(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parieto_occipital_branch_T54_L198(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parieto_occipital_branch_T118_R266(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_L200(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_R268(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_calcarine_branch_T51_L202(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_calcarine_branch_T79_R270(unit = "Pa") = 1.6e+6;
          equation

          end Parameters_Systemic;

          model Parameters_Systemic_tunable "AdanVenousRed _7af7a4"
            parameter Physiolibrary.Types.Fraction k_E = 1 "Elasticity adjustment to fit normal arterial pressures";
            final parameter Physiolibrary.Types.Height height_nominal = 1.7 "nominal height of the subject";
            parameter Physiolibrary.Types.Height height_actual = 1.7 "actual height of the subject";

            parameter Real C_svl(unit = "m6.J-1") = 0.0037509e-6;
            parameter Real C_svn(unit = "m6.J-1") = 0.1125281e-6;
            parameter Real C_svc(unit = "m6.J-1") = 0.0375094e-6;
            parameter Real C_ivl(unit = "m6.J-1") = 0.0112528e-6;
            parameter Real C_ivn(unit = "m6.J-1") = 0.5626407e-6;
            parameter Real C_ivc(unit = "m6.J-1") = 0.1125281e-6;
            parameter Real R_svl(unit = "J.s.m-6") = 18.662e+6;
            parameter Real R_svn(unit = "J.s.m-6") = 3.999e+6;
            parameter Real R_svc(unit = "J.s.m-6") = 0.06665e+6;
            parameter Real R_ivl(unit = "J.s.m-6") = 5.332e+6;
            parameter Real R_ivn(unit = "J.s.m-6") = 1.1997e+6;
            parameter Real R_ivc(unit = "J.s.m-6") = 0.06665e+6;
            parameter Real I_svl(unit = "J.s2.m-6") = 0.1333e+6;
            parameter Real I_svn(unit = "J.s2.m-6") = 0.06665e+6;
            parameter Real I_svc(unit = "J.s2.m-6") = 0.06665e+6;
            parameter Real I_ivl(unit = "J.s2.m-6") = 0.1333e+6;
            parameter Real I_ivn(unit = "J.s2.m-6") = 0.06665e+6;
            parameter Real I_ivc(unit = "J.s2.m-6") = 0.06665e+6;
            parameter Real r_ascending_aorta_A(unit = "m") = 15.642e-03;
            parameter Real r_ascending_aorta_B(unit = "m") = 15.08e-03;
            parameter Real r_ascending_aorta_C(unit = "m") = 14.5305e-03;
            parameter Real r_ascending_aorta_D(unit = "m") = 13.914e-03;
            parameter Real r_aortic_arch_C2(unit = "m") = 13.3364e-03;
            parameter Real r_brachiocephalic_trunk_C4(unit = "m") = 6.41887e-03;
            parameter Real r_aortic_arch_C46(unit = "m") = 12.76710e-03;
            parameter Real r_aortic_arch_C64(unit = "m") = 12.42880e-03;
            parameter Real r_aortic_arch_C94(unit = "m") = 11.7401e-03;
            parameter Real r_thoracic_aorta_C96(unit = "m") = 10.4579e-03;
            parameter Real r_thoracic_aorta_C100(unit = "m") = 10.2897e-03;
            parameter Real r_thoracic_aorta_C104(unit = "m") = 10.0681e-03;
            parameter Real r_thoracic_aorta_C108(unit = "m") = 9.87279e-03;
            parameter Real r_thoracic_aorta_C112(unit = "m") = 8.47543e-03;
            parameter Real r_abdominal_aorta_C114(unit = "m") = 7.51533e-03;
            parameter Real r_abdominal_aorta_C136(unit = "m") = 7.42666e-03;
            parameter Real r_abdominal_aorta_C164(unit = "m") = 7.29199e-03;
            parameter Real r_abdominal_aorta_C176(unit = "m") = 7.18902e-03;
            parameter Real r_abdominal_aorta_C188(unit = "m") = 6.79934e-03;
            parameter Real r_abdominal_aorta_C192(unit = "m") = 6.12422e-03;
            parameter Real r_posterior_intercostal_T1_R98(unit = "m") = 1.4e-03;
            parameter Real r_posterior_intercostal_T1_L102(unit = "m") = 1.4e-03;
            parameter Real r_posterior_intercostal_T2_R106(unit = "m") = 1.55e-03;
            parameter Real r_posterior_intercostal_T2_L110(unit = "m") = 1.55e-03;
            parameter Real r_celiac_trunk_C116(unit = "m") = 3.29653e-03;
            parameter Real r_splenic_T2_C118(unit = "m") = 2.16682e-03;
            parameter Real r_left_gastric_T3_C120(unit = "m") = 1.50666e-03;
            parameter Real r_splenic_T2_C122(unit = "m") = 2.16682e-03;
            parameter Real r_dorsal_pancreatic_T1_C124(unit = "m") = 0.558491e-03;
            parameter Real r_splenic_T2_C126(unit = "m") = 2.16682e-03;
            parameter Real r_common_hepatic_C128(unit = "m") = 2.68614e-03;
            parameter Real r_hepatic_artery_proper_C130(unit = "m") = 1.77555e-03;
            parameter Real r_hepatic_artery_proper_left_branch_C132(unit = "m") = 1.1663e-03;
            parameter Real r_hepatic_artery_proper_right_branch_C134(unit = "m") = 1.42068e-03;
            parameter Real r_superior_mesenteric_T4_C138(unit = "m") = 3.72737e-03;
            parameter Real r_middle_colic_T8_C140(unit = "m") = 1.425e-03;
            parameter Real r_superior_mesenteric_T4_C142(unit = "m") = 3.40146e-03;
            parameter Real r_jejunal_3_T10_C144(unit = "m") = 1.58037e-03;
            parameter Real r_superior_mesenteric_T4_C146(unit = "m") = 3.06914e-03;
            parameter Real r_jejunal_6_T11_C148(unit = "m") = 1.58037e-03;
            parameter Real r_superior_mesenteric_T4_C150(unit = "m") = 2.85201e-03;
            parameter Real r_ileocolic_T9_C152(unit = "m") = 2.0e-03;
            parameter Real r_superior_mesenteric_T4_C154(unit = "m") = 2.69257e-03;
            parameter Real r_ileal_4_T12_C156(unit = "m") = 1.8015e-03;
            parameter Real r_superior_mesenteric_T4_C158(unit = "m") = 2.49385e-03;
            parameter Real r_ileal_6_T13_C160(unit = "m") = 1.80150e-03;
            parameter Real r_superior_mesenteric_T4_C162(unit = "m") = 2.18233e-03;
            parameter Real r_renal_L166(unit = "m") = 2.73574e-03;
            parameter Real r_renal_anterior_branch_L168(unit = "m") = 2.48193e-03;
            parameter Real r_inferior_segmental_T5_L170(unit = "m") = 1.92732e-03;
            parameter Real r_superior_segmental_T4_L172(unit = "m") = 1.92732e-03;
            parameter Real r_renal_posterior_branch_T3_L174(unit = "m") = 1.59319e-03;
            parameter Real r_renal_R178(unit = "m") = 2.96767e-03;
            parameter Real r_renal_anterior_branch_R180(unit = "m") = 2.48193e-03;
            parameter Real r_superior_segmental_T4_R182(unit = "m") = 1.92732e-03;
            parameter Real r_inferior_segmental_T5_R184(unit = "m") = 1.92732e-03;
            parameter Real r_renal_posterior_branch_T3_R186(unit = "m") = 1.59319e-03;
            parameter Real r_inferior_mesenteric_T5_C190(unit = "m") = 2.07748e-03;
            parameter Real r_common_iliac_R216(unit = "m") = 4.30633e-03;
            parameter Real r_internal_iliac_T1_R218(unit = "m") = 2.81829e-03;
            parameter Real r_external_iliac_R220(unit = "m") = 3.28821e-03;
            parameter Real r_femoral_R222(unit = "m") = 3.17347e-03;
            parameter Real r_profundus_T2_R224(unit = "m") = 2.14445e-03;
            parameter Real r_femoral_R226(unit = "m") = 2.89103e-03;
            parameter Real r_popliteal_R228(unit = "m") = 2.51554e-03;
            parameter Real r_anterior_tibial_T3_R230(unit = "m") = 1.1663e-03;
            parameter Real r_popliteal_R232(unit = "m") = 2.35852e-03;
            parameter Real r_tibiofibular_trunk_R234(unit = "m") = 2.34646e-03;
            parameter Real r_posterior_tibial_T4_R236(unit = "m") = 1.22936e-03;
            parameter Real r_common_iliac_L194(unit = "m") = 4.28142e-03;
            parameter Real r_internal_iliac_T1_L196(unit = "m") = 2.81829e-03;
            parameter Real r_external_iliac_L198(unit = "m") = 3.28821e-03;
            parameter Real r_femoral_L200(unit = "m") = 3.17347e-03;
            parameter Real r_profundus_T2_L202(unit = "m") = 2.14445e-03;
            parameter Real r_femoral_L204(unit = "m") = 2.89103e-03;
            parameter Real r_popliteal_L206(unit = "m") = 2.51554e-03;
            parameter Real r_anterior_tibial_T3_L208(unit = "m") = 1.1663e-03;
            parameter Real r_popliteal_L210(unit = "m") = 2.35852e-03;
            parameter Real r_tibiofibular_trunk_L212(unit = "m") = 2.34646e-03;
            parameter Real r_posterior_tibial_T4_L214(unit = "m") = 1.22936e-03;
            parameter Real r_subclavian_R28(unit = "m") = 4.52027e-03;
            parameter Real r_subclavian_R30(unit = "m") = 3.32268e-03;
            parameter Real r_axillary_R32(unit = "m") = 2.18463e-03;
            parameter Real r_brachial_R34(unit = "m") = 1.96732e-03;
            parameter Real r_ulnar_T2_R36(unit = "m") = 1.408e-03;
            parameter Real r_common_interosseous_R38(unit = "m") = 0.959006e-03;
            parameter Real r_posterior_interosseous_T3_R40(unit = "m") = 0.675992e-03;
            parameter Real r_ulnar_T2_R42(unit = "m") = 1.408e-03;
            parameter Real r_radial_T1_R44(unit = "m") = 1.378e-03;
            parameter Real r_subclavian_L66(unit = "m") = 3.99235e-03;
            parameter Real r_subclavian_L78(unit = "m") = 2.90824e-03;
            parameter Real r_axillary_L80(unit = "m") = 2.18463e-03;
            parameter Real r_brachial_L82(unit = "m") = 1.96732e-03;
            parameter Real r_ulnar_T2_L84(unit = "m") = 1.408e-03;
            parameter Real r_common_interosseous_L86(unit = "m") = 0.959006e-03;
            parameter Real r_posterior_interosseous_T3_L88(unit = "m") = 0.675992e-03;
            parameter Real r_ulnar_T2_L90(unit = "m") = 1.408e-03;
            parameter Real r_radial_T1_L92(unit = "m") = 1.378e-03;
            parameter Real r_common_carotid_R6_A(unit = "m") = 4.43053e-03;
            parameter Real r_common_carotid_R6_B(unit = "m") = 4.137e-03;
            parameter Real r_common_carotid_R6_C(unit = "m") = 3.64938e-03;
            parameter Real r_internal_carotid_R8_A(unit = "m") = 2.53763e-03;
            parameter Real r_internal_carotid_R8_B(unit = "m") = 2.04793e-03;
            parameter Real r_internal_carotid_R8_C(unit = "m") = 1.56726e-03;
            parameter Real r_external_carotid_T2_R26(unit = "m") = 2.26547e-03;
            parameter Real r_common_carotid_L48_A(unit = "m") = 4.36635e-03;
            parameter Real r_common_carotid_L48_B(unit = "m") = 4.12756e-03;
            parameter Real r_common_carotid_L48_C(unit = "m") = 3.92047e-03;
            parameter Real r_common_carotid_L48_D(unit = "m") = 3.57978e-03;
            parameter Real r_internal_carotid_L50_A(unit = "m") = 2.53763e-03;
            parameter Real r_internal_carotid_L50_B(unit = "m") = 2.04793e-03;
            parameter Real r_internal_carotid_L50_C(unit = "m") = 1.56726e-03;
            parameter Real r_external_carotid_T2_L62(unit = "m") = 2.26547e-03;
            parameter Real r_vertebral_L2(unit = "m") = 0.133527e-2;
            parameter Real r_vertebral_R272(unit = "m") = 0.133527e-2;
            parameter Real r_basilar_C4(unit = "m") = 0.172394e-2;
            parameter Real r_posterior_cerebral_precommunicating_part_L6(unit = "m") = 0.0816459e-2;
            parameter Real r_posterior_cerebral_precommunicating_part_R204(unit = "m") = 0.0816459e-2;
            parameter Real r_posterior_communicating_L8(unit = "m") = 0.0494463e-2;
            parameter Real r_posterior_communicating_R206(unit = "m") = 0.0494463e-2;
            parameter Real r_posterior_cerebral_postcommunicating_part_L12(unit = "m") = 0.0869072e-2;
            parameter Real r_posterior_cerebral_postcommunicating_part_R208(unit = "m") = 0.0869072e-2;
            parameter Real r_occipital_lateral_L14(unit = "m") = 0.064999e-2;
            parameter Real r_occipital_lateral_R210(unit = "m") = 0.0649994e-2;
            parameter Real r_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "m") = 0.06e-2;
            parameter Real r_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "m") = 0.06e-2;
            parameter Real r_occipital_lateral_L18(unit = "m") = 0.0649994e-2;
            parameter Real r_occipital_lateral_R214(unit = "m") = 0.0649994e-2;
            parameter Real r_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "m") = 0.028e-2;
            parameter Real r_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "m") = 0.028e-2;
            parameter Real r_occipital_lateral_L22(unit = "m") = 0.0649994e-2;
            parameter Real r_occipital_lateral_R218(unit = "m") = 0.0649994e-2;
            parameter Real r_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "m") = 0.0375006e-2;
            parameter Real r_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "m") = 0.0375006e-2;
            parameter Real r_medial_occipital_L26(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_R222(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_dorsal_branch_to_corpus_callosum_L28(unit = "m") = 0.0349979e-2;
            parameter Real r_medial_occipital_dorsal_branch_to_corpus_callosum_R224(unit = "m") = 0.0349979e-2;
            parameter Real r_pericallosal_parieto_occipital_branch_T60_L30(unit = "m") = 0.0421522e-2;
            parameter Real r_pericallosal_parieto_occipital_branch_T124_R226(unit = "m") = 0.0421522e-2;
            parameter Real r_pericallosal_L32(unit = "m") = 0.0800314e-2;
            parameter Real r_pericallosal_R228(unit = "m") = 0.0800314e-2;
            parameter Real r_pericallosal_precuneal_branch_T61_L34(unit = "m") = 0.0477132e-2;
            parameter Real r_pericallosal_precuneal_branch_T125_R230(unit = "m") = 0.0477132e-2;
            parameter Real r_pericallosal_L36(unit = "m") = 0.0800314e-2;
            parameter Real r_pericallosal_R232(unit = "m") = 0.0800314e-2;
            parameter Real r_anterior_cerebral_L38(unit = "m") = 0.0965045e-2;
            parameter Real r_anterior_cerebral_R234(unit = "m") = 0.0965045e-2;
            parameter Real r_distal_medial_striate_T44_L40(unit = "m") = 0.027251e-2;
            parameter Real r_distal_medial_striate_T109_R236(unit = "m") = 0.027251e-2;
            parameter Real r_anterior_cerebral_L42(unit = "m") = 0.0965045e-2;
            parameter Real r_anterior_cerebral_R238(unit = "m") = 0.0965045e-2;
            parameter Real r_anterior_communicating_C44(unit = "m") = 0.0656645e-2;
            parameter Real r_anterior_cerebral_L110(unit = "m") = 0.0965045e-2;
            parameter Real r_anterior_cerebral_R46(unit = "m") = 0.0965045e-2;
            parameter Real r_internal_carotid_L112(unit = "m") = 0.132843e-2;
            parameter Real r_internal_carotid_R48(unit = "m") = 0.132843e-2;
            parameter Real r_middle_cerebral_L114(unit = "m") = 0.104132e-2;
            parameter Real r_middle_cerebral_R52(unit = "m") = 0.104132e-2;
            parameter Real r_anterior_choroidal_T34_L116(unit = "m") = 0.0519606e-2;
            parameter Real r_anterior_choroidal_T98_R54(unit = "m") = 0.0519606e-2;
            parameter Real r_middle_cerebral_L118(unit = "m") = 0.104132e-2;
            parameter Real r_middle_cerebral_R56(unit = "m") = 0.104132e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_L120(unit = "m") = 0.0877201e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_R58(unit = "m") = 0.0877201e-2;
            parameter Real r_lateral_frontobasal_T45_L122(unit = "m") = 0.0385346e-2;
            parameter Real r_lateral_frontobasal_T110_R60(unit = "m") = 0.0385346e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_L124(unit = "m") = 0.0877201e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_R62(unit = "m") = 0.0877201e-2;
            parameter Real r_prefrontal_T65_L126(unit = "m") = 0.0480986e-2;
            parameter Real r_prefrontal_T130_R64(unit = "m") = 0.0480986e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_L128(unit = "m") = 0.0877201e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_R66(unit = "m") = 0.0877201e-2;
            parameter Real r_artery_of_precentral_sulcus_T38_L130(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_precentral_sulcus_T103_R68(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_central_sulcus_T36_L132(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_central_sulcus_T101_R70(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_precentral_sulcus_T38_L134(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_precentral_sulcus_T103_R72(unit = "m") = 0.0480986e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L136(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R74(unit = "m") = 0.0816459e-2;
            parameter Real r_polar_temporal_T63_L138(unit = "m") = 0.0309894e-2;
            parameter Real r_polar_temporal_T127_R76(unit = "m") = 0.0309894e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L140(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R78(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "m") = 0.0442556e-2;
            parameter Real r_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "m") = 0.0442556e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L144(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R82(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_middle_temporal_branch_T57_L146(unit = "m") = 0.046174e-2;
            parameter Real r_middle_cerebral_middle_temporal_branch_T121_R84(unit = "m") = 0.046174e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L148(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R86(unit = "m") = 0.0816459e-2;
            parameter Real r_artery_of_postcentral_sulcus_T37_L150(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_postcentral_sulcus_T102_R88(unit = "m") = 0.0480986e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L152(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R90(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_posterior_temporal_branch_T58_L154(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporal_branch_T122_R92(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L160(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R98(unit = "m") = 0.0816459e-2;
            parameter Real r_anterior_parietal_T35_L162(unit = "m") = 0.0442556e-2;
            parameter Real r_anterior_parietal_T100_R100(unit = "m") = 0.0442556e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L164(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R102(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_branch_to_angular_gyrus_T56_L166(unit = "m") = 0.0558491e-2;
            parameter Real r_middle_cerebral_branch_to_angular_gyrus_T120_R104(unit = "m") = 0.0558491e-2;
            parameter Real r_posterior_parietal_T64_L168(unit = "m") = 0.0519606e-2;
            parameter Real r_posterior_parietal_T129_R106(unit = "m") = 0.0519606e-2;
            parameter Real r_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "m") = 0.0558491e-2;
            parameter Real r_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "m") = 0.0558491e-2;
            parameter Real r_callosomarginal_L172(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_R240(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "m") = 0.0465585e-2;
            parameter Real r_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "m") = 0.0465585e-2;
            parameter Real r_callosomarginal_L176(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_R244(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "m") = 0.0521563e-2;
            parameter Real r_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "m") = 0.0521563e-2;
            parameter Real r_callosomarginal_L180(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_R248(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_cingular_branch_T40_L182(unit = "m") = 0.0475194e-2;
            parameter Real r_callosomarginal_cingular_branch_T105_R250(unit = "m") = 0.0475194e-2;
            parameter Real r_callosomarginal_L184(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_R252(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_paracentral_branch_T42_L186(unit = "m") = 0.0475194e-2;
            parameter Real r_callosomarginal_paracentral_branch_T107_R254(unit = "m") = 0.0475194e-2;
            parameter Real r_medial_occipital_L188(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_R256(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_occipitotemporal_branch_T52_L190(unit = "m") = 0.0349979e-2;
            parameter Real r_medial_occipital_occipitotemporal_branch_T80_R258(unit = "m") = 0.0349979e-2;
            parameter Real r_medial_occipital_L192(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_R260(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_parieto_occipital_branch_T54_L194(unit = "m") = 0.0500001e-2;
            parameter Real r_medial_occipital_parieto_occipital_branch_T118_R262(unit = "m") = 0.0500001e-2;
            parameter Real r_medial_occipital_parietal_branch_T53_L196(unit = "m") = 0.0295002e-2;
            parameter Real r_medial_occipital_parietal_branch_T81_R264(unit = "m") = 0.0295002e-2;
            parameter Real r_medial_occipital_parieto_occipital_branch_T54_L198(unit = "m") = 0.0500001e-2;
            parameter Real r_medial_occipital_parieto_occipital_branch_T118_R266(unit = "m") = 0.0500001e-2;
            parameter Real r_medial_occipital_L200(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_R268(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_calcarine_branch_T51_L202(unit = "m") = 0.0349979e-2;
            parameter Real r_medial_occipital_calcarine_branch_T79_R270(unit = "m") = 0.0349979e-2;
            parameter Physiolibrary.Types.Length l_ascending_aorta_A = 15.3234e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_ascending_aorta_B = 14.796e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_ascending_aorta_C = 14.796e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_ascending_aorta_D = 14.796e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_aortic_arch_C2 = 14.796e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachiocephalic_trunk_C4 = 47.3822e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_aortic_arch_C46 = 9.60849e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_aortic_arch_C64 = 6.97955e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_aortic_arch_C94 = 43.2111e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_thoracic_aorta_C96 = 9.89803e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_thoracic_aorta_C100 = 7.88038e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_thoracic_aorta_C104 = 15.5561e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_thoracic_aorta_C108 = 5.32705e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_thoracic_aorta_C112 = 121.566e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_abdominal_aorta_C114 = 3.24767e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_abdominal_aorta_C136 = 13.9886e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_abdominal_aorta_C164 = 4.31913e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_abdominal_aorta_C176 = 11.9773e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_abdominal_aorta_C188 = 54.0907e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_abdominal_aorta_C192 = 42.231e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_posterior_intercostal_T1_R98 = 197.232e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_posterior_intercostal_T1_L102 = 178.519e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_posterior_intercostal_T2_R106 = 201.883e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_posterior_intercostal_T2_L110 = 185.547e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_celiac_trunk_C116 = 16.9374e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_splenic_T2_C118 = 3.9576e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_left_gastric_T3_C120 = 94.8344e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_splenic_T2_C122 = 2.79812e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_dorsal_pancreatic_T1_C124 = 33.4687e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_splenic_T2_C126 = 63.2749e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_common_hepatic_C128 = 69.3076e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_hepatic_artery_proper_C130 = 16.8059e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_hepatic_artery_proper_left_branch_C132 = 164.224e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_hepatic_artery_proper_right_branch_C134 = 80.0632e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_superior_mesenteric_T4_C138 = 49.5492e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_middle_colic_T8_C140 = 116.298e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_superior_mesenteric_T4_C142 = 35.1664e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_jejunal_3_T10_C144 = 47.6944e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_superior_mesenteric_T4_C146 = 32.2488e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_jejunal_6_T11_C148 = 63.8535e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_superior_mesenteric_T4_C150 = 16.7458e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_ileocolic_T9_C152 = 46.8332e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_superior_mesenteric_T4_C154 = 23.0546e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_ileal_4_T12_C156 = 45.6984e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_superior_mesenteric_T4_C158 = 20.5397e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_ileal_6_T13_C160 = 29.1584e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_superior_mesenteric_T4_C162 = 39.4879e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_renal_L166 = 22.0037e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_renal_anterior_branch_L168 = 10.8789e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_inferior_segmental_T5_L170 = 40.8761e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_superior_segmental_T4_L172 = 29.7265e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_renal_posterior_branch_T3_L174 = 22.3608e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_renal_R178 = 37.7403e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_renal_anterior_branch_R180 = 10.8792e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_superior_segmental_T4_R182 = 29.7263e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_inferior_segmental_T5_R184 = 40.8756e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_renal_posterior_branch_T3_R186 = 22.36e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_inferior_mesenteric_T5_C190 = 90.3282e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_common_iliac_R216 = 76.4393e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_internal_iliac_T1_R218 = 72.5302e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_external_iliac_R220 = 102.358e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_femoral_R222 = 31.5982e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_profundus_T2_R224 = 238.438e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_femoral_R226 = 319.297e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_popliteal_R228 = 132.06e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_anterior_tibial_T3_R230 = 386.388e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_popliteal_R232 = 8.80051e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_tibiofibular_trunk_R234 = 36.1667e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_posterior_tibial_T4_R236 = 382.987e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_common_iliac_L194 = 74.0524e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_internal_iliac_T1_L196 = 72.5301e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_external_iliac_L198 = 102.358e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_femoral_L200 = 31.5982e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_profundus_T2_L202 = 238.438e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_femoral_L204 = 319.297e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_popliteal_L206 = 132.059e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_anterior_tibial_T3_L208 = 386.389e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_popliteal_L210 = 8.80046e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_tibiofibular_trunk_L212 = 36.1676e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_posterior_tibial_T4_L214 = 382.987e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_subclavian_R28 = 15.7469e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_subclavian_R30 = 41.1419e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_axillary_R32 = 120.021e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachial_R34 = 223.119e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_ulnar_T2_R36 = 29.7599e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_common_interosseous_R38 = 16.2682e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_posterior_interosseous_T3_R40 = 231.694e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_ulnar_T2_R42 = 239.276e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_radial_T1_R44 = 302.156e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_subclavian_L66 = 49.4669e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_subclavian_L78 = 41.1396e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_axillary_L80 = 120.021e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachial_L82 = 223.119e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_ulnar_T2_L84 = 29.7594e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_common_interosseous_L86 = 16.2681e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_posterior_interosseous_T3_L88 = 231.695e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_ulnar_T2_L90 = 239.277e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_radial_T1_L92 = 302.155e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_common_carotid_R6_A = 27.0844e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_common_carotid_R6_B = 27.0844e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_common_carotid_R6_C = 27.0844e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_internal_carotid_R8_A = 45.036e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_internal_carotid_R8_B = 45.036e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_internal_carotid_R8_C = 45.036e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_external_carotid_T2_R26 = 61.0125e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_common_carotid_L48_A = 30.339e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_common_carotid_L48_B = 30.339e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_common_carotid_L48_C = 30.339e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_common_carotid_L48_D = 30.339e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_internal_carotid_L50_A = 45.036e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_internal_carotid_L50_B = 45.036e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_internal_carotid_L50_C = 45.036e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_external_carotid_T2_L62 = 61.0127e-03*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_vertebral_L2 = 20.9765e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_vertebral_R272 = 21.0146e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_basilar_C4 = 2.26443e-2*height_actual/height_nominal;
            parameter Real C_ascending_aorta_A(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_ascending_aorta_B(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_ascending_aorta_C(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_ascending_aorta_D(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_aortic_arch_C2(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_brachiocephalic_trunk_C4(unit = "m6.J-1") = 0.86529e-10;
            parameter Real C_aortic_arch_C46(unit = "m6.J-1") = 0.799e-10;
            parameter Real C_aortic_arch_C64(unit = "m6.J-1") = 0.548e-10;
            parameter Real C_aortic_arch_C94(unit = "m6.J-1") = 2.83e-10;
            parameter Real C_thoracic_aorta_C96(unit = "m6.J-1") = 0.534e-10;
            parameter Real C_thoracic_aorta_C100(unit = "m6.J-1") = 0.411e-10;
            parameter Real C_thoracic_aorta_C104(unit = "m6.J-1") = 0.774e-10;
            parameter Real C_thoracic_aorta_C108(unit = "m6.J-1") = 0.254e-10;
            parameter Real C_thoracic_aorta_C112(unit = "m6.J-1") = 4.39e-10;
            parameter Real C_abdominal_aorta_C114(unit = "m6.J-1") = 0.084e-10;
            parameter Real C_abdominal_aorta_C136(unit = "m6.J-1") = 0.35e-10;
            parameter Real C_abdominal_aorta_C164(unit = "m6.J-1") = 0.104e-10;
            parameter Real C_abdominal_aorta_C176(unit = "m6.J-1") = 0.281e-10;
            parameter Real C_abdominal_aorta_C188(unit = "m6.J-1") = 1.11e-10;
            parameter Real C_abdominal_aorta_C192(unit = "m6.J-1") = 0.6966e-10;
            parameter Real C_posterior_intercostal_T1_R98(unit = "m6.J-1") = 0.0848e-10;
            parameter Real C_posterior_intercostal_T1_L102(unit = "m6.J-1") = 0.0767e-10;
            parameter Real C_posterior_intercostal_T2_R106(unit = "m6.J-1") = 0.11e-10;
            parameter Real C_posterior_intercostal_T2_L110(unit = "m6.J-1") = 0.102e-10;
            parameter Real C_celiac_trunk_C116(unit = "m6.J-1") = 0.0593e-10;
            parameter Real C_splenic_T2_C118(unit = "m6.J-1") = 0.00491e-10;
            parameter Real C_left_gastric_T3_C120(unit = "m6.J-1") = 0.04857e-10;
            parameter Real C_splenic_T2_C122(unit = "m6.J-1") = 0.00347e-10;
            parameter Real C_dorsal_pancreatic_T1_C124(unit = "m6.J-1") = 0.00179e-10;
            parameter Real C_splenic_T2_C126(unit = "m6.J-1") = 0.07847e-10;
            parameter Real C_common_hepatic_C128(unit = "m6.J-1") = 0.1468e-10;
            parameter Real C_hepatic_artery_proper_C130(unit = "m6.J-1") = 0.01254e-10;
            parameter Real C_hepatic_artery_proper_left_branch_C132(unit = "m6.J-1") = 0.046e-10;
            parameter Real C_hepatic_artery_proper_right_branch_C134(unit = "m6.J-1") = 0.0356e-10;
            parameter Real C_superior_mesenteric_T4_C138(unit = "m6.J-1") = 0.2373e-10;
            parameter Real C_middle_colic_T8_C140(unit = "m6.J-1") = 0.0521e-10;
            parameter Real C_superior_mesenteric_T4_C142(unit = "m6.J-1") = 0.13e-10;
            parameter Real C_jejunal_3_T10_C144(unit = "m6.J-1") = 0.0274e-10;
            parameter Real C_superior_mesenteric_T4_C146(unit = "m6.J-1") = 0.095e-10;
            parameter Real C_jejunal_6_T11_C148(unit = "m6.J-1") = 0.03667e-10;
            parameter Real C_superior_mesenteric_T4_C150(unit = "m6.J-1") = 0.0412e-10;
            parameter Real C_ileocolic_T9_C152(unit = "m6.J-1") = 0.04767e-10;
            parameter Real C_superior_mesenteric_T4_C154(unit = "m6.J-1") = 0.0486e-10;
            parameter Real C_ileal_4_T12_C156(unit = "m6.J-1") = 0.036e-10;
            parameter Real C_superior_mesenteric_T4_C158(unit = "m6.J-1") = 0.0361e-10;
            parameter Real C_ileal_6_T13_C160(unit = "m6.J-1") = 0.023e-10;
            parameter Real C_superior_mesenteric_T4_C162(unit = "m6.J-1") = 0.0531e-10;
            parameter Real C_renal_L166(unit = "m6.J-1") = 0.049e-10;
            parameter Real C_renal_anterior_branch_L168(unit = "m6.J-1") = 0.0189e-10;
            parameter Real C_inferior_segmental_T5_L170(unit = "m6.J-1") = 0.038e-10;
            parameter Real C_superior_segmental_T4_L172(unit = "m6.J-1") = 0.0276e-10;
            parameter Real C_renal_posterior_branch_T3_L174(unit = "m6.J-1") = 0.0131e-10;
            parameter Real C_renal_R178(unit = "m6.J-1") = 0.1e-10;
            parameter Real C_renal_anterior_branch_R180(unit = "m6.J-1") = 0.0189e-10;
            parameter Real C_superior_segmental_T4_R182(unit = "m6.J-1") = 0.02763e-10;
            parameter Real C_inferior_segmental_T5_R184(unit = "m6.J-1") = 0.038e-10;
            parameter Real C_renal_posterior_branch_T3_R186(unit = "m6.J-1") = 0.0131e-10;
            parameter Real C_inferior_mesenteric_T5_C190(unit = "m6.J-1") = 0.1e-10;
            parameter Real C_common_iliac_R216(unit = "m6.J-1") = 0.525e-10;
            parameter Real C_internal_iliac_T1_R218(unit = "m6.J-1") = 0.1733e-10;
            parameter Real C_external_iliac_R220(unit = "m6.J-1") = 0.359e-10;
            parameter Real C_femoral_R222(unit = "m6.J-1") = 0.101e-10;
            parameter Real C_profundus_T2_R224(unit = "m6.J-1") = 0.288e-10;
            parameter Real C_femoral_R226(unit = "m6.J-1") = 0.8338e-10;
            parameter Real C_popliteal_R228(unit = "m6.J-1") = 0.241e-10;
            parameter Real C_anterior_tibial_T3_R230(unit = "m6.J-1") = 0.108e-10;
            parameter Real C_popliteal_R232(unit = "m6.J-1") = 0.01345e-10;
            parameter Real C_tibiofibular_trunk_R234(unit = "m6.J-1") = 0.0546e-10;
            parameter Real C_posterior_tibial_T4_R236(unit = "m6.J-1") = 0.121e-10;
            parameter Real C_common_iliac_L194(unit = "m6.J-1") = 0.509e-10;
            parameter Real C_internal_iliac_T1_L196(unit = "m6.J-1") = 0.1733e-10;
            parameter Real C_external_iliac_L198(unit = "m6.J-1") = 0.359e-10;
            parameter Real C_femoral_L200(unit = "m6.J-1") = 0.101e-10;
            parameter Real C_profundus_T2_L202(unit = "m6.J-1") = 0.288e-10;
            parameter Real C_femoral_L204(unit = "m6.J-1") = 0.8338e-10;
            parameter Real C_popliteal_L206(unit = "m6.J-1") = 0.241e-10;
            parameter Real C_anterior_tibial_T3_L208(unit = "m6.J-1") = 0.108e-10;
            parameter Real C_popliteal_L210(unit = "m6.J-1") = 0.01345e-10;
            parameter Real C_tibiofibular_trunk_L212(unit = "m6.J-1") = 0.05466e-10;
            parameter Real C_posterior_tibial_T4_L214(unit = "m6.J-1") = 0.121e-10;
            parameter Real C_subclavian_R28(unit = "m6.J-1") = 0.1242e-10;
            parameter Real C_subclavian_R30(unit = "m6.J-1") = 0.147e-10;
            parameter Real C_axillary_R32(unit = "m6.J-1") = 0.153e-10;
            parameter Real C_brachial_R34(unit = "m6.J-1") = 0.215e-10;
            parameter Real C_ulnar_T2_R36(unit = "m6.J-1") = 0.013e-10;
            parameter Real C_common_interosseous_R38(unit = "m6.J-1") = 0.0029e-10;
            parameter Real C_posterior_interosseous_T3_R40(unit = "m6.J-1") = 0.019e-10;
            parameter Real C_ulnar_T2_R42(unit = "m6.J-1") = 0.1043e-10;
            parameter Real C_radial_T1_R44(unit = "m6.J-1") = 0.125e-10;
            parameter Real C_subclavian_L66(unit = "m6.J-1") = 0.324e-10;
            parameter Real C_subclavian_L78(unit = "m6.J-1") = 0.1075e-10;
            parameter Real C_axillary_L80(unit = "m6.J-1") = 0.153e-10;
            parameter Real C_brachial_L82(unit = "m6.J-1") = 0.215e-10;
            parameter Real C_ulnar_T2_L84(unit = "m6.J-1") = 0.013e-10;
            parameter Real C_common_interosseous_L86(unit = "m6.J-1") = 0.0029e-10;
            parameter Real C_posterior_interosseous_T3_L88(unit = "m6.J-1") = 0.019e-10;
            parameter Real C_ulnar_T2_L90(unit = "m6.J-1") = 0.1043e-10;
            parameter Real C_radial_T1_L92(unit = "m6.J-1") = 0.125e-10;
            parameter Real C_common_carotid_R6_A(unit = "m6.J-1") = 0.148e-10;
            parameter Real C_common_carotid_R6_B(unit = "m6.J-1") = 0.148e-10;
            parameter Real C_common_carotid_R6_C(unit = "m6.J-1") = 0.148e-10;
            parameter Real C_internal_carotid_R8_A(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_internal_carotid_R8_B(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_internal_carotid_R8_C(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_external_carotid_T2_R26(unit = "m6.J-1") = 0.0845e-10;
            parameter Real C_common_carotid_L48_A(unit = "m6.J-1") = 0.1661e-10;
            parameter Real C_common_carotid_L48_B(unit = "m6.J-1") = 0.1661e-10;
            parameter Real C_common_carotid_L48_C(unit = "m6.J-1") = 0.1661e-10;
            parameter Real C_common_carotid_L48_D(unit = "m6.J-1") = 0.1661e-10;
            parameter Real C_internal_carotid_L50_A(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_internal_carotid_L50_B(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_internal_carotid_L50_C(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_external_carotid_T2_L62(unit = "m6.J-1") = 0.0845e-10;
            parameter Real C_vertebral_L2(unit = "m6.J-1") = 0.0811e-10;
            parameter Real C_vertebral_R272(unit = "m6.J-1") = 0.0811e-10;
            parameter Real C_basilar_C4(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_cerebral_precommunicating_part_L6(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_cerebral_precommunicating_part_R204(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_communicating_L8(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_communicating_R206(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_cerebral_postcommunicating_part_L12(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_cerebral_postcommunicating_part_R208(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_L14(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_R210(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_L18(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_R214(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_L22(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_R218(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_L26(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_R222(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_dorsal_branch_to_corpus_callosum_L28(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_dorsal_branch_to_corpus_callosum_R224(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_parieto_occipital_branch_T60_L30(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_parieto_occipital_branch_T124_R226(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_L32(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_R228(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_precuneal_branch_T61_L34(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_precuneal_branch_T125_R230(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_L36(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_R232(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_L38(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_R234(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_distal_medial_striate_T44_L40(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_distal_medial_striate_T109_R236(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_L42(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_R238(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_communicating_C44(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_L110(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_R46(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_internal_carotid_L112(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_internal_carotid_R48(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_L114(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_R52(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_choroidal_T34_L116(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_choroidal_T98_R54(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_L118(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_R56(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_L120(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_R58(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_frontobasal_T45_L122(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_frontobasal_T110_R60(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_L124(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_R62(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_prefrontal_T65_L126(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_prefrontal_T130_R64(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_L128(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_R66(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_precentral_sulcus_T38_L130(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_precentral_sulcus_T103_R68(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_central_sulcus_T36_L132(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_central_sulcus_T101_R70(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_precentral_sulcus_T38_L134(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_precentral_sulcus_T103_R72(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L136(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R74(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_polar_temporal_T63_L138(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_polar_temporal_T127_R76(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L140(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R78(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L144(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R82(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_middle_temporal_branch_T57_L146(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_middle_temporal_branch_T121_R84(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L148(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R86(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_postcentral_sulcus_T37_L150(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_postcentral_sulcus_T102_R88(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L152(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R90(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporal_branch_T58_L154(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporal_branch_T122_R92(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L160(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R98(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_parietal_T35_L162(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_parietal_T100_R100(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L164(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R102(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_branch_to_angular_gyrus_T56_L166(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_branch_to_angular_gyrus_T120_R104(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_parietal_T64_L168(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_parietal_T129_R106(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_L172(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_R240(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_L176(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_R244(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_L180(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_R248(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_cingular_branch_T40_L182(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_cingular_branch_T105_R250(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_L184(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_R252(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_paracentral_branch_T42_L186(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_paracentral_branch_T107_R254(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_L188(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_R256(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_occipitotemporal_branch_T52_L190(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_occipitotemporal_branch_T80_R258(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_L192(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_R260(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parieto_occipital_branch_T54_L194(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parieto_occipital_branch_T118_R262(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parietal_branch_T53_L196(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parietal_branch_T81_R264(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parieto_occipital_branch_T54_L198(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parieto_occipital_branch_T118_R266(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_L200(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_R268(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_calcarine_branch_T51_L202(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_calcarine_branch_T79_R270(unit = "m6.J-1") = 1.6e-10;
            parameter Real R_T_posterior_intercostal_T1_R98(unit = "J.s.m-6") = 22.5809e+9;
            parameter Real R_T_posterior_intercostal_T1_L102(unit = "J.s.m-6") = 23.1661e+9;
            parameter Real R_T_posterior_intercostal_T2_R106(unit = "J.s.m-6") = 21.0678e+9;
            parameter Real R_T_posterior_intercostal_T2_L110(unit = "J.s.m-6") = 21.2483e+9;
            parameter Real R_T_left_gastric_T3_C120(unit = "J.s.m-6") = 31.1251e+9;
            parameter Real R_T_dorsal_pancreatic_T1_C124(unit = "J.s.m-6") = 16.6313e+9;
            parameter Real R_T_splenic_T2_C126(unit = "J.s.m-6") = 0.429028e+9;
            parameter Real R_T_hepatic_artery_proper_left_branch_C132(unit = "J.s.m-6") = 0.852085e+9;
            parameter Real R_T_hepatic_artery_proper_right_branch_C134(unit = "J.s.m-6") = 0.471438e+9;
            parameter Real R_T_middle_colic_T8_C140(unit = "J.s.m-6") = 2.6865e+9;
            parameter Real R_T_jejunal_3_T10_C144(unit = "J.s.m-6") = 1.96952e+9;
            parameter Real R_T_jejunal_6_T11_C148(unit = "J.s.m-6") = 1.96952e+9;
            parameter Real R_T_ileocolic_T9_C152(unit = "J.s.m-6") = 0.971722e+9;
            parameter Real R_T_ileal_4_T12_C156(unit = "J.s.m-6") = 1.32964e+9;
            parameter Real R_T_ileal_6_T13_C160(unit = "J.s.m-6") = 1.32964e+9;
            parameter Real R_T_superior_mesenteric_T4_C162(unit = "J.s.m-6") = 0.880745e+9;
            parameter Real R_T_inferior_segmental_T5_L170(unit = "J.s.m-6") = 0.526057e+9;
            parameter Real R_T_superior_segmental_T4_L172(unit = "J.s.m-6") = 0.526057e+9;
            parameter Real R_T_renal_posterior_branch_T3_L174(unit = "J.s.m-6") = 0.931304e+9;
            parameter Real R_T_superior_segmental_T4_R182(unit = "J.s.m-6") = 0.527823e+9;
            parameter Real R_T_inferior_segmental_T5_R184(unit = "J.s.m-6") = 0.527823e+9;
            parameter Real R_T_renal_posterior_branch_T3_R186(unit = "J.s.m-6") = 0.934431e+9;
            parameter Real R_T_inferior_mesenteric_T5_C190(unit = "J.s.m-6") = 2.16746e+9;
            parameter Real R_T_internal_iliac_T1_R218(unit = "J.s.m-6") = 0.375754e+9;
            parameter Real R_T_profundus_T2_R224(unit = "J.s.m-6") = 0.310612e+9;
            parameter Real R_T_anterior_tibial_T3_R230(unit = "J.s.m-6") = 2.22296e+9;
            parameter Real R_T_posterior_tibial_T4_R236(unit = "J.s.m-6") = 1.91761e+9;
            parameter Real R_T_internal_iliac_T1_L196(unit = "J.s.m-6") = 0.376879e+9;
            parameter Real R_T_profundus_T2_L202(unit = "J.s.m-6") = 0.310778e+9;
            parameter Real R_T_anterior_tibial_T3_L208(unit = "J.s.m-6") = 2.22365e+9;
            parameter Real R_T_posterior_tibial_T4_L214(unit = "J.s.m-6") = 1.91845e+9;
            parameter Real R_T_posterior_interosseous_T3_R40(unit = "J.s.m-6") = 4.33378e+9;
            parameter Real R_T_ulnar_T2_R36(unit = "J.s.m-6") = 1.0649e+9;
            parameter Real R_T_ulnar_T2_R42(unit = "J.s.m-6") = 1.0649e+9;
            parameter Real R_T_radial_T1_R44(unit = "J.s.m-6") = 1.04588e+9;
            parameter Real R_T_posterior_interosseous_T3_L88(unit = "J.s.m-6") = 4.34948e+9;
            parameter Real R_T_ulnar_T2_L84(unit = "J.s.m-6") = 1.08553e+9;
            parameter Real R_T_ulnar_T2_L90(unit = "J.s.m-6") = 1.08553e+9;
            parameter Real R_T_radial_T1_L92(unit = "J.s.m-6") = 1.02715e+9;
            parameter Real R_T_external_carotid_T2_R26(unit = "J.s.m-6") = 0.851183e+9;
            parameter Real R_T_external_carotid_T2_L62(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_internal_carotid_R8_C(unit = "J.s.m-6") = 0.851183e+9;
            parameter Real R_T_internal_carotid_L50_C(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_vertebral_R272(unit = "J.s.m-6") = 0.851183e+9;
            parameter Real R_T_vertebral_L2(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_renal_R178(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_renal_L166(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_celiac_trunk_C116(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "J.s.m-6") = 6.17214e+9;
            parameter Real R_T_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "J.s.m-6") = 60.7317e+9;
            parameter Real R_T_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "J.s.m-6") = 25.2811e+9;
            parameter Real R_T_pericallosal_parieto_occipital_branch_T60_L30(unit = "J.s.m-6") = 17.8019e+9;
            parameter Real R_T_pericallosal_precuneal_branch_T61_L34(unit = "J.s.m-6") = 12.2746e+9;
            parameter Real R_T_distal_medial_striate_T44_L40(unit = "J.s.m-6") = 65.8855e+9;
            parameter Real R_T_anterior_choroidal_T34_L116(unit = "J.s.m-6") = 9.50237e+9;
            parameter Real R_T_lateral_frontobasal_T45_L122(unit = "J.s.m-6") = 23.3019e+9;
            parameter Real R_T_prefrontal_T65_L126(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_artery_of_central_sulcus_T36_L132(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_artery_of_precentral_sulcus_T38_L134(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_polar_temporal_T63_L138(unit = "J.s.m-6") = 44.8075e+9;
            parameter Real R_T_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "J.s.m-6") = 15.3827e+9;
            parameter Real R_T_middle_cerebral_middle_temporal_branch_T57_L146(unit = "J.s.m-6") = 13.5433e+9;
            parameter Real R_T_artery_of_postcentral_sulcus_T37_L150(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "J.s.m-6") = 10.6482e+9;
            parameter Real R_T_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "J.s.m-6") = 10.6482e+9;
            parameter Real R_T_anterior_parietal_T35_L162(unit = "J.s.m-6") = 15.3827e+9;
            parameter Real R_T_posterior_parietal_T64_L168(unit = "J.s.m-6") = 9.50237e+9;
            parameter Real R_T_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "J.s.m-6") = 7.65279e+9;
            parameter Real R_T_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "J.s.m-6") = 13.2110e+9;
            parameter Real R_T_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "J.s.m-6") = 9.39673e+9;
            parameter Real R_T_callosomarginal_cingular_branch_T40_L182(unit = "J.s.m-6") = 12.4248e+9;
            parameter Real R_T_callosomarginal_paracentral_branch_T42_L186(unit = "J.s.m-6") = 12.4248e+9;
            parameter Real R_T_medial_occipital_occipitotemporal_branch_T52_L190(unit = "J.s.m-6") = 31.0946e+9;
            parameter Real R_T_medial_occipital_parietal_branch_T53_L196(unit = "J.s.m-6") = 51.9306e+9;
            parameter Real R_T_medial_occipital_parieto_occipital_branch_T54_L198(unit = "J.s.m-6") = 10.6655e+9;
            parameter Real R_T_medial_occipital_calcarine_branch_T51_L202(unit = "J.s.m-6") = 31.0946e+9;
            parameter Real R_T_anterior_choroidal_T98_R54(unit = "J.s.m-6") = 9.50237e+9;
            parameter Real R_T_lateral_frontobasal_T110_R60(unit = "J.s.m-6") = 23.3019e+9;
            parameter Real R_T_prefrontal_T130_R64(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_artery_of_central_sulcus_T101_R70(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_artery_of_precentral_sulcus_T103_R72(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_polar_temporal_T127_R76(unit = "J.s.m-6") = 44.8075e+9;
            parameter Real R_T_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "J.s.m-6") = 15.3827e+9;
            parameter Real R_T_middle_cerebral_middle_temporal_branch_T121_R84(unit = "J.s.m-6") = 13.5433e+9;
            parameter Real R_T_artery_of_postcentral_sulcus_T102_R88(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "J.s.m-6") = 10.6482e+9;
            parameter Real R_T_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "J.s.m-6") = 10.6482e+9;
            parameter Real R_T_anterior_parietal_T100_R100(unit = "J.s.m-6") = 15.3827e+9;
            parameter Real R_T_posterior_parietal_T129_R106(unit = "J.s.m-6") = 9.50237e+9;
            parameter Real R_T_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "J.s.m-6") = 7.65279e+9;
            parameter Real R_T_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "J.s.m-6") = 6.17214e+9;
            parameter Real R_T_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "J.s.m-6") = 60.7317e+9;
            parameter Real R_T_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "J.s.m-6") = 25.2811e+9;
            parameter Real R_T_pericallosal_parieto_occipital_branch_T124_R226(unit = "J.s.m-6") = 17.8019e+9;
            parameter Real R_T_pericallosal_precuneal_branch_T125_R230(unit = "J.s.m-6") = 12.2746e+9;
            parameter Real R_T_distal_medial_striate_T109_R236(unit = "J.s.m-6") = 65.8855e+9;
            parameter Real R_T_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "J.s.m-6") = 13.2110e+9;
            parameter Real R_T_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "J.s.m-6") = 9.39673e+9;
            parameter Real R_T_callosomarginal_cingular_branch_T105_R250(unit = "J.s.m-6") = 12.4248e+9;
            parameter Real R_T_callosomarginal_paracentral_branch_T107_R254(unit = "J.s.m-6") = 12.4248e+9;
            parameter Real R_T_medial_occipital_occipitotemporal_branch_T80_R258(unit = "J.s.m-6") = 31.0946e+9;
            parameter Real R_T_medial_occipital_parietal_branch_T81_R264(unit = "J.s.m-6") = 51.9306e+9;
            parameter Real R_T_medial_occipital_parieto_occipital_branch_T118_R266(unit = "J.s.m-6") = 10.6655e+9;
            parameter Real R_T_medial_occipital_calcarine_branch_T79_R270(unit = "J.s.m-6") = 31.0946e+9;
            parameter Real C_T_posterior_intercostal_T1_R98(unit = "m6.J-1") = 2.2736e-12;
            parameter Real C_T_posterior_intercostal_T1_L102(unit = "m6.J-1") = 2.2162e-12;
            parameter Real C_T_posterior_intercostal_T2_R106(unit = "m6.J-1") = 2.4369e-12;
            parameter Real C_T_posterior_intercostal_T2_L110(unit = "m6.J-1") = 2.4162e-12;
            parameter Real C_T_left_gastric_T3_C120(unit = "m6.J-1") = 1.6495e-12;
            parameter Real C_T_dorsal_pancreatic_T1_C124(unit = "m6.J-1") = 15.055e-12;
            parameter Real C_T_splenic_T2_C126(unit = "m6.J-1") = 119.67e-12;
            parameter Real C_T_hepatic_artery_proper_left_branch_C132(unit = "m6.J-1") = 60.253e-12;
            parameter Real C_T_hepatic_artery_proper_right_branch_C134(unit = "m6.J-1") = 108.9e-12;
            parameter Real C_T_middle_colic_T8_C140(unit = "m6.J-1") = 19.111e-12;
            parameter Real C_T_jejunal_3_T10_C144(unit = "m6.J-1") = 26.067e-12;
            parameter Real C_T_jejunal_6_T11_C148(unit = "m6.J-1") = 26.067e-12;
            parameter Real C_T_ileocolic_T9_C152(unit = "m6.J-1") = 52.835e-12;
            parameter Real C_T_ileal_4_T12_C156(unit = "m6.J-1") = 38.612e-12;
            parameter Real C_T_ileal_6_T13_C160(unit = "m6.J-1") = 38.612e-12;
            parameter Real C_T_superior_mesenteric_T4_C162(unit = "m6.J-1") = 58.292e-12;
            parameter Real C_T_inferior_segmental_T5_L170(unit = "m6.J-1") = 97.595e-12;
            parameter Real C_T_superior_segmental_T4_L172(unit = "m6.J-1") = 97.595e-12;
            parameter Real C_T_renal_posterior_branch_T3_L174(unit = "m6.J-1") = 55.127e-12;
            parameter Real C_T_superior_segmental_T4_R182(unit = "m6.J-1") = 97.268e-12;
            parameter Real C_T_inferior_segmental_T5_R184(unit = "m6.J-1") = 97.268e-12;
            parameter Real C_T_renal_posterior_branch_T3_R186(unit = "m6.J-1") = 54.943e-12;
            parameter Real C_T_inferior_mesenteric_T5_C190(unit = "m6.J-1") = 23.687e-12;
            parameter Real C_T_internal_iliac_T1_R218(unit = "m6.J-1") = 136.63e-12;
            parameter Real C_T_profundus_T2_R224(unit = "m6.J-1") = 165.29e-12;
            parameter Real C_T_anterior_tibial_T3_R230(unit = "m6.J-1") = 23.096e-12;
            parameter Real C_T_posterior_tibial_T4_R236(unit = "m6.J-1") = 26.773e-12;
            parameter Real C_T_internal_iliac_T1_L196(unit = "m6.J-1") = 136.23e-12;
            parameter Real C_T_profundus_T2_L202(unit = "m6.J-1") = 165.2e-12;
            parameter Real C_T_anterior_tibial_T3_L208(unit = "m6.J-1") = 23.088e-12;
            parameter Real C_T_posterior_tibial_T4_L214(unit = "m6.J-1") = 26.761e-12;
            parameter Real C_T_posterior_interosseous_T3_R40(unit = "m6.J-1") = 11.847e-12;
            parameter Real C_T_ulnar_T2_R36(unit = "m6.J-1") = 48.212e-12;
            parameter Real C_T_ulnar_T2_R42(unit = "m6.J-1") = 48.212e-12;
            parameter Real C_T_radial_T1_R44(unit = "m6.J-1") = 49.088e-12;
            parameter Real C_T_posterior_interosseous_T3_L88(unit = "m6.J-1") = 11.804e-12;
            parameter Real C_T_ulnar_T2_L84(unit = "m6.J-1") = 47.295e-12;
            parameter Real C_T_ulnar_T2_L90(unit = "m6.J-1") = 47.295e-12;
            parameter Real C_T_radial_T1_L92(unit = "m6.J-1") = 49.983e-12;
            parameter Real C_T_external_carotid_T2_R26(unit = "m6.J-1") = 60.317e-12;
            parameter Real C_T_external_carotid_T2_L62(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_internal_carotid_R8_C(unit = "m6.J-1") = 60.317e-12;
            parameter Real C_T_internal_carotid_L50_C(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_vertebral_R272(unit = "m6.J-1") = 60.317e-12;
            parameter Real C_T_vertebral_L2(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_renal_R178(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_renal_L166(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_celiac_trunk_C116(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "m6.J-1") = 2.60095e-12;
            parameter Real C_T_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "m6.J-1") = 0.264334e-12;
            parameter Real C_T_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "m6.J-1") = 0.634997e-12;
            parameter Real C_T_pericallosal_parieto_occipital_branch_T60_L30(unit = "m6.J-1") = 0.901782e-12;
            parameter Real C_T_pericallosal_precuneal_branch_T61_L34(unit = "m6.J-1") = 1.30786e-12;
            parameter Real C_T_distal_medial_striate_T44_L40(unit = "m6.J-1") = 0.243656e-12;
            parameter Real C_T_anterior_choroidal_T34_L116(unit = "m6.J-1") = 1.68941e-12;
            parameter Real C_T_lateral_frontobasal_T45_L122(unit = "m6.J-1") = 0.688932e-12;
            parameter Real C_T_prefrontal_T65_L126(unit = "m6.J-1") = 1.33978e-12;
            parameter Real C_T_artery_of_central_sulcus_T36_L132(unit = "m6.J-1") = 1.33978e-12;
            parameter Real C_T_artery_of_precentral_sulcus_T38_L134(unit = "m6.J-1") = 1.33978e-12;
            parameter Real C_T_polar_temporal_T63_L138(unit = "m6.J-1") = 0.35828e-12;
            parameter Real C_T_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "m6.J-1") = 1.0436e-12;
            parameter Real C_T_middle_cerebral_middle_temporal_branch_T57_L146(unit = "m6.J-1") = 1.1853e-12;
            parameter Real C_T_artery_of_postcentral_sulcus_T37_L150(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "m6.J-1") = 1.5076e-12;
            parameter Real C_T_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "m6.J-1") = 1.5076e-12;
            parameter Real C_T_anterior_parietal_T35_L162(unit = "m6.J-1") = 1.0436e-12;
            parameter Real C_T_posterior_parietal_T64_L168(unit = "m6.J-1") = 1.6894e-12;
            parameter Real C_T_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "m6.J-1") = 2.0977e-12;
            parameter Real C_T_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "m6.J-1") = 1.2152e-12;
            parameter Real C_T_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "m6.J-1") = 1.7084e-12;
            parameter Real C_T_callosomarginal_cingular_branch_T40_L182(unit = "m6.J-1") = 1.2921e-12;
            parameter Real C_T_callosomarginal_paracentral_branch_T42_L186(unit = "m6.J-1") = 1.2921e-12;
            parameter Real C_T_medial_occipital_occipitotemporal_branch_T52_L190(unit = "m6.J-1") = 0.51628e-12;
            parameter Real C_T_medial_occipital_parietal_branch_T53_L196(unit = "m6.J-1") = 0.30913e-12;
            parameter Real C_T_medial_occipital_parieto_occipital_branch_T54_L198(unit = "m6.J-1") = 1.5052e-12;
            parameter Real C_T_medial_occipital_calcarine_branch_T51_L202(unit = "m6.J-1") = 0.51628e-12;
            parameter Real C_T_anterior_choroidal_T98_R54(unit = "m6.J-1") = 1.6894e-12;
            parameter Real C_T_lateral_frontobasal_T110_R60(unit = "m6.J-1") = 0.68893e-12;
            parameter Real C_T_prefrontal_T130_R64(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_artery_of_central_sulcus_T101_R70(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_artery_of_precentral_sulcus_T103_R72(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_polar_temporal_T127_R76(unit = "m6.J-1") = 0.35828e-12;
            parameter Real C_T_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "m6.J-1") = 1.0436e-12;
            parameter Real C_T_middle_cerebral_middle_temporal_branch_T121_R84(unit = "m6.J-1") = 1.1853e-12;
            parameter Real C_T_artery_of_postcentral_sulcus_T102_R88(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "m6.J-1") = 1.5076e-12;
            parameter Real C_T_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "m6.J-1") = 1.5076e-12;
            parameter Real C_T_anterior_parietal_T100_R100(unit = "m6.J-1") = 1.0436e-12;
            parameter Real C_T_posterior_parietal_T129_R106(unit = "m6.J-1") = 1.6894e-12;
            parameter Real C_T_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "m6.J-1") = 2.0977e-12;
            parameter Real C_T_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "m6.J-1") = 2.6009e-12;
            parameter Real C_T_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "m6.J-1") = 0.26433e-12;
            parameter Real C_T_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "m6.J-1") = 0.635e-12;
            parameter Real C_T_pericallosal_parieto_occipital_branch_T124_R226(unit = "m6.J-1") = 0.90178e-12;
            parameter Real C_T_pericallosal_precuneal_branch_T125_R230(unit = "m6.J-1") = 1.3079e-12;
            parameter Real C_T_distal_medial_striate_T109_R236(unit = "m6.J-1") = 0.24366e-12;
            parameter Real C_T_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "m6.J-1") = 1.2152e-12;
            parameter Real C_T_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "m6.J-1") = 1.7084e-12;
            parameter Real C_T_callosomarginal_cingular_branch_T105_R250(unit = "m6.J-1") = 1.2921e-12;
            parameter Real C_T_callosomarginal_paracentral_branch_T107_R254(unit = "m6.J-1") = 1.2921e-12;
            parameter Real C_T_medial_occipital_occipitotemporal_branch_T80_R258(unit = "m6.J-1") = 0.51628e-12;
            parameter Real C_T_medial_occipital_parietal_branch_T81_R264(unit = "m6.J-1") = 0.30913e-12;
            parameter Real C_T_medial_occipital_parieto_occipital_branch_T118_R266(unit = "m6.J-1") = 1.5052e-12;
            parameter Real C_T_medial_occipital_calcarine_branch_T79_R270(unit = "m6.J-1") = 0.51628e-12;
            parameter Real E_ascending_aorta_A(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_ascending_aorta_B(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_ascending_aorta_C(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_ascending_aorta_D(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_aortic_arch_C2(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_brachiocephalic_trunk_C4(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_aortic_arch_C46(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_aortic_arch_C64(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_aortic_arch_C94(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_thoracic_aorta_C96(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_thoracic_aorta_C100(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_thoracic_aorta_C104(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_thoracic_aorta_C108(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_thoracic_aorta_C112(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_abdominal_aorta_C114(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_abdominal_aorta_C136(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_abdominal_aorta_C164(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_abdominal_aorta_C176(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_abdominal_aorta_C188(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_abdominal_aorta_C192(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_posterior_intercostal_T1_R98(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_posterior_intercostal_T1_L102(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_posterior_intercostal_T2_R106(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_posterior_intercostal_T2_L110(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_celiac_trunk_C116(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_splenic_T2_C118(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_left_gastric_T3_C120(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_splenic_T2_C122(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_dorsal_pancreatic_T1_C124(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_splenic_T2_C126(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_common_hepatic_C128(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_hepatic_artery_proper_C130(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_hepatic_artery_proper_left_branch_C132(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_hepatic_artery_proper_right_branch_C134(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_superior_mesenteric_T4_C138(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_middle_colic_T8_C140(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_superior_mesenteric_T4_C142(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_jejunal_3_T10_C144(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_superior_mesenteric_T4_C146(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_jejunal_6_T11_C148(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_superior_mesenteric_T4_C150(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_ileocolic_T9_C152(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_superior_mesenteric_T4_C154(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_ileal_4_T12_C156(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_superior_mesenteric_T4_C158(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_ileal_6_T13_C160(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_superior_mesenteric_T4_C162(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_renal_L166(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_renal_anterior_branch_L168(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_inferior_segmental_T5_L170(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_superior_segmental_T4_L172(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_renal_posterior_branch_T3_L174(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_renal_R178(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_renal_anterior_branch_R180(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_superior_segmental_T4_R182(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_inferior_segmental_T5_R184(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_renal_posterior_branch_T3_R186(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_inferior_mesenteric_T5_C190(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_common_iliac_R216(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_internal_iliac_T1_R218(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_external_iliac_R220(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_femoral_R222(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_profundus_T2_R224(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_femoral_R226(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_popliteal_R228(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_anterior_tibial_T3_R230(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_popliteal_R232(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_tibiofibular_trunk_R234(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_posterior_tibial_T4_R236(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_common_iliac_L194(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_internal_iliac_T1_L196(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_external_iliac_L198(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_femoral_L200(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_profundus_T2_L202(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_femoral_L204(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_popliteal_L206(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_anterior_tibial_T3_L208(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_popliteal_L210(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_tibiofibular_trunk_L212(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_posterior_tibial_T4_L214(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_subclavian_R28(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_subclavian_R30(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_axillary_R32(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_brachial_R34(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_ulnar_T2_R36(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_common_interosseous_R38(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_posterior_interosseous_T3_R40(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_ulnar_T2_R42(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_radial_T1_R44(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_subclavian_L66(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_subclavian_L78(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_axillary_L80(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_brachial_L82(unit = "Pa") = 0.4e+6 * k_E;
            parameter Real E_ulnar_T2_L84(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_common_interosseous_L86(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_posterior_interosseous_T3_L88(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_ulnar_T2_L90(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_radial_T1_L92(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_common_carotid_R6_A(unit = "Pa") = 0.2e+6 * k_E;
            parameter Real E_common_carotid_R6_B(unit = "Pa") = 0.2e+6 * k_E;
            parameter Real E_common_carotid_R6_C(unit = "Pa") = 0.2e+6 * k_E;
            parameter Real E_internal_carotid_R8_A(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_internal_carotid_R8_B(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_internal_carotid_R8_C(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_external_carotid_T2_R26(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_common_carotid_L48_A(unit = "Pa") = 0.2e+6 * k_E;
            parameter Real E_common_carotid_L48_B(unit = "Pa") = 0.2e+6 * k_E;
            parameter Real E_common_carotid_L48_C(unit = "Pa") = 0.2e+6 * k_E;
            parameter Real E_common_carotid_L48_D(unit = "Pa") = 0.2e+6 * k_E;
            parameter Real E_internal_carotid_L50_A(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_internal_carotid_L50_B(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_internal_carotid_L50_C(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_external_carotid_T2_L62(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_vertebral_L2(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_vertebral_R272(unit = "Pa") = 0.8e+6 * k_E;
            parameter Real E_basilar_C4(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_posterior_cerebral_precommunicating_part_L6(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_posterior_cerebral_precommunicating_part_R204(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_posterior_communicating_L8(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_posterior_communicating_R206(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_posterior_cerebral_postcommunicating_part_L12(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_posterior_cerebral_postcommunicating_part_R208(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_occipital_lateral_L14(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_occipital_lateral_R210(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_occipital_lateral_L18(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_occipital_lateral_R214(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_occipital_lateral_L22(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_occipital_lateral_R218(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_L26(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_R222(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_dorsal_branch_to_corpus_callosum_L28(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_dorsal_branch_to_corpus_callosum_R224(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_pericallosal_parieto_occipital_branch_T60_L30(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_pericallosal_parieto_occipital_branch_T124_R226(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_pericallosal_L32(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_pericallosal_R228(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_pericallosal_precuneal_branch_T61_L34(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_pericallosal_precuneal_branch_T125_R230(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_pericallosal_L36(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_pericallosal_R232(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_anterior_cerebral_L38(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_anterior_cerebral_R234(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_distal_medial_striate_T44_L40(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_distal_medial_striate_T109_R236(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_anterior_cerebral_L42(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_anterior_cerebral_R238(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_anterior_communicating_C44(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_anterior_cerebral_L110(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_anterior_cerebral_R46(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_internal_carotid_L112(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_internal_carotid_R48(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_L114(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_R52(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_anterior_choroidal_T34_L116(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_anterior_choroidal_T98_R54(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_L118(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_R56(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_superior_terminal_branch_L120(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_superior_terminal_branch_R58(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_lateral_frontobasal_T45_L122(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_lateral_frontobasal_T110_R60(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_superior_terminal_branch_L124(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_superior_terminal_branch_R62(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_prefrontal_T65_L126(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_prefrontal_T130_R64(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_superior_terminal_branch_L128(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_superior_terminal_branch_R66(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_artery_of_precentral_sulcus_T38_L130(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_artery_of_precentral_sulcus_T103_R68(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_artery_of_central_sulcus_T36_L132(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_artery_of_central_sulcus_T101_R70(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_artery_of_precentral_sulcus_T38_L134(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_artery_of_precentral_sulcus_T103_R72(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L136(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R74(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_polar_temporal_T63_L138(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_polar_temporal_T127_R76(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L140(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R78(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L144(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R82(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_middle_temporal_branch_T57_L146(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_middle_temporal_branch_T121_R84(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L148(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R86(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_artery_of_postcentral_sulcus_T37_L150(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_artery_of_postcentral_sulcus_T102_R88(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L152(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R90(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_posterior_temporal_branch_T58_L154(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_posterior_temporal_branch_T122_R92(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L160(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R98(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_anterior_parietal_T35_L162(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_anterior_parietal_T100_R100(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L164(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R102(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_branch_to_angular_gyrus_T56_L166(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_branch_to_angular_gyrus_T120_R104(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_posterior_parietal_T64_L168(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_posterior_parietal_T129_R106(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_callosomarginal_L172(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_callosomarginal_R240(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_callosomarginal_L176(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_callosomarginal_R244(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_callosomarginal_L180(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_callosomarginal_R248(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_callosomarginal_cingular_branch_T40_L182(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_callosomarginal_cingular_branch_T105_R250(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_callosomarginal_L184(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_callosomarginal_R252(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_callosomarginal_paracentral_branch_T42_L186(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_callosomarginal_paracentral_branch_T107_R254(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_L188(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_R256(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_occipitotemporal_branch_T52_L190(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_occipitotemporal_branch_T80_R258(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_L192(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_R260(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_parieto_occipital_branch_T54_L194(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_parieto_occipital_branch_T118_R262(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_parietal_branch_T53_L196(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_parietal_branch_T81_R264(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_parieto_occipital_branch_T54_L198(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_parieto_occipital_branch_T118_R266(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_L200(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_R268(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_calcarine_branch_T51_L202(unit = "Pa") = 1.6e+6 * k_E;
            parameter Real E_medial_occipital_calcarine_branch_T79_R270(unit = "Pa") = 1.6e+6 * k_E;
          equation

          end Parameters_Systemic_tunable;

          model Parameters_Venous "AdanVenousRed _7af7a4"
            final parameter Physiolibrary.Types.Height height_nominal = 1.7 "nominal height of the subject";
            parameter Physiolibrary.Types.Height height_actual = 1.7 "actual height of the subject";

            parameter Physiolibrary.Types.Fraction smallVeins_D_multiplier = 2 "multiplier for small veins to have more or less same tissue post-tissue pressure";

            parameter Real r_superior_vena_cava_C2(unit = "m") = 0.975e-2;
            parameter Real r_azygos_vein_T1_C4(unit = "m") = 0.38e-2;
            parameter Real r_superior_vena_cava_C88(unit = "m") = 0.975e-2;
            parameter Real r_azygos_vein_T1_C86(unit = "m") = 0.38e-2;
            parameter Real r_inferior_vena_cava_C8(unit = "m") = 0.995e-2;
            parameter Real r_hepatic_vein_T1_C10(unit = "m") = 0.6965e-2;
            parameter Real r_inferior_vena_cava_C12(unit = "m") = 0.98728e-2;
            parameter Real r_venous_perforator_T2_C14(unit = "m") = 0.4975e-2;
            parameter Real r_inferior_vena_cava_C16(unit = "m") = 0.94787e-2;
            parameter Real r_renal_vein_T1_R18(unit = "m") = 0.6e-2;
            parameter Real r_inferior_vena_cava_C20(unit = "m") = 0.94787e-2;
            parameter Real r_renal_vein_T1_L22(unit = "m") = 0.55e-2;
            parameter Real r_inferior_vena_cava_C24(unit = "m") = 0.94661e-2;
            parameter Real r_common_iliac_vein_L56(unit = "m") = 0.6314e-2;
            parameter Real r_common_iliac_vein_R26(unit = "m") = 0.6314e-2;
            parameter Real r_external_iliac_vein_R28(unit = "m") = 0.63e-2;
            parameter Real r_internal_iliac_vein_T1_R30(unit = "m") = 0.491e-2;
            parameter Real r_external_iliac_vein_R32(unit = "m") = 0.63e-2;
            parameter Real r_femoral_vein_R34(unit = "m") = 0.568e-2;
            parameter Real r_great_saphenous_vein_T7_R36(unit = "m") = 0.181e-2;
            parameter Real r_femoral_vein_R38(unit = "m") = 0.568e-2;
            parameter Real r_profunda_femoris_vein_T2_R40(unit = "m") = 0.4e-2;
            parameter Real r_femoral_vein_R42(unit = "m") = 0.568e-2;
            parameter Real r_venous_perforator_T3_R44(unit = "m") = 0.2e-2;
            parameter Real r_femoral_vein_R46(unit = "m") = 0.568e-2;
            parameter Real r_popliteal_vein_R48(unit = "m") = 0.381e-2;
            parameter Real r_anterior_tibial_vein_T4_R50(unit = "m") = 0.1175e-2;
            parameter Real r_popliteal_vein_R52(unit = "m") = 0.381e-2;
            parameter Real r_posterior_tibial_vein_T6_R54(unit = "m") = 0.17e-2;
            parameter Real r_external_iliac_vein_L58(unit = "m") = 0.63e-2;
            parameter Real r_internal_iliac_vein_T1_L60(unit = "m") = 0.491e-2;
            parameter Real r_external_iliac_vein_L62(unit = "m") = 0.63e-2;
            parameter Real r_femoral_vein_L64(unit = "m") = 0.568e-2;
            parameter Real r_great_saphenous_vein_T7_L66(unit = "m") = 0.181e-2;
            parameter Real r_femoral_vein_L68(unit = "m") = 0.568e-2;
            parameter Real r_profunda_femoris_vein_T2_L70(unit = "m") = 0.4e-2;
            parameter Real r_femoral_vein_L72(unit = "m") = 0.568e-2;
            parameter Real r_venous_perforator_T3_L74(unit = "m") = 0.568e-2;
            parameter Real r_femoral_vein_L76(unit = "m") = 0.568e-2;
            parameter Real r_popliteal_vein_L78(unit = "m") = 0.381e-2;
            parameter Real r_anterior_tibial_vein_T4_L80(unit = "m") = 0.1175e-2;
            parameter Real r_popliteal_vein_L82(unit = "m") = 0.381e-2;
            parameter Real r_posterior_tibial_vein_T6_L84(unit = "m") = 0.17e-2;
            parameter Real r_brachiocephalic_vein_R90(unit = "m") = 0.8e-2;
            parameter Real r_brachiocephalic_vein_L124(unit = "m") = 0.75e-2;
            parameter Real r_vertebral_vein_R92(unit = "m") = 0.27e-2;
            parameter Real r_brachiocephalic_vein_R94(unit = "m") = 0.8e-2;
            parameter Real r_subclavian_vein_R96(unit = "m") = 0.56e-2;
            parameter Real r_internal_jugular_vein_R122(unit = "m") = 0.75e-2;
            parameter Real r_external_jugular_vein_R98(unit = "m") = 0.225e-2;
            parameter Real r_subclavian_vein_R100(unit = "m") = 0.56e-2;
            parameter Real r_axillary_vein_R102(unit = "m") = 0.56e-2;
            parameter Real r_brachial_vein_R104(unit = "m") = 0.185e-2;
            parameter Real r_brachial_vein_R114(unit = "m") = 0.17e-2;
            parameter Real r_venous_perforator_T2_R106(unit = "m") = 0.17e-2;
            parameter Real r_brachial_vein_R108(unit = "m") = 0.185e-2;
            parameter Real r_ulnar_vein_T7_R110(unit = "m") = 0.085e-2*smallVeins_D_multiplier;
            parameter Real r_brachial_vein_R112(unit = "m") = 0.185e-2;
            parameter Real r_venous_perforator_T1_R116(unit = "m") = 0.185e-2;
            parameter Real r_brachial_vein_R118(unit = "m") = 0.17e-2;
            parameter Real r_radial_vein_T3_R120(unit = "m") = 0.0665e-2*smallVeins_D_multiplier;
            parameter Real r_vertebral_vein_L126(unit = "m") = 0.27e-2;
            parameter Real r_brachiocephalic_vein_L128(unit = "m") = 0.75e-2;
            parameter Real r_subclavian_vein_L130(unit = "m") = 0.56e-2;
            parameter Real r_internal_jugular_vein_L156(unit = "m") = 0.6e-2;
            parameter Real r_external_jugular_vein_L132(unit = "m") = 0.225e-2;
            parameter Real r_subclavian_vein_L134(unit = "m") = 0.56e-2;
            parameter Real r_axillary_vein_L136(unit = "m") = 0.56e-2;
            parameter Real r_brachial_vein_L138(unit = "m") = 0.185e-2;
            parameter Real r_brachial_vein_L148(unit = "m") = 0.17e-2;
            parameter Real r_venous_perforator_T2_L140(unit = "m") = 0.185e-2;
            parameter Real r_brachial_vein_L142(unit = "m") = 0.185e-2;
            parameter Real r_ulnar_vein_T7_L144(unit = "m") = 0.085e-2*smallVeins_D_multiplier;
            parameter Real r_brachial_vein_L146(unit = "m") = 0.185e-2;
            parameter Real r_venous_perforator_T1_L150(unit = "m") = 0.17e-2;
            parameter Real r_brachial_vein_L152(unit = "m") = 0.17e-2;
            parameter Real r_radial_vein_T3_L154(unit = "m") = 0.0665e-2*smallVeins_D_multiplier;
            parameter Real h_superior_vena_cava_C2(unit = "m") = 0.11778e-2;
            parameter Real h_azygos_vein_T1_C4(unit = "m") = 0.06384e-2;
            parameter Real h_superior_vena_cava_C88(unit = "m") = 0.11778e-2;
            parameter Real h_azygos_vein_T1_C86(unit = "m") = 0.06384e-2;
            parameter Real h_inferior_vena_cava_C8(unit = "m") = 0.11974e-2;
            parameter Real h_hepatic_vein_T1_C10(unit = "m") = 0.09111e-2;
            parameter Real h_inferior_vena_cava_C12(unit = "m") = 0.11899e-2;
            parameter Real h_venous_perforator_T2_C14(unit = "m") = 0.0736e-2;
            parameter Real h_inferior_vena_cava_C16(unit = "m") = 0.11513e-2;
            parameter Real h_renal_vein_T1_R18(unit = "m") = 0.08241e-2;
            parameter Real h_inferior_vena_cava_C20(unit = "m") = 0.11513e-2;
            parameter Real h_renal_vein_T1_L22(unit = "m") = 0.07806e-2;
            parameter Real h_inferior_vena_cava_C24(unit = "m") = 0.11501e-2;
            parameter Real h_common_iliac_vein_L56(unit = "m") = 0.0852e-2;
            parameter Real h_common_iliac_vein_R26(unit = "m") = 0.0852e-2;
            parameter Real h_external_iliac_vein_R28(unit = "m") = 0.08508e-2;
            parameter Real h_internal_iliac_vein_T1_R30(unit = "m") = 0.07306e-2;
            parameter Real h_external_iliac_vein_R32(unit = "m") = 0.08508e-2;
            parameter Real h_femoral_vein_R34(unit = "m") = 0.07962e-2;
            parameter Real h_great_saphenous_vein_T7_R36(unit = "m") = 0.04381e-2;
            parameter Real h_femoral_vein_R38(unit = "m") = 0.07962e-2;
            parameter Real h_profunda_femoris_vein_T2_R40(unit = "m") = 0.0655e-2;
            parameter Real h_femoral_vein_R42(unit = "m") = 0.07962e-2;
            parameter Real h_venous_perforator_T3_R44(unit = "m") = 0.0463e-2;
            parameter Real h_femoral_vein_R46(unit = "m") = 0.07962e-2;
            parameter Real h_popliteal_vein_R48(unit = "m") = 0.06392e-2;
            parameter Real h_anterior_tibial_vein_T4_R50(unit = "m") = 0.03354e-2;
            parameter Real h_popliteal_vein_R52(unit = "m") = 0.06392e-2;
            parameter Real h_posterior_tibial_vein_T6_R54(unit = "m") = 0.04226e-2;
            parameter Real h_external_iliac_vein_L58(unit = "m") = 0.08508e-2;
            parameter Real h_internal_iliac_vein_T1_L60(unit = "m") = 0.07306e-2;
            parameter Real h_external_iliac_vein_L62(unit = "m") = 0.08508e-2;
            parameter Real h_femoral_vein_L64(unit = "m") = 0.07962e-2;
            parameter Real h_great_saphenous_vein_T7_L66(unit = "m") = 0.04381e-2;
            parameter Real h_femoral_vein_L68(unit = "m") = 0.07962e-2;
            parameter Real h_profunda_femoris_vein_T2_L70(unit = "m") = 0.0655e-2;
            parameter Real h_femoral_vein_L72(unit = "m") = 0.07962e-2;
            parameter Real h_venous_perforator_T3_L74(unit = "m") = 0.07962e-2;
            parameter Real h_femoral_vein_L76(unit = "m") = 0.07962e-2;
            parameter Real h_popliteal_vein_L78(unit = "m") = 0.06392e-2;
            parameter Real h_anterior_tibial_vein_T4_L80(unit = "m") = 0.03354e-2;
            parameter Real h_popliteal_vein_L82(unit = "m") = 0.06392e-2;
            parameter Real h_posterior_tibial_vein_T6_L84(unit = "m") = 0.04226e-2;
            parameter Real h_brachiocephalic_vein_R90(unit = "m") = 0.10082e-2;
            parameter Real h_brachiocephalic_vein_L124(unit = "m") = 0.09609e-2;
            parameter Real h_vertebral_vein_R92(unit = "m") = 0.05402e-2;
            parameter Real h_brachiocephalic_vein_R94(unit = "m") = 0.10082e-2;
            parameter Real h_subclavian_vein_R96(unit = "m") = 0.07892e-2;
            parameter Real h_internal_jugular_vein_R122(unit = "m") = 0.09609e-2;
            parameter Real h_external_jugular_vein_R98(unit = "m") = 0.04928e-2;
            parameter Real h_subclavian_vein_R100(unit = "m") = 0.07892e-2;
            parameter Real h_axillary_vein_R102(unit = "m") = 0.07892e-2;
            parameter Real h_brachial_vein_R104(unit = "m") = 0.04435e-2;
            parameter Real h_brachial_vein_R114(unit = "m") = 0.04226e-2;
            parameter Real h_venous_perforator_T2_R106(unit = "m") = 0.04226e-2;
            parameter Real h_brachial_vein_R108(unit = "m") = 0.04435e-2;
            parameter Real h_ulnar_vein_T7_R110(unit = "m") = 0.02665e-2;
            parameter Real h_brachial_vein_R112(unit = "m") = 0.04435e-2;
            parameter Real h_venous_perforator_T1_R116(unit = "m") = 0.04435e-2;
            parameter Real h_brachial_vein_R118(unit = "m") = 0.04226e-2;
            parameter Real h_radial_vein_T3_R120(unit = "m") = 0.02206e-2;
            parameter Real h_vertebral_vein_L126(unit = "m") = 0.05402e-2;
            parameter Real h_brachiocephalic_vein_L128(unit = "m") = 0.09609e-2;
            parameter Real h_subclavian_vein_L130(unit = "m") = 0.07892e-2;
            parameter Real h_internal_jugular_vein_L156(unit = "m") = 0.08241e-2;
            parameter Real h_external_jugular_vein_L132(unit = "m") = 0.04928e-2;
            parameter Real h_subclavian_vein_L134(unit = "m") = 0.07892e-2;
            parameter Real h_axillary_vein_L136(unit = "m") = 0.07892e-2;
            parameter Real h_brachial_vein_L138(unit = "m") = 0.04435e-2;
            parameter Real h_brachial_vein_L148(unit = "m") = 0.04226e-2;
            parameter Real h_venous_perforator_T2_L140(unit = "m") = 0.04435e-2;
            parameter Real h_brachial_vein_L142(unit = "m") = 0.04435e-2;
            parameter Real h_ulnar_vein_T7_L144(unit = "m") = 0.02665e-2;
            parameter Real h_brachial_vein_L146(unit = "m") = 0.04435e-2;
            parameter Real h_venous_perforator_T1_L150(unit = "m") = 0.04226e-2;
            parameter Real h_brachial_vein_L152(unit = "m") = 0.04226e-2;
            parameter Real h_radial_vein_T3_L154(unit = "m") = 0.02206e-2;

            parameter Physiolibrary.Types.Length l_superior_vena_cava_C2 = 1.19864e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_azygos_vein_T1_C4 = 24.1235e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_superior_vena_cava_C88 = 2.06549e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_azygos_vein_T1_C86 = 4.16471e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_inferior_vena_cava_C8 = 1.72606e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_hepatic_vein_T1_C10 = 1.38104e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_inferior_vena_cava_C12 = 4.75594e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_venous_perforator_T2_C14 = 1.61605e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_inferior_vena_cava_C16 = 4.05694e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_renal_vein_T1_R18 = 2.98282e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_inferior_vena_cava_C20 = 0.283038e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_renal_vein_T1_L22 = 3.13626e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_inferior_vena_cava_C24 = 11.3168e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_common_iliac_vein_L56 = 6.24014e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_common_iliac_vein_R26 = 5.73581e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_external_iliac_vein_R28 = 0.840236e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_internal_iliac_vein_T1_R30 = 5.91456e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_external_iliac_vein_R32 = 9.74495e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_femoral_vein_R34 = 0.521142e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_great_saphenous_vein_T7_R36 = 92.6589e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_femoral_vein_R38 = 4.13055e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_profunda_femoris_vein_T2_R40 = 22.9655e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_femoral_vein_R42 = 29.2094e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_venous_perforator_T3_R44 = 1.01988e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_femoral_vein_R46 = 1.60864e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_popliteal_vein_R48 = 14.5387e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_anterior_tibial_vein_T4_R50 = 38.09e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_popliteal_vein_R52 = 3.2338e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_posterior_tibial_vein_T6_R54 = 30.5697e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_external_iliac_vein_L58 = 0.841264e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_internal_iliac_vein_T1_L60 = 6.08336e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_external_iliac_vein_L62 = 9.56715e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_femoral_vein_L64 = 0.609248e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_great_saphenous_vein_T7_L66 = 92.6588e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_femoral_vein_L68 = 4.13055e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_profunda_femoris_vein_T2_L70 = 22.9654e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_femoral_vein_L72 = 29.2094e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_venous_perforator_T3_L74 = 1.01987e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_femoral_vein_L76 = 1.60863e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_popliteal_vein_L78 = 14.5387e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_anterior_tibial_vein_T4_L80 = 38.09e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_popliteal_vein_L82 = 3.23382e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_posterior_tibial_vein_T6_L84 = 30.5698e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachiocephalic_vein_R90 = 3.60711e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachiocephalic_vein_L124 = 7.69083e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_vertebral_vein_R92 = 19.7909e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachiocephalic_vein_R94 = 0.817729e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_subclavian_vein_R96 = 0.811432e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_internal_jugular_vein_R122 = 17.8797e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_external_jugular_vein_R98 = 13.807e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_subclavian_vein_R100 = 3.31851e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_axillary_vein_R102 = 11.6597e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachial_vein_R104 = 20.4344e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachial_vein_R114 = 21.6418e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_venous_perforator_T2_R106 = 1.64071e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachial_vein_R108 = 2.81322e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_ulnar_vein_T7_R110 = 26.5376e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachial_vein_R112 = 1.06711e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_venous_perforator_T1_R116 = 1.56083e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachial_vein_R118 = 2.085e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_radial_vein_T3_R120 = 25.8545e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_vertebral_vein_L126 = 18.5123e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachiocephalic_vein_L128 = 0.470158e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_subclavian_vein_L130 = 0.721557e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_internal_jugular_vein_L156 = 16.9554e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_external_jugular_vein_L132 = 13.5402e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_subclavian_vein_L134 = 3.23403e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_axillary_vein_L136 = 11.7916e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachial_vein_L138 = 20.4344e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachial_vein_L148 = 21.6418e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_venous_perforator_T2_L140 = 1.64073e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachial_vein_L142 = 2.81325e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_ulnar_vein_T7_L144 = 26.5376e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachial_vein_L146 = 1.06711e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_venous_perforator_T1_L150 = 1.56083e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_brachial_vein_L152 = 2.085e-2*height_actual/height_nominal;
            parameter Physiolibrary.Types.Length l_radial_vein_T3_L154 = 25.8545e-2*height_actual/height_nominal;
            parameter Real C_superior_vena_cava_C2(unit = "m6.J-1") = 0.555603e-10;
            parameter Real C_azygos_vein_T1_C4(unit = "m6.J-1") = 1.22148e-10;
            parameter Real C_superior_vena_cava_C88(unit = "m6.J-1") = 0.957416e-10;
            parameter Real C_azygos_vein_T1_C86(unit = "m6.J-1") = 0.210878e-10;
            parameter Real C_inferior_vena_cava_C8(unit = "m6.J-1") = 0.829339e-10;
            parameter Real C_hepatic_vein_T1_C10(unit = "m6.J-1") = 0.30168e-10;
            parameter Real C_inferior_vena_cava_C12(unit = "m6.J-1") = 2.21275e-10;
            parameter Real C_venous_perforator_T2_C14(unit = "m6.J-1") = 0.159254e-10;
            parameter Real C_inferior_vena_cava_C16(unit = "m6.J-1") = 1.80509e-10;
            parameter Real C_renal_vein_T1_R18(unit = "m6.J-1") = 0.460512e-10;
            parameter Real C_inferior_vena_cava_C20(unit = "m6.J-1") = 0.123145e-10;
            parameter Real C_renal_vein_T1_L22(unit = "m6.J-1") = 0.393746e-10;
            parameter Real C_inferior_vena_cava_C24(unit = "m6.J-1") = 4.63354e-10;
            parameter Real C_common_iliac_vein_L56(unit = "m6.J-1") = 1.08597e-10;
            parameter Real C_common_iliac_vein_R26(unit = "m6.J-1") = 0.998205e-10;
            parameter Real C_external_iliac_vein_R28(unit = "m6.J-1") = 0.14547e-10;
            parameter Real C_internal_iliac_vein_T1_R30(unit = "m6.J-1") = 0.564484e-10;
            parameter Real C_external_iliac_vein_R32(unit = "m6.J-1") = 1.68715e-10;
            parameter Real C_femoral_vein_R34(unit = "m6.J-1") = 0.0706573e-10;
            parameter Real C_great_saphenous_vein_T7_R36(unit = "m6.J-1") = 0.738807e-10;
            parameter Real C_femoral_vein_R38(unit = "m6.J-1") = 0.56e-10;
            parameter Real C_profunda_femoris_vein_T2_R40(unit = "m6.J-1") = 1.32176e-10;
            parameter Real C_femoral_vein_R42(unit = "m6.J-1") = 3.96026e-10;
            parameter Real C_venous_perforator_T3_R44(unit = "m6.J-1") = 0.00550536e-10;
            parameter Real C_femoral_vein_R46(unit = "m6.J-1") = 0.218102e-10;
            parameter Real C_popliteal_vein_R48(unit = "m6.J-1") = 0.741013e-10;
            parameter Real C_anterior_tibial_vein_T4_R50(unit = "m6.J-1") = 0.108531e-10;
            parameter Real C_popliteal_vein_R52(unit = "m6.J-1") = 0.164821e-10;
            parameter Real C_posterior_tibial_vein_T6_R54(unit = "m6.J-1") = 0.209333e-10;
            parameter Real C_external_iliac_vein_L58(unit = "m6.J-1") = 0.145648e-10;
            parameter Real C_internal_iliac_vein_T1_L60(unit = "m6.J-1") = 0.580595e-10;
            parameter Real C_external_iliac_vein_L62(unit = "m6.J-1") = 1.65636e-10;
            parameter Real C_femoral_vein_L64(unit = "m6.J-1") = 0.0826029e-10;
            parameter Real C_great_saphenous_vein_T7_L66(unit = "m6.J-1") = 0.738807e-10;
            parameter Real C_femoral_vein_L68(unit = "m6.J-1") = 0.560026e-10;
            parameter Real C_profunda_femoris_vein_T2_L70(unit = "m6.J-1") = 1.32176e-10;
            parameter Real C_femoral_vein_L72(unit = "m6.J-1") = 3.96026e-10;
            parameter Real C_venous_perforator_T3_L74(unit = "m6.J-1") = 0.138275e-10;
            parameter Real C_femoral_vein_L76(unit = "m6.J-1") = 0.218101e-10;
            parameter Real C_popliteal_vein_L78(unit = "m6.J-1") = 0.741013e-10;
            parameter Real C_anterior_tibial_vein_T4_L80(unit = "m6.J-1") = 0.108531e-10;
            parameter Real C_popliteal_vein_L82(unit = "m6.J-1") = 0.164822e-10;
            parameter Real C_posterior_tibial_vein_T6_L84(unit = "m6.J-1") = 0.209333e-10;
            parameter Real C_brachiocephalic_vein_R90(unit = "m6.J-1") = 1.07899e-10;
            parameter Real C_brachiocephalic_vein_L124(unit = "m6.J-1") = 1.98898e-10;
            parameter Real C_vertebral_vein_R92(unit = "m6.J-1") = 0.424745e-10;
            parameter Real C_brachiocephalic_vein_R94(unit = "m6.J-1") = 0.244606e-10;
            parameter Real C_subclavian_vein_R96(unit = "m6.J-1") = 0.106357e-10;
            parameter Real C_internal_jugular_vein_R122(unit = "m6.J-1") = 3.36401e-10;
            parameter Real C_external_jugular_vein_R98(unit = "m6.J-1") = 0.187997e-10;
            parameter Real C_subclavian_vein_R100(unit = "m6.J-1") = 0.434967e-10;
            parameter Real C_axillary_vein_R102(unit = "m6.J-1") = 1.52827e-10;
            parameter Real C_brachial_vein_R104(unit = "m6.J-1") = 0.171851e-10;
            parameter Real C_brachial_vein_R114(unit = "m6.J-1") = 0.148197e-10;
            parameter Real C_venous_perforator_T2_R106(unit = "m6.J-1") = 0.0112351e-10;
            parameter Real C_brachial_vein_R108(unit = "m6.J-1") = 0.0236588e-10;
            parameter Real C_ulnar_vein_T7_R110(unit = "m6.J-1") = 0.0360248e-10;
            parameter Real C_brachial_vein_R112(unit = "m6.J-1") = 0.00897427e-10;
            parameter Real C_venous_perforator_T1_R116(unit = "m6.J-1") = 0.0131264e-10;
            parameter Real C_brachial_vein_R118(unit = "m6.J-1") = 0.0142775e-10;
            parameter Real C_radial_vein_T3_R120(unit = "m6.J-1") = 0.0203056e-10;
            parameter Real C_vertebral_vein_L126(unit = "m6.J-1") = 0.397304e-10;
            parameter Real C_brachiocephalic_vein_L128(unit = "m6.J-1") = 0.121591e-10;
            parameter Real C_subclavian_vein_L130(unit = "m6.J-1") = 0.0945766e-10;
            parameter Real C_internal_jugular_vein_L156(unit = "m6.J-1") = 1.92288e-10;
            parameter Real C_external_jugular_vein_L132(unit = "m6.J-1") = 0.184364e-10;
            parameter Real C_subclavian_vein_L134(unit = "m6.J-1") = 0.423894e-10;
            parameter Real C_axillary_vein_L136(unit = "m6.J-1") = 1.54556e-10;
            parameter Real C_brachial_vein_L138(unit = "m6.J-1") = 0.171851e-10;
            parameter Real C_brachial_vein_L148(unit = "m6.J-1") = 0.148197e-10;
            parameter Real C_venous_perforator_T2_L140(unit = "m6.J-1") = 0.0137984e-10;
            parameter Real C_brachial_vein_L142(unit = "m6.J-1") = 0.0236591e-10;
            parameter Real C_ulnar_vein_T7_L144(unit = "m6.J-1") = 0.0360249e-10;
            parameter Real C_brachial_vein_L146(unit = "m6.J-1") = 0.00897427e-10;
            parameter Real C_venous_perforator_T1_L150(unit = "m6.J-1") = 0.0106881e-10;
            parameter Real C_brachial_vein_L152(unit = "m6.J-1") = 0.0142775e-10;
            parameter Real C_radial_vein_T3_L154(unit = "m6.J-1") = 0.0203056e-10;
            parameter Real E_superior_vena_cava_C2(unit = "Pa") = 0.555603e+6;
            parameter Real E_azygos_vein_T1_C4(unit = "Pa") = 1.22148e+6;
            parameter Real E_superior_vena_cava_C88(unit = "Pa") = 0.957416e+6;
            parameter Real E_azygos_vein_T1_C86(unit = "Pa") = 0.210878e+6;
            parameter Real E_inferior_vena_cava_C8(unit = "Pa") = 0.829339e+6;
            parameter Real E_hepatic_vein_T1_C10(unit = "Pa") = 0.30168e+6;
            parameter Real E_inferior_vena_cava_C12(unit = "Pa") = 2.21275e+6;
            parameter Real E_venous_perforator_T2_C14(unit = "Pa") = 0.159254e+6;
            parameter Real E_inferior_vena_cava_C16(unit = "Pa") = 1.80509e+6;
            parameter Real E_renal_vein_T1_R18(unit = "Pa") = 0.460512e+6;
            parameter Real E_inferior_vena_cava_C20(unit = "Pa") = 0.123145e+6;
            parameter Real E_renal_vein_T1_L22(unit = "Pa") = 0.393746e+6;
            parameter Real E_inferior_vena_cava_C24(unit = "Pa") = 4.63354e+6;
            parameter Real E_common_iliac_vein_L56(unit = "Pa") = 1.08597e+6;
            parameter Real E_common_iliac_vein_R26(unit = "Pa") = 0.998205e+6;
            parameter Real E_external_iliac_vein_R28(unit = "Pa") = 0.14547e+6;
            parameter Real E_internal_iliac_vein_T1_R30(unit = "Pa") = 0.564484e+6;
            parameter Real E_external_iliac_vein_R32(unit = "Pa") = 1.68715e+6;
            parameter Real E_femoral_vein_R34(unit = "Pa") = 0.0706573e+6;
            parameter Real E_great_saphenous_vein_T7_R36(unit = "Pa") = 0.738807e+6;
            parameter Real E_femoral_vein_R38(unit = "Pa") = 0.56e+6;
            parameter Real E_profunda_femoris_vein_T2_R40(unit = "Pa") = 1.32176e+6;
            parameter Real E_femoral_vein_R42(unit = "Pa") = 3.96026e+6;
            parameter Real E_venous_perforator_T3_R44(unit = "Pa") = 0.00550536e+6;
            parameter Real E_femoral_vein_R46(unit = "Pa") = 0.218102e+6;
            parameter Real E_popliteal_vein_R48(unit = "Pa") = 0.741013e+6;
            parameter Real E_anterior_tibial_vein_T4_R50(unit = "Pa") = 0.108531e+6;
            parameter Real E_popliteal_vein_R52(unit = "Pa") = 0.164821e+6;
            parameter Real E_posterior_tibial_vein_T6_R54(unit = "Pa") = 0.209333e+6;
            parameter Real E_external_iliac_vein_L58(unit = "Pa") = 0.145648e+6;
            parameter Real E_internal_iliac_vein_T1_L60(unit = "Pa") = 0.580595e+6;
            parameter Real E_external_iliac_vein_L62(unit = "Pa") = 1.65636e+6;
            parameter Real E_femoral_vein_L64(unit = "Pa") = 0.0826029e+6;
            parameter Real E_great_saphenous_vein_T7_L66(unit = "Pa") = 0.738807e+6;
            parameter Real E_femoral_vein_L68(unit = "Pa") = 0.560026e+6;
            parameter Real E_profunda_femoris_vein_T2_L70(unit = "Pa") = 1.32176e+6;
            parameter Real E_femoral_vein_L72(unit = "Pa") = 3.96026e+6;
            parameter Real E_venous_perforator_T3_L74(unit = "Pa") = 0.138275e+6;
            parameter Real E_femoral_vein_L76(unit = "Pa") = 0.218101e+6;
            parameter Real E_popliteal_vein_L78(unit = "Pa") = 0.741013e+6;
            parameter Real E_anterior_tibial_vein_T4_L80(unit = "Pa") = 0.108531e+6;
            parameter Real E_popliteal_vein_L82(unit = "Pa") = 0.164822e+6;
            parameter Real E_posterior_tibial_vein_T6_L84(unit = "Pa") = 0.209333e+6;
            parameter Real E_brachiocephalic_vein_R90(unit = "Pa") = 1.07899e+6;
            parameter Real E_brachiocephalic_vein_L124(unit = "Pa") = 1.98898e+6;
            parameter Real E_vertebral_vein_R92(unit = "Pa") = 0.424745e+6;
            parameter Real E_brachiocephalic_vein_R94(unit = "Pa") = 0.244606e+6;
            parameter Real E_subclavian_vein_R96(unit = "Pa") = 0.106357e+6;
            parameter Real E_internal_jugular_vein_R122(unit = "Pa") = 3.36401e+6;
            parameter Real E_external_jugular_vein_R98(unit = "Pa") = 0.187997e+6;
            parameter Real E_subclavian_vein_R100(unit = "Pa") = 0.434967e+6;
            parameter Real E_axillary_vein_R102(unit = "Pa") = 1.52827e+6;
            parameter Real E_brachial_vein_R104(unit = "Pa") = 0.171851e+6;
            parameter Real E_brachial_vein_R114(unit = "Pa") = 0.148197e+6;
            parameter Real E_venous_perforator_T2_R106(unit = "Pa") = 0.0112351e+6;
            parameter Real E_brachial_vein_R108(unit = "Pa") = 0.0236588e+6;
            parameter Real E_ulnar_vein_T7_R110(unit = "Pa") = 0.0360248e+6;
            parameter Real E_brachial_vein_R112(unit = "Pa") = 0.00897427e+6;
            parameter Real E_venous_perforator_T1_R116(unit = "Pa") = 0.0131264e+6;
            parameter Real E_brachial_vein_R118(unit = "Pa") = 0.0142775e+6;
            parameter Real E_radial_vein_T3_R120(unit = "Pa") = 0.0203056e+6;
            parameter Real E_vertebral_vein_L126(unit = "Pa") = 0.397304e+6;
            parameter Real E_brachiocephalic_vein_L128(unit = "Pa") = 0.121591e+6;
            parameter Real E_subclavian_vein_L130(unit = "Pa") = 0.0945766e+6;
            parameter Real E_internal_jugular_vein_L156(unit = "Pa") = 1.92288e+6;
            parameter Real E_external_jugular_vein_L132(unit = "Pa") = 0.184364e+6;
            parameter Real E_subclavian_vein_L134(unit = "Pa") = 0.423894e+6;
            parameter Real E_axillary_vein_L136(unit = "Pa") = 1.54556e+6;
            parameter Real E_brachial_vein_L138(unit = "Pa") = 0.171851e+6;
            parameter Real E_brachial_vein_L148(unit = "Pa") = 0.148197e+6;
            parameter Real E_venous_perforator_T2_L140(unit = "Pa") = 0.0137984e+6;
            parameter Real E_brachial_vein_L142(unit = "Pa") = 0.0236591e+6;
            parameter Real E_ulnar_vein_T7_L144(unit = "Pa") = 0.0360249e+6;
            parameter Real E_brachial_vein_L146(unit = "Pa") = 0.00897427e+6;
            parameter Real E_venous_perforator_T1_L150(unit = "Pa") = 0.0106881e+6;
            parameter Real E_brachial_vein_L152(unit = "Pa") = 0.0142775e+6;
            parameter Real E_radial_vein_T3_L154(unit = "Pa") = 0.0203056e+6;
          equation

          end Parameters_Venous;
        end Parametrization;

        partial model partialSystemic
          "Interface for arterio-venous systemic tree"

          Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_a annotation (
              Placement(transformation(extent={{-330,70},{-310,90}}),
                iconTransformation(extent={{-330,-10},{-310,10}})));
          Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b port_b annotation (
              Placement(transformation(extent={{450,70},{470,90}}), iconTransformation(
                  extent={{430,-10},{450,10}})));

        //   parameter Real alphaC = 2.5;
        //   parameter Real alphaZPV = 2.5;
        //   inner Physiolibrary.Types.Fraction ZPV_effect = alphaZPV*(phi-0.25);
        //   inner Physiolibrary.Types.Fraction C_effect = alphaC*(phi-0.25);
        //   inner parameter Physiolibrary.Types.Fraction venous_diameter_correction = 1.5;
        //   inner parameter Physiolibrary.Types.Fraction C_fact = 1;
        //   inner parameter Physiolibrary.Types.Fraction cfactor = 1;
        //   inner parameter Real gamma = 1/2;
        //   inner parameter Real alpha = 5;// = T_pass/(T_pass + T_act_max);
        //   inner parameter Physiolibrary.Types.Fraction Ra_factor = 1 "Exponential factor affecting arterioles resistance";
        //
        //   inner parameter Physiolibrary.Types.Fraction phi0 = 0.25 "default value of phi. Also used for normalization";

          inner Modelica.Units.SI.Angle Tilt;
          inner Physiolibrary.Types.Pressure P_th
            "Thoracic pressure, developed by the airway pressure. Might affect also abdominal cavity.";
          inner Physiolibrary.Types.Pressure outer_pressure;
          inner Physiolibrary.Types.Fraction phi "a systemic acitvation fraction, 1 being maximal possible. Normal resting is believed to be 1/4 of the maximum (0.25)";
          inner Physiolibrary.Types.Fraction Exercise;
          inner Physiolibrary.Types.Fraction adenosine;

          parameter Boolean UseBaroreflexOutput = false annotation(choices(checkBox=true));
          parameter Boolean UseThoracic_PressureInput = false annotation(choices(checkBox=true));
          parameter Boolean UseOuter_PressureInput = false annotation(choices(checkBox=true));

          parameter Boolean UsePhi_Input = false annotation(choices(checkBox=true));
          parameter Boolean UseTiltInput = false annotation(choices(checkBox=true));
          parameter Boolean UseExerciseInput = false annotation(choices(checkBox=true));
          parameter Boolean UseAdenosineInput = false annotation(choices(checkBox=true));

          Modelica.Blocks.Interfaces.RealInput tilt_input = Tilt if UseTiltInput annotation (Placement(
              transformation(extent={{-340,-68},{-300,-28}}),
                                                            iconTransformation(extent={{20,-100},
                    {60,-60}})));
          Physiolibrary.Types.RealIO.PressureInput thoracic_pressure_input=P_th
            if UseThoracic_PressureInput annotation (Placement(transformation(
                  extent={{-340,-110},{-300,-70}}), iconTransformation(extent={
                    {-100,-100},{-60,-60}})));
          Physiolibrary.Types.RealIO.PressureInput Outer_pressure_input = outer_pressure if UseOuter_PressureInput annotation (Placement(
              transformation(extent={{-110,-110},{-70,-70}}),
                                                            iconTransformation(extent={{-40,
                    -100},{0,-60}})));

          Physiolibrary.Types.RealIO.FractionInput phi_input = phi if UsePhi_Input annotation (Placement(
              transformation(extent={{-340,-30},{-300,10}}),iconTransformation(extent={{80,-100},
                    {120,-60}})));

        //   Physiolibrary.Types.RealIO.PressureOutput  p = internal_carotid_R8_A.u_in
        //                                                 annotation (Placement(
        //         transformation(extent={{-42,-92},{-22,-72}}),
        //                                                     iconTransformation(extent={{130,162},
        //             {150,182}})));

          Physiolibrary.Types.RealIO.FractionInput exercise_input=Exercise            if UseExerciseInput
            annotation (Placement(transformation(extent={{-200,-110},{-160,-70}}),
                iconTransformation(extent={{-40,60},{0,100}})));
          outer Settings settings annotation (Placement(transformation(extent={{
                    -318,180},{-298,200}})));

          replaceable
          Baroreflex.Baroreflex_Kosinksi baroreflex_system
            if UseBaroreflexOutput constrainedby Baroreflex.partialBaroreflex
                                   annotation (Placement(transformation(
                  rotation=0, extent={{-242,142},{-222,162}})));
          Physiolibrary.Types.RealIO.FractionOutput  phi_baroreflex
         if UseBaroreflexOutput                         annotation (Placement(
                transformation(extent={{-192,138},{-172,158}}),
                                                            iconTransformation(extent={{-24,164},
                    {-4,184}})));
          Physiolibrary.Types.RealIO.FractionInput adenosineInput = adenosine if UseAdenosineInput "Adenosine input"
            annotation (Placement(transformation(extent={{-340,20},{-300,60}})));
          Physiolibrary.Types.Constants.FractionConst phi0(k(displayUnit=
                  "(mmHg.s)/ml") = settings.phi0) if not UsePhi_Input
            annotation (Placement(transformation(extent={{-310,-14},{-302,-6}})));
        protected
          Physiolibrary.Types.RealIO.FractionInput phi_input1 annotation (
              Placement(transformation(extent={{-282,-12},{-278,-8}})));
        equation
          if not UseThoracic_PressureInput then
            P_th = 0;
          end if;
          if not UseOuter_PressureInput then
            outer_pressure = 0;
          end if;
          if not UsePhi_Input then
            phi = settings.phi0;
          end if;
          if not UseTiltInput then
            Tilt = 0;
          end if;
          if not UseExerciseInput then
            Exercise = 0;
          end if;
          if not UseAdenosineInput then
            adenosine = 0;
          end if;
          connect(baroreflex_system.phiOutput, phi_baroreflex) annotation (Line(
                points={{-222,152},{-190,152},{-190,148},{-182,148}}, color={0,
                  0,127}));
          connect(phi_input, phi_input1)
            annotation (Line(points={{-320,-10},{-280,-10}}, color={0,0,127}));
          connect(phi0.y, phi_input1)
            annotation (Line(points={{-301,-10},{-280,-10}}, color={0,0,127}));
            annotation (Diagram(coordinateSystem(extent={{-320,-100},{440,200}})),
                Icon(coordinateSystem(extent={{-320,-100},{440,200}}), graphics={
                          Bitmap(extent={{-320,-100},{440,200}}, fileName=
                      "modelica://Physiolibrary/Resources/Icons/perfusion.png")}),
            Placement(transformation(extent={{-100,80},{-80,100}})),
                           choices(choice=ADAN_main.Components.Subsystems.Systemic.Vessel_modules.vp_type
                                                                                     "No position calculations",
               choice=ADAN_main.Components.Subsystems.Systemic.Vessel_modules.vp_type_leveled
                                                                          "Position calculation",
               choice=ADAN_main.Components.Subsystems.Systemic.Vessel_modules.vp_type_phi_sensitive
                                                                                "Phi_sensitive"),
                      Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end partialSystemic;

        partial model partialSystemicAV "Interfaces for complex Arterio-venous trees"
          extends partialSystemic;

          replaceable model Systemic_artery_thoracic =
              ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery (
                                                          UseOuter_thoracic_pressure = true)
                                                        constrainedby
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Auxiliary.PartialSystemicVessel(
                                                                     UseOuter_thoracic_pressure = true)
                                                              annotation (choices(
           choice=ADAN_main.Components.Subsystems.Systemic.Vessel_modules.pv_type_thoracic
            "No position calculations",
           choice=ADAN_main.Components.Subsystems.Systemic.Vessel_modules.pv_type_thoracic_leveled
            "Position calculation"));
          replaceable model Systemic_artery =
              ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
            constrainedby
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Auxiliary.PartialSystemicVessel
            annotation (choices(choice=ADAN_main.Components.Subsystems.Systemic.Vessel_modules.pv_type
                "No position calculations", choice=ADAN_main.Components.Subsystems.Systemic.Vessel_modules.pv_type_leveled
                "Position calculation"));
          replaceable model Systemic_vein =
              ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Vein                          constrainedby
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Auxiliary.PartialSystemicVessel;

          replaceable model Systemic_tissue =
              ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Systemic_tissue
            constrainedby
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Systemic_tissue
                                                                   annotation (choices(
                choice=ADAN_main.Components.Subsystems.Systemic.Vessel_modules.systemic_tissue
                "No position calculations", choice=ADAN_main.Components.Subsystems.Systemic.Vessel_modules.systemic_tissue_leveled
                "Position calculation"));

        end partialSystemicAV;

        model SystemicAV_base "Base systemic tree based on ADAN VenousRed and extended"
          extends partialSystemicAV(                                 UseBaroreflexOutput = true);
          parameter Physiolibrary.Types.Height brachial_division=0.182   "The height at which the left brachial artery is divided to have pressure measure at heart level";

          Parametrization.Parameters_Systemic_tunable systemicParameters(k_E=
                settings.syst_art_k_E, height_actual=settings.height)
            annotation (Placement(transformation(extent={{0,-100},{20,-80}})));

          parameter Boolean useCapillaryPressureOutputs = false;

          replaceable
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Ascending_aorta
            ascending_aorta_A constrainedby
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Auxiliary.PartialSystemicVessel(
            l=systemicParameters.l_ascending_aorta_A,
            E=systemicParameters.E_ascending_aorta_A,
            r=systemicParameters.r_ascending_aorta_A) annotation (Placement(
                transformation(extent={{-263,85},{-243,90}})),
              __Dymola_choicesAllMatching=true);

          Systemic_artery_thoracic ascending_aorta_B(
            l=systemicParameters.l_ascending_aorta_B,
            E=systemicParameters.E_ascending_aorta_B,
            r=systemicParameters.r_ascending_aorta_B)
            annotation (Placement(transformation(extent={{-238,85},{-218,90}})));

          Systemic_artery_thoracic ascending_aorta_C(
            l=systemicParameters.l_ascending_aorta_C,
            E=systemicParameters.E_ascending_aorta_C,
            r=systemicParameters.r_ascending_aorta_C)
            annotation (Placement(transformation(extent={{-213,85},{-193,90}})));

          Systemic_artery_thoracic ascending_aorta_D(
            l=systemicParameters.l_ascending_aorta_D,
            E=systemicParameters.E_ascending_aorta_D,
            r=systemicParameters.r_ascending_aorta_D)
            annotation (Placement(transformation(extent={{-188,85},{-168,90}})));

          Systemic_artery_thoracic aortic_arch_C2(
            l=systemicParameters.l_aortic_arch_C2,
            E=systemicParameters.E_aortic_arch_C2,
            r=systemicParameters.r_aortic_arch_C2)
            annotation (Placement(transformation(extent={{-163,85},{-143,90}})));

          Systemic_artery_thoracic brachiocephalic_trunk_C4(
            l=systemicParameters.l_brachiocephalic_trunk_C4,
            E=systemicParameters.E_brachiocephalic_trunk_C4,
            r=systemicParameters.r_brachiocephalic_trunk_C4)
            annotation (Placement(transformation(extent={{-132,163},{-112,168}})));

          Systemic_artery_thoracic aortic_arch_C46(
            l=systemicParameters.l_aortic_arch_C46,
            E=systemicParameters.E_aortic_arch_C46,
            r=systemicParameters.r_aortic_arch_C46,
            UseDistentionOutput=true)
            annotation (Placement(transformation(extent={{-137,85},{-117,90}})));

          Systemic_artery_thoracic aortic_arch_C64(
            l=systemicParameters.l_aortic_arch_C64,
            E=systemicParameters.E_aortic_arch_C64,
            r=systemicParameters.r_aortic_arch_C64)
            annotation (Placement(transformation(extent={{-112,85},{-92,90}})));

          Systemic_artery_thoracic aortic_arch_C94(
            l=systemicParameters.l_aortic_arch_C94,
            E=systemicParameters.E_aortic_arch_C94,
            r=systemicParameters.r_aortic_arch_C94)
            annotation (Placement(transformation(extent={{-91,65},{-111,70}})));

          Systemic_artery_thoracic thoracic_aorta_C96(
            l=systemicParameters.l_thoracic_aorta_C96,
            E=systemicParameters.E_thoracic_aorta_C96,
            r=systemicParameters.r_thoracic_aorta_C96)
            annotation (Placement(transformation(extent={{-118,65},{-138,70}})));

          Systemic_artery_thoracic thoracic_aorta_C100(
            l=systemicParameters.l_thoracic_aorta_C100,
            E=systemicParameters.E_thoracic_aorta_C100,
            r=systemicParameters.r_thoracic_aorta_C100)
            annotation (Placement(transformation(extent={{-143,65},{-163,70}})));

          Systemic_artery_thoracic thoracic_aorta_C104(
            l=systemicParameters.l_thoracic_aorta_C104,
            E=systemicParameters.E_thoracic_aorta_C104,
            r=systemicParameters.r_thoracic_aorta_C104)
            annotation (Placement(transformation(extent={{-168,65},{-188,70}})));

          Systemic_artery_thoracic thoracic_aorta_C108(
            l=systemicParameters.l_thoracic_aorta_C108,
            E=systemicParameters.E_thoracic_aorta_C108,
            r=systemicParameters.r_thoracic_aorta_C108)
            annotation (Placement(transformation(extent={{-193,65},{-213,70}})));

          Systemic_artery_thoracic thoracic_aorta_C112(
            l=systemicParameters.l_thoracic_aorta_C112,
            E=systemicParameters.E_thoracic_aorta_C112,
            r=systemicParameters.r_thoracic_aorta_C112)
            annotation (Placement(transformation(extent={{-218,65},{-238,70}})));

          Systemic_artery abdominal_aorta_C114(
            l=systemicParameters.l_abdominal_aorta_C114,
            E=systemicParameters.E_abdominal_aorta_C114,
            r=systemicParameters.r_abdominal_aorta_C114)
            annotation (Placement(transformation(extent={{-307,-5},{-287,0}})));
          Systemic_artery abdominal_aorta_C136(
            l=systemicParameters.l_abdominal_aorta_C136,
            E=systemicParameters.E_abdominal_aorta_C136,
            r=systemicParameters.r_abdominal_aorta_C136)
            annotation (Placement(transformation(extent={{-280,-5},{-260,0}})));
          Systemic_artery abdominal_aorta_C164(
            l=systemicParameters.l_abdominal_aorta_C164,
            E=systemicParameters.E_abdominal_aorta_C164,
            r=systemicParameters.r_abdominal_aorta_C164)
            annotation (Placement(transformation(extent={{-255,-5},{-235,0}})));
          Systemic_artery abdominal_aorta_C176(
            l=systemicParameters.l_abdominal_aorta_C176,
            E=systemicParameters.E_abdominal_aorta_C176,
            r=systemicParameters.r_abdominal_aorta_C176)
            annotation (Placement(transformation(extent={{-230,-5},{-210,0}})));
          Systemic_artery abdominal_aorta_C188(
            l=systemicParameters.l_abdominal_aorta_C188,
            E=systemicParameters.E_abdominal_aorta_C188,
            r=systemicParameters.r_abdominal_aorta_C188)
            annotation (Placement(transformation(extent={{-203,-5},{-183,0}})));
          Systemic_artery abdominal_aorta_C192(
            l=systemicParameters.l_abdominal_aorta_C192,
            E=systemicParameters.E_abdominal_aorta_C192,
            r=systemicParameters.r_abdominal_aorta_C192)
            annotation (Placement(transformation(extent={{-178,-5},{-158,0}})));
          Systemic_tissue celiac_trunk_C116(
              Ra = tissueParameters.Ra_celiac_trunk_C116,
              Rv = tissueParameters.Rv_celiac_trunk_C116,
              I = tissueParameters.I_celiac_trunk_C116,
              C = tissueParameters.C_celiac_trunk_C116,
              zpv =  tissueParameters.Zpv_celiac_trunk_C116,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,57},{55,62}})));
          replaceable
          Systemic_tissue renal_L166(
              Ra = tissueParameters.Ra_renal_L166,
              Rv = tissueParameters.Rv_renal_L166,
              I = tissueParameters.I_renal_L166,
              C = tissueParameters.C_renal_L166,
              zpv =  tissueParameters.Zpv_renal_L166,
            nominal_pressure=tissueParameters.tissue_pressure) constrainedby
            Vessel_modules.Auxiliary.PartialSystemicElement
          annotation (Placement(transformation(extent={{35,-67},{55,-62}})));
          replaceable
          Systemic_tissue renal_R178(
              Ra = tissueParameters.Ra_renal_R178,
              Rv = tissueParameters.Rv_renal_R178,
              I = tissueParameters.I_renal_R178,
              C = tissueParameters.C_renal_R178,
              zpv =  tissueParameters.Zpv_renal_R178,
            nominal_pressure=tissueParameters.tissue_pressure) constrainedby
            Vessel_modules.Auxiliary.PartialSystemicElement
          annotation (Placement(transformation(extent={{35,37},{55,42}})));
          Systemic_artery common_iliac_R216(
            l=systemicParameters.l_common_iliac_R216,
            E=systemicParameters.E_common_iliac_R216,
            r=systemicParameters.r_common_iliac_R216)
            annotation (Placement(transformation(extent={{-148,-5},{-128,0}})));
          Systemic_tissue internal_iliac_T1_R218(
              Ra = tissueParameters.Ra_internal_iliac_T1_R218,
              Rv = tissueParameters.Rv_internal_iliac_T1_R218,
              I = tissueParameters.I_internal_iliac_T1_R218,
              C = tissueParameters.C_internal_iliac_T1_R218,
              zpv =  tissueParameters.Zpv_internal_iliac_T1_R218,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,27},{55,32}})));
          Systemic_artery external_iliac_R220(
            l=systemicParameters.l_external_iliac_R220,
            E=systemicParameters.E_external_iliac_R220,
            r=systemicParameters.r_external_iliac_R220)
            annotation (Placement(transformation(extent={{-120,-5},{-100,0}})));
          Systemic_artery femoral_R222(
            l=systemicParameters.l_femoral_R222,
            E=systemicParameters.E_femoral_R222,
            r=systemicParameters.r_femoral_R222)
            annotation (Placement(transformation(extent={{-95,-5},{-75,0}})));
          Systemic_tissue profundus_T2_R224(
              Ra = tissueParameters.Ra_profundus_T2_R224,
              Rv = tissueParameters.Rv_profundus_T2_R224,
              I = tissueParameters.I_profundus_T2_R224,
              C = tissueParameters.C_profundus_T2_R224,
              zpv =  tissueParameters.Zpv_profundus_T2_R224,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,17},{55,22}})));
          Systemic_artery femoral_R226(
            l=systemicParameters.l_femoral_R226,
            E=systemicParameters.E_femoral_R226,
            r=systemicParameters.r_femoral_R226)
            annotation (Placement(transformation(extent={{-67,-5},{-47,0}})));
          Systemic_artery popliteal_R228(
            l=systemicParameters.l_popliteal_R228,
            E=systemicParameters.E_popliteal_R228,
            r=systemicParameters.r_popliteal_R228)
            annotation (Placement(transformation(extent={{-42,-5},{-22,0}})));
          Systemic_tissue anterior_tibial_T3_R230(
              Ra = tissueParameters.Ra_anterior_tibial_T3_R230,
              Rv = tissueParameters.Rv_anterior_tibial_T3_R230,
              I = tissueParameters.I_anterior_tibial_T3_R230,
              C = tissueParameters.C_anterior_tibial_T3_R230,
              zpv =  tissueParameters.Zpv_anterior_tibial_T3_R230,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,7},{55,12}})));
          Systemic_artery popliteal_R232(
            l=systemicParameters.l_popliteal_R232,
            E=systemicParameters.E_popliteal_R232,
            r=systemicParameters.r_popliteal_R232)
            annotation (Placement(transformation(extent={{-16,-5},{4,0}})));
          Systemic_artery tibiofibular_trunk_R234(
            l=systemicParameters.l_tibiofibular_trunk_R234,
            E=systemicParameters.E_tibiofibular_trunk_R234,
            r=systemicParameters.r_tibiofibular_trunk_R234)
            annotation (Placement(transformation(extent={{9,-5},{29,0}})));
          Systemic_tissue posterior_tibial_T4_R236(
              Ra = tissueParameters.Ra_posterior_tibial_T4_R236,
              Rv = tissueParameters.Rv_posterior_tibial_T4_R236,
              I = tissueParameters.I_posterior_tibial_T4_R236,
              C = tissueParameters.C_posterior_tibial_T4_R236,
              zpv =  tissueParameters.Zpv_posterior_tibial_T4_R236,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,-5},{55,0}})));
          Systemic_artery common_iliac_L194(
            l=systemicParameters.l_common_iliac_L194,
            E=systemicParameters.E_common_iliac_L194,
            r=systemicParameters.r_common_iliac_L194)
            annotation (Placement(transformation(extent={{-147,-23},{-127,-18}})));
          Systemic_tissue internal_iliac_T1_L196(
              Ra = tissueParameters.Ra_internal_iliac_T1_L196,
              Rv = tissueParameters.Rv_internal_iliac_T1_L196,
              I = tissueParameters.I_internal_iliac_T1_L196,
              C = tissueParameters.C_internal_iliac_T1_L196,
              zpv =  tissueParameters.Zpv_internal_iliac_T1_L196,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,-55},{55,-50}})));
          Systemic_artery external_iliac_L198(
            l=systemicParameters.l_external_iliac_L198,
            E=systemicParameters.E_external_iliac_L198,
            r=systemicParameters.r_external_iliac_L198)
            annotation (Placement(transformation(extent={{-121,-23},{-101,-18}})));
          Systemic_artery femoral_L200(
            l=systemicParameters.l_femoral_L200,
            E=systemicParameters.E_femoral_L200,
            r=systemicParameters.r_femoral_L200)
            annotation (Placement(transformation(extent={{-94,-23},{-74,-18}})));
          Systemic_tissue profundus_T2_L202(
              Ra = tissueParameters.Ra_profundus_T2_L202,
              Rv = tissueParameters.Rv_profundus_T2_L202,
              I = tissueParameters.I_profundus_T2_L202,
              C = tissueParameters.C_profundus_T2_L202,
              zpv =  tissueParameters.Zpv_profundus_T2_L202,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,-43},{55,-38}})));
          Systemic_artery femoral_L204(
            l=systemicParameters.l_femoral_L204,
            E=systemicParameters.E_femoral_L204,
            r=systemicParameters.r_femoral_L204)
            annotation (Placement(transformation(extent={{-68,-23},{-48,-18}})));
          Systemic_artery popliteal_L206(
            l=systemicParameters.l_popliteal_L206,
            E=systemicParameters.E_popliteal_L206,
            r=systemicParameters.r_popliteal_L206)
            annotation (Placement(transformation(extent={{-41,-23},{-21,-18}})));
          Systemic_tissue anterior_tibial_T3_L208(
              Ra = tissueParameters.Ra_anterior_tibial_T3_L208,
              Rv = tissueParameters.Rv_anterior_tibial_T3_L208,
              I = tissueParameters.I_anterior_tibial_T3_L208,
              C = tissueParameters.C_anterior_tibial_T3_L208,
              zpv =  tissueParameters.Zpv_anterior_tibial_T3_L208,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,-33},{55,-28}})));
          Systemic_artery popliteal_L210(
            l=systemicParameters.l_popliteal_L210,
            E=systemicParameters.E_popliteal_L210,
            r=systemicParameters.r_popliteal_L210)
            annotation (Placement(transformation(extent={{-16,-23},{4,-18}})));
          Systemic_artery tibiofibular_trunk_L212(
            l=systemicParameters.l_tibiofibular_trunk_L212,
            E=systemicParameters.E_tibiofibular_trunk_L212,
            r=systemicParameters.r_tibiofibular_trunk_L212)
            annotation (Placement(transformation(extent={{9,-23},{29,-18}})));
          Systemic_tissue posterior_tibial_T4_L214(
              Ra = tissueParameters.Ra_posterior_tibial_T4_L214,
              Rv = tissueParameters.Rv_posterior_tibial_T4_L214,
              I = tissueParameters.I_posterior_tibial_T4_L214,
              C = tissueParameters.C_posterior_tibial_T4_L214,
              zpv =  tissueParameters.Zpv_posterior_tibial_T4_L214,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,-23},{55,-18}})));
          Systemic_artery subclavian_R28(
            l=systemicParameters.l_subclavian_R28,
            E=systemicParameters.E_subclavian_R28,
            r=systemicParameters.r_subclavian_R28)
            annotation (Placement(transformation(extent={{-88,163},{-68,168}})));
          Systemic_artery subclavian_R30(
            l=systemicParameters.l_subclavian_R30,
            E=systemicParameters.E_subclavian_R30,
            r=systemicParameters.r_subclavian_R30)
            annotation (Placement(transformation(extent={{-63,163},{-43,168}})));
          Systemic_artery axillary_R32(
            l=systemicParameters.l_axillary_R32,
            E=systemicParameters.E_axillary_R32,
            r=systemicParameters.r_axillary_R32)
            annotation (Placement(transformation(extent={{-40,163},{-20,168}})));
          Systemic_artery brachial_R34(
            l=systemicParameters.l_brachial_R34,
            E=systemicParameters.E_brachial_R34,
            r=systemicParameters.r_brachial_R34)
            annotation (Placement(transformation(extent={{-17,163},{3,168}})));
          Systemic_artery ulnar_T2_R36(
            l=systemicParameters.l_ulnar_T2_R36,
            E=systemicParameters.E_ulnar_T2_R36,
            r=systemicParameters.r_ulnar_T2_R36)
            annotation (Placement(transformation(extent={{10,163},{30,168}})));
          Systemic_tissue ulnar_T2_R42(
              Ra = tissueParameters.Ra_ulnar_T2_R42,
              Rv = tissueParameters.Rv_ulnar_T2_R42,
              I = tissueParameters.I_ulnar_T2_R42,
              C = tissueParameters.C_ulnar_T2_R42,
              zpv =  tissueParameters.Zpv_ulnar_T2_R42,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,163},{55,168}})));
          Systemic_tissue radial_T1_R44(
              Ra = tissueParameters.Ra_radial_T1_R44,
              Rv = tissueParameters.Rv_radial_T1_R44,
              I = tissueParameters.I_radial_T1_R44,
              C = tissueParameters.C_radial_T1_R44,
              zpv =  tissueParameters.Zpv_radial_T1_R44,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,153},{55,158}})));
          Systemic_artery subclavian_L66(
            l=systemicParameters.l_subclavian_L66,
            E=systemicParameters.E_subclavian_L66,
            r=systemicParameters.r_subclavian_L66)
            annotation (Placement(transformation(extent={{-87,109},{-67,114}})));
          Systemic_artery subclavian_L78(
            l=systemicParameters.l_subclavian_L78,
            E=systemicParameters.E_subclavian_L78,
            r=systemicParameters.r_subclavian_L78)
            annotation (Placement(transformation(extent={{-62,109},{-42,114}})));
          Systemic_artery axillary_L80(
            l=systemicParameters.l_axillary_L80,
            E=systemicParameters.E_axillary_L80,
            r=systemicParameters.r_axillary_L80)
            annotation (Placement(transformation(extent={{-39,109},{-19,114}})));
          Systemic_artery brachial_L82(
            l=systemicParameters.l_brachial_L82 - brachial_division,
            E=systemicParameters.E_brachial_L82,
            r=systemicParameters.r_brachial_L82)
            annotation (Placement(transformation(extent={{-16,109},{4,114}})));
          Systemic_artery ulnar_T2_L84(
            l=systemicParameters.l_ulnar_T2_L84,
            E=systemicParameters.E_ulnar_T2_L84,
            r=systemicParameters.r_ulnar_T2_L84)
            annotation (Placement(transformation(extent={{9,109},{29,114}})));
          Systemic_tissue ulnar_T2_L90(
              Ra = tissueParameters.Ra_ulnar_T2_L90,
              Rv = tissueParameters.Rv_ulnar_T2_L90,
              I = tissueParameters.I_ulnar_T2_L90,
              C = tissueParameters.C_ulnar_T2_L90,
              zpv =  tissueParameters.Zpv_ulnar_T2_L90,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,109},{55,114}})));
          Systemic_tissue radial_T1_L92(
              Ra = tissueParameters.Ra_radial_T1_L92,
              Rv = tissueParameters.Rv_radial_T1_L92,
              I = tissueParameters.I_radial_T1_L92,
              C = tissueParameters.C_radial_T1_L92,
              zpv =  tissueParameters.Zpv_radial_T1_L92,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,97},{55,102}})));
          Systemic_artery common_carotid_R6_A(
            l=systemicParameters.l_common_carotid_R6_A,
            E=systemicParameters.E_common_carotid_R6_A,
            r=systemicParameters.r_common_carotid_R6_A)
            annotation (Placement(transformation(extent={{-88,187},{-68,192}})));
          Systemic_artery common_carotid_R6_B(
            l=systemicParameters.l_common_carotid_R6_B,
            E=systemicParameters.E_common_carotid_R6_B,
            r=systemicParameters.r_common_carotid_R6_B)
            annotation (Placement(transformation(extent={{-63,187},{-43,192}})));
          Systemic_artery common_carotid_R6_C(
            l=systemicParameters.l_common_carotid_R6_C,
            E=systemicParameters.E_common_carotid_R6_C,
            r=systemicParameters.r_common_carotid_R6_C)
            annotation (Placement(transformation(extent={{-40,187},{-20,192}})));
          Systemic_artery internal_carotid_R8_A(
            l=systemicParameters.l_internal_carotid_R8_A,
            E=systemicParameters.E_internal_carotid_R8_A,
            r=systemicParameters.r_internal_carotid_R8_A,
            UseDistentionOutput=true)
            annotation (Placement(transformation(extent={{-17,187},{3,192}})));
          Systemic_artery internal_carotid_R8_B(
            l=systemicParameters.l_internal_carotid_R8_B,
            E=systemicParameters.E_internal_carotid_R8_B,
            r=systemicParameters.r_internal_carotid_R8_B)
            annotation (Placement(transformation(extent={{10,187},{30,192}})));
          Systemic_tissue internal_carotid_R8_C(
              Ra = tissueParameters.Ra_internal_carotid_R8_C,
              Rv = tissueParameters.Rv_internal_carotid_R8_C,
              I = tissueParameters.I_internal_carotid_R8_C,
              C = tissueParameters.C_internal_carotid_R8_C,
              zpv =  tissueParameters.Zpv_internal_carotid_R8_C,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,187},{55,192}})));
          Systemic_tissue external_carotid_T2_R26(
              Ra = tissueParameters.Ra_external_carotid_T2_R26,
              Rv = tissueParameters.Rv_external_carotid_T2_R26,
              I = tissueParameters.I_external_carotid_T2_R26,
              C = tissueParameters.C_external_carotid_T2_R26,
              zpv =  tissueParameters.Zpv_external_carotid_T2_R26,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,175},{55,180}})));
          Systemic_artery common_carotid_L48_A(
            l=systemicParameters.l_common_carotid_L48_A,
            E=systemicParameters.E_common_carotid_L48_A,
            r=systemicParameters.r_common_carotid_L48_A)
            annotation (Placement(transformation(extent={{-111,119},{-91,124}})));
          Systemic_artery common_carotid_L48_B(
            l=systemicParameters.l_common_carotid_L48_B,
            E=systemicParameters.E_common_carotid_L48_B,
            r=systemicParameters.r_common_carotid_L48_B)
            annotation (Placement(transformation(extent={{-86,119},{-66,124}})));
          Systemic_artery common_carotid_L48_C(
            l=systemicParameters.l_common_carotid_L48_C,
            E=systemicParameters.E_common_carotid_L48_C,
            r=systemicParameters.r_common_carotid_L48_C)
            annotation (Placement(transformation(extent={{-63,119},{-43,124}})));
          Systemic_artery common_carotid_L48_D(
            l=systemicParameters.l_common_carotid_L48_D,
            E=systemicParameters.E_common_carotid_L48_D,
            r=systemicParameters.r_common_carotid_L48_D)
            annotation (Placement(transformation(extent={{-38,119},{-18,124}})));
          Systemic_artery internal_carotid_L50_A(
            l=systemicParameters.l_internal_carotid_L50_A,
            E=systemicParameters.E_internal_carotid_L50_A,
            r=systemicParameters.r_internal_carotid_L50_A)
            annotation (Placement(transformation(extent={{-15,127},{5,132}})));
          Systemic_artery internal_carotid_L50_B(
            l=systemicParameters.l_internal_carotid_L50_B,
            E=systemicParameters.E_internal_carotid_L50_B,
            r=systemicParameters.r_internal_carotid_L50_B)
            annotation (Placement(transformation(extent={{10,127},{30,132}})));
          Systemic_tissue internal_carotid_L50_C(
              Ra = tissueParameters.Ra_internal_carotid_L50_C,
              Rv = tissueParameters.Rv_internal_carotid_L50_C,
              I = tissueParameters.I_internal_carotid_L50_C,
              C = tissueParameters.C_internal_carotid_L50_C,
              zpv =  tissueParameters.Zpv_internal_carotid_L50_C,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,127},{55,132}})));
          Systemic_tissue external_carotid_T2_L62(
              Ra = tissueParameters.Ra_external_carotid_T2_L62,
              Rv = tissueParameters.Rv_external_carotid_T2_L62,
              I = tissueParameters.I_external_carotid_T2_L62,
              C = tissueParameters.C_external_carotid_T2_L62,
              zpv =  tissueParameters.Zpv_external_carotid_T2_L62,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,119},{55,124}})));
          Systemic_tissue vertebral_L2(
              Ra = tissueParameters.Ra_vertebral_L2,
              Rv = tissueParameters.Rv_vertebral_L2,
              I = tissueParameters.I_vertebral_L2,
              C = tissueParameters.C_vertebral_L2,
              zpv =  tissueParameters.Zpv_vertebral_L2,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,87},{55,92}})));
          Systemic_tissue vertebral_R272(
              Ra = tissueParameters.Ra_vertebral_R272,
              Rv = tissueParameters.Rv_vertebral_R272,
              I = tissueParameters.I_vertebral_R272,
              C = tissueParameters.C_vertebral_R272,
              zpv =  tissueParameters.Zpv_vertebral_R272,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,143},{55,148}})));
          Systemic_vein superior_vena_cava_C2(
            l=venousParameters.l_superior_vena_cava_C2,
            E=venousParameters.E_superior_vena_cava_C2,
            r=venousParameters.r_superior_vena_cava_C2)
            annotation (Placement(transformation(extent={{297,163},{317,168}})));
          Systemic_vein superior_vena_cava_C88(
            l=venousParameters.l_superior_vena_cava_C88,
            E=venousParameters.E_superior_vena_cava_C88,
            r=venousParameters.r_superior_vena_cava_C88)
            annotation (Placement(transformation(extent={{272,163},{292,168}})));
          Systemic_vein inferior_vena_cava_C8(
            l=venousParameters.l_inferior_vena_cava_C8,
            E=venousParameters.E_inferior_vena_cava_C8,
            r=venousParameters.r_inferior_vena_cava_C8)
            annotation (Placement(transformation(extent={{409,-5},{429,0}})));
          Systemic_vein hepatic_vein_T1_C10(
            l=venousParameters.l_hepatic_vein_T1_C10,
            E=venousParameters.E_hepatic_vein_T1_C10,
            r=venousParameters.r_hepatic_vein_T1_C10)
            annotation (Placement(transformation(extent={{60,57},{80,62}})));
          Systemic_vein inferior_vena_cava_C12(
            l=venousParameters.l_inferior_vena_cava_C12,
            E=venousParameters.E_inferior_vena_cava_C12,
            r=venousParameters.r_inferior_vena_cava_C12)
            annotation (Placement(transformation(extent={{383,-5},{403,0}})));
          Systemic_vein inferior_vena_cava_C16(
            l=venousParameters.l_inferior_vena_cava_C16,
            E=venousParameters.E_inferior_vena_cava_C16,
            r=venousParameters.r_inferior_vena_cava_C16)
            annotation (Placement(transformation(extent={{360,-5},{380,0}})));
          Systemic_vein renal_vein_T1_R18(
            l=venousParameters.l_renal_vein_T1_R18,
            E=venousParameters.E_renal_vein_T1_R18,
            r=venousParameters.r_renal_vein_T1_R18)
            annotation (Placement(transformation(extent={{60,37},{80,42}})));
          Systemic_vein inferior_vena_cava_C20(
            l=venousParameters.l_inferior_vena_cava_C20,
            E=venousParameters.E_inferior_vena_cava_C20,
            r=venousParameters.r_inferior_vena_cava_C20)
            annotation (Placement(transformation(extent={{336,-5},{356,0}})));
          Systemic_vein renal_vein_T1_L22(
            l=venousParameters.l_renal_vein_T1_L22,
            E=venousParameters.E_renal_vein_T1_L22,
            r=venousParameters.r_renal_vein_T1_L22)
            annotation (Placement(transformation(extent={{60,-67},{80,-62}})));
          Systemic_vein inferior_vena_cava_C24(
            l=venousParameters.l_inferior_vena_cava_C24,
            E=venousParameters.E_inferior_vena_cava_C24,
            r=venousParameters.r_inferior_vena_cava_C24)
            annotation (Placement(transformation(extent={{312,-5},{332,0}})));
          Systemic_vein common_iliac_vein_L56(
            l=venousParameters.l_common_iliac_vein_L56,
            E=venousParameters.E_common_iliac_vein_L56,
            r=venousParameters.r_common_iliac_vein_L56,
            LimitBackflow=true)
            annotation (Placement(transformation(extent={{287,-23},{307,-18}})));
          Systemic_vein common_iliac_vein_R26(
            l=venousParameters.l_common_iliac_vein_R26,
            E=venousParameters.E_common_iliac_vein_R26,
            r=venousParameters.r_common_iliac_vein_R26,
            LimitBackflow=true)
            annotation (Placement(transformation(extent={{288,-5},{308,0}})));
          Systemic_vein external_iliac_vein_R28(
            l=venousParameters.l_external_iliac_vein_R28,
            E=venousParameters.E_external_iliac_vein_R28,
            r=venousParameters.r_external_iliac_vein_R28)
            annotation (Placement(transformation(extent={{263,-5},{283,0}})));
          Systemic_vein internal_iliac_vein_T1_R30(
            l=venousParameters.l_internal_iliac_vein_T1_R30,
            E=venousParameters.E_internal_iliac_vein_T1_R30,
            r=venousParameters.r_internal_iliac_vein_T1_R30)
            annotation (Placement(transformation(extent={{60,27},{80,32}})));
          Systemic_vein external_iliac_vein_R32(
            l=venousParameters.l_external_iliac_vein_R32,
            E=venousParameters.E_external_iliac_vein_R32,
            r=venousParameters.r_external_iliac_vein_R32)
            annotation (Placement(transformation(extent={{237,-5},{257,0}})));
          Systemic_vein femoral_vein_R34(
            l=venousParameters.l_femoral_vein_R34,
            E=venousParameters.E_femoral_vein_R34,
            r=venousParameters.r_femoral_vein_R34)
            annotation (Placement(transformation(extent={{212,-5},{232,0}})));
          Systemic_vein femoral_vein_R38(
            l=venousParameters.l_femoral_vein_R38,
            E=venousParameters.E_femoral_vein_R38,
            r=venousParameters.r_femoral_vein_R38)
            annotation (Placement(transformation(extent={{189,-5},{209,0}})));
          Systemic_vein profunda_femoris_vein_T2_R40(
            l=venousParameters.l_profunda_femoris_vein_T2_R40,
            E=venousParameters.E_profunda_femoris_vein_T2_R40,
            r=venousParameters.r_profunda_femoris_vein_T2_R40)
            annotation (Placement(transformation(extent={{60,17},{80,22}})));
          Systemic_vein femoral_vein_R42(
            l=venousParameters.l_femoral_vein_R42,
            E=venousParameters.E_femoral_vein_R42,
            r=venousParameters.r_femoral_vein_R42)
            annotation (Placement(transformation(extent={{163,-5},{183,0}})));
          Systemic_vein femoral_vein_R46(
            l=venousParameters.l_femoral_vein_R46,
            E=venousParameters.E_femoral_vein_R46,
            r=venousParameters.r_femoral_vein_R46)
            annotation (Placement(transformation(extent={{138,-5},{158,0}})));
          Systemic_vein popliteal_vein_R48(
            l=venousParameters.l_popliteal_vein_R48,
            E=venousParameters.E_popliteal_vein_R48,
            r=venousParameters.r_popliteal_vein_R48)
            annotation (Placement(transformation(extent={{113,-5},{133,0}})));
          Systemic_vein anterior_tibial_vein_T4_R50(
            l=venousParameters.l_anterior_tibial_vein_T4_R50,
            E=venousParameters.E_anterior_tibial_vein_T4_R50,
            r=venousParameters.r_anterior_tibial_vein_T4_R50)
            annotation (Placement(transformation(extent={{60,7},{80,12}})));
          Systemic_vein popliteal_vein_R52(
            l=venousParameters.l_popliteal_vein_R52,
            E=venousParameters.E_popliteal_vein_R52,
            r=venousParameters.r_popliteal_vein_R52)
            annotation (Placement(transformation(extent={{87,-5},{107,0}})));
          Systemic_vein posterior_tibial_vein_T6_R54(
            l=venousParameters.l_posterior_tibial_vein_T6_R54,
            E=venousParameters.E_posterior_tibial_vein_T6_R54,
            r=venousParameters.r_posterior_tibial_vein_T6_R54)
            annotation (Placement(transformation(extent={{60,-5},{80,0}})));
          Systemic_vein external_iliac_vein_L58(
            l=venousParameters.l_external_iliac_vein_L58,
            E=venousParameters.E_external_iliac_vein_L58,
            r=venousParameters.r_external_iliac_vein_L58)
            annotation (Placement(transformation(extent={{263,-23},{283,-18}})));
          Systemic_vein internal_iliac_vein_T1_L60(
            l=venousParameters.l_internal_iliac_vein_T1_L60,
            E=venousParameters.E_internal_iliac_vein_T1_L60,
            r=venousParameters.r_internal_iliac_vein_T1_L60)
            annotation (Placement(transformation(extent={{60,-55},{80,-50}})));
          Systemic_vein external_iliac_vein_L62(
            l=venousParameters.l_external_iliac_vein_L62,
            E=venousParameters.E_external_iliac_vein_L62,
            r=venousParameters.r_external_iliac_vein_L62)
            annotation (Placement(transformation(extent={{237,-23},{257,-18}})));
          Systemic_vein femoral_vein_L64(
            l=venousParameters.l_femoral_vein_L64,
            E=venousParameters.E_femoral_vein_L64,
            r=venousParameters.r_femoral_vein_L64)
            annotation (Placement(transformation(extent={{212,-23},{232,-18}})));
          Systemic_vein femoral_vein_L68(
            l=venousParameters.l_femoral_vein_L68,
            E=venousParameters.E_femoral_vein_L68,
            r=venousParameters.r_femoral_vein_L68)
            annotation (Placement(transformation(extent={{189,-23},{209,-18}})));
          Systemic_vein profunda_femoris_vein_T2_L70(
            l=venousParameters.l_profunda_femoris_vein_T2_L70,
            E=venousParameters.E_profunda_femoris_vein_T2_L70,
            r=venousParameters.r_profunda_femoris_vein_T2_L70)
            annotation (Placement(transformation(extent={{60,-43},{80,-38}})));
          Systemic_vein femoral_vein_L72(
            l=venousParameters.l_femoral_vein_L72,
            E=venousParameters.E_femoral_vein_L72,
            r=venousParameters.r_femoral_vein_L72)
            annotation (Placement(transformation(extent={{163,-23},{183,-18}})));
          Systemic_vein femoral_vein_L76(
            l=venousParameters.l_femoral_vein_L76,
            E=venousParameters.E_femoral_vein_L76,
            r=venousParameters.r_femoral_vein_L76)
            annotation (Placement(transformation(extent={{138,-23},{158,-18}})));
          Systemic_vein popliteal_vein_L78(
            l=venousParameters.l_popliteal_vein_L78,
            E=venousParameters.E_popliteal_vein_L78,
            r=venousParameters.r_popliteal_vein_L78)
            annotation (Placement(transformation(extent={{113,-23},{133,-18}})));
          Systemic_vein anterior_tibial_vein_T4_L80(
            l=venousParameters.l_anterior_tibial_vein_T4_L80,
            E=venousParameters.E_anterior_tibial_vein_T4_L80,
            r=venousParameters.r_anterior_tibial_vein_T4_L80)
            annotation (Placement(transformation(extent={{60,-33},{80,-28}})));
          Systemic_vein popliteal_vein_L82(
            l=venousParameters.l_popliteal_vein_L82,
            E=venousParameters.E_popliteal_vein_L82,
            r=venousParameters.r_popliteal_vein_L82)
            annotation (Placement(transformation(extent={{87,-23},{107,-18}})));
          Systemic_vein posterior_tibial_vein_T6_L84(
            l=venousParameters.l_posterior_tibial_vein_T6_L84,
            E=venousParameters.E_posterior_tibial_vein_T6_L84,
            r=venousParameters.r_posterior_tibial_vein_T6_L84)
            annotation (Placement(transformation(extent={{60,-23},{80,-18}})));
          Systemic_vein brachiocephalic_vein_R90(
            l=venousParameters.l_brachiocephalic_vein_R90,
            E=venousParameters.E_brachiocephalic_vein_R90,
            r=venousParameters.r_brachiocephalic_vein_R90,
            LimitBackflow=true)
            annotation (Placement(transformation(extent={{247,163},{267,168}})));
          Systemic_vein brachiocephalic_vein_L124(
            l=venousParameters.l_brachiocephalic_vein_L124,
            E=venousParameters.E_brachiocephalic_vein_L124,
            r=venousParameters.r_brachiocephalic_vein_L124,
            LimitBackflow=true)
            annotation (Placement(transformation(extent={{248,109},{268,114}})));
          Systemic_vein vertebral_vein_R92(
            l=venousParameters.l_vertebral_vein_R92,
            E=venousParameters.E_vertebral_vein_R92,
            r=venousParameters.r_vertebral_vein_R92)
            annotation (Placement(transformation(extent={{61,143},{81,148}})));
          Systemic_vein brachiocephalic_vein_R94(
            l=venousParameters.l_brachiocephalic_vein_R94,
            E=venousParameters.E_brachiocephalic_vein_R94,
            r=venousParameters.r_brachiocephalic_vein_R94)
            annotation (Placement(transformation(extent={{222,163},{242,168}})));
          Systemic_vein subclavian_vein_R96(
            l=venousParameters.l_subclavian_vein_R96,
            E=venousParameters.E_subclavian_vein_R96,
            r=venousParameters.r_subclavian_vein_R96)
            annotation (Placement(transformation(extent={{197,163},{217,168}})));
          Systemic_vein internal_jugular_vein_R122(
            l=venousParameters.l_internal_jugular_vein_R122,
            E=venousParameters.E_internal_jugular_vein_R122,
            r=venousParameters.r_internal_jugular_vein_R122)
            annotation (Placement(transformation(extent={{61,187},{81,192}})));
          Systemic_vein external_jugular_vein_R98(
            l=venousParameters.l_external_jugular_vein_R98,
            E=venousParameters.E_external_jugular_vein_R98,
            r=venousParameters.r_external_jugular_vein_R98)
            annotation (Placement(transformation(extent={{61,175},{81,180}})));
          Systemic_vein subclavian_vein_R100(
            l=venousParameters.l_subclavian_vein_R100,
            E=venousParameters.E_subclavian_vein_R100,
            r=venousParameters.r_subclavian_vein_R100)
            annotation (Placement(transformation(extent={{168,163},{188,168}})));
          Systemic_vein axillary_vein_R102(
            l=venousParameters.l_axillary_vein_R102,
            E=venousParameters.E_axillary_vein_R102,
            r=venousParameters.r_axillary_vein_R102)
            annotation (Placement(transformation(extent={{141,163},{161,168}})));
          Systemic_vein brachial_vein_R104(
            l=venousParameters.l_brachial_vein_R104,
            E=venousParameters.E_brachial_vein_R104,
            r=venousParameters.r_brachial_vein_R104)
            annotation (Placement(transformation(extent={{114,163},{134,168}})));
          Systemic_vein brachial_vein_R114(
            l=venousParameters.l_brachial_vein_R114,
            E=venousParameters.E_brachial_vein_R114,
            r=venousParameters.r_brachial_vein_R114)
            annotation (Placement(transformation(extent={{113,153},{133,158}})));
          Systemic_vein brachial_vein_R108(
            l=venousParameters.l_brachial_vein_R108,
            E=venousParameters.E_brachial_vein_R108,
            r=venousParameters.r_brachial_vein_R108)
            annotation (Placement(transformation(extent={{88,163},{108,168}})));
          Systemic_vein ulnar_vein_T7_R110(
            l=venousParameters.l_ulnar_vein_T7_R110,
            E=venousParameters.E_ulnar_vein_T7_R110,
            r=venousParameters.r_ulnar_vein_T7_R110)
            annotation (Placement(transformation(extent={{61,163},{81,168}})));
          Systemic_vein brachial_vein_R118(
            l=venousParameters.l_brachial_vein_R118,
            E=venousParameters.E_brachial_vein_R118,
            r=venousParameters.r_brachial_vein_R118)
            annotation (Placement(transformation(extent={{88,153},{108,158}})));
          Systemic_vein radial_vein_T3_R120(
            l=venousParameters.l_radial_vein_T3_R120,
            E=venousParameters.E_radial_vein_T3_R120,
            r=venousParameters.r_radial_vein_T3_R120)
            annotation (Placement(transformation(extent={{61,153},{81,158}})));
          Systemic_vein vertebral_vein_L126(
            l=venousParameters.l_vertebral_vein_L126,
            E=venousParameters.E_vertebral_vein_L126,
            r=venousParameters.r_vertebral_vein_L126)
            annotation (Placement(transformation(extent={{60,87},{80,92}})));
          Systemic_vein brachiocephalic_vein_L128(
            l=venousParameters.l_brachiocephalic_vein_L128,
            E=venousParameters.E_brachiocephalic_vein_L128,
            r=venousParameters.r_brachiocephalic_vein_L128)
            annotation (Placement(transformation(extent={{219,109},{239,114}})));
          Systemic_vein subclavian_vein_L130(
            l=venousParameters.l_subclavian_vein_L130,
            E=venousParameters.E_subclavian_vein_L130,
            r=venousParameters.r_subclavian_vein_L130)
            annotation (Placement(transformation(extent={{192,109},{212,114}})));
          Systemic_vein internal_jugular_vein_L156(
            l=venousParameters.l_internal_jugular_vein_L156,
            E=venousParameters.E_internal_jugular_vein_L156,
            r=venousParameters.r_internal_jugular_vein_L156)
            annotation (Placement(transformation(extent={{61,127},{81,132}})));
          Systemic_vein external_jugular_vein_L132(
            l=venousParameters.l_external_jugular_vein_L132,
            E=venousParameters.E_external_jugular_vein_L132,
            r=venousParameters.r_external_jugular_vein_L132)
            annotation (Placement(transformation(extent={{61,119},{81,124}})));
          Systemic_vein subclavian_vein_L134(
            l=venousParameters.l_subclavian_vein_L134,
            E=venousParameters.E_subclavian_vein_L134,
            r=venousParameters.r_subclavian_vein_L134)
            annotation (Placement(transformation(extent={{167,109},{187,114}})));
          Systemic_vein axillary_vein_L136(
            l=venousParameters.l_axillary_vein_L136,
            E=venousParameters.E_axillary_vein_L136,
            r=venousParameters.r_axillary_vein_L136)
            annotation (Placement(transformation(extent={{142,109},{162,114}})));
          Systemic_vein brachial_vein_L138(
            l=venousParameters.l_brachial_vein_L138,
            E=venousParameters.E_brachial_vein_L138,
            r=venousParameters.r_brachial_vein_L138)
            annotation (Placement(transformation(extent={{115,109},{135,114}})));
          Systemic_vein brachial_vein_L148(
            l=venousParameters.l_brachial_vein_L148,
            E=venousParameters.E_brachial_vein_L148,
            r=venousParameters.r_brachial_vein_L148)
            annotation (Placement(transformation(extent={{114,97},{134,102}})));
          Systemic_vein brachial_vein_L142(
            l=venousParameters.l_brachial_vein_L142,
            E=venousParameters.E_brachial_vein_L142,
            r=venousParameters.r_brachial_vein_L142)
            annotation (Placement(transformation(extent={{88,109},{108,114}})));
          Systemic_vein ulnar_vein_T7_L144(
            l=venousParameters.l_ulnar_vein_T7_L144,
            E=venousParameters.E_ulnar_vein_T7_L144,
            r=venousParameters.r_ulnar_vein_T7_L144)
            annotation (Placement(transformation(extent={{61,109},{81,114}})));
          Systemic_vein brachial_vein_L152(
            l=venousParameters.l_brachial_vein_L152,
            E=venousParameters.E_brachial_vein_L152,
            r=venousParameters.r_brachial_vein_L152)
            annotation (Placement(transformation(extent={{88,97},{108,102}})));
          Systemic_vein radial_vein_T3_L154(
            l=venousParameters.l_radial_vein_T3_L154,
            E=venousParameters.E_radial_vein_T3_L154,
            r=venousParameters.r_radial_vein_T3_L154)
            annotation (Placement(transformation(extent={{61,97},{81,102}})));
          Parametrization.Parameters_Venous venousParameters(height_actual=settings.height)
            annotation (Placement(transformation(extent={{80,-100},{100,-80}})));
          Real u_root(unit = "Pa")=ascending_aorta_A.p_in;
          Real v_sup_venacava(unit = "m3.s-1")=superior_vena_cava_C2.q_out;
          Real v_inf_venacava(unit = "m3.s-1")=inferior_vena_cava_C8.q_out;

          replaceable Parametrization.SystemicTissueParameters_Calculated
            tissueParameters(
            tissue_pressure=settings.tissues_P_nom,
            arterioles_pressure=settings.tissues_Pa_nom,
            venules_pressure=settings.tissues_Pv_nom,
            total_zpv=settings.tissues_ZPV_nom,
            stressed_volume=settings.tissues_SV_nom,
            cardiac_output=settings.tissues_CO_nom) constrainedby
            Parametrization.SystemicTissueParameters annotation (Placement(
                transformation(extent={{40,-100},{60,-80}})),
              __Dymola_choicesAllMatching=true);
          Systemic_artery                  mesenteric_artery(
            l(displayUnit="cm") = 0.108,
            E(displayUnit="Pa") = 4.00E+05,
            r=3.73E-03) annotation (Placement(transformation(extent={{9,47},{29,52}})));
          replaceable
          Systemic_tissue splanchnic_tissue(
            Ra=tissueParameters.Ra_splachnic_tissue,
            Rv=tissueParameters.Rv_splachnic_tissue,
            I=tissueParameters.I_splachnic_tissue,
            C=tissueParameters.C_splachnic_tissue,
            zpv=tissueParameters.Zpv_splachnic_tissue,
            nominal_pressure=tissueParameters.tissue_pressure) constrainedby
            Vessel_modules.Auxiliary.PartialSystemicElement
            annotation (Placement(transformation(extent={{35,47},{55,52}})));
          Systemic_vein splanchnic_vein(l=1.00E-01, r=7.50E-03)
            annotation (Placement(transformation(extent={{60,47},{80,52}})));
          Systemic_artery_thoracic                  coronary_arteries(
            C(displayUnit="m3/Pa") = 3e-11,
            R(displayUnit="(Pa.s)/m3") = 7e8)
            annotation (Placement(transformation(extent={{10,74},{30,78}})));
          Systemic_tissue                          cardiac_tissue(
            UseOuter_thoracic_pressure=true,
            I=tissueParameters.I_cardiac_tissue,
            C=tissueParameters.C_cardiac_tissue,
            Ra=tissueParameters.Ra_cardiac_tissue,
            Rv=tissueParameters.Rv_cardiac_tissue,
            zpv=tissueParameters.Zpv_cardiac_tissue,
            nominal_pressure=tissueParameters.tissue_pressure)
            annotation (Placement(transformation(extent={{36,74},{56,78}})));
          replaceable
          Systemic_vein coronary_veins(
            UseOuter_thoracic_pressure=true,
            C(displayUnit="m3/Pa") = 7e-10,
            R(displayUnit="(Pa.s)/m3") = 2e8)
            annotation (Placement(transformation(extent={{60,74},{80,78}})));
          Systemic_artery brachial_L82_HeartLevel(
            sinAlpha=-1,
            l=brachial_division,
            E=systemicParameters.E_brachial_L82,
            r=systemicParameters.r_brachial_L82)
            annotation (Placement(transformation(extent={{-26,97},{-6,102}})));

          Real u_ra(unit = "Pa") = port_b.pressure;
          Real v_aov(unit="m3.s-1") = port_a.q;

          Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter
            annotation (Placement(transformation(extent={{-300,70},{-280,90}})));
          Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter1
            annotation (Placement(transformation(extent={{480,70},{500,90}})));
          Physiolibrary.Types.RealIO.PressureOutput capillaryPressures[:] = {
            celiac_trunk_C116.p,
            renal_L166.p,
            renal_R178.p,
            internal_iliac_T1_R218.p,
            profundus_T2_R224.p,
            anterior_tibial_T3_R230.p,
            posterior_tibial_T4_R236.p,
            internal_iliac_T1_L196.p,
            profundus_T2_L202.p,
            anterior_tibial_T3_L208.p,
            posterior_tibial_T4_L214.p,
            ulnar_T2_R42.p,
            radial_T1_R44.p,
            ulnar_T2_L90.p,
            radial_T1_L92.p,
            internal_carotid_R8_C.p,
            external_carotid_T2_R26.p,
            internal_carotid_L50_C.p,
            external_carotid_T2_L62.p,
            vertebral_L2.p,
            vertebral_R272.p,
            splanchnic_tissue.p,
            cardiac_tissue.p}
         if useCapillaryPressureOutputs annotation (Placement(transformation(extent={{316,182},{
                    336,202}}), iconTransformation(extent={{148,166},{168,186}})));
        equation

          connect(internal_iliac_T1_R218.port_b,internal_iliac_vein_T1_R30.port_a) annotation (Line(points={{55,29.5},
                  {60,29.5}},                                                                                                              thickness=1,
              color={28,108,200}));
          connect(internal_iliac_T1_L196.port_b,internal_iliac_vein_T1_L60.port_a) annotation (Line(points={{55,
                  -52.5},{60,-52.5}},                                                                                                      thickness=1,
              color={28,108,200}));
          connect(profundus_T2_R224.port_b,profunda_femoris_vein_T2_R40.port_a) annotation (Line(points={{55,19.5},
                  {60,19.5}},                                                                                                           thickness=1,
              color={28,108,200}));
          connect(profundus_T2_L202.port_b,profunda_femoris_vein_T2_L70.port_a) annotation (Line(points={{55,
                  -40.5},{60,-40.5}},                                                                                                   thickness=1,
              color={28,108,200}));
          connect(anterior_tibial_T3_L208.port_b,anterior_tibial_vein_T4_L80.port_a) annotation (Line(points={{55,
                  -30.5},{60,-30.5}},                                                                                                        thickness=1,
              color={28,108,200}));
          connect(anterior_tibial_T3_R230.port_b,anterior_tibial_vein_T4_R50.port_a) annotation (Line(points={{55,9.5},
                  {60,9.5}},                                                                                                                 thickness=1,
              color={28,108,200}));
          connect(posterior_tibial_T4_L214.port_b,posterior_tibial_vein_T6_L84.port_a) annotation (Line(points={{55,
                  -20.5},{60,-20.5}},                                                                                                          thickness=1,
              color={28,108,200}));
          connect(posterior_tibial_T4_R236.port_b,posterior_tibial_vein_T6_R54.port_a) annotation (Line(points={{55,-2.5},
                  {60,-2.5}},                                                                                                                  thickness=1,
              color={28,108,200}));
          connect(radial_T1_R44.port_b,radial_vein_T3_R120.port_a) annotation (Line(points={{55,
                  155.5},{61,155.5}},                                                                                      thickness=1,
              color={28,108,200}));
          connect(radial_T1_L92.port_b,radial_vein_T3_L154.port_a) annotation (Line(points={{55,99.5},
                  {61,99.5}},                                                                                              thickness=1,
              color={28,108,200}));
          connect(ulnar_T2_R42.port_b,ulnar_vein_T7_R110.port_a) annotation (Line(points={{55,
                  165.5},{55,166},{60,166},{60,165.5},{61,165.5}},                                                       thickness=1,
              color={28,108,200}));
          connect(ulnar_T2_L90.port_b,ulnar_vein_T7_L144.port_a) annotation (Line(points={{55,
                  111.5},{55,112},{56,112},{56,111.5},{61,111.5}},                                                       thickness=1,
              color={28,108,200}));
          connect(vertebral_R272.port_b,vertebral_vein_R92.port_a) annotation (Line(points={{55,
                  145.5},{61,145.5}},                                                                                      thickness=1,
              color={28,108,200}));
          connect(vertebral_L2.port_b,vertebral_vein_L126.port_a) annotation (Line(points={{55,89.5},
                  {60,89.5}},                                                                                             thickness=1,
              color={28,108,200}));
          connect(internal_carotid_R8_C.port_b,internal_jugular_vein_R122.port_a) annotation (Line(points={{55,
                  189.5},{61,189.5}},                                                                                                     thickness=1,
              color={28,108,200}));
          connect(external_carotid_T2_R26.port_b,external_jugular_vein_R98.port_a) annotation (Line(points={{55,
                  177.5},{61,177.5}},                                                                                                      thickness=1,
              color={28,108,200}));
          connect(internal_carotid_L50_C.port_b,internal_jugular_vein_L156.port_a) annotation (Line(points={{55,
                  129.5},{61,129.5}},                                                                                                      thickness=1,
              color={28,108,200}));
          connect(external_carotid_T2_L62.port_b,external_jugular_vein_L132.port_a) annotation (Line(points={{55,
                  121.5},{61,121.5}},                                                                                                       thickness=1,
              color={28,108,200}));
          connect(celiac_trunk_C116.port_b,hepatic_vein_T1_C10.port_a) annotation (Line(points={{55,59.5},
                  {56,59.5},{56,60},{60,60},{60,59.5}},                                                                        thickness=1,
              color={28,108,200}));
          connect(renal_L166.port_b,renal_vein_T1_L22.port_a) annotation (Line(points={{55,
                  -64.5},{60,-64.5}},                                                                                 thickness=1,
              color={28,108,200}));
          connect(renal_R178.port_b,renal_vein_T1_R18.port_a) annotation (Line(points={{55,39.5},
                  {60,39.5}},                                                                                         thickness=1,
              color={28,108,200}));
          connect(brachiocephalic_trunk_C4.port_a,aortic_arch_C2.port_b) annotation (Line(points={{-132,
                  165.5},{-132,166},{-140,166},{-140,87.5},{-143,87.5}},                                                         thickness=1,
              color={238,46,47}));
          connect(aortic_arch_C46.port_a,aortic_arch_C2.port_b) annotation (Line(points={{-137,
                  87.5},{-143,87.5}},                                                                                   thickness=1));
          connect(common_carotid_R6_A.port_a,brachiocephalic_trunk_C4.port_b) annotation (Line(points={{-88,
                  189.5},{-112,189.5},{-112,165.5}},                                                                                  thickness=1,
              color={238,46,47}));
          connect(subclavian_R28.port_a,brachiocephalic_trunk_C4.port_b) annotation (Line(points={{-88,
                  165.5},{-112,165.5}},                                                                                          thickness=1,
              color={238,46,47}));
          connect(aortic_arch_C64.port_a,aortic_arch_C46.port_b) annotation (Line(points={{-112,
                  87.5},{-117,87.5}},                                                                                    thickness=1));
          connect(common_carotid_L48_A.port_a,aortic_arch_C46.port_b) annotation (Line(points={{-111,
                  121.5},{-117,121.5},{-117,87.5}},                                                                           thickness=1,
              color={238,46,47}));
          connect(aortic_arch_C94.port_a,aortic_arch_C64.port_b) annotation (Line(points={{-91,
                  67.5},{-82,67.5},{-82,88},{-92,88},{-92,87.5}},                                                        thickness=1,
              color={238,46,47}));
          connect(subclavian_L66.port_a,aortic_arch_C64.port_b) annotation (Line(points={{-87,
                  111.5},{-90,111.5},{-90,87.5},{-92,87.5}},                                                            thickness=1,
              color={238,46,47}));
          connect(thoracic_aorta_C108.port_a,thoracic_aorta_C104.port_b) annotation (Line(points={{-193,
                  67.5},{-188,67.5}},                                                                                            thickness=1,
              color={238,46,47}));
          connect(thoracic_aorta_C112.port_a,thoracic_aorta_C108.port_b) annotation (Line(points={{-218,
                  67.5},{-213,67.5}},                                                                                            thickness=1,
              color={238,46,47}));
          connect(abdominal_aorta_C136.port_a,abdominal_aorta_C114.port_b) annotation (Line(points={{-280,
                  -2.5},{-287,-2.5}},                                                                                              thickness=1,
              color={238,46,47}));
          connect(celiac_trunk_C116.port_a,abdominal_aorta_C114.port_b) annotation (Line(points={{35,59.5},
                  {-284,59.5},{-284,-2.5},{-287,-2.5}},                                                                         thickness=1,
              color={238,46,47}));
          connect(abdominal_aorta_C164.port_a,abdominal_aorta_C136.port_b) annotation (Line(points={{-255,
                  -2.5},{-260,-2.5}},                                                                                              thickness=1,
              color={238,46,47}));
          connect(abdominal_aorta_C176.port_a,abdominal_aorta_C164.port_b) annotation (Line(points={{-230,
                  -2.5},{-234,-2.5},{-234,-2},{-235,-2.5}},                                                                        thickness=1,
              color={238,46,47}));
          connect(renal_L166.port_a,abdominal_aorta_C164.port_b) annotation (Line(points={{35,
                  -64.5},{35,-64},{-232,-64},{-232,-2.5},{-235,-2.5}},                                                   thickness=1,
              color={238,46,47}));
          connect(abdominal_aorta_C188.port_a,abdominal_aorta_C176.port_b) annotation (Line(points={{-203,
                  -2.5},{-210,-2.5}},                                                                                              thickness=1,
              color={238,46,47}));
          connect(renal_R178.port_a,abdominal_aorta_C176.port_b) annotation (Line(points={{35,39.5},
                  {-210,39.5},{-210,-2.5}},                                                                              thickness=1,
              color={238,46,47}));
          connect(abdominal_aorta_C192.port_a,abdominal_aorta_C188.port_b) annotation (Line(points={{-178,
                  -2.5},{-183,-2.5}},                                                                                              thickness=1,
              color={238,46,47}));
          connect(common_iliac_R216.port_a,abdominal_aorta_C192.port_b) annotation (Line(points={{-148,
                  -2.5},{-158,-2.5}},                                                                                           thickness=1,
              color={238,46,47}));
          connect(common_iliac_L194.port_a,abdominal_aorta_C192.port_b) annotation (Line(points={{-147,
                  -20.5},{-152,-20.5},{-152,-2},{-158,-2},{-158,-2.5}},                                                         thickness=1,
              color={238,46,47}));
          connect(internal_iliac_T1_R218.port_a,common_iliac_R216.port_b) annotation (Line(points={{35,29.5},
                  {-128,29.5},{-128,-2.5}},                                                                                       thickness=1,
              color={238,46,47}));
          connect(external_iliac_R220.port_a,common_iliac_R216.port_b) annotation (Line(points={{-120,
                  -2.5},{-128,-2.5}},                                                                                          thickness=1,
              color={238,46,47}));
          connect(profundus_T2_R224.port_a,femoral_R222.port_b) annotation (Line(points={{35,19.5},
                  {35,20},{-74,20},{-74,-2.5},{-75,-2.5}},                                                              thickness=1,
              color={238,46,47}));
          connect(femoral_R226.port_a,femoral_R222.port_b) annotation (Line(points={{-67,
                  -2.5},{-75,-2.5}},                                                                               thickness=1,
              color={238,46,47}));
          connect(anterior_tibial_T3_R230.port_a,popliteal_R228.port_b) annotation (Line(points={{35,9.5},
                  {-22,9.5},{-22,-2.5}},                                                                                        thickness=1,
              color={238,46,47}));
          connect(popliteal_R232.port_a,popliteal_R228.port_b) annotation (Line(points={{-16,
                  -2.5},{-22,-2.5}},                                                                                   thickness=1,
              color={238,46,47}));
          connect(internal_iliac_T1_L196.port_a,common_iliac_L194.port_b) annotation (Line(points={{35,
                  -52.5},{35,-52},{-126,-52},{-126,-20.5},{-127,-20.5}},                                                          thickness=1,
              color={238,46,47}));
          connect(external_iliac_L198.port_a,common_iliac_L194.port_b) annotation (Line(points={{-121,
                  -20.5},{-127,-20.5}},                                                                                        thickness=1,
              color={238,46,47}));
          connect(profundus_T2_L202.port_a,femoral_L200.port_b) annotation (Line(points={{35,
                  -40.5},{-74,-40.5},{-74,-20.5}},                                                                      thickness=1,
              color={238,46,47}));
          connect(femoral_L204.port_a,femoral_L200.port_b) annotation (Line(points={{-68,
                  -20.5},{-74,-20.5}},                                                                             thickness=1,
              color={238,46,47}));
          connect(anterior_tibial_T3_L208.port_a,popliteal_L206.port_b) annotation (Line(points={{35,
                  -30.5},{35,-30},{-20,-30},{-20,-20.5},{-21,-20.5}},                                                           thickness=1,
              color={238,46,47}));
          connect(popliteal_L210.port_a,popliteal_L206.port_b) annotation (Line(points={{-16,
                  -20.5},{-21,-20.5}},                                                                                 thickness=1,
              color={238,46,47}));
          connect(subclavian_R30.port_a,subclavian_R28.port_b) annotation (Line(points={{-63,
                  165.5},{-68,165.5}},                                                                                 thickness=1,
              color={238,46,47}));
          connect(vertebral_R272.port_a,subclavian_R28.port_b) annotation (Line(points={{35,
                  145.5},{-68,145.5},{-68,165.5}},                                                                     thickness=1,
              color={238,46,47}));
          connect(ulnar_T2_R36.port_a,brachial_R34.port_b) annotation (Line(points={{10,
                  165.5},{3,165.5}},                                                                               thickness=1,
              color={238,46,47}));
          connect(radial_T1_R44.port_a,brachial_R34.port_b) annotation (Line(points={{35,
                  155.5},{6,155.5},{6,165.5},{3,165.5}},                                                            thickness=1,
              color={238,46,47}));
          connect(ulnar_T2_R42.port_a,ulnar_T2_R36.port_b) annotation (Line(points={{35,
                  165.5},{30,165.5}},                                                                              thickness=1,
              color={238,46,47}));
          connect(subclavian_L78.port_a,subclavian_L66.port_b) annotation (Line(points={{-62,
                  111.5},{-67,111.5}},                                                                                 thickness=1,
              color={238,46,47}));
          connect(vertebral_L2.port_a,subclavian_L66.port_b) annotation (Line(points={{35,89.5},
                  {-64,89.5},{-64,111.5},{-67,111.5}},                                                               thickness=1,
              color={238,46,47}));
          connect(ulnar_T2_L84.port_a,brachial_L82.port_b) annotation (Line(points={{9,111.5},
                  {4,111.5}},                                                                                      thickness=1,
              color={238,46,47}));
          connect(radial_T1_L92.port_a,brachial_L82.port_b) annotation (Line(points={{35,99.5},
                  {4,99.5},{4,111.5}},                                                                              thickness=1,
              color={238,46,47}));
          connect(ulnar_T2_L90.port_a,ulnar_T2_L84.port_b) annotation (Line(points={{35,
                  111.5},{35,112},{28,112},{28,111.5},{29,111.5}},                                                 thickness=1,
              color={238,46,47}));
          connect(internal_carotid_R8_A.port_a,common_carotid_R6_C.port_b) annotation (Line(points={{-17,
                  189.5},{-20,189.5}},                                                                                             thickness=1,
              color={238,46,47}));
          connect(external_carotid_T2_R26.port_a,common_carotid_R6_C.port_b) annotation (Line(points={{35,
                  177.5},{-20,177.5},{-20,189.5}},                                                                                   thickness=1,
              color={238,46,47}));
          connect(internal_carotid_L50_A.port_a,common_carotid_L48_D.port_b) annotation (Line(points={{-15,
                  129.5},{-18,129.5},{-18,121.5}},                                                                                   thickness=1,
              color={238,46,47}));
          connect(external_carotid_T2_L62.port_a,common_carotid_L48_D.port_b) annotation (Line(points={{35,
                  121.5},{-18,121.5}},                                                                                                thickness=1,
              color={238,46,47}));
          connect(ascending_aorta_B.port_a,ascending_aorta_A.port_b) annotation (Line(points={{-238,
                  87.5},{-243,87.5}},                                                                                        thickness=1));
          connect(ascending_aorta_C.port_a,ascending_aorta_B.port_b) annotation (Line(points={{-213,
                  87.5},{-218,87.5}},                                                                                        thickness=1));
          connect(ascending_aorta_D.port_a,ascending_aorta_C.port_b) annotation (Line(points={{-188,
                  87.5},{-193,87.5}},                                                                                        thickness=1));
          connect(aortic_arch_C2.port_a,ascending_aorta_D.port_b) annotation (Line(points={{-163,
                  87.5},{-168,87.5}},                                                                                     thickness=1));
          connect(thoracic_aorta_C96.port_a,aortic_arch_C94.port_b) annotation (Line(points={{-118,
                  67.5},{-111,67.5}},                                                                                       thickness=1,
              color={238,46,47}));
          connect(abdominal_aorta_C114.port_a,thoracic_aorta_C112.port_b) annotation (Line(points={{-307,
                  -2.5},{-307,-2},{-316,-2},{-316,67.5},{-238,67.5}},                                                             thickness=1,
              color={238,46,47}));
          connect(femoral_R222.port_a,external_iliac_R220.port_b) annotation (Line(points={{-95,
                  -2.5},{-100,-2.5}},                                                                                     thickness=1,
              color={238,46,47}));
          connect(popliteal_R228.port_a,femoral_R226.port_b) annotation (Line(points={{-42,
                  -2.5},{-47,-2.5}},                                                                                 thickness=1,
              color={238,46,47}));
          connect(tibiofibular_trunk_R234.port_a,popliteal_R232.port_b) annotation (Line(points={{9,-2.5},
                  {4,-2.5}},                                                                                                    thickness=1,
              color={238,46,47}));
          connect(posterior_tibial_T4_R236.port_a,tibiofibular_trunk_R234.port_b) annotation (Line(points={{35,-2.5},
                  {29,-2.5}},                                                                                                             thickness=1,
              color={238,46,47}));
          connect(femoral_L200.port_a,external_iliac_L198.port_b) annotation (Line(points={{-94,
                  -20.5},{-101,-20.5}},                                                                                   thickness=1,
              color={238,46,47}));
          connect(popliteal_L206.port_a,femoral_L204.port_b) annotation (Line(points={{-41,
                  -20.5},{-48,-20.5}},                                                                               thickness=1,
              color={238,46,47}));
          connect(tibiofibular_trunk_L212.port_a,popliteal_L210.port_b) annotation (Line(points={{9,-20.5},
                  {4,-20.5}},                                                                                                   thickness=1,
              color={238,46,47}));
          connect(posterior_tibial_T4_L214.port_a,tibiofibular_trunk_L212.port_b) annotation (Line(points={{35,
                  -20.5},{29,-20.5}},                                                                                                     thickness=1,
              color={238,46,47}));
          connect(axillary_R32.port_a,subclavian_R30.port_b) annotation (Line(points={{-40,
                  165.5},{-43,165.5}},                                                                               thickness=1,
              color={238,46,47}));
          connect(brachial_R34.port_a,axillary_R32.port_b) annotation (Line(points={{-17,
                  165.5},{-20,165.5}},                                                                             thickness=1,
              color={238,46,47}));
          connect(axillary_L80.port_a,subclavian_L78.port_b) annotation (Line(points={{-39,
                  111.5},{-42,111.5}},                                                                               thickness=1,
              color={238,46,47}));
          connect(common_carotid_R6_B.port_a,common_carotid_R6_A.port_b) annotation (Line(points={{-63,
                  189.5},{-68,189.5}},                                                                                           thickness=1,
              color={238,46,47}));
          connect(common_carotid_R6_C.port_a,common_carotid_R6_B.port_b) annotation (Line(points={{-40,
                  189.5},{-43,189.5}},                                                                                           thickness=1,
              color={238,46,47}));
          connect(internal_carotid_R8_B.port_a,internal_carotid_R8_A.port_b) annotation (Line(points={{10,
                  189.5},{3,189.5}},                                                                                                 thickness=1,
              color={238,46,47}));
          connect(internal_carotid_R8_C.port_a,internal_carotid_R8_B.port_b) annotation (Line(points={{35,
                  189.5},{30,189.5}},                                                                                                thickness=1,
              color={238,46,47}));
          connect(common_carotid_L48_B.port_a,common_carotid_L48_A.port_b) annotation (Line(points={{-86,
                  121.5},{-91,121.5}},                                                                                             thickness=1,
              color={238,46,47}));
          connect(common_carotid_L48_C.port_a,common_carotid_L48_B.port_b) annotation (Line(points={{-63,
                  121.5},{-66,121.5}},                                                                                             thickness=1,
              color={238,46,47}));
          connect(common_carotid_L48_D.port_a,common_carotid_L48_C.port_b) annotation (Line(points={{-38,
                  121.5},{-43,121.5}},                                                                                             thickness=1,
              color={238,46,47}));
          connect(internal_carotid_L50_B.port_a,internal_carotid_L50_A.port_b) annotation (Line(points={{10,
                  129.5},{5,129.5}},                                                                                                   thickness=1,
              color={238,46,47}));
          connect(internal_carotid_L50_C.port_a,internal_carotid_L50_B.port_b) annotation (Line(points={{35,
                  129.5},{30,129.5}},                                                                                                  thickness=1,
              color={238,46,47}));
          connect(superior_vena_cava_C88.port_b,superior_vena_cava_C2.port_a) annotation (Line(points={{292,
                  165.5},{297,165.5}},                                                                                                thickness=1,
              color={28,108,200}));
          connect(brachiocephalic_vein_R90.port_b,superior_vena_cava_C88.port_a) annotation (Line(points={{267,
                  165.5},{272,165.5}},                                                                                                   thickness=1,
              color={28,108,200}));
          connect(brachiocephalic_vein_L124.port_b,superior_vena_cava_C88.port_a) annotation (Line(points={{268,
                  111.5},{268,112},{272,112},{272,165.5}},                                                                                thickness=1,
              color={28,108,200}));
          connect(vertebral_vein_R92.port_b,brachiocephalic_vein_R90.port_a) annotation (Line(points={{81,
                  145.5},{247,145.5},{247,165.5}},                                                                                   thickness=1,
              color={28,108,200}));
          connect(brachiocephalic_vein_R94.port_b,brachiocephalic_vein_R90.port_a) annotation (Line(points={{242,
                  165.5},{247,165.5}},                                                                                                     thickness=1,
              color={28,108,200}));
          connect(subclavian_vein_R96.port_b,brachiocephalic_vein_R94.port_a) annotation (Line(points={{217,
                  165.5},{222,165.5}},                                                                                                thickness=1,
              color={28,108,200}));
          connect(internal_jugular_vein_R122.port_b,brachiocephalic_vein_R94.port_a) annotation (Line(points={{81,
                  189.5},{222,189.5},{222,165.5}},                                                                                           thickness=1,
              color={28,108,200}));
          connect(external_jugular_vein_R98.port_b,subclavian_vein_R96.port_a) annotation (Line(points={{81,
                  177.5},{196,177.5},{196,165.5},{197,165.5}},                                                                         thickness=1,
              color={28,108,200}));
          connect(subclavian_vein_R100.port_b,subclavian_vein_R96.port_a) annotation (Line(points={{188,
                  165.5},{197,165.5}},                                                                                            thickness=1,
              color={28,108,200}));
          connect(brachial_vein_R104.port_b,axillary_vein_R102.port_a) annotation (Line(points={{134,
                  165.5},{141,165.5}},                                                                                         thickness=1,
              color={28,108,200}));
          connect(brachial_vein_R114.port_b,axillary_vein_R102.port_a) annotation (Line(points={{133,
                  155.5},{134,155.5},{134,156},{136,156},{136,165.5},{141,165.5}},                                             thickness=1,
              color={28,108,200}));
          connect(ulnar_vein_T7_R110.port_b,brachial_vein_R108.port_a) annotation (Line(points={{81,
                  165.5},{88,165.5}},                                                                                          thickness=1,
              color={28,108,200}));
          connect(vertebral_vein_L126.port_b,brachiocephalic_vein_L124.port_a) annotation (Line(points={{80,89.5},
                  {80,90},{244,90},{244,111.5},{248,111.5}},                                                                           thickness=1,
              color={28,108,200}));
          connect(brachiocephalic_vein_L128.port_b,brachiocephalic_vein_L124.port_a) annotation (Line(points={{239,
                  111.5},{248,111.5}},                                                                                                       thickness=1,
              color={28,108,200}));
          connect(subclavian_vein_L130.port_b,brachiocephalic_vein_L128.port_a) annotation (Line(points={{212,
                  111.5},{219,111.5}},                                                                                                  thickness=1,
              color={28,108,200}));
          connect(internal_jugular_vein_L156.port_b,brachiocephalic_vein_L128.port_a) annotation (Line(points={{81,
                  129.5},{216,129.5},{216,111.5},{219,111.5}},                                                                                thickness=1,
              color={28,108,200}));
          connect(external_jugular_vein_L132.port_b,subclavian_vein_L130.port_a) annotation (Line(points={{81,
                  121.5},{192,121.5},{192,111.5}},                                                                                       thickness=1,
              color={28,108,200}));
          connect(subclavian_vein_L134.port_b,subclavian_vein_L130.port_a) annotation (Line(points={{187,
                  111.5},{192,111.5}},                                                                                             thickness=1,
              color={28,108,200}));
          connect(brachial_vein_L138.port_b,axillary_vein_L136.port_a) annotation (Line(points={{135,
                  111.5},{142,111.5}},                                                                                         thickness=1,
              color={28,108,200}));
          connect(brachial_vein_L148.port_b,axillary_vein_L136.port_a) annotation (Line(points={{134,
                  99.5},{134,100},{138,100},{138,111.5},{142,111.5}},                                                          thickness=1,
              color={28,108,200}));
          connect(ulnar_vein_T7_L144.port_b,brachial_vein_L142.port_a) annotation (Line(points={{81,
                  111.5},{88,111.5}},                                                                                          thickness=1,
              color={28,108,200}));
          connect(hepatic_vein_T1_C10.port_b,inferior_vena_cava_C8.port_a) annotation (Line(points={{80,59.5},
                  {406,59.5},{406,60},{408,60},{408,-2.5},{409,-2.5}},                                                             thickness=1,
              color={28,108,200}));
          connect(inferior_vena_cava_C12.port_b,inferior_vena_cava_C8.port_a) annotation (Line(points={{403,
                  -2.5},{403,-2},{409,-2},{409,-2.5}},                                                                                thickness=1,
              color={28,108,200}));
          connect(renal_vein_T1_R18.port_b,inferior_vena_cava_C16.port_a) annotation (Line(points={{80,39.5},
                  {360,39.5},{360,-2.5}},                                                                                         thickness=1,
              color={28,108,200}));
          connect(inferior_vena_cava_C20.port_b,inferior_vena_cava_C16.port_a) annotation (Line(points={{356,
                  -2.5},{360,-2.5}},                                                                                                   thickness=1,
              color={28,108,200}));
          connect(renal_vein_T1_L22.port_b,inferior_vena_cava_C20.port_a) annotation (Line(points={{80,
                  -64.5},{336,-64.5},{336,-2.5}},                                                                                 thickness=1,
              color={28,108,200}));
          connect(inferior_vena_cava_C24.port_b,inferior_vena_cava_C20.port_a) annotation (Line(points={{332,
                  -2.5},{336,-2.5}},                                                                                                   thickness=1,
              color={28,108,200}));
          connect(common_iliac_vein_R26.port_b,inferior_vena_cava_C24.port_a) annotation (Line(points={{308,
                  -2.5},{312,-2.5}},                                                                                                  thickness=1,
              color={28,108,200}));
          connect(common_iliac_vein_L56.port_b,inferior_vena_cava_C24.port_a) annotation (Line(points={{307,
                  -20.5},{312,-20.5},{312,-2.5}},                                                                                     thickness=1,
              color={28,108,200}));
          connect(internal_iliac_vein_T1_R30.port_b,external_iliac_vein_R28.port_a) annotation (Line(points={{80,29.5},
                  {80,30},{260,30},{260,-2.5},{263,-2.5}},                                                                                  thickness=1,
              color={28,108,200}));
          connect(external_iliac_vein_R32.port_b,external_iliac_vein_R28.port_a) annotation (Line(points={{257,
                  -2.5},{263,-2.5}},                                                                                                     thickness=1,
              color={28,108,200}));
          connect(femoral_vein_R38.port_b,femoral_vein_R34.port_a) annotation (Line(points={{209,
                  -2.5},{212,-2.5}},                                                                                       thickness=1,
              color={28,108,200}));
          connect(profunda_femoris_vein_T2_R40.port_b,femoral_vein_R38.port_a) annotation (Line(points={{80,19.5},
                  {188,19.5},{188,-2.5},{189,-2.5}},                                                                                   thickness=1,
              color={28,108,200}));
          connect(femoral_vein_R42.port_b,femoral_vein_R38.port_a) annotation (Line(points={{183,
                  -2.5},{189,-2.5}},                                                                                       thickness=1,
              color={28,108,200}));
          connect(anterior_tibial_vein_T4_R50.port_b,popliteal_vein_R48.port_a) annotation (Line(points={{80,9.5},
                  {112,9.5},{112,-2.5},{113,-2.5}},                                                                                     thickness=1,
              color={28,108,200}));
          connect(popliteal_vein_R52.port_b,popliteal_vein_R48.port_a) annotation (Line(points={{107,
                  -2.5},{113,-2.5}},                                                                                           thickness=1,
              color={28,108,200}));
          connect(internal_iliac_vein_T1_L60.port_b,external_iliac_vein_L58.port_a) annotation (Line(points={{80,
                  -52.5},{262,-52.5},{262,-20.5},{263,-20.5}},                                                                              thickness=1,
              color={28,108,200}));
          connect(external_iliac_vein_L62.port_b,external_iliac_vein_L58.port_a) annotation (Line(points={{257,
                  -20.5},{263,-20.5}},                                                                                                   thickness=1,
              color={28,108,200}));
          connect(femoral_vein_L68.port_b,femoral_vein_L64.port_a) annotation (Line(points={{209,
                  -20.5},{212,-20.5}},                                                                                     thickness=1,
              color={28,108,200}));
          connect(profunda_femoris_vein_T2_L70.port_b,femoral_vein_L68.port_a) annotation (Line(points={{80,
                  -40.5},{188,-40.5},{188,-20.5},{189,-20.5}},                                                                         thickness=1,
              color={28,108,200}));
          connect(femoral_vein_L72.port_b,femoral_vein_L68.port_a) annotation (Line(points={{183,
                  -20.5},{189,-20.5}},                                                                                     thickness=1,
              color={28,108,200}));
          connect(anterior_tibial_vein_T4_L80.port_b,popliteal_vein_L78.port_a) annotation (Line(points={{80,
                  -30.5},{112,-30.5},{112,-20.5},{113,-20.5}},                                                                          thickness=1,
              color={28,108,200}));
          connect(popliteal_vein_L82.port_b,popliteal_vein_L78.port_a) annotation (Line(points={{107,
                  -20.5},{113,-20.5}},                                                                                         thickness=1,
              color={28,108,200}));
          connect(brachial_vein_R118.port_b,brachial_vein_R114.port_a) annotation (Line(points={{108,
                  155.5},{113,155.5}},                                                                                         thickness=1,
              color={28,108,200}));
          connect(brachial_vein_R108.port_b,brachial_vein_R104.port_a) annotation (Line(points={{108,
                  165.5},{114,165.5}},                                                                                         thickness=1,
              color={28,108,200}));
          connect(brachial_vein_L142.port_b,brachial_vein_L138.port_a) annotation (Line(points={{108,
                  111.5},{115,111.5}},                                                                                         thickness=1,
              color={28,108,200}));
          connect(brachial_vein_L152.port_b,brachial_vein_L148.port_a) annotation (Line(points={{108,
                  99.5},{114,99.5}},                                                                                           thickness=1,
              color={28,108,200}));
          connect(inferior_vena_cava_C16.port_b,inferior_vena_cava_C12.port_a) annotation (Line(points={{380,
                  -2.5},{383,-2.5}},                                                                                                   thickness=1,
              color={28,108,200}));
          connect(axillary_vein_R102.port_b,subclavian_vein_R100.port_a) annotation (Line(points={{161,
                  165.5},{168,165.5}},                                                                                           thickness=1,
              color={28,108,200}));
          connect(radial_vein_T3_R120.port_b,brachial_vein_R118.port_a) annotation (Line(points={{81,
                  155.5},{88,155.5}},                                                                                           thickness=1,
              color={28,108,200}));
          connect(axillary_vein_L136.port_b,subclavian_vein_L134.port_a) annotation (Line(points={{162,
                  111.5},{167,111.5}},                                                                                           thickness=1,
              color={28,108,200}));
          connect(radial_vein_T3_L154.port_b,brachial_vein_L152.port_a) annotation (Line(points={{81,99.5},
                  {88,99.5}},                                                                                                   thickness=1,
              color={28,108,200}));
          connect(external_iliac_vein_R28.port_b,common_iliac_vein_R26.port_a) annotation (Line(points={{283,
                  -2.5},{283,-2},{288,-2},{288,-2.5}},                                                                                 thickness=1,
              color={28,108,200}));
          connect(femoral_vein_R34.port_b,external_iliac_vein_R32.port_a) annotation (Line(points={{232,
                  -2.5},{237,-2.5}},                                                                                              thickness=1,
              color={28,108,200}));
          connect(popliteal_vein_R48.port_b,femoral_vein_R46.port_a) annotation (Line(points={{133,
                  -2.5},{133,-2},{138,-2},{138,-2.5}},                                                                       thickness=1,
              color={28,108,200}));
          connect(posterior_tibial_vein_T6_R54.port_b,popliteal_vein_R52.port_a) annotation (Line(points={{80,-2.5},
                  {87,-2.5}},                                                                                                            thickness=1,
              color={28,108,200}));
          connect(external_iliac_vein_L58.port_b,common_iliac_vein_L56.port_a) annotation (Line(points={{283,
                  -20.5},{287,-20.5}},                                                                                                 thickness=1,
              color={28,108,200}));
          connect(femoral_vein_L64.port_b,external_iliac_vein_L62.port_a) annotation (Line(points={{232,
                  -20.5},{237,-20.5}},                                                                                            thickness=1,
              color={28,108,200}));
          connect(popliteal_vein_L78.port_b,femoral_vein_L76.port_a) annotation (Line(points={{133,
                  -20.5},{138,-20.5}},                                                                                       thickness=1,
              color={28,108,200}));
          connect(posterior_tibial_vein_T6_L84.port_b,popliteal_vein_L82.port_a) annotation (Line(points={{80,
                  -20.5},{87,-20.5}},                                                                                                    thickness=1,
              color={28,108,200}));
          connect(femoral_vein_R46.port_b,femoral_vein_R42.port_a) annotation (Line(points={{158,
                  -2.5},{163,-2.5}},                                                                                       thickness=1,
              color={28,108,200}));
          connect(femoral_vein_L76.port_b,femoral_vein_L72.port_a) annotation (Line(points={{158,
                  -20.5},{163,-20.5}},                                                                                     thickness=1,
              color={28,108,200}));
          connect(thoracic_aorta_C96.port_b, thoracic_aorta_C100.port_a) annotation (Line(
              points={{-138,67.5},{-143,67.5}},
              color={238,46,47},
              thickness=1));
          connect(thoracic_aorta_C104.port_a, thoracic_aorta_C100.port_b) annotation (Line(
              points={{-168,67.5},{-163,67.5}},
              color={238,46,47},
              thickness=1));
          connect(mesenteric_artery.port_a, abdominal_aorta_C136.port_b) annotation (
              Line(
              points={{9,49.5},{-258,49.5},{-258,-2.5},{-260,-2.5}},
              color={238,46,47},
              thickness=1));
          connect(splanchnic_tissue.port_a, mesenteric_artery.port_b)
            annotation (Line(
              points={{35,49.5},{29,49.5}},
              color={238,46,47},
              thickness=1));
          connect(splanchnic_tissue.port_b, splanchnic_vein.port_a) annotation (
             Line(
              points={{55,49.5},{60,49.5}},
              color={28,108,200},
              thickness=1));
          connect(splanchnic_vein.port_b, inferior_vena_cava_C12.port_a)
            annotation (Line(
              points={{80,49.5},{196,49.5},{196,50},{383,50},{383,-2.5}},
              color={28,108,200},
              thickness=1));
          connect(cardiac_tissue.port_b, coronary_veins.port_a) annotation (Line(
              points={{56,76},{60,76}},
              color={28,108,200},
              thickness=1));
          connect(cardiac_tissue.port_a, coronary_arteries.port_b) annotation (Line(
              points={{36,76},{30,76}},
              color={238,46,47},
              thickness=1));
          connect(ascending_aorta_B.port_b, coronary_arteries.port_a) annotation (Line(
              points={{-218,87.5},{-218,76},{10,76}},
              color={238,46,47},
              thickness=1));
          connect(coronary_veins.port_b, inferior_vena_cava_C8.port_b) annotation (Line(
              points={{80,76},{429,76},{429,-2.5}},
              color={28,108,200},
              thickness=1));
          connect(axillary_L80.port_b, brachial_L82_HeartLevel.port_a) annotation (Line(
              points={{-19,111.5},{-19,106.75},{-26,106.75},{-26,99.5}},
              color={0,0,0},
              thickness=1));
          connect(brachial_L82.port_a, brachial_L82_HeartLevel.port_b) annotation (Line(
              points={{-16,111.5},{-16,106},{-6,106},{-6,99.5}},
              color={0,0,0},
              thickness=1));

          connect(aortic_arch_C46.distentionFraction, baroreflex_system.aortic_distention)
            annotation (Line(points={{-127,92.5},{-127,132},{-260,132},{-260,
                  145.333},{-238.667,145.333}},
                             color={0,0,127}));
          connect(internal_carotid_R8_A.distentionFraction, baroreflex_system.carotid_distention)
            annotation (Line(points={{-7,194.5},{-260,194.5},{-260,158.667},{
                  -238.667,158.667}},
                color={0,0,127}));
          connect(port_a, leveledPressureFlowConverter.port_a) annotation (Line(
              points={{-320,80},{-300,80}},
              color={0,0,0},
              thickness=1));
          connect(leveledPressureFlowConverter.leveledPort_b, ascending_aorta_A.port_a)
            annotation (Line(
              points={{-280,80},{-272,80},{-272,87.5},{-263,87.5}},
              color={162,29,33},
              thickness=0.5));
          connect(leveledPressureFlowConverter1.leveledPort_b,
            superior_vena_cava_C2.port_b) annotation (Line(
              points={{500,80},{500,165.5},{317,165.5}},
              color={162,29,33},
              thickness=0.5));
          connect(inferior_vena_cava_C8.port_b, leveledPressureFlowConverter1.leveledPort_b)
            annotation (Line(
              points={{429,-2.5},{500,-2.5},{500,80}},
              color={162,29,33},
              thickness=0.5));
          connect(leveledPressureFlowConverter1.port_a, port_b) annotation (Line(
              points={{480,80},{460,80}},
              color={0,0,0},
              thickness=1));
        end SystemicAV_base;

        model SystemicAV_baseMerged
          "Base systemic tree based on ADAN VenousRed, with merged venous segments reducing the venous segments count by 20%"
          extends partialSystemicAV(                                 UseBaroreflexOutput = true);
          parameter Physiolibrary.Types.Height brachial_division=0.182   "The height at which the left brachial artery is divided to have pressure measure at heart level";

          Parametrization.Parameters_Systemic_tunable systemicParameters(k_E=
                settings.syst_art_k_E, height_actual=settings.height)
            annotation (Placement(transformation(extent={{0,-100},{20,-80}})));

          parameter Boolean useCapillaryPressureOutputs = false;

          replaceable
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Ascending_aorta
            ascending_aorta_A constrainedby
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Auxiliary.PartialSystemicVessel(
            l=systemicParameters.l_ascending_aorta_A,
            E=systemicParameters.E_ascending_aorta_A,
            r=systemicParameters.r_ascending_aorta_A) annotation (Placement(
                transformation(extent={{-263,85},{-243,90}})),
              __Dymola_choicesAllMatching=true);

          Systemic_artery_thoracic ascending_aorta_B(
            l=systemicParameters.l_ascending_aorta_B,
            E=systemicParameters.E_ascending_aorta_B,
            r=systemicParameters.r_ascending_aorta_B)
            annotation (Placement(transformation(extent={{-238,85},{-218,90}})));

          Systemic_artery_thoracic ascending_aorta_C(
            l=systemicParameters.l_ascending_aorta_C,
            E=systemicParameters.E_ascending_aorta_C,
            r=systemicParameters.r_ascending_aorta_C)
            annotation (Placement(transformation(extent={{-213,85},{-193,90}})));

          Systemic_artery_thoracic ascending_aorta_D(
            l=systemicParameters.l_ascending_aorta_D,
            E=systemicParameters.E_ascending_aorta_D,
            r=systemicParameters.r_ascending_aorta_D)
            annotation (Placement(transformation(extent={{-188,85},{-168,90}})));

          Systemic_artery_thoracic aortic_arch_C2(
            l=systemicParameters.l_aortic_arch_C2,
            E=systemicParameters.E_aortic_arch_C2,
            r=systemicParameters.r_aortic_arch_C2)
            annotation (Placement(transformation(extent={{-163,85},{-143,90}})));

          Systemic_artery_thoracic brachiocephalic_trunk_C4(
            l=systemicParameters.l_brachiocephalic_trunk_C4,
            E=systemicParameters.E_brachiocephalic_trunk_C4,
            r=systemicParameters.r_brachiocephalic_trunk_C4)
            annotation (Placement(transformation(extent={{-132,163},{-112,168}})));

          Systemic_artery_thoracic aortic_arch_C46(
            l=systemicParameters.l_aortic_arch_C46,
            E=systemicParameters.E_aortic_arch_C46,
            r=systemicParameters.r_aortic_arch_C46,
            UseDistentionOutput=true)
            annotation (Placement(transformation(extent={{-137,85},{-117,90}})));

          Systemic_artery_thoracic aortic_arch_C64(
            l=systemicParameters.l_aortic_arch_C64,
            E=systemicParameters.E_aortic_arch_C64,
            r=systemicParameters.r_aortic_arch_C64)
            annotation (Placement(transformation(extent={{-112,85},{-92,90}})));

          Systemic_artery_thoracic aortic_arch_C94(
            l=systemicParameters.l_aortic_arch_C94,
            E=systemicParameters.E_aortic_arch_C94,
            r=systemicParameters.r_aortic_arch_C94)
            annotation (Placement(transformation(extent={{-91,65},{-111,70}})));

          Systemic_artery_thoracic thoracic_aorta_C96(
            l=systemicParameters.l_thoracic_aorta_C96,
            E=systemicParameters.E_thoracic_aorta_C96,
            r=systemicParameters.r_thoracic_aorta_C96)
            annotation (Placement(transformation(extent={{-118,65},{-138,70}})));

          Systemic_artery_thoracic thoracic_aorta_C100(
            l=systemicParameters.l_thoracic_aorta_C100,
            E=systemicParameters.E_thoracic_aorta_C100,
            r=systemicParameters.r_thoracic_aorta_C100)
            annotation (Placement(transformation(extent={{-143,65},{-163,70}})));

          Systemic_artery_thoracic thoracic_aorta_C104(
            l=systemicParameters.l_thoracic_aorta_C104,
            E=systemicParameters.E_thoracic_aorta_C104,
            r=systemicParameters.r_thoracic_aorta_C104)
            annotation (Placement(transformation(extent={{-168,65},{-188,70}})));

          Systemic_artery_thoracic thoracic_aorta_C108(
            l=systemicParameters.l_thoracic_aorta_C108,
            E=systemicParameters.E_thoracic_aorta_C108,
            r=systemicParameters.r_thoracic_aorta_C108)
            annotation (Placement(transformation(extent={{-193,65},{-213,70}})));

          Systemic_artery_thoracic thoracic_aorta_C112(
            l=systemicParameters.l_thoracic_aorta_C112,
            E=systemicParameters.E_thoracic_aorta_C112,
            r=systemicParameters.r_thoracic_aorta_C112)
            annotation (Placement(transformation(extent={{-218,65},{-238,70}})));

          Systemic_artery abdominal_aorta_C114(
            l=systemicParameters.l_abdominal_aorta_C114,
            E=systemicParameters.E_abdominal_aorta_C114,
            r=systemicParameters.r_abdominal_aorta_C114)
            annotation (Placement(transformation(extent={{-307,-5},{-287,0}})));
          Systemic_artery abdominal_aorta_C136(
            l=systemicParameters.l_abdominal_aorta_C136,
            E=systemicParameters.E_abdominal_aorta_C136,
            r=systemicParameters.r_abdominal_aorta_C136)
            annotation (Placement(transformation(extent={{-280,-5},{-260,0}})));
          Systemic_artery abdominal_aorta_C164(
            l=systemicParameters.l_abdominal_aorta_C164,
            E=systemicParameters.E_abdominal_aorta_C164,
            r=systemicParameters.r_abdominal_aorta_C164)
            annotation (Placement(transformation(extent={{-255,-5},{-235,0}})));
          Systemic_artery abdominal_aorta_C176(
            l=systemicParameters.l_abdominal_aorta_C176,
            E=systemicParameters.E_abdominal_aorta_C176,
            r=systemicParameters.r_abdominal_aorta_C176)
            annotation (Placement(transformation(extent={{-230,-5},{-210,0}})));
          Systemic_artery abdominal_aorta_C188(
            l=systemicParameters.l_abdominal_aorta_C188,
            E=systemicParameters.E_abdominal_aorta_C188,
            r=systemicParameters.r_abdominal_aorta_C188)
            annotation (Placement(transformation(extent={{-203,-5},{-183,0}})));
          Systemic_artery abdominal_aorta_C192(
            l=systemicParameters.l_abdominal_aorta_C192,
            E=systemicParameters.E_abdominal_aorta_C192,
            r=systemicParameters.r_abdominal_aorta_C192)
            annotation (Placement(transformation(extent={{-178,-5},{-158,0}})));
          Systemic_tissue celiac_trunk_C116(
              Ra = tissueParameters.Ra_celiac_trunk_C116,
              Rv = tissueParameters.Rv_celiac_trunk_C116,
              I = tissueParameters.I_celiac_trunk_C116,
              C = tissueParameters.C_celiac_trunk_C116,
              zpv =  tissueParameters.Zpv_celiac_trunk_C116,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,57},{55,62}})));
          Systemic_tissue renal_L166(
              Ra = tissueParameters.Ra_renal_L166,
              Rv = tissueParameters.Rv_renal_L166,
              I = tissueParameters.I_renal_L166,
              C = tissueParameters.C_renal_L166,
              zpv =  tissueParameters.Zpv_renal_L166,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,-67},{55,-62}})));
          Systemic_tissue renal_R178(
              Ra = tissueParameters.Ra_renal_R178,
              Rv = tissueParameters.Rv_renal_R178,
              I = tissueParameters.I_renal_R178,
              C = tissueParameters.C_renal_R178,
              zpv =  tissueParameters.Zpv_renal_R178,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,37},{55,42}})));
          Systemic_artery common_iliac_R216(
            l=systemicParameters.l_common_iliac_R216,
            E=systemicParameters.E_common_iliac_R216,
            r=systemicParameters.r_common_iliac_R216)
            annotation (Placement(transformation(extent={{-148,-5},{-128,0}})));
          Systemic_tissue internal_iliac_T1_R218(
              Ra = tissueParameters.Ra_internal_iliac_T1_R218,
              Rv = tissueParameters.Rv_internal_iliac_T1_R218,
              I = tissueParameters.I_internal_iliac_T1_R218,
              C = tissueParameters.C_internal_iliac_T1_R218,
              zpv =  tissueParameters.Zpv_internal_iliac_T1_R218,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,27},{55,32}})));
          Systemic_artery external_iliac_R220(
            l=systemicParameters.l_external_iliac_R220,
            E=systemicParameters.E_external_iliac_R220,
            r=systemicParameters.r_external_iliac_R220)
            annotation (Placement(transformation(extent={{-120,-5},{-100,0}})));
          Systemic_artery femoral_R222(
            l=systemicParameters.l_femoral_R222,
            E=systemicParameters.E_femoral_R222,
            r=systemicParameters.r_femoral_R222)
            annotation (Placement(transformation(extent={{-95,-5},{-75,0}})));
          Systemic_tissue profundus_T2_R224(
              Ra = tissueParameters.Ra_profundus_T2_R224,
              Rv = tissueParameters.Rv_profundus_T2_R224,
              I = tissueParameters.I_profundus_T2_R224,
              C = tissueParameters.C_profundus_T2_R224,
              zpv =  tissueParameters.Zpv_profundus_T2_R224,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,17},{55,22}})));
          Systemic_artery femoral_R226(
            l=systemicParameters.l_femoral_R226,
            E=systemicParameters.E_femoral_R226,
            r=systemicParameters.r_femoral_R226)
            annotation (Placement(transformation(extent={{-67,-5},{-47,0}})));
          Systemic_artery popliteal_R228(
            l=systemicParameters.l_popliteal_R228,
            E=systemicParameters.E_popliteal_R228,
            r=systemicParameters.r_popliteal_R228)
            annotation (Placement(transformation(extent={{-42,-5},{-22,0}})));
          Systemic_tissue anterior_tibial_T3_R230(
              Ra = tissueParameters.Ra_anterior_tibial_T3_R230,
              Rv = tissueParameters.Rv_anterior_tibial_T3_R230,
              I = tissueParameters.I_anterior_tibial_T3_R230,
              C = tissueParameters.C_anterior_tibial_T3_R230,
              zpv =  tissueParameters.Zpv_anterior_tibial_T3_R230,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,7},{55,12}})));
          Systemic_artery popliteal_R232(
            l=systemicParameters.l_popliteal_R232,
            E=systemicParameters.E_popliteal_R232,
            r=systemicParameters.r_popliteal_R232)
            annotation (Placement(transformation(extent={{-16,-5},{4,0}})));
          Systemic_artery tibiofibular_trunk_R234(
            l=systemicParameters.l_tibiofibular_trunk_R234,
            E=systemicParameters.E_tibiofibular_trunk_R234,
            r=systemicParameters.r_tibiofibular_trunk_R234)
            annotation (Placement(transformation(extent={{9,-5},{29,0}})));
          Systemic_tissue posterior_tibial_T4_R236(
              Ra = tissueParameters.Ra_posterior_tibial_T4_R236,
              Rv = tissueParameters.Rv_posterior_tibial_T4_R236,
              I = tissueParameters.I_posterior_tibial_T4_R236,
              C = tissueParameters.C_posterior_tibial_T4_R236,
              zpv =  tissueParameters.Zpv_posterior_tibial_T4_R236,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,-5},{55,0}})));
          Systemic_artery common_iliac_L194(
            l=systemicParameters.l_common_iliac_L194,
            E=systemicParameters.E_common_iliac_L194,
            r=systemicParameters.r_common_iliac_L194)
            annotation (Placement(transformation(extent={{-147,-23},{-127,-18}})));
          Systemic_tissue internal_iliac_T1_L196(
              Ra = tissueParameters.Ra_internal_iliac_T1_L196,
              Rv = tissueParameters.Rv_internal_iliac_T1_L196,
              I = tissueParameters.I_internal_iliac_T1_L196,
              C = tissueParameters.C_internal_iliac_T1_L196,
              zpv =  tissueParameters.Zpv_internal_iliac_T1_L196,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,-55},{55,-50}})));
          Systemic_artery external_iliac_L198(
            l=systemicParameters.l_external_iliac_L198,
            E=systemicParameters.E_external_iliac_L198,
            r=systemicParameters.r_external_iliac_L198)
            annotation (Placement(transformation(extent={{-121,-23},{-101,-18}})));
          Systemic_artery femoral_L200(
            l=systemicParameters.l_femoral_L200,
            E=systemicParameters.E_femoral_L200,
            r=systemicParameters.r_femoral_L200)
            annotation (Placement(transformation(extent={{-94,-23},{-74,-18}})));
          Systemic_tissue profundus_T2_L202(
              Ra = tissueParameters.Ra_profundus_T2_L202,
              Rv = tissueParameters.Rv_profundus_T2_L202,
              I = tissueParameters.I_profundus_T2_L202,
              C = tissueParameters.C_profundus_T2_L202,
              zpv =  tissueParameters.Zpv_profundus_T2_L202,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,-43},{55,-38}})));
          Systemic_artery femoral_L204(
            l=systemicParameters.l_femoral_L204,
            E=systemicParameters.E_femoral_L204,
            r=systemicParameters.r_femoral_L204)
            annotation (Placement(transformation(extent={{-68,-23},{-48,-18}})));
          Systemic_artery popliteal_L206(
            l=systemicParameters.l_popliteal_L206,
            E=systemicParameters.E_popliteal_L206,
            r=systemicParameters.r_popliteal_L206)
            annotation (Placement(transformation(extent={{-41,-23},{-21,-18}})));
          Systemic_tissue anterior_tibial_T3_L208(
              Ra = tissueParameters.Ra_anterior_tibial_T3_L208,
              Rv = tissueParameters.Rv_anterior_tibial_T3_L208,
              I = tissueParameters.I_anterior_tibial_T3_L208,
              C = tissueParameters.C_anterior_tibial_T3_L208,
              zpv =  tissueParameters.Zpv_anterior_tibial_T3_L208,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,-33},{55,-28}})));
          Systemic_artery popliteal_L210(
            l=systemicParameters.l_popliteal_L210,
            E=systemicParameters.E_popliteal_L210,
            r=systemicParameters.r_popliteal_L210)
            annotation (Placement(transformation(extent={{-16,-23},{4,-18}})));
          Systemic_artery tibiofibular_trunk_L212(
            l=systemicParameters.l_tibiofibular_trunk_L212,
            E=systemicParameters.E_tibiofibular_trunk_L212,
            r=systemicParameters.r_tibiofibular_trunk_L212)
            annotation (Placement(transformation(extent={{9,-23},{29,-18}})));
          Systemic_tissue posterior_tibial_T4_L214(
              Ra = tissueParameters.Ra_posterior_tibial_T4_L214,
              Rv = tissueParameters.Rv_posterior_tibial_T4_L214,
              I = tissueParameters.I_posterior_tibial_T4_L214,
              C = tissueParameters.C_posterior_tibial_T4_L214,
              zpv =  tissueParameters.Zpv_posterior_tibial_T4_L214,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,-23},{55,-18}})));
          Systemic_artery subclavian_R28(
            l=systemicParameters.l_subclavian_R28,
            E=systemicParameters.E_subclavian_R28,
            r=systemicParameters.r_subclavian_R28)
            annotation (Placement(transformation(extent={{-88,163},{-68,168}})));
          Systemic_artery subclavian_R30(
            l=systemicParameters.l_subclavian_R30,
            E=systemicParameters.E_subclavian_R30,
            r=systemicParameters.r_subclavian_R30)
            annotation (Placement(transformation(extent={{-63,163},{-43,168}})));
          Systemic_artery axillary_R32(
            l=systemicParameters.l_axillary_R32,
            E=systemicParameters.E_axillary_R32,
            r=systemicParameters.r_axillary_R32)
            annotation (Placement(transformation(extent={{-40,163},{-20,168}})));
          Systemic_artery brachial_R34(
            l=systemicParameters.l_brachial_R34,
            E=systemicParameters.E_brachial_R34,
            r=systemicParameters.r_brachial_R34)
            annotation (Placement(transformation(extent={{-17,163},{3,168}})));
          Systemic_artery ulnar_T2_R36(
            l=systemicParameters.l_ulnar_T2_R36,
            E=systemicParameters.E_ulnar_T2_R36,
            r=systemicParameters.r_ulnar_T2_R36)
            annotation (Placement(transformation(extent={{10,163},{30,168}})));
          Systemic_tissue ulnar_T2_R42(
              Ra = tissueParameters.Ra_ulnar_T2_R42,
              Rv = tissueParameters.Rv_ulnar_T2_R42,
              I = tissueParameters.I_ulnar_T2_R42,
              C = tissueParameters.C_ulnar_T2_R42,
              zpv =  tissueParameters.Zpv_ulnar_T2_R42,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,163},{55,168}})));
          Systemic_tissue radial_T1_R44(
              Ra = tissueParameters.Ra_radial_T1_R44,
              Rv = tissueParameters.Rv_radial_T1_R44,
              I = tissueParameters.I_radial_T1_R44,
              C = tissueParameters.C_radial_T1_R44,
              zpv =  tissueParameters.Zpv_radial_T1_R44,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,153},{55,158}})));
          Systemic_artery subclavian_L66(
            l=systemicParameters.l_subclavian_L66,
            E=systemicParameters.E_subclavian_L66,
            r=systemicParameters.r_subclavian_L66)
            annotation (Placement(transformation(extent={{-87,109},{-67,114}})));
          Systemic_artery subclavian_L78(
            l=systemicParameters.l_subclavian_L78,
            E=systemicParameters.E_subclavian_L78,
            r=systemicParameters.r_subclavian_L78)
            annotation (Placement(transformation(extent={{-62,109},{-42,114}})));
          Systemic_artery axillary_L80(
            l=systemicParameters.l_axillary_L80,
            E=systemicParameters.E_axillary_L80,
            r=systemicParameters.r_axillary_L80)
            annotation (Placement(transformation(extent={{-39,109},{-19,114}})));
          Systemic_artery brachial_L82(
            l=systemicParameters.l_brachial_L82 - brachial_division,
            E=systemicParameters.E_brachial_L82,
            r=systemicParameters.r_brachial_L82)
            annotation (Placement(transformation(extent={{-16,109},{4,114}})));
          Systemic_artery ulnar_T2_L84(
            l=systemicParameters.l_ulnar_T2_L84,
            E=systemicParameters.E_ulnar_T2_L84,
            r=systemicParameters.r_ulnar_T2_L84)
            annotation (Placement(transformation(extent={{9,109},{29,114}})));
          Systemic_tissue ulnar_T2_L90(
              Ra = tissueParameters.Ra_ulnar_T2_L90,
              Rv = tissueParameters.Rv_ulnar_T2_L90,
              I = tissueParameters.I_ulnar_T2_L90,
              C = tissueParameters.C_ulnar_T2_L90,
              zpv =  tissueParameters.Zpv_ulnar_T2_L90,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,109},{55,114}})));
          Systemic_tissue radial_T1_L92(
              Ra = tissueParameters.Ra_radial_T1_L92,
              Rv = tissueParameters.Rv_radial_T1_L92,
              I = tissueParameters.I_radial_T1_L92,
              C = tissueParameters.C_radial_T1_L92,
              zpv =  tissueParameters.Zpv_radial_T1_L92,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,97},{55,102}})));
          Systemic_artery common_carotid_R6_A(
            l=systemicParameters.l_common_carotid_R6_A,
            E=systemicParameters.E_common_carotid_R6_A,
            r=systemicParameters.r_common_carotid_R6_A)
            annotation (Placement(transformation(extent={{-88,187},{-68,192}})));
          Systemic_artery common_carotid_R6_B(
            l=systemicParameters.l_common_carotid_R6_B,
            E=systemicParameters.E_common_carotid_R6_B,
            r=systemicParameters.r_common_carotid_R6_B)
            annotation (Placement(transformation(extent={{-63,187},{-43,192}})));
          Systemic_artery common_carotid_R6_C(
            l=systemicParameters.l_common_carotid_R6_C,
            E=systemicParameters.E_common_carotid_R6_C,
            r=systemicParameters.r_common_carotid_R6_C)
            annotation (Placement(transformation(extent={{-40,187},{-20,192}})));
          Systemic_artery internal_carotid_R8_A(
            l=systemicParameters.l_internal_carotid_R8_A,
            E=systemicParameters.E_internal_carotid_R8_A,
            r=systemicParameters.r_internal_carotid_R8_A,
            UseDistentionOutput=true)
            annotation (Placement(transformation(extent={{-17,187},{3,192}})));
          Systemic_artery internal_carotid_R8_B(
            l=systemicParameters.l_internal_carotid_R8_B,
            E=systemicParameters.E_internal_carotid_R8_B,
            r=systemicParameters.r_internal_carotid_R8_B)
            annotation (Placement(transformation(extent={{10,187},{30,192}})));
          Systemic_tissue internal_carotid_R8_C(
              Ra = tissueParameters.Ra_internal_carotid_R8_C,
              Rv = tissueParameters.Rv_internal_carotid_R8_C,
              I = tissueParameters.I_internal_carotid_R8_C,
              C = tissueParameters.C_internal_carotid_R8_C,
              zpv =  tissueParameters.Zpv_internal_carotid_R8_C,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,187},{55,192}})));
          Systemic_tissue external_carotid_T2_R26(
              Ra = tissueParameters.Ra_external_carotid_T2_R26,
              Rv = tissueParameters.Rv_external_carotid_T2_R26,
              I = tissueParameters.I_external_carotid_T2_R26,
              C = tissueParameters.C_external_carotid_T2_R26,
              zpv =  tissueParameters.Zpv_external_carotid_T2_R26,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,175},{55,180}})));
          Systemic_artery common_carotid_L48_A(
            l=systemicParameters.l_common_carotid_L48_A,
            E=systemicParameters.E_common_carotid_L48_A,
            r=systemicParameters.r_common_carotid_L48_A)
            annotation (Placement(transformation(extent={{-111,119},{-91,124}})));
          Systemic_artery common_carotid_L48_B(
            l=systemicParameters.l_common_carotid_L48_B,
            E=systemicParameters.E_common_carotid_L48_B,
            r=systemicParameters.r_common_carotid_L48_B)
            annotation (Placement(transformation(extent={{-86,119},{-66,124}})));
          Systemic_artery common_carotid_L48_C(
            l=systemicParameters.l_common_carotid_L48_C,
            E=systemicParameters.E_common_carotid_L48_C,
            r=systemicParameters.r_common_carotid_L48_C)
            annotation (Placement(transformation(extent={{-63,119},{-43,124}})));
          Systemic_artery common_carotid_L48_D(
            l=systemicParameters.l_common_carotid_L48_D,
            E=systemicParameters.E_common_carotid_L48_D,
            r=systemicParameters.r_common_carotid_L48_D)
            annotation (Placement(transformation(extent={{-38,119},{-18,124}})));
          Systemic_artery internal_carotid_L50_A(
            l=systemicParameters.l_internal_carotid_L50_A,
            E=systemicParameters.E_internal_carotid_L50_A,
            r=systemicParameters.r_internal_carotid_L50_A)
            annotation (Placement(transformation(extent={{-15,127},{5,132}})));
          Systemic_artery internal_carotid_L50_B(
            l=systemicParameters.l_internal_carotid_L50_B,
            E=systemicParameters.E_internal_carotid_L50_B,
            r=systemicParameters.r_internal_carotid_L50_B)
            annotation (Placement(transformation(extent={{10,127},{30,132}})));
          Systemic_tissue internal_carotid_L50_C(
              Ra = tissueParameters.Ra_internal_carotid_L50_C,
              Rv = tissueParameters.Rv_internal_carotid_L50_C,
              I = tissueParameters.I_internal_carotid_L50_C,
              C = tissueParameters.C_internal_carotid_L50_C,
              zpv =  tissueParameters.Zpv_internal_carotid_L50_C,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,127},{55,132}})));
          Systemic_tissue external_carotid_T2_L62(
              Ra = tissueParameters.Ra_external_carotid_T2_L62,
              Rv = tissueParameters.Rv_external_carotid_T2_L62,
              I = tissueParameters.I_external_carotid_T2_L62,
              C = tissueParameters.C_external_carotid_T2_L62,
              zpv =  tissueParameters.Zpv_external_carotid_T2_L62,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,119},{55,124}})));
          Systemic_tissue vertebral_L2(
              Ra = tissueParameters.Ra_vertebral_L2,
              Rv = tissueParameters.Rv_vertebral_L2,
              I = tissueParameters.I_vertebral_L2,
              C = tissueParameters.C_vertebral_L2,
              zpv =  tissueParameters.Zpv_vertebral_L2,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,87},{55,92}})));
          Systemic_tissue vertebral_R272(
              Ra = tissueParameters.Ra_vertebral_R272,
              Rv = tissueParameters.Rv_vertebral_R272,
              I = tissueParameters.I_vertebral_R272,
              C = tissueParameters.C_vertebral_R272,
              zpv =  tissueParameters.Zpv_vertebral_R272,
            nominal_pressure=tissueParameters.tissue_pressure)
          annotation (Placement(transformation(extent={{35,143},{55,148}})));
          Systemic_vein superior_vena_cava_C88(
            l=venousParameters.l_superior_vena_cava_C2 + venousParameters.l_superior_vena_cava_C88,
            E=venousParameters.E_superior_vena_cava_C88,
            r=venousParameters.r_superior_vena_cava_C88)
            annotation (Placement(transformation(extent={{272,163},{292,168}})));
          Systemic_vein inferior_vena_cava_C8(
            l=venousParameters.l_inferior_vena_cava_C8,
            E=venousParameters.E_inferior_vena_cava_C8,
            r=venousParameters.r_inferior_vena_cava_C8)
            annotation (Placement(transformation(extent={{409,-5},{429,0}})));
          Systemic_vein hepatic_vein_T1_C10(
            l=venousParameters.l_hepatic_vein_T1_C10,
            E=venousParameters.E_hepatic_vein_T1_C10,
            r=venousParameters.r_hepatic_vein_T1_C10)
            annotation (Placement(transformation(extent={{60,57},{80,62}})));
          Systemic_vein inferior_vena_cava_C12(
            l=venousParameters.l_inferior_vena_cava_C12,
            E=venousParameters.E_inferior_vena_cava_C12,
            r=venousParameters.r_inferior_vena_cava_C12)
            annotation (Placement(transformation(extent={{383,-5},{403,0}})));
          Systemic_vein inferior_vena_cava_C16(
            l=venousParameters.l_inferior_vena_cava_C16,
            E=venousParameters.E_inferior_vena_cava_C16,
            r=venousParameters.r_inferior_vena_cava_C16)
            annotation (Placement(transformation(extent={{360,-5},{380,0}})));
          Systemic_vein renal_vein_T1_R18(
            l=venousParameters.l_renal_vein_T1_R18,
            E=venousParameters.E_renal_vein_T1_R18,
            r=venousParameters.r_renal_vein_T1_R18)
            annotation (Placement(transformation(extent={{60,37},{80,42}})));
          Systemic_vein inferior_vena_cava_C20(
            l=venousParameters.l_inferior_vena_cava_C20,
            E=venousParameters.E_inferior_vena_cava_C20,
            r=venousParameters.r_inferior_vena_cava_C20)
            annotation (Placement(transformation(extent={{336,-5},{356,0}})));
          Systemic_vein renal_vein_T1_L22(
            l=venousParameters.l_renal_vein_T1_L22,
            E=venousParameters.E_renal_vein_T1_L22,
            r=venousParameters.r_renal_vein_T1_L22)
            annotation (Placement(transformation(extent={{60,-67},{80,-62}})));
          Systemic_vein inferior_vena_cava_C24(
            l=venousParameters.l_inferior_vena_cava_C24,
            E=venousParameters.E_inferior_vena_cava_C24,
            r=venousParameters.r_inferior_vena_cava_C24)
            annotation (Placement(transformation(extent={{312,-5},{332,0}})));
          Systemic_vein common_iliac_vein_L56(
            l=venousParameters.l_external_iliac_vein_L58 + venousParameters.l_common_iliac_vein_L56,
            E=venousParameters.E_common_iliac_vein_L56,
            r=venousParameters.r_common_iliac_vein_L56,
            LimitBackflow=true)
            annotation (Placement(transformation(extent={{287,-23},{307,-18}})));
          Systemic_vein common_iliac_vein_R26(
            l=venousParameters.l_external_iliac_vein_R28 + venousParameters.l_common_iliac_vein_R26,
            E=venousParameters.E_common_iliac_vein_R26,
            r=venousParameters.r_common_iliac_vein_R26,
            LimitBackflow=true)
            annotation (Placement(transformation(extent={{288,-5},{308,0}})));
          Systemic_vein internal_iliac_vein_T1_R30(
            l=venousParameters.l_internal_iliac_vein_T1_R30,
            E=venousParameters.E_internal_iliac_vein_T1_R30,
            r=venousParameters.r_internal_iliac_vein_T1_R30)
            annotation (Placement(transformation(extent={{60,27},{80,32}})));
          Systemic_vein external_iliac_vein_R32(
            l=venousParameters.l_external_iliac_vein_R32,
            E=venousParameters.E_external_iliac_vein_R32,
            r=venousParameters.r_external_iliac_vein_R32)
            annotation (Placement(transformation(extent={{237,-5},{257,0}})));
          Systemic_vein femoral_vein_R34(
            l=venousParameters.l_femoral_vein_R38 + venousParameters.l_femoral_vein_R34,
            E=venousParameters.E_femoral_vein_R34,
            r=venousParameters.r_femoral_vein_R34)
            annotation (Placement(transformation(extent={{212,-5},{232,0}})));
          Systemic_vein profunda_femoris_vein_T2_R40(
            l=venousParameters.l_profunda_femoris_vein_T2_R40,
            E=venousParameters.E_profunda_femoris_vein_T2_R40,
            r=venousParameters.r_profunda_femoris_vein_T2_R40)
            annotation (Placement(transformation(extent={{60,17},{80,22}})));
          Systemic_vein femoral_vein_R42(
            l=venousParameters.l_femoral_vein_R46 + venousParameters.l_femoral_vein_R42,
            E=venousParameters.E_femoral_vein_R42,
            r=venousParameters.r_femoral_vein_R42)
            annotation (Placement(transformation(extent={{163,-5},{183,0}})));
          Systemic_vein popliteal_vein_R48(
            l=venousParameters.l_popliteal_vein_R48,
            E=venousParameters.E_popliteal_vein_R48,
            r=venousParameters.r_popliteal_vein_R48)
            annotation (Placement(transformation(extent={{113,-5},{133,0}})));
          Systemic_vein anterior_tibial_vein_T4_R50(
            l=venousParameters.l_anterior_tibial_vein_T4_R50,
            E=venousParameters.E_anterior_tibial_vein_T4_R50,
            r=venousParameters.r_anterior_tibial_vein_T4_R50)
            annotation (Placement(transformation(extent={{60,7},{80,12}})));
          Systemic_vein popliteal_vein_R52(
            l=venousParameters.l_popliteal_vein_R52,
            E=venousParameters.E_popliteal_vein_R52,
            r=venousParameters.r_popliteal_vein_R52)
            annotation (Placement(transformation(extent={{87,-5},{107,0}})));
          Systemic_vein posterior_tibial_vein_T6_R54(
            l=venousParameters.l_posterior_tibial_vein_T6_R54,
            E=venousParameters.E_posterior_tibial_vein_T6_R54,
            r=venousParameters.r_posterior_tibial_vein_T6_R54)
            annotation (Placement(transformation(extent={{60,-5},{80,0}})));
          Systemic_vein internal_iliac_vein_T1_L60(
            l=venousParameters.l_internal_iliac_vein_T1_L60,
            E=venousParameters.E_internal_iliac_vein_T1_L60,
            r=venousParameters.r_internal_iliac_vein_T1_L60)
            annotation (Placement(transformation(extent={{60,-55},{80,-50}})));
          Systemic_vein external_iliac_vein_L62(
            l=venousParameters.l_external_iliac_vein_L62,
            E=venousParameters.E_external_iliac_vein_L62,
            r=venousParameters.r_external_iliac_vein_L62)
            annotation (Placement(transformation(extent={{237,-23},{257,-18}})));
          Systemic_vein femoral_vein_L64(
            l=venousParameters.l_femoral_vein_L68 + venousParameters.l_femoral_vein_L64,
            E=venousParameters.E_femoral_vein_L64,
            r=venousParameters.r_femoral_vein_L64)
            annotation (Placement(transformation(extent={{212,-23},{232,-18}})));
          Systemic_vein profunda_femoris_vein_T2_L70(
            l=venousParameters.l_profunda_femoris_vein_T2_L70,
            E=venousParameters.E_profunda_femoris_vein_T2_L70,
            r=venousParameters.r_profunda_femoris_vein_T2_L70)
            annotation (Placement(transformation(extent={{60,-43},{80,-38}})));
          Systemic_vein femoral_vein_L72(
            l=venousParameters.l_femoral_vein_L76 + venousParameters.l_femoral_vein_L72,
            E=venousParameters.E_femoral_vein_L72,
            r=venousParameters.r_femoral_vein_L72)
            annotation (Placement(transformation(extent={{163,-23},{183,-18}})));
          Systemic_vein popliteal_vein_L78(
            l=venousParameters.l_popliteal_vein_L78,
            E=venousParameters.E_popliteal_vein_L78,
            r=venousParameters.r_popliteal_vein_L78)
            annotation (Placement(transformation(extent={{113,-23},{133,-18}})));
          Systemic_vein anterior_tibial_vein_T4_L80(
            l=venousParameters.l_anterior_tibial_vein_T4_L80,
            E=venousParameters.E_anterior_tibial_vein_T4_L80,
            r=venousParameters.r_anterior_tibial_vein_T4_L80)
            annotation (Placement(transformation(extent={{60,-33},{80,-28}})));
          Systemic_vein popliteal_vein_L82(
            l=venousParameters.l_popliteal_vein_L82,
            E=venousParameters.E_popliteal_vein_L82,
            r=venousParameters.r_popliteal_vein_L82)
            annotation (Placement(transformation(extent={{87,-23},{107,-18}})));
          Systemic_vein posterior_tibial_vein_T6_L84(
            l=venousParameters.l_posterior_tibial_vein_T6_L84,
            E=venousParameters.E_posterior_tibial_vein_T6_L84,
            r=venousParameters.r_posterior_tibial_vein_T6_L84)
            annotation (Placement(transformation(extent={{60,-23},{80,-18}})));
          Systemic_vein brachiocephalic_vein_R90(
            l=venousParameters.l_brachiocephalic_vein_R90,
            E=venousParameters.E_brachiocephalic_vein_R90,
            r=venousParameters.r_brachiocephalic_vein_R90,
            LimitBackflow=true)
            annotation (Placement(transformation(extent={{247,163},{267,168}})));
          Systemic_vein brachiocephalic_vein_L124(
            l=venousParameters.l_brachiocephalic_vein_L124,
            E=venousParameters.E_brachiocephalic_vein_L124,
            r=venousParameters.r_brachiocephalic_vein_L124,
            LimitBackflow=true)
            annotation (Placement(transformation(extent={{248,109},{268,114}})));
          Systemic_vein vertebral_vein_R92(
            l=venousParameters.l_vertebral_vein_R92,
            E=venousParameters.E_vertebral_vein_R92,
            r=venousParameters.r_vertebral_vein_R92)
            annotation (Placement(transformation(extent={{61,143},{81,148}})));
          Systemic_vein brachiocephalic_vein_R94(
            l=venousParameters.l_brachiocephalic_vein_R94,
            E=venousParameters.E_brachiocephalic_vein_R94,
            r=venousParameters.r_brachiocephalic_vein_R94)
            annotation (Placement(transformation(extent={{222,163},{242,168}})));
          Systemic_vein subclavian_vein_R96(
            l=venousParameters.l_subclavian_vein_R96,
            E=venousParameters.E_subclavian_vein_R96,
            r=venousParameters.r_subclavian_vein_R96)
            annotation (Placement(transformation(extent={{197,163},{217,168}})));
          Systemic_vein internal_jugular_vein_R122(
            l=venousParameters.l_internal_jugular_vein_R122,
            E=venousParameters.E_internal_jugular_vein_R122,
            r=venousParameters.r_internal_jugular_vein_R122)
            annotation (Placement(transformation(extent={{61,187},{81,192}})));
          Systemic_vein external_jugular_vein_R98(
            l=venousParameters.l_external_jugular_vein_R98,
            E=venousParameters.E_external_jugular_vein_R98,
            r=venousParameters.r_external_jugular_vein_R98)
            annotation (Placement(transformation(extent={{61,175},{81,180}})));
          Systemic_vein axillary_vein_R102(
            l=venousParameters.l_axillary_vein_R102 + venousParameters.l_subclavian_vein_R100,
            E=venousParameters.E_axillary_vein_R102,
            r=venousParameters.r_axillary_vein_R102)
            annotation (Placement(transformation(extent={{141,163},{161,168}})));
          Systemic_vein brachial_vein_R104(
            l=venousParameters.l_brachial_vein_R108 + venousParameters.l_brachial_vein_R104,
            E=venousParameters.E_brachial_vein_R104,
            r=venousParameters.r_brachial_vein_R104)
            annotation (Placement(transformation(extent={{114,163},{134,168}})));
          Systemic_vein brachial_vein_R114(
            l=venousParameters.l_brachial_vein_R114 + venousParameters.l_brachial_vein_R118,
            E=venousParameters.E_brachial_vein_R114,
            r=venousParameters.r_brachial_vein_R114)
            annotation (Placement(transformation(extent={{113,153},{133,158}})));
          Systemic_vein ulnar_vein_T7_R110(
            l=venousParameters.l_ulnar_vein_T7_R110,
            E=venousParameters.E_ulnar_vein_T7_R110,
            r=venousParameters.r_ulnar_vein_T7_R110)
            annotation (Placement(transformation(extent={{61,163},{81,168}})));
          Systemic_vein radial_vein_T3_R120(
            l=venousParameters.l_radial_vein_T3_R120,
            E=venousParameters.E_radial_vein_T3_R120,
            r=venousParameters.r_radial_vein_T3_R120)
            annotation (Placement(transformation(extent={{61,153},{81,158}})));
          Systemic_vein vertebral_vein_L126(
            l=venousParameters.l_vertebral_vein_L126,
            E=venousParameters.E_vertebral_vein_L126,
            r=venousParameters.r_vertebral_vein_L126)
            annotation (Placement(transformation(extent={{60,87},{80,92}})));
          Systemic_vein brachiocephalic_vein_L128(
            l=venousParameters.l_brachiocephalic_vein_L128,
            E=venousParameters.E_brachiocephalic_vein_L128,
            r=venousParameters.r_brachiocephalic_vein_L128)
            annotation (Placement(transformation(extent={{219,109},{239,114}})));
          Systemic_vein subclavian_vein_L130(
            l=venousParameters.l_subclavian_vein_L130,
            E=venousParameters.E_subclavian_vein_L130,
            r=venousParameters.r_subclavian_vein_L130)
            annotation (Placement(transformation(extent={{192,109},{212,114}})));
          Systemic_vein internal_jugular_vein_L156(
            l=venousParameters.l_internal_jugular_vein_L156,
            E=venousParameters.E_internal_jugular_vein_L156,
            r=venousParameters.r_internal_jugular_vein_L156)
            annotation (Placement(transformation(extent={{61,127},{81,132}})));
          Systemic_vein external_jugular_vein_L132(
            l=venousParameters.l_external_jugular_vein_L132,
            E=venousParameters.E_external_jugular_vein_L132,
            r=venousParameters.r_external_jugular_vein_L132)
            annotation (Placement(transformation(extent={{61,119},{81,124}})));
          Systemic_vein axillary_vein_L136(
            l=venousParameters.l_subclavian_vein_L134 + venousParameters.l_axillary_vein_L136,
            E=venousParameters.E_axillary_vein_L136,
            r=venousParameters.r_axillary_vein_L136)
            annotation (Placement(transformation(extent={{142,109},{162,114}})));
          Systemic_vein brachial_vein_L138(
            l=venousParameters.l_brachial_vein_L142 + venousParameters.l_brachial_vein_L138,
            E=venousParameters.E_brachial_vein_L138,
            r=venousParameters.r_brachial_vein_L138)
            annotation (Placement(transformation(extent={{115,109},{135,114}})));
          Systemic_vein brachial_vein_L148(
            l=venousParameters.l_brachial_vein_L152 + venousParameters.l_brachial_vein_L148,
            E=venousParameters.E_brachial_vein_L148,
            r=venousParameters.r_brachial_vein_L148)
            annotation (Placement(transformation(extent={{114,97},{134,102}})));
          Systemic_vein ulnar_vein_T7_L144(
            l=venousParameters.l_ulnar_vein_T7_L144,
            E=venousParameters.E_ulnar_vein_T7_L144,
            r=venousParameters.r_ulnar_vein_T7_L144)
            annotation (Placement(transformation(extent={{61,109},{81,114}})));
          Systemic_vein radial_vein_T3_L154(
            l=venousParameters.l_radial_vein_T3_L154,
            E=venousParameters.E_radial_vein_T3_L154,
            r=venousParameters.r_radial_vein_T3_L154)
            annotation (Placement(transformation(extent={{61,97},{81,102}})));
          Parametrization.Parameters_Venous venousParameters(height_actual=settings.height)
            annotation (Placement(transformation(extent={{80,-100},{100,-80}})));
        //   Real u_root(unit = "Pa")=ascending_aorta_A.p_in;
        //   Real v_sup_venacava(unit = "m3.s-1")=superior_vena_cava_C2.q_out;
        //   Real v_inf_venacava(unit = "m3.s-1")=inferior_vena_cava_C8.q_out;

          replaceable Parametrization.SystemicTissueParameters_Calculated
            tissueParameters(
            tissue_pressure=settings.tissues_P_nom,
            arterioles_pressure=settings.tissues_Pa_nom,
            venules_pressure=settings.tissues_Pv_nom,
            total_zpv=settings.tissues_ZPV_nom,
            stressed_volume=settings.tissues_SV_nom,
            cardiac_output=settings.tissues_CO_nom) constrainedby
            Parametrization.SystemicTissueParameters annotation (Placement(
                transformation(extent={{40,-100},{60,-80}})),
              __Dymola_choicesAllMatching=true);
          Systemic_artery                  mesenteric_artery(
            l(displayUnit="cm") = 0.108,
            E(displayUnit="Pa") = 4.00E+05,
            r=3.73E-03) annotation (Placement(transformation(extent={{9,47},{29,52}})));
          Systemic_tissue splanchnic_tissue(
            Ra=tissueParameters.Ra_splachnic_tissue,
            Rv=tissueParameters.Rv_splachnic_tissue,
            I=tissueParameters.I_splachnic_tissue,
            C=tissueParameters.C_splachnic_tissue,
            zpv=tissueParameters.Zpv_splachnic_tissue,
            nominal_pressure=tissueParameters.tissue_pressure)
            annotation (Placement(transformation(extent={{35,47},{55,52}})));
          Systemic_vein splanchnic_vein(l=1.00E-01, r=7.50E-03)
            annotation (Placement(transformation(extent={{60,47},{80,52}})));
          Systemic_artery_thoracic                  coronary_arteries(
            C(displayUnit="m3/Pa") = 3e-11,
            R(displayUnit="(Pa.s)/m3") = 7e8)
            annotation (Placement(transformation(extent={{10,74},{30,78}})));
          Systemic_tissue                          cardiac_tissue(
            UseOuter_thoracic_pressure=true,
            I=tissueParameters.I_cardiac_tissue,
            C=tissueParameters.C_cardiac_tissue,
            Ra=tissueParameters.Ra_cardiac_tissue,
            Rv=tissueParameters.Rv_cardiac_tissue,
            zpv=tissueParameters.Zpv_cardiac_tissue,
            nominal_pressure=tissueParameters.tissue_pressure)
            annotation (Placement(transformation(extent={{36,74},{56,78}})));
          replaceable
          Systemic_vein coronary_veins(
            UseOuter_thoracic_pressure=true,
            C(displayUnit="m3/Pa") = 7e-10,
            R(displayUnit="(Pa.s)/m3") = 2e8)
            annotation (Placement(transformation(extent={{60,74},{80,78}})));
          Systemic_artery brachial_L82_HeartLevel(
            sinAlpha=-1,
            l=brachial_division,
            E=systemicParameters.E_brachial_L82,
            r=systemicParameters.r_brachial_L82)
            annotation (Placement(transformation(extent={{-26,97},{-6,102}})));

          Real u_ra(unit = "Pa") = port_b.pressure;
          Real v_aov(unit="m3.s-1") = port_a.q;

          Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter
            annotation (Placement(transformation(extent={{-300,70},{-280,90}})));
          Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter1
            annotation (Placement(transformation(extent={{480,70},{500,90}})));
          Physiolibrary.Types.RealIO.PressureOutput capillaryPressures[:] = {
            celiac_trunk_C116.p,
            renal_L166.p,
            renal_R178.p,
            internal_iliac_T1_R218.p,
            profundus_T2_R224.p,
            anterior_tibial_T3_R230.p,
            posterior_tibial_T4_R236.p,
            internal_iliac_T1_L196.p,
            profundus_T2_L202.p,
            anterior_tibial_T3_L208.p,
            posterior_tibial_T4_L214.p,
            ulnar_T2_R42.p,
            radial_T1_R44.p,
            ulnar_T2_L90.p,
            radial_T1_L92.p,
            internal_carotid_R8_C.p,
            external_carotid_T2_R26.p,
            internal_carotid_L50_C.p,
            external_carotid_T2_L62.p,
            vertebral_L2.p,
            vertebral_R272.p,
            splanchnic_tissue.p,
            cardiac_tissue.p}
         if useCapillaryPressureOutputs annotation (Placement(transformation(extent={{316,182},{
                    336,202}}), iconTransformation(extent={{148,166},{168,186}})));
        equation

          connect(internal_iliac_T1_R218.port_b,internal_iliac_vein_T1_R30.port_a) annotation (Line(points={{55,29.5},
                  {60,29.5}},                                                                                                              thickness=1,
              color={28,108,200}));
          connect(internal_iliac_T1_L196.port_b,internal_iliac_vein_T1_L60.port_a) annotation (Line(points={{55,
                  -52.5},{60,-52.5}},                                                                                                      thickness=1,
              color={28,108,200}));
          connect(profundus_T2_R224.port_b,profunda_femoris_vein_T2_R40.port_a) annotation (Line(points={{55,19.5},
                  {60,19.5}},                                                                                                           thickness=1,
              color={28,108,200}));
          connect(profundus_T2_L202.port_b,profunda_femoris_vein_T2_L70.port_a) annotation (Line(points={{55,
                  -40.5},{60,-40.5}},                                                                                                   thickness=1,
              color={28,108,200}));
          connect(anterior_tibial_T3_L208.port_b,anterior_tibial_vein_T4_L80.port_a) annotation (Line(points={{55,
                  -30.5},{60,-30.5}},                                                                                                        thickness=1,
              color={28,108,200}));
          connect(anterior_tibial_T3_R230.port_b,anterior_tibial_vein_T4_R50.port_a) annotation (Line(points={{55,9.5},
                  {60,9.5}},                                                                                                                 thickness=1,
              color={28,108,200}));
          connect(posterior_tibial_T4_L214.port_b,posterior_tibial_vein_T6_L84.port_a) annotation (Line(points={{55,
                  -20.5},{60,-20.5}},                                                                                                          thickness=1,
              color={28,108,200}));
          connect(posterior_tibial_T4_R236.port_b,posterior_tibial_vein_T6_R54.port_a) annotation (Line(points={{55,-2.5},
                  {60,-2.5}},                                                                                                                  thickness=1,
              color={28,108,200}));
          connect(radial_T1_R44.port_b,radial_vein_T3_R120.port_a) annotation (Line(points={{55,
                  155.5},{61,155.5}},                                                                                      thickness=1,
              color={28,108,200}));
          connect(radial_T1_L92.port_b,radial_vein_T3_L154.port_a) annotation (Line(points={{55,99.5},
                  {61,99.5}},                                                                                              thickness=1,
              color={28,108,200}));
          connect(ulnar_T2_R42.port_b,ulnar_vein_T7_R110.port_a) annotation (Line(points={{55,
                  165.5},{55,166},{60,166},{60,165.5},{61,165.5}},                                                       thickness=1,
              color={28,108,200}));
          connect(ulnar_T2_L90.port_b,ulnar_vein_T7_L144.port_a) annotation (Line(points={{55,
                  111.5},{55,112},{56,112},{56,111.5},{61,111.5}},                                                       thickness=1,
              color={28,108,200}));
          connect(vertebral_R272.port_b,vertebral_vein_R92.port_a) annotation (Line(points={{55,
                  145.5},{61,145.5}},                                                                                      thickness=1,
              color={28,108,200}));
          connect(vertebral_L2.port_b,vertebral_vein_L126.port_a) annotation (Line(points={{55,89.5},
                  {60,89.5}},                                                                                             thickness=1,
              color={28,108,200}));
          connect(internal_carotid_R8_C.port_b,internal_jugular_vein_R122.port_a) annotation (Line(points={{55,
                  189.5},{61,189.5}},                                                                                                     thickness=1,
              color={28,108,200}));
          connect(external_carotid_T2_R26.port_b,external_jugular_vein_R98.port_a) annotation (Line(points={{55,
                  177.5},{61,177.5}},                                                                                                      thickness=1,
              color={28,108,200}));
          connect(internal_carotid_L50_C.port_b,internal_jugular_vein_L156.port_a) annotation (Line(points={{55,
                  129.5},{61,129.5}},                                                                                                      thickness=1,
              color={28,108,200}));
          connect(external_carotid_T2_L62.port_b,external_jugular_vein_L132.port_a) annotation (Line(points={{55,
                  121.5},{61,121.5}},                                                                                                       thickness=1,
              color={28,108,200}));
          connect(celiac_trunk_C116.port_b,hepatic_vein_T1_C10.port_a) annotation (Line(points={{55,59.5},
                  {56,59.5},{56,60},{60,60},{60,59.5}},                                                                        thickness=1,
              color={28,108,200}));
          connect(renal_L166.port_b,renal_vein_T1_L22.port_a) annotation (Line(points={{55,
                  -64.5},{60,-64.5}},                                                                                 thickness=1,
              color={28,108,200}));
          connect(renal_R178.port_b,renal_vein_T1_R18.port_a) annotation (Line(points={{55,39.5},
                  {60,39.5}},                                                                                         thickness=1,
              color={28,108,200}));
          connect(brachiocephalic_trunk_C4.port_a,aortic_arch_C2.port_b) annotation (Line(points={{-132,
                  165.5},{-132,166},{-140,166},{-140,87.5},{-143,87.5}},                                                         thickness=1,
              color={238,46,47}));
          connect(aortic_arch_C46.port_a,aortic_arch_C2.port_b) annotation (Line(points={{-137,
                  87.5},{-143,87.5}},                                                                                   thickness=1));
          connect(common_carotid_R6_A.port_a,brachiocephalic_trunk_C4.port_b) annotation (Line(points={{-88,
                  189.5},{-112,189.5},{-112,165.5}},                                                                                  thickness=1,
              color={238,46,47}));
          connect(subclavian_R28.port_a,brachiocephalic_trunk_C4.port_b) annotation (Line(points={{-88,
                  165.5},{-112,165.5}},                                                                                          thickness=1,
              color={238,46,47}));
          connect(aortic_arch_C64.port_a,aortic_arch_C46.port_b) annotation (Line(points={{-112,
                  87.5},{-117,87.5}},                                                                                    thickness=1));
          connect(common_carotid_L48_A.port_a,aortic_arch_C46.port_b) annotation (Line(points={{-111,
                  121.5},{-117,121.5},{-117,87.5}},                                                                           thickness=1,
              color={238,46,47}));
          connect(aortic_arch_C94.port_a,aortic_arch_C64.port_b) annotation (Line(points={{-91,
                  67.5},{-82,67.5},{-82,88},{-92,88},{-92,87.5}},                                                        thickness=1,
              color={238,46,47}));
          connect(subclavian_L66.port_a,aortic_arch_C64.port_b) annotation (Line(points={{-87,
                  111.5},{-90,111.5},{-90,87.5},{-92,87.5}},                                                            thickness=1,
              color={238,46,47}));
          connect(thoracic_aorta_C108.port_a,thoracic_aorta_C104.port_b) annotation (Line(points={{-193,
                  67.5},{-188,67.5}},                                                                                            thickness=1,
              color={238,46,47}));
          connect(thoracic_aorta_C112.port_a,thoracic_aorta_C108.port_b) annotation (Line(points={{-218,
                  67.5},{-213,67.5}},                                                                                            thickness=1,
              color={238,46,47}));
          connect(abdominal_aorta_C136.port_a,abdominal_aorta_C114.port_b) annotation (Line(points={{-280,
                  -2.5},{-287,-2.5}},                                                                                              thickness=1,
              color={238,46,47}));
          connect(celiac_trunk_C116.port_a,abdominal_aorta_C114.port_b) annotation (Line(points={{35,59.5},
                  {-284,59.5},{-284,-2.5},{-287,-2.5}},                                                                         thickness=1,
              color={238,46,47}));
          connect(abdominal_aorta_C164.port_a,abdominal_aorta_C136.port_b) annotation (Line(points={{-255,
                  -2.5},{-260,-2.5}},                                                                                              thickness=1,
              color={238,46,47}));
          connect(abdominal_aorta_C176.port_a,abdominal_aorta_C164.port_b) annotation (Line(points={{-230,
                  -2.5},{-234,-2.5},{-234,-2},{-235,-2.5}},                                                                        thickness=1,
              color={238,46,47}));
          connect(renal_L166.port_a,abdominal_aorta_C164.port_b) annotation (Line(points={{35,
                  -64.5},{35,-64},{-232,-64},{-232,-2.5},{-235,-2.5}},                                                   thickness=1,
              color={238,46,47}));
          connect(abdominal_aorta_C188.port_a,abdominal_aorta_C176.port_b) annotation (Line(points={{-203,
                  -2.5},{-210,-2.5}},                                                                                              thickness=1,
              color={238,46,47}));
          connect(renal_R178.port_a,abdominal_aorta_C176.port_b) annotation (Line(points={{35,39.5},
                  {-210,39.5},{-210,-2.5}},                                                                              thickness=1,
              color={238,46,47}));
          connect(abdominal_aorta_C192.port_a,abdominal_aorta_C188.port_b) annotation (Line(points={{-178,
                  -2.5},{-183,-2.5}},                                                                                              thickness=1,
              color={238,46,47}));
          connect(common_iliac_R216.port_a,abdominal_aorta_C192.port_b) annotation (Line(points={{-148,
                  -2.5},{-158,-2.5}},                                                                                           thickness=1,
              color={238,46,47}));
          connect(common_iliac_L194.port_a,abdominal_aorta_C192.port_b) annotation (Line(points={{-147,
                  -20.5},{-152,-20.5},{-152,-2},{-158,-2},{-158,-2.5}},                                                         thickness=1,
              color={238,46,47}));
          connect(internal_iliac_T1_R218.port_a,common_iliac_R216.port_b) annotation (Line(points={{35,29.5},
                  {-128,29.5},{-128,-2.5}},                                                                                       thickness=1,
              color={238,46,47}));
          connect(external_iliac_R220.port_a,common_iliac_R216.port_b) annotation (Line(points={{-120,
                  -2.5},{-128,-2.5}},                                                                                          thickness=1,
              color={238,46,47}));
          connect(profundus_T2_R224.port_a,femoral_R222.port_b) annotation (Line(points={{35,19.5},
                  {35,20},{-74,20},{-74,-2.5},{-75,-2.5}},                                                              thickness=1,
              color={238,46,47}));
          connect(femoral_R226.port_a,femoral_R222.port_b) annotation (Line(points={{-67,
                  -2.5},{-75,-2.5}},                                                                               thickness=1,
              color={238,46,47}));
          connect(anterior_tibial_T3_R230.port_a,popliteal_R228.port_b) annotation (Line(points={{35,9.5},
                  {-22,9.5},{-22,-2.5}},                                                                                        thickness=1,
              color={238,46,47}));
          connect(popliteal_R232.port_a,popliteal_R228.port_b) annotation (Line(points={{-16,
                  -2.5},{-22,-2.5}},                                                                                   thickness=1,
              color={238,46,47}));
          connect(internal_iliac_T1_L196.port_a,common_iliac_L194.port_b) annotation (Line(points={{35,
                  -52.5},{35,-52},{-126,-52},{-126,-20.5},{-127,-20.5}},                                                          thickness=1,
              color={238,46,47}));
          connect(external_iliac_L198.port_a,common_iliac_L194.port_b) annotation (Line(points={{-121,
                  -20.5},{-127,-20.5}},                                                                                        thickness=1,
              color={238,46,47}));
          connect(profundus_T2_L202.port_a,femoral_L200.port_b) annotation (Line(points={{35,
                  -40.5},{-74,-40.5},{-74,-20.5}},                                                                      thickness=1,
              color={238,46,47}));
          connect(femoral_L204.port_a,femoral_L200.port_b) annotation (Line(points={{-68,
                  -20.5},{-74,-20.5}},                                                                             thickness=1,
              color={238,46,47}));
          connect(anterior_tibial_T3_L208.port_a,popliteal_L206.port_b) annotation (Line(points={{35,
                  -30.5},{35,-30},{-20,-30},{-20,-20.5},{-21,-20.5}},                                                           thickness=1,
              color={238,46,47}));
          connect(popliteal_L210.port_a,popliteal_L206.port_b) annotation (Line(points={{-16,
                  -20.5},{-21,-20.5}},                                                                                 thickness=1,
              color={238,46,47}));
          connect(subclavian_R30.port_a,subclavian_R28.port_b) annotation (Line(points={{-63,
                  165.5},{-68,165.5}},                                                                                 thickness=1,
              color={238,46,47}));
          connect(vertebral_R272.port_a,subclavian_R28.port_b) annotation (Line(points={{35,
                  145.5},{-68,145.5},{-68,165.5}},                                                                     thickness=1,
              color={238,46,47}));
          connect(ulnar_T2_R36.port_a,brachial_R34.port_b) annotation (Line(points={{10,
                  165.5},{3,165.5}},                                                                               thickness=1,
              color={238,46,47}));
          connect(radial_T1_R44.port_a,brachial_R34.port_b) annotation (Line(points={{35,
                  155.5},{6,155.5},{6,165.5},{3,165.5}},                                                            thickness=1,
              color={238,46,47}));
          connect(ulnar_T2_R42.port_a,ulnar_T2_R36.port_b) annotation (Line(points={{35,
                  165.5},{30,165.5}},                                                                              thickness=1,
              color={238,46,47}));
          connect(subclavian_L78.port_a,subclavian_L66.port_b) annotation (Line(points={{-62,
                  111.5},{-67,111.5}},                                                                                 thickness=1,
              color={238,46,47}));
          connect(vertebral_L2.port_a,subclavian_L66.port_b) annotation (Line(points={{35,89.5},
                  {-64,89.5},{-64,111.5},{-67,111.5}},                                                               thickness=1,
              color={238,46,47}));
          connect(ulnar_T2_L84.port_a,brachial_L82.port_b) annotation (Line(points={{9,111.5},
                  {4,111.5}},                                                                                      thickness=1,
              color={238,46,47}));
          connect(radial_T1_L92.port_a,brachial_L82.port_b) annotation (Line(points={{35,99.5},
                  {4,99.5},{4,111.5}},                                                                              thickness=1,
              color={238,46,47}));
          connect(ulnar_T2_L90.port_a,ulnar_T2_L84.port_b) annotation (Line(points={{35,
                  111.5},{35,112},{28,112},{28,111.5},{29,111.5}},                                                 thickness=1,
              color={238,46,47}));
          connect(internal_carotid_R8_A.port_a,common_carotid_R6_C.port_b) annotation (Line(points={{-17,
                  189.5},{-20,189.5}},                                                                                             thickness=1,
              color={238,46,47}));
          connect(external_carotid_T2_R26.port_a,common_carotid_R6_C.port_b) annotation (Line(points={{35,
                  177.5},{-20,177.5},{-20,189.5}},                                                                                   thickness=1,
              color={238,46,47}));
          connect(internal_carotid_L50_A.port_a,common_carotid_L48_D.port_b) annotation (Line(points={{-15,
                  129.5},{-18,129.5},{-18,121.5}},                                                                                   thickness=1,
              color={238,46,47}));
          connect(external_carotid_T2_L62.port_a,common_carotid_L48_D.port_b) annotation (Line(points={{35,
                  121.5},{-18,121.5}},                                                                                                thickness=1,
              color={238,46,47}));
          connect(ascending_aorta_B.port_a,ascending_aorta_A.port_b) annotation (Line(points={{-238,
                  87.5},{-243,87.5}},                                                                                        thickness=1));
          connect(ascending_aorta_C.port_a,ascending_aorta_B.port_b) annotation (Line(points={{-213,
                  87.5},{-218,87.5}},                                                                                        thickness=1));
          connect(ascending_aorta_D.port_a,ascending_aorta_C.port_b) annotation (Line(points={{-188,
                  87.5},{-193,87.5}},                                                                                        thickness=1));
          connect(aortic_arch_C2.port_a,ascending_aorta_D.port_b) annotation (Line(points={{-163,
                  87.5},{-168,87.5}},                                                                                     thickness=1));
          connect(thoracic_aorta_C96.port_a,aortic_arch_C94.port_b) annotation (Line(points={{-118,
                  67.5},{-111,67.5}},                                                                                       thickness=1,
              color={238,46,47}));
          connect(abdominal_aorta_C114.port_a,thoracic_aorta_C112.port_b) annotation (Line(points={{-307,
                  -2.5},{-307,-2},{-316,-2},{-316,67.5},{-238,67.5}},                                                             thickness=1,
              color={238,46,47}));
          connect(femoral_R222.port_a,external_iliac_R220.port_b) annotation (Line(points={{-95,
                  -2.5},{-100,-2.5}},                                                                                     thickness=1,
              color={238,46,47}));
          connect(popliteal_R228.port_a,femoral_R226.port_b) annotation (Line(points={{-42,
                  -2.5},{-47,-2.5}},                                                                                 thickness=1,
              color={238,46,47}));
          connect(tibiofibular_trunk_R234.port_a,popliteal_R232.port_b) annotation (Line(points={{9,-2.5},
                  {4,-2.5}},                                                                                                    thickness=1,
              color={238,46,47}));
          connect(posterior_tibial_T4_R236.port_a,tibiofibular_trunk_R234.port_b) annotation (Line(points={{35,-2.5},
                  {29,-2.5}},                                                                                                             thickness=1,
              color={238,46,47}));
          connect(femoral_L200.port_a,external_iliac_L198.port_b) annotation (Line(points={{-94,
                  -20.5},{-101,-20.5}},                                                                                   thickness=1,
              color={238,46,47}));
          connect(popliteal_L206.port_a,femoral_L204.port_b) annotation (Line(points={{-41,
                  -20.5},{-48,-20.5}},                                                                               thickness=1,
              color={238,46,47}));
          connect(tibiofibular_trunk_L212.port_a,popliteal_L210.port_b) annotation (Line(points={{9,-20.5},
                  {4,-20.5}},                                                                                                   thickness=1,
              color={238,46,47}));
          connect(posterior_tibial_T4_L214.port_a,tibiofibular_trunk_L212.port_b) annotation (Line(points={{35,
                  -20.5},{29,-20.5}},                                                                                                     thickness=1,
              color={238,46,47}));
          connect(axillary_R32.port_a,subclavian_R30.port_b) annotation (Line(points={{-40,
                  165.5},{-43,165.5}},                                                                               thickness=1,
              color={238,46,47}));
          connect(brachial_R34.port_a,axillary_R32.port_b) annotation (Line(points={{-17,
                  165.5},{-20,165.5}},                                                                             thickness=1,
              color={238,46,47}));
          connect(axillary_L80.port_a,subclavian_L78.port_b) annotation (Line(points={{-39,
                  111.5},{-42,111.5}},                                                                               thickness=1,
              color={238,46,47}));
          connect(common_carotid_R6_B.port_a,common_carotid_R6_A.port_b) annotation (Line(points={{-63,
                  189.5},{-68,189.5}},                                                                                           thickness=1,
              color={238,46,47}));
          connect(common_carotid_R6_C.port_a,common_carotid_R6_B.port_b) annotation (Line(points={{-40,
                  189.5},{-43,189.5}},                                                                                           thickness=1,
              color={238,46,47}));
          connect(internal_carotid_R8_B.port_a,internal_carotid_R8_A.port_b) annotation (Line(points={{10,
                  189.5},{3,189.5}},                                                                                                 thickness=1,
              color={238,46,47}));
          connect(internal_carotid_R8_C.port_a,internal_carotid_R8_B.port_b) annotation (Line(points={{35,
                  189.5},{30,189.5}},                                                                                                thickness=1,
              color={238,46,47}));
          connect(common_carotid_L48_B.port_a,common_carotid_L48_A.port_b) annotation (Line(points={{-86,
                  121.5},{-91,121.5}},                                                                                             thickness=1,
              color={238,46,47}));
          connect(common_carotid_L48_C.port_a,common_carotid_L48_B.port_b) annotation (Line(points={{-63,
                  121.5},{-66,121.5}},                                                                                             thickness=1,
              color={238,46,47}));
          connect(common_carotid_L48_D.port_a,common_carotid_L48_C.port_b) annotation (Line(points={{-38,
                  121.5},{-43,121.5}},                                                                                             thickness=1,
              color={238,46,47}));
          connect(internal_carotid_L50_B.port_a,internal_carotid_L50_A.port_b) annotation (Line(points={{10,
                  129.5},{5,129.5}},                                                                                                   thickness=1,
              color={238,46,47}));
          connect(internal_carotid_L50_C.port_a,internal_carotid_L50_B.port_b) annotation (Line(points={{35,
                  129.5},{30,129.5}},                                                                                                  thickness=1,
              color={238,46,47}));
          connect(brachiocephalic_vein_R90.port_b,superior_vena_cava_C88.port_a) annotation (Line(points={{267,
                  165.5},{272,165.5}},                                                                                                   thickness=1,
              color={28,108,200}));
          connect(brachiocephalic_vein_L124.port_b,superior_vena_cava_C88.port_a) annotation (Line(points={{268,
                  111.5},{268,112},{272,112},{272,165.5}},                                                                                thickness=1,
              color={28,108,200}));
          connect(vertebral_vein_R92.port_b,brachiocephalic_vein_R90.port_a) annotation (Line(points={{81,
                  145.5},{247,145.5},{247,165.5}},                                                                                   thickness=1,
              color={28,108,200}));
          connect(brachiocephalic_vein_R94.port_b,brachiocephalic_vein_R90.port_a) annotation (Line(points={{242,
                  165.5},{247,165.5}},                                                                                                     thickness=1,
              color={28,108,200}));
          connect(subclavian_vein_R96.port_b,brachiocephalic_vein_R94.port_a) annotation (Line(points={{217,
                  165.5},{222,165.5}},                                                                                                thickness=1,
              color={28,108,200}));
          connect(internal_jugular_vein_R122.port_b,brachiocephalic_vein_R94.port_a) annotation (Line(points={{81,
                  189.5},{222,189.5},{222,165.5}},                                                                                           thickness=1,
              color={28,108,200}));
          connect(external_jugular_vein_R98.port_b,subclavian_vein_R96.port_a) annotation (Line(points={{81,
                  177.5},{196,177.5},{196,165.5},{197,165.5}},                                                                         thickness=1,
              color={28,108,200}));
          connect(brachial_vein_R104.port_b,axillary_vein_R102.port_a) annotation (Line(points={{134,
                  165.5},{141,165.5}},                                                                                         thickness=1,
              color={28,108,200}));
          connect(brachial_vein_R114.port_b,axillary_vein_R102.port_a) annotation (Line(points={{133,
                  155.5},{134,155.5},{134,156},{136,156},{136,165.5},{141,165.5}},                                             thickness=1,
              color={28,108,200}));
          connect(vertebral_vein_L126.port_b,brachiocephalic_vein_L124.port_a) annotation (Line(points={{80,89.5},
                  {80,90},{244,90},{244,111.5},{248,111.5}},                                                                           thickness=1,
              color={28,108,200}));
          connect(brachiocephalic_vein_L128.port_b,brachiocephalic_vein_L124.port_a) annotation (Line(points={{239,
                  111.5},{248,111.5}},                                                                                                       thickness=1,
              color={28,108,200}));
          connect(subclavian_vein_L130.port_b,brachiocephalic_vein_L128.port_a) annotation (Line(points={{212,
                  111.5},{219,111.5}},                                                                                                  thickness=1,
              color={28,108,200}));
          connect(internal_jugular_vein_L156.port_b,brachiocephalic_vein_L128.port_a) annotation (Line(points={{81,
                  129.5},{216,129.5},{216,111.5},{219,111.5}},                                                                                thickness=1,
              color={28,108,200}));
          connect(external_jugular_vein_L132.port_b,subclavian_vein_L130.port_a) annotation (Line(points={{81,
                  121.5},{192,121.5},{192,111.5}},                                                                                       thickness=1,
              color={28,108,200}));
          connect(brachial_vein_L138.port_b,axillary_vein_L136.port_a) annotation (Line(points={{135,
                  111.5},{142,111.5}},                                                                                         thickness=1,
              color={28,108,200}));
          connect(brachial_vein_L148.port_b,axillary_vein_L136.port_a) annotation (Line(points={{134,
                  99.5},{134,100},{138,100},{138,111.5},{142,111.5}},                                                          thickness=1,
              color={28,108,200}));
          connect(hepatic_vein_T1_C10.port_b,inferior_vena_cava_C8.port_a) annotation (Line(points={{80,59.5},
                  {406,59.5},{406,60},{408,60},{408,-2.5},{409,-2.5}},                                                             thickness=1,
              color={28,108,200}));
          connect(inferior_vena_cava_C12.port_b,inferior_vena_cava_C8.port_a) annotation (Line(points={{403,
                  -2.5},{403,-2},{409,-2},{409,-2.5}},                                                                                thickness=1,
              color={28,108,200}));
          connect(renal_vein_T1_R18.port_b,inferior_vena_cava_C16.port_a) annotation (Line(points={{80,39.5},
                  {360,39.5},{360,-2.5}},                                                                                         thickness=1,
              color={28,108,200}));
          connect(inferior_vena_cava_C20.port_b,inferior_vena_cava_C16.port_a) annotation (Line(points={{356,
                  -2.5},{360,-2.5}},                                                                                                   thickness=1,
              color={28,108,200}));
          connect(renal_vein_T1_L22.port_b,inferior_vena_cava_C20.port_a) annotation (Line(points={{80,
                  -64.5},{336,-64.5},{336,-2.5}},                                                                                 thickness=1,
              color={28,108,200}));
          connect(inferior_vena_cava_C24.port_b,inferior_vena_cava_C20.port_a) annotation (Line(points={{332,
                  -2.5},{336,-2.5}},                                                                                                   thickness=1,
              color={28,108,200}));
          connect(common_iliac_vein_R26.port_b,inferior_vena_cava_C24.port_a) annotation (Line(points={{308,
                  -2.5},{312,-2.5}},                                                                                                  thickness=1,
              color={28,108,200}));
          connect(common_iliac_vein_L56.port_b,inferior_vena_cava_C24.port_a) annotation (Line(points={{307,
                  -20.5},{312,-20.5},{312,-2.5}},                                                                                     thickness=1,
              color={28,108,200}));
          connect(anterior_tibial_vein_T4_R50.port_b,popliteal_vein_R48.port_a) annotation (Line(points={{80,9.5},
                  {112,9.5},{112,-2.5},{113,-2.5}},                                                                                     thickness=1,
              color={28,108,200}));
          connect(popliteal_vein_R52.port_b,popliteal_vein_R48.port_a) annotation (Line(points={{107,
                  -2.5},{113,-2.5}},                                                                                           thickness=1,
              color={28,108,200}));
          connect(anterior_tibial_vein_T4_L80.port_b,popliteal_vein_L78.port_a) annotation (Line(points={{80,
                  -30.5},{112,-30.5},{112,-20.5},{113,-20.5}},                                                                          thickness=1,
              color={28,108,200}));
          connect(popliteal_vein_L82.port_b,popliteal_vein_L78.port_a) annotation (Line(points={{107,
                  -20.5},{113,-20.5}},                                                                                         thickness=1,
              color={28,108,200}));
          connect(inferior_vena_cava_C16.port_b,inferior_vena_cava_C12.port_a) annotation (Line(points={{380,
                  -2.5},{383,-2.5}},                                                                                                   thickness=1,
              color={28,108,200}));
          connect(femoral_vein_R34.port_b,external_iliac_vein_R32.port_a) annotation (Line(points={{232,
                  -2.5},{237,-2.5}},                                                                                              thickness=1,
              color={28,108,200}));
          connect(posterior_tibial_vein_T6_R54.port_b,popliteal_vein_R52.port_a) annotation (Line(points={{80,-2.5},
                  {87,-2.5}},                                                                                                            thickness=1,
              color={28,108,200}));
          connect(femoral_vein_L64.port_b,external_iliac_vein_L62.port_a) annotation (Line(points={{232,
                  -20.5},{237,-20.5}},                                                                                            thickness=1,
              color={28,108,200}));
          connect(posterior_tibial_vein_T6_L84.port_b,popliteal_vein_L82.port_a) annotation (Line(points={{80,
                  -20.5},{87,-20.5}},                                                                                                    thickness=1,
              color={28,108,200}));
          connect(thoracic_aorta_C96.port_b, thoracic_aorta_C100.port_a) annotation (Line(
              points={{-138,67.5},{-143,67.5}},
              color={238,46,47},
              thickness=1));
          connect(thoracic_aorta_C104.port_a, thoracic_aorta_C100.port_b) annotation (Line(
              points={{-168,67.5},{-163,67.5}},
              color={238,46,47},
              thickness=1));
          connect(mesenteric_artery.port_a, abdominal_aorta_C136.port_b) annotation (
              Line(
              points={{9,49.5},{-258,49.5},{-258,-2.5},{-260,-2.5}},
              color={238,46,47},
              thickness=1));
          connect(splanchnic_tissue.port_a, mesenteric_artery.port_b)
            annotation (Line(
              points={{35,49.5},{29,49.5}},
              color={238,46,47},
              thickness=1));
          connect(splanchnic_tissue.port_b, splanchnic_vein.port_a) annotation (
             Line(
              points={{55,49.5},{60,49.5}},
              color={28,108,200},
              thickness=1));
          connect(splanchnic_vein.port_b, inferior_vena_cava_C12.port_a)
            annotation (Line(
              points={{80,49.5},{196,49.5},{196,50},{383,50},{383,-2.5}},
              color={28,108,200},
              thickness=1));
          connect(cardiac_tissue.port_b, coronary_veins.port_a) annotation (Line(
              points={{56,76},{60,76}},
              color={28,108,200},
              thickness=1));
          connect(cardiac_tissue.port_a, coronary_arteries.port_b) annotation (Line(
              points={{36,76},{30,76}},
              color={238,46,47},
              thickness=1));
          connect(ascending_aorta_B.port_b, coronary_arteries.port_a) annotation (Line(
              points={{-218,87.5},{-218,76},{10,76}},
              color={238,46,47},
              thickness=1));
          connect(coronary_veins.port_b, inferior_vena_cava_C8.port_b) annotation (Line(
              points={{80,76},{429,76},{429,-2.5}},
              color={28,108,200},
              thickness=1));
          connect(axillary_L80.port_b, brachial_L82_HeartLevel.port_a) annotation (Line(
              points={{-19,111.5},{-19,106.75},{-26,106.75},{-26,99.5}},
              color={0,0,0},
              thickness=1));
          connect(brachial_L82.port_a, brachial_L82_HeartLevel.port_b) annotation (Line(
              points={{-16,111.5},{-16,106},{-6,106},{-6,99.5}},
              color={0,0,0},
              thickness=1));

          connect(aortic_arch_C46.distentionFraction, baroreflex_system.aortic_distention)
            annotation (Line(points={{-127,92.5},{-127,132},{-260,132},{-260,
                  145.333},{-238.667,145.333}},
                             color={0,0,127}));
          connect(internal_carotid_R8_A.distentionFraction, baroreflex_system.carotid_distention)
            annotation (Line(points={{-7,194.5},{-260,194.5},{-260,158.667},{
                  -238.667,158.667}},
                color={0,0,127}));
          connect(port_a, leveledPressureFlowConverter.port_a) annotation (Line(
              points={{-320,80},{-300,80}},
              color={0,0,0},
              thickness=1));
          connect(leveledPressureFlowConverter.leveledPort_b, ascending_aorta_A.port_a)
            annotation (Line(
              points={{-280,80},{-272,80},{-272,87.5},{-263,87.5}},
              color={162,29,33},
              thickness=0.5));
          connect(inferior_vena_cava_C8.port_b, leveledPressureFlowConverter1.leveledPort_b)
            annotation (Line(
              points={{429,-2.5},{500,-2.5},{500,80}},
              color={162,29,33},
              thickness=0.5));
          connect(leveledPressureFlowConverter1.port_a, port_b) annotation (Line(
              points={{480,80},{460,80}},
              color={0,0,0},
              thickness=1));
          connect(subclavian_vein_R96.port_a, axillary_vein_R102.port_b) annotation (
              Line(
              points={{197,165.5},{197,166.25},{171,166.25},{171,165.5},{161,165.5}},
              color={162,29,33},
              thickness=0.5));
          connect(ulnar_vein_T7_R110.port_b, brachial_vein_R104.port_a) annotation (
              Line(
              points={{81,165.5},{114,165.5}},
              color={162,29,33},
              thickness=0.5));
          connect(radial_vein_T3_R120.port_b, brachial_vein_R114.port_a) annotation (
              Line(
              points={{81,155.5},{96.5,155.5},{96.5,155.5},{113,155.5}},
              color={162,29,33},
              thickness=0.5));
          connect(superior_vena_cava_C88.port_b, leveledPressureFlowConverter1.leveledPort_b)
            annotation (Line(
              points={{292,165.5},{398,165.5},{398,168},{500,168},{500,80}},
              color={162,29,33},
              thickness=0.5));
          connect(axillary_vein_L136.port_b, subclavian_vein_L130.port_a) annotation (
              Line(
              points={{162,111.5},{168,111.5},{168,110},{192,110},{192,111.5}},
              color={162,29,33},
              thickness=0.5));
          connect(ulnar_vein_T7_L144.port_b, brachial_vein_L138.port_a) annotation (
              Line(
              points={{81,111.5},{97.5,111.5},{97.5,111.5},{115,111.5}},
              color={162,29,33},
              thickness=0.5));
          connect(brachial_vein_L148.port_a, radial_vein_T3_L154.port_b) annotation (
              Line(
              points={{114,99.5},{81,99.5}},
              color={162,29,33},
              thickness=0.5));
          connect(popliteal_vein_R48.port_b, femoral_vein_R42.port_a) annotation (Line(
              points={{133,-2.5},{163,-2.5}},
              color={162,29,33},
              thickness=0.5));
          connect(popliteal_vein_L78.port_b, femoral_vein_L72.port_a) annotation (Line(
              points={{133,-20.5},{163,-20.5}},
              color={162,29,33},
              thickness=0.5));
          connect(profunda_femoris_vein_T2_L70.port_b, femoral_vein_L64.port_a)
            annotation (Line(
              points={{80,-40.5},{138,-40.5},{138,-40},{198,-40},{198,-20.5},{212,-20.5}},
              color={162,29,33},
              thickness=0.5));

          connect(femoral_vein_L72.port_b, femoral_vein_L64.port_a) annotation (Line(
              points={{183,-20.5},{212,-20.5}},
              color={162,29,33},
              thickness=0.5));
          connect(external_iliac_vein_R32.port_b, common_iliac_vein_R26.port_a)
            annotation (Line(
              points={{257,-2.5},{288,-2.5}},
              color={162,29,33},
              thickness=0.5));
          connect(external_iliac_vein_L62.port_b, common_iliac_vein_L56.port_a)
            annotation (Line(
              points={{257,-20.5},{287,-20.5}},
              color={162,29,33},
              thickness=0.5));
          connect(femoral_vein_R42.port_b, femoral_vein_R34.port_a) annotation (Line(
              points={{183,-2.5},{212,-2.5}},
              color={162,29,33},
              thickness=0.5));
          connect(profunda_femoris_vein_T2_R40.port_b, femoral_vein_R34.port_a)
            annotation (Line(
              points={{80,19.5},{198,19.5},{198,-2.5},{212,-2.5}},
              color={162,29,33},
              thickness=0.5));
          connect(internal_iliac_vein_T1_R30.port_b, common_iliac_vein_R26.port_a)
            annotation (Line(
              points={{80,29.5},{178,29.5},{178,28},{272,28},{272,-2.5},{288,-2.5}},
              color={162,29,33},
              thickness=0.5));
          connect(internal_iliac_vein_T1_L60.port_b, common_iliac_vein_L56.port_a)
            annotation (Line(
              points={{80,-52.5},{176,-52.5},{176,-50},{274,-50},{274,-20.5},{287,-20.5}},
              color={162,29,33},
              thickness=0.5));

        end SystemicAV_baseMerged;

        model SystemicAV "Adds volume and length calculations"
          extends ADAN_main.Components.Subsystems.Systemic.SystemicAV_base(
            brachial_division=0.15,
            splanchnic_vein(UseOuter_thoracic_pressure=true,
                thoracic_pressure_ratio=settings.syst_abd_P_th_ratio),
            splanchnic_tissue(UseOuter_thoracic_pressure=true,
                thoracic_pressure_ratio=settings.syst_abd_P_th_ratio),
            superior_vena_cava_C2(UseOuter_thoracic_pressure=true),
            superior_vena_cava_C88(UseOuter_thoracic_pressure=true),
            inferior_vena_cava_C8(UseOuter_thoracic_pressure=true,
                thoracic_pressure_ratio=settings.syst_abd_P_th_ratio),
            inferior_vena_cava_C12(UseOuter_thoracic_pressure=true,
                thoracic_pressure_ratio=settings.syst_abd_P_th_ratio),
            inferior_vena_cava_C16(UseOuter_thoracic_pressure=true,
                thoracic_pressure_ratio=settings.syst_abd_P_th_ratio),
            inferior_vena_cava_C20(UseOuter_thoracic_pressure=true,
                thoracic_pressure_ratio=settings.syst_abd_P_th_ratio),
            inferior_vena_cava_C24(UseOuter_thoracic_pressure=true,
                thoracic_pressure_ratio=settings.syst_abd_P_th_ratio),
            celiac_trunk_C116(UseOuter_thoracic_pressure=true,
                thoracic_pressure_ratio=settings.syst_abd_P_th_ratio),
            renal_R178(UseOuter_thoracic_pressure=true, thoracic_pressure_ratio=
                 settings.syst_abd_P_th_ratio),
            hepatic_vein_T1_C10(UseOuter_thoracic_pressure=true,
                thoracic_pressure_ratio=settings.syst_abd_P_th_ratio),
            renal_vein_T1_R18(UseOuter_thoracic_pressure=true,
                thoracic_pressure_ratio=settings.syst_abd_P_th_ratio),
            mesenteric_artery(UseOuter_thoracic_pressure=true,
                thoracic_pressure_ratio=settings.syst_abd_P_th_ratio),
            abdominal_aorta_C114(UseOuter_thoracic_pressure=true,
                thoracic_pressure_ratio=settings.syst_abd_P_th_ratio),
            abdominal_aorta_C136(UseOuter_thoracic_pressure=true,
                thoracic_pressure_ratio=settings.syst_abd_P_th_ratio),
            abdominal_aorta_C176(UseOuter_thoracic_pressure=true,
                thoracic_pressure_ratio=settings.syst_abd_P_th_ratio),
            abdominal_aorta_C164(UseOuter_thoracic_pressure=true,
                thoracic_pressure_ratio=settings.syst_abd_P_th_ratio),
            renal_vein_T1_L22(UseOuter_thoracic_pressure=true,
                thoracic_pressure_ratio=settings.syst_abd_P_th_ratio),
            renal_L166(UseOuter_thoracic_pressure=true, thoracic_pressure_ratio=
                 settings.syst_abd_P_th_ratio));
        Physiolibrary.Types.Volume total_volume = volume_arterial + volume_peripheral + volume_venous;
          Physiolibrary.Types.Volume volume_arterial = ascending_aorta_A.volume +
            ascending_aorta_B.volume +
            ascending_aorta_C.volume +
            ascending_aorta_D.volume +
            aortic_arch_C2.volume +
            brachiocephalic_trunk_C4.volume +
            aortic_arch_C46.volume +
            aortic_arch_C64.volume +
            aortic_arch_C94.volume +
            thoracic_aorta_C96.volume +
            thoracic_aorta_C100.volume +
            thoracic_aorta_C104.volume +
            thoracic_aorta_C108.volume +
            thoracic_aorta_C112.volume +
            abdominal_aorta_C114.volume +
            abdominal_aorta_C136.volume +
            abdominal_aorta_C164.volume +
            abdominal_aorta_C176.volume +
            abdominal_aorta_C188.volume +
            abdominal_aorta_C192.volume +
            common_iliac_R216.volume +
            external_iliac_R220.volume +
            femoral_R222.volume +
            femoral_R226.volume +
            popliteal_R228.volume +
            popliteal_R232.volume +
            tibiofibular_trunk_R234.volume +
            common_iliac_L194.volume +
            external_iliac_L198.volume +
            femoral_L200.volume +
            femoral_L204.volume +
            popliteal_L206.volume +
            popliteal_L210.volume +
            tibiofibular_trunk_L212.volume +
            subclavian_R28.volume +
            subclavian_R30.volume +
            axillary_R32.volume +
            brachial_R34.volume +
            brachial_L82_HeartLevel.volume +
            ulnar_T2_R36.volume +
            subclavian_L66.volume +
            subclavian_L78.volume +
            axillary_L80.volume +
            brachial_L82.volume +
            ulnar_T2_L84.volume +
            common_carotid_R6_A.volume +
            common_carotid_R6_B.volume +
            common_carotid_R6_C.volume +
            internal_carotid_R8_A.volume +
            internal_carotid_R8_B.volume +
            common_carotid_L48_A.volume +
            common_carotid_L48_B.volume +
            common_carotid_L48_C.volume +
            common_carotid_L48_D.volume +
            internal_carotid_L50_A.volume +
            internal_carotid_L50_B.volume +
            coronary_arteries.volume +
            mesenteric_artery.volume;
          Physiolibrary.Types.Volume volume_peripheral=celiac_trunk_C116.volume
               + renal_L166.volume + renal_R178.volume + internal_iliac_T1_R218.volume
               + profundus_T2_R224.volume + anterior_tibial_T3_R230.volume +
              posterior_tibial_T4_R236.volume + internal_iliac_T1_L196.volume
               + profundus_T2_L202.volume + anterior_tibial_T3_L208.volume +
              posterior_tibial_T4_L214.volume + ulnar_T2_R42.volume +
              radial_T1_R44.volume + ulnar_T2_L90.volume + radial_T1_L92.volume
               + internal_carotid_R8_C.volume + external_carotid_T2_R26.volume
               + internal_carotid_L50_C.volume + external_carotid_T2_L62.volume
               + vertebral_L2.volume + vertebral_R272.volume + cardiac_tissue.volume
               + splanchnic_tissue.volume;
          Physiolibrary.Types.Volume volume_venous=superior_vena_cava_C2.volume
               + superior_vena_cava_C88.volume + inferior_vena_cava_C8.volume
               + hepatic_vein_T1_C10.volume + inferior_vena_cava_C12.volume +
              inferior_vena_cava_C16.volume + renal_vein_T1_R18.volume +
              inferior_vena_cava_C20.volume + renal_vein_T1_L22.volume +
              inferior_vena_cava_C24.volume + common_iliac_vein_L56.volume +
              common_iliac_vein_R26.volume + external_iliac_vein_R28.volume +
              internal_iliac_vein_T1_R30.volume + external_iliac_vein_R32.volume
               + femoral_vein_R34.volume + femoral_vein_R38.volume +
              profunda_femoris_vein_T2_R40.volume + femoral_vein_R42.volume +
              femoral_vein_R46.volume + popliteal_vein_R48.volume +
              anterior_tibial_vein_T4_R50.volume + popliteal_vein_R52.volume +
              posterior_tibial_vein_T6_R54.volume + external_iliac_vein_L58.volume
               + internal_iliac_vein_T1_L60.volume + external_iliac_vein_L62.volume
               + femoral_vein_L64.volume + femoral_vein_L68.volume +
              profunda_femoris_vein_T2_L70.volume + femoral_vein_L72.volume +
              femoral_vein_L76.volume + popliteal_vein_L78.volume +
              anterior_tibial_vein_T4_L80.volume + popliteal_vein_L82.volume +
              posterior_tibial_vein_T6_L84.volume + brachiocephalic_vein_R90.volume
               + brachiocephalic_vein_L124.volume + vertebral_vein_R92.volume
               + brachiocephalic_vein_R94.volume + subclavian_vein_R96.volume
               + internal_jugular_vein_R122.volume + external_jugular_vein_R98.volume
               + subclavian_vein_R100.volume + axillary_vein_R102.volume +
              brachial_vein_R104.volume + brachial_vein_R114.volume +
              brachial_vein_R108.volume + ulnar_vein_T7_R110.volume +
              brachial_vein_R118.volume + radial_vein_T3_R120.volume +
              vertebral_vein_L126.volume + brachiocephalic_vein_L128.volume +
              subclavian_vein_L130.volume + internal_jugular_vein_L156.volume
               + external_jugular_vein_L132.volume + subclavian_vein_L134.volume
               + axillary_vein_L136.volume + brachial_vein_L138.volume +
              brachial_vein_L148.volume + brachial_vein_L142.volume +
              ulnar_vein_T7_L144.volume + brachial_vein_L152.volume +
              radial_vein_T3_L154.volume + coronary_veins.volume +
              splanchnic_vein.volume;

          Physiolibrary.Types.Volume zpv_arterial = ascending_aorta_A.zpv +
            ascending_aorta_B.zpv +
            ascending_aorta_C.zpv +
            ascending_aorta_D.zpv +
            aortic_arch_C2.zpv +
            brachiocephalic_trunk_C4.zpv +
            aortic_arch_C46.zpv +
            aortic_arch_C64.zpv +
            aortic_arch_C94.zpv +
            thoracic_aorta_C96.zpv +
            thoracic_aorta_C100.zpv +
            thoracic_aorta_C104.zpv +
            thoracic_aorta_C108.zpv +
            thoracic_aorta_C112.zpv +
            abdominal_aorta_C114.zpv +
            abdominal_aorta_C136.zpv +
            abdominal_aorta_C164.zpv +
            abdominal_aorta_C176.zpv +
            abdominal_aorta_C188.zpv +
            abdominal_aorta_C192.zpv +
            common_iliac_R216.zpv +
            external_iliac_R220.zpv +
            femoral_R222.zpv +
            femoral_R226.zpv +
            popliteal_R228.zpv +
            popliteal_R232.zpv +
            tibiofibular_trunk_R234.zpv +
            common_iliac_L194.zpv +
            external_iliac_L198.zpv +
            femoral_L200.zpv +
            femoral_L204.zpv +
            popliteal_L206.zpv +
            popliteal_L210.zpv +
            tibiofibular_trunk_L212.zpv +
            subclavian_R28.zpv +
            subclavian_R30.zpv +
            axillary_R32.zpv +
            brachial_R34.zpv +
            ulnar_T2_R36.zpv +
            subclavian_L66.zpv +
            subclavian_L78.zpv +
            axillary_L80.zpv +
            brachial_L82.zpv +
            brachial_L82_HeartLevel.zpv +
            ulnar_T2_L84.zpv +
            common_carotid_R6_A.zpv +
            common_carotid_R6_B.zpv +
            common_carotid_R6_C.zpv +
            internal_carotid_R8_A.zpv +
            internal_carotid_R8_B.zpv +
            common_carotid_L48_A.zpv +
            common_carotid_L48_B.zpv +
            common_carotid_L48_C.zpv +
            common_carotid_L48_D.zpv +
            internal_carotid_L50_A.zpv +
            internal_carotid_L50_B.zpv +
            coronary_arteries.zpv +
            mesenteric_artery.zpv;
          Physiolibrary.Types.Volume zpv_peripheral=celiac_trunk_C116.zpv +
              renal_L166.zpv + renal_R178.zpv + internal_iliac_T1_R218.zpv +
              profundus_T2_R224.zpv + anterior_tibial_T3_R230.zpv +
              posterior_tibial_T4_R236.zpv + internal_iliac_T1_L196.zpv +
              profundus_T2_L202.zpv + anterior_tibial_T3_L208.zpv +
              posterior_tibial_T4_L214.zpv + ulnar_T2_R42.zpv + radial_T1_R44.zpv
               + ulnar_T2_L90.zpv + radial_T1_L92.zpv + internal_carotid_R8_C.zpv
               + external_carotid_T2_R26.zpv + internal_carotid_L50_C.zpv +
              external_carotid_T2_L62.zpv + vertebral_L2.zpv + vertebral_R272.zpv
               + cardiac_tissue.zpv + splanchnic_tissue.zpv;
          Physiolibrary.Types.Volume zpv_venous=superior_vena_cava_C2.zpv +
              superior_vena_cava_C88.zpv + inferior_vena_cava_C8.zpv +
              hepatic_vein_T1_C10.zpv + inferior_vena_cava_C12.zpv +
              inferior_vena_cava_C16.zpv + renal_vein_T1_R18.zpv +
              inferior_vena_cava_C20.zpv + renal_vein_T1_L22.zpv +
              inferior_vena_cava_C24.zpv + common_iliac_vein_L56.zpv +
              common_iliac_vein_R26.zpv + external_iliac_vein_R28.zpv +
              internal_iliac_vein_T1_R30.zpv + external_iliac_vein_R32.zpv +
              femoral_vein_R34.zpv + femoral_vein_R38.zpv +
              profunda_femoris_vein_T2_R40.zpv + femoral_vein_R42.zpv +
              femoral_vein_R46.zpv + popliteal_vein_R48.zpv +
              anterior_tibial_vein_T4_R50.zpv + popliteal_vein_R52.zpv +
              posterior_tibial_vein_T6_R54.zpv + external_iliac_vein_L58.zpv +
              internal_iliac_vein_T1_L60.zpv + external_iliac_vein_L62.zpv +
              femoral_vein_L64.zpv + femoral_vein_L68.zpv +
              profunda_femoris_vein_T2_L70.zpv + femoral_vein_L72.zpv +
              femoral_vein_L76.zpv + popliteal_vein_L78.zpv +
              anterior_tibial_vein_T4_L80.zpv + popliteal_vein_L82.zpv +
              posterior_tibial_vein_T6_L84.zpv + brachiocephalic_vein_R90.zpv
               + brachiocephalic_vein_L124.zpv + vertebral_vein_R92.zpv +
              brachiocephalic_vein_R94.zpv + subclavian_vein_R96.zpv +
              internal_jugular_vein_R122.zpv + external_jugular_vein_R98.zpv +
              subclavian_vein_R100.zpv + axillary_vein_R102.zpv +
              brachial_vein_R104.zpv + brachial_vein_R114.zpv +
              brachial_vein_R108.zpv + ulnar_vein_T7_R110.zpv +
              brachial_vein_R118.zpv + radial_vein_T3_R120.zpv +
              vertebral_vein_L126.zpv + brachiocephalic_vein_L128.zpv +
              subclavian_vein_L130.zpv + internal_jugular_vein_L156.zpv +
              external_jugular_vein_L132.zpv + subclavian_vein_L134.zpv +
              axillary_vein_L136.zpv + brachial_vein_L138.zpv +
              brachial_vein_L148.zpv + brachial_vein_L142.zpv +
              ulnar_vein_T7_L144.zpv + brachial_vein_L152.zpv +
              radial_vein_T3_L154.zpv + coronary_veins.zpv + splanchnic_vein.zpv;

         // Physiolibrary.Types.Volume zpvs_venous =   zpv_venous * ZPV_effect;

          Modelica.Units.SI.Length l_arterial=ascending_aorta_A.l +
              ascending_aorta_B.l + ascending_aorta_C.l + ascending_aorta_D.l
               + aortic_arch_C2.l + brachiocephalic_trunk_C4.l +
              aortic_arch_C46.l + aortic_arch_C64.l + aortic_arch_C94.l +
              thoracic_aorta_C96.l + thoracic_aorta_C100.l +
              thoracic_aorta_C104.l + thoracic_aorta_C108.l +
              thoracic_aorta_C112.l + abdominal_aorta_C114.l +
              abdominal_aorta_C136.l + abdominal_aorta_C164.l +
              abdominal_aorta_C176.l + abdominal_aorta_C188.l +
              abdominal_aorta_C192.l + common_iliac_R216.l +
              external_iliac_R220.l + femoral_R222.l + femoral_R226.l +
              popliteal_R228.l + popliteal_R232.l + tibiofibular_trunk_R234.l
               + common_iliac_L194.l + external_iliac_L198.l + femoral_L200.l
               + femoral_L204.l + popliteal_L206.l + popliteal_L210.l +
              tibiofibular_trunk_L212.l + subclavian_R28.l + subclavian_R30.l
               + axillary_R32.l + brachial_R34.l + brachial_L82_HeartLevel.l +
              ulnar_T2_R36.l + subclavian_L66.l + subclavian_L78.l +
              axillary_L80.l + brachial_L82.l + ulnar_T2_L84.l +
              common_carotid_R6_A.l + common_carotid_R6_B.l +
              common_carotid_R6_C.l + internal_carotid_R8_A.l +
              internal_carotid_R8_B.l + common_carotid_L48_A.l +
              common_carotid_L48_B.l + common_carotid_L48_C.l +
              common_carotid_L48_D.l + internal_carotid_L50_A.l +
              internal_carotid_L50_B.l + coronary_arteries.l +
              mesenteric_artery.l;

          Modelica.Units.SI.Length l_venous=superior_vena_cava_C2.l +
              superior_vena_cava_C88.l + inferior_vena_cava_C8.l +
              hepatic_vein_T1_C10.l + inferior_vena_cava_C12.l +
              inferior_vena_cava_C16.l + renal_vein_T1_R18.l +
              inferior_vena_cava_C20.l + renal_vein_T1_L22.l +
              inferior_vena_cava_C24.l + common_iliac_vein_L56.l +
              common_iliac_vein_R26.l + external_iliac_vein_R28.l +
              internal_iliac_vein_T1_R30.l + external_iliac_vein_R32.l +
              femoral_vein_R34.l + femoral_vein_R38.l +
              profunda_femoris_vein_T2_R40.l + femoral_vein_R42.l +
              femoral_vein_R46.l + popliteal_vein_R48.l +
              anterior_tibial_vein_T4_R50.l + popliteal_vein_R52.l +
              posterior_tibial_vein_T6_R54.l + external_iliac_vein_L58.l +
              internal_iliac_vein_T1_L60.l + external_iliac_vein_L62.l +
              femoral_vein_L64.l + femoral_vein_L68.l +
              profunda_femoris_vein_T2_L70.l + femoral_vein_L72.l +
              femoral_vein_L76.l + popliteal_vein_L78.l +
              anterior_tibial_vein_T4_L80.l + popliteal_vein_L82.l +
              posterior_tibial_vein_T6_L84.l + brachiocephalic_vein_R90.l +
              brachiocephalic_vein_L124.l + vertebral_vein_R92.l +
              brachiocephalic_vein_R94.l + subclavian_vein_R96.l +
              internal_jugular_vein_R122.l + external_jugular_vein_R98.l +
              subclavian_vein_R100.l + axillary_vein_R102.l +
              brachial_vein_R104.l + brachial_vein_R114.l + brachial_vein_R108.l
               + ulnar_vein_T7_R110.l + brachial_vein_R118.l +
              radial_vein_T3_R120.l + vertebral_vein_L126.l +
              brachiocephalic_vein_L128.l + subclavian_vein_L130.l +
              internal_jugular_vein_L156.l + external_jugular_vein_L132.l +
              subclavian_vein_L134.l + axillary_vein_L136.l +
              brachial_vein_L138.l + brachial_vein_L148.l + brachial_vein_L142.l
               + ulnar_vein_T7_L144.l + brachial_vein_L152.l +
              radial_vein_T3_L154.l + coronary_veins.l + splanchnic_vein.l;

          parameter Modelica.Units.SI.Length speedSegmentLength=
              common_carotid_L48_A.l + common_carotid_L48_B.l +
              common_carotid_L48_C.l + common_carotid_L48_D.l + aortic_arch_C94.l
               + thoracic_aorta_C96.l + thoracic_aorta_C100.l +
              thoracic_aorta_C104.l + thoracic_aorta_C108.l +
              thoracic_aorta_C112.l + abdominal_aorta_C114.l +
              abdominal_aorta_C136.l + abdominal_aorta_C164.l +
              abdominal_aorta_C176.l + abdominal_aorta_C188.l +
              abdominal_aorta_C192.l + common_iliac_R216.l +
              external_iliac_R220.l + femoral_R222.l
            "Distance between carotid_L48_D and femoral_R222";

          parameter Modelica.Units.SI.Length aortic_length=ascending_aorta_A.l
               + ascending_aorta_B.l + ascending_aorta_C.l + ascending_aorta_D.l
               + aortic_arch_C2.l + aortic_arch_C46.l + aortic_arch_C64.l +
              aortic_arch_C94.l + thoracic_aorta_C96.l + thoracic_aorta_C100.l
               + thoracic_aorta_C104.l + thoracic_aorta_C108.l +
              thoracic_aorta_C112.l + abdominal_aorta_C114.l +
              abdominal_aorta_C136.l + abdominal_aorta_C164.l +
              abdominal_aorta_C176.l + abdominal_aorta_C188.l +
              abdominal_aorta_C192.l
            "Length of the whole aorta for comparison to body size";

            parameter Real age = settings.age "patient age";
          parameter Modelica.Units.SI.Mass weight=settings.weight;
          parameter Modelica.Units.SI.Height height(start=1.7) = settings.height;
            parameter Real BMI =  settings.BMI;
          parameter Modelica.Units.SI.Length aortic_length_calc=1/100*(-67.2793
               + 0.2487*age + 0.5409*(height*100) + 0.3476*BMI)
            "Zemtsovskaja, HT 2019 for male subjects";
          parameter Modelica.Units.SI.Length aortic_length_calc2=1/1000*(-109.7
               + 2.9*age + 2.5*height*100)
            "Rezai, Blood Press Monit 2013, for male subjects";
        //    parameter Physiolibrary.Types.Fraction thoracic_pressure_ratio = 0.8 "fraction of thoracic pressure in the abdominal cavity";
        equation
          //BMI = weight/(height^2);
          // aortic_length = aortic_length_calc;
        end SystemicAV;

        model SystemicMockPressure
          "Mock throughput just to provide distenstion data for baroreflex"
          extends partialSystemicAV;
          Vessel_modules.Artery internal_carotid_R8_A(
            l=Parameters_Systemic1.l_internal_carotid_R8_A,
            E=Parameters_Systemic1.E_internal_carotid_R8_A,
            r=Parameters_Systemic1.r_internal_carotid_R8_A,
            UseDistentionOutput=true) annotation (Placement(transformation(
                  extent={{-279,97},{-259,102}})));
          Vessel_modules.Artery aortic_arch_C46(
            l=Parameters_Systemic1.l_aortic_arch_C46,
            E=Parameters_Systemic1.E_aortic_arch_C46,
            r=Parameters_Systemic1.r_aortic_arch_C46,
            UseDistentionOutput=true,
            UseOuter_thoracic_pressure=true) annotation (Placement(
                transformation(extent={{-279,57},{-259,62}})));
          Parametrization.Parameters_Systemic_tunable Parameters_Systemic1
            annotation (Placement(transformation(extent={{-44,-29},{-24,-24}})));
        equation
          connect(port_a, aortic_arch_C46.port_a) annotation (Line(
              points={{-320,80},{-300,80},{-300,59.5},{-279,59.5}},
              color={0,0,0},
              thickness=1));
          connect(port_a, port_a) annotation (Line(
              points={{-320,80},{-320,80}},
              color={0,0,0},
              thickness=1));
          connect(port_a, internal_carotid_R8_A.port_a) annotation (Line(
              points={{-320,80},{-300,80},{-300,99.5},{-279,99.5}},
              color={0,0,0},
              thickness=1));
          connect(internal_carotid_R8_A.port_b, aortic_arch_C46.port_b)
            annotation (Line(
              points={{-259,99.5},{-259,100},{-240,100},{-240,59.5},{-259,59.5}},
              color={0,0,0},
              thickness=1));

          connect(internal_carotid_R8_A.port_b, port_b) annotation (Line(
              points={{-259,99.5},{-240,99.5},{-240,80},{112,80},{460,80}},
              color={0,0,0},
              thickness=1));
          connect(baroreflex_system.aortic_distention, aortic_arch_C46.distentionFraction)
            annotation (Line(points={{-238.667,145.333},{-250,145.333},{-250,
                  64.5},{-269,64.5}}, color={0,0,127}));
          connect(internal_carotid_R8_A.distentionFraction, baroreflex_system.carotid_distention)
            annotation (Line(points={{-269,104.5},{-269,158.667},{-238.667,
                  158.667}}, color={0,0,127}));
        end SystemicMockPressure;

        model Systemic_SimpleLumped
          extends partialSystemic;
          Obsolete.AdanVenousRed._b580e.Parameters_Venous_cellml.Parameters_Systemic
            systemicParameters annotation (Placement(transformation(extent={{-100,
                    -77},{-48,-26}})));
          Obsolete.AdanVenousRed._b580e.Parameters_Venous_cellml.Parameters_Venous
            Parameters_Venous1
            annotation (Placement(transformation(extent={{39,-69},{88,-20}})));
          replaceable Parametrization.SystemicTissueParameters_Calculated
            tissueParameters(qf_internal_carotid_R8_C=1) constrainedby
            Parametrization.SystemicTissueParameters annotation (Placement(
                transformation(extent={{-40,-80},{24,-16}})),
              __Dymola_choicesAllMatching=true);
          Vessel_modules.Systemic_tissue internal_carotid_R8_C(
            Ra=tissueParameters.Ra_internal_carotid_R8_C,
            Rv=tissueParameters.Rv_internal_carotid_R8_C,
            I=tissueParameters.I_internal_carotid_R8_C,
            C=tissueParameters.C_internal_carotid_R8_C,
            zpv=tissueParameters.Zpv_internal_carotid_R8_C) annotation (
              Placement(transformation(extent={{-10,-2.5},{10,2.5}})));
          Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter
            annotation (Placement(transformation(extent={{-156,-16},{-124,16}})));
          Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter1
            annotation (Placement(transformation(extent={{158,-16},{126,16}})));
        equation
          connect(port_a, leveledPressureFlowConverter.port_a) annotation (Line(
              points={{-320,80},{-238,80},{-238,0},{-156,0}},
              color={0,0,0},
              thickness=1));
          connect(port_b, leveledPressureFlowConverter1.port_a) annotation (
              Line(
              points={{460,80},{310,80},{310,0},{158,0}},
              color={0,0,0},
              thickness=1));
          connect(internal_carotid_R8_C.port_b, leveledPressureFlowConverter1.leveledPort_b)
            annotation (Line(
              points={{10,0},{126,0}},
              color={162,29,33},
              thickness=0.5));
          connect(leveledPressureFlowConverter.leveledPort_b,
            internal_carotid_R8_C.port_a) annotation (Line(
              points={{-124,0},{-68,0},{-68,0},{-10,0}},
              color={162,29,33},
              thickness=0.5));
        end Systemic_SimpleLumped;

        model Systemic_TriSeg "Reimplementation of CardiovascularMechanics model"
          extends partialSystemic(
            final UseTiltInput=false,
            UsePhi_Input=true,
            final UseOuter_PressureInput=false,
            final UseBaroreflexOutput=false);
          import ADAN_main.Components.Constants.*;

          Physiolibrary.Hydraulic.Components.Resistor r_ao(Resistance=R_Ao)
            annotation (Placement(transformation(extent={{-280,70},{-260,90}})));
          Physiolibrary.Hydraulic.Components.Resistor r_sa(useConductanceInput=
                true,                                      Resistance=R_SA)
            annotation (Placement(transformation(extent={{-220,70},{-200,90}})));
          Physiolibrary.Hydraulic.Components.ElasticVessel c_ao(volume_start=
                6e-05,                                          Compliance=C_Ao)
            annotation (Placement(transformation(extent={{-310,10},{-290,30}})));
          Physiolibrary.Hydraulic.Components.ElasticVessel c_sa(
            volume_start=0.0003,
            useComplianceInput=true,                            Compliance=C_SA,
              ExternalPressure(displayUnit="Pa"))
            annotation (Placement(transformation(extent={{-210,10},{-190,30}})));
          Physiolibrary.Hydraulic.Components.ElasticVessel c_sv(
            volume_start=0.00134,
            useComplianceInput=true,                            Compliance=C_SV,
              ExternalPressure(displayUnit="Pa"))
            annotation (Placement(transformation(extent={{-150,8},{-130,28}})));

          parameter Real _CO_target=4850 "mL/min";
          parameter Real _HR=60;

          parameter Real _C_Ao=0.7*_CO_target/50/_HR
            "Proximal aortic compliance, mL/mmHg";
          parameter Real _C_SA=1.4*_CO_target/50/_HR
            "Systemic arterial compliance, mL/mmHg";
          parameter Real _C_SV=1.64*250
            "Systemic venous compliance, mL/mmHg  DAB 10/7/2018";
          parameter Real _R_Ao=0.001 "resistance of aorta , mmHg*sec/mL";
          parameter Real _R_SA=(90 - 0)/_CO_target*60
            "mmHg*sec/mL Systemic vasculature resistance, mmHg*sec/mL";
          parameter Real _R_tAo =  0.04;
          parameter Real _R_tSA =  0.08;
          parameter Physiolibrary.Types.HydraulicCompliance C_Ao=_C_Ao*ml_per_mmhg2SI;
          parameter Physiolibrary.Types.HydraulicCompliance C_SA=_C_SA*ml_per_mmhg2SI;
          parameter Physiolibrary.Types.HydraulicCompliance C_SV=_C_SV*ml_per_mmhg2SI;
          parameter Physiolibrary.Types.HydraulicResistance R_Ao=_R_Ao*
              mmHgSec_per_ml2SI;
          parameter Physiolibrary.Types.HydraulicResistance R_SA=_R_SA*
              mmHgSec_per_ml2SI;
          parameter Physiolibrary.Types.HydraulicResistance R_tAo = _R_tAo*mmHgSec_per_ml2SI;
          parameter Physiolibrary.Types.HydraulicResistance R_tSA = _R_tSA*mmHgSec_per_ml2SI;

          Physiolibrary.Hydraulic.Components.Resistor r_tAo(Resistance=R_tAo)
            annotation (Placement(transformation(extent={{-10,-10},{10,10}},
                rotation=270,
                origin={-300,50})));
          Physiolibrary.Hydraulic.Components.Resistor r_tsa(Resistance=R_tSA)
            annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=270,
                origin={-240,50})));

        Physiolibrary.Types.Volume volume;
          Physiolibrary.Types.Constants.HydraulicComplianceConst c_sv0(k=C_SV)
            annotation (Placement(transformation(extent={{-120,50},{-128,58}})));
          Physiolibrary.Types.Constants.HydraulicComplianceConst c_sa0(k=C_SA)
            annotation (Placement(transformation(extent={{-184,50},{-192,58}})));
          Physiolibrary.Blocks.Factors.InverseProportionalFactor
            inverseProportionalFactor(scalingFactor=3) annotation (Placement(
                transformation(extent={{-190,28},{-210,48}})));
          Physiolibrary.Blocks.Factors.InverseProportionalFactor
            inverseProportionalFactor1(scalingFactor=2) annotation (Placement(
                transformation(extent={{-130,28},{-150,48}})));
          Physiolibrary.Types.Constants.HydraulicResistanceConst r_sa0(k(
                displayUnit="(mmHg.s)/ml") = R_SA) annotation (Placement(
                transformation(extent={{-184,130},{-192,138}})));
          Physiolibrary.Blocks.Factors.InverseProportionalFactor
            inverseProportionalFactor2(scalingFactor=2) annotation (Placement(
                transformation(extent={{-200,110},{-220,130}})));
          Physiolibrary.Blocks.Math.Reciprocal rec annotation (Placement(
                transformation(
                extent={{-6,-6},{6,6}},
                rotation=270,
                origin={-210,102})));
        equation
          volume =c_ao.volume + c_sa.volume + c_sv.volume;

          connect(port_a, r_ao.q_in) annotation (Line(
              points={{-320,80},{-280,80}},
              color={0,0,0},
              thickness=1));
          connect(r_ao.q_out, r_sa.q_in) annotation (Line(
              points={{-260,80},{-220,80}},
              color={0,0,0},
              thickness=1));
          connect(r_sa.q_out, port_b) annotation (Line(
              points={{-200,80},{130,80},{130,80},{460,80}},
              color={0,0,0},
              thickness=1));
          connect(c_sv.q_in, r_sa.q_out) annotation (Line(
              points={{-140,18},{-160,18},{-160,80},{-200,80}},
              color={0,0,0},
              thickness=1));
          connect(c_ao.q_in, r_tAo.q_out) annotation (Line(
              points={{-300,20},{-300,40}},
              color={0,0,0},
              thickness=1));
          connect(r_tAo.q_in, r_ao.q_in) annotation (Line(
              points={{-300,60},{-300,80},{-280,80}},
              color={0,0,0},
              thickness=1));
          connect(c_sa.q_in, r_tsa.q_out) annotation (Line(
              points={{-200,20},{-240,20},{-240,40}},
              color={0,0,0},
              thickness=1));
          connect(r_tsa.q_in, r_sa.q_in) annotation (Line(
              points={{-240,60},{-240,80},{-220,80}},
              color={0,0,0},
              thickness=1));
          connect(c_sa.compliance, inverseProportionalFactor.y)
            annotation (Line(points={{-200,28},{-200,34}}, color={0,0,127}));
          connect(c_sa0.y, inverseProportionalFactor.yBase) annotation (Line(
                points={{-193,54},{-200,54},{-200,40}}, color={0,0,127}));
          connect(c_sv.compliance, inverseProportionalFactor1.y)
            annotation (Line(points={{-140,26},{-140,34}}, color={0,0,127}));
          connect(c_sv0.y, inverseProportionalFactor1.yBase) annotation (Line(
                points={{-129,54},{-140,54},{-140,40}}, color={0,0,127}));
          connect(r_sa0.y, inverseProportionalFactor2.yBase) annotation (Line(
                points={{-193,134},{-210,134},{-210,122}}, color={0,0,127}));
          connect(inverseProportionalFactor2.y, rec.u) annotation (Line(points=
                  {{-210,116},{-210,109.2}}, color={0,0,127}));
          connect(rec.y, r_sa.cond)
            annotation (Line(points={{-210,95.4},{-210,86}}, color={0,0,127}));
          connect(inverseProportionalFactor.u, inverseProportionalFactor2.u)
            annotation (Line(points={{-192,38},{-180,38},{-180,120},{-202,120}},
                color={0,0,127}));
          connect(inverseProportionalFactor.u, inverseProportionalFactor1.u)
            annotation (Line(points={{-192,38},{-180,38},{-180,-10},{-120,-10},
                  {-120,38},{-132,38}}, color={0,0,127}));
          connect(phi_input1, inverseProportionalFactor1.u) annotation (Line(
                points={{-280,-10},{-120,-10},{-120,38},{-132,38}}, color={0,0,
                  127}));
        end Systemic_TriSeg;

        model Systemic_CutOff "A cut-off circulation with no throughput"
          extends partialSystemic;
          Physiolibrary.Types.Constants.FractionConst fraction(k=0) annotation (
             Placement(transformation(extent={{-276,144},{-268,152}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump(
              SolutionFlow=0)
            annotation (Placement(transformation(extent={{34,70},{14,90}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump1(
              SolutionFlow=0)
            annotation (Placement(transformation(extent={{72,70},{92,90}})));
        equation
          connect(fraction.y, baroreflex_system.carotid_distention) annotation (
             Line(points={{-267,148},{-252.5,148},{-252.5,158.667},{-238.667,
                  158.667}}, color={0,0,127}));
          connect(fraction.y, baroreflex_system.aortic_distention) annotation (
              Line(points={{-267,148},{-252,148},{-252,145.333},{-238.667,
                  145.333}}, color={0,0,127}));
          connect(port_a, unlimitedPump.q_out) annotation (Line(
              points={{-320,80},{14,80}},
              color={0,0,0},
              thickness=1));
          connect(port_b, unlimitedPump1.q_out) annotation (Line(
              points={{460,80},{92,80}},
              color={0,0,0},
              thickness=1));
          annotation (Icon(graphics={
                Line(
                  points={{-192,-54},{88,180}},
                  color={0,0,0},
                  thickness=0.5),
                Line(
                  points={{-4,-62},{276,172}},
                  color={0,0,0},
                  thickness=0.5),
                Line(
                  points={{-296,0},{-142,0}},
                  color={0,0,0},
                  thickness=0.5),
                Line(
                  points={{100,0},{420,0}},
                  color={0,0,0},
                  thickness=0.5)}));
        end Systemic_CutOff;

        model Systemic_TriSeg_Rat "Rat parametrization of simple TriSeg circulation"
          extends Systemic_TriSeg(
            _R_tSA=4,
            _R_tAo=0.5,
            _R_SA=88/_CO_target*60,
            _R_Ao=2.5,
            _C_SV=2.5,
            _C_SA=0.0077157,
            _C_Ao=0.0022045,
            _HR=0,
            _CO_target=95,
            c_sv(volume_start=vfactor*4.8e-06),
            c_sa(volume_start=vfactor*3e-06),
            c_ao(volume_start=vfactor*1e-06));

            parameter Physiolibrary.Types.Fraction vfactor = 0.732;
        //
        // % Lumped circulatory parameters
        // C_Ao = 0.0022045;  % Proximal aortic compliance, mL/mmHg
        // C_SA = 0.0077157; % Systemic arterial compliance, mL/mmHg
        //
        // C_SV = 2.5; % Systemic venous compliance, mL/mmHg  DAB 10/7/2018
        // R_Ao   = 2.5; % resistance of aorta , mmHg*sec/mL
        // R_SA   = adjvar(7)*88/CO_target*60;% mmHg*sec/mL; % Systemic vasculature resistance, mmHg*sec/mL
        // R_SV   = 0.25;
        // R_tAo  = 0.5;
        // R_tSA  = 4;
        //

        end Systemic_TriSeg_Rat;

        package Postures
          model SystemicAV_SupineTilt
            "Tilt the erect body - adds the default vessel orientations."
            extends SystemicAV(
                ascending_aorta_A(sinAlpha=1),
              ascending_aorta_B(sinAlpha=1),
              ascending_aorta_C(sinAlpha=1),
              ascending_aorta_D(sinAlpha=1),
              aortic_arch_C2(sinAlpha=1),
              aortic_arch_C46(sinAlpha=0),
              aortic_arch_C64(sinAlpha=0),
              common_carotid_R6_A(sinAlpha=1),
              common_carotid_R6_B(sinAlpha=1),
              common_carotid_R6_C(sinAlpha=1),
              internal_carotid_R8_A(sinAlpha=1),
              internal_carotid_R8_B(sinAlpha=1),
              common_carotid_L48_A(sinAlpha=1),
              common_carotid_L48_B(sinAlpha=1),
              common_carotid_L48_C(sinAlpha=1),
              common_carotid_L48_D(sinAlpha=1),
              internal_carotid_L50_A(sinAlpha=1),
              internal_carotid_L50_B(sinAlpha=1),
              brachial_L82(sinAlpha=-1),
              ulnar_T2_L84(sinAlpha=-1),
              brachial_R34(sinAlpha=-1),
              ulnar_T2_R36(sinAlpha=-1),
              vertebral_vein_L126(sinAlpha=-1),
              brachial_vein_L138(sinAlpha=1),
              brachial_vein_L142(sinAlpha=1),
              ulnar_vein_T7_L144(sinAlpha=1),
              brachial_vein_L152(sinAlpha=1),
              radial_vein_T3_L154(sinAlpha=1),
              brachial_vein_R104(sinAlpha=1),
              brachial_vein_R114(sinAlpha=1),
              brachial_vein_R108(sinAlpha=1),
              ulnar_vein_T7_R110(sinAlpha=1),
              brachial_vein_R118(sinAlpha=1),
              radial_vein_T3_R120(sinAlpha=1),
              brachial_vein_L148(sinAlpha=1),
              superior_vena_cava_C2(sinAlpha=-1),
              superior_vena_cava_C88(sinAlpha=-1),
              brachiocephalic_vein_R90(sinAlpha=-1),
              brachiocephalic_vein_R94(sinAlpha=-1),
              brachiocephalic_vein_L128(sinAlpha=-1),
              brachiocephalic_vein_L124(sinAlpha=-1),
              internal_jugular_vein_R122(sinAlpha=-1),
              external_jugular_vein_R98(sinAlpha=-1),
              thoracic_aorta_C96(sinAlpha=-1),
              thoracic_aorta_C100(sinAlpha=-1),
              thoracic_aorta_C104(sinAlpha=-1),
              thoracic_aorta_C108(sinAlpha=-1),
              thoracic_aorta_C112(sinAlpha=-1),
              aortic_arch_C94(sinAlpha=-1),
              vertebral_vein_R92(sinAlpha=-1),
              internal_jugular_vein_L156(sinAlpha=-1),
              external_jugular_vein_L132(sinAlpha=-1),
              abdominal_aorta_C114(sinAlpha=-1),
              abdominal_aorta_C136(sinAlpha=-1),
              abdominal_aorta_C164(sinAlpha=-1),
              abdominal_aorta_C176(sinAlpha=-1),
              abdominal_aorta_C188(sinAlpha=-1),
              abdominal_aorta_C192(sinAlpha=-1),
              common_iliac_R216(sinAlpha=-1),
              external_iliac_R220(sinAlpha=-1),
              femoral_R222(sinAlpha=-1),
              common_iliac_L194(sinAlpha=-1),
              external_iliac_L198(sinAlpha=-1),
              femoral_L200(sinAlpha=-1),
              femoral_R226(sinAlpha=-1),
              popliteal_R228(sinAlpha=-1),
              popliteal_R232(sinAlpha=-1),
              tibiofibular_trunk_R234(sinAlpha=-1),
              femoral_L204(sinAlpha=-1),
              popliteal_L206(sinAlpha=-1),
              popliteal_L210(sinAlpha=-1),
              tibiofibular_trunk_L212(sinAlpha=-1),
              renal_vein_T1_L22(sinAlpha=1),
              internal_iliac_vein_T1_R30(sinAlpha=1),
              profunda_femoris_vein_T2_R40(sinAlpha=1),
              anterior_tibial_vein_T4_R50(sinAlpha=1),
              posterior_tibial_vein_T6_R54(sinAlpha=1),
              internal_iliac_vein_T1_L60(sinAlpha=1),
              profunda_femoris_vein_T2_L70(sinAlpha=1),
              anterior_tibial_vein_T4_L80(sinAlpha=1),
              posterior_tibial_vein_T6_L84(sinAlpha=1),
              external_iliac_vein_R32(sinAlpha=1),
              femoral_vein_R34(sinAlpha=1),
              femoral_vein_R38(sinAlpha=1),
              femoral_vein_R42(sinAlpha=1),
              femoral_vein_R46(sinAlpha=1),
              popliteal_vein_R48(sinAlpha=1),
              popliteal_vein_R52(sinAlpha=1),
              external_iliac_vein_L62(sinAlpha=1),
              femoral_vein_L64(sinAlpha=1),
              femoral_vein_L68(sinAlpha=1),
              femoral_vein_L72(sinAlpha=1),
              femoral_vein_L76(sinAlpha=1),
              popliteal_vein_L78(sinAlpha=1),
              popliteal_vein_L82(sinAlpha=1),
              inferior_vena_cava_C20(sinAlpha=1),
              inferior_vena_cava_C24(sinAlpha=1),
              common_iliac_vein_L56(sinAlpha=1),
              common_iliac_vein_R26(sinAlpha=1),
              external_iliac_vein_R28(sinAlpha=1),
              external_iliac_vein_L58(sinAlpha=1),
              inferior_vena_cava_C16(sinAlpha=1),
              inferior_vena_cava_C12(sinAlpha=1),
              inferior_vena_cava_C8(sinAlpha=1));
          end SystemicAV_SupineTilt;

          model SystemicAV_Sit_Stand_chair
            "Tilt the erect body and additionaly bend the femur to simulate sitting on a chair."
            extends SystemicAV_SupineTilt(
              femoral_R222(sinAlpha=-1, UseTiltInput =   true),
              femoral_L200(sinAlpha=-1, UseTiltInput =   true),
              femoral_R226(sinAlpha=-1, UseTiltInput =   true),
              femoral_L204(sinAlpha=-1, UseTiltInput =   true),
              femoral_vein_R34(sinAlpha=1, UseTiltInput =   true),
              femoral_vein_R38(sinAlpha=1, UseTiltInput =   true),
              femoral_vein_R42(sinAlpha=1, UseTiltInput =   true),
              femoral_vein_R46(sinAlpha=1, UseTiltInput =   true),
              femoral_vein_L64(sinAlpha=1, UseTiltInput =   true),
              femoral_vein_L68(sinAlpha=1, UseTiltInput =   true),
              femoral_vein_L72(sinAlpha=1, UseTiltInput =   true),
              femoral_vein_L76(sinAlpha=1, UseTiltInput =   true));

            Modelica.Blocks.Math.Gain arterialSideTiltNode(final k=1)
              "Only a node for simpler arrangement of connections of the tilt angle."
              annotation (Placement(transformation(extent={{116,-46},{136,-26}})));
            Modelica.Blocks.Math.Gain venousSideTiltNode(final k=1)
              "Only a node for simpler arrangement of connections of the tilt angle."
              annotation (Placement(transformation(extent={{-120,-52},{-100,-32}})));
            Modelica.Blocks.Interfaces.RealInput femur_angle "leg angle in radians: sitting = 0rad, standing = pi/2 rad"
                                                                                   annotation (Placement(
                transformation(extent={{-208,-94},{-168,-54}}),
                                                              iconTransformation(extent={{-162,
                      -100},{-122,-60}})));
          equation
            connect(venousSideTiltNode.y, femoral_L200.TiltInput)
              annotation (Line(points={{-99,-42},{-92,-42},{-92,-23}}, color={0,0,127}));
            connect(venousSideTiltNode.y, femoral_R222.TiltInput)
              annotation (Line(points={{-99,-42},{-93,-42},{-93,-5}}, color={0,0,127}));
            connect(venousSideTiltNode.y, femoral_L204.TiltInput)
              annotation (Line(points={{-99,-42},{-66,-42},{-66,-23}}, color={0,0,127}));
            connect(venousSideTiltNode.y, femoral_R226.TiltInput)
              annotation (Line(points={{-99,-42},{-65,-42},{-65,-5}}, color={0,0,127}));
            connect(arterialSideTiltNode.y, femoral_vein_L76.TiltInput)
              annotation (Line(points={{137,-36},{140,-36},{140,-23}}, color={0,0,127}));
            connect(arterialSideTiltNode.y, femoral_vein_R46.TiltInput)
              annotation (Line(points={{137,-36},{140,-36},{140,-5}}, color={0,0,127}));
            connect(arterialSideTiltNode.y, femoral_vein_L72.TiltInput)
              annotation (Line(points={{137,-36},{165,-36},{165,-23}}, color={0,0,127}));
            connect(arterialSideTiltNode.y, femoral_vein_R42.TiltInput)
              annotation (Line(points={{137,-36},{165,-36},{165,-5}}, color={0,0,127}));
            connect(arterialSideTiltNode.y, femoral_vein_L68.TiltInput)
              annotation (Line(points={{137,-36},{191,-36},{191,-23}}, color={0,0,127}));
            connect(arterialSideTiltNode.y, femoral_vein_R38.TiltInput)
              annotation (Line(points={{137,-36},{191,-36},{191,-5}}, color={0,0,127}));
            connect(arterialSideTiltNode.y, femoral_vein_L64.TiltInput)
              annotation (Line(points={{137,-36},{214,-36},{214,-23}}, color={0,0,127}));
            connect(arterialSideTiltNode.y, femoral_vein_R34.TiltInput)
              annotation (Line(points={{137,-36},{214,-36},{214,-5}}, color={0,0,127}));
            connect(femur_angle, venousSideTiltNode.u) annotation (Line(points={{-188,-74},
                    {-156,-74},{-156,-42},{-122,-42}}, color={0,0,127}));
            connect(femur_angle, arterialSideTiltNode.u) annotation (Line(points={{-188,-74},
                    {90,-74},{90,-36},{114,-36}}, color={0,0,127}));
          end SystemicAV_Sit_Stand_chair;

          model SystemicAV_SemiRecumbent
            "Tilt torso by Tilt (usually 30° pillow/wedge) and optional elevated / non-elevated legs (femurs only)"
            extends SystemicAV_Sit_Stand_chair(
              popliteal_R228(sinAlpha=0),
              popliteal_L206(sinAlpha=0),
              popliteal_R232(sinAlpha=0),
              tibiofibular_trunk_R234(sinAlpha=0),
              popliteal_L210(sinAlpha=0),
              tibiofibular_trunk_L212(sinAlpha=0),
              popliteal_vein_R48(sinAlpha=0),
              anterior_tibial_vein_T4_R50(sinAlpha=0),
              popliteal_vein_R52(sinAlpha=0),
              posterior_tibial_vein_T6_R54(sinAlpha=0),
              popliteal_vein_L78(sinAlpha=0),
              anterior_tibial_vein_T4_L80(sinAlpha=0),
              popliteal_vein_L82(sinAlpha=0),
              posterior_tibial_vein_T6_L84(sinAlpha=0),
              profunda_femoris_vein_T2_L70(sinAlpha=0),
              femoral_R222(sinAlpha=1),
              femoral_L200(sinAlpha=1),
              femoral_L204(sinAlpha=1),
              femoral_R226(sinAlpha=1),
              femoral_vein_R38(sinAlpha=-1),
              femoral_vein_R42(sinAlpha=-1),
              femoral_vein_R46(sinAlpha=-1),
              femoral_vein_L64(sinAlpha=-1),
              femoral_vein_L68(sinAlpha=-1),
              femoral_vein_L72(sinAlpha=-1),
              femoral_vein_L76(sinAlpha=-1),
              femoral_vein_R34(sinAlpha=-1));
          end SystemicAV_SemiRecumbent;

          model SystemicAV_Sit_Stand_bed
            "Tilt the erect body and additionaly bend the femur to simulate sitting on a bed (calves like supine)."
            extends SystemicAV(
                ascending_aorta_A(sinAlpha=1),
              ascending_aorta_B(sinAlpha=1),
              ascending_aorta_C(sinAlpha=1),
              ascending_aorta_D(sinAlpha=1),
              aortic_arch_C2(sinAlpha=1),
              aortic_arch_C46(sinAlpha=1),
              aortic_arch_C64(sinAlpha=1),
              common_carotid_R6_A(sinAlpha=1),
              common_carotid_R6_B(sinAlpha=1),
              common_carotid_R6_C(sinAlpha=1),
              internal_carotid_R8_A(sinAlpha=1),
              internal_carotid_R8_B(sinAlpha=1),
              common_carotid_L48_A(sinAlpha=1),
              common_carotid_L48_B(sinAlpha=1),
              common_carotid_L48_C(sinAlpha=1),
              common_carotid_L48_D(sinAlpha=1),
              internal_carotid_L50_A(sinAlpha=1),
              internal_carotid_L50_B(sinAlpha=1),
              brachial_L82(sinAlpha=-1),
              ulnar_T2_L84(sinAlpha=-1),
              brachial_R34(sinAlpha=-1),
              ulnar_T2_R36(sinAlpha=-1),
              vertebral_vein_L126(sinAlpha=-1),
              brachial_vein_L138(sinAlpha=1),
              brachial_vein_L142(sinAlpha=1),
              ulnar_vein_T7_L144(sinAlpha=1),
              brachial_vein_L152(sinAlpha=1),
              radial_vein_T3_L154(sinAlpha=1),
              brachial_vein_R104(sinAlpha=1),
              brachial_vein_R114(sinAlpha=1),
              brachial_vein_R108(sinAlpha=1),
              ulnar_vein_T7_R110(sinAlpha=1),
              brachial_vein_R118(sinAlpha=1),
              radial_vein_T3_R120(sinAlpha=1),
              brachial_vein_L148(sinAlpha=1),
              superior_vena_cava_C2(sinAlpha=-1),
              superior_vena_cava_C88(sinAlpha=-1),
              brachiocephalic_vein_R90(sinAlpha=-1),
              brachiocephalic_vein_R94(sinAlpha=-1),
              brachiocephalic_vein_L128(sinAlpha=-1),
              brachiocephalic_vein_L124(sinAlpha=-1),
              internal_jugular_vein_R122(sinAlpha=-1),
              external_jugular_vein_R98(sinAlpha=-1),
              thoracic_aorta_C96(sinAlpha=-1),
              thoracic_aorta_C100(sinAlpha=-1),
              thoracic_aorta_C104(sinAlpha=-1),
              thoracic_aorta_C108(sinAlpha=-1),
              thoracic_aorta_C112(sinAlpha=-1),
              aortic_arch_C94(sinAlpha=-1),
              vertebral_vein_R92(sinAlpha=-1),
              internal_jugular_vein_L156(sinAlpha=-1),
              external_jugular_vein_L132(sinAlpha=-1),
              abdominal_aorta_C114(sinAlpha=-1),
              abdominal_aorta_C136(sinAlpha=-1),
              abdominal_aorta_C164(sinAlpha=-1),
              abdominal_aorta_C176(sinAlpha=-1),
              abdominal_aorta_C188(sinAlpha=-1),
              abdominal_aorta_C192(sinAlpha=-1),
              common_iliac_R216(sinAlpha=-1),
              external_iliac_R220(sinAlpha=-1),
              femoral_R222(sinAlpha=-1, UseTiltInput =   true),
              common_iliac_L194(sinAlpha=-1),
              external_iliac_L198(sinAlpha=-1),
              femoral_L200(sinAlpha=-1, UseTiltInput =   true),
              femoral_R226(sinAlpha=-1, UseTiltInput =   true),
              popliteal_R228(
                UseTiltInput=true,
                             sinAlpha=-1,
                UseDistentionOutput=false),
              popliteal_R232(
                UseTiltInput=true,
                             sinAlpha=-1,
                UseDistentionOutput=false),
              tibiofibular_trunk_R234(
                UseTiltInput=true,    sinAlpha=-1,
                UseDistentionOutput=false),
              femoral_L204(sinAlpha=-1, UseTiltInput =   true),
              popliteal_L206(
                UseTiltInput=true,
                             sinAlpha=-1,
                UseDistentionOutput=false),
              popliteal_L210(
                UseTiltInput=true,
                             sinAlpha=-1,
                UseDistentionOutput=false),
              tibiofibular_trunk_L212(
                UseTiltInput=true,    sinAlpha=-1,
                UseDistentionOutput=false),
              renal_vein_T1_L22(sinAlpha=1),
              internal_iliac_vein_T1_R30(sinAlpha=1),
              profunda_femoris_vein_T2_R40(sinAlpha=1),
              anterior_tibial_vein_T4_R50(UseTiltInput=true,
                                          sinAlpha=1),
              posterior_tibial_vein_T6_R54(UseTiltInput=true,
                                           sinAlpha=1),
              internal_iliac_vein_T1_L60(sinAlpha=1),
              profunda_femoris_vein_T2_L70(sinAlpha=1),
              anterior_tibial_vein_T4_L80(UseTiltInput=true,
                                          sinAlpha=1),
              posterior_tibial_vein_T6_L84(UseTiltInput=true,
                                           sinAlpha=1),
              external_iliac_vein_R32(sinAlpha=1),
              femoral_vein_R34(sinAlpha=1, UseTiltInput =   true),
              femoral_vein_R38(sinAlpha=1, UseTiltInput =   true),
              femoral_vein_R42(sinAlpha=1, UseTiltInput =   true),
              femoral_vein_R46(sinAlpha=1, UseTiltInput =   true),
              popliteal_vein_R48(UseTiltInput=true,
                                 sinAlpha=1),
              popliteal_vein_R52(UseTiltInput=true,
                                 sinAlpha=1),
              external_iliac_vein_L62(sinAlpha=1),
              femoral_vein_L64(sinAlpha=1, UseTiltInput =   true),
              femoral_vein_L68(sinAlpha=1, UseTiltInput =   true),
              femoral_vein_L72(sinAlpha=1, UseTiltInput =   true),
              femoral_vein_L76(sinAlpha=1, UseTiltInput =   true),
              popliteal_vein_L78(UseTiltInput=true,
                                 sinAlpha=1),
              popliteal_vein_L82(UseTiltInput=true,
                                 sinAlpha=1),
              inferior_vena_cava_C20(sinAlpha=1),
              inferior_vena_cava_C24(sinAlpha=1),
              common_iliac_vein_L56(sinAlpha=1),
              common_iliac_vein_R26(sinAlpha=1),
              external_iliac_vein_R28(sinAlpha=1),
              external_iliac_vein_L58(sinAlpha=1),
              inferior_vena_cava_C16(sinAlpha=1),
              inferior_vena_cava_C12(sinAlpha=1),
              inferior_vena_cava_C8(sinAlpha=1));

            Modelica.Blocks.Math.Gain gain(k=1)
              annotation (Placement(transformation(extent={{94,-84},{114,-64}})));
            Modelica.Blocks.Math.Gain gain1(k=-1)
              annotation (Placement(transformation(extent={{-120,-52},{-100,-32}})));
            Modelica.Blocks.Interfaces.RealInput stand_input "sitting = 0deg, standing = 90deg"
                                                                                   annotation (Placement(
                transformation(extent={{-208,-94},{-168,-54}}),
                                                              iconTransformation(extent={{-162,
                      -100},{-122,-60}})));
          equation
            connect(gain1.y, femoral_L200.TiltInput)
              annotation (Line(points={{-99,-42},{-92,-42},{-92,-23}}, color={0,0,127}));
            connect(gain1.y, femoral_R222.TiltInput)
              annotation (Line(points={{-99,-42},{-93,-42},{-93,-5}}, color={0,0,127}));
            connect(gain1.y, femoral_L204.TiltInput)
              annotation (Line(points={{-99,-42},{-66,-42},{-66,-23}}, color={0,0,127}));
            connect(gain1.y, femoral_R226.TiltInput)
              annotation (Line(points={{-99,-42},{-65,-42},{-65,-5}}, color={0,0,127}));
            connect(gain.y, femoral_vein_L76.TiltInput)
              annotation (Line(points={{115,-74},{140,-74},{140,-23}}, color={0,0,127}));
            connect(gain.y, femoral_vein_R46.TiltInput)
              annotation (Line(points={{115,-74},{140,-74},{140,-5}}, color={0,0,127}));
            connect(gain.y, femoral_vein_L72.TiltInput)
              annotation (Line(points={{115,-74},{165,-74},{165,-23}}, color={0,0,127}));
            connect(gain.y, femoral_vein_R42.TiltInput)
              annotation (Line(points={{115,-74},{165,-74},{165,-5}}, color={0,0,127}));
            connect(gain.y, femoral_vein_L68.TiltInput)
              annotation (Line(points={{115,-74},{191,-74},{191,-23}}, color={0,0,127}));
            connect(gain.y, femoral_vein_R38.TiltInput)
              annotation (Line(points={{115,-74},{191,-74},{191,-5}}, color={0,0,127}));
            connect(gain.y, femoral_vein_L64.TiltInput)
              annotation (Line(points={{115,-74},{214,-74},{214,-23}}, color={0,0,127}));
            connect(gain.y, femoral_vein_R34.TiltInput)
              annotation (Line(points={{115,-74},{214,-74},{214,-5}}, color={0,0,127}));
            connect(stand_input, gain1.u) annotation (Line(points={{-188,-74},{-156,-74},{
                    -156,-42},{-122,-42}}, color={0,0,127}));
            connect(stand_input, gain.u) annotation (Line(points={{-188,-74},{
                    92,-74}},        color={0,0,127}));
            connect(popliteal_L206.TiltInput, femoral_L204.TiltInput)
              annotation (Line(points={{-39,-23},{-39,-42},{-66,-42},{-66,-23}},
                  color={0,0,127}));
            connect(popliteal_L210.TiltInput, femoral_L204.TiltInput)
              annotation (Line(points={{-14,-23},{-14,-42},{-66,-42},{-66,-23}},
                  color={0,0,127}));
            connect(tibiofibular_trunk_L212.TiltInput, femoral_L200.TiltInput)
              annotation (Line(points={{11,-23},{11,-42},{-92,-42},{-92,-23}},
                  color={0,0,127}));
            connect(tibiofibular_trunk_R234.TiltInput, femoral_L200.TiltInput)
              annotation (Line(points={{11,-5},{11,-42},{-92,-42},{-92,-23}},
                  color={0,0,127}));
            connect(popliteal_R232.TiltInput, femoral_L204.TiltInput)
              annotation (Line(points={{-14,-5},{-14,-42},{-66,-42},{-66,-23}},
                  color={0,0,127}));
            connect(popliteal_R228.TiltInput, femoral_L204.TiltInput)
              annotation (Line(points={{-40,-5},{-40,-42},{-66,-42},{-66,-23}},
                  color={0,0,127}));
            connect(anterior_tibial_vein_T4_L80.TiltInput, femoral_vein_L76.TiltInput)
              annotation (Line(points={{62,-33},{76,-33},{76,-34},{122,-34},{
                    122,-74},{140,-74},{140,-23}}, color={0,0,127}));
            connect(posterior_tibial_vein_T6_L84.TiltInput, femoral_vein_L76.TiltInput)
              annotation (Line(points={{62,-23},{86,-23},{86,-34},{122,-34},{
                    122,-74},{140,-74},{140,-23}}, color={0,0,127}));
            connect(popliteal_vein_L82.TiltInput, femoral_vein_L76.TiltInput)
              annotation (Line(points={{89,-23},{89,-34},{122,-34},{122,-74},{
                    140,-74},{140,-23}}, color={0,0,127}));
            connect(posterior_tibial_vein_T6_R54.TiltInput, femoral_vein_L76.TiltInput)
              annotation (Line(points={{62,-5},{76,-5},{76,-6},{86,-6},{86,-34},
                    {122,-34},{122,-74},{140,-74},{140,-23}}, color={0,0,127}));
            connect(anterior_tibial_vein_T4_R50.TiltInput, femoral_vein_L76.TiltInput)
              annotation (Line(points={{62,7},{76,7},{76,4},{86,4},{86,-34},{
                    122,-34},{122,-74},{140,-74},{140,-23}}, color={0,0,127}));
            connect(popliteal_vein_R52.TiltInput, femoral_vein_L76.TiltInput)
              annotation (Line(points={{89,-5},{89,-34},{122,-34},{122,-74},{
                    140,-74},{140,-23}}, color={0,0,127}));
            connect(popliteal_vein_L78.TiltInput, femoral_vein_L76.TiltInput)
              annotation (Line(points={{115,-23},{115,-34},{122,-34},{122,-74},
                    {140,-74},{140,-23}}, color={0,0,127}));
            connect(popliteal_vein_R48.TiltInput, femoral_vein_L76.TiltInput)
              annotation (Line(points={{115,-5},{115,-34},{122,-34},{122,-74},{
                    140,-74},{140,-23}}, color={0,0,127}));
          end SystemicAV_Sit_Stand_bed;
        end Postures;

        package ADAN86ArterialTree
          model arteries_ADAN86_dv
            extends partialSystemic;
            inner parameter Real periferyModifier = 1.3;

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Ascending_aorta
              ascending_aorta_A(
              l=Parameters_Systemic1.l_ascending_aorta_A,
              E=Parameters_Systemic1.E_ascending_aorta_A,
              r=Parameters_Systemic1.r_ascending_aorta_A) annotation (Placement(
                  transformation(extent={{-241,47},{-221,52}})));
            ADAN_main.Components.Obsolete.pv_type_thoracic ascending_aorta_B(
              l=Parameters_Systemic1.l_ascending_aorta_B,
              E=Parameters_Systemic1.E_ascending_aorta_B,
              r=Parameters_Systemic1.r_ascending_aorta_B) annotation (Placement(
                  transformation(extent={{-216,47},{-196,52}})));
            ADAN_main.Components.Obsolete.pv_type_thoracic ascending_aorta_C(
              l=Parameters_Systemic1.l_ascending_aorta_C,
              E=Parameters_Systemic1.E_ascending_aorta_C,
              r=Parameters_Systemic1.r_ascending_aorta_C) annotation (Placement(
                  transformation(extent={{-191,47},{-171,52}})));
            ADAN_main.Components.Obsolete.pv_type_thoracic ascending_aorta_D(
              l=Parameters_Systemic1.l_ascending_aorta_D,
              E=Parameters_Systemic1.E_ascending_aorta_D,
              r=Parameters_Systemic1.r_ascending_aorta_D) annotation (Placement(
                  transformation(extent={{-166,47},{-146,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic aortic_arch_C2(
              l=Parameters_Systemic1.l_aortic_arch_C2,
              E=Parameters_Systemic1.E_aortic_arch_C2,
              r=Parameters_Systemic1.r_aortic_arch_C2) annotation (Placement(
                  transformation(extent={{-141,47},{-121,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              brachiocephalic_trunk_C4(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_brachiocephalic_trunk_C4,
              E=Parameters_Systemic1.E_brachiocephalic_trunk_C4,
              r=Parameters_Systemic1.r_brachiocephalic_trunk_C4) annotation (
                Placement(transformation(extent={{-98,127},{-78,132}})));
            replaceable ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              aortic_arch_C46(
              l=Parameters_Systemic1.l_aortic_arch_C46,
              E=Parameters_Systemic1.E_aortic_arch_C46,
              r=Parameters_Systemic1.r_aortic_arch_C46) annotation (Placement(
                  transformation(extent={{-105,47},{-85,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic aortic_arch_C64(
              l=Parameters_Systemic1.l_aortic_arch_C64,
              E=Parameters_Systemic1.E_aortic_arch_C64,
              r=Parameters_Systemic1.r_aortic_arch_C64) annotation (Placement(
                  transformation(extent={{-78,47},{-58,52}})));
            ADAN_main.Components.Obsolete.pv_type_thoracic aortic_arch_C94(
              l=Parameters_Systemic1.l_aortic_arch_C94,
              E=Parameters_Systemic1.E_aortic_arch_C94,
              r=Parameters_Systemic1.r_aortic_arch_C94) annotation (Placement(
                  transformation(extent={{-49,47},{-29,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              thoracic_aorta_C96(
              l=Parameters_Systemic1.l_thoracic_aorta_C96,
              E=Parameters_Systemic1.E_thoracic_aorta_C96,
              r=Parameters_Systemic1.r_thoracic_aorta_C96)
              annotation (Placement(transformation(extent={{-26,47},{-6,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              thoracic_aorta_C100(
              l=Parameters_Systemic1.l_thoracic_aorta_C100,
              E=Parameters_Systemic1.E_thoracic_aorta_C100,
              r=Parameters_Systemic1.r_thoracic_aorta_C100)
              annotation (Placement(transformation(extent={{3,47},{23,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              thoracic_aorta_C104(
              l=Parameters_Systemic1.l_thoracic_aorta_C104,
              E=Parameters_Systemic1.E_thoracic_aorta_C104,
              r=Parameters_Systemic1.r_thoracic_aorta_C104)
              annotation (Placement(transformation(extent={{28,47},{48,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              thoracic_aorta_C108(
              l=Parameters_Systemic1.l_thoracic_aorta_C108,
              E=Parameters_Systemic1.E_thoracic_aorta_C108,
              r=Parameters_Systemic1.r_thoracic_aorta_C108)
              annotation (Placement(transformation(extent={{53,47},{73,52}})));
            ADAN_main.Components.Obsolete.pv_type_thoracic thoracic_aorta_C112(
              l=Parameters_Systemic1.l_thoracic_aorta_C112,
              E=Parameters_Systemic1.E_thoracic_aorta_C112,
              r=Parameters_Systemic1.r_thoracic_aorta_C112)
              annotation (Placement(transformation(extent={{78,47},{98,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C114(
              l=Parameters_Systemic1.l_abdominal_aorta_C114,
              E=Parameters_Systemic1.E_abdominal_aorta_C114,
              r=Parameters_Systemic1.r_abdominal_aorta_C114) annotation (
                Placement(transformation(extent={{-99,-43},{-79,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C136(
              l=Parameters_Systemic1.l_abdominal_aorta_C136,
              E=Parameters_Systemic1.E_abdominal_aorta_C136,
              r=Parameters_Systemic1.r_abdominal_aorta_C136) annotation (
                Placement(transformation(extent={{-74,-43},{-54,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C164(
              l=Parameters_Systemic1.l_abdominal_aorta_C164,
              E=Parameters_Systemic1.E_abdominal_aorta_C164,
              r=Parameters_Systemic1.r_abdominal_aorta_C164) annotation (
                Placement(transformation(extent={{-47,-43},{-27,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C176(
              l=Parameters_Systemic1.l_abdominal_aorta_C176,
              E=Parameters_Systemic1.E_abdominal_aorta_C176,
              r=Parameters_Systemic1.r_abdominal_aorta_C176) annotation (
                Placement(transformation(extent={{-2,-43},{18,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C188(
              l=Parameters_Systemic1.l_abdominal_aorta_C188,
              E=Parameters_Systemic1.E_abdominal_aorta_C188,
              r=Parameters_Systemic1.r_abdominal_aorta_C188) annotation (
                Placement(transformation(extent={{23,-43},{43,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C192(
              l=Parameters_Systemic1.l_abdominal_aorta_C192,
              E=Parameters_Systemic1.E_abdominal_aorta_C192,
              r=Parameters_Systemic1.r_abdominal_aorta_C192) annotation (
                Placement(transformation(extent={{48,-43},{68,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_intercostal_T1_R98(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_intercostal_T1_R98,
              E=Parameters_Systemic1.E_posterior_intercostal_T1_R98,
              R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_R98,
              C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_R98,
              r=Parameters_Systemic1.r_posterior_intercostal_T1_R98)
              annotation (Placement(transformation(extent={{3,37},{23,42}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_intercostal_T1_L102(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_intercostal_T1_L102,
              E=Parameters_Systemic1.E_posterior_intercostal_T1_L102,
              R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_L102,
              C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_L102,
              r=Parameters_Systemic1.r_posterior_intercostal_T1_L102)
              annotation (Placement(transformation(extent={{28,37},{48,42}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_intercostal_T2_R106(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_intercostal_T2_R106,
              E=Parameters_Systemic1.E_posterior_intercostal_T2_R106,
              R_T=Parameters_Systemic1.R_T_posterior_intercostal_T2_R106,
              C_T=Parameters_Systemic1.C_T_posterior_intercostal_T2_R106,
              r=Parameters_Systemic1.r_posterior_intercostal_T2_R106)
              annotation (Placement(transformation(extent={{51,37},{71,42}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_intercostal_T2_L110(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_intercostal_T2_L110,
              E=Parameters_Systemic1.E_posterior_intercostal_T2_L110,
              R_T=Parameters_Systemic1.R_T_posterior_intercostal_T2_L110,
              C_T=Parameters_Systemic1.C_T_posterior_intercostal_T2_L110,
              r=Parameters_Systemic1.r_posterior_intercostal_T2_L110)
              annotation (Placement(transformation(extent={{78,37},{98,42}})));
            ADAN_main.Components.Obsolete.pv_jII_type celiac_trunk_C116(
              l=Parameters_Systemic1.l_celiac_trunk_C116,
              E=Parameters_Systemic1.E_celiac_trunk_C116,
              r=Parameters_Systemic1.r_celiac_trunk_C116)
              annotation (Placement(transformation(extent={{-71,-3},{-51,2}})));
            ADAN_main.Components.Obsolete.pv_jII_type splenic_T2_C118(
              l=Parameters_Systemic1.l_splenic_T2_C118,
              E=Parameters_Systemic1.E_splenic_T2_C118,
              r=Parameters_Systemic1.r_splenic_T2_C118)
              annotation (Placement(transformation(extent={{-46,-3},{-26,2}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              left_gastric_T3_C120(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_left_gastric_T3_C120,
              E=Parameters_Systemic1.E_left_gastric_T3_C120,
              R_T=Parameters_Systemic1.R_T_left_gastric_T3_C120,
              C_T=Parameters_Systemic1.C_T_left_gastric_T3_C120,
              r=Parameters_Systemic1.r_left_gastric_T3_C120)
              annotation (Placement(transformation(extent={{-45,5},{-25,10}})));
            ADAN_main.Components.Obsolete.pv_jII_type splenic_T2_C122(
              l=Parameters_Systemic1.l_splenic_T2_C122,
              E=Parameters_Systemic1.E_splenic_T2_C122,
              r=Parameters_Systemic1.r_splenic_T2_C122)
              annotation (Placement(transformation(extent={{-18,-3},{2,2}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              dorsal_pancreatic_T1_C124(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_dorsal_pancreatic_T1_C124,
              E=Parameters_Systemic1.E_dorsal_pancreatic_T1_C124,
              R_T=Parameters_Systemic1.R_T_dorsal_pancreatic_T1_C124,
              C_T=Parameters_Systemic1.C_T_dorsal_pancreatic_T1_C124,
              r=Parameters_Systemic1.r_dorsal_pancreatic_T1_C124)
              annotation (Placement(transformation(extent={{-17,5},{3,10}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              splenic_T2_C126(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_splenic_T2_C126,
              E=Parameters_Systemic1.E_splenic_T2_C126,
              R_T=Parameters_Systemic1.R_T_splenic_T2_C126,
              C_T=Parameters_Systemic1.C_T_splenic_T2_C126,
              r=Parameters_Systemic1.r_splenic_T2_C126)
              annotation (Placement(transformation(extent={{8,5},{28,10}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_hepatic_C128(
              l=Parameters_Systemic1.l_common_hepatic_C128,
              E=Parameters_Systemic1.E_common_hepatic_C128,
              r=Parameters_Systemic1.r_common_hepatic_C128)
              annotation (Placement(transformation(extent={{9,-3},{29,2}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              hepatic_artery_proper_C130(
              l=Parameters_Systemic1.l_hepatic_artery_proper_C130,
              E=Parameters_Systemic1.E_hepatic_artery_proper_C130,
              r=Parameters_Systemic1.r_hepatic_artery_proper_C130)
              annotation (Placement(transformation(extent={{32,-3},{52,2}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              hepatic_artery_proper_left_branch_C132(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_hepatic_artery_proper_left_branch_C132,
              E=Parameters_Systemic1.E_hepatic_artery_proper_left_branch_C132,
              R_T=Parameters_Systemic1.R_T_hepatic_artery_proper_left_branch_C132,
              C_T=Parameters_Systemic1.C_T_hepatic_artery_proper_left_branch_C132,
              r=Parameters_Systemic1.r_hepatic_artery_proper_left_branch_C132)
              annotation (Placement(transformation(extent={{55,-3},{75,2}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              hepatic_artery_proper_right_branch_C134(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_hepatic_artery_proper_right_branch_C134,
              E=Parameters_Systemic1.E_hepatic_artery_proper_right_branch_C134,
              R_T=Parameters_Systemic1.R_T_hepatic_artery_proper_right_branch_C134,
              C_T=Parameters_Systemic1.C_T_hepatic_artery_proper_right_branch_C134,
              r=Parameters_Systemic1.r_hepatic_artery_proper_right_branch_C134)
              annotation (Placement(transformation(extent={{56,5},{76,10}})));

            Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter
              annotation (Placement(transformation(extent={{-270,64},{-250,84}})));
            Parametrization.Parameters_Systemic_tunable Parameters_Systemic1(k_E=settings.syst_art_k_E,
                height_actual=settings.height)
              annotation (Placement(transformation(extent={{48,-104},{68,-84}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              middle_colic_T8_C140(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_middle_colic_T8_C140,
              E=Parameters_Systemic1.E_middle_colic_T8_C140,
              R_T=Parameters_Systemic1.R_T_middle_colic_T8_C140,
              C_T=Parameters_Systemic1.C_T_middle_colic_T8_C140,
              r=Parameters_Systemic1.r_middle_colic_T8_C140) annotation (
                Placement(transformation(extent={{-18,-99},{2,-94}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C142(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C142,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C142,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C142) annotation (
               Placement(transformation(extent={{-19,-91},{1,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              jejunal_3_T10_C144(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_jejunal_3_T10_C144,
              E=Parameters_Systemic1.E_jejunal_3_T10_C144,
              R_T=Parameters_Systemic1.R_T_jejunal_3_T10_C144,
              C_T=Parameters_Systemic1.C_T_jejunal_3_T10_C144,
              r=Parameters_Systemic1.r_jejunal_3_T10_C144)
              annotation (Placement(transformation(extent={{6,-99},{26,-94}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C146(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C146,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C146,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C146)
              annotation (Placement(transformation(extent={{5,-91},{25,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              jejunal_6_T11_C148(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_jejunal_6_T11_C148,
              E=Parameters_Systemic1.E_jejunal_6_T11_C148,
              R_T=Parameters_Systemic1.R_T_jejunal_6_T11_C148,
              C_T=Parameters_Systemic1.C_T_jejunal_6_T11_C148,
              r=Parameters_Systemic1.r_jejunal_6_T11_C148) annotation (
                Placement(transformation(extent={{32,-99},{52,-94}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C150(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C150,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C150,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C150) annotation (
               Placement(transformation(extent={{31,-91},{51,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              ileocolic_T9_C152(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_ileocolic_T9_C152,
              E=Parameters_Systemic1.E_ileocolic_T9_C152,
              R_T=Parameters_Systemic1.R_T_ileocolic_T9_C152,
              C_T=Parameters_Systemic1.C_T_ileocolic_T9_C152,
              r=Parameters_Systemic1.r_ileocolic_T9_C152) annotation (Placement(
                  transformation(extent={{58,-99},{78,-94}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C154(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C154,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C154,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C154) annotation (
               Placement(transformation(extent={{57,-91},{77,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              ileal_4_T12_C156(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_ileal_4_T12_C156,
              E=Parameters_Systemic1.E_ileal_4_T12_C156,
              R_T=Parameters_Systemic1.R_T_ileal_4_T12_C156,
              C_T=Parameters_Systemic1.C_T_ileal_4_T12_C156,
              r=Parameters_Systemic1.r_ileal_4_T12_C156) annotation (Placement(
                  transformation(extent={{84,-99},{104,-94}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C158(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C158,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C158,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C158) annotation (
               Placement(transformation(extent={{83,-91},{103,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              ileal_6_T13_C160(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_ileal_6_T13_C160,
              E=Parameters_Systemic1.E_ileal_6_T13_C160,
              R_T=Parameters_Systemic1.R_T_ileal_6_T13_C160,
              C_T=Parameters_Systemic1.C_T_ileal_6_T13_C160,
              r=Parameters_Systemic1.r_ileal_6_T13_C160) annotation (Placement(
                  transformation(extent={{108,-99},{128,-94}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              superior_mesenteric_T4_C162(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C162,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C162,
              R_T=Parameters_Systemic1.R_T_superior_mesenteric_T4_C162,
              C_T=Parameters_Systemic1.C_T_superior_mesenteric_T4_C162,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C162) annotation (
               Placement(transformation(extent={{107,-91},{127,-86}})));
            ADAN_main.Components.Obsolete.pv_jII_type renal_L166(
              l=Parameters_Systemic1.l_renal_L166,
              E=Parameters_Systemic1.E_renal_L166,
              r=Parameters_Systemic1.r_renal_L166) annotation (Placement(
                  transformation(extent={{-2,-67},{18,-62}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              renal_anterior_branch_L168(
              l=Parameters_Systemic1.l_renal_anterior_branch_L168,
              E=Parameters_Systemic1.E_renal_anterior_branch_L168,
              r=Parameters_Systemic1.r_renal_anterior_branch_L168) annotation (
                Placement(transformation(extent={{23,-67},{43,-62}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              inferior_segmental_T5_L170(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_inferior_segmental_T5_L170,
              E=Parameters_Systemic1.E_inferior_segmental_T5_L170,
              R_T=Parameters_Systemic1.R_T_inferior_segmental_T5_L170,
              C_T=Parameters_Systemic1.C_T_inferior_segmental_T5_L170,
              r=Parameters_Systemic1.r_inferior_segmental_T5_L170) annotation (
                Placement(transformation(extent={{48,-67},{68,-62}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              superior_segmental_T4_L172(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_superior_segmental_T4_L172,
              E=Parameters_Systemic1.E_superior_segmental_T4_L172,
              R_T=Parameters_Systemic1.R_T_superior_segmental_T4_L172,
              C_T=Parameters_Systemic1.C_T_superior_segmental_T4_L172,
              r=Parameters_Systemic1.r_superior_segmental_T4_L172) annotation (
                Placement(transformation(extent={{47,-77},{67,-72}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              renal_posterior_branch_T3_L174(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_renal_posterior_branch_T3_L174,
              E=Parameters_Systemic1.E_renal_posterior_branch_T3_L174,
              R_T=Parameters_Systemic1.R_T_renal_posterior_branch_T3_L174,
              C_T=Parameters_Systemic1.C_T_renal_posterior_branch_T3_L174,
              r=Parameters_Systemic1.r_renal_posterior_branch_T3_L174)
              annotation (Placement(transformation(extent={{24,-77},{44,-72}})));
            ADAN_main.Components.Obsolete.pv_jII_type renal_R178(
              l=Parameters_Systemic1.l_renal_R178,
              E=Parameters_Systemic1.E_renal_R178,
              r=Parameters_Systemic1.r_renal_R178) annotation (Placement(
                  transformation(extent={{25,-25},{45,-20}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              renal_anterior_branch_R180(
              l=Parameters_Systemic1.l_renal_anterior_branch_R180,
              E=Parameters_Systemic1.E_renal_anterior_branch_R180,
              r=Parameters_Systemic1.r_renal_anterior_branch_R180) annotation (
                Placement(transformation(extent={{50,-25},{70,-20}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              superior_segmental_T4_R182(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_superior_segmental_T4_R182,
              E=Parameters_Systemic1.E_superior_segmental_T4_R182,
              R_T=Parameters_Systemic1.R_T_superior_segmental_T4_R182,
              C_T=Parameters_Systemic1.C_T_superior_segmental_T4_R182,
              r=Parameters_Systemic1.r_superior_segmental_T4_R182) annotation (
                Placement(transformation(extent={{75,-25},{95,-20}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              inferior_segmental_T5_R184(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_inferior_segmental_T5_R184,
              E=Parameters_Systemic1.E_inferior_segmental_T5_R184,
              R_T=Parameters_Systemic1.R_T_inferior_segmental_T5_R184,
              C_T=Parameters_Systemic1.C_T_inferior_segmental_T5_R184,
              r=Parameters_Systemic1.r_inferior_segmental_T5_R184) annotation (
                Placement(transformation(extent={{74,-17},{94,-12}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              renal_posterior_branch_T3_R186(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_renal_posterior_branch_T3_R186,
              E=Parameters_Systemic1.E_renal_posterior_branch_T3_R186,
              R_T=Parameters_Systemic1.R_T_renal_posterior_branch_T3_R186,
              C_T=Parameters_Systemic1.C_T_renal_posterior_branch_T3_R186,
              r=Parameters_Systemic1.r_renal_posterior_branch_T3_R186)
              annotation (Placement(transformation(extent={{49,-17},{69,-12}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              inferior_mesenteric_T5_C190(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_inferior_mesenteric_T5_C190,
              E=Parameters_Systemic1.E_inferior_mesenteric_T5_C190,
              R_T=Parameters_Systemic1.R_T_inferior_mesenteric_T5_C190,
              C_T=Parameters_Systemic1.C_T_inferior_mesenteric_T5_C190,
              r=Parameters_Systemic1.r_inferior_mesenteric_T5_C190) annotation (
               Placement(transformation(extent={{48,-57},{68,-52}})));
            ADAN_main.Components.Obsolete.pv_jII_type common_iliac_R216(
              l=Parameters_Systemic1.l_common_iliac_R216,
              E=Parameters_Systemic1.E_common_iliac_R216,
              r=Parameters_Systemic1.r_common_iliac_R216) annotation (Placement(
                  transformation(extent={{75,-43},{95,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              internal_iliac_T1_R218(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_internal_iliac_T1_R218,
              E=Parameters_Systemic1.E_internal_iliac_T1_R218,
              R_T=Parameters_Systemic1.R_T_internal_iliac_T1_R218,
              C_T=Parameters_Systemic1.C_T_internal_iliac_T1_R218,
              r=Parameters_Systemic1.r_internal_iliac_T1_R218) annotation (
                Placement(transformation(extent={{98,-33},{118,-28}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              external_iliac_R220(
              l=Parameters_Systemic1.l_external_iliac_R220,
              E=Parameters_Systemic1.E_external_iliac_R220,
              r=Parameters_Systemic1.r_external_iliac_R220) annotation (
                Placement(transformation(extent={{99,-43},{119,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type femoral_R222(
              l=Parameters_Systemic1.l_femoral_R222,
              E=Parameters_Systemic1.E_femoral_R222,
              r=Parameters_Systemic1.r_femoral_R222) annotation (Placement(
                  transformation(extent={{124,-43},{144,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              profundus_T2_R224(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_profundus_T2_R224,
              E=Parameters_Systemic1.E_profundus_T2_R224,
              R_T=Parameters_Systemic1.R_T_profundus_T2_R224,
              C_T=Parameters_Systemic1.C_T_profundus_T2_R224,
              r=Parameters_Systemic1.r_profundus_T2_R224) annotation (Placement(
                  transformation(extent={{149,-33},{169,-28}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              femoral_R226(
              l=Parameters_Systemic1.l_femoral_R226,
              E=Parameters_Systemic1.E_femoral_R226,
              r=Parameters_Systemic1.r_femoral_R226) annotation (Placement(
                  transformation(extent={{150,-43},{170,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type popliteal_R228(
              l=Parameters_Systemic1.l_popliteal_R228,
              E=Parameters_Systemic1.E_popliteal_R228,
              r=Parameters_Systemic1.r_popliteal_R228) annotation (Placement(
                  transformation(extent={{175,-43},{195,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              anterior_tibial_T3_R230(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_anterior_tibial_T3_R230,
              E=Parameters_Systemic1.E_anterior_tibial_T3_R230,
              R_T=Parameters_Systemic1.R_T_anterior_tibial_T3_R230,
              C_T=Parameters_Systemic1.C_T_anterior_tibial_T3_R230,
              r=Parameters_Systemic1.r_anterior_tibial_T3_R230) annotation (
                Placement(transformation(extent={{200,-33},{220,-28}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              popliteal_R232(
              l=Parameters_Systemic1.l_popliteal_R232,
              E=Parameters_Systemic1.E_popliteal_R232,
              r=Parameters_Systemic1.r_popliteal_R232) annotation (Placement(
                  transformation(extent={{199,-43},{219,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              tibiofibular_trunk_R234(
              l=Parameters_Systemic1.l_tibiofibular_trunk_R234,
              E=Parameters_Systemic1.E_tibiofibular_trunk_R234,
              r=Parameters_Systemic1.r_tibiofibular_trunk_R234) annotation (
                Placement(transformation(extent={{224,-43},{244,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_tibial_T4_R236(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_tibial_T4_R236,
              E=Parameters_Systemic1.E_posterior_tibial_T4_R236,
              R_T=Parameters_Systemic1.R_T_posterior_tibial_T4_R236,
              C_T=Parameters_Systemic1.C_T_posterior_tibial_T4_R236,
              r=Parameters_Systemic1.r_posterior_tibial_T4_R236) annotation (
                Placement(transformation(extent={{249,-43},{269,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type common_iliac_L194(
              l=Parameters_Systemic1.l_common_iliac_L194,
              E=Parameters_Systemic1.E_common_iliac_L194,
              r=Parameters_Systemic1.r_common_iliac_L194) annotation (Placement(
                  transformation(extent={{74,-57},{94,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              internal_iliac_T1_L196(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_internal_iliac_T1_L196,
              E=Parameters_Systemic1.E_internal_iliac_T1_L196,
              R_T=Parameters_Systemic1.R_T_internal_iliac_T1_L196,
              C_T=Parameters_Systemic1.C_T_internal_iliac_T1_L196,
              r=Parameters_Systemic1.r_internal_iliac_T1_L196) annotation (
                Placement(transformation(extent={{99,-65},{119,-60}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              external_iliac_L198(
              l=Parameters_Systemic1.l_external_iliac_L198,
              E=Parameters_Systemic1.E_external_iliac_L198,
              r=Parameters_Systemic1.r_external_iliac_L198) annotation (
                Placement(transformation(extent={{100,-57},{120,-52}})));
            ADAN_main.Components.Obsolete.pv_jII_type femoral_L200(
              l=Parameters_Systemic1.l_femoral_L200,
              E=Parameters_Systemic1.E_femoral_L200,
              r=Parameters_Systemic1.r_femoral_L200) annotation (Placement(
                  transformation(extent={{125,-57},{145,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              profundus_T2_L202(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_profundus_T2_L202,
              E=Parameters_Systemic1.E_profundus_T2_L202,
              R_T=Parameters_Systemic1.R_T_profundus_T2_L202,
              C_T=Parameters_Systemic1.C_T_profundus_T2_L202,
              r=Parameters_Systemic1.r_profundus_T2_L202) annotation (Placement(
                  transformation(extent={{150,-65},{170,-60}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              femoral_L204(
              l=Parameters_Systemic1.l_femoral_L204,
              E=Parameters_Systemic1.E_femoral_L204,
              r=Parameters_Systemic1.r_femoral_L204) annotation (Placement(
                  transformation(extent={{149,-57},{169,-52}})));
            ADAN_main.Components.Obsolete.pv_jII_type popliteal_L206(
              l=Parameters_Systemic1.l_popliteal_L206,
              E=Parameters_Systemic1.E_popliteal_L206,
              r=Parameters_Systemic1.r_popliteal_L206) annotation (Placement(
                  transformation(extent={{174,-57},{194,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              anterior_tibial_T3_L208(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_anterior_tibial_T3_L208,
              E=Parameters_Systemic1.E_anterior_tibial_T3_L208,
              R_T=Parameters_Systemic1.R_T_anterior_tibial_T3_L208,
              C_T=Parameters_Systemic1.C_T_anterior_tibial_T3_L208,
              r=Parameters_Systemic1.r_anterior_tibial_T3_L208) annotation (
                Placement(transformation(extent={{199,-65},{219,-60}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              popliteal_L210(
              l=Parameters_Systemic1.l_popliteal_L210,
              E=Parameters_Systemic1.E_popliteal_L210,
              r=Parameters_Systemic1.r_popliteal_L210) annotation (Placement(
                  transformation(extent={{200,-57},{220,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              tibiofibular_trunk_L212(
              l=Parameters_Systemic1.l_tibiofibular_trunk_L212,
              E=Parameters_Systemic1.E_tibiofibular_trunk_L212,
              r=Parameters_Systemic1.r_tibiofibular_trunk_L212) annotation (
                Placement(transformation(extent={{225,-57},{245,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_tibial_T4_L214(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_tibial_T4_L214,
              E=Parameters_Systemic1.E_posterior_tibial_T4_L214,
              R_T=Parameters_Systemic1.R_T_posterior_tibial_T4_L214,
              C_T=Parameters_Systemic1.C_T_posterior_tibial_T4_L214,
              r=Parameters_Systemic1.r_posterior_tibial_T4_L214) annotation (
                Placement(transformation(extent={{250,-57},{270,-52}})));
            ADAN_main.Components.Obsolete.pv_jII_type subclavian_R28(
              l=Parameters_Systemic1.l_subclavian_R28,
              E=Parameters_Systemic1.E_subclavian_R28,
              r=Parameters_Systemic1.r_subclavian_R28) annotation (Placement(
                  transformation(extent={{-75,119},{-55,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              subclavian_R30(
              l=Parameters_Systemic1.l_subclavian_R30,
              E=Parameters_Systemic1.E_subclavian_R30,
              r=Parameters_Systemic1.r_subclavian_R30) annotation (Placement(
                  transformation(extent={{-50,119},{-30,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              axillary_R32(
              l=Parameters_Systemic1.l_axillary_R32,
              E=Parameters_Systemic1.E_axillary_R32,
              r=Parameters_Systemic1.r_axillary_R32) annotation (Placement(
                  transformation(extent={{-25,119},{-5,124}})));
            ADAN_main.Components.Obsolete.pv_jII_type brachial_R34(
              l=Parameters_Systemic1.l_brachial_R34,
              E=Parameters_Systemic1.E_brachial_R34,
              r=Parameters_Systemic1.r_brachial_R34)
              annotation (Placement(transformation(extent={{0,119},{20,124}})));
            ADAN_main.Components.Obsolete.pv_jII_type ulnar_T2_R36(
              l=Parameters_Systemic1.l_ulnar_T2_R36,
              E=Parameters_Systemic1.E_ulnar_T2_R36,
              r=Parameters_Systemic1.r_ulnar_T2_R36) annotation (Placement(
                  transformation(extent={{25,119},{45,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_interosseous_R38(
              l=Parameters_Systemic1.l_common_interosseous_R38,
              E=Parameters_Systemic1.E_common_interosseous_R38,
              r=Parameters_Systemic1.r_common_interosseous_R38) annotation (
                Placement(transformation(extent={{50,119},{70,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_interosseous_T3_R40(
              p_out=u_svl,
              l=Parameters_Systemic1.l_posterior_interosseous_T3_R40,
              E=Parameters_Systemic1.E_posterior_interosseous_T3_R40,
              R_T=Parameters_Systemic1.R_T_posterior_interosseous_T3_R40,
              C_T=Parameters_Systemic1.C_T_posterior_interosseous_T3_R40,
              r=Parameters_Systemic1.r_posterior_interosseous_T3_R40)
              annotation (Placement(transformation(extent={{75,119},{95,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              ulnar_T2_R42(
              p_out=u_svl,
              l=Parameters_Systemic1.l_ulnar_T2_R42,
              E=Parameters_Systemic1.E_ulnar_T2_R42,
              R_T=Parameters_Systemic1.R_T_ulnar_T2_R42,
              C_T=Parameters_Systemic1.C_T_ulnar_T2_R42,
              r=Parameters_Systemic1.r_ulnar_T2_R42) annotation (Placement(
                  transformation(extent={{50,109},{70,114}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              radial_T1_R44(
              p_out=u_svl,
              l=Parameters_Systemic1.l_radial_T1_R44,
              E=Parameters_Systemic1.E_radial_T1_R44,
              R_T=Parameters_Systemic1.R_T_radial_T1_R44,
              C_T=Parameters_Systemic1.C_T_radial_T1_R44,
              r=Parameters_Systemic1.r_radial_T1_R44) annotation (Placement(
                  transformation(extent={{25,109},{45,114}})));
            ADAN_main.Components.Obsolete.pv_jII_type subclavian_L66(
              l=Parameters_Systemic1.l_subclavian_L66,
              E=Parameters_Systemic1.E_subclavian_L66,
              r=Parameters_Systemic1.r_subclavian_L66) annotation (Placement(
                  transformation(extent={{-50,73},{-30,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              subclavian_L78(
              l=Parameters_Systemic1.l_subclavian_L78,
              E=Parameters_Systemic1.E_subclavian_L78,
              r=Parameters_Systemic1.r_subclavian_L78)
              annotation (Placement(transformation(extent={{-25,73},{-5,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              axillary_L80(
              l=Parameters_Systemic1.l_axillary_L80,
              E=Parameters_Systemic1.E_axillary_L80,
              r=Parameters_Systemic1.r_axillary_L80)
              annotation (Placement(transformation(extent={{0,73},{20,78}})));
            ADAN_main.Components.Obsolete.pv_jII_type brachial_L82(
              l=Parameters_Systemic1.l_brachial_L82,
              E=Parameters_Systemic1.E_brachial_L82,
              r=Parameters_Systemic1.r_brachial_L82)
              annotation (Placement(transformation(extent={{25,73},{45,78}})));
            ADAN_main.Components.Obsolete.pv_jII_type ulnar_T2_L84(
              l=Parameters_Systemic1.l_ulnar_T2_L84,
              E=Parameters_Systemic1.E_ulnar_T2_L84,
              r=Parameters_Systemic1.r_ulnar_T2_L84)
              annotation (Placement(transformation(extent={{50,73},{70,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_interosseous_L86(
              l=Parameters_Systemic1.l_common_interosseous_L86,
              E=Parameters_Systemic1.E_common_interosseous_L86,
              r=Parameters_Systemic1.r_common_interosseous_L86)
              annotation (Placement(transformation(extent={{75,73},{95,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_interosseous_T3_L88(
              p_out=u_svl,
              l=Parameters_Systemic1.l_posterior_interosseous_T3_L88,
              E=Parameters_Systemic1.E_posterior_interosseous_T3_L88,
              R_T=Parameters_Systemic1.R_T_posterior_interosseous_T3_L88,
              C_T=Parameters_Systemic1.C_T_posterior_interosseous_T3_L88,
              r=Parameters_Systemic1.r_posterior_interosseous_T3_L88)
              annotation (Placement(transformation(extent={{100,73},{120,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              ulnar_T2_L90(
              p_out=u_svl,
              l=Parameters_Systemic1.l_ulnar_T2_L90,
              E=Parameters_Systemic1.E_ulnar_T2_L90,
              R_T=Parameters_Systemic1.R_T_ulnar_T2_L90,
              C_T=Parameters_Systemic1.C_T_ulnar_T2_L90,
              r=Parameters_Systemic1.r_ulnar_T2_L90)
              annotation (Placement(transformation(extent={{75,63},{95,68}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              radial_T1_L92(
              p_out=u_svl,
              l=Parameters_Systemic1.l_radial_T1_L92,
              E=Parameters_Systemic1.E_radial_T1_L92,
              R_T=Parameters_Systemic1.R_T_radial_T1_L92,
              C_T=Parameters_Systemic1.C_T_radial_T1_L92,
              r=Parameters_Systemic1.r_radial_T1_L92)
              annotation (Placement(transformation(extent={{50,63},{70,68}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_R6_A(
              l=Parameters_Systemic1.l_common_carotid_R6_A,
              E=Parameters_Systemic1.E_common_carotid_R6_A,
              r=Parameters_Systemic1.r_common_carotid_R6_A) annotation (
                Placement(transformation(extent={{-73,133},{-53,138}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_R6_B(
              l=Parameters_Systemic1.l_common_carotid_R6_B,
              E=Parameters_Systemic1.E_common_carotid_R6_B,
              r=Parameters_Systemic1.r_common_carotid_R6_B) annotation (
                Placement(transformation(extent={{-48,133},{-28,138}})));
            ADAN_main.Components.Obsolete.pv_jII_type common_carotid_R6_C(
              l=Parameters_Systemic1.l_common_carotid_R6_C,
              E=Parameters_Systemic1.E_common_carotid_R6_C,
              r=Parameters_Systemic1.r_common_carotid_R6_C) annotation (
                Placement(transformation(extent={{-23,133},{-3,138}})));
            replaceable
              ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              internal_carotid_R8_A(
              l=Parameters_Systemic1.l_internal_carotid_R8_A,
              E=Parameters_Systemic1.E_internal_carotid_R8_A,
              r=Parameters_Systemic1.r_internal_carotid_R8_A)
              annotation (Placement(transformation(extent={{2,133},{22,138}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              internal_carotid_R8_B(
              l=Parameters_Systemic1.l_internal_carotid_R8_B,
              E=Parameters_Systemic1.E_internal_carotid_R8_B,
              r=Parameters_Systemic1.r_internal_carotid_R8_B) annotation (
                Placement(transformation(extent={{27,133},{47,138}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              internal_carotid_R8_C(
              p_out=u_svl,
              l=Parameters_Systemic1.l_internal_carotid_R8_C,
              E=Parameters_Systemic1.E_internal_carotid_R8_C,
              R_T=Parameters_Systemic1.R_T_internal_carotid_R8_C,
              C_T=Parameters_Systemic1.C_T_internal_carotid_R8_C,
              r=Parameters_Systemic1.r_internal_carotid_R8_C) annotation (
                Placement(transformation(extent={{54,133},{74,138}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              external_carotid_T2_R26(
              p_out=u_svl,
              l=Parameters_Systemic1.l_external_carotid_T2_R26,
              E=Parameters_Systemic1.E_external_carotid_T2_R26,
              R_T=Parameters_Systemic1.R_T_external_carotid_T2_R26,
              C_T=Parameters_Systemic1.C_T_external_carotid_T2_R26,
              r=Parameters_Systemic1.r_external_carotid_T2_R26)
              annotation (Placement(transformation(extent={{3,145},{23,150}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_L48_A(
              l=Parameters_Systemic1.l_common_carotid_L48_A,
              E=Parameters_Systemic1.E_common_carotid_L48_A,
              r=Parameters_Systemic1.r_common_carotid_L48_A) annotation (
                Placement(transformation(extent={{-72,93},{-52,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_L48_B(
              l=Parameters_Systemic1.l_common_carotid_L48_B,
              E=Parameters_Systemic1.E_common_carotid_L48_B,
              r=Parameters_Systemic1.r_common_carotid_L48_B) annotation (
                Placement(transformation(extent={{-47,93},{-27,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_L48_C(
              l=Parameters_Systemic1.l_common_carotid_L48_C,
              E=Parameters_Systemic1.E_common_carotid_L48_C,
              r=Parameters_Systemic1.r_common_carotid_L48_C)
              annotation (Placement(transformation(extent={{-22,93},{-2,98}})));
            ADAN_main.Components.Obsolete.pv_jII_type common_carotid_L48_D(
              l=Parameters_Systemic1.l_common_carotid_L48_D,
              E=Parameters_Systemic1.E_common_carotid_L48_D,
              r=Parameters_Systemic1.r_common_carotid_L48_D)
              annotation (Placement(transformation(extent={{3,93},{23,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              internal_carotid_L50_A(
              l=Parameters_Systemic1.l_internal_carotid_L50_A,
              E=Parameters_Systemic1.E_internal_carotid_L50_A,
              r=Parameters_Systemic1.r_internal_carotid_L50_A)
              annotation (Placement(transformation(extent={{28,93},{48,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              internal_carotid_L50_B(
              l=Parameters_Systemic1.l_internal_carotid_L50_B,
              E=Parameters_Systemic1.E_internal_carotid_L50_B,
              r=Parameters_Systemic1.r_internal_carotid_L50_B)
              annotation (Placement(transformation(extent={{53,93},{73,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              internal_carotid_L50_C(
              p_out=u_svl,
              l=Parameters_Systemic1.l_internal_carotid_L50_C,
              E=Parameters_Systemic1.E_internal_carotid_L50_C,
              R_T=Parameters_Systemic1.R_T_internal_carotid_L50_C,
              C_T=Parameters_Systemic1.C_T_internal_carotid_L50_C,
              r=Parameters_Systemic1.r_internal_carotid_L50_C)
              annotation (Placement(transformation(extent={{78,93},{98,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              external_carotid_T2_L62(
              p_out=u_svl,
              l=Parameters_Systemic1.l_external_carotid_T2_L62,
              E=Parameters_Systemic1.E_external_carotid_T2_L62,
              R_T=Parameters_Systemic1.R_T_external_carotid_T2_L62,
              C_T=Parameters_Systemic1.C_T_external_carotid_T2_L62,
              r=Parameters_Systemic1.r_external_carotid_T2_L62)
              annotation (Placement(transformation(extent={{27,85},{47,90}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              vertebral_L2(
              p_out=u_svl,
              l=Parameters_Systemic1.l_vertebral_L2,
              E=Parameters_Systemic1.E_vertebral_L2,
              R_T=Parameters_Systemic1.R_T_vertebral_L2,
              C_T=Parameters_Systemic1.C_T_vertebral_L2,
              r=Parameters_Systemic1.r_vertebral_L2)
              annotation (Placement(transformation(extent={{-26,63},{-6,68}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              vertebral_R272(
              p_out=u_svl,
              l=Parameters_Systemic1.l_vertebral_R272,
              E=Parameters_Systemic1.E_vertebral_R272,
              R_T=Parameters_Systemic1.R_T_vertebral_R272,
              C_T=Parameters_Systemic1.C_T_vertebral_R272,
              r=Parameters_Systemic1.r_vertebral_R272) annotation (Placement(
                  transformation(extent={{-49,111},{-29,116}})));
            Physiolibrary.Types.Pressure u_svl=pq_terminator_v_superior.u;
            Physiolibrary.Types.Pressure u_ivl = pq_terminator_v_inferior.u;
            Physiolibrary.Types.VolumeFlowRate v_veins = v_sup_venacava + v_inf_venacava;
            Real v_sup_venacava(unit = "m3.s-1") = v_arms+v_head;
            Real v_inf_venacava(unit = "m3.s-1") = v_chest+v_trunk+v_intestines+v_kidneys+v_legs;
            Real v_chest(unit = "m3.s-1") = v_posterior_intercostal_T1_R98+v_posterior_intercostal_T1_L102+v_posterior_intercostal_T2_R106+v_posterior_intercostal_T2_L110;
            Real v_trunk(unit = "m3.s-1")= v_left_gastric_T3_C120+v_dorsal_pancreatic_T1_C124+v_splenic_T2_C126+v_hepatic_artery_proper_left_branch_C132+v_hepatic_artery_proper_right_branch_C134;
            Real v_kidneys(unit = "m3.s-1") = v_inferior_segmental_T5_L170+v_superior_segmental_T4_L172+v_renal_posterior_branch_T3_L174+v_superior_segmental_T4_R182+v_inferior_segmental_T5_R184+v_renal_posterior_branch_T3_R186;
            Real v_intestines(unit = "m3.s-1") = v_middle_colic_T8_C140+v_jejunal_3_T10_C144+v_jejunal_6_T11_C148+v_ileocolic_T9_C152+v_ileal_4_T12_C156+v_ileal_6_T13_C160+v_superior_mesenteric_T4_C162+v_inferior_mesenteric_T5_C190;
            Real v_legs(unit = "m3.s-1") = v_internal_iliac_T1_R218+v_profundus_T2_R224+v_anterior_tibial_T3_R230+v_posterior_tibial_T4_R236+v_internal_iliac_T1_L196+v_profundus_T2_L202+v_anterior_tibial_T3_L208+v_posterior_tibial_T4_L214;
            Real v_arms(unit = "m3.s-1") = v_posterior_interosseous_T3_R40+v_ulnar_T2_R42+v_radial_T1_R44+v_posterior_interosseous_T3_L88+v_ulnar_T2_L90+v_radial_T1_L92;
            Real v_head(unit = "m3.s-1") = v_external_carotid_T2_R26+v_external_carotid_T2_L62+v_internal_carotid_R8_C+v_internal_carotid_L50_C+v_vertebral_R272+v_vertebral_L2;
            Real v_posterior_intercostal_T1_R98(unit = "m3.s-1");
            Real v_posterior_intercostal_T1_L102(unit = "m3.s-1");
            Real v_posterior_intercostal_T2_R106(unit = "m3.s-1");
            Real v_posterior_intercostal_T2_L110(unit = "m3.s-1");
            Real v_left_gastric_T3_C120(unit = "m3.s-1");
            Real v_dorsal_pancreatic_T1_C124(unit = "m3.s-1");
            Real v_splenic_T2_C126(unit = "m3.s-1");
            Real v_hepatic_artery_proper_left_branch_C132(unit = "m3.s-1");
            Real v_hepatic_artery_proper_right_branch_C134(unit = "m3.s-1");
            Real v_middle_colic_T8_C140(unit = "m3.s-1");
            Real v_jejunal_3_T10_C144(unit = "m3.s-1");
            Real v_jejunal_6_T11_C148(unit = "m3.s-1");
            Real v_ileocolic_T9_C152(unit = "m3.s-1");
            Real v_ileal_4_T12_C156(unit = "m3.s-1");
            Real v_ileal_6_T13_C160(unit = "m3.s-1");
            Real v_superior_mesenteric_T4_C162(unit = "m3.s-1");
            Real v_inferior_segmental_T5_L170(unit = "m3.s-1");
            Real v_superior_segmental_T4_L172(unit = "m3.s-1");
            Real v_renal_posterior_branch_T3_L174(unit = "m3.s-1");
            Real v_superior_segmental_T4_R182(unit = "m3.s-1");
            Real v_inferior_segmental_T5_R184(unit = "m3.s-1");
            Real v_renal_posterior_branch_T3_R186(unit = "m3.s-1");
            Real v_inferior_mesenteric_T5_C190(unit = "m3.s-1");
            Real v_internal_iliac_T1_R218(unit = "m3.s-1");
            Real v_profundus_T2_R224(unit = "m3.s-1");
            Real v_anterior_tibial_T3_R230(unit = "m3.s-1");
            Real v_posterior_tibial_T4_R236(unit = "m3.s-1");
            Real v_internal_iliac_T1_L196(unit = "m3.s-1");
            Real v_profundus_T2_L202(unit = "m3.s-1");
            Real v_anterior_tibial_T3_L208(unit = "m3.s-1");
            Real v_posterior_tibial_T4_L214(unit = "m3.s-1");
            Real v_posterior_interosseous_T3_R40(unit = "m3.s-1");
            Real v_ulnar_T2_R42(unit = "m3.s-1");
            Real v_radial_T1_R44(unit = "m3.s-1");
            Real v_posterior_interosseous_T3_L88(unit = "m3.s-1");
            Real v_ulnar_T2_L90(unit = "m3.s-1");
            Real v_radial_T1_L92(unit = "m3.s-1");
            Real v_external_carotid_T2_R26(unit = "m3.s-1");
            Real v_external_carotid_T2_L62(unit = "m3.s-1");
            Real v_internal_carotid_R8_C(unit = "m3.s-1");
            Real v_internal_carotid_L50_C(unit = "m3.s-1");
            Real v_vertebral_R272(unit = "m3.s-1");
            Real v_vertebral_L2(unit = "m3.s-1");
            ADAN_main.Components.Interfaces.Pq_terminator_v
              pq_terminator_v_superior(v=-v_sup_venacava)
              annotation (Placement(transformation(extent={{100,0},{120,20}})));
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_a
              annotation (Placement(transformation(extent={{-270,40},{-250,60}}),
                  iconTransformation(extent={{-110,-10},{-90,10}})));
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b port_b_superior
              annotation (Placement(transformation(extent={{124,0},{144,20}}),
                  iconTransformation(extent={{90,90},{110,110}})));
            ADAN_main.Components.Interfaces.Pq_terminator_v
              pq_terminator_v_inferior(v=-v_inf_venacava) annotation (Placement(
                  transformation(extent={{100,-24},{120,-4}})));
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b port_b_inferior
              annotation (Placement(transformation(extent={{124,-24},{144,-4}}),
                  iconTransformation(extent={{90,-110},{110,-90}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C138(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C138,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C138,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C138) annotation (
               Placement(transformation(extent={{-45,-91},{-25,-86}})));
          equation
            v_posterior_intercostal_T1_R98 = posterior_intercostal_T1_R98.v_T;
            v_posterior_intercostal_T1_L102 = posterior_intercostal_T1_L102.v_T;
            v_posterior_intercostal_T2_R106 = posterior_intercostal_T2_R106.v_T;
            v_posterior_intercostal_T2_L110 = posterior_intercostal_T2_L110.v_T;
            v_left_gastric_T3_C120 = left_gastric_T3_C120.v_T;
            v_dorsal_pancreatic_T1_C124 = dorsal_pancreatic_T1_C124.v_T;
            v_splenic_T2_C126 = splenic_T2_C126.v_T;
            v_hepatic_artery_proper_left_branch_C132 = hepatic_artery_proper_left_branch_C132.v_T;
            v_hepatic_artery_proper_right_branch_C134 = hepatic_artery_proper_right_branch_C134.v_T;
            v_middle_colic_T8_C140 = middle_colic_T8_C140.v_T;
            v_jejunal_3_T10_C144 = jejunal_3_T10_C144.v_T;
            v_jejunal_6_T11_C148 = jejunal_6_T11_C148.v_T;
            v_ileocolic_T9_C152 = ileocolic_T9_C152.v_T;
            v_ileal_4_T12_C156 = ileal_4_T12_C156.v_T;
            v_ileal_6_T13_C160 = ileal_6_T13_C160.v_T;
            v_superior_mesenteric_T4_C162 = superior_mesenteric_T4_C162.v_T;
            v_inferior_segmental_T5_L170 = inferior_segmental_T5_L170.v_T;
            v_superior_segmental_T4_L172 = superior_segmental_T4_L172.v_T;
            v_renal_posterior_branch_T3_L174 = renal_posterior_branch_T3_L174.v_T;
            v_superior_segmental_T4_R182 = superior_segmental_T4_R182.v_T;
            v_inferior_segmental_T5_R184 = inferior_segmental_T5_R184.v_T;
            v_renal_posterior_branch_T3_R186 = renal_posterior_branch_T3_R186.v_T;
            v_inferior_mesenteric_T5_C190 = inferior_mesenteric_T5_C190.v_T;
            v_internal_iliac_T1_R218 = internal_iliac_T1_R218.v_T;
            v_profundus_T2_R224 = profundus_T2_R224.v_T;
            v_anterior_tibial_T3_R230 = anterior_tibial_T3_R230.v_T;
            v_posterior_tibial_T4_R236 = posterior_tibial_T4_R236.v_T;
            v_internal_iliac_T1_L196 = internal_iliac_T1_L196.v_T;
            v_profundus_T2_L202 = profundus_T2_L202.v_T;
            v_anterior_tibial_T3_L208 = anterior_tibial_T3_L208.v_T;
            v_posterior_tibial_T4_L214 = posterior_tibial_T4_L214.v_T;
            v_posterior_interosseous_T3_R40 = posterior_interosseous_T3_R40.v_T;
            v_ulnar_T2_R42 = ulnar_T2_R42.v_T;
            v_radial_T1_R44 = radial_T1_R44.v_T;
            v_posterior_interosseous_T3_L88 = posterior_interosseous_T3_L88.v_T;
            v_ulnar_T2_L90 = ulnar_T2_L90.v_T;
            v_radial_T1_L92 = radial_T1_L92.v_T;
            v_external_carotid_T2_R26 = external_carotid_T2_R26.v_T;
            v_external_carotid_T2_L62 = external_carotid_T2_L62.v_T;
            v_internal_carotid_R8_C = internal_carotid_R8_C.v_T;
            v_internal_carotid_L50_C = internal_carotid_L50_C.v_T;
            v_vertebral_R272 = vertebral_R272.v_T;
            v_vertebral_L2 = vertebral_L2.v_T;
            connect(brachiocephalic_trunk_C4.port_a,aortic_arch_C2.port_b) annotation (Line(points={{-98,
                    129.5},{-121,49.5}},                                                                                           thickness=1));
            connect(aortic_arch_C46.port_a,aortic_arch_C2.port_b) annotation (Line(points={{-105,
                    49.5},{-121,49.5}},                                                                                   thickness=1));
            connect(common_carotid_R6_A.port_a,brachiocephalic_trunk_C4.port_b) annotation (Line(points={{-73,
                    135.5},{-78,129.5}},                                                                                                thickness=1));
            connect(subclavian_R28.port_a,brachiocephalic_trunk_C4.port_b) annotation (Line(points={{-75,
                    121.5},{-78,129.5}},                                                                                           thickness=1));
            connect(aortic_arch_C64.port_a,aortic_arch_C46.port_b) annotation (Line(points={{-78,
                    49.5},{-85,49.5}},                                                                                     thickness=1));
            connect(common_carotid_L48_A.port_a,aortic_arch_C46.port_b) annotation (Line(points={{-72,
                    95.5},{-85,49.5}},                                                                                          thickness=1));
            connect(aortic_arch_C94.port_a,aortic_arch_C64.port_b) annotation (Line(points={{-49,
                    49.5},{-58,49.5}},                                                                                     thickness=1));
            connect(subclavian_L66.port_a,aortic_arch_C64.port_b) annotation (Line(points={{-50,
                    75.5},{-58,49.5}},                                                                                    thickness=1));
            connect(thoracic_aorta_C100.port_a,thoracic_aorta_C96.port_b) annotation (Line(points={{3,49.5},
                    {-6,49.5}},                                                                                                   thickness=1));
            connect(posterior_intercostal_T1_R98.port_a,thoracic_aorta_C96.port_b) annotation (Line(points={{3,39.5},
                    {-6,49.5}},                                                                                                            thickness=1));
            connect(thoracic_aorta_C104.port_a,thoracic_aorta_C100.port_b) annotation (Line(points={{28,49.5},
                    {23,49.5}},                                                                                                    thickness=1));
            connect(posterior_intercostal_T1_L102.port_a,thoracic_aorta_C100.port_b) annotation (Line(points={{28,39.5},
                    {23,49.5}},                                                                                                              thickness=1));
            connect(thoracic_aorta_C108.port_a,thoracic_aorta_C104.port_b) annotation (Line(points={{53,49.5},
                    {48,49.5}},                                                                                                    thickness=1));
            connect(posterior_intercostal_T2_R106.port_a,thoracic_aorta_C104.port_b) annotation (Line(points={{51,39.5},
                    {48,49.5}},                                                                                                              thickness=1));
            connect(thoracic_aorta_C112.port_a,thoracic_aorta_C108.port_b) annotation (Line(points={{78,49.5},
                    {73,49.5}},                                                                                                    thickness=1));
            connect(posterior_intercostal_T2_L110.port_a,thoracic_aorta_C108.port_b) annotation (Line(points={{78,39.5},
                    {73,49.5}},                                                                                                              thickness=1));
            connect(abdominal_aorta_C136.port_a,abdominal_aorta_C114.port_b) annotation (Line(points={{-74,
                    -40.5},{-79,-40.5}},                                                                                             thickness=1));
            connect(celiac_trunk_C116.port_a,abdominal_aorta_C114.port_b) annotation (Line(points={{-71,
                    -0.5},{-79,-40.5}},                                                                                           thickness=1));
            connect(abdominal_aorta_C164.port_a,abdominal_aorta_C136.port_b) annotation (Line(points={{-47,
                    -40.5},{-54,-40.5}},                                                                                             thickness=1));
            connect(superior_mesenteric_T4_C138.port_a,abdominal_aorta_C136.port_b) annotation (Line(points={{-45,
                    -88.5},{-54,-40.5}},                                                                                                    thickness=1));
            connect(abdominal_aorta_C176.port_a,abdominal_aorta_C164.port_b) annotation (Line(points={{-2,
                    -40.5},{-27,-40.5}},                                                                                             thickness=1));
            connect(renal_L166.port_a,abdominal_aorta_C164.port_b) annotation (Line(points={{-2,
                    -64.5},{-14,-64.5},{-14,-40.5},{-27,-40.5}},                                                           thickness=1));
            connect(abdominal_aorta_C188.port_a,abdominal_aorta_C176.port_b) annotation (Line(points={{23,
                    -40.5},{18,-40.5}},                                                                                              thickness=1));
            connect(renal_R178.port_a,abdominal_aorta_C176.port_b) annotation (Line(points={{25,
                    -22.5},{18,-40.5}},                                                                                    thickness=1));
            connect(abdominal_aorta_C192.port_a,abdominal_aorta_C188.port_b) annotation (Line(points={{48,
                    -40.5},{43,-40.5}},                                                                                              thickness=1));
            connect(inferior_mesenteric_T5_C190.port_a,abdominal_aorta_C188.port_b) annotation (Line(points={{48,
                    -54.5},{43,-40.5}},                                                                                                     thickness=1));
            connect(common_iliac_R216.port_a,abdominal_aorta_C192.port_b) annotation (Line(points={{75,
                    -40.5},{68,-40.5}},                                                                                           thickness=1));
            connect(common_iliac_L194.port_a,abdominal_aorta_C192.port_b) annotation (Line(points={{74,
                    -54.5},{68,-40.5}},                                                                                           thickness=1));
            connect(internal_iliac_T1_R218.port_a,common_iliac_R216.port_b) annotation (Line(points={{98,
                    -30.5},{96,-40.5},{95,-40.5}},                                                                                  thickness=1));
            connect(external_iliac_R220.port_a,common_iliac_R216.port_b) annotation (Line(points={{99,
                    -40.5},{95,-40.5}},                                                                                          thickness=1));
            connect(profundus_T2_R224.port_a,femoral_R222.port_b) annotation (Line(points={{149,
                    -30.5},{144,-40.5}},                                                                                  thickness=1));
            connect(femoral_R226.port_a,femoral_R222.port_b) annotation (Line(points={{150,
                    -40.5},{144,-40.5}},                                                                             thickness=1));
            connect(anterior_tibial_T3_R230.port_a,popliteal_R228.port_b) annotation (Line(points={{200,
                    -30.5},{195,-40.5}},                                                                                          thickness=1));
            connect(popliteal_R232.port_a,popliteal_R228.port_b) annotation (Line(points={{199,
                    -40.5},{195,-40.5}},                                                                                 thickness=1));
            connect(internal_iliac_T1_L196.port_a,common_iliac_L194.port_b) annotation (Line(points={{99,
                    -62.5},{94,-54.5}},                                                                                             thickness=1));
            connect(external_iliac_L198.port_a,common_iliac_L194.port_b) annotation (Line(points={{100,
                    -54.5},{94,-54.5}},                                                                                          thickness=1));
            connect(profundus_T2_L202.port_a,femoral_L200.port_b) annotation (Line(points={{150,
                    -62.5},{145,-54.5}},                                                                                  thickness=1));
            connect(femoral_L204.port_a,femoral_L200.port_b) annotation (Line(points={{149,
                    -54.5},{145,-54.5}},                                                                             thickness=1));
            connect(anterior_tibial_T3_L208.port_a,popliteal_L206.port_b) annotation (Line(points={{199,
                    -62.5},{194,-54.5}},                                                                                          thickness=1));
            connect(popliteal_L210.port_a,popliteal_L206.port_b) annotation (Line(points={{200,
                    -54.5},{194,-54.5}},                                                                                 thickness=1));
            connect(subclavian_R30.port_a,subclavian_R28.port_b) annotation (Line(points={{-50,
                    121.5},{-55,121.5}},                                                                                 thickness=1));
            connect(vertebral_R272.port_a,subclavian_R28.port_b) annotation (Line(points={{-49,
                    113.5},{-55,121.5}},                                                                                 thickness=1));
            connect(ulnar_T2_R36.port_a,brachial_R34.port_b) annotation (Line(points={{25,
                    121.5},{20,121.5}},                                                                              thickness=1));
            connect(radial_T1_R44.port_a,brachial_R34.port_b) annotation (Line(points={{25,
                    111.5},{20,121.5}},                                                                               thickness=1));
            connect(common_interosseous_R38.port_a,ulnar_T2_R36.port_b) annotation (Line(points={{50,
                    121.5},{45,121.5}},                                                                                         thickness=1));
            connect(ulnar_T2_R42.port_a,ulnar_T2_R36.port_b) annotation (Line(points={{50,
                    111.5},{45,121.5}},                                                                              thickness=1));
            connect(subclavian_L78.port_a,subclavian_L66.port_b) annotation (Line(points={{-25,
                    75.5},{-26,75.5},{-26,76},{-30,76},{-30,75.5}},                                                      thickness=1));
            connect(vertebral_L2.port_a,subclavian_L66.port_b) annotation (Line(points={{-26,
                    65.5},{-30,75.5}},                                                                                 thickness=1));
            connect(ulnar_T2_L84.port_a,brachial_L82.port_b) annotation (Line(points={{50,75.5},
                    {45,75.5}},                                                                                      thickness=1));
            connect(radial_T1_L92.port_a,brachial_L82.port_b) annotation (Line(points={{50,65.5},
                    {45,75.5}},                                                                                       thickness=1));
            connect(common_interosseous_L86.port_a,ulnar_T2_L84.port_b) annotation (Line(points={{75,75.5},
                    {70,75.5}},                                                                                                 thickness=1));
            connect(ulnar_T2_L90.port_a,ulnar_T2_L84.port_b) annotation (Line(points={{75,65.5},
                    {70,75.5}},                                                                                      thickness=1));
            connect(internal_carotid_R8_A.port_a,common_carotid_R6_C.port_b) annotation (Line(points={{2,135.5},
                    {-3,135.5}},                                                                                                     thickness=1));
            connect(external_carotid_T2_R26.port_a,common_carotid_R6_C.port_b) annotation (Line(points={{3,147.5},
                    {-3,135.5}},                                                                                                       thickness=1));
            connect(internal_carotid_L50_A.port_a,common_carotid_L48_D.port_b) annotation (Line(points={{28,95.5},
                    {23,95.5}},                                                                                                        thickness=1));
            connect(external_carotid_T2_L62.port_a,common_carotid_L48_D.port_b) annotation (Line(points={{27,87.5},
                    {27,88},{23,88},{23,95.5}},                                                                                         thickness=1));
            connect(splenic_T2_C118.port_a,celiac_trunk_C116.port_b) annotation (Line(points={{-46,
                    -0.5},{-51,-0.5}},                                                                                       thickness=1));
            connect(left_gastric_T3_C120.port_a,celiac_trunk_C116.port_b) annotation (Line(points={{-45,7.5},
                    {-51,-0.5}},                                                                                                  thickness=1));
            connect(splenic_T2_C122.port_a,splenic_T2_C118.port_b) annotation (Line(points={{-18,
                    -0.5},{-26,-0.5}},                                                                                     thickness=1));
            connect(dorsal_pancreatic_T1_C124.port_a,splenic_T2_C118.port_b) annotation (Line(points={{-17,7.5},
                    {-26,-0.5}},                                                                                                     thickness=1));
            connect(splenic_T2_C126.port_a,splenic_T2_C122.port_b) annotation (Line(points={{8,7.5},
                    {2,-0.5}},                                                                                             thickness=1));
            connect(common_hepatic_C128.port_a,splenic_T2_C122.port_b) annotation (Line(points={{9,-0.5},
                    {2,-0.5}},                                                                                                 thickness=1));
            connect(hepatic_artery_proper_left_branch_C132.port_a,hepatic_artery_proper_C130.port_b) annotation (Line(points={{55,-0.5},
                    {52,-0.5}},                                                                                                                              thickness=1));
            connect(hepatic_artery_proper_right_branch_C134.port_a,hepatic_artery_proper_C130.port_b) annotation (Line(points={{56,7.5},
                    {52,-0.5}},                                                                                                                               thickness=1));
            connect(middle_colic_T8_C140.port_a,superior_mesenteric_T4_C138.port_b) annotation (Line(points={{-18,
                    -96.5},{-25,-88.5}},                                                                                                    thickness=1));
            connect(superior_mesenteric_T4_C142.port_a,superior_mesenteric_T4_C138.port_b) annotation (Line(points={{-19,
                    -88.5},{-25,-88.5}},                                                                                                           thickness=1));
            connect(jejunal_3_T10_C144.port_a,superior_mesenteric_T4_C142.port_b) annotation (Line(points={{6,-96.5},
                    {1,-88.5}},                                                                                                           thickness=1));
            connect(superior_mesenteric_T4_C146.port_a,superior_mesenteric_T4_C142.port_b) annotation (Line(points={{5,-88.5},
                    {1,-88.5}},                                                                                                                    thickness=1));
            connect(jejunal_6_T11_C148.port_a,superior_mesenteric_T4_C146.port_b) annotation (Line(points={{32,
                    -96.5},{25,-88.5}},                                                                                                   thickness=1));
            connect(superior_mesenteric_T4_C150.port_a,superior_mesenteric_T4_C146.port_b) annotation (Line(points={{31,
                    -88.5},{25,-88.5}},                                                                                                            thickness=1));
            connect(ileocolic_T9_C152.port_a,superior_mesenteric_T4_C150.port_b) annotation (Line(points={{58,
                    -96.5},{51,-88.5}},                                                                                                  thickness=1));
            connect(superior_mesenteric_T4_C154.port_a,superior_mesenteric_T4_C150.port_b) annotation (Line(points={{57,
                    -88.5},{51,-88.5}},                                                                                                            thickness=1));
            connect(ileal_4_T12_C156.port_a,superior_mesenteric_T4_C154.port_b) annotation (Line(points={{84,
                    -96.5},{77,-88.5}},                                                                                                 thickness=1));
            connect(superior_mesenteric_T4_C158.port_a,superior_mesenteric_T4_C154.port_b) annotation (Line(points={{83,
                    -88.5},{77,-88.5}},                                                                                                            thickness=1));
            connect(ileal_6_T13_C160.port_a,superior_mesenteric_T4_C158.port_b) annotation (Line(points={{108,
                    -96.5},{103,-88.5}},                                                                                                thickness=1));
            connect(superior_mesenteric_T4_C162.port_a,superior_mesenteric_T4_C158.port_b) annotation (Line(points={{107,
                    -88.5},{103,-88.5}},                                                                                                           thickness=1));
            connect(renal_anterior_branch_L168.port_a,renal_L166.port_b) annotation (Line(points={{23,
                    -64.5},{18,-64.5}},                                                                                          thickness=1));
            connect(renal_posterior_branch_T3_L174.port_a,renal_L166.port_b) annotation (Line(points={{24,
                    -74.5},{18,-64.5}},                                                                                              thickness=1));
            connect(inferior_segmental_T5_L170.port_a,renal_anterior_branch_L168.port_b) annotation (Line(points={{48,
                    -64.5},{43,-64.5}},                                                                                                          thickness=1));
            connect(superior_segmental_T4_L172.port_a,renal_anterior_branch_L168.port_b) annotation (Line(points={{47,
                    -74.5},{43,-64.5}},                                                                                                          thickness=1));
            connect(renal_anterior_branch_R180.port_a,renal_R178.port_b) annotation (Line(points={{50,
                    -22.5},{45,-22.5}},                                                                                          thickness=1));
            connect(renal_posterior_branch_T3_R186.port_a,renal_R178.port_b) annotation (Line(points={{49,
                    -14.5},{45,-22.5}},                                                                                              thickness=1));
            connect(superior_segmental_T4_R182.port_a,renal_anterior_branch_R180.port_b) annotation (Line(points={{75,
                    -22.5},{70,-22.5}},                                                                                                          thickness=1));
            connect(inferior_segmental_T5_R184.port_a,renal_anterior_branch_R180.port_b) annotation (Line(points={{74,
                    -14.5},{70,-22.5}},                                                                                                          thickness=1));
            connect(ascending_aorta_B.port_a,ascending_aorta_A.port_b) annotation (Line(points={{-216,
                    49.5},{-221,49.5}},                                                                                        thickness=1));
            connect(ascending_aorta_C.port_a,ascending_aorta_B.port_b) annotation (Line(points={{-191,
                    49.5},{-196,49.5}},                                                                                        thickness=1));
            connect(ascending_aorta_D.port_a,ascending_aorta_C.port_b) annotation (Line(points={{-166,
                    49.5},{-171,49.5}},                                                                                        thickness=1));
            connect(aortic_arch_C2.port_a,ascending_aorta_D.port_b) annotation (Line(points={{-141,
                    49.5},{-146,49.5}},                                                                                     thickness=1));
            connect(thoracic_aorta_C96.port_a,aortic_arch_C94.port_b) annotation (Line(points={{-26,
                    49.5},{-29,49.5}},                                                                                        thickness=1));
            connect(abdominal_aorta_C114.port_a,thoracic_aorta_C112.port_b) annotation (Line(points={{-99,
                    -40.5},{-99,22},{108,22},{108,49.5},{98,49.5}},                                                                 thickness=1));
            connect(hepatic_artery_proper_C130.port_a,common_hepatic_C128.port_b) annotation (Line(points={{32,-0.5},
                    {29,-0.5}},                                                                                                           thickness=1));
            connect(femoral_R222.port_a,external_iliac_R220.port_b) annotation (Line(points={{124,
                    -40.5},{119,-40.5}},                                                                                    thickness=1));
            connect(popliteal_R228.port_a,femoral_R226.port_b) annotation (Line(points={{175,
                    -40.5},{170,-40.5}},                                                                               thickness=1));
            connect(tibiofibular_trunk_R234.port_a,popliteal_R232.port_b) annotation (Line(points={{224,
                    -40.5},{219,-40.5}},                                                                                          thickness=1));
            connect(posterior_tibial_T4_R236.port_a,tibiofibular_trunk_R234.port_b) annotation (Line(points={{249,
                    -40.5},{249,-40},{244,-40},{244,-40.5}},                                                                                thickness=1));
            connect(femoral_L200.port_a,external_iliac_L198.port_b) annotation (Line(points={{125,
                    -54.5},{120,-54.5}},                                                                                    thickness=1));
            connect(popliteal_L206.port_a,femoral_L204.port_b) annotation (Line(points={{174,
                    -54.5},{169,-54.5}},                                                                               thickness=1));
            connect(tibiofibular_trunk_L212.port_a,popliteal_L210.port_b) annotation (Line(points={{225,
                    -54.5},{220,-54.5}},                                                                                          thickness=1));
            connect(posterior_tibial_T4_L214.port_a,tibiofibular_trunk_L212.port_b) annotation (Line(points={{250,
                    -54.5},{245,-54.5}},                                                                                                    thickness=1));
            connect(axillary_R32.port_a,subclavian_R30.port_b) annotation (Line(points={{-25,
                    121.5},{-30,121.5}},                                                                               thickness=1));
            connect(brachial_R34.port_a,axillary_R32.port_b) annotation (Line(points={{0,121.5},
                    {-5,121.5}},                                                                                     thickness=1));
            connect(posterior_interosseous_T3_R40.port_a,common_interosseous_R38.port_b) annotation (Line(points={{75,
                    121.5},{70,121.5}},                                                                                                          thickness=1));
            connect(axillary_L80.port_a,subclavian_L78.port_b) annotation (Line(points={{0,75.5},
                    {-5,75.5}},                                                                                        thickness=1));
            connect(brachial_L82.port_a,axillary_L80.port_b) annotation (Line(points={{25,75.5},
                    {20,75.5}},                                                                                      thickness=1));
            connect(posterior_interosseous_T3_L88.port_a,common_interosseous_L86.port_b) annotation (Line(points={{100,
                    75.5},{95,75.5}},                                                                                                            thickness=1));
            connect(common_carotid_R6_B.port_a,common_carotid_R6_A.port_b) annotation (Line(points={{-48,
                    135.5},{-53,135.5}},                                                                                           thickness=1));
            connect(common_carotid_R6_C.port_a,common_carotid_R6_B.port_b) annotation (Line(points={{-23,
                    135.5},{-28,135.5}},                                                                                           thickness=1));
            connect(internal_carotid_R8_B.port_a,internal_carotid_R8_A.port_b) annotation (Line(points={{27,
                    135.5},{22,135.5}},                                                                                                thickness=1));
            connect(internal_carotid_R8_C.port_a,internal_carotid_R8_B.port_b) annotation (Line(points={{54,
                    135.5},{47,135.5}},                                                                                                thickness=1));
            connect(common_carotid_L48_B.port_a,common_carotid_L48_A.port_b) annotation (Line(points={{-47,
                    95.5},{-52,95.5}},                                                                                               thickness=1));
            connect(common_carotid_L48_C.port_a,common_carotid_L48_B.port_b) annotation (Line(points={{-22,
                    95.5},{-27,95.5}},                                                                                               thickness=1));
            connect(common_carotid_L48_D.port_a,common_carotid_L48_C.port_b) annotation (Line(points={{3,95.5},
                    {-2,95.5}},                                                                                                      thickness=1));
            connect(internal_carotid_L50_B.port_a,internal_carotid_L50_A.port_b) annotation (Line(points={{53,95.5},
                    {48,95.5}},                                                                                                          thickness=1));
            connect(internal_carotid_L50_C.port_a,internal_carotid_L50_B.port_b) annotation (Line(points={{78,95.5},
                    {73,95.5}},                                                                                                          thickness=1));
            connect(port_a, ascending_aorta_A.port_a) annotation (Line(
                points={{-260,50},{-248,50},{-248,49.5},{-241,49.5}},
                color={0,0,0},
                thickness=1));
            connect(leveledPressureFlowConverter.leveledPort_b, ascending_aorta_A.port_a)
              annotation (Line(
                points={{-250,74},{-250,49.5},{-241,49.5}},
                color={162,29,33},
                thickness=0.5));
            connect(leveledPressureFlowConverter.port_a, port_a) annotation (Line(
                points={{-270,74},{-284,74},{-284,48},{-320,48},{-320,80}},
                color={0,0,0},
                thickness=1));
            connect(pq_terminator_v_inferior.port_a, port_b_inferior) annotation (Line(
                points={{120,-14},{134,-14}},
                color={0,0,0},
                thickness=1));
            annotation (Icon(graphics={Text(
                    extent={{-100,-80},{100,0}},
                    lineColor={0,0,0},
                    pattern=LinePattern.None,
                    lineThickness=0.5,
                    fillColor={244,125,35},
                    fillPattern=FillPattern.None,
                    textString="ADAN86"), Text(
                    extent={{-100,20},{100,100}},
                    lineColor={0,0,0},
                    pattern=LinePattern.None,
                    lineThickness=0.5,
                    fillColor={244,125,35},
                    fillPattern=FillPattern.None,
                    textString="Arterial tree")}), Diagram(graphics={
                  Rectangle(
                    extent={{-64,6},{-58,-8}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{32,-16},{38,-30}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{6,-58},{12,-72}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{106,-24},{112,-38}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{156,-24},{162,-38}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{206,-24},{212,-38}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{256,-34},{262,-48}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{256,-48},{262,-62}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{106,-56},{112,-70}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{156,-56},{162,-70}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{206,-56},{212,-70}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{32,118},{38,104}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{58,118},{64,104}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{82,72},{88,58}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{56,72},{62,58}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{60,142},{66,128}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{10,154},{16,140}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{84,102},{90,88}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{34,94},{40,80}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{-42,120},{-36,106}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{-20,72},{-14,58}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{-58,-80},{142,-108}},
                    fillColor={255,255,255},
                    fillPattern=FillPattern.Solid,
                    lineColor={238,46,47},
                    lineThickness=0.5),
                  Rectangle(
                    extent={{-6,44},{104,32}},
                    fillColor={255,255,255},
                    fillPattern=FillPattern.Solid,
                    lineColor={238,46,47},
                    lineThickness=0.5)}));
          end arteries_ADAN86_dv;

          model arteries_simplified_dv
            inner parameter Real periferyModifier = 1.3;
            inner Physiolibrary.Types.Fraction rtam = resistance_modifier "modifier for Resistance of arterioles RTA_%name";
            inner parameter Physiolibrary.Types.Fraction rtvm = 1 "modifier for Resistance of venules RTV_%name";
            inner parameter Physiolibrary.Types.Fraction ctm =  1 "modifier for Tissue compliance CT_%name";

            Physiolibrary.Types.RealIO.PressureInput thoracic_pressure_input
              annotation (Placement(transformation(extent={{-120,-120},{-80,-80}}),
                  iconTransformation(extent={{-120,-120},{-80,-80}})));
                  inner Physiolibrary.Types.Pressure thoracic_pressure = thoracic_pressure_input;
          //  inner
            Parameters_cellml.Parameters_Systemic Parameters_Systemic1
              annotation (Placement(transformation(extent={{-100,-79},{-80,-74}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Ascending_aorta
              ascending_aorta_A(
              l=Parameters_Systemic1.l_ascending_aorta_A,
              E=Parameters_Systemic1.E_ascending_aorta_A,
              r=Parameters_Systemic1.r_ascending_aorta_A) annotation (Placement(
                  transformation(extent={{-241,47},{-221,52}})));

            ADAN_main.Components.Obsolete.pv_type_thoracic ascending_aorta_B(
              l=Parameters_Systemic1.l_ascending_aorta_B,
              E=Parameters_Systemic1.E_ascending_aorta_B,
              r=Parameters_Systemic1.r_ascending_aorta_B) annotation (Placement(
                  transformation(extent={{-216,47},{-196,52}})));

            ADAN_main.Components.Obsolete.pv_type_thoracic ascending_aorta_C(
              l=Parameters_Systemic1.l_ascending_aorta_C,
              E=Parameters_Systemic1.E_ascending_aorta_C,
              r=Parameters_Systemic1.r_ascending_aorta_C) annotation (Placement(
                  transformation(extent={{-191,47},{-171,52}})));

            ADAN_main.Components.Obsolete.pv_type_thoracic ascending_aorta_D(
              l=Parameters_Systemic1.l_ascending_aorta_D,
              E=Parameters_Systemic1.E_ascending_aorta_D,
              r=Parameters_Systemic1.r_ascending_aorta_D) annotation (Placement(
                  transformation(extent={{-166,47},{-146,52}})));

            ADAN_main.Components.Obsolete.pv_type_thoracic aortic_arch_C2(
              l=Parameters_Systemic1.l_aortic_arch_C2,
              E=Parameters_Systemic1.E_aortic_arch_C2,
              r=Parameters_Systemic1.r_aortic_arch_C2) annotation (Placement(
                  transformation(extent={{-141,47},{-121,52}})));

            ADAN_main.Components.Obsolete.pv_type_thoracic
              brachiocephalic_trunk_C4(
              l=Parameters_Systemic1.l_brachiocephalic_trunk_C4,
              E=Parameters_Systemic1.E_brachiocephalic_trunk_C4,
              r=Parameters_Systemic1.r_brachiocephalic_trunk_C4) annotation (
                Placement(transformation(extent={{-98,127},{-78,132}})));

            replaceable ADAN_main.Components.Obsolete.pv_type_thoracic
              aortic_arch_C46(
              l=Parameters_Systemic1.l_aortic_arch_C46,
              E=Parameters_Systemic1.E_aortic_arch_C46,
              r=Parameters_Systemic1.r_aortic_arch_C46) annotation (Placement(
                  transformation(extent={{-105,47},{-85,52}})));

            ADAN_main.Components.Obsolete.pv_type_thoracic aortic_arch_C64(
              l=Parameters_Systemic1.l_aortic_arch_C64,
              E=Parameters_Systemic1.E_aortic_arch_C64,
              r=Parameters_Systemic1.r_aortic_arch_C64) annotation (Placement(
                  transformation(extent={{-78,47},{-58,52}})));

            ADAN_main.Components.Obsolete.pv_type_thoracic aortic_arch_C94(
              l=Parameters_Systemic1.l_aortic_arch_C94,
              E=Parameters_Systemic1.E_aortic_arch_C94,
              r=Parameters_Systemic1.r_aortic_arch_C94) annotation (Placement(
                  transformation(extent={{-49,47},{-29,52}})));

            ADAN_main.Components.Obsolete.pv_type_thoracic thoracic_aorta_C96(
              l=Parameters_Systemic1.l_thoracic_aorta_C96,
              E=Parameters_Systemic1.E_thoracic_aorta_C96,
              r=Parameters_Systemic1.r_thoracic_aorta_C96)
              annotation (Placement(transformation(extent={{-26,47},{-6,52}})));

            ADAN_main.Components.Obsolete.pv_type_thoracic thoracic_aorta_C100(
              l=Parameters_Systemic1.l_thoracic_aorta_C100,
              E=Parameters_Systemic1.E_thoracic_aorta_C100,
              r=Parameters_Systemic1.r_thoracic_aorta_C100)
              annotation (Placement(transformation(extent={{3,47},{23,52}})));

            ADAN_main.Components.Obsolete.pv_type_thoracic thoracic_aorta_C104(
              l=Parameters_Systemic1.l_thoracic_aorta_C104,
              E=Parameters_Systemic1.E_thoracic_aorta_C104,
              r=Parameters_Systemic1.r_thoracic_aorta_C104)
              annotation (Placement(transformation(extent={{28,47},{48,52}})));

            ADAN_main.Components.Obsolete.pv_type_thoracic thoracic_aorta_C108(
              l=Parameters_Systemic1.l_thoracic_aorta_C108,
              E=Parameters_Systemic1.E_thoracic_aorta_C108,
              r=Parameters_Systemic1.r_thoracic_aorta_C108)
              annotation (Placement(transformation(extent={{53,47},{73,52}})));

            ADAN_main.Components.Obsolete.pv_type_thoracic thoracic_aorta_C112(
              l=Parameters_Systemic1.l_thoracic_aorta_C112,
              E=Parameters_Systemic1.E_thoracic_aorta_C112,
              r=Parameters_Systemic1.r_thoracic_aorta_C112)
              annotation (Placement(transformation(extent={{78,47},{98,52}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              abdominal_aorta_C114(
              l=Parameters_Systemic1.l_abdominal_aorta_C114,
              E=Parameters_Systemic1.E_abdominal_aorta_C114,
              r=Parameters_Systemic1.r_abdominal_aorta_C114) annotation (
                Placement(transformation(extent={{-99,-43},{-79,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              abdominal_aorta_C136(
              l=Parameters_Systemic1.l_abdominal_aorta_C136,
              E=Parameters_Systemic1.E_abdominal_aorta_C136,
              r=Parameters_Systemic1.r_abdominal_aorta_C136) annotation (
                Placement(transformation(extent={{-74,-43},{-54,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              abdominal_aorta_C164(
              l=Parameters_Systemic1.l_abdominal_aorta_C164,
              E=Parameters_Systemic1.E_abdominal_aorta_C164,
              r=Parameters_Systemic1.r_abdominal_aorta_C164) annotation (
                Placement(transformation(extent={{-47,-43},{-27,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              abdominal_aorta_C176(
              l=Parameters_Systemic1.l_abdominal_aorta_C176,
              E=Parameters_Systemic1.E_abdominal_aorta_C176,
              r=Parameters_Systemic1.r_abdominal_aorta_C176) annotation (
                Placement(transformation(extent={{-2,-43},{18,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              abdominal_aorta_C188(
              l=Parameters_Systemic1.l_abdominal_aorta_C188,
              E=Parameters_Systemic1.E_abdominal_aorta_C188,
              r=Parameters_Systemic1.r_abdominal_aorta_C188) annotation (
                Placement(transformation(extent={{23,-43},{43,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              abdominal_aorta_C192(
              l=Parameters_Systemic1.l_abdominal_aorta_C192,
              E=Parameters_Systemic1.E_abdominal_aorta_C192,
              r=Parameters_Systemic1.r_abdominal_aorta_C192) annotation (
                Placement(transformation(extent={{48,-43},{68,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              posterior_intercostal_T1_R98(
              RTA=terminalsParameters.RTA_posterior_intercostal_T1_R98,
              RTV=terminalsParameters.RTV_posterior_intercostal_T1_R98,
              CT=terminalsParameters.CT_posterior_intercostal_T1_R98,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_intercostal_T1_R98,
              E=Parameters_Systemic1.E_posterior_intercostal_T1_R98,
              R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_R98,
              C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_R98,
              r=Parameters_Systemic1.r_posterior_intercostal_T1_R98)
              annotation (Placement(transformation(extent={{3,37},{23,42}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              posterior_intercostal_T1_L102(
              RTA=terminalsParameters.RTA_posterior_intercostal_T1_L102,
              RTV=terminalsParameters.RTV_posterior_intercostal_T1_L102,
              CT=terminalsParameters.CT_posterior_intercostal_T1_L102,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_intercostal_T1_L102,
              E=Parameters_Systemic1.E_posterior_intercostal_T1_L102,
              R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_L102,
              C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_L102,
              r=Parameters_Systemic1.r_posterior_intercostal_T1_L102)
              annotation (Placement(transformation(extent={{28,37},{48,42}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              posterior_intercostal_T2_R106(
              RTA=terminalsParameters.RTA_posterior_intercostal_T2_R106,
              RTV=terminalsParameters.RTV_posterior_intercostal_T2_R106,
              CT=terminalsParameters.CT_posterior_intercostal_T2_R106,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_intercostal_T2_R106,
              E=Parameters_Systemic1.E_posterior_intercostal_T2_R106,
              R_T=Parameters_Systemic1.R_T_posterior_intercostal_T2_R106,
              C_T=Parameters_Systemic1.C_T_posterior_intercostal_T2_R106,
              r=Parameters_Systemic1.r_posterior_intercostal_T2_R106)
              annotation (Placement(transformation(extent={{51,37},{71,42}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              posterior_intercostal_T2_L110(
              RTA=terminalsParameters.RTA_posterior_intercostal_T2_L110,
              RTV=terminalsParameters.RTV_posterior_intercostal_T2_L110,
              CT=terminalsParameters.CT_posterior_intercostal_T2_L110,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_intercostal_T2_L110,
              E=Parameters_Systemic1.E_posterior_intercostal_T2_L110,
              R_T=Parameters_Systemic1.R_T_posterior_intercostal_T2_L110,
              C_T=Parameters_Systemic1.C_T_posterior_intercostal_T2_L110,
              r=Parameters_Systemic1.r_posterior_intercostal_T2_L110)
              annotation (Placement(transformation(extent={{78,37},{98,42}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              celiac_trunk_C116(
              l=Parameters_Systemic1.l_celiac_trunk_C116,
              E=Parameters_Systemic1.E_celiac_trunk_C116,
              r=Parameters_Systemic1.r_celiac_trunk_C116)
              annotation (Placement(transformation(extent={{-71,-3},{-51,2}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              splenic_T2_C118(
              l=Parameters_Systemic1.l_splenic_T2_C118,
              E=Parameters_Systemic1.E_splenic_T2_C118,
              r=Parameters_Systemic1.r_splenic_T2_C118)
              annotation (Placement(transformation(extent={{-46,-3},{-26,2}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              left_gastric_T3_C120(
              RTA=terminalsParameters.RTA_left_gastric_T3_C120,
              RTV=terminalsParameters.RTV_left_gastric_T3_C120,
              CT=terminalsParameters.CT_left_gastric_T3_C120,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_left_gastric_T3_C120,
              E=Parameters_Systemic1.E_left_gastric_T3_C120,
              R_T=Parameters_Systemic1.R_T_left_gastric_T3_C120,
              C_T=Parameters_Systemic1.C_T_left_gastric_T3_C120,
              r=Parameters_Systemic1.r_left_gastric_T3_C120)
              annotation (Placement(transformation(extent={{-45,5},{-25,10}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              splenic_T2_C122(
              l=Parameters_Systemic1.l_splenic_T2_C122,
              E=Parameters_Systemic1.E_splenic_T2_C122,
              r=Parameters_Systemic1.r_splenic_T2_C122)
              annotation (Placement(transformation(extent={{-18,-3},{2,2}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              dorsal_pancreatic_T1_C124(
              RTA=terminalsParameters.RTA_dorsal_pancreatic_T1_C124,
              RTV=terminalsParameters.RTV_dorsal_pancreatic_T1_C124,
              CT=terminalsParameters.CT_dorsal_pancreatic_T1_C124,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_dorsal_pancreatic_T1_C124,
              E=Parameters_Systemic1.E_dorsal_pancreatic_T1_C124,
              R_T=Parameters_Systemic1.R_T_dorsal_pancreatic_T1_C124,
              C_T=Parameters_Systemic1.C_T_dorsal_pancreatic_T1_C124,
              r=Parameters_Systemic1.r_dorsal_pancreatic_T1_C124)
              annotation (Placement(transformation(extent={{-17,5},{3,10}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              splenic_T2_C126(
              RTA=terminalsParameters.RTA_splenic_T2_C126,
              RTV=terminalsParameters.RTV_splenic_T2_C126,
              CT=terminalsParameters.CT_splenic_T2_C126,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_splenic_T2_C126,
              E=Parameters_Systemic1.E_splenic_T2_C126,
              R_T=Parameters_Systemic1.R_T_splenic_T2_C126,
              C_T=Parameters_Systemic1.C_T_splenic_T2_C126,
              r=Parameters_Systemic1.r_splenic_T2_C126)
              annotation (Placement(transformation(extent={{8,5},{28,10}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_hepatic_C128(
              l=Parameters_Systemic1.l_common_hepatic_C128,
              E=Parameters_Systemic1.E_common_hepatic_C128,
              r=Parameters_Systemic1.r_common_hepatic_C128)
              annotation (Placement(transformation(extent={{9,-3},{29,2}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              hepatic_artery_proper_C130(
              l=Parameters_Systemic1.l_hepatic_artery_proper_C130,
              E=Parameters_Systemic1.E_hepatic_artery_proper_C130,
              r=Parameters_Systemic1.r_hepatic_artery_proper_C130)
              annotation (Placement(transformation(extent={{32,-3},{52,2}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              hepatic_artery_proper_left_branch_C132(
              RTA=terminalsParameters.RTA_hepatic_artery_proper_left_branch_C132,
              RTV=terminalsParameters.RTV_hepatic_artery_proper_left_branch_C132,
              CT=terminalsParameters.CT_hepatic_artery_proper_left_branch_C132,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_hepatic_artery_proper_left_branch_C132,
              E=Parameters_Systemic1.E_hepatic_artery_proper_left_branch_C132,
              R_T=Parameters_Systemic1.R_T_hepatic_artery_proper_left_branch_C132,
              C_T=Parameters_Systemic1.C_T_hepatic_artery_proper_left_branch_C132,
              r=Parameters_Systemic1.r_hepatic_artery_proper_left_branch_C132)
              annotation (Placement(transformation(extent={{55,-3},{75,2}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              hepatic_artery_proper_right_branch_C134(
              RTA=terminalsParameters.RTA_hepatic_artery_proper_right_branch_C134,
              RTV=terminalsParameters.RTV_hepatic_artery_proper_right_branch_C134,
              CT=terminalsParameters.CT_hepatic_artery_proper_right_branch_C134,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_hepatic_artery_proper_right_branch_C134,
              E=Parameters_Systemic1.E_hepatic_artery_proper_right_branch_C134,
              R_T=Parameters_Systemic1.R_T_hepatic_artery_proper_right_branch_C134,
              C_T=Parameters_Systemic1.C_T_hepatic_artery_proper_right_branch_C134,
              r=Parameters_Systemic1.r_hepatic_artery_proper_right_branch_C134)
              annotation (Placement(transformation(extent={{56,5},{76,10}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              superior_mesenteric_T4_C138(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C138,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C138,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C138) annotation (
               Placement(transformation(extent={{-45,-91},{-25,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              middle_colic_T8_C140(
              RTA=terminalsParameters.RTA_middle_colic_T8_C140,
              RTV=terminalsParameters.RTV_middle_colic_T8_C140,
              CT=terminalsParameters.CT_middle_colic_T8_C140,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_middle_colic_T8_C140,
              E=Parameters_Systemic1.E_middle_colic_T8_C140,
              R_T=Parameters_Systemic1.R_T_middle_colic_T8_C140,
              C_T=Parameters_Systemic1.C_T_middle_colic_T8_C140,
              r=Parameters_Systemic1.r_middle_colic_T8_C140) annotation (
                Placement(transformation(extent={{-18,-99},{2,-94}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              superior_mesenteric_T4_C142(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C142,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C142,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C142) annotation (
               Placement(transformation(extent={{-19,-91},{1,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              jejunal_3_T10_C144(
              RTA=terminalsParameters.RTA_jejunal_3_T10_C144,
              RTV=terminalsParameters.RTV_jejunal_3_T10_C144,
              CT=terminalsParameters.CT_jejunal_3_T10_C144,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_jejunal_3_T10_C144,
              E=Parameters_Systemic1.E_jejunal_3_T10_C144,
              R_T=Parameters_Systemic1.R_T_jejunal_3_T10_C144,
              C_T=Parameters_Systemic1.C_T_jejunal_3_T10_C144,
              r=Parameters_Systemic1.r_jejunal_3_T10_C144)
              annotation (Placement(transformation(extent={{6,-99},{26,-94}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              superior_mesenteric_T4_C146(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C146,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C146,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C146)
              annotation (Placement(transformation(extent={{5,-91},{25,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              jejunal_6_T11_C148(
              RTA=terminalsParameters.RTA_jejunal_6_T11_C148,
              RTV=terminalsParameters.RTV_jejunal_6_T11_C148,
              CT=terminalsParameters.CT_jejunal_6_T11_C148,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_jejunal_6_T11_C148,
              E=Parameters_Systemic1.E_jejunal_6_T11_C148,
              R_T=Parameters_Systemic1.R_T_jejunal_6_T11_C148,
              C_T=Parameters_Systemic1.C_T_jejunal_6_T11_C148,
              r=Parameters_Systemic1.r_jejunal_6_T11_C148) annotation (
                Placement(transformation(extent={{32,-99},{52,-94}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              superior_mesenteric_T4_C150(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C150,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C150,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C150) annotation (
               Placement(transformation(extent={{31,-91},{51,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              ileocolic_T9_C152(
              RTA=terminalsParameters.RTA_ileocolic_T9_C152,
              RTV=terminalsParameters.RTV_ileocolic_T9_C152,
              CT=terminalsParameters.CT_ileocolic_T9_C152,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_ileocolic_T9_C152,
              E=Parameters_Systemic1.E_ileocolic_T9_C152,
              R_T=Parameters_Systemic1.R_T_ileocolic_T9_C152,
              C_T=Parameters_Systemic1.C_T_ileocolic_T9_C152,
              r=Parameters_Systemic1.r_ileocolic_T9_C152) annotation (Placement(
                  transformation(extent={{58,-99},{78,-94}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              superior_mesenteric_T4_C154(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C154,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C154,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C154) annotation (
               Placement(transformation(extent={{57,-91},{77,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              ileal_4_T12_C156(
              RTA=terminalsParameters.RTA_ileal_4_T12_C156,
              RTV=terminalsParameters.RTV_ileal_4_T12_C156,
              CT=terminalsParameters.CT_ileal_4_T12_C156,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_ileal_4_T12_C156,
              E=Parameters_Systemic1.E_ileal_4_T12_C156,
              R_T=Parameters_Systemic1.R_T_ileal_4_T12_C156,
              C_T=Parameters_Systemic1.C_T_ileal_4_T12_C156,
              r=Parameters_Systemic1.r_ileal_4_T12_C156) annotation (Placement(
                  transformation(extent={{84,-99},{104,-94}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              superior_mesenteric_T4_C158(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C158,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C158,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C158) annotation (
               Placement(transformation(extent={{83,-91},{103,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              ileal_6_T13_C160(
              RTA=terminalsParameters.RTA_ileal_6_T13_C160,
              RTV=terminalsParameters.RTV_ileal_6_T13_C160,
              CT=terminalsParameters.CT_ileal_6_T13_C160,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_ileal_6_T13_C160,
              E=Parameters_Systemic1.E_ileal_6_T13_C160,
              R_T=Parameters_Systemic1.R_T_ileal_6_T13_C160,
              C_T=Parameters_Systemic1.C_T_ileal_6_T13_C160,
              r=Parameters_Systemic1.r_ileal_6_T13_C160) annotation (Placement(
                  transformation(extent={{108,-99},{128,-94}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              superior_mesenteric_T4_C162(
              RTA=terminalsParameters.RTA_superior_mesenteric_T4_C162,
              RTV=terminalsParameters.RTV_superior_mesenteric_T4_C162,
              CT=terminalsParameters.CT_superior_mesenteric_T4_C162,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C162,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C162,
              R_T=Parameters_Systemic1.R_T_superior_mesenteric_T4_C162,
              C_T=Parameters_Systemic1.C_T_superior_mesenteric_T4_C162,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C162) annotation (
               Placement(transformation(extent={{107,-91},{127,-86}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              renal_L166(
              l=Parameters_Systemic1.l_renal_L166,
              E=Parameters_Systemic1.E_renal_L166,
              r=Parameters_Systemic1.r_renal_L166) annotation (Placement(
                  transformation(extent={{-2,-67},{18,-62}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              renal_anterior_branch_L168(
              l=Parameters_Systemic1.l_renal_anterior_branch_L168,
              E=Parameters_Systemic1.E_renal_anterior_branch_L168,
              r=Parameters_Systemic1.r_renal_anterior_branch_L168) annotation (
                Placement(transformation(extent={{23,-67},{43,-62}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              inferior_segmental_T5_L170(
              RTA=terminalsParameters.RTA_inferior_segmental_T5_L170,
              RTV=terminalsParameters.RTV_inferior_segmental_T5_L170,
              CT=terminalsParameters.CT_inferior_segmental_T5_L170,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_inferior_segmental_T5_L170,
              E=Parameters_Systemic1.E_inferior_segmental_T5_L170,
              R_T=Parameters_Systemic1.R_T_inferior_segmental_T5_L170,
              C_T=Parameters_Systemic1.C_T_inferior_segmental_T5_L170,
              r=Parameters_Systemic1.r_inferior_segmental_T5_L170) annotation (
                Placement(transformation(extent={{48,-67},{68,-62}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              superior_segmental_T4_L172(
              RTA=terminalsParameters.RTA_superior_segmental_T4_L172,
              RTV=terminalsParameters.RTV_superior_segmental_T4_L172,
              CT=terminalsParameters.CT_superior_segmental_T4_L172,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_superior_segmental_T4_L172,
              E=Parameters_Systemic1.E_superior_segmental_T4_L172,
              R_T=Parameters_Systemic1.R_T_superior_segmental_T4_L172,
              C_T=Parameters_Systemic1.C_T_superior_segmental_T4_L172,
              r=Parameters_Systemic1.r_superior_segmental_T4_L172) annotation (
                Placement(transformation(extent={{47,-77},{67,-72}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              renal_posterior_branch_T3_L174(
              RTA=terminalsParameters.RTA_renal_posterior_branch_T3_L174,
              RTV=terminalsParameters.RTV_renal_posterior_branch_T3_L174,
              CT=terminalsParameters.CT_renal_posterior_branch_T3_L174,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_renal_posterior_branch_T3_L174,
              E=Parameters_Systemic1.E_renal_posterior_branch_T3_L174,
              R_T=Parameters_Systemic1.R_T_renal_posterior_branch_T3_L174,
              C_T=Parameters_Systemic1.C_T_renal_posterior_branch_T3_L174,
              r=Parameters_Systemic1.r_renal_posterior_branch_T3_L174)
              annotation (Placement(transformation(extent={{24,-77},{44,-72}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              renal_R178(
              l=Parameters_Systemic1.l_renal_R178,
              E=Parameters_Systemic1.E_renal_R178,
              r=Parameters_Systemic1.r_renal_R178) annotation (Placement(
                  transformation(extent={{25,-25},{45,-20}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              renal_anterior_branch_R180(
              l=Parameters_Systemic1.l_renal_anterior_branch_R180,
              E=Parameters_Systemic1.E_renal_anterior_branch_R180,
              r=Parameters_Systemic1.r_renal_anterior_branch_R180) annotation (
                Placement(transformation(extent={{50,-25},{70,-20}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              superior_segmental_T4_R182(
              RTA=terminalsParameters.RTA_superior_segmental_T4_R182,
              RTV=terminalsParameters.RTV_superior_segmental_T4_R182,
              CT=terminalsParameters.CT_superior_segmental_T4_R182,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_superior_segmental_T4_R182,
              E=Parameters_Systemic1.E_superior_segmental_T4_R182,
              R_T=Parameters_Systemic1.R_T_superior_segmental_T4_R182,
              C_T=Parameters_Systemic1.C_T_superior_segmental_T4_R182,
              r=Parameters_Systemic1.r_superior_segmental_T4_R182) annotation (
                Placement(transformation(extent={{75,-25},{95,-20}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              inferior_segmental_T5_R184(
              RTA=terminalsParameters.RTA_inferior_segmental_T5_R184,
              RTV=terminalsParameters.RTV_inferior_segmental_T5_R184,
              CT=terminalsParameters.CT_inferior_segmental_T5_R184,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_inferior_segmental_T5_R184,
              E=Parameters_Systemic1.E_inferior_segmental_T5_R184,
              R_T=Parameters_Systemic1.R_T_inferior_segmental_T5_R184,
              C_T=Parameters_Systemic1.C_T_inferior_segmental_T5_R184,
              r=Parameters_Systemic1.r_inferior_segmental_T5_R184) annotation (
                Placement(transformation(extent={{74,-17},{94,-12}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              renal_posterior_branch_T3_R186(
              RTA=terminalsParameters.RTA_renal_posterior_branch_T3_R186,
              RTV=terminalsParameters.RTV_renal_posterior_branch_T3_R186,
              CT=terminalsParameters.CT_renal_posterior_branch_T3_R186,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_renal_posterior_branch_T3_R186,
              E=Parameters_Systemic1.E_renal_posterior_branch_T3_R186,
              R_T=Parameters_Systemic1.R_T_renal_posterior_branch_T3_R186,
              C_T=Parameters_Systemic1.C_T_renal_posterior_branch_T3_R186,
              r=Parameters_Systemic1.r_renal_posterior_branch_T3_R186)
              annotation (Placement(transformation(extent={{49,-17},{69,-12}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              inferior_mesenteric_T5_C190(
              RTA=terminalsParameters.RTA_inferior_mesenteric_T5_C190,
              RTV=terminalsParameters.RTV_inferior_mesenteric_T5_C190,
              CT=terminalsParameters.CT_inferior_mesenteric_T5_C190,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_inferior_mesenteric_T5_C190,
              E=Parameters_Systemic1.E_inferior_mesenteric_T5_C190,
              R_T=Parameters_Systemic1.R_T_inferior_mesenteric_T5_C190,
              C_T=Parameters_Systemic1.C_T_inferior_mesenteric_T5_C190,
              r=Parameters_Systemic1.r_inferior_mesenteric_T5_C190) annotation (
               Placement(transformation(extent={{48,-57},{68,-52}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_iliac_R216(
              l=Parameters_Systemic1.l_common_iliac_R216,
              E=Parameters_Systemic1.E_common_iliac_R216,
              r=Parameters_Systemic1.r_common_iliac_R216) annotation (Placement(
                  transformation(extent={{75,-43},{95,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              internal_iliac_T1_R218(
              RTA=terminalsParameters.RTA_internal_iliac_T1_R218,
              RTV=terminalsParameters.RTV_internal_iliac_T1_R218,
              CT=terminalsParameters.CT_internal_iliac_T1_R218,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_internal_iliac_T1_R218,
              E=Parameters_Systemic1.E_internal_iliac_T1_R218,
              R_T=Parameters_Systemic1.R_T_internal_iliac_T1_R218,
              C_T=Parameters_Systemic1.C_T_internal_iliac_T1_R218,
              r=Parameters_Systemic1.r_internal_iliac_T1_R218) annotation (
                Placement(transformation(extent={{98,-33},{118,-28}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              external_iliac_R220(
              l=Parameters_Systemic1.l_external_iliac_R220,
              E=Parameters_Systemic1.E_external_iliac_R220,
              r=Parameters_Systemic1.r_external_iliac_R220) annotation (
                Placement(transformation(extent={{99,-43},{119,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              femoral_R222(
              l=Parameters_Systemic1.l_femoral_R222,
              E=Parameters_Systemic1.E_femoral_R222,
              r=Parameters_Systemic1.r_femoral_R222) annotation (Placement(
                  transformation(extent={{124,-43},{144,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              profundus_T2_R224(
              RTA=terminalsParameters.RTA_profundus_T2_R224,
              RTV=terminalsParameters.RTV_profundus_T2_R224,
              CT=terminalsParameters.CT_profundus_T2_R224,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_profundus_T2_R224,
              E=Parameters_Systemic1.E_profundus_T2_R224,
              R_T=Parameters_Systemic1.R_T_profundus_T2_R224,
              C_T=Parameters_Systemic1.C_T_profundus_T2_R224,
              r=Parameters_Systemic1.r_profundus_T2_R224) annotation (Placement(
                  transformation(extent={{149,-33},{169,-28}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              femoral_R226(
              l=Parameters_Systemic1.l_femoral_R226,
              E=Parameters_Systemic1.E_femoral_R226,
              r=Parameters_Systemic1.r_femoral_R226) annotation (Placement(
                  transformation(extent={{150,-43},{170,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              popliteal_R228(
              l=Parameters_Systemic1.l_popliteal_R228,
              E=Parameters_Systemic1.E_popliteal_R228,
              r=Parameters_Systemic1.r_popliteal_R228) annotation (Placement(
                  transformation(extent={{175,-43},{195,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              anterior_tibial_T3_R230(
              RTA=terminalsParameters.RTA_anterior_tibial_T3_R230,
              RTV=terminalsParameters.RTV_anterior_tibial_T3_R230,
              CT=terminalsParameters.CT_anterior_tibial_T3_R230,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_anterior_tibial_T3_R230,
              E=Parameters_Systemic1.E_anterior_tibial_T3_R230,
              R_T=Parameters_Systemic1.R_T_anterior_tibial_T3_R230,
              C_T=Parameters_Systemic1.C_T_anterior_tibial_T3_R230,
              r=Parameters_Systemic1.r_anterior_tibial_T3_R230) annotation (
                Placement(transformation(extent={{200,-33},{220,-28}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              popliteal_R232(
              l=Parameters_Systemic1.l_popliteal_R232,
              E=Parameters_Systemic1.E_popliteal_R232,
              r=Parameters_Systemic1.r_popliteal_R232) annotation (Placement(
                  transformation(extent={{199,-43},{219,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              tibiofibular_trunk_R234(
              l=Parameters_Systemic1.l_tibiofibular_trunk_R234,
              E=Parameters_Systemic1.E_tibiofibular_trunk_R234,
              r=Parameters_Systemic1.r_tibiofibular_trunk_R234) annotation (
                Placement(transformation(extent={{224,-43},{244,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              posterior_tibial_T4_R236(
              RTA=terminalsParameters.RTA_posterior_tibial_T4_R236,
              RTV=terminalsParameters.RTV_posterior_tibial_T4_R236,
              CT=terminalsParameters.CT_posterior_tibial_T4_R236,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_tibial_T4_R236,
              E=Parameters_Systemic1.E_posterior_tibial_T4_R236,
              R_T=Parameters_Systemic1.R_T_posterior_tibial_T4_R236,
              C_T=Parameters_Systemic1.C_T_posterior_tibial_T4_R236,
              r=Parameters_Systemic1.r_posterior_tibial_T4_R236) annotation (
                Placement(transformation(extent={{249,-43},{269,-38}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_iliac_L194(
              l=Parameters_Systemic1.l_common_iliac_L194,
              E=Parameters_Systemic1.E_common_iliac_L194,
              r=Parameters_Systemic1.r_common_iliac_L194) annotation (Placement(
                  transformation(extent={{74,-57},{94,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              internal_iliac_T1_L196(
              RTA=terminalsParameters.RTA_internal_iliac_T1_L196,
              RTV=terminalsParameters.RTV_internal_iliac_T1_L196,
              CT=terminalsParameters.CT_internal_iliac_T1_L196,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_internal_iliac_T1_L196,
              E=Parameters_Systemic1.E_internal_iliac_T1_L196,
              R_T=Parameters_Systemic1.R_T_internal_iliac_T1_L196,
              C_T=Parameters_Systemic1.C_T_internal_iliac_T1_L196,
              r=Parameters_Systemic1.r_internal_iliac_T1_L196) annotation (
                Placement(transformation(extent={{99,-65},{119,-60}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              external_iliac_L198(
              l=Parameters_Systemic1.l_external_iliac_L198,
              E=Parameters_Systemic1.E_external_iliac_L198,
              r=Parameters_Systemic1.r_external_iliac_L198) annotation (
                Placement(transformation(extent={{100,-57},{120,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              femoral_L200(
              l=Parameters_Systemic1.l_femoral_L200,
              E=Parameters_Systemic1.E_femoral_L200,
              r=Parameters_Systemic1.r_femoral_L200) annotation (Placement(
                  transformation(extent={{125,-57},{145,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              profundus_T2_L202(
              RTA=terminalsParameters.RTA_profundus_T2_L202,
              RTV=terminalsParameters.RTV_profundus_T2_L202,
              CT=terminalsParameters.CT_profundus_T2_L202,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_profundus_T2_L202,
              E=Parameters_Systemic1.E_profundus_T2_L202,
              R_T=Parameters_Systemic1.R_T_profundus_T2_L202,
              C_T=Parameters_Systemic1.C_T_profundus_T2_L202,
              r=Parameters_Systemic1.r_profundus_T2_L202) annotation (Placement(
                  transformation(extent={{150,-65},{170,-60}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              femoral_L204(
              l=Parameters_Systemic1.l_femoral_L204,
              E=Parameters_Systemic1.E_femoral_L204,
              r=Parameters_Systemic1.r_femoral_L204) annotation (Placement(
                  transformation(extent={{149,-57},{169,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              popliteal_L206(
              l=Parameters_Systemic1.l_popliteal_L206,
              E=Parameters_Systemic1.E_popliteal_L206,
              r=Parameters_Systemic1.r_popliteal_L206) annotation (Placement(
                  transformation(extent={{174,-57},{194,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              anterior_tibial_T3_L208(
              RTA=terminalsParameters.RTA_anterior_tibial_T3_L208,
              RTV=terminalsParameters.RTV_anterior_tibial_T3_L208,
              CT=terminalsParameters.CT_anterior_tibial_T3_L208,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_anterior_tibial_T3_L208,
              E=Parameters_Systemic1.E_anterior_tibial_T3_L208,
              R_T=Parameters_Systemic1.R_T_anterior_tibial_T3_L208,
              C_T=Parameters_Systemic1.C_T_anterior_tibial_T3_L208,
              r=Parameters_Systemic1.r_anterior_tibial_T3_L208) annotation (
                Placement(transformation(extent={{199,-65},{219,-60}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              popliteal_L210(
              l=Parameters_Systemic1.l_popliteal_L210,
              E=Parameters_Systemic1.E_popliteal_L210,
              r=Parameters_Systemic1.r_popliteal_L210) annotation (Placement(
                  transformation(extent={{200,-57},{220,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              tibiofibular_trunk_L212(
              l=Parameters_Systemic1.l_tibiofibular_trunk_L212,
              E=Parameters_Systemic1.E_tibiofibular_trunk_L212,
              r=Parameters_Systemic1.r_tibiofibular_trunk_L212) annotation (
                Placement(transformation(extent={{225,-57},{245,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              posterior_tibial_T4_L214(
              RTA=terminalsParameters.RTA_posterior_tibial_T4_L214,
              RTV=terminalsParameters.RTV_posterior_tibial_T4_L214,
              CT=terminalsParameters.CT_posterior_tibial_T4_L214,
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_tibial_T4_L214,
              E=Parameters_Systemic1.E_posterior_tibial_T4_L214,
              R_T=Parameters_Systemic1.R_T_posterior_tibial_T4_L214,
              C_T=Parameters_Systemic1.C_T_posterior_tibial_T4_L214,
              r=Parameters_Systemic1.r_posterior_tibial_T4_L214) annotation (
                Placement(transformation(extent={{250,-57},{270,-52}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              subclavian_R28(
              l=Parameters_Systemic1.l_subclavian_R28,
              E=Parameters_Systemic1.E_subclavian_R28,
              r=Parameters_Systemic1.r_subclavian_R28) annotation (Placement(
                  transformation(extent={{-75,119},{-55,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              subclavian_R30(
              l=Parameters_Systemic1.l_subclavian_R30,
              E=Parameters_Systemic1.E_subclavian_R30,
              r=Parameters_Systemic1.r_subclavian_R30) annotation (Placement(
                  transformation(extent={{-50,119},{-30,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              axillary_R32(
              l=Parameters_Systemic1.l_axillary_R32,
              E=Parameters_Systemic1.E_axillary_R32,
              r=Parameters_Systemic1.r_axillary_R32) annotation (Placement(
                  transformation(extent={{-25,119},{-5,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              brachial_R34(
              l=Parameters_Systemic1.l_brachial_R34,
              E=Parameters_Systemic1.E_brachial_R34,
              r=Parameters_Systemic1.r_brachial_R34)
              annotation (Placement(transformation(extent={{0,119},{20,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              ulnar_T2_R36(
              l=Parameters_Systemic1.l_ulnar_T2_R36,
              E=Parameters_Systemic1.E_ulnar_T2_R36,
              r=Parameters_Systemic1.r_ulnar_T2_R36) annotation (Placement(
                  transformation(extent={{25,119},{45,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_interosseous_R38(
              l=Parameters_Systemic1.l_common_interosseous_R38,
              E=Parameters_Systemic1.E_common_interosseous_R38,
              r=Parameters_Systemic1.r_common_interosseous_R38) annotation (
                Placement(transformation(extent={{50,119},{70,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              posterior_interosseous_T3_R40(
              RTA=terminalsParameters.RTA_posterior_interosseous_T3_R40,
              RTV=terminalsParameters.RTV_posterior_interosseous_T3_R40,
              CT=terminalsParameters.CT_posterior_interosseous_T3_R40,
              p_out=u_svl,
              l=Parameters_Systemic1.l_posterior_interosseous_T3_R40,
              E=Parameters_Systemic1.E_posterior_interosseous_T3_R40,
              R_T=Parameters_Systemic1.R_T_posterior_interosseous_T3_R40,
              C_T=Parameters_Systemic1.C_T_posterior_interosseous_T3_R40,
              r=Parameters_Systemic1.r_posterior_interosseous_T3_R40)
              annotation (Placement(transformation(extent={{75,119},{95,124}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              ulnar_T2_R42(
              RTA=terminalsParameters.RTA_ulnar_T2_R42,
              RTV=terminalsParameters.RTV_ulnar_T2_R42,
              CT=terminalsParameters.CT_ulnar_T2_R42,
              p_out=u_svl,
              l=Parameters_Systemic1.l_ulnar_T2_R42,
              E=Parameters_Systemic1.E_ulnar_T2_R42,
              R_T=Parameters_Systemic1.R_T_ulnar_T2_R42,
              C_T=Parameters_Systemic1.C_T_ulnar_T2_R42,
              r=Parameters_Systemic1.r_ulnar_T2_R42) annotation (Placement(
                  transformation(extent={{50,109},{70,114}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              radial_T1_R44(
              RTA=terminalsParameters.RTA_radial_T1_R44,
              RTV=terminalsParameters.RTV_radial_T1_R44,
              CT=terminalsParameters.CT_radial_T1_R44,
              p_out=u_svl,
              l=Parameters_Systemic1.l_radial_T1_R44,
              E=Parameters_Systemic1.E_radial_T1_R44,
              R_T=Parameters_Systemic1.R_T_radial_T1_R44,
              C_T=Parameters_Systemic1.C_T_radial_T1_R44,
              r=Parameters_Systemic1.r_radial_T1_R44) annotation (Placement(
                  transformation(extent={{25,109},{45,114}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              subclavian_L66(
              l=Parameters_Systemic1.l_subclavian_L66,
              E=Parameters_Systemic1.E_subclavian_L66,
              r=Parameters_Systemic1.r_subclavian_L66) annotation (Placement(
                  transformation(extent={{-50,73},{-30,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              subclavian_L78(
              l=Parameters_Systemic1.l_subclavian_L78,
              E=Parameters_Systemic1.E_subclavian_L78,
              r=Parameters_Systemic1.r_subclavian_L78)
              annotation (Placement(transformation(extent={{-25,73},{-5,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              axillary_L80(
              l=Parameters_Systemic1.l_axillary_L80,
              E=Parameters_Systemic1.E_axillary_L80,
              r=Parameters_Systemic1.r_axillary_L80)
              annotation (Placement(transformation(extent={{0,73},{20,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              brachial_L82(
              l=Parameters_Systemic1.l_brachial_L82,
              E=Parameters_Systemic1.E_brachial_L82,
              r=Parameters_Systemic1.r_brachial_L82)
              annotation (Placement(transformation(extent={{25,73},{45,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              ulnar_T2_L84(
              l=Parameters_Systemic1.l_ulnar_T2_L84,
              E=Parameters_Systemic1.E_ulnar_T2_L84,
              r=Parameters_Systemic1.r_ulnar_T2_L84)
              annotation (Placement(transformation(extent={{50,73},{70,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_interosseous_L86(
              l=Parameters_Systemic1.l_common_interosseous_L86,
              E=Parameters_Systemic1.E_common_interosseous_L86,
              r=Parameters_Systemic1.r_common_interosseous_L86)
              annotation (Placement(transformation(extent={{75,73},{95,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              posterior_interosseous_T3_L88(
              RTA=terminalsParameters.RTA_posterior_interosseous_T3_L88,
              RTV=terminalsParameters.RTV_posterior_interosseous_T3_L88,
              CT=terminalsParameters.CT_posterior_interosseous_T3_L88,
              p_out=u_svl,
              l=Parameters_Systemic1.l_posterior_interosseous_T3_L88,
              E=Parameters_Systemic1.E_posterior_interosseous_T3_L88,
              R_T=Parameters_Systemic1.R_T_posterior_interosseous_T3_L88,
              C_T=Parameters_Systemic1.C_T_posterior_interosseous_T3_L88,
              r=Parameters_Systemic1.r_posterior_interosseous_T3_L88)
              annotation (Placement(transformation(extent={{100,73},{120,78}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              ulnar_T2_L90(
              RTA=terminalsParameters.RTA_ulnar_T2_L90,
              RTV=terminalsParameters.RTV_ulnar_T2_L90,
              CT=terminalsParameters.CT_ulnar_T2_L90,
              p_out=u_svl,
              l=Parameters_Systemic1.l_ulnar_T2_L90,
              E=Parameters_Systemic1.E_ulnar_T2_L90,
              R_T=Parameters_Systemic1.R_T_ulnar_T2_L90,
              C_T=Parameters_Systemic1.C_T_ulnar_T2_L90,
              r=Parameters_Systemic1.r_ulnar_T2_L90)
              annotation (Placement(transformation(extent={{75,63},{95,68}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              radial_T1_L92(
              RTA=terminalsParameters.RTA_radial_T1_L92,
              RTV=terminalsParameters.RTV_radial_T1_L92,
              CT=terminalsParameters.CT_radial_T1_L92,
              p_out=u_svl,
              l=Parameters_Systemic1.l_radial_T1_L92,
              E=Parameters_Systemic1.E_radial_T1_L92,
              R_T=Parameters_Systemic1.R_T_radial_T1_L92,
              C_T=Parameters_Systemic1.C_T_radial_T1_L92,
              r=Parameters_Systemic1.r_radial_T1_L92)
              annotation (Placement(transformation(extent={{50,63},{70,68}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_R6_A(
              l=Parameters_Systemic1.l_common_carotid_R6_A,
              E=Parameters_Systemic1.E_common_carotid_R6_A,
              r=Parameters_Systemic1.r_common_carotid_R6_A) annotation (
                Placement(transformation(extent={{-73,133},{-53,138}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_R6_B(
              l=Parameters_Systemic1.l_common_carotid_R6_B,
              E=Parameters_Systemic1.E_common_carotid_R6_B,
              r=Parameters_Systemic1.r_common_carotid_R6_B) annotation (
                Placement(transformation(extent={{-48,133},{-28,138}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_R6_C(
              l=Parameters_Systemic1.l_common_carotid_R6_C,
              E=Parameters_Systemic1.E_common_carotid_R6_C,
              r=Parameters_Systemic1.r_common_carotid_R6_C) annotation (
                Placement(transformation(extent={{-23,133},{-3,138}})));
            replaceable
              ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              internal_carotid_R8_A(
              l=Parameters_Systemic1.l_internal_carotid_R8_A,
              E=Parameters_Systemic1.E_internal_carotid_R8_A,
              r=Parameters_Systemic1.r_internal_carotid_R8_A)
              annotation (Placement(transformation(extent={{2,133},{22,138}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              internal_carotid_R8_B(
              l=Parameters_Systemic1.l_internal_carotid_R8_B,
              E=Parameters_Systemic1.E_internal_carotid_R8_B,
              r=Parameters_Systemic1.r_internal_carotid_R8_B) annotation (
                Placement(transformation(extent={{27,133},{47,138}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              internal_carotid_R8_C(
              RTA=terminalsParameters.RTA_internal_carotid_R8_C,
              RTV=terminalsParameters.RTV_internal_carotid_R8_C,
              CT=terminalsParameters.CT_internal_carotid_R8_C,
              p_out=u_svl,
              l=Parameters_Systemic1.l_internal_carotid_R8_C,
              E=Parameters_Systemic1.E_internal_carotid_R8_C,
              R_T=Parameters_Systemic1.R_T_internal_carotid_R8_C,
              C_T=Parameters_Systemic1.C_T_internal_carotid_R8_C,
              r=Parameters_Systemic1.r_internal_carotid_R8_C) annotation (
                Placement(transformation(extent={{54,133},{74,138}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              external_carotid_T2_R26(
              RTA=terminalsParameters.RTA_external_carotid_T2_R26,
              RTV=terminalsParameters.RTV_external_carotid_T2_R26,
              CT=terminalsParameters.CT_external_carotid_T2_R26,
              p_out=u_svl,
              l=Parameters_Systemic1.l_external_carotid_T2_R26,
              E=Parameters_Systemic1.E_external_carotid_T2_R26,
              R_T=Parameters_Systemic1.R_T_external_carotid_T2_R26,
              C_T=Parameters_Systemic1.C_T_external_carotid_T2_R26,
              r=Parameters_Systemic1.r_external_carotid_T2_R26)
              annotation (Placement(transformation(extent={{3,145},{23,150}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_L48_A(
              l=Parameters_Systemic1.l_common_carotid_L48_A,
              E=Parameters_Systemic1.E_common_carotid_L48_A,
              r=Parameters_Systemic1.r_common_carotid_L48_A) annotation (
                Placement(transformation(extent={{-72,93},{-52,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_L48_B(
              l=Parameters_Systemic1.l_common_carotid_L48_B,
              E=Parameters_Systemic1.E_common_carotid_L48_B,
              r=Parameters_Systemic1.r_common_carotid_L48_B) annotation (
                Placement(transformation(extent={{-47,93},{-27,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_L48_C(
              l=Parameters_Systemic1.l_common_carotid_L48_C,
              E=Parameters_Systemic1.E_common_carotid_L48_C,
              r=Parameters_Systemic1.r_common_carotid_L48_C)
              annotation (Placement(transformation(extent={{-22,93},{-2,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_L48_D(
              l=Parameters_Systemic1.l_common_carotid_L48_D,
              E=Parameters_Systemic1.E_common_carotid_L48_D,
              r=Parameters_Systemic1.r_common_carotid_L48_D)
              annotation (Placement(transformation(extent={{3,93},{23,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              internal_carotid_L50_A(
              l=Parameters_Systemic1.l_internal_carotid_L50_A,
              E=Parameters_Systemic1.E_internal_carotid_L50_A,
              r=Parameters_Systemic1.r_internal_carotid_L50_A)
              annotation (Placement(transformation(extent={{28,93},{48,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              internal_carotid_L50_B(
              l=Parameters_Systemic1.l_internal_carotid_L50_B,
              E=Parameters_Systemic1.E_internal_carotid_L50_B,
              r=Parameters_Systemic1.r_internal_carotid_L50_B)
              annotation (Placement(transformation(extent={{53,93},{73,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              internal_carotid_L50_C(
              RTA=terminalsParameters.RTA_internal_carotid_L50_C,
              RTV=terminalsParameters.RTV_internal_carotid_L50_C,
              CT=terminalsParameters.CT_internal_carotid_L50_C,
              p_out=u_svl,
              l=Parameters_Systemic1.l_internal_carotid_L50_C,
              E=Parameters_Systemic1.E_internal_carotid_L50_C,
              R_T=Parameters_Systemic1.R_T_internal_carotid_L50_C,
              C_T=Parameters_Systemic1.C_T_internal_carotid_L50_C,
              r=Parameters_Systemic1.r_internal_carotid_L50_C)
              annotation (Placement(transformation(extent={{78,93},{98,98}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              external_carotid_T2_L62(
              RTA=terminalsParameters.RTA_external_carotid_T2_L62,
              RTV=terminalsParameters.RTV_external_carotid_T2_L62,
              CT=terminalsParameters.CT_external_carotid_T2_L62,
              p_out=u_svl,
              l=Parameters_Systemic1.l_external_carotid_T2_L62,
              E=Parameters_Systemic1.E_external_carotid_T2_L62,
              R_T=Parameters_Systemic1.R_T_external_carotid_T2_L62,
              C_T=Parameters_Systemic1.C_T_external_carotid_T2_L62,
              r=Parameters_Systemic1.r_external_carotid_T2_L62)
              annotation (Placement(transformation(extent={{27,85},{47,90}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              vertebral_L2(
              RTA=terminalsParameters.RTA_vertebral_L2,
              RTV=terminalsParameters.RTV_vertebral_L2,
              CT=terminalsParameters.CT_vertebral_L2,
              p_out=u_svl,
              l=Parameters_Systemic1.l_vertebral_L2,
              E=Parameters_Systemic1.E_vertebral_L2,
              R_T=Parameters_Systemic1.R_T_vertebral_L2,
              C_T=Parameters_Systemic1.C_T_vertebral_L2,
              r=Parameters_Systemic1.r_vertebral_L2)
              annotation (Placement(transformation(extent={{-26,63},{-6,68}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
              vertebral_R272(
              RTA=terminalsParameters.RTA_vertebral_R272,
              RTV=terminalsParameters.RTV_vertebral_R272,
              CT=terminalsParameters.CT_vertebral_R272,
              p_out=u_svl,
              l=Parameters_Systemic1.l_vertebral_R272,
              E=Parameters_Systemic1.E_vertebral_R272,
              R_T=Parameters_Systemic1.R_T_vertebral_R272,
              C_T=Parameters_Systemic1.C_T_vertebral_R272,
              r=Parameters_Systemic1.r_vertebral_R272) annotation (Placement(
                  transformation(extent={{-49,111},{-29,116}})));

            Physiolibrary.Types.Pressure u_svl=pq_terminator_v_superior.u;
            Physiolibrary.Types.Pressure u_ivl = pq_terminator_v_inferior.u;
            Physiolibrary.Types.VolumeFlowRate v_veins = v_sup_venacava + v_inf_venacava;
            Real v_sup_venacava(unit = "m3.s-1") = v_arms+v_head;
            Real v_inf_venacava(unit = "m3.s-1") = v_chest+v_trunk+v_intestines+v_kidneys+v_legs;
            Real v_chest(unit = "m3.s-1") = v_posterior_intercostal_T1_R98+v_posterior_intercostal_T1_L102+v_posterior_intercostal_T2_R106+v_posterior_intercostal_T2_L110;
            Real v_trunk(unit = "m3.s-1")= v_left_gastric_T3_C120+v_dorsal_pancreatic_T1_C124+v_splenic_T2_C126+v_hepatic_artery_proper_left_branch_C132+v_hepatic_artery_proper_right_branch_C134;
            Real v_kidneys(unit = "m3.s-1") = v_inferior_segmental_T5_L170+v_superior_segmental_T4_L172+v_renal_posterior_branch_T3_L174+v_superior_segmental_T4_R182+v_inferior_segmental_T5_R184+v_renal_posterior_branch_T3_R186;
            Real v_intestines(unit = "m3.s-1") = v_middle_colic_T8_C140+v_jejunal_3_T10_C144+v_jejunal_6_T11_C148+v_ileocolic_T9_C152+v_ileal_4_T12_C156+v_ileal_6_T13_C160+v_superior_mesenteric_T4_C162+v_inferior_mesenteric_T5_C190;
            Real v_legs(unit = "m3.s-1") = v_internal_iliac_T1_R218+v_profundus_T2_R224+v_anterior_tibial_T3_R230+v_posterior_tibial_T4_R236+v_internal_iliac_T1_L196+v_profundus_T2_L202+v_anterior_tibial_T3_L208+v_posterior_tibial_T4_L214;
            Real v_arms(unit = "m3.s-1") = v_posterior_interosseous_T3_R40+v_ulnar_T2_R42+v_radial_T1_R44+v_posterior_interosseous_T3_L88+v_ulnar_T2_L90+v_radial_T1_L92;
            Real v_head(unit = "m3.s-1") = v_external_carotid_T2_R26+v_external_carotid_T2_L62+v_internal_carotid_R8_C+v_internal_carotid_L50_C+v_vertebral_R272+v_vertebral_L2;
            Real v_posterior_intercostal_T1_R98(unit = "m3.s-1");
            Real v_posterior_intercostal_T1_L102(unit = "m3.s-1");
            Real v_posterior_intercostal_T2_R106(unit = "m3.s-1");
            Real v_posterior_intercostal_T2_L110(unit = "m3.s-1");
            Real v_left_gastric_T3_C120(unit = "m3.s-1");
            Real v_dorsal_pancreatic_T1_C124(unit = "m3.s-1");
            Real v_splenic_T2_C126(unit = "m3.s-1");
            Real v_hepatic_artery_proper_left_branch_C132(unit = "m3.s-1");
            Real v_hepatic_artery_proper_right_branch_C134(unit = "m3.s-1");
            Real v_middle_colic_T8_C140(unit = "m3.s-1");
            Real v_jejunal_3_T10_C144(unit = "m3.s-1");
            Real v_jejunal_6_T11_C148(unit = "m3.s-1");
            Real v_ileocolic_T9_C152(unit = "m3.s-1");
            Real v_ileal_4_T12_C156(unit = "m3.s-1");
            Real v_ileal_6_T13_C160(unit = "m3.s-1");
            Real v_superior_mesenteric_T4_C162(unit = "m3.s-1");
            Real v_inferior_segmental_T5_L170(unit = "m3.s-1");
            Real v_superior_segmental_T4_L172(unit = "m3.s-1");
            Real v_renal_posterior_branch_T3_L174(unit = "m3.s-1");
            Real v_superior_segmental_T4_R182(unit = "m3.s-1");
            Real v_inferior_segmental_T5_R184(unit = "m3.s-1");
            Real v_renal_posterior_branch_T3_R186(unit = "m3.s-1");
            Real v_inferior_mesenteric_T5_C190(unit = "m3.s-1");
            Real v_internal_iliac_T1_R218(unit = "m3.s-1");
            Real v_profundus_T2_R224(unit = "m3.s-1");
            Real v_anterior_tibial_T3_R230(unit = "m3.s-1");
            Real v_posterior_tibial_T4_R236(unit = "m3.s-1");
            Real v_internal_iliac_T1_L196(unit = "m3.s-1");
            Real v_profundus_T2_L202(unit = "m3.s-1");
            Real v_anterior_tibial_T3_L208(unit = "m3.s-1");
            Real v_posterior_tibial_T4_L214(unit = "m3.s-1");
            Real v_posterior_interosseous_T3_R40(unit = "m3.s-1");
            Real v_ulnar_T2_R42(unit = "m3.s-1");
            Real v_radial_T1_R44(unit = "m3.s-1");
            Real v_posterior_interosseous_T3_L88(unit = "m3.s-1");
            Real v_ulnar_T2_L90(unit = "m3.s-1");
            Real v_radial_T1_L92(unit = "m3.s-1");
            Real v_external_carotid_T2_R26(unit = "m3.s-1");
            Real v_external_carotid_T2_L62(unit = "m3.s-1");
            Real v_internal_carotid_R8_C(unit = "m3.s-1");
            Real v_internal_carotid_L50_C(unit = "m3.s-1");
            Real v_vertebral_R272(unit = "m3.s-1");
            Real v_vertebral_L2(unit = "m3.s-1");
            ADAN_main.Components.Interfaces.Pq_terminator_v
              pq_terminator_v_superior(v=-v_sup_venacava)
              annotation (Placement(transformation(extent={{100,0},{120,20}})));
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_a
              annotation (Placement(transformation(extent={{-270,40},{-250,60}}),
                  iconTransformation(extent={{-110,-10},{-90,10}})));
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b port_b_superior
              annotation (Placement(transformation(extent={{124,0},{144,20}}),
                  iconTransformation(extent={{90,90},{110,110}})));
            ADAN_main.Components.Interfaces.Pq_terminator_v
              pq_terminator_v_inferior(v=-v_inf_venacava) annotation (Placement(
                  transformation(extent={{100,-24},{120,-4}})));
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b port_b_inferior
              annotation (Placement(transformation(extent={{124,-24},{144,-4}}),
                  iconTransformation(extent={{90,-110},{110,-90}})));
            Parameters_cellml.TerminalsParameters terminalsParameters
              annotation (Placement(transformation(extent={{-100,-68},{-80,-48}})));
            Physiolibrary.Types.RealIO.PressureInput resistance_modifier annotation (Placement(transformation(extent={{-68,
                      -120},{-28,-80}}),
                                   iconTransformation(extent={{-68,-120},{-28,-80}})));
          equation
          //   if not resistance_modifier_on then
          //     rtam = 1;
          //   end if;

            v_posterior_intercostal_T1_R98 = posterior_intercostal_T1_R98.v_T;
            v_posterior_intercostal_T1_L102 = posterior_intercostal_T1_L102.v_T;
            v_posterior_intercostal_T2_R106 = posterior_intercostal_T2_R106.v_T;
            v_posterior_intercostal_T2_L110 = posterior_intercostal_T2_L110.v_T;
            v_left_gastric_T3_C120 = left_gastric_T3_C120.v_T;
            v_dorsal_pancreatic_T1_C124 = dorsal_pancreatic_T1_C124.v_T;
            v_splenic_T2_C126 = splenic_T2_C126.v_T;
            v_hepatic_artery_proper_left_branch_C132 = hepatic_artery_proper_left_branch_C132.v_T;
            v_hepatic_artery_proper_right_branch_C134 = hepatic_artery_proper_right_branch_C134.v_T;
            v_middle_colic_T8_C140 = middle_colic_T8_C140.v_T;
            v_jejunal_3_T10_C144 = jejunal_3_T10_C144.v_T;
            v_jejunal_6_T11_C148 = jejunal_6_T11_C148.v_T;
            v_ileocolic_T9_C152 = ileocolic_T9_C152.v_T;
            v_ileal_4_T12_C156 = ileal_4_T12_C156.v_T;
            v_ileal_6_T13_C160 = ileal_6_T13_C160.v_T;
            v_superior_mesenteric_T4_C162 = superior_mesenteric_T4_C162.v_T;
            v_inferior_segmental_T5_L170 = inferior_segmental_T5_L170.v_T;
            v_superior_segmental_T4_L172 = superior_segmental_T4_L172.v_T;
            v_renal_posterior_branch_T3_L174 = renal_posterior_branch_T3_L174.v_T;
            v_superior_segmental_T4_R182 = superior_segmental_T4_R182.v_T;
            v_inferior_segmental_T5_R184 = inferior_segmental_T5_R184.v_T;
            v_renal_posterior_branch_T3_R186 = renal_posterior_branch_T3_R186.v_T;
            v_inferior_mesenteric_T5_C190 = inferior_mesenteric_T5_C190.v_T;
            v_internal_iliac_T1_R218 = internal_iliac_T1_R218.v_T;
            v_profundus_T2_R224 = profundus_T2_R224.v_T;
            v_anterior_tibial_T3_R230 = anterior_tibial_T3_R230.v_T;
            v_posterior_tibial_T4_R236 = posterior_tibial_T4_R236.v_T;
            v_internal_iliac_T1_L196 = internal_iliac_T1_L196.v_T;
            v_profundus_T2_L202 = profundus_T2_L202.v_T;
            v_anterior_tibial_T3_L208 = anterior_tibial_T3_L208.v_T;
            v_posterior_tibial_T4_L214 = posterior_tibial_T4_L214.v_T;
            v_posterior_interosseous_T3_R40 = posterior_interosseous_T3_R40.v_T;
            v_ulnar_T2_R42 = ulnar_T2_R42.v_T;
            v_radial_T1_R44 = radial_T1_R44.v_T;
            v_posterior_interosseous_T3_L88 = posterior_interosseous_T3_L88.v_T;
            v_ulnar_T2_L90 = ulnar_T2_L90.v_T;
            v_radial_T1_L92 = radial_T1_L92.v_T;
            v_external_carotid_T2_R26 = external_carotid_T2_R26.v_T;
            v_external_carotid_T2_L62 = external_carotid_T2_L62.v_T;
            v_internal_carotid_R8_C = internal_carotid_R8_C.v_T;
            v_internal_carotid_L50_C = internal_carotid_L50_C.v_T;
            v_vertebral_R272 = vertebral_R272.v_T;
            v_vertebral_L2 = vertebral_L2.v_T;
            connect(brachiocephalic_trunk_C4.port_a,aortic_arch_C2.port_b) annotation (Line(points={{-98,
                    129.5},{-121,49.5}},                                                                                           thickness=1));
            connect(aortic_arch_C46.port_a,aortic_arch_C2.port_b) annotation (Line(points={{-105,
                    49.5},{-121,49.5}},                                                                                   thickness=1));
            connect(common_carotid_R6_A.port_a,brachiocephalic_trunk_C4.port_b) annotation (Line(points={{-73,
                    135.5},{-78,129.5}},                                                                                                thickness=1));
            connect(subclavian_R28.port_a,brachiocephalic_trunk_C4.port_b) annotation (Line(points={{-75,
                    121.5},{-78,129.5}},                                                                                           thickness=1));
            connect(aortic_arch_C64.port_a,aortic_arch_C46.port_b) annotation (Line(points={{-78,
                    49.5},{-85,49.5}},                                                                                     thickness=1));
            connect(common_carotid_L48_A.port_a,aortic_arch_C46.port_b) annotation (Line(points={{-72,
                    95.5},{-85,49.5}},                                                                                          thickness=1));
            connect(aortic_arch_C94.port_a,aortic_arch_C64.port_b) annotation (Line(points={{-49,
                    49.5},{-58,49.5}},                                                                                     thickness=1));
            connect(subclavian_L66.port_a,aortic_arch_C64.port_b) annotation (Line(points={{-50,
                    75.5},{-58,49.5}},                                                                                    thickness=1));
            connect(thoracic_aorta_C100.port_a,thoracic_aorta_C96.port_b) annotation (Line(points={{3,49.5},
                    {-6,49.5}},                                                                                                   thickness=1));
            connect(posterior_intercostal_T1_R98.port_a,thoracic_aorta_C96.port_b) annotation (Line(points={{3,39.5},
                    {-6,49.5}},                                                                                                            thickness=1));
            connect(thoracic_aorta_C104.port_a,thoracic_aorta_C100.port_b) annotation (Line(points={{28,49.5},
                    {23,49.5}},                                                                                                    thickness=1));
            connect(posterior_intercostal_T1_L102.port_a,thoracic_aorta_C100.port_b) annotation (Line(points={{28,39.5},
                    {23,49.5}},                                                                                                              thickness=1));
            connect(thoracic_aorta_C108.port_a,thoracic_aorta_C104.port_b) annotation (Line(points={{53,49.5},
                    {48,49.5}},                                                                                                    thickness=1));
            connect(posterior_intercostal_T2_R106.port_a,thoracic_aorta_C104.port_b) annotation (Line(points={{51,39.5},
                    {48,49.5}},                                                                                                              thickness=1));
            connect(thoracic_aorta_C112.port_a,thoracic_aorta_C108.port_b) annotation (Line(points={{78,49.5},
                    {73,49.5}},                                                                                                    thickness=1));
            connect(posterior_intercostal_T2_L110.port_a,thoracic_aorta_C108.port_b) annotation (Line(points={{78,39.5},
                    {73,49.5}},                                                                                                              thickness=1));
            connect(abdominal_aorta_C136.port_a,abdominal_aorta_C114.port_b) annotation (Line(points={{-74,
                    -40.5},{-79,-40.5}},                                                                                             thickness=1));
            connect(celiac_trunk_C116.port_a,abdominal_aorta_C114.port_b) annotation (Line(points={{-71,
                    -0.5},{-79,-40.5}},                                                                                           thickness=1));
            connect(abdominal_aorta_C164.port_a,abdominal_aorta_C136.port_b) annotation (Line(points={{-47,
                    -40.5},{-54,-40.5}},                                                                                             thickness=1));
            connect(superior_mesenteric_T4_C138.port_a,abdominal_aorta_C136.port_b) annotation (Line(points={{-45,
                    -88.5},{-54,-40.5}},                                                                                                    thickness=1));
            connect(abdominal_aorta_C176.port_a,abdominal_aorta_C164.port_b) annotation (Line(points={{-2,
                    -40.5},{-27,-40.5}},                                                                                             thickness=1));
            connect(renal_L166.port_a,abdominal_aorta_C164.port_b) annotation (Line(points={{-2,
                    -64.5},{-14,-64.5},{-14,-40.5},{-27,-40.5}},                                                           thickness=1));
            connect(abdominal_aorta_C188.port_a,abdominal_aorta_C176.port_b) annotation (Line(points={{23,
                    -40.5},{18,-40.5}},                                                                                              thickness=1));
            connect(renal_R178.port_a,abdominal_aorta_C176.port_b) annotation (Line(points={{25,
                    -22.5},{18,-40.5}},                                                                                    thickness=1));
            connect(abdominal_aorta_C192.port_a,abdominal_aorta_C188.port_b) annotation (Line(points={{48,
                    -40.5},{43,-40.5}},                                                                                              thickness=1));
            connect(inferior_mesenteric_T5_C190.port_a,abdominal_aorta_C188.port_b) annotation (Line(points={{48,
                    -54.5},{43,-40.5}},                                                                                                     thickness=1));
            connect(common_iliac_R216.port_a,abdominal_aorta_C192.port_b) annotation (Line(points={{75,
                    -40.5},{68,-40.5}},                                                                                           thickness=1));
            connect(common_iliac_L194.port_a,abdominal_aorta_C192.port_b) annotation (Line(points={{74,
                    -54.5},{68,-40.5}},                                                                                           thickness=1));
            connect(internal_iliac_T1_R218.port_a,common_iliac_R216.port_b) annotation (Line(points={{98,
                    -30.5},{96,-40.5},{95,-40.5}},                                                                                  thickness=1));
            connect(external_iliac_R220.port_a,common_iliac_R216.port_b) annotation (Line(points={{99,
                    -40.5},{95,-40.5}},                                                                                          thickness=1));
            connect(profundus_T2_R224.port_a,femoral_R222.port_b) annotation (Line(points={{149,
                    -30.5},{144,-40.5}},                                                                                  thickness=1));
            connect(femoral_R226.port_a,femoral_R222.port_b) annotation (Line(points={{150,
                    -40.5},{144,-40.5}},                                                                             thickness=1));
            connect(anterior_tibial_T3_R230.port_a,popliteal_R228.port_b) annotation (Line(points={{200,
                    -30.5},{195,-40.5}},                                                                                          thickness=1));
            connect(popliteal_R232.port_a,popliteal_R228.port_b) annotation (Line(points={{199,
                    -40.5},{195,-40.5}},                                                                                 thickness=1));
            connect(internal_iliac_T1_L196.port_a,common_iliac_L194.port_b) annotation (Line(points={{99,
                    -62.5},{94,-54.5}},                                                                                             thickness=1));
            connect(external_iliac_L198.port_a,common_iliac_L194.port_b) annotation (Line(points={{100,
                    -54.5},{94,-54.5}},                                                                                          thickness=1));
            connect(profundus_T2_L202.port_a,femoral_L200.port_b) annotation (Line(points={{150,
                    -62.5},{145,-54.5}},                                                                                  thickness=1));
            connect(femoral_L204.port_a,femoral_L200.port_b) annotation (Line(points={{149,
                    -54.5},{145,-54.5}},                                                                             thickness=1));
            connect(anterior_tibial_T3_L208.port_a,popliteal_L206.port_b) annotation (Line(points={{199,
                    -62.5},{194,-54.5}},                                                                                          thickness=1));
            connect(popliteal_L210.port_a,popliteal_L206.port_b) annotation (Line(points={{200,
                    -54.5},{194,-54.5}},                                                                                 thickness=1));
            connect(subclavian_R30.port_a,subclavian_R28.port_b) annotation (Line(points={{-50,
                    121.5},{-55,121.5}},                                                                                 thickness=1));
            connect(vertebral_R272.port_a,subclavian_R28.port_b) annotation (Line(points={{-49,
                    113.5},{-55,121.5}},                                                                                 thickness=1));
            connect(ulnar_T2_R36.port_a,brachial_R34.port_b) annotation (Line(points={{25,
                    121.5},{20,121.5}},                                                                              thickness=1));
            connect(radial_T1_R44.port_a,brachial_R34.port_b) annotation (Line(points={{25,
                    111.5},{20,121.5}},                                                                               thickness=1));
            connect(common_interosseous_R38.port_a,ulnar_T2_R36.port_b) annotation (Line(points={{50,
                    121.5},{45,121.5}},                                                                                         thickness=1));
            connect(ulnar_T2_R42.port_a,ulnar_T2_R36.port_b) annotation (Line(points={{50,
                    111.5},{45,121.5}},                                                                              thickness=1));
            connect(subclavian_L78.port_a,subclavian_L66.port_b) annotation (Line(points={{-25,
                    75.5},{-26,75.5},{-26,76},{-30,76},{-30,75.5}},                                                      thickness=1));
            connect(vertebral_L2.port_a,subclavian_L66.port_b) annotation (Line(points={{-26,
                    65.5},{-30,75.5}},                                                                                 thickness=1));
            connect(ulnar_T2_L84.port_a,brachial_L82.port_b) annotation (Line(points={{50,75.5},
                    {45,75.5}},                                                                                      thickness=1));
            connect(radial_T1_L92.port_a,brachial_L82.port_b) annotation (Line(points={{50,65.5},
                    {45,75.5}},                                                                                       thickness=1));
            connect(common_interosseous_L86.port_a,ulnar_T2_L84.port_b) annotation (Line(points={{75,75.5},
                    {70,75.5}},                                                                                                 thickness=1));
            connect(ulnar_T2_L90.port_a,ulnar_T2_L84.port_b) annotation (Line(points={{75,65.5},
                    {70,75.5}},                                                                                      thickness=1));
            connect(internal_carotid_R8_A.port_a,common_carotid_R6_C.port_b) annotation (Line(points={{2,135.5},
                    {-3,135.5}},                                                                                                     thickness=1));
            connect(external_carotid_T2_R26.port_a,common_carotid_R6_C.port_b) annotation (Line(points={{3,147.5},
                    {-3,135.5}},                                                                                                       thickness=1));
            connect(internal_carotid_L50_A.port_a,common_carotid_L48_D.port_b) annotation (Line(points={{28,95.5},
                    {23,95.5}},                                                                                                        thickness=1));
            connect(external_carotid_T2_L62.port_a,common_carotid_L48_D.port_b) annotation (Line(points={{27,87.5},
                    {27,88},{23,88},{23,95.5}},                                                                                         thickness=1));
            connect(splenic_T2_C118.port_a,celiac_trunk_C116.port_b) annotation (Line(points={{-46,
                    -0.5},{-51,-0.5}},                                                                                       thickness=1));
            connect(left_gastric_T3_C120.port_a,celiac_trunk_C116.port_b) annotation (Line(points={{-45,7.5},
                    {-51,-0.5}},                                                                                                  thickness=1));
            connect(splenic_T2_C122.port_a,splenic_T2_C118.port_b) annotation (Line(points={{-18,
                    -0.5},{-26,-0.5}},                                                                                     thickness=1));
            connect(dorsal_pancreatic_T1_C124.port_a,splenic_T2_C118.port_b) annotation (Line(points={{-17,7.5},
                    {-26,-0.5}},                                                                                                     thickness=1));
            connect(splenic_T2_C126.port_a,splenic_T2_C122.port_b) annotation (Line(points={{8,7.5},
                    {2,-0.5}},                                                                                             thickness=1));
            connect(common_hepatic_C128.port_a,splenic_T2_C122.port_b) annotation (Line(points={{9,-0.5},
                    {2,-0.5}},                                                                                                 thickness=1));
            connect(hepatic_artery_proper_left_branch_C132.port_a,hepatic_artery_proper_C130.port_b) annotation (Line(points={{55,-0.5},
                    {52,-0.5}},                                                                                                                              thickness=1));
            connect(hepatic_artery_proper_right_branch_C134.port_a,hepatic_artery_proper_C130.port_b) annotation (Line(points={{56,7.5},
                    {52,-0.5}},                                                                                                                               thickness=1));
            connect(middle_colic_T8_C140.port_a,superior_mesenteric_T4_C138.port_b) annotation (Line(points={{-18,
                    -96.5},{-25,-88.5}},                                                                                                    thickness=1));
            connect(superior_mesenteric_T4_C142.port_a,superior_mesenteric_T4_C138.port_b) annotation (Line(points={{-19,
                    -88.5},{-25,-88.5}},                                                                                                           thickness=1));
            connect(jejunal_3_T10_C144.port_a,superior_mesenteric_T4_C142.port_b) annotation (Line(points={{6,-96.5},
                    {1,-88.5}},                                                                                                           thickness=1));
            connect(superior_mesenteric_T4_C146.port_a,superior_mesenteric_T4_C142.port_b) annotation (Line(points={{5,-88.5},
                    {1,-88.5}},                                                                                                                    thickness=1));
            connect(jejunal_6_T11_C148.port_a,superior_mesenteric_T4_C146.port_b) annotation (Line(points={{32,
                    -96.5},{25,-88.5}},                                                                                                   thickness=1));
            connect(superior_mesenteric_T4_C150.port_a,superior_mesenteric_T4_C146.port_b) annotation (Line(points={{31,
                    -88.5},{25,-88.5}},                                                                                                            thickness=1));
            connect(ileocolic_T9_C152.port_a,superior_mesenteric_T4_C150.port_b) annotation (Line(points={{58,
                    -96.5},{51,-88.5}},                                                                                                  thickness=1));
            connect(superior_mesenteric_T4_C154.port_a,superior_mesenteric_T4_C150.port_b) annotation (Line(points={{57,
                    -88.5},{51,-88.5}},                                                                                                            thickness=1));
            connect(ileal_4_T12_C156.port_a,superior_mesenteric_T4_C154.port_b) annotation (Line(points={{84,
                    -96.5},{77,-88.5}},                                                                                                 thickness=1));
            connect(superior_mesenteric_T4_C158.port_a,superior_mesenteric_T4_C154.port_b) annotation (Line(points={{83,
                    -88.5},{77,-88.5}},                                                                                                            thickness=1));
            connect(ileal_6_T13_C160.port_a,superior_mesenteric_T4_C158.port_b) annotation (Line(points={{108,
                    -96.5},{103,-88.5}},                                                                                                thickness=1));
            connect(superior_mesenteric_T4_C162.port_a,superior_mesenteric_T4_C158.port_b) annotation (Line(points={{107,
                    -88.5},{103,-88.5}},                                                                                                           thickness=1));
            connect(renal_anterior_branch_L168.port_a,renal_L166.port_b) annotation (Line(points={{23,
                    -64.5},{18,-64.5}},                                                                                          thickness=1));
            connect(renal_posterior_branch_T3_L174.port_a,renal_L166.port_b) annotation (Line(points={{24,
                    -74.5},{18,-64.5}},                                                                                              thickness=1));
            connect(inferior_segmental_T5_L170.port_a,renal_anterior_branch_L168.port_b) annotation (Line(points={{48,
                    -64.5},{43,-64.5}},                                                                                                          thickness=1));
            connect(superior_segmental_T4_L172.port_a,renal_anterior_branch_L168.port_b) annotation (Line(points={{47,
                    -74.5},{43,-64.5}},                                                                                                          thickness=1));
            connect(renal_anterior_branch_R180.port_a,renal_R178.port_b) annotation (Line(points={{50,
                    -22.5},{45,-22.5}},                                                                                          thickness=1));
            connect(renal_posterior_branch_T3_R186.port_a,renal_R178.port_b) annotation (Line(points={{49,
                    -14.5},{45,-22.5}},                                                                                              thickness=1));
            connect(superior_segmental_T4_R182.port_a,renal_anterior_branch_R180.port_b) annotation (Line(points={{75,
                    -22.5},{70,-22.5}},                                                                                                          thickness=1));
            connect(inferior_segmental_T5_R184.port_a,renal_anterior_branch_R180.port_b) annotation (Line(points={{74,
                    -14.5},{70,-22.5}},                                                                                                          thickness=1));
            connect(ascending_aorta_B.port_a,ascending_aorta_A.port_b) annotation (Line(points={{-216,
                    49.5},{-221,49.5}},                                                                                        thickness=1));
            connect(ascending_aorta_C.port_a,ascending_aorta_B.port_b) annotation (Line(points={{-191,
                    49.5},{-196,49.5}},                                                                                        thickness=1));
            connect(ascending_aorta_D.port_a,ascending_aorta_C.port_b) annotation (Line(points={{-166,
                    49.5},{-171,49.5}},                                                                                        thickness=1));
            connect(aortic_arch_C2.port_a,ascending_aorta_D.port_b) annotation (Line(points={{-141,
                    49.5},{-146,49.5}},                                                                                     thickness=1));
            connect(thoracic_aorta_C96.port_a,aortic_arch_C94.port_b) annotation (Line(points={{-26,
                    49.5},{-29,49.5}},                                                                                        thickness=1));
            connect(abdominal_aorta_C114.port_a,thoracic_aorta_C112.port_b) annotation (Line(points={{-99,
                    -40.5},{-99,22},{108,22},{108,49.5},{98,49.5}},                                                                 thickness=1));
            connect(hepatic_artery_proper_C130.port_a,common_hepatic_C128.port_b) annotation (Line(points={{32,-0.5},
                    {29,-0.5}},                                                                                                           thickness=1));
            connect(femoral_R222.port_a,external_iliac_R220.port_b) annotation (Line(points={{124,
                    -40.5},{119,-40.5}},                                                                                    thickness=1));
            connect(popliteal_R228.port_a,femoral_R226.port_b) annotation (Line(points={{175,
                    -40.5},{170,-40.5}},                                                                               thickness=1));
            connect(tibiofibular_trunk_R234.port_a,popliteal_R232.port_b) annotation (Line(points={{224,
                    -40.5},{219,-40.5}},                                                                                          thickness=1));
            connect(posterior_tibial_T4_R236.port_a,tibiofibular_trunk_R234.port_b) annotation (Line(points={{249,
                    -40.5},{249,-40},{244,-40},{244,-40.5}},                                                                                thickness=1));
            connect(femoral_L200.port_a,external_iliac_L198.port_b) annotation (Line(points={{125,
                    -54.5},{120,-54.5}},                                                                                    thickness=1));
            connect(popliteal_L206.port_a,femoral_L204.port_b) annotation (Line(points={{174,
                    -54.5},{169,-54.5}},                                                                               thickness=1));
            connect(tibiofibular_trunk_L212.port_a,popliteal_L210.port_b) annotation (Line(points={{225,
                    -54.5},{220,-54.5}},                                                                                          thickness=1));
            connect(posterior_tibial_T4_L214.port_a,tibiofibular_trunk_L212.port_b) annotation (Line(points={{250,
                    -54.5},{245,-54.5}},                                                                                                    thickness=1));
            connect(axillary_R32.port_a,subclavian_R30.port_b) annotation (Line(points={{-25,
                    121.5},{-30,121.5}},                                                                               thickness=1));
            connect(brachial_R34.port_a,axillary_R32.port_b) annotation (Line(points={{0,121.5},
                    {-5,121.5}},                                                                                     thickness=1));
            connect(posterior_interosseous_T3_R40.port_a,common_interosseous_R38.port_b) annotation (Line(points={{75,
                    121.5},{70,121.5}},                                                                                                          thickness=1));
            connect(axillary_L80.port_a,subclavian_L78.port_b) annotation (Line(points={{0,75.5},
                    {-5,75.5}},                                                                                        thickness=1));
            connect(brachial_L82.port_a,axillary_L80.port_b) annotation (Line(points={{25,75.5},
                    {20,75.5}},                                                                                      thickness=1));
            connect(posterior_interosseous_T3_L88.port_a,common_interosseous_L86.port_b) annotation (Line(points={{100,
                    75.5},{95,75.5}},                                                                                                            thickness=1));
            connect(common_carotid_R6_B.port_a,common_carotid_R6_A.port_b) annotation (Line(points={{-48,
                    135.5},{-53,135.5}},                                                                                           thickness=1));
            connect(common_carotid_R6_C.port_a,common_carotid_R6_B.port_b) annotation (Line(points={{-23,
                    135.5},{-28,135.5}},                                                                                           thickness=1));
            connect(internal_carotid_R8_B.port_a,internal_carotid_R8_A.port_b) annotation (Line(points={{27,
                    135.5},{22,135.5}},                                                                                                thickness=1));
            connect(internal_carotid_R8_C.port_a,internal_carotid_R8_B.port_b) annotation (Line(points={{54,
                    135.5},{47,135.5}},                                                                                                thickness=1));
            connect(common_carotid_L48_B.port_a,common_carotid_L48_A.port_b) annotation (Line(points={{-47,
                    95.5},{-52,95.5}},                                                                                               thickness=1));
            connect(common_carotid_L48_C.port_a,common_carotid_L48_B.port_b) annotation (Line(points={{-22,
                    95.5},{-27,95.5}},                                                                                               thickness=1));
            connect(common_carotid_L48_D.port_a,common_carotid_L48_C.port_b) annotation (Line(points={{3,95.5},
                    {-2,95.5}},                                                                                                      thickness=1));
            connect(internal_carotid_L50_B.port_a,internal_carotid_L50_A.port_b) annotation (Line(points={{53,95.5},
                    {48,95.5}},                                                                                                          thickness=1));
            connect(internal_carotid_L50_C.port_a,internal_carotid_L50_B.port_b) annotation (Line(points={{78,95.5},
                    {73,95.5}},                                                                                                          thickness=1));
            connect(port_a, ascending_aorta_A.port_a) annotation (Line(
                points={{-260,50},{-248,50},{-248,49.5},{-241,49.5}},
                color={0,0,0},
                thickness=1));
            connect(pq_terminator_v_superior.port_a, port_b_superior) annotation (Line(
                points={{120,10},{134,10}},
                color={0,0,0},
                thickness=1));
            connect(pq_terminator_v_inferior.port_a, port_b_inferior) annotation (Line(
                points={{120,-14},{134,-14}},
                color={0,0,0},
                thickness=1));
            annotation (Icon(graphics={Text(
                    extent={{-100,-80},{100,0}},
                    lineColor={0,0,0},
                    pattern=LinePattern.None,
                    lineThickness=0.5,
                    fillColor={244,125,35},
                    fillPattern=FillPattern.None,
                    textString="simplified terminals"),
                                          Text(
                    extent={{-100,20},{100,100}},
                    lineColor={0,0,0},
                    pattern=LinePattern.None,
                    lineThickness=0.5,
                    fillColor={244,125,35},
                    fillPattern=FillPattern.None,
                    textString="Arterial tree")}));
          end arteries_simplified_dv;

          model arteries_with_volumes
            extends arteries_simplified_dv(internal_carotid_R8_A(
                  UseDistentionOutput=true), aortic_arch_C46(
                  UseDistentionOutput=true));
          Physiolibrary.Types.Volume total_volume=
            ascending_aorta_A.volume +
            ascending_aorta_B.volume +
            ascending_aorta_C.volume +
            ascending_aorta_D.volume +
            aortic_arch_C2.volume +
            brachiocephalic_trunk_C4.volume +
            aortic_arch_C46.volume +
            aortic_arch_C64.volume +
            aortic_arch_C94.volume +
            thoracic_aorta_C96.volume +
            thoracic_aorta_C100.volume +
            thoracic_aorta_C104.volume +
            thoracic_aorta_C108.volume +
            thoracic_aorta_C112.volume +
            abdominal_aorta_C114.volume +
            abdominal_aorta_C136.volume +
            abdominal_aorta_C164.volume +
            abdominal_aorta_C176.volume +
            abdominal_aorta_C188.volume +
            abdominal_aorta_C192.volume +
            posterior_intercostal_T1_R98.volume +
            posterior_intercostal_T1_L102.volume +
            posterior_intercostal_T2_R106.volume +
            posterior_intercostal_T2_L110.volume +
            celiac_trunk_C116.volume +
            splenic_T2_C118.volume +
            left_gastric_T3_C120.volume +
            splenic_T2_C122.volume +
            dorsal_pancreatic_T1_C124.volume +
            splenic_T2_C126.volume +
            common_hepatic_C128.volume +
            hepatic_artery_proper_C130.volume +
            hepatic_artery_proper_left_branch_C132.volume +
            hepatic_artery_proper_right_branch_C134.volume +
            superior_mesenteric_T4_C138.volume +
            middle_colic_T8_C140.volume +
            superior_mesenteric_T4_C142.volume +
            jejunal_3_T10_C144.volume +
            superior_mesenteric_T4_C146.volume +
            jejunal_6_T11_C148.volume +
            superior_mesenteric_T4_C150.volume +
            ileocolic_T9_C152.volume +
            superior_mesenteric_T4_C154.volume +
            ileal_4_T12_C156.volume +
            superior_mesenteric_T4_C158.volume +
            ileal_6_T13_C160.volume +
            superior_mesenteric_T4_C162.volume +
            renal_L166.volume +
            renal_anterior_branch_L168.volume +
            inferior_segmental_T5_L170.volume +
            superior_segmental_T4_L172.volume +
            renal_posterior_branch_T3_L174.volume +
            renal_R178.volume +
            renal_anterior_branch_R180.volume +
            superior_segmental_T4_R182.volume +
            inferior_segmental_T5_R184.volume +
            renal_posterior_branch_T3_R186.volume +
            inferior_mesenteric_T5_C190.volume +
            common_iliac_R216.volume +
            internal_iliac_T1_R218.volume +
            external_iliac_R220.volume +
            femoral_R222.volume +
            profundus_T2_R224.volume +
            femoral_R226.volume +
            popliteal_R228.volume +
            anterior_tibial_T3_R230.volume +
            popliteal_R232.volume +
            tibiofibular_trunk_R234.volume +
            posterior_tibial_T4_R236.volume +
            common_iliac_L194.volume +
            internal_iliac_T1_L196.volume +
            external_iliac_L198.volume +
            femoral_L200.volume +
            profundus_T2_L202.volume +
            femoral_L204.volume +
            popliteal_L206.volume +
            anterior_tibial_T3_L208.volume +
            popliteal_L210.volume +
            tibiofibular_trunk_L212.volume +
            posterior_tibial_T4_L214.volume +
            subclavian_R28.volume +
            subclavian_R30.volume +
            axillary_R32.volume +
            brachial_R34.volume +
            ulnar_T2_R36.volume +
            common_interosseous_R38.volume +
            posterior_interosseous_T3_R40.volume +
            ulnar_T2_R42.volume +
            radial_T1_R44.volume +
            subclavian_L66.volume +
            subclavian_L78.volume +
            axillary_L80.volume +
            brachial_L82.volume +
            ulnar_T2_L84.volume +
            common_interosseous_L86.volume +
            posterior_interosseous_T3_L88.volume +
            ulnar_T2_L90.volume +
            radial_T1_L92.volume +
            common_carotid_R6_A.volume +
            common_carotid_R6_B.volume +
            common_carotid_R6_C.volume +
            internal_carotid_R8_A.volume +
            internal_carotid_R8_B.volume +
            internal_carotid_R8_C.volume +
            external_carotid_T2_R26.volume +
            common_carotid_L48_A.volume +
            common_carotid_L48_B.volume +
            common_carotid_L48_C.volume +
            common_carotid_L48_D.volume +
            internal_carotid_L50_A.volume +
            internal_carotid_L50_B.volume +
            internal_carotid_L50_C.volume +
            external_carotid_T2_L62.volume +
            vertebral_L2.volume +
            vertebral_R272.volume;
            Subsystems.Baroreflex.Baroreflex baroreflex annotation (Placement(
                  transformation(extent={{134,82},{154,62}})));
            Physiolibrary.Types.RealIO.FrequencyOutput HR annotation (Placement(
                  transformation(extent={{158,90},{178,110}}),iconTransformation(extent={{-8,-110},
                      {12,-90}})));
            Physiolibrary.Types.RealIO.FractionOutput  phi
                                                          annotation (Placement(
                  transformation(extent={{168,54},{188,74}}), iconTransformation(extent={{-6,90},
                      {14,110}})));
            Subsystems.Baroreflex.Baroreceptor baroreceptor_aortic annotation (
                Placement(transformation(extent={{102,44},{122,64}})));
            Subsystems.Baroreflex.Baroreceptor baroreceptor_carotid annotation (
               Placement(transformation(extent={{92,130},{112,150}})));
          equation
            connect(baroreflex.HR,HR)  annotation (Line(points={{154,81.8},{150,81.8},
                    {150,100},{168,100}},
                                     color={0,0,127}));
            connect(baroreflex.phi, phi) annotation (Line(points={{154.6,64},{
                    162,64},{162,64},{178,64}}, color={0,0,127}));
            connect(internal_carotid_R8_A.distentionFraction, baroreceptor_carotid.d)
              annotation (Line(points={{12,140.5},{12,140},{92,140}}, color={0,0,127}));
            connect(baroreflex.aortic_BR, baroreceptor_aortic.fbr) annotation (Line(
                  points={{134,62},{128,62},{128,54},{122,54}}, color={0,0,127}));
            connect(baroreceptor_aortic.d, aortic_arch_C46.distentionFraction)
              annotation (Line(points={{102,54},{4,54},{4,54.5},{-95,54.5}}, color={0,
                    0,127}));
            connect(baroreceptor_carotid.fbr, baroreflex.carotid_BR) annotation (Line(
                  points={{112,140},{128,140},{128,82},{134,82}}, color={0,0,127}));
          end arteries_with_volumes;

        package Parameters_cellml
          model Parameters_Pulmonary
            parameter Real C_pas(unit = "m6.J-1") = 0.00135e-6;
            parameter Real C_pat(unit = "m6.J-1") = 0.0285e-6;
            parameter Real C_par(unit = "m6.J-1") = 0.0232e-6;
            parameter Real C_pcp(unit = "m6.J-1") = 0.0684e-6;
            parameter Real C_pvn(unit = "m6.J-1") = 0.15376e-6;
            parameter Real C_pvc(unit = "m6.J-1") = 0.01125e-6;
            parameter Real R_pas(unit = "J.s.m-6") = 0.26664e+6;
            parameter Real R_pat(unit = "J.s.m-6") = 1.3332e+6;
            parameter Real R_par(unit = "J.s.m-6") = 6.666e+6;
            parameter Real R_pcp(unit = "J.s.m-6") = 33.33e+6;
            parameter Real R_psh(unit = "J.s.m-6") = 701.11e+6;
            parameter Real R_pvn(unit = "J.s.m-6") = 0.8e+6;
            parameter Real I_pas(unit = "J.s2.m-6") = 0.00693e+6;
            parameter Real I_pat(unit = "J.s2.m-6") = 0.226644e+6;
            parameter Real I_par(unit = "J.s2.m-6") = 1e-12;
            parameter Real I_pcp(unit = "J.s2.m-6") = 1e-12;
            parameter Real I_pvn(unit = "J.s2.m-6") = 1e-12;
            parameter Real I_psh(unit = "J.s2.m-6") = 1e-12;
            // parameter Real C_par(unit = "m6.J-1") = 0.0057e-6 "Duplicite variable automatically commented out during CellMl Export";
            parameter Real C_ppr(unit = "m6.J-1") = 0.04276e-6;
            parameter Real C_psh(unit = "m6.J-1") = 0.00073957e-6;
            // parameter Real C_pvn(unit = "m6.J-1") = 0.19029e-6 "Duplicite variable automatically commented out during CellMl Export";
            // parameter Real R_par(unit = "J.s.m-6") = 3.06636e+6 "Duplicite variable automatically commented out during CellMl Export";
            parameter Real R_ppr(unit = "J.s.m-6") = 12.119e+6;
            // parameter Real R_psh(unit = "J.s.m-6") = 701.11e+6 "Duplicite variable automatically commented out during CellMl Export";
            // parameter Real R_pvn(unit = "J.s.m-6") = 0.746592e+6 "Duplicite variable automatically commented out during CellMl Export";
            // parameter Real I_par(unit = "J.s2.m-6") = 23.9976e+3 "Duplicite variable automatically commented out during CellMl Export";
            parameter Real I_ppr(unit = "J.s2.m-6") = 1.0e-6;
            // parameter Real I_psh(unit = "J.s2.m-6") = 1.0e-6 "Duplicite variable automatically commented out during CellMl Export";
            // parameter Real I_pvn(unit = "J.s2.m-6") = 1.0e-6 "Duplicite variable automatically commented out during CellMl Export";
          equation

          end Parameters_Pulmonary;

          model Parameters_Heart
            parameter Real T(unit = "s") = 1.0;
            parameter Real t_ac(unit = "1") = 0.80;
            parameter Real t_ar(unit = "1") = 0.97;
            parameter Real T_ac(unit = "1") = 0.17;
            parameter Real T_ar(unit = "1") = 0.17;
            parameter Real T_vc(unit = "1") = 0.3;
            parameter Real T_vr(unit = "1") = 0.15;
            parameter Real CV_ra(unit = "UnitValve") = 34.6427e-6;
            parameter Real CV_rv(unit = "UnitValve") = 30.3124e-6;
            parameter Real CV_la(unit = "UnitValve") = 34.6427e-6;
            parameter Real CV_lv(unit = "UnitValve") = 30.3124e-6;
            parameter Real R_trv(unit = "J.s.m-6") = 0.13332e+6;
            parameter Real R_puv(unit = "J.s.m-6") = 0.19998e+6;
            parameter Real R_miv(unit = "J.s.m-6") = 0.13332e+6;
            parameter Real R_aov(unit = "J.s.m-6") = 0.19998e+6;
            parameter Real B_trv(unit = "J.s2.m-9") = 0.0013332e+12;
            parameter Real B_puv(unit = "J.s2.m-9") = 0.0019998e+12;
            parameter Real B_miv(unit = "J.s2.m-9") = 0.0013332e+12;
            parameter Real B_aov(unit = "J.s2.m-9") = 0.0019998e+12;
            parameter Real L_trv(unit = "J.s2.m-6") = 0.06666e+6;
            parameter Real L_puv(unit = "J.s2.m-6") = 0.06666e+6;
            parameter Real L_miv(unit = "J.s2.m-6") = 0.06666e+6;
            parameter Real L_aov(unit = "J.s2.m-6") = 0.06666e+6;
            parameter Real E_ra_A(unit = "J.m-6") = 7.998e+6;
            parameter Real E_ra_B(unit = "J.m-6") = 9.331e+6;
            parameter Real E_rv_A(unit = "J.m-6") = 73.315e+6;
            parameter Real E_rv_B(unit = "J.m-6") = 6.665e+6;
            parameter Real E_la_A(unit = "J.m-6") = 9.331e+6;
            parameter Real E_la_B(unit = "J.m-6") = 11.997e+6;
            parameter Real E_lv_A(unit = "J.m-6") = 366.575e+6;
            parameter Real E_lv_B(unit = "J.m-6") = 10.664e+6;
            parameter Real q_ra_0(unit = "m3") = 4.0e-6;
            parameter Real q_rv_0(unit = "m3") = 10.0e-6;
            parameter Real q_la_0(unit = "m3") = 4.0e-6;
            parameter Real q_lv_0(unit = "m3") = 5.0e-6;
          equation

          end Parameters_Heart;

          model Parameters_Coronary
            parameter Real C_corepi(unit = "m6.J-1") = 0.000555;
            parameter Real C_corint(unit = "m6.J-1") = 0.0009751;
            parameter Real C_corcap(unit = "m6.J-1") = 0.00705;
            parameter Real C_corvns(unit = "m6.J-1") = 0.018377;
            parameter Real R_corepi(unit = "J.s.m-6") = 704.0e+6;
            parameter Real R_corint(unit = "J.s.m-6") = 1350.0e+6;
            parameter Real R_corcap(unit = "J.s.m-6") = 564.0e+6;
            parameter Real R_corvns(unit = "J.s.m-6") = 197.0e+6;
            parameter Real I_corepi(unit = "J.s2.m-6") = 1e-6;
            parameter Real I_corint(unit = "J.s2.m-6") = 1e-6;
            parameter Real I_corcap(unit = "J.s2.m-6") = 1e-6;
            parameter Real I_corvns(unit = "J.s2.m-6") = 1e-6;
            parameter Real l_LM_1(unit = "m") = 12.1e-3;
            parameter Real l_LAD1_2(unit = "m") = 3.7e-3;
            parameter Real l_LAD2_3(unit = "m") = 7.4e-3;
            parameter Real l_LAD3_4(unit = "m") = 7.4e-3;
            parameter Real l_LAD4_5(unit = "m") = 3.7e-3;
            parameter Real l_LAD5_6(unit = "m") = 6.2e-3;
            parameter Real l_LAD6_7(unit = "m") = 6.2e-3;
            parameter Real l_LAD7_8(unit = "m") = 6.2e-3;
            parameter Real l_LAD8_9(unit = "m") = 15.6e-3;
            parameter Real l_LAD9_10(unit = "m") = 7.8e-3;
            parameter Real l_LAD10_11(unit = "m") = 12.8e-3;
            parameter Real l_LAD11_12(unit = "m") = 25.6e-3;
            parameter Real l_LAD12_13(unit = "m") = 22.9e-3;
            parameter Real l_LAD13_14(unit = "m") = 15.0e-3;
            parameter Real l_LAD14_15(unit = "m") = 7.4e-3;
            parameter Real l_LAD15_16(unit = "m") = 3.7e-3;
            parameter Real l_S1a_17(unit = "m") = 7.5e-3;
            parameter Real l_S1b_18(unit = "m") = 14.8e-3;
            parameter Real l_S1c_19(unit = "m") = 11.2e-3;
            parameter Real l_S2a_20(unit = "m") = 6.8e-3;
            parameter Real l_S2b_21(unit = "m") = 10.5e-3;
            parameter Real l_S3a_22(unit = "m") = 6.0e-3;
            parameter Real l_S3b_23(unit = "m") = 11.3e-3;
            parameter Real l_D1a_24(unit = "m") = 10.5e-3;
            parameter Real l_D1b_25(unit = "m") = 21.9e-3;
            parameter Real l_D1c_26(unit = "m") = 16.2e-3;
            parameter Real l_D1d_27(unit = "m") = 16.2e-3;
            parameter Real l_D2a_28(unit = "m") = 10.7e-3;
            parameter Real l_D2b_29(unit = "m") = 20.4e-3;
            parameter Real l_D2c_30(unit = "m") = 15.6e-3;
            parameter Real l_D2d_31(unit = "m") = 15.6e-3;
            parameter Real l_D3a_32(unit = "m") = 8.8e-3;
            parameter Real l_D3b_33(unit = "m") = 17.7e-3;
            parameter Real l_D3c_34(unit = "m") = 13.3e-3;
            parameter Real l_D3d_35(unit = "m") = 13.3e-3;
            parameter Real r_LM_1(unit = "m") = 2.25e-3;
            parameter Real r_LAD1_2(unit = "m") = 1.875e-3;
            parameter Real r_LAD2_3(unit = "m") = 1.85e-3;
            parameter Real r_LAD3_4(unit = "m") = 1.8e-3;
            parameter Real r_LAD4_5(unit = "m") = 1.725e-3;
            parameter Real r_LAD5_6(unit = "m") = 1.552e-3;
            parameter Real r_LAD6_7(unit = "m") = 1.493e-3;
            parameter Real r_LAD7_8(unit = "m") = 1.3351e-3;
            parameter Real r_LAD8_9(unit = "m") = 1.29e-3;
            parameter Real r_LAD9_10(unit = "m") = 1.14e-3;
            parameter Real r_LAD10_11(unit = "m") = 1.075e-3;
            parameter Real r_LAD11_12(unit = "m") = 1.0e-3;
            parameter Real r_LAD12_13(unit = "m") = 0.85e-3;
            parameter Real r_LAD13_14(unit = "m") = 0.7e-3;
            parameter Real r_LAD14_15(unit = "m") = 0.55e-3;
            parameter Real r_LAD15_16(unit = "m") = 0.45e-3;
            parameter Real r_S1a_17(unit = "m") = 1.055e-3;
            parameter Real r_S1b_18(unit = "m") = 0.65e-3;
            parameter Real r_S1c_19(unit = "m") = 0.5e-3;
            parameter Real r_S2a_20(unit = "m") = 0.55e-3;
            parameter Real r_S2b_21(unit = "m") = 0.465e-3;
            parameter Real r_S3a_22(unit = "m") = 0.55e-3;
            parameter Real r_S3b_23(unit = "m") = 0.465e-3;
            parameter Real r_D1a_24(unit = "m") = 1.05e-3;
            parameter Real r_D1b_25(unit = "m") = 0.95e-3;
            parameter Real r_D1c_26(unit = "m") = 0.75e-3;
            parameter Real r_D1d_27(unit = "m") = 0.6e-3;
            parameter Real r_D2a_28(unit = "m") = 0.95e-3;
            parameter Real r_D2b_29(unit = "m") = 0.85e-3;
            parameter Real r_D2c_30(unit = "m") = 0.7e-3;
            parameter Real r_D2d_31(unit = "m") = 0.55e-3;
            parameter Real r_D3a_32(unit = "m") = 0.85e-3;
            parameter Real r_D3b_33(unit = "m") = 0.8e-3;
            parameter Real r_D3c_34(unit = "m") = 0.65e-3;
            parameter Real r_D3d_35(unit = "m") = 0.51e-3;
            parameter Real E_LM_1(unit = "Pa") = 0.62e+6;
            parameter Real E_LAD1_2(unit = "Pa") = 0.64e+6;
            parameter Real E_LAD2_3(unit = "Pa") = 0.642e+6;
            parameter Real E_LAD3_4(unit = "Pa") = 0.648e+6;
            parameter Real E_LAD4_5(unit = "Pa") = 0.659e+6;
            parameter Real E_LAD5_6(unit = "Pa") = 0.693e+6;
            parameter Real E_LAD6_7(unit = "Pa") = 0.708e+6;
            parameter Real E_LAD7_8(unit = "Pa") = 0.758e+6;
            parameter Real E_LAD8_9(unit = "Pa") = 0.776e+6;
            parameter Real E_LAD9_10(unit = "Pa") = 0.846e+6;
            parameter Real E_LAD10_11(unit = "Pa") = 0.884e+6;
            parameter Real E_LAD11_12(unit = "Pa") = 0.932e+6;
            parameter Real E_LAD12_13(unit = "Pa") = 1.05e+6;
            parameter Real E_LAD13_14(unit = "Pa") = 1.2e+6;
            parameter Real E_LAD14_15(unit = "Pa") = 1.4e+6;
            parameter Real E_LAD15_16(unit = "Pa") = 1.55e+6;
            parameter Real E_S1a_17(unit = "Pa") = 0.9e+6;
            parameter Real E_S1b_18(unit = "Pa") = 1.26e+6;
            parameter Real E_S1c_19(unit = "Pa") = 1.47e+6;
            parameter Real E_S2a_20(unit = "Pa") = 1.4e+6;
            parameter Real E_S2b_21(unit = "Pa") = 1.53e+6;
            parameter Real E_S3a_22(unit = "Pa") = 1.4e+6;
            parameter Real E_S3b_23(unit = "Pa") = 1.53e+6;
            parameter Real E_D1a_24(unit = "Pa") = 0.9e+6;
            parameter Real E_D1b_25(unit = "Pa") = 0.97e+6;
            parameter Real E_D1c_26(unit = "Pa") = 1.15e+6;
            parameter Real E_D1d_27(unit = "Pa") = 1.33e+6;
            parameter Real E_D2a_28(unit = "Pa") = 0.97e+6;
            parameter Real E_D2b_29(unit = "Pa") = 1.05e+6;
            parameter Real E_D2c_30(unit = "Pa") = 1.2e+6;
            parameter Real E_D2d_31(unit = "Pa") = 1.39e+6;
            parameter Real E_D3a_32(unit = "Pa") = 1.05e+6;
            parameter Real E_D3b_33(unit = "Pa") = 1.1e+6;
            parameter Real E_D3c_34(unit = "Pa") = 1.26e+6;
            parameter Real E_D3d_35(unit = "Pa") = 1.45e+6;
          equation

          end Parameters_Coronary;

          model Parameters_Systemic
            parameter Real C_svl(unit = "m6.J-1") = 0.0037509e-6;
            parameter Real C_svn(unit = "m6.J-1") = 0.1125281e-6;
            parameter Real C_svc(unit = "m6.J-1") = 0.0375094e-6;
            parameter Real C_ivl(unit = "m6.J-1") = 0.0112528e-6;
            parameter Real C_ivn(unit = "m6.J-1") = 0.5626407e-6;
            parameter Real C_ivc(unit = "m6.J-1") = 0.1125281e-6;
            parameter Real R_svl(unit = "J.s.m-6") = 18.662e+6;
            parameter Real R_svn(unit = "J.s.m-6") = 3.999e+6;
            parameter Real R_svc(unit = "J.s.m-6") = 0.06665e+6;
            parameter Real R_ivl(unit = "J.s.m-6") = 5.332e+6;
            parameter Real R_ivn(unit = "J.s.m-6") = 1.1997e+6;
            parameter Real R_ivc(unit = "J.s.m-6") = 0.06665e+6;
            parameter Real I_svl(unit = "J.s2.m-6") = 0.1333e+6;
            parameter Real I_svn(unit = "J.s2.m-6") = 0.06665e+6;
            parameter Real I_svc(unit = "J.s2.m-6") = 0.06665e+6;
            parameter Real I_ivl(unit = "J.s2.m-6") = 0.1333e+6;
            parameter Real I_ivn(unit = "J.s2.m-6") = 0.06665e+6;
            parameter Real I_ivc(unit = "J.s2.m-6") = 0.06665e+6;
            parameter Real r_ascending_aorta_A(unit = "m") = 15.642e-03;
            parameter Real r_ascending_aorta_B(unit = "m") = 15.08e-03;
            parameter Real r_ascending_aorta_C(unit = "m") = 14.5305e-03;
            parameter Real r_ascending_aorta_D(unit = "m") = 13.914e-03;
            parameter Real r_aortic_arch_C2(unit = "m") = 13.3364e-03;
            parameter Real r_brachiocephalic_trunk_C4(unit = "m") = 6.41887e-03;
            parameter Real r_aortic_arch_C46(unit = "m") = 12.76710e-03;
            parameter Real r_aortic_arch_C64(unit = "m") = 12.42880e-03;
            parameter Real r_aortic_arch_C94(unit = "m") = 11.7401e-03;
            parameter Real r_thoracic_aorta_C96(unit = "m") = 10.4579e-03;
            parameter Real r_thoracic_aorta_C100(unit = "m") = 10.2897e-03;
            parameter Real r_thoracic_aorta_C104(unit = "m") = 10.0681e-03;
            parameter Real r_thoracic_aorta_C108(unit = "m") = 9.87279e-03;
            parameter Real r_thoracic_aorta_C112(unit = "m") = 8.47543e-03;
            parameter Real r_abdominal_aorta_C114(unit = "m") = 7.51533e-03;
            parameter Real r_abdominal_aorta_C136(unit = "m") = 7.42666e-03;
            parameter Real r_abdominal_aorta_C164(unit = "m") = 7.29199e-03;
            parameter Real r_abdominal_aorta_C176(unit = "m") = 7.18902e-03;
            parameter Real r_abdominal_aorta_C188(unit = "m") = 6.79934e-03;
            parameter Real r_abdominal_aorta_C192(unit = "m") = 6.12422e-03;
            parameter Real r_posterior_intercostal_T1_R98(unit = "m") = 1.4e-03;
            parameter Real r_posterior_intercostal_T1_L102(unit = "m") = 1.4e-03;
            parameter Real r_posterior_intercostal_T2_R106(unit = "m") = 1.55e-03;
            parameter Real r_posterior_intercostal_T2_L110(unit = "m") = 1.55e-03;
            parameter Real r_celiac_trunk_C116(unit = "m") = 3.29653e-03;
            parameter Real r_splenic_T2_C118(unit = "m") = 2.16682e-03;
            parameter Real r_left_gastric_T3_C120(unit = "m") = 1.50666e-03;
            parameter Real r_splenic_T2_C122(unit = "m") = 2.16682e-03;
            parameter Real r_dorsal_pancreatic_T1_C124(unit = "m") = 0.558491e-03;
            parameter Real r_splenic_T2_C126(unit = "m") = 2.16682e-03;
            parameter Real r_common_hepatic_C128(unit = "m") = 2.68614e-03;
            parameter Real r_hepatic_artery_proper_C130(unit = "m") = 1.77555e-03;
            parameter Real r_hepatic_artery_proper_left_branch_C132(unit = "m") = 1.1663e-03;
            parameter Real r_hepatic_artery_proper_right_branch_C134(unit = "m") = 1.42068e-03;
            parameter Real r_superior_mesenteric_T4_C138(unit = "m") = 3.72737e-03;
            parameter Real r_middle_colic_T8_C140(unit = "m") = 1.425e-03;
            parameter Real r_superior_mesenteric_T4_C142(unit = "m") = 3.40146e-03;
            parameter Real r_jejunal_3_T10_C144(unit = "m") = 1.58037e-03;
            parameter Real r_superior_mesenteric_T4_C146(unit = "m") = 3.06914e-03;
            parameter Real r_jejunal_6_T11_C148(unit = "m") = 1.58037e-03;
            parameter Real r_superior_mesenteric_T4_C150(unit = "m") = 2.85201e-03;
            parameter Real r_ileocolic_T9_C152(unit = "m") = 2.0e-03;
            parameter Real r_superior_mesenteric_T4_C154(unit = "m") = 2.69257e-03;
            parameter Real r_ileal_4_T12_C156(unit = "m") = 1.8015e-03;
            parameter Real r_superior_mesenteric_T4_C158(unit = "m") = 2.49385e-03;
            parameter Real r_ileal_6_T13_C160(unit = "m") = 1.80150e-03;
            parameter Real r_superior_mesenteric_T4_C162(unit = "m") = 2.18233e-03;
            parameter Real r_renal_L166(unit = "m") = 2.73574e-03;
            parameter Real r_renal_anterior_branch_L168(unit = "m") = 2.48193e-03;
            parameter Real r_inferior_segmental_T5_L170(unit = "m") = 1.92732e-03;
            parameter Real r_superior_segmental_T4_L172(unit = "m") = 1.92732e-03;
            parameter Real r_renal_posterior_branch_T3_L174(unit = "m") = 1.59319e-03;
            parameter Real r_renal_R178(unit = "m") = 2.96767e-03;
            parameter Real r_renal_anterior_branch_R180(unit = "m") = 2.48193e-03;
            parameter Real r_superior_segmental_T4_R182(unit = "m") = 1.92732e-03;
            parameter Real r_inferior_segmental_T5_R184(unit = "m") = 1.92732e-03;
            parameter Real r_renal_posterior_branch_T3_R186(unit = "m") = 1.59319e-03;
            parameter Real r_inferior_mesenteric_T5_C190(unit = "m") = 2.07748e-03;
            parameter Real r_common_iliac_R216(unit = "m") = 4.30633e-03;
            parameter Real r_internal_iliac_T1_R218(unit = "m") = 2.81829e-03;
            parameter Real r_external_iliac_R220(unit = "m") = 3.28821e-03;
            parameter Real r_femoral_R222(unit = "m") = 3.17347e-03;
            parameter Real r_profundus_T2_R224(unit = "m") = 2.14445e-03;
            parameter Real r_femoral_R226(unit = "m") = 2.89103e-03;
            parameter Real r_popliteal_R228(unit = "m") = 2.51554e-03;
            parameter Real r_anterior_tibial_T3_R230(unit = "m") = 1.1663e-03;
            parameter Real r_popliteal_R232(unit = "m") = 2.35852e-03;
            parameter Real r_tibiofibular_trunk_R234(unit = "m") = 2.34646e-03;
            parameter Real r_posterior_tibial_T4_R236(unit = "m") = 1.22936e-03;
            parameter Real r_common_iliac_L194(unit = "m") = 4.28142e-03;
            parameter Real r_internal_iliac_T1_L196(unit = "m") = 2.81829e-03;
            parameter Real r_external_iliac_L198(unit = "m") = 3.28821e-03;
            parameter Real r_femoral_L200(unit = "m") = 3.17347e-03;
            parameter Real r_profundus_T2_L202(unit = "m") = 2.14445e-03;
            parameter Real r_femoral_L204(unit = "m") = 2.89103e-03;
            parameter Real r_popliteal_L206(unit = "m") = 2.51554e-03;
            parameter Real r_anterior_tibial_T3_L208(unit = "m") = 1.1663e-03;
            parameter Real r_popliteal_L210(unit = "m") = 2.35852e-03;
            parameter Real r_tibiofibular_trunk_L212(unit = "m") = 2.34646e-03;
            parameter Real r_posterior_tibial_T4_L214(unit = "m") = 1.22936e-03;
            parameter Real r_subclavian_R28(unit = "m") = 4.52027e-03;
            parameter Real r_subclavian_R30(unit = "m") = 3.32268e-03;
            parameter Real r_axillary_R32(unit = "m") = 2.18463e-03;
            parameter Real r_brachial_R34(unit = "m") = 1.96732e-03;
            parameter Real r_ulnar_T2_R36(unit = "m") = 1.408e-03;
            parameter Real r_common_interosseous_R38(unit = "m") = 0.959006e-03;
            parameter Real r_posterior_interosseous_T3_R40(unit = "m") = 0.675992e-03;
            parameter Real r_ulnar_T2_R42(unit = "m") = 1.408e-03;
            parameter Real r_radial_T1_R44(unit = "m") = 1.378e-03;
            parameter Real r_subclavian_L66(unit = "m") = 3.99235e-03;
            parameter Real r_subclavian_L78(unit = "m") = 2.90824e-03;
            parameter Real r_axillary_L80(unit = "m") = 2.18463e-03;
            parameter Real r_brachial_L82(unit = "m") = 1.96732e-03;
            parameter Real r_ulnar_T2_L84(unit = "m") = 1.408e-03;
            parameter Real r_common_interosseous_L86(unit = "m") = 0.959006e-03;
            parameter Real r_posterior_interosseous_T3_L88(unit = "m") = 0.675992e-03;
            parameter Real r_ulnar_T2_L90(unit = "m") = 1.408e-03;
            parameter Real r_radial_T1_L92(unit = "m") = 1.378e-03;
            parameter Real r_common_carotid_R6_A(unit = "m") = 4.43053e-03;
            parameter Real r_common_carotid_R6_B(unit = "m") = 4.137e-03;
            parameter Real r_common_carotid_R6_C(unit = "m") = 3.64938e-03;
            parameter Real r_internal_carotid_R8_A(unit = "m") = 2.53763e-03;
            parameter Real r_internal_carotid_R8_B(unit = "m") = 2.04793e-03;
            parameter Real r_internal_carotid_R8_C(unit = "m") = 1.56726e-03;
            parameter Real r_external_carotid_T2_R26(unit = "m") = 2.26547e-03;
            parameter Real r_common_carotid_L48_A(unit = "m") = 4.36635e-03;
            parameter Real r_common_carotid_L48_B(unit = "m") = 4.12756e-03;
            parameter Real r_common_carotid_L48_C(unit = "m") = 3.92047e-03;
            parameter Real r_common_carotid_L48_D(unit = "m") = 3.57978e-03;
            parameter Real r_internal_carotid_L50_A(unit = "m") = 2.53763e-03;
            parameter Real r_internal_carotid_L50_B(unit = "m") = 2.04793e-03;
            parameter Real r_internal_carotid_L50_C(unit = "m") = 1.56726e-03;
            parameter Real r_external_carotid_T2_L62(unit = "m") = 2.26547e-03;
            parameter Real r_vertebral_L2(unit = "m") = 0.133527e-2;
            parameter Real r_vertebral_R272(unit = "m") = 0.133527e-2;
            parameter Real r_basilar_C4(unit = "m") = 0.172394e-2;
            parameter Real r_posterior_cerebral_precommunicating_part_L6(unit = "m") = 0.0816459e-2;
            parameter Real r_posterior_cerebral_precommunicating_part_R204(unit = "m") = 0.0816459e-2;
            parameter Real r_posterior_communicating_L8(unit = "m") = 0.0494463e-2;
            parameter Real r_posterior_communicating_R206(unit = "m") = 0.0494463e-2;
            parameter Real r_posterior_cerebral_postcommunicating_part_L12(unit = "m") = 0.0869072e-2;
            parameter Real r_posterior_cerebral_postcommunicating_part_R208(unit = "m") = 0.0869072e-2;
            parameter Real r_occipital_lateral_L14(unit = "m") = 0.064999e-2;
            parameter Real r_occipital_lateral_R210(unit = "m") = 0.0649994e-2;
            parameter Real r_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "m") = 0.06e-2;
            parameter Real r_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "m") = 0.06e-2;
            parameter Real r_occipital_lateral_L18(unit = "m") = 0.0649994e-2;
            parameter Real r_occipital_lateral_R214(unit = "m") = 0.0649994e-2;
            parameter Real r_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "m") = 0.028e-2;
            parameter Real r_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "m") = 0.028e-2;
            parameter Real r_occipital_lateral_L22(unit = "m") = 0.0649994e-2;
            parameter Real r_occipital_lateral_R218(unit = "m") = 0.0649994e-2;
            parameter Real r_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "m") = 0.0375006e-2;
            parameter Real r_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "m") = 0.0375006e-2;
            parameter Real r_medial_occipital_L26(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_R222(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_dorsal_branch_to_corpus_callosum_L28(unit = "m") = 0.0349979e-2;
            parameter Real r_medial_occipital_dorsal_branch_to_corpus_callosum_R224(unit = "m") = 0.0349979e-2;
            parameter Real r_pericallosal_parieto_occipital_branch_T60_L30(unit = "m") = 0.0421522e-2;
            parameter Real r_pericallosal_parieto_occipital_branch_T124_R226(unit = "m") = 0.0421522e-2;
            parameter Real r_pericallosal_L32(unit = "m") = 0.0800314e-2;
            parameter Real r_pericallosal_R228(unit = "m") = 0.0800314e-2;
            parameter Real r_pericallosal_precuneal_branch_T61_L34(unit = "m") = 0.0477132e-2;
            parameter Real r_pericallosal_precuneal_branch_T125_R230(unit = "m") = 0.0477132e-2;
            parameter Real r_pericallosal_L36(unit = "m") = 0.0800314e-2;
            parameter Real r_pericallosal_R232(unit = "m") = 0.0800314e-2;
            parameter Real r_anterior_cerebral_L38(unit = "m") = 0.0965045e-2;
            parameter Real r_anterior_cerebral_R234(unit = "m") = 0.0965045e-2;
            parameter Real r_distal_medial_striate_T44_L40(unit = "m") = 0.027251e-2;
            parameter Real r_distal_medial_striate_T109_R236(unit = "m") = 0.027251e-2;
            parameter Real r_anterior_cerebral_L42(unit = "m") = 0.0965045e-2;
            parameter Real r_anterior_cerebral_R238(unit = "m") = 0.0965045e-2;
            parameter Real r_anterior_communicating_C44(unit = "m") = 0.0656645e-2;
            parameter Real r_anterior_cerebral_L110(unit = "m") = 0.0965045e-2;
            parameter Real r_anterior_cerebral_R46(unit = "m") = 0.0965045e-2;
            parameter Real r_internal_carotid_L112(unit = "m") = 0.132843e-2;
            parameter Real r_internal_carotid_R48(unit = "m") = 0.132843e-2;
            parameter Real r_middle_cerebral_L114(unit = "m") = 0.104132e-2;
            parameter Real r_middle_cerebral_R52(unit = "m") = 0.104132e-2;
            parameter Real r_anterior_choroidal_T34_L116(unit = "m") = 0.0519606e-2;
            parameter Real r_anterior_choroidal_T98_R54(unit = "m") = 0.0519606e-2;
            parameter Real r_middle_cerebral_L118(unit = "m") = 0.104132e-2;
            parameter Real r_middle_cerebral_R56(unit = "m") = 0.104132e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_L120(unit = "m") = 0.0877201e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_R58(unit = "m") = 0.0877201e-2;
            parameter Real r_lateral_frontobasal_T45_L122(unit = "m") = 0.0385346e-2;
            parameter Real r_lateral_frontobasal_T110_R60(unit = "m") = 0.0385346e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_L124(unit = "m") = 0.0877201e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_R62(unit = "m") = 0.0877201e-2;
            parameter Real r_prefrontal_T65_L126(unit = "m") = 0.0480986e-2;
            parameter Real r_prefrontal_T130_R64(unit = "m") = 0.0480986e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_L128(unit = "m") = 0.0877201e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_R66(unit = "m") = 0.0877201e-2;
            parameter Real r_artery_of_precentral_sulcus_T38_L130(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_precentral_sulcus_T103_R68(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_central_sulcus_T36_L132(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_central_sulcus_T101_R70(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_precentral_sulcus_T38_L134(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_precentral_sulcus_T103_R72(unit = "m") = 0.0480986e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L136(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R74(unit = "m") = 0.0816459e-2;
            parameter Real r_polar_temporal_T63_L138(unit = "m") = 0.0309894e-2;
            parameter Real r_polar_temporal_T127_R76(unit = "m") = 0.0309894e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L140(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R78(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "m") = 0.0442556e-2;
            parameter Real r_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "m") = 0.0442556e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L144(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R82(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_middle_temporal_branch_T57_L146(unit = "m") = 0.046174e-2;
            parameter Real r_middle_cerebral_middle_temporal_branch_T121_R84(unit = "m") = 0.046174e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L148(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R86(unit = "m") = 0.0816459e-2;
            parameter Real r_artery_of_postcentral_sulcus_T37_L150(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_postcentral_sulcus_T102_R88(unit = "m") = 0.0480986e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L152(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R90(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_posterior_temporal_branch_T58_L154(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporal_branch_T122_R92(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L160(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R98(unit = "m") = 0.0816459e-2;
            parameter Real r_anterior_parietal_T35_L162(unit = "m") = 0.0442556e-2;
            parameter Real r_anterior_parietal_T100_R100(unit = "m") = 0.0442556e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L164(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R102(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_branch_to_angular_gyrus_T56_L166(unit = "m") = 0.0558491e-2;
            parameter Real r_middle_cerebral_branch_to_angular_gyrus_T120_R104(unit = "m") = 0.0558491e-2;
            parameter Real r_posterior_parietal_T64_L168(unit = "m") = 0.0519606e-2;
            parameter Real r_posterior_parietal_T129_R106(unit = "m") = 0.0519606e-2;
            parameter Real r_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "m") = 0.0558491e-2;
            parameter Real r_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "m") = 0.0558491e-2;
            parameter Real r_callosomarginal_L172(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_R240(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "m") = 0.0465585e-2;
            parameter Real r_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "m") = 0.0465585e-2;
            parameter Real r_callosomarginal_L176(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_R244(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "m") = 0.0521563e-2;
            parameter Real r_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "m") = 0.0521563e-2;
            parameter Real r_callosomarginal_L180(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_R248(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_cingular_branch_T40_L182(unit = "m") = 0.0475194e-2;
            parameter Real r_callosomarginal_cingular_branch_T105_R250(unit = "m") = 0.0475194e-2;
            parameter Real r_callosomarginal_L184(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_R252(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_paracentral_branch_T42_L186(unit = "m") = 0.0475194e-2;
            parameter Real r_callosomarginal_paracentral_branch_T107_R254(unit = "m") = 0.0475194e-2;
            parameter Real r_medial_occipital_L188(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_R256(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_occipitotemporal_branch_T52_L190(unit = "m") = 0.0349979e-2;
            parameter Real r_medial_occipital_occipitotemporal_branch_T80_R258(unit = "m") = 0.0349979e-2;
            parameter Real r_medial_occipital_L192(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_R260(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_parieto_occipital_branch_T54_L194(unit = "m") = 0.0500001e-2;
            parameter Real r_medial_occipital_parieto_occipital_branch_T118_R262(unit = "m") = 0.0500001e-2;
            parameter Real r_medial_occipital_parietal_branch_T53_L196(unit = "m") = 0.0295002e-2;
            parameter Real r_medial_occipital_parietal_branch_T81_R264(unit = "m") = 0.0295002e-2;
            parameter Real r_medial_occipital_parieto_occipital_branch_T54_L198(unit = "m") = 0.0500001e-2;
            parameter Real r_medial_occipital_parieto_occipital_branch_T118_R266(unit = "m") = 0.0500001e-2;
            parameter Real r_medial_occipital_L200(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_R268(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_calcarine_branch_T51_L202(unit = "m") = 0.0349979e-2;
            parameter Real r_medial_occipital_calcarine_branch_T79_R270(unit = "m") = 0.0349979e-2;
            parameter Real l_ascending_aorta_A(unit = "m") = 15.3234e-03;
            parameter Real l_ascending_aorta_B(unit = "m") = 14.796e-03;
            parameter Real l_ascending_aorta_C(unit = "m") = 14.796e-03;
            parameter Real l_ascending_aorta_D(unit = "m") = 14.796e-03;
            parameter Real l_aortic_arch_C2(unit = "m") = 14.796e-03;
            parameter Real l_brachiocephalic_trunk_C4(unit = "m") = 47.3822e-03;
            parameter Real l_aortic_arch_C46(unit = "m") = 9.60849e-03;
            parameter Real l_aortic_arch_C64(unit = "m") = 6.97955e-03;
            parameter Real l_aortic_arch_C94(unit = "m") = 43.2111e-03;
            parameter Real l_thoracic_aorta_C96(unit = "m") = 9.89803e-03;
            parameter Real l_thoracic_aorta_C100(unit = "m") = 7.88038e-03;
            parameter Real l_thoracic_aorta_C104(unit = "m") = 15.5561e-03;
            parameter Real l_thoracic_aorta_C108(unit = "m") = 5.32705e-03;
            parameter Real l_thoracic_aorta_C112(unit = "m") = 121.566e-03;
            parameter Real l_abdominal_aorta_C114(unit = "m") = 3.24767e-03;
            parameter Real l_abdominal_aorta_C136(unit = "m") = 13.9886e-03;
            parameter Real l_abdominal_aorta_C164(unit = "m") = 4.31913e-03;
            parameter Real l_abdominal_aorta_C176(unit = "m") = 11.9773e-03;
            parameter Real l_abdominal_aorta_C188(unit = "m") = 54.0907e-03;
            parameter Real l_abdominal_aorta_C192(unit = "m") = 42.231e-03;
            parameter Real l_posterior_intercostal_T1_R98(unit = "m") = 197.232e-03;
            parameter Real l_posterior_intercostal_T1_L102(unit = "m") = 178.519e-03;
            parameter Real l_posterior_intercostal_T2_R106(unit = "m") = 201.883e-03;
            parameter Real l_posterior_intercostal_T2_L110(unit = "m") = 185.547e-03;
            parameter Real l_celiac_trunk_C116(unit = "m") = 16.9374e-03;
            parameter Real l_splenic_T2_C118(unit = "m") = 3.9576e-03;
            parameter Real l_left_gastric_T3_C120(unit = "m") = 94.8344e-03;
            parameter Real l_splenic_T2_C122(unit = "m") = 2.79812e-03;
            parameter Real l_dorsal_pancreatic_T1_C124(unit = "m") = 33.4687e-03;
            parameter Real l_splenic_T2_C126(unit = "m") = 63.2749e-03;
            parameter Real l_common_hepatic_C128(unit = "m") = 69.3076e-03;
            parameter Real l_hepatic_artery_proper_C130(unit = "m") = 16.8059e-03;
            parameter Real l_hepatic_artery_proper_left_branch_C132(unit = "m") = 164.224e-03;
            parameter Real l_hepatic_artery_proper_right_branch_C134(unit = "m") = 80.0632e-03;
            parameter Real l_superior_mesenteric_T4_C138(unit = "m") = 49.5492e-03;
            parameter Real l_middle_colic_T8_C140(unit = "m") = 116.298e-03;
            parameter Real l_superior_mesenteric_T4_C142(unit = "m") = 35.1664e-03;
            parameter Real l_jejunal_3_T10_C144(unit = "m") = 47.6944e-03;
            parameter Real l_superior_mesenteric_T4_C146(unit = "m") = 32.2488e-03;
            parameter Real l_jejunal_6_T11_C148(unit = "m") = 63.8535e-03;
            parameter Real l_superior_mesenteric_T4_C150(unit = "m") = 16.7458e-03;
            parameter Real l_ileocolic_T9_C152(unit = "m") = 46.8332e-03;
            parameter Real l_superior_mesenteric_T4_C154(unit = "m") = 23.0546e-03;
            parameter Real l_ileal_4_T12_C156(unit = "m") = 45.6984e-03;
            parameter Real l_superior_mesenteric_T4_C158(unit = "m") = 20.5397e-03;
            parameter Real l_ileal_6_T13_C160(unit = "m") = 29.1584e-03;
            parameter Real l_superior_mesenteric_T4_C162(unit = "m") = 39.4879e-03;
            parameter Real l_renal_L166(unit = "m") = 22.0037e-03;
            parameter Real l_renal_anterior_branch_L168(unit = "m") = 10.8789e-03;
            parameter Real l_inferior_segmental_T5_L170(unit = "m") = 40.8761e-03;
            parameter Real l_superior_segmental_T4_L172(unit = "m") = 29.7265e-03;
            parameter Real l_renal_posterior_branch_T3_L174(unit = "m") = 22.3608e-03;
            parameter Real l_renal_R178(unit = "m") = 37.7403e-03;
            parameter Real l_renal_anterior_branch_R180(unit = "m") = 10.8792e-03;
            parameter Real l_superior_segmental_T4_R182(unit = "m") = 29.7263e-03;
            parameter Real l_inferior_segmental_T5_R184(unit = "m") = 40.8756e-03;
            parameter Real l_renal_posterior_branch_T3_R186(unit = "m") = 22.36e-03;
            parameter Real l_inferior_mesenteric_T5_C190(unit = "m") = 90.3282e-03;
            parameter Real l_common_iliac_R216(unit = "m") = 76.4393e-03;
            parameter Real l_internal_iliac_T1_R218(unit = "m") = 72.5302e-03;
            parameter Real l_external_iliac_R220(unit = "m") = 102.358e-03;
            parameter Real l_femoral_R222(unit = "m") = 31.5982e-03;
            parameter Real l_profundus_T2_R224(unit = "m") = 238.438e-03;
            parameter Real l_femoral_R226(unit = "m") = 319.297e-03;
            parameter Real l_popliteal_R228(unit = "m") = 132.06e-03;
            parameter Real l_anterior_tibial_T3_R230(unit = "m") = 386.388e-03;
            parameter Real l_popliteal_R232(unit = "m") = 8.80051e-03;
            parameter Real l_tibiofibular_trunk_R234(unit = "m") = 36.1667e-03;
            parameter Real l_posterior_tibial_T4_R236(unit = "m") = 382.987e-03;
            parameter Real l_common_iliac_L194(unit = "m") = 74.0524e-03;
            parameter Real l_internal_iliac_T1_L196(unit = "m") = 72.5301e-03;
            parameter Real l_external_iliac_L198(unit = "m") = 102.358e-03;
            parameter Real l_femoral_L200(unit = "m") = 31.5982e-03;
            parameter Real l_profundus_T2_L202(unit = "m") = 238.438e-03;
            parameter Real l_femoral_L204(unit = "m") = 319.297e-03;
            parameter Real l_popliteal_L206(unit = "m") = 132.059e-03;
            parameter Real l_anterior_tibial_T3_L208(unit = "m") = 386.389e-03;
            parameter Real l_popliteal_L210(unit = "m") = 8.80046e-03;
            parameter Real l_tibiofibular_trunk_L212(unit = "m") = 36.1676e-03;
            parameter Real l_posterior_tibial_T4_L214(unit = "m") = 382.987e-03;
            parameter Real l_subclavian_R28(unit = "m") = 15.7469e-03;
            parameter Real l_subclavian_R30(unit = "m") = 41.1419e-03;
            parameter Real l_axillary_R32(unit = "m") = 120.021e-03;
            parameter Real l_brachial_R34(unit = "m") = 223.119e-03;
            parameter Real l_ulnar_T2_R36(unit = "m") = 29.7599e-03;
            parameter Real l_common_interosseous_R38(unit = "m") = 16.2682e-03;
            parameter Real l_posterior_interosseous_T3_R40(unit = "m") = 231.694e-03;
            parameter Real l_ulnar_T2_R42(unit = "m") = 239.276e-03;
            parameter Real l_radial_T1_R44(unit = "m") = 302.156e-03;
            parameter Real l_subclavian_L66(unit = "m") = 49.4669e-03;
            parameter Real l_subclavian_L78(unit = "m") = 41.1396e-03;
            parameter Real l_axillary_L80(unit = "m") = 120.021e-03;
            parameter Real l_brachial_L82(unit = "m") = 223.119e-03;
            parameter Real l_ulnar_T2_L84(unit = "m") = 29.7594e-03;
            parameter Real l_common_interosseous_L86(unit = "m") = 16.2681e-03;
            parameter Real l_posterior_interosseous_T3_L88(unit = "m") = 231.695e-03;
            parameter Real l_ulnar_T2_L90(unit = "m") = 239.277e-03;
            parameter Real l_radial_T1_L92(unit = "m") = 302.155e-03;
            parameter Real l_common_carotid_R6_A(unit = "m") = 27.0844e-03;
            parameter Real l_common_carotid_R6_B(unit = "m") = 27.0844e-03;
            parameter Real l_common_carotid_R6_C(unit = "m") = 27.0844e-03;
            parameter Real l_internal_carotid_R8_A(unit = "m") = 45.036e-03;
            parameter Real l_internal_carotid_R8_B(unit = "m") = 45.036e-03;
            parameter Real l_internal_carotid_R8_C(unit = "m") = 45.036e-03;
            parameter Real l_external_carotid_T2_R26(unit = "m") = 61.0125e-03;
            parameter Real l_common_carotid_L48_A(unit = "m") = 30.339e-03;
            parameter Real l_common_carotid_L48_B(unit = "m") = 30.339e-03;
            parameter Real l_common_carotid_L48_C(unit = "m") = 30.339e-03;
            parameter Real l_common_carotid_L48_D(unit = "m") = 30.339e-03;
            parameter Real l_internal_carotid_L50_A(unit = "m") = 45.036e-03;
            parameter Real l_internal_carotid_L50_B(unit = "m") = 45.036e-03;
            parameter Real l_internal_carotid_L50_C(unit = "m") = 45.036e-03;
            parameter Real l_external_carotid_T2_L62(unit = "m") = 61.0127e-03;
            parameter Real l_vertebral_L2(unit = "m") = 20.9765e-2;
            parameter Real l_vertebral_R272(unit = "m") = 21.0146e-2;
            parameter Real l_basilar_C4(unit = "m") = 2.26443e-2;
            parameter Real l_posterior_cerebral_precommunicating_part_L6(unit = "m") = 0.697753e-2;
            parameter Real l_posterior_cerebral_precommunicating_part_R204(unit = "m") = 0.77827e-2;
            parameter Real l_posterior_communicating_L8(unit = "m") = 1.65974e-2;
            parameter Real l_posterior_communicating_R206(unit = "m") = 1.6597e-2;
            parameter Real l_posterior_cerebral_postcommunicating_part_L12(unit = "m") = 1.28091e-2;
            parameter Real l_posterior_cerebral_postcommunicating_part_R208(unit = "m") = 1.28083e-2;
            parameter Real l_occipital_lateral_L14(unit = "m") = 0.472985e-2;
            parameter Real l_occipital_lateral_R210(unit = "m") = 0.472973e-2;
            parameter Real l_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "m") = 2.61986e-2;
            parameter Real l_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "m") = 2.61979e-2;
            parameter Real l_occipital_lateral_L18(unit = "m") = 1.11052e-2;
            parameter Real l_occipital_lateral_R214(unit = "m") = 1.11056e-2;
            parameter Real l_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "m") = 2.1112e-2;
            parameter Real l_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "m") = 2.1112e-2;
            parameter Real l_occipital_lateral_L22(unit = "m") = 1.2455e-2;
            parameter Real l_occipital_lateral_R218(unit = "m") = 1.2455e-2;
            parameter Real l_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "m") = 2.05518e-2;
            parameter Real l_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "m") = 2.05518e-2;
            parameter Real l_medial_occipital_L26(unit = "m") = 3.21752e-2;
            parameter Real l_medial_occipital_R222(unit = "m") = 3.21754e-2;
            parameter Real l_medial_occipital_dorsal_branch_to_corpus_callosum_L28(unit = "m") = 2.51851e-2;
            parameter Real l_medial_occipital_dorsal_branch_to_corpus_callosum_R224(unit = "m") = 2.51847e-2;
            parameter Real l_pericallosal_parieto_occipital_branch_T60_L30(unit = "m") = 4.1888e-2;
            parameter Real l_pericallosal_parieto_occipital_branch_T124_R226(unit = "m") = 4.18881e-2;
            parameter Real l_pericallosal_L32(unit = "m") = 1.5668e-2;
            parameter Real l_pericallosal_R228(unit = "m") = 1.5668e-2;
            parameter Real l_pericallosal_precuneal_branch_T61_L34(unit = "m") = 5.42988e-2;
            parameter Real l_pericallosal_precuneal_branch_T125_R230(unit = "m") = 5.42989e-2;
            parameter Real l_pericallosal_L36(unit = "m") = 5.57509e-2;
            parameter Real l_pericallosal_R232(unit = "m") = 5.57509e-2;
            parameter Real l_anterior_cerebral_L38(unit = "m") = 2.809e-2;
            parameter Real l_anterior_cerebral_R234(unit = "m") = 2.80898e-2;
            parameter Real l_distal_medial_striate_T44_L40(unit = "m") = 1.24626e-2;
            parameter Real l_distal_medial_striate_T109_R236(unit = "m") = 1.24626e-2;
            parameter Real l_anterior_cerebral_L42(unit = "m") = 0.114668e-2;
            parameter Real l_anterior_cerebral_R238(unit = "m") = 0.114733e-2;
            parameter Real l_anterior_communicating_C44(unit = "m") = 0.565531e-2;
            parameter Real l_anterior_cerebral_L110(unit = "m") = 1.05951e-2;
            parameter Real l_anterior_cerebral_R46(unit = "m") = 1.05945e-2;
            parameter Real l_internal_carotid_L112(unit = "m") = 0.196966e-2;
            parameter Real l_internal_carotid_R48(unit = "m") = 0.196955e-2;
            parameter Real l_middle_cerebral_L114(unit = "m") = 0.182233e-2;
            parameter Real l_middle_cerebral_R52(unit = "m") = 0.182229e-2;
            parameter Real l_anterior_choroidal_T34_L116(unit = "m") = 2.5869e-2;
            parameter Real l_anterior_choroidal_T98_R54(unit = "m") = 2.5869e-2;
            parameter Real l_middle_cerebral_L118(unit = "m") = 2.83007e-2;
            parameter Real l_middle_cerebral_R56(unit = "m") = 2.8301e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_L120(unit = "m") = 0.251165e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_R58(unit = "m") = 0.251165e-2;
            parameter Real l_lateral_frontobasal_T45_L122(unit = "m") = 4.32804e-2;
            parameter Real l_lateral_frontobasal_T110_R60(unit = "m") = 4.32805e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_L124(unit = "m") = 1.33091e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_R62(unit = "m") = 1.3309e-2;
            parameter Real l_prefrontal_T65_L126(unit = "m") = 10.0723e-2;
            parameter Real l_prefrontal_T130_R64(unit = "m") = 10.0723e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_L128(unit = "m") = 1.2255e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_R66(unit = "m") = 1.2255e-2;
            parameter Real l_artery_of_precentral_sulcus_T38_L130(unit = "m") = 0.935653e-2;
            parameter Real l_artery_of_precentral_sulcus_T103_R68(unit = "m") = 0.935654e-2;
            parameter Real l_artery_of_central_sulcus_T36_L132(unit = "m") = 10.6498e-2;
            parameter Real l_artery_of_central_sulcus_T101_R70(unit = "m") = 10.6498e-2;
            parameter Real l_artery_of_precentral_sulcus_T38_L134(unit = "m") = 8.81918e-2;
            parameter Real l_artery_of_precentral_sulcus_T103_R72(unit = "m") = 8.81919e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L136(unit = "m") = 0.142512e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R74(unit = "m") = 0.142516e-2;
            parameter Real l_polar_temporal_T63_L138(unit = "m") = 2.17951e-2;
            parameter Real l_polar_temporal_T127_R76(unit = "m") = 2.17953e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L140(unit = "m") = 0.0932844e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R78(unit = "m") = 0.0932844e-2;
            parameter Real l_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "m") = 2.67934e-2;
            parameter Real l_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "m") = 2.67942e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L144(unit = "m") = 2.83599e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R82(unit = "m") = 2.83601e-2;
            parameter Real l_middle_cerebral_middle_temporal_branch_T57_L146(unit = "m") = 3.00383e-2;
            parameter Real l_middle_cerebral_middle_temporal_branch_T121_R84(unit = "m") = 3.00379e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L148(unit = "m") = 1.82043e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R86(unit = "m") = 1.82041e-2;
            parameter Real l_artery_of_postcentral_sulcus_T37_L150(unit = "m") = 7.36477e-2;
            parameter Real l_artery_of_postcentral_sulcus_T102_R88(unit = "m") = 7.36471e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L152(unit = "m") = 0.708809e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R90(unit = "m") = 0.708809e-2;
            parameter Real l_middle_cerebral_posterior_temporal_branch_T58_L154(unit = "m") = 0.692097e-2;
            parameter Real l_middle_cerebral_posterior_temporal_branch_T122_R92(unit = "m") = 0.692096e-2;
            parameter Real l_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "m") = 5.73679e-2;
            parameter Real l_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "m") = 5.7368e-2;
            parameter Real l_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "m") = 2.26651e-2;
            parameter Real l_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "m") = 2.26651e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L160(unit = "m") = 0.549683e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R98(unit = "m") = 0.549683e-2;
            parameter Real l_anterior_parietal_T35_L162(unit = "m") = 6.219e-2;
            parameter Real l_anterior_parietal_T100_R100(unit = "m") = 6.21893e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L164(unit = "m") = 1.05444e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R102(unit = "m") = 1.05443e-2;
            parameter Real l_middle_cerebral_branch_to_angular_gyrus_T56_L166(unit = "m") = 1.01852e-2;
            parameter Real l_middle_cerebral_branch_to_angular_gyrus_T120_R104(unit = "m") = 1.01852e-2;
            parameter Real l_posterior_parietal_T64_L168(unit = "m") = 4.2951e-2;
            parameter Real l_posterior_parietal_T129_R106(unit = "m") = 4.2951e-2;
            parameter Real l_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "m") = 4.19474e-2;
            parameter Real l_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "m") = 4.19475e-2;
            parameter Real l_callosomarginal_L172(unit = "m") = 1.13312e-2;
            parameter Real l_callosomarginal_R240(unit = "m") = 1.13311e-2;
            parameter Real l_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "m") = 3.43749e-2;
            parameter Real l_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "m") = 3.43749e-2;
            parameter Real l_callosomarginal_L176(unit = "m") = 1.72952e-2;
            parameter Real l_callosomarginal_R244(unit = "m") = 1.72952e-2;
            parameter Real l_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "m") = 4.19271e-2;
            parameter Real l_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "m") = 4.1927e-2;
            parameter Real l_callosomarginal_L180(unit = "m") = 1.39198e-2;
            parameter Real l_callosomarginal_R248(unit = "m") = 1.39198e-2;
            parameter Real l_callosomarginal_cingular_branch_T40_L182(unit = "m") = 1.75028e-2;
            parameter Real l_callosomarginal_cingular_branch_T105_R250(unit = "m") = 1.75028e-2;
            parameter Real l_callosomarginal_L184(unit = "m") = 0.496294e-2;
            parameter Real l_callosomarginal_R252(unit = "m") = 0.496295e-2;
            parameter Real l_callosomarginal_paracentral_branch_T42_L186(unit = "m") = 4.22964e-2;
            parameter Real l_callosomarginal_paracentral_branch_T107_R254(unit = "m") = 4.22964e-2;
            parameter Real l_medial_occipital_L188(unit = "m") = 0.490507e-2;
            parameter Real l_medial_occipital_R256(unit = "m") = 0.490474e-2;
            parameter Real l_medial_occipital_occipitotemporal_branch_T52_L190(unit = "m") = 2.98359e-2;
            parameter Real l_medial_occipital_occipitotemporal_branch_T80_R258(unit = "m") = 2.98366e-2;
            parameter Real l_medial_occipital_L192(unit = "m") = 0.892062e-2;
            parameter Real l_medial_occipital_R260(unit = "m") = 0.892067e-2;
            parameter Real l_medial_occipital_parieto_occipital_branch_T54_L194(unit = "m") = 1.88987e-2;
            parameter Real l_medial_occipital_parieto_occipital_branch_T118_R262(unit = "m") = 1.88989e-2;
            parameter Real l_medial_occipital_parietal_branch_T53_L196(unit = "m") = 2.80168e-2;
            parameter Real l_medial_occipital_parietal_branch_T81_R264(unit = "m") = 2.80169e-2;
            parameter Real l_medial_occipital_parieto_occipital_branch_T54_L198(unit = "m") = 2.33801e-2;
            parameter Real l_medial_occipital_parieto_occipital_branch_T118_R266(unit = "m") = 2.33801e-2;
            parameter Real l_medial_occipital_L200(unit = "m") = 1.26049e-2;
            parameter Real l_medial_occipital_R268(unit = "m") = 1.26049e-2;
            parameter Real l_medial_occipital_calcarine_branch_T51_L202(unit = "m") = 1.47666e-2;
            parameter Real l_medial_occipital_calcarine_branch_T79_R270(unit = "m") = 1.47667e-2;
            parameter Real C_ascending_aorta_A(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_ascending_aorta_B(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_ascending_aorta_C(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_ascending_aorta_D(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_aortic_arch_C2(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_brachiocephalic_trunk_C4(unit = "m6.J-1") = 0.86529e-10;
            parameter Real C_aortic_arch_C46(unit = "m6.J-1") = 0.799e-10;
            parameter Real C_aortic_arch_C64(unit = "m6.J-1") = 0.548e-10;
            parameter Real C_aortic_arch_C94(unit = "m6.J-1") = 2.83e-10;
            parameter Real C_thoracic_aorta_C96(unit = "m6.J-1") = 0.534e-10;
            parameter Real C_thoracic_aorta_C100(unit = "m6.J-1") = 0.411e-10;
            parameter Real C_thoracic_aorta_C104(unit = "m6.J-1") = 0.774e-10;
            parameter Real C_thoracic_aorta_C108(unit = "m6.J-1") = 0.254e-10;
            parameter Real C_thoracic_aorta_C112(unit = "m6.J-1") = 4.39e-10;
            parameter Real C_abdominal_aorta_C114(unit = "m6.J-1") = 0.084e-10;
            parameter Real C_abdominal_aorta_C136(unit = "m6.J-1") = 0.35e-10;
            parameter Real C_abdominal_aorta_C164(unit = "m6.J-1") = 0.104e-10;
            parameter Real C_abdominal_aorta_C176(unit = "m6.J-1") = 0.281e-10;
            parameter Real C_abdominal_aorta_C188(unit = "m6.J-1") = 1.11e-10;
            parameter Real C_abdominal_aorta_C192(unit = "m6.J-1") = 0.6966e-10;
            parameter Real C_posterior_intercostal_T1_R98(unit = "m6.J-1") = 0.0848e-10;
            parameter Real C_posterior_intercostal_T1_L102(unit = "m6.J-1") = 0.0767e-10;
            parameter Real C_posterior_intercostal_T2_R106(unit = "m6.J-1") = 0.11e-10;
            parameter Real C_posterior_intercostal_T2_L110(unit = "m6.J-1") = 0.102e-10;
            parameter Real C_celiac_trunk_C116(unit = "m6.J-1") = 0.0593e-10;
            parameter Real C_splenic_T2_C118(unit = "m6.J-1") = 0.00491e-10;
            parameter Real C_left_gastric_T3_C120(unit = "m6.J-1") = 0.04857e-10;
            parameter Real C_splenic_T2_C122(unit = "m6.J-1") = 0.00347e-10;
            parameter Real C_dorsal_pancreatic_T1_C124(unit = "m6.J-1") = 0.00179e-10;
            parameter Real C_splenic_T2_C126(unit = "m6.J-1") = 0.07847e-10;
            parameter Real C_common_hepatic_C128(unit = "m6.J-1") = 0.1468e-10;
            parameter Real C_hepatic_artery_proper_C130(unit = "m6.J-1") = 0.01254e-10;
            parameter Real C_hepatic_artery_proper_left_branch_C132(unit = "m6.J-1") = 0.046e-10;
            parameter Real C_hepatic_artery_proper_right_branch_C134(unit = "m6.J-1") = 0.0356e-10;
            parameter Real C_superior_mesenteric_T4_C138(unit = "m6.J-1") = 0.2373e-10;
            parameter Real C_middle_colic_T8_C140(unit = "m6.J-1") = 0.0521e-10;
            parameter Real C_superior_mesenteric_T4_C142(unit = "m6.J-1") = 0.13e-10;
            parameter Real C_jejunal_3_T10_C144(unit = "m6.J-1") = 0.0274e-10;
            parameter Real C_superior_mesenteric_T4_C146(unit = "m6.J-1") = 0.095e-10;
            parameter Real C_jejunal_6_T11_C148(unit = "m6.J-1") = 0.03667e-10;
            parameter Real C_superior_mesenteric_T4_C150(unit = "m6.J-1") = 0.0412e-10;
            parameter Real C_ileocolic_T9_C152(unit = "m6.J-1") = 0.04767e-10;
            parameter Real C_superior_mesenteric_T4_C154(unit = "m6.J-1") = 0.0486e-10;
            parameter Real C_ileal_4_T12_C156(unit = "m6.J-1") = 0.036e-10;
            parameter Real C_superior_mesenteric_T4_C158(unit = "m6.J-1") = 0.0361e-10;
            parameter Real C_ileal_6_T13_C160(unit = "m6.J-1") = 0.023e-10;
            parameter Real C_superior_mesenteric_T4_C162(unit = "m6.J-1") = 0.0531e-10;
            parameter Real C_renal_L166(unit = "m6.J-1") = 0.049e-10;
            parameter Real C_renal_anterior_branch_L168(unit = "m6.J-1") = 0.0189e-10;
            parameter Real C_inferior_segmental_T5_L170(unit = "m6.J-1") = 0.038e-10;
            parameter Real C_superior_segmental_T4_L172(unit = "m6.J-1") = 0.0276e-10;
            parameter Real C_renal_posterior_branch_T3_L174(unit = "m6.J-1") = 0.0131e-10;
            parameter Real C_renal_R178(unit = "m6.J-1") = 0.1e-10;
            parameter Real C_renal_anterior_branch_R180(unit = "m6.J-1") = 0.0189e-10;
            parameter Real C_superior_segmental_T4_R182(unit = "m6.J-1") = 0.02763e-10;
            parameter Real C_inferior_segmental_T5_R184(unit = "m6.J-1") = 0.038e-10;
            parameter Real C_renal_posterior_branch_T3_R186(unit = "m6.J-1") = 0.0131e-10;
            parameter Real C_inferior_mesenteric_T5_C190(unit = "m6.J-1") = 0.1e-10;
            parameter Real C_common_iliac_R216(unit = "m6.J-1") = 0.525e-10;
            parameter Real C_internal_iliac_T1_R218(unit = "m6.J-1") = 0.1733e-10;
            parameter Real C_external_iliac_R220(unit = "m6.J-1") = 0.359e-10;
            parameter Real C_femoral_R222(unit = "m6.J-1") = 0.101e-10;
            parameter Real C_profundus_T2_R224(unit = "m6.J-1") = 0.288e-10;
            parameter Real C_femoral_R226(unit = "m6.J-1") = 0.8338e-10;
            parameter Real C_popliteal_R228(unit = "m6.J-1") = 0.241e-10;
            parameter Real C_anterior_tibial_T3_R230(unit = "m6.J-1") = 0.108e-10;
            parameter Real C_popliteal_R232(unit = "m6.J-1") = 0.01345e-10;
            parameter Real C_tibiofibular_trunk_R234(unit = "m6.J-1") = 0.0546e-10;
            parameter Real C_posterior_tibial_T4_R236(unit = "m6.J-1") = 0.121e-10;
            parameter Real C_common_iliac_L194(unit = "m6.J-1") = 0.509e-10;
            parameter Real C_internal_iliac_T1_L196(unit = "m6.J-1") = 0.1733e-10;
            parameter Real C_external_iliac_L198(unit = "m6.J-1") = 0.359e-10;
            parameter Real C_femoral_L200(unit = "m6.J-1") = 0.101e-10;
            parameter Real C_profundus_T2_L202(unit = "m6.J-1") = 0.288e-10;
            parameter Real C_femoral_L204(unit = "m6.J-1") = 0.8338e-10;
            parameter Real C_popliteal_L206(unit = "m6.J-1") = 0.241e-10;
            parameter Real C_anterior_tibial_T3_L208(unit = "m6.J-1") = 0.108e-10;
            parameter Real C_popliteal_L210(unit = "m6.J-1") = 0.01345e-10;
            parameter Real C_tibiofibular_trunk_L212(unit = "m6.J-1") = 0.05466e-10;
            parameter Real C_posterior_tibial_T4_L214(unit = "m6.J-1") = 0.121e-10;
            parameter Real C_subclavian_R28(unit = "m6.J-1") = 0.1242e-10;
            parameter Real C_subclavian_R30(unit = "m6.J-1") = 0.147e-10;
            parameter Real C_axillary_R32(unit = "m6.J-1") = 0.153e-10;
            parameter Real C_brachial_R34(unit = "m6.J-1") = 0.215e-10;
            parameter Real C_ulnar_T2_R36(unit = "m6.J-1") = 0.013e-10;
            parameter Real C_common_interosseous_R38(unit = "m6.J-1") = 0.0029e-10;
            parameter Real C_posterior_interosseous_T3_R40(unit = "m6.J-1") = 0.019e-10;
            parameter Real C_ulnar_T2_R42(unit = "m6.J-1") = 0.1043e-10;
            parameter Real C_radial_T1_R44(unit = "m6.J-1") = 0.125e-10;
            parameter Real C_subclavian_L66(unit = "m6.J-1") = 0.324e-10;
            parameter Real C_subclavian_L78(unit = "m6.J-1") = 0.1075e-10;
            parameter Real C_axillary_L80(unit = "m6.J-1") = 0.153e-10;
            parameter Real C_brachial_L82(unit = "m6.J-1") = 0.215e-10;
            parameter Real C_ulnar_T2_L84(unit = "m6.J-1") = 0.013e-10;
            parameter Real C_common_interosseous_L86(unit = "m6.J-1") = 0.0029e-10;
            parameter Real C_posterior_interosseous_T3_L88(unit = "m6.J-1") = 0.019e-10;
            parameter Real C_ulnar_T2_L90(unit = "m6.J-1") = 0.1043e-10;
            parameter Real C_radial_T1_L92(unit = "m6.J-1") = 0.125e-10;
            parameter Real C_common_carotid_R6_A(unit = "m6.J-1") = 0.148e-10;
            parameter Real C_common_carotid_R6_B(unit = "m6.J-1") = 0.148e-10;
            parameter Real C_common_carotid_R6_C(unit = "m6.J-1") = 0.148e-10;
            parameter Real C_internal_carotid_R8_A(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_internal_carotid_R8_B(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_internal_carotid_R8_C(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_external_carotid_T2_R26(unit = "m6.J-1") = 0.0845e-10;
            parameter Real C_common_carotid_L48_A(unit = "m6.J-1") = 0.1661e-10;
            parameter Real C_common_carotid_L48_B(unit = "m6.J-1") = 0.1661e-10;
            parameter Real C_common_carotid_L48_C(unit = "m6.J-1") = 0.1661e-10;
            parameter Real C_common_carotid_L48_D(unit = "m6.J-1") = 0.1661e-10;
            parameter Real C_internal_carotid_L50_A(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_internal_carotid_L50_B(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_internal_carotid_L50_C(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_external_carotid_T2_L62(unit = "m6.J-1") = 0.0845e-10;
            parameter Real C_vertebral_L2(unit = "m6.J-1") = 0.0811e-10;
            parameter Real C_vertebral_R272(unit = "m6.J-1") = 0.0811e-10;
            parameter Real C_basilar_C4(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_cerebral_precommunicating_part_L6(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_cerebral_precommunicating_part_R204(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_communicating_L8(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_communicating_R206(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_cerebral_postcommunicating_part_L12(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_cerebral_postcommunicating_part_R208(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_L14(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_R210(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_L18(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_R214(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_L22(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_R218(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_L26(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_R222(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_dorsal_branch_to_corpus_callosum_L28(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_dorsal_branch_to_corpus_callosum_R224(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_parieto_occipital_branch_T60_L30(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_parieto_occipital_branch_T124_R226(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_L32(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_R228(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_precuneal_branch_T61_L34(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_precuneal_branch_T125_R230(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_L36(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_R232(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_L38(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_R234(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_distal_medial_striate_T44_L40(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_distal_medial_striate_T109_R236(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_L42(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_R238(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_communicating_C44(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_L110(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_R46(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_internal_carotid_L112(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_internal_carotid_R48(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_L114(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_R52(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_choroidal_T34_L116(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_choroidal_T98_R54(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_L118(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_R56(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_L120(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_R58(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_frontobasal_T45_L122(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_frontobasal_T110_R60(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_L124(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_R62(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_prefrontal_T65_L126(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_prefrontal_T130_R64(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_L128(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_R66(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_precentral_sulcus_T38_L130(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_precentral_sulcus_T103_R68(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_central_sulcus_T36_L132(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_central_sulcus_T101_R70(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_precentral_sulcus_T38_L134(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_precentral_sulcus_T103_R72(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L136(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R74(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_polar_temporal_T63_L138(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_polar_temporal_T127_R76(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L140(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R78(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L144(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R82(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_middle_temporal_branch_T57_L146(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_middle_temporal_branch_T121_R84(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L148(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R86(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_postcentral_sulcus_T37_L150(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_postcentral_sulcus_T102_R88(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L152(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R90(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporal_branch_T58_L154(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporal_branch_T122_R92(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L160(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R98(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_parietal_T35_L162(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_parietal_T100_R100(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L164(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R102(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_branch_to_angular_gyrus_T56_L166(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_branch_to_angular_gyrus_T120_R104(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_parietal_T64_L168(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_parietal_T129_R106(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_L172(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_R240(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_L176(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_R244(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_L180(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_R248(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_cingular_branch_T40_L182(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_cingular_branch_T105_R250(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_L184(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_R252(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_paracentral_branch_T42_L186(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_paracentral_branch_T107_R254(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_L188(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_R256(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_occipitotemporal_branch_T52_L190(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_occipitotemporal_branch_T80_R258(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_L192(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_R260(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parieto_occipital_branch_T54_L194(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parieto_occipital_branch_T118_R262(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parietal_branch_T53_L196(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parietal_branch_T81_R264(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parieto_occipital_branch_T54_L198(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parieto_occipital_branch_T118_R266(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_L200(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_R268(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_calcarine_branch_T51_L202(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_calcarine_branch_T79_R270(unit = "m6.J-1") = 1.6e-10;
            parameter Real R_T_posterior_intercostal_T1_R98(unit = "J.s.m-6") = 22.5809e+9;
            parameter Real R_T_posterior_intercostal_T1_L102(unit = "J.s.m-6") = 23.1661e+9;
            parameter Real R_T_posterior_intercostal_T2_R106(unit = "J.s.m-6") = 21.0678e+9;
            parameter Real R_T_posterior_intercostal_T2_L110(unit = "J.s.m-6") = 21.2483e+9;
            parameter Real R_T_left_gastric_T3_C120(unit = "J.s.m-6") = 31.1251e+9;
            parameter Real R_T_dorsal_pancreatic_T1_C124(unit = "J.s.m-6") = 16.6313e+9;
            parameter Real R_T_splenic_T2_C126(unit = "J.s.m-6") = 0.429028e+9;
            parameter Real R_T_hepatic_artery_proper_left_branch_C132(unit = "J.s.m-6") = 0.852085e+9;
            parameter Real R_T_hepatic_artery_proper_right_branch_C134(unit = "J.s.m-6") = 0.471438e+9;
            parameter Real R_T_middle_colic_T8_C140(unit = "J.s.m-6") = 2.6865e+9;
            parameter Real R_T_jejunal_3_T10_C144(unit = "J.s.m-6") = 1.96952e+9;
            parameter Real R_T_jejunal_6_T11_C148(unit = "J.s.m-6") = 1.96952e+9;
            parameter Real R_T_ileocolic_T9_C152(unit = "J.s.m-6") = 0.971722e+9;
            parameter Real R_T_ileal_4_T12_C156(unit = "J.s.m-6") = 1.32964e+9;
            parameter Real R_T_ileal_6_T13_C160(unit = "J.s.m-6") = 1.32964e+9;
            parameter Real R_T_superior_mesenteric_T4_C162(unit = "J.s.m-6") = 0.880745e+9;
            parameter Real R_T_inferior_segmental_T5_L170(unit = "J.s.m-6") = 0.526057e+9;
            parameter Real R_T_superior_segmental_T4_L172(unit = "J.s.m-6") = 0.526057e+9;
            parameter Real R_T_renal_posterior_branch_T3_L174(unit = "J.s.m-6") = 0.931304e+9;
            parameter Real R_T_superior_segmental_T4_R182(unit = "J.s.m-6") = 0.527823e+9;
            parameter Real R_T_inferior_segmental_T5_R184(unit = "J.s.m-6") = 0.527823e+9;
            parameter Real R_T_renal_posterior_branch_T3_R186(unit = "J.s.m-6") = 0.934431e+9;
            parameter Real R_T_inferior_mesenteric_T5_C190(unit = "J.s.m-6") = 2.16746e+9;
            parameter Real R_T_internal_iliac_T1_R218(unit = "J.s.m-6") = 0.375754e+9;
            parameter Real R_T_profundus_T2_R224(unit = "J.s.m-6") = 0.310612e+9;
            parameter Real R_T_anterior_tibial_T3_R230(unit = "J.s.m-6") = 2.22296e+9;
            parameter Real R_T_posterior_tibial_T4_R236(unit = "J.s.m-6") = 1.91761e+9;
            parameter Real R_T_internal_iliac_T1_L196(unit = "J.s.m-6") = 0.376879e+9;
            parameter Real R_T_profundus_T2_L202(unit = "J.s.m-6") = 0.310778e+9;
            parameter Real R_T_anterior_tibial_T3_L208(unit = "J.s.m-6") = 2.22365e+9;
            parameter Real R_T_posterior_tibial_T4_L214(unit = "J.s.m-6") = 1.91845e+9;
            parameter Real R_T_posterior_interosseous_T3_R40(unit = "J.s.m-6") = 4.33378e+9;
            parameter Real R_T_ulnar_T2_R42(unit = "J.s.m-6") = 1.0649e+9;
            parameter Real R_T_radial_T1_R44(unit = "J.s.m-6") = 1.04588e+9;
            parameter Real R_T_posterior_interosseous_T3_L88(unit = "J.s.m-6") = 4.34948e+9;
            parameter Real R_T_ulnar_T2_L90(unit = "J.s.m-6") = 1.08553e+9;
            parameter Real R_T_radial_T1_L92(unit = "J.s.m-6") = 1.02715e+9;
            parameter Real R_T_external_carotid_T2_R26(unit = "J.s.m-6") = 0.851183e+9;
            parameter Real R_T_external_carotid_T2_L62(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_internal_carotid_R8_C(unit = "J.s.m-6") = 0.851183e+9;
            parameter Real R_T_internal_carotid_L50_C(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_vertebral_R272(unit = "J.s.m-6") = 0.851183e+9;
            parameter Real R_T_vertebral_L2(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "J.s.m-6") = 6.17214e+9;
            parameter Real R_T_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "J.s.m-6") = 60.7317e+9;
            parameter Real R_T_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "J.s.m-6") = 25.2811e+9;
            parameter Real R_T_pericallosal_parieto_occipital_branch_T60_L30(unit = "J.s.m-6") = 17.8019e+9;
            parameter Real R_T_pericallosal_precuneal_branch_T61_L34(unit = "J.s.m-6") = 12.2746e+9;
            parameter Real R_T_distal_medial_striate_T44_L40(unit = "J.s.m-6") = 65.8855e+9;
            parameter Real R_T_anterior_choroidal_T34_L116(unit = "J.s.m-6") = 9.50237e+9;
            parameter Real R_T_lateral_frontobasal_T45_L122(unit = "J.s.m-6") = 23.3019e+9;
            parameter Real R_T_prefrontal_T65_L126(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_artery_of_central_sulcus_T36_L132(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_artery_of_precentral_sulcus_T38_L134(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_polar_temporal_T63_L138(unit = "J.s.m-6") = 44.8075e+9;
            parameter Real R_T_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "J.s.m-6") = 15.3827e+9;
            parameter Real R_T_middle_cerebral_middle_temporal_branch_T57_L146(unit = "J.s.m-6") = 13.5433e+9;
            parameter Real R_T_artery_of_postcentral_sulcus_T37_L150(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "J.s.m-6") = 10.6482e+9;
            parameter Real R_T_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "J.s.m-6") = 10.6482e+9;
            parameter Real R_T_anterior_parietal_T35_L162(unit = "J.s.m-6") = 15.3827e+9;
            parameter Real R_T_posterior_parietal_T64_L168(unit = "J.s.m-6") = 9.50237e+9;
            parameter Real R_T_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "J.s.m-6") = 7.65279e+9;
            parameter Real R_T_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "J.s.m-6") = 13.2110e+9;
            parameter Real R_T_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "J.s.m-6") = 9.39673e+9;
            parameter Real R_T_callosomarginal_cingular_branch_T40_L182(unit = "J.s.m-6") = 12.4248e+9;
            parameter Real R_T_callosomarginal_paracentral_branch_T42_L186(unit = "J.s.m-6") = 12.4248e+9;
            parameter Real R_T_medial_occipital_occipitotemporal_branch_T52_L190(unit = "J.s.m-6") = 31.0946e+9;
            parameter Real R_T_medial_occipital_parietal_branch_T53_L196(unit = "J.s.m-6") = 51.9306e+9;
            parameter Real R_T_medial_occipital_parieto_occipital_branch_T54_L198(unit = "J.s.m-6") = 10.6655e+9;
            parameter Real R_T_medial_occipital_calcarine_branch_T51_L202(unit = "J.s.m-6") = 31.0946e+9;
            parameter Real R_T_anterior_choroidal_T98_R54(unit = "J.s.m-6") = 9.50237e+9;
            parameter Real R_T_lateral_frontobasal_T110_R60(unit = "J.s.m-6") = 23.3019e+9;
            parameter Real R_T_prefrontal_T130_R64(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_artery_of_central_sulcus_T101_R70(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_artery_of_precentral_sulcus_T103_R72(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_polar_temporal_T127_R76(unit = "J.s.m-6") = 44.8075e+9;
            parameter Real R_T_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "J.s.m-6") = 15.3827e+9;
            parameter Real R_T_middle_cerebral_middle_temporal_branch_T121_R84(unit = "J.s.m-6") = 13.5433e+9;
            parameter Real R_T_artery_of_postcentral_sulcus_T102_R88(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "J.s.m-6") = 10.6482e+9;
            parameter Real R_T_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "J.s.m-6") = 10.6482e+9;
            parameter Real R_T_anterior_parietal_T100_R100(unit = "J.s.m-6") = 15.3827e+9;
            parameter Real R_T_posterior_parietal_T129_R106(unit = "J.s.m-6") = 9.50237e+9;
            parameter Real R_T_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "J.s.m-6") = 7.65279e+9;
            parameter Real R_T_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "J.s.m-6") = 6.17214e+9;
            parameter Real R_T_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "J.s.m-6") = 60.7317e+9;
            parameter Real R_T_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "J.s.m-6") = 25.2811e+9;
            parameter Real R_T_pericallosal_parieto_occipital_branch_T124_R226(unit = "J.s.m-6") = 17.8019e+9;
            parameter Real R_T_pericallosal_precuneal_branch_T125_R230(unit = "J.s.m-6") = 12.2746e+9;
            parameter Real R_T_distal_medial_striate_T109_R236(unit = "J.s.m-6") = 65.8855e+9;
            parameter Real R_T_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "J.s.m-6") = 13.2110e+9;
            parameter Real R_T_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "J.s.m-6") = 9.39673e+9;
            parameter Real R_T_callosomarginal_cingular_branch_T105_R250(unit = "J.s.m-6") = 12.4248e+9;
            parameter Real R_T_callosomarginal_paracentral_branch_T107_R254(unit = "J.s.m-6") = 12.4248e+9;
            parameter Real R_T_medial_occipital_occipitotemporal_branch_T80_R258(unit = "J.s.m-6") = 31.0946e+9;
            parameter Real R_T_medial_occipital_parietal_branch_T81_R264(unit = "J.s.m-6") = 51.9306e+9;
            parameter Real R_T_medial_occipital_parieto_occipital_branch_T118_R266(unit = "J.s.m-6") = 10.6655e+9;
            parameter Real R_T_medial_occipital_calcarine_branch_T79_R270(unit = "J.s.m-6") = 31.0946e+9;
            parameter Real C_T_posterior_intercostal_T1_R98(unit = "m6.J-1") = 2.2736e-12;
            parameter Real C_T_posterior_intercostal_T1_L102(unit = "m6.J-1") = 2.2162e-12;
            parameter Real C_T_posterior_intercostal_T2_R106(unit = "m6.J-1") = 2.4369e-12;
            parameter Real C_T_posterior_intercostal_T2_L110(unit = "m6.J-1") = 2.4162e-12;
            parameter Real C_T_left_gastric_T3_C120(unit = "m6.J-1") = 1.6495e-12;
            parameter Real C_T_dorsal_pancreatic_T1_C124(unit = "m6.J-1") = 15.055e-12;
            parameter Real C_T_splenic_T2_C126(unit = "m6.J-1") = 119.67e-12;
            parameter Real C_T_hepatic_artery_proper_left_branch_C132(unit = "m6.J-1") = 60.253e-12;
            parameter Real C_T_hepatic_artery_proper_right_branch_C134(unit = "m6.J-1") = 108.9e-12;
            parameter Real C_T_middle_colic_T8_C140(unit = "m6.J-1") = 19.111e-12;
            parameter Real C_T_jejunal_3_T10_C144(unit = "m6.J-1") = 26.067e-12;
            parameter Real C_T_jejunal_6_T11_C148(unit = "m6.J-1") = 26.067e-12;
            parameter Real C_T_ileocolic_T9_C152(unit = "m6.J-1") = 52.835e-12;
            parameter Real C_T_ileal_4_T12_C156(unit = "m6.J-1") = 38.612e-12;
            parameter Real C_T_ileal_6_T13_C160(unit = "m6.J-1") = 38.612e-12;
            parameter Real C_T_superior_mesenteric_T4_C162(unit = "m6.J-1") = 58.292e-12;
            parameter Real C_T_inferior_segmental_T5_L170(unit = "m6.J-1") = 97.595e-12;
            parameter Real C_T_superior_segmental_T4_L172(unit = "m6.J-1") = 97.595e-12;
            parameter Real C_T_renal_posterior_branch_T3_L174(unit = "m6.J-1") = 55.127e-12;
            parameter Real C_T_superior_segmental_T4_R182(unit = "m6.J-1") = 97.268e-12;
            parameter Real C_T_inferior_segmental_T5_R184(unit = "m6.J-1") = 97.268e-12;
            parameter Real C_T_renal_posterior_branch_T3_R186(unit = "m6.J-1") = 54.943e-12;
            parameter Real C_T_inferior_mesenteric_T5_C190(unit = "m6.J-1") = 23.687e-12;
            parameter Real C_T_internal_iliac_T1_R218(unit = "m6.J-1") = 136.63e-12;
            parameter Real C_T_profundus_T2_R224(unit = "m6.J-1") = 165.29e-12;
            parameter Real C_T_anterior_tibial_T3_R230(unit = "m6.J-1") = 23.096e-12;
            parameter Real C_T_posterior_tibial_T4_R236(unit = "m6.J-1") = 26.773e-12;
            parameter Real C_T_internal_iliac_T1_L196(unit = "m6.J-1") = 136.23e-12;
            parameter Real C_T_profundus_T2_L202(unit = "m6.J-1") = 165.2e-12;
            parameter Real C_T_anterior_tibial_T3_L208(unit = "m6.J-1") = 23.088e-12;
            parameter Real C_T_posterior_tibial_T4_L214(unit = "m6.J-1") = 26.761e-12;
            parameter Real C_T_posterior_interosseous_T3_R40(unit = "m6.J-1") = 11.847e-12;
            parameter Real C_T_ulnar_T2_R42(unit = "m6.J-1") = 48.212e-12;
            parameter Real C_T_radial_T1_R44(unit = "m6.J-1") = 49.088e-12;
            parameter Real C_T_posterior_interosseous_T3_L88(unit = "m6.J-1") = 11.804e-12;
            parameter Real C_T_ulnar_T2_L90(unit = "m6.J-1") = 47.295e-12;
            parameter Real C_T_radial_T1_L92(unit = "m6.J-1") = 49.983e-12;
            parameter Real C_T_external_carotid_T2_R26(unit = "m6.J-1") = 60.317e-12;
            parameter Real C_T_external_carotid_T2_L62(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_internal_carotid_R8_C(unit = "m6.J-1") = 60.317e-12;
            parameter Real C_T_internal_carotid_L50_C(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_vertebral_R272(unit = "m6.J-1") = 60.317e-12;
            parameter Real C_T_vertebral_L2(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "m6.J-1") = 2.60095e-12;
            parameter Real C_T_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "m6.J-1") = 0.264334e-12;
            parameter Real C_T_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "m6.J-1") = 0.634997e-12;
            parameter Real C_T_pericallosal_parieto_occipital_branch_T60_L30(unit = "m6.J-1") = 0.901782e-12;
            parameter Real C_T_pericallosal_precuneal_branch_T61_L34(unit = "m6.J-1") = 1.30786e-12;
            parameter Real C_T_distal_medial_striate_T44_L40(unit = "m6.J-1") = 0.243656e-12;
            parameter Real C_T_anterior_choroidal_T34_L116(unit = "m6.J-1") = 1.68941e-12;
            parameter Real C_T_lateral_frontobasal_T45_L122(unit = "m6.J-1") = 0.688932e-12;
            parameter Real C_T_prefrontal_T65_L126(unit = "m6.J-1") = 1.33978e-12;
            parameter Real C_T_artery_of_central_sulcus_T36_L132(unit = "m6.J-1") = 1.33978e-12;
            parameter Real C_T_artery_of_precentral_sulcus_T38_L134(unit = "m6.J-1") = 1.33978e-12;
            parameter Real C_T_polar_temporal_T63_L138(unit = "m6.J-1") = 0.35828e-12;
            parameter Real C_T_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "m6.J-1") = 1.0436e-12;
            parameter Real C_T_middle_cerebral_middle_temporal_branch_T57_L146(unit = "m6.J-1") = 1.1853e-12;
            parameter Real C_T_artery_of_postcentral_sulcus_T37_L150(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "m6.J-1") = 1.5076e-12;
            parameter Real C_T_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "m6.J-1") = 1.5076e-12;
            parameter Real C_T_anterior_parietal_T35_L162(unit = "m6.J-1") = 1.0436e-12;
            parameter Real C_T_posterior_parietal_T64_L168(unit = "m6.J-1") = 1.6894e-12;
            parameter Real C_T_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "m6.J-1") = 2.0977e-12;
            parameter Real C_T_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "m6.J-1") = 1.2152e-12;
            parameter Real C_T_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "m6.J-1") = 1.7084e-12;
            parameter Real C_T_callosomarginal_cingular_branch_T40_L182(unit = "m6.J-1") = 1.2921e-12;
            parameter Real C_T_callosomarginal_paracentral_branch_T42_L186(unit = "m6.J-1") = 1.2921e-12;
            parameter Real C_T_medial_occipital_occipitotemporal_branch_T52_L190(unit = "m6.J-1") = 0.51628e-12;
            parameter Real C_T_medial_occipital_parietal_branch_T53_L196(unit = "m6.J-1") = 0.30913e-12;
            parameter Real C_T_medial_occipital_parieto_occipital_branch_T54_L198(unit = "m6.J-1") = 1.5052e-12;
            parameter Real C_T_medial_occipital_calcarine_branch_T51_L202(unit = "m6.J-1") = 0.51628e-12;
            parameter Real C_T_anterior_choroidal_T98_R54(unit = "m6.J-1") = 1.6894e-12;
            parameter Real C_T_lateral_frontobasal_T110_R60(unit = "m6.J-1") = 0.68893e-12;
            parameter Real C_T_prefrontal_T130_R64(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_artery_of_central_sulcus_T101_R70(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_artery_of_precentral_sulcus_T103_R72(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_polar_temporal_T127_R76(unit = "m6.J-1") = 0.35828e-12;
            parameter Real C_T_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "m6.J-1") = 1.0436e-12;
            parameter Real C_T_middle_cerebral_middle_temporal_branch_T121_R84(unit = "m6.J-1") = 1.1853e-12;
            parameter Real C_T_artery_of_postcentral_sulcus_T102_R88(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "m6.J-1") = 1.5076e-12;
            parameter Real C_T_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "m6.J-1") = 1.5076e-12;
            parameter Real C_T_anterior_parietal_T100_R100(unit = "m6.J-1") = 1.0436e-12;
            parameter Real C_T_posterior_parietal_T129_R106(unit = "m6.J-1") = 1.6894e-12;
            parameter Real C_T_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "m6.J-1") = 2.0977e-12;
            parameter Real C_T_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "m6.J-1") = 2.6009e-12;
            parameter Real C_T_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "m6.J-1") = 0.26433e-12;
            parameter Real C_T_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "m6.J-1") = 0.635e-12;
            parameter Real C_T_pericallosal_parieto_occipital_branch_T124_R226(unit = "m6.J-1") = 0.90178e-12;
            parameter Real C_T_pericallosal_precuneal_branch_T125_R230(unit = "m6.J-1") = 1.3079e-12;
            parameter Real C_T_distal_medial_striate_T109_R236(unit = "m6.J-1") = 0.24366e-12;
            parameter Real C_T_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "m6.J-1") = 1.2152e-12;
            parameter Real C_T_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "m6.J-1") = 1.7084e-12;
            parameter Real C_T_callosomarginal_cingular_branch_T105_R250(unit = "m6.J-1") = 1.2921e-12;
            parameter Real C_T_callosomarginal_paracentral_branch_T107_R254(unit = "m6.J-1") = 1.2921e-12;
            parameter Real C_T_medial_occipital_occipitotemporal_branch_T80_R258(unit = "m6.J-1") = 0.51628e-12;
            parameter Real C_T_medial_occipital_parietal_branch_T81_R264(unit = "m6.J-1") = 0.30913e-12;
            parameter Real C_T_medial_occipital_parieto_occipital_branch_T118_R266(unit = "m6.J-1") = 1.5052e-12;
            parameter Real C_T_medial_occipital_calcarine_branch_T79_R270(unit = "m6.J-1") = 0.51628e-12;
            parameter Real E_ascending_aorta_A(unit = "Pa") = 0.4e+6;
            parameter Real E_ascending_aorta_B(unit = "Pa") = 0.4e+6;
            parameter Real E_ascending_aorta_C(unit = "Pa") = 0.4e+6;
            parameter Real E_ascending_aorta_D(unit = "Pa") = 0.4e+6;
            parameter Real E_aortic_arch_C2(unit = "Pa") = 0.4e+6;
            parameter Real E_brachiocephalic_trunk_C4(unit = "Pa") = 0.4e+6;
            parameter Real E_aortic_arch_C46(unit = "Pa") = 0.4e+6;
            parameter Real E_aortic_arch_C64(unit = "Pa") = 0.4e+6;
            parameter Real E_aortic_arch_C94(unit = "Pa") = 0.4e+6;
            parameter Real E_thoracic_aorta_C96(unit = "Pa") = 0.4e+6;
            parameter Real E_thoracic_aorta_C100(unit = "Pa") = 0.4e+6;
            parameter Real E_thoracic_aorta_C104(unit = "Pa") = 0.4e+6;
            parameter Real E_thoracic_aorta_C108(unit = "Pa") = 0.4e+6;
            parameter Real E_thoracic_aorta_C112(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C114(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C136(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C164(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C176(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C188(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C192(unit = "Pa") = 0.4e+6;
            parameter Real E_posterior_intercostal_T1_R98(unit = "Pa") = 0.4e+6;
            parameter Real E_posterior_intercostal_T1_L102(unit = "Pa") = 0.4e+6;
            parameter Real E_posterior_intercostal_T2_R106(unit = "Pa") = 0.4e+6;
            parameter Real E_posterior_intercostal_T2_L110(unit = "Pa") = 0.4e+6;
            parameter Real E_celiac_trunk_C116(unit = "Pa") = 0.4e+6;
            parameter Real E_splenic_T2_C118(unit = "Pa") = 0.4e+6;
            parameter Real E_left_gastric_T3_C120(unit = "Pa") = 0.4e+6;
            parameter Real E_splenic_T2_C122(unit = "Pa") = 0.4e+6;
            parameter Real E_dorsal_pancreatic_T1_C124(unit = "Pa") = 0.4e+6;
            parameter Real E_splenic_T2_C126(unit = "Pa") = 0.4e+6;
            parameter Real E_common_hepatic_C128(unit = "Pa") = 0.4e+6;
            parameter Real E_hepatic_artery_proper_C130(unit = "Pa") = 0.4e+6;
            parameter Real E_hepatic_artery_proper_left_branch_C132(unit = "Pa") = 0.4e+6;
            parameter Real E_hepatic_artery_proper_right_branch_C134(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C138(unit = "Pa") = 0.4e+6;
            parameter Real E_middle_colic_T8_C140(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C142(unit = "Pa") = 0.4e+6;
            parameter Real E_jejunal_3_T10_C144(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C146(unit = "Pa") = 0.4e+6;
            parameter Real E_jejunal_6_T11_C148(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C150(unit = "Pa") = 0.4e+6;
            parameter Real E_ileocolic_T9_C152(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C154(unit = "Pa") = 0.4e+6;
            parameter Real E_ileal_4_T12_C156(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C158(unit = "Pa") = 0.4e+6;
            parameter Real E_ileal_6_T13_C160(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C162(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_L166(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_anterior_branch_L168(unit = "Pa") = 0.4e+6;
            parameter Real E_inferior_segmental_T5_L170(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_segmental_T4_L172(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_posterior_branch_T3_L174(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_R178(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_anterior_branch_R180(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_segmental_T4_R182(unit = "Pa") = 0.4e+6;
            parameter Real E_inferior_segmental_T5_R184(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_posterior_branch_T3_R186(unit = "Pa") = 0.4e+6;
            parameter Real E_inferior_mesenteric_T5_C190(unit = "Pa") = 0.4e+6;
            parameter Real E_common_iliac_R216(unit = "Pa") = 0.4e+6;
            parameter Real E_internal_iliac_T1_R218(unit = "Pa") = 1.6e+6;
            parameter Real E_external_iliac_R220(unit = "Pa") = 0.8e+6;
            parameter Real E_femoral_R222(unit = "Pa") = 0.8e+6;
            parameter Real E_profundus_T2_R224(unit = "Pa") = 0.8e+6;
            parameter Real E_femoral_R226(unit = "Pa") = 0.8e+6;
            parameter Real E_popliteal_R228(unit = "Pa") = 0.8e+6;
            parameter Real E_anterior_tibial_T3_R230(unit = "Pa") = 1.6e+6;
            parameter Real E_popliteal_R232(unit = "Pa") = 1.6e+6;
            parameter Real E_tibiofibular_trunk_R234(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_tibial_T4_R236(unit = "Pa") = 1.6e+6;
            parameter Real E_common_iliac_L194(unit = "Pa") = 0.4e+6;
            parameter Real E_internal_iliac_T1_L196(unit = "Pa") = 1.6e+6;
            parameter Real E_external_iliac_L198(unit = "Pa") = 0.8e+6;
            parameter Real E_femoral_L200(unit = "Pa") = 0.8e+6;
            parameter Real E_profundus_T2_L202(unit = "Pa") = 0.8e+6;
            parameter Real E_femoral_L204(unit = "Pa") = 0.8e+6;
            parameter Real E_popliteal_L206(unit = "Pa") = 0.8e+6;
            parameter Real E_anterior_tibial_T3_L208(unit = "Pa") = 1.6e+6;
            parameter Real E_popliteal_L210(unit = "Pa") = 1.6e+6;
            parameter Real E_tibiofibular_trunk_L212(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_tibial_T4_L214(unit = "Pa") = 1.6e+6;
            parameter Real E_subclavian_R28(unit = "Pa") = 0.4e+6;
            parameter Real E_subclavian_R30(unit = "Pa") = 0.4e+6;
            parameter Real E_axillary_R32(unit = "Pa") = 0.4e+6;
            parameter Real E_brachial_R34(unit = "Pa") = 0.4e+6;
            parameter Real E_ulnar_T2_R36(unit = "Pa") = 0.8e+6;
            parameter Real E_common_interosseous_R38(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_interosseous_T3_R40(unit = "Pa") = 1.6e+6;
            parameter Real E_ulnar_T2_R42(unit = "Pa") = 0.8e+6;
            parameter Real E_radial_T1_R44(unit = "Pa") = 0.8e+6;
            parameter Real E_subclavian_L66(unit = "Pa") = 0.4e+6;
            parameter Real E_subclavian_L78(unit = "Pa") = 0.4e+6;
            parameter Real E_axillary_L80(unit = "Pa") = 0.4e+6;
            parameter Real E_brachial_L82(unit = "Pa") = 0.4e+6;
            parameter Real E_ulnar_T2_L84(unit = "Pa") = 0.8e+6;
            parameter Real E_common_interosseous_L86(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_interosseous_T3_L88(unit = "Pa") = 1.6e+6;
            parameter Real E_ulnar_T2_L90(unit = "Pa") = 0.8e+6;
            parameter Real E_radial_T1_L92(unit = "Pa") = 0.8e+6;
            parameter Real E_common_carotid_R6_A(unit = "Pa") = 0.2e+6;
            parameter Real E_common_carotid_R6_B(unit = "Pa") = 0.2e+6;
            parameter Real E_common_carotid_R6_C(unit = "Pa") = 0.2e+6;
            parameter Real E_internal_carotid_R8_A(unit = "Pa") = 0.8e+6;
            parameter Real E_internal_carotid_R8_B(unit = "Pa") = 0.8e+6;
            parameter Real E_internal_carotid_R8_C(unit = "Pa") = 1.6e+6;
            parameter Real E_external_carotid_T2_R26(unit = "Pa") = 0.8e+6;
            parameter Real E_common_carotid_L48_A(unit = "Pa") = 0.2e+6;
            parameter Real E_common_carotid_L48_B(unit = "Pa") = 0.2e+6;
            parameter Real E_common_carotid_L48_C(unit = "Pa") = 0.2e+6;
            parameter Real E_common_carotid_L48_D(unit = "Pa") = 0.2e+6;
            parameter Real E_internal_carotid_L50_A(unit = "Pa") = 0.8e+6;
            parameter Real E_internal_carotid_L50_B(unit = "Pa") = 0.8e+6;
            parameter Real E_internal_carotid_L50_C(unit = "Pa") = 1.6e+6;
            parameter Real E_external_carotid_T2_L62(unit = "Pa") = 0.8e+6;
            parameter Real E_vertebral_L2(unit = "Pa") = 0.8e+6;
            parameter Real E_vertebral_R272(unit = "Pa") = 0.8e+6;
            parameter Real E_basilar_C4(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_cerebral_precommunicating_part_L6(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_cerebral_precommunicating_part_R204(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_communicating_L8(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_communicating_R206(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_cerebral_postcommunicating_part_L12(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_cerebral_postcommunicating_part_R208(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_L14(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_R210(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_L18(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_R214(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_L22(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_R218(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_L26(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_R222(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_dorsal_branch_to_corpus_callosum_L28(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_dorsal_branch_to_corpus_callosum_R224(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_parieto_occipital_branch_T60_L30(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_parieto_occipital_branch_T124_R226(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_L32(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_R228(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_precuneal_branch_T61_L34(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_precuneal_branch_T125_R230(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_L36(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_R232(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_L38(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_R234(unit = "Pa") = 1.6e+6;
            parameter Real E_distal_medial_striate_T44_L40(unit = "Pa") = 1.6e+6;
            parameter Real E_distal_medial_striate_T109_R236(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_L42(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_R238(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_communicating_C44(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_L110(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_R46(unit = "Pa") = 1.6e+6;
            parameter Real E_internal_carotid_L112(unit = "Pa") = 1.6e+6;
            parameter Real E_internal_carotid_R48(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_L114(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_R52(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_choroidal_T34_L116(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_choroidal_T98_R54(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_L118(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_R56(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_L120(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_R58(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_frontobasal_T45_L122(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_frontobasal_T110_R60(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_L124(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_R62(unit = "Pa") = 1.6e+6;
            parameter Real E_prefrontal_T65_L126(unit = "Pa") = 1.6e+6;
            parameter Real E_prefrontal_T130_R64(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_L128(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_R66(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_precentral_sulcus_T38_L130(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_precentral_sulcus_T103_R68(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_central_sulcus_T36_L132(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_central_sulcus_T101_R70(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_precentral_sulcus_T38_L134(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_precentral_sulcus_T103_R72(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L136(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R74(unit = "Pa") = 1.6e+6;
            parameter Real E_polar_temporal_T63_L138(unit = "Pa") = 1.6e+6;
            parameter Real E_polar_temporal_T127_R76(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L140(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R78(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L144(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R82(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_middle_temporal_branch_T57_L146(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_middle_temporal_branch_T121_R84(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L148(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R86(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_postcentral_sulcus_T37_L150(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_postcentral_sulcus_T102_R88(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L152(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R90(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporal_branch_T58_L154(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporal_branch_T122_R92(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L160(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R98(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_parietal_T35_L162(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_parietal_T100_R100(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L164(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R102(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_branch_to_angular_gyrus_T56_L166(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_branch_to_angular_gyrus_T120_R104(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_parietal_T64_L168(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_parietal_T129_R106(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_L172(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_R240(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_L176(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_R244(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_L180(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_R248(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_cingular_branch_T40_L182(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_cingular_branch_T105_R250(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_L184(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_R252(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_paracentral_branch_T42_L186(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_paracentral_branch_T107_R254(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_L188(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_R256(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_occipitotemporal_branch_T52_L190(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_occipitotemporal_branch_T80_R258(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_L192(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_R260(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parieto_occipital_branch_T54_L194(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parieto_occipital_branch_T118_R262(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parietal_branch_T53_L196(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parietal_branch_T81_R264(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parieto_occipital_branch_T54_L198(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parieto_occipital_branch_T118_R266(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_L200(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_R268(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_calcarine_branch_T51_L202(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_calcarine_branch_T79_R270(unit = "Pa") = 1.6e+6;
          equation

          end Parameters_Systemic;

          model Parameters_Venous
            parameter Real r_superior_vena_cava_C2(unit = "m") = 0.975e-2;
            parameter Real r_azygos_vein_T1_C4(unit = "m") = 0.38e-2;
            parameter Real r_superior_vena_cava_C88(unit = "m") = 0.975e-2;
            parameter Real r_azygos_vein_T1_C86(unit = "m") = 0.38e-2;
            parameter Real r_inferior_vena_cava_C8(unit = "m") = 0.995e-2;
            parameter Real r_hepatic_vein_T1_C10(unit = "m") = 0.6965e-2;
            parameter Real r_inferior_vena_cava_C12(unit = "m") = 0.98728e-2;
            parameter Real r_venous_perforator_T2_C14(unit = "m") = 0.4975e-2;
            parameter Real r_inferior_vena_cava_C16(unit = "m") = 0.94787e-2;
            parameter Real r_renal_vein_T1_R18(unit = "m") = 0.6e-2;
            parameter Real r_inferior_vena_cava_C20(unit = "m") = 0.94787e-2;
            parameter Real r_renal_vein_T1_L22(unit = "m") = 0.55e-2;
            parameter Real r_inferior_vena_cava_C24(unit = "m") = 0.94661e-2;
            parameter Real r_common_iliac_vein_L56(unit = "m") = 0.6314e-2;
            parameter Real r_common_iliac_vein_R26(unit = "m") = 0.6314e-2;
            parameter Real r_external_iliac_vein_R28(unit = "m") = 0.63e-2;
            parameter Real r_internal_iliac_vein_T1_R30(unit = "m") = 0.491e-2;
            parameter Real r_external_iliac_vein_R32(unit = "m") = 0.63e-2;
            parameter Real r_femoral_vein_R34(unit = "m") = 0.568e-2;
            parameter Real r_great_saphenous_vein_T7_R36(unit = "m") = 0.181e-2;
            parameter Real r_femoral_vein_R38(unit = "m") = 0.568e-2;
            parameter Real r_profunda_femoris_vein_T2_R40(unit = "m") = 0.4e-2;
            parameter Real r_femoral_vein_R42(unit = "m") = 0.568e-2;
            parameter Real r_venous_perforator_T3_R44(unit = "m") = 0.2e-2;
            parameter Real r_femoral_vein_R46(unit = "m") = 0.568e-2;
            parameter Real r_popliteal_vein_R48(unit = "m") = 0.381e-2;
            parameter Real r_anterior_tibial_vein_T4_R50(unit = "m") = 0.1175e-2;
            parameter Real r_popliteal_vein_R52(unit = "m") = 0.381e-2;
            parameter Real r_posterior_tibial_vein_T6_R54(unit = "m") = 0.17e-2;
            parameter Real r_external_iliac_vein_L58(unit = "m") = 0.63e-2;
            parameter Real r_internal_iliac_vein_T1_L60(unit = "m") = 0.491e-2;
            parameter Real r_external_iliac_vein_L62(unit = "m") = 0.63e-2;
            parameter Real r_femoral_vein_L64(unit = "m") = 0.568e-2;
            parameter Real r_great_saphenous_vein_T7_L66(unit = "m") = 0.181e-2;
            parameter Real r_femoral_vein_L68(unit = "m") = 0.568e-2;
            parameter Real r_profunda_femoris_vein_T2_L70(unit = "m") = 0.4e-2;
            parameter Real r_femoral_vein_L72(unit = "m") = 0.568e-2;
            parameter Real r_venous_perforator_T3_L74(unit = "m") = 0.568e-2;
            parameter Real r_femoral_vein_L76(unit = "m") = 0.568e-2;
            parameter Real r_popliteal_vein_L78(unit = "m") = 0.381e-2;
            parameter Real r_anterior_tibial_vein_T4_L80(unit = "m") = 0.1175e-2;
            parameter Real r_popliteal_vein_L82(unit = "m") = 0.381e-2;
            parameter Real r_posterior_tibial_vein_T6_L84(unit = "m") = 0.17e-2;
            parameter Real r_brachiocephalic_vein_R90(unit = "m") = 0.8e-2;
            parameter Real r_brachiocephalic_vein_L124(unit = "m") = 0.75e-2;
            parameter Real r_vertebral_vein_R92(unit = "m") = 0.27e-2;
            parameter Real r_brachiocephalic_vein_R94(unit = "m") = 0.8e-2;
            parameter Real r_subclavian_vein_R96(unit = "m") = 0.56e-2;
            parameter Real r_internal_jugular_vein_R122(unit = "m") = 0.75e-2;
            parameter Real r_external_jugular_vein_R98(unit = "m") = 0.225e-2;
            parameter Real r_subclavian_vein_R100(unit = "m") = 0.56e-2;
            parameter Real r_axillary_vein_R102(unit = "m") = 0.56e-2;
            parameter Real r_brachial_vein_R104(unit = "m") = 0.185e-2;
            parameter Real r_brachial_vein_R114(unit = "m") = 0.17e-2;
            parameter Real r_venous_perforator_T2_R106(unit = "m") = 0.17e-2;
            parameter Real r_brachial_vein_R108(unit = "m") = 0.185e-2;
            parameter Real r_ulnar_vein_T7_R110(unit = "m") = 0.085e-2;
            parameter Real r_brachial_vein_R112(unit = "m") = 0.185e-2;
            parameter Real r_venous_perforator_T1_R116(unit = "m") = 0.185e-2;
            parameter Real r_brachial_vein_R118(unit = "m") = 0.17e-2;
            parameter Real r_radial_vein_T3_R120(unit = "m") = 0.0665e-2;
            parameter Real r_vertebral_vein_L126(unit = "m") = 0.27e-2;
            parameter Real r_brachiocephalic_vein_L128(unit = "m") = 0.75e-2;
            parameter Real r_subclavian_vein_L130(unit = "m") = 0.56e-2;
            parameter Real r_internal_jugular_vein_L156(unit = "m") = 0.6e-2;
            parameter Real r_external_jugular_vein_L132(unit = "m") = 0.225e-2;
            parameter Real r_subclavian_vein_L134(unit = "m") = 0.56e-2;
            parameter Real r_axillary_vein_L136(unit = "m") = 0.56e-2;
            parameter Real r_brachial_vein_L138(unit = "m") = 0.185e-2;
            parameter Real r_brachial_vein_L148(unit = "m") = 0.17e-2;
            parameter Real r_venous_perforator_T2_L140(unit = "m") = 0.185e-2;
            parameter Real r_brachial_vein_L142(unit = "m") = 0.185e-2;
            parameter Real r_ulnar_vein_T7_L144(unit = "m") = 0.085e-2;
            parameter Real r_brachial_vein_L146(unit = "m") = 0.185e-2;
            parameter Real r_venous_perforator_T1_L150(unit = "m") = 0.17e-2;
            parameter Real r_brachial_vein_L152(unit = "m") = 0.17e-2;
            parameter Real r_radial_vein_T3_L154(unit = "m") = 0.0665e-2;
            parameter Real h_superior_vena_cava_C2(unit = "m") = 0.11778e-2;
            parameter Real h_azygos_vein_T1_C4(unit = "m") = 0.06384e-2;
            parameter Real h_superior_vena_cava_C88(unit = "m") = 0.11778e-2;
            parameter Real h_azygos_vein_T1_C86(unit = "m") = 0.06384e-2;
            parameter Real h_inferior_vena_cava_C8(unit = "m") = 0.11974e-2;
            parameter Real h_hepatic_vein_T1_C10(unit = "m") = 0.09111e-2;
            parameter Real h_inferior_vena_cava_C12(unit = "m") = 0.11899e-2;
            parameter Real h_venous_perforator_T2_C14(unit = "m") = 0.0736e-2;
            parameter Real h_inferior_vena_cava_C16(unit = "m") = 0.11513e-2;
            parameter Real h_renal_vein_T1_R18(unit = "m") = 0.08241e-2;
            parameter Real h_inferior_vena_cava_C20(unit = "m") = 0.11513e-2;
            parameter Real h_renal_vein_T1_L22(unit = "m") = 0.07806e-2;
            parameter Real h_inferior_vena_cava_C24(unit = "m") = 0.11501e-2;
            parameter Real h_common_iliac_vein_L56(unit = "m") = 0.0852e-2;
            parameter Real h_common_iliac_vein_R26(unit = "m") = 0.0852e-2;
            parameter Real h_external_iliac_vein_R28(unit = "m") = 0.08508e-2;
            parameter Real h_internal_iliac_vein_T1_R30(unit = "m") = 0.07306e-2;
            parameter Real h_external_iliac_vein_R32(unit = "m") = 0.08508e-2;
            parameter Real h_femoral_vein_R34(unit = "m") = 0.07962e-2;
            parameter Real h_great_saphenous_vein_T7_R36(unit = "m") = 0.04381e-2;
            parameter Real h_femoral_vein_R38(unit = "m") = 0.07962e-2;
            parameter Real h_profunda_femoris_vein_T2_R40(unit = "m") = 0.0655e-2;
            parameter Real h_femoral_vein_R42(unit = "m") = 0.07962e-2;
            parameter Real h_venous_perforator_T3_R44(unit = "m") = 0.0463e-2;
            parameter Real h_femoral_vein_R46(unit = "m") = 0.07962e-2;
            parameter Real h_popliteal_vein_R48(unit = "m") = 0.06392e-2;
            parameter Real h_anterior_tibial_vein_T4_R50(unit = "m") = 0.03354e-2;
            parameter Real h_popliteal_vein_R52(unit = "m") = 0.06392e-2;
            parameter Real h_posterior_tibial_vein_T6_R54(unit = "m") = 0.04226e-2;
            parameter Real h_external_iliac_vein_L58(unit = "m") = 0.08508e-2;
            parameter Real h_internal_iliac_vein_T1_L60(unit = "m") = 0.07306e-2;
            parameter Real h_external_iliac_vein_L62(unit = "m") = 0.08508e-2;
            parameter Real h_femoral_vein_L64(unit = "m") = 0.07962e-2;
            parameter Real h_great_saphenous_vein_T7_L66(unit = "m") = 0.04381e-2;
            parameter Real h_femoral_vein_L68(unit = "m") = 0.07962e-2;
            parameter Real h_profunda_femoris_vein_T2_L70(unit = "m") = 0.0655e-2;
            parameter Real h_femoral_vein_L72(unit = "m") = 0.07962e-2;
            parameter Real h_venous_perforator_T3_L74(unit = "m") = 0.07962e-2;
            parameter Real h_femoral_vein_L76(unit = "m") = 0.07962e-2;
            parameter Real h_popliteal_vein_L78(unit = "m") = 0.06392e-2;
            parameter Real h_anterior_tibial_vein_T4_L80(unit = "m") = 0.03354e-2;
            parameter Real h_popliteal_vein_L82(unit = "m") = 0.06392e-2;
            parameter Real h_posterior_tibial_vein_T6_L84(unit = "m") = 0.04226e-2;
            parameter Real h_brachiocephalic_vein_R90(unit = "m") = 0.10082e-2;
            parameter Real h_brachiocephalic_vein_L124(unit = "m") = 0.09609e-2;
            parameter Real h_vertebral_vein_R92(unit = "m") = 0.05402e-2;
            parameter Real h_brachiocephalic_vein_R94(unit = "m") = 0.10082e-2;
            parameter Real h_subclavian_vein_R96(unit = "m") = 0.07892e-2;
            parameter Real h_internal_jugular_vein_R122(unit = "m") = 0.09609e-2;
            parameter Real h_external_jugular_vein_R98(unit = "m") = 0.04928e-2;
            parameter Real h_subclavian_vein_R100(unit = "m") = 0.07892e-2;
            parameter Real h_axillary_vein_R102(unit = "m") = 0.07892e-2;
            parameter Real h_brachial_vein_R104(unit = "m") = 0.04435e-2;
            parameter Real h_brachial_vein_R114(unit = "m") = 0.04226e-2;
            parameter Real h_venous_perforator_T2_R106(unit = "m") = 0.04226e-2;
            parameter Real h_brachial_vein_R108(unit = "m") = 0.04435e-2;
            parameter Real h_ulnar_vein_T7_R110(unit = "m") = 0.02665e-2;
            parameter Real h_brachial_vein_R112(unit = "m") = 0.04435e-2;
            parameter Real h_venous_perforator_T1_R116(unit = "m") = 0.04435e-2;
            parameter Real h_brachial_vein_R118(unit = "m") = 0.04226e-2;
            parameter Real h_radial_vein_T3_R120(unit = "m") = 0.02206e-2;
            parameter Real h_vertebral_vein_L126(unit = "m") = 0.05402e-2;
            parameter Real h_brachiocephalic_vein_L128(unit = "m") = 0.09609e-2;
            parameter Real h_subclavian_vein_L130(unit = "m") = 0.07892e-2;
            parameter Real h_internal_jugular_vein_L156(unit = "m") = 0.08241e-2;
            parameter Real h_external_jugular_vein_L132(unit = "m") = 0.04928e-2;
            parameter Real h_subclavian_vein_L134(unit = "m") = 0.07892e-2;
            parameter Real h_axillary_vein_L136(unit = "m") = 0.07892e-2;
            parameter Real h_brachial_vein_L138(unit = "m") = 0.04435e-2;
            parameter Real h_brachial_vein_L148(unit = "m") = 0.04226e-2;
            parameter Real h_venous_perforator_T2_L140(unit = "m") = 0.04435e-2;
            parameter Real h_brachial_vein_L142(unit = "m") = 0.04435e-2;
            parameter Real h_ulnar_vein_T7_L144(unit = "m") = 0.02665e-2;
            parameter Real h_brachial_vein_L146(unit = "m") = 0.04435e-2;
            parameter Real h_venous_perforator_T1_L150(unit = "m") = 0.04226e-2;
            parameter Real h_brachial_vein_L152(unit = "m") = 0.04226e-2;
            parameter Real h_radial_vein_T3_L154(unit = "m") = 0.02206e-2;
            parameter Real l_superior_vena_cava_C2(unit = "m") = 1.19864e-2;
            parameter Real l_azygos_vein_T1_C4(unit = "m") = 24.1235e-2;
            parameter Real l_superior_vena_cava_C88(unit = "m") = 2.06549e-2;
            parameter Real l_azygos_vein_T1_C86(unit = "m") = 4.16471e-2;
            parameter Real l_inferior_vena_cava_C8(unit = "m") = 1.72606e-2;
            parameter Real l_hepatic_vein_T1_C10(unit = "m") = 1.38104e-2;
            parameter Real l_inferior_vena_cava_C12(unit = "m") = 4.75594e-2;
            parameter Real l_venous_perforator_T2_C14(unit = "m") = 1.61605e-2;
            parameter Real l_inferior_vena_cava_C16(unit = "m") = 4.05694e-2;
            parameter Real l_renal_vein_T1_R18(unit = "m") = 2.98282e-2;
            parameter Real l_inferior_vena_cava_C20(unit = "m") = 0.283038e-2;
            parameter Real l_renal_vein_T1_L22(unit = "m") = 3.13626e-2;
            parameter Real l_inferior_vena_cava_C24(unit = "m") = 11.3168e-2;
            parameter Real l_common_iliac_vein_L56(unit = "m") = 6.24014e-2;
            parameter Real l_common_iliac_vein_R26(unit = "m") = 5.73581e-2;
            parameter Real l_external_iliac_vein_R28(unit = "m") = 0.840236e-2;
            parameter Real l_internal_iliac_vein_T1_R30(unit = "m") = 5.91456e-2;
            parameter Real l_external_iliac_vein_R32(unit = "m") = 9.74495e-2;
            parameter Real l_femoral_vein_R34(unit = "m") = 0.521142e-2;
            parameter Real l_great_saphenous_vein_T7_R36(unit = "m") = 92.6589e-2;
            parameter Real l_femoral_vein_R38(unit = "m") = 4.13055e-2;
            parameter Real l_profunda_femoris_vein_T2_R40(unit = "m") = 22.9655e-2;
            parameter Real l_femoral_vein_R42(unit = "m") = 29.2094e-2;
            parameter Real l_venous_perforator_T3_R44(unit = "m") = 1.01988e-2;
            parameter Real l_femoral_vein_R46(unit = "m") = 1.60864e-2;
            parameter Real l_popliteal_vein_R48(unit = "m") = 14.5387e-2;
            parameter Real l_anterior_tibial_vein_T4_R50(unit = "m") = 38.09e-2;
            parameter Real l_popliteal_vein_R52(unit = "m") = 3.2338e-2;
            parameter Real l_posterior_tibial_vein_T6_R54(unit = "m") = 30.5697e-2;
            parameter Real l_external_iliac_vein_L58(unit = "m") = 0.841264e-2;
            parameter Real l_internal_iliac_vein_T1_L60(unit = "m") = 6.08336e-2;
            parameter Real l_external_iliac_vein_L62(unit = "m") = 9.56715e-2;
            parameter Real l_femoral_vein_L64(unit = "m") = 0.609248e-2;
            parameter Real l_great_saphenous_vein_T7_L66(unit = "m") = 92.6588e-2;
            parameter Real l_femoral_vein_L68(unit = "m") = 4.13055e-2;
            parameter Real l_profunda_femoris_vein_T2_L70(unit = "m") = 22.9654e-2;
            parameter Real l_femoral_vein_L72(unit = "m") = 29.2094e-2;
            parameter Real l_venous_perforator_T3_L74(unit = "m") = 1.01987e-2;
            parameter Real l_femoral_vein_L76(unit = "m") = 1.60863e-2;
            parameter Real l_popliteal_vein_L78(unit = "m") = 14.5387e-2;
            parameter Real l_anterior_tibial_vein_T4_L80(unit = "m") = 38.09e-2;
            parameter Real l_popliteal_vein_L82(unit = "m") = 3.23382e-2;
            parameter Real l_posterior_tibial_vein_T6_L84(unit = "m") = 30.5698e-2;
            parameter Real l_brachiocephalic_vein_R90(unit = "m") = 3.60711e-2;
            parameter Real l_brachiocephalic_vein_L124(unit = "m") = 7.69083e-2;
            parameter Real l_vertebral_vein_R92(unit = "m") = 19.7909e-2;
            parameter Real l_brachiocephalic_vein_R94(unit = "m") = 0.817729e-2;
            parameter Real l_subclavian_vein_R96(unit = "m") = 0.811432e-2;
            parameter Real l_internal_jugular_vein_R122(unit = "m") = 17.8797e-2;
            parameter Real l_external_jugular_vein_R98(unit = "m") = 13.807e-2;
            parameter Real l_subclavian_vein_R100(unit = "m") = 3.31851e-2;
            parameter Real l_axillary_vein_R102(unit = "m") = 11.6597e-2;
            parameter Real l_brachial_vein_R104(unit = "m") = 20.4344e-2;
            parameter Real l_brachial_vein_R114(unit = "m") = 21.6418e-2;
            parameter Real l_venous_perforator_T2_R106(unit = "m") = 1.64071e-2;
            parameter Real l_brachial_vein_R108(unit = "m") = 2.81322e-2;
            parameter Real l_ulnar_vein_T7_R110(unit = "m") = 26.5376e-2;
            parameter Real l_brachial_vein_R112(unit = "m") = 1.06711e-2;
            parameter Real l_venous_perforator_T1_R116(unit = "m") = 1.56083e-2;
            parameter Real l_brachial_vein_R118(unit = "m") = 2.085e-2;
            parameter Real l_radial_vein_T3_R120(unit = "m") = 25.8545e-2;
            parameter Real l_vertebral_vein_L126(unit = "m") = 18.5123e-2;
            parameter Real l_brachiocephalic_vein_L128(unit = "m") = 0.470158e-2;
            parameter Real l_subclavian_vein_L130(unit = "m") = 0.721557e-2;
            parameter Real l_internal_jugular_vein_L156(unit = "m") = 16.9554e-2;
            parameter Real l_external_jugular_vein_L132(unit = "m") = 13.5402e-2;
            parameter Real l_subclavian_vein_L134(unit = "m") = 3.23403e-2;
            parameter Real l_axillary_vein_L136(unit = "m") = 11.7916e-2;
            parameter Real l_brachial_vein_L138(unit = "m") = 20.4344e-2;
            parameter Real l_brachial_vein_L148(unit = "m") = 21.6418e-2;
            parameter Real l_venous_perforator_T2_L140(unit = "m") = 1.64073e-2;
            parameter Real l_brachial_vein_L142(unit = "m") = 2.81325e-2;
            parameter Real l_ulnar_vein_T7_L144(unit = "m") = 26.5376e-2;
            parameter Real l_brachial_vein_L146(unit = "m") = 1.06711e-2;
            parameter Real l_venous_perforator_T1_L150(unit = "m") = 1.56083e-2;
            parameter Real l_brachial_vein_L152(unit = "m") = 2.085e-2;
            parameter Real l_radial_vein_T3_L154(unit = "m") = 25.8545e-2;
            parameter Real C_superior_vena_cava_C2(unit = "m6.J-1") = 0.555603e-10;
            parameter Real C_azygos_vein_T1_C4(unit = "m6.J-1") = 1.22148e-10;
            parameter Real C_superior_vena_cava_C88(unit = "m6.J-1") = 0.957416e-10;
            parameter Real C_azygos_vein_T1_C86(unit = "m6.J-1") = 0.210878e-10;
            parameter Real C_inferior_vena_cava_C8(unit = "m6.J-1") = 0.829339e-10;
            parameter Real C_hepatic_vein_T1_C10(unit = "m6.J-1") = 0.30168e-10;
            parameter Real C_inferior_vena_cava_C12(unit = "m6.J-1") = 2.21275e-10;
            parameter Real C_venous_perforator_T2_C14(unit = "m6.J-1") = 0.159254e-10;
            parameter Real C_inferior_vena_cava_C16(unit = "m6.J-1") = 1.80509e-10;
            parameter Real C_renal_vein_T1_R18(unit = "m6.J-1") = 0.460512e-10;
            parameter Real C_inferior_vena_cava_C20(unit = "m6.J-1") = 0.123145e-10;
            parameter Real C_renal_vein_T1_L22(unit = "m6.J-1") = 0.393746e-10;
            parameter Real C_inferior_vena_cava_C24(unit = "m6.J-1") = 4.63354e-10;
            parameter Real C_common_iliac_vein_L56(unit = "m6.J-1") = 1.08597e-10;
            parameter Real C_common_iliac_vein_R26(unit = "m6.J-1") = 0.998205e-10;
            parameter Real C_external_iliac_vein_R28(unit = "m6.J-1") = 0.14547e-10;
            parameter Real C_internal_iliac_vein_T1_R30(unit = "m6.J-1") = 0.564484e-10;
            parameter Real C_external_iliac_vein_R32(unit = "m6.J-1") = 1.68715e-10;
            parameter Real C_femoral_vein_R34(unit = "m6.J-1") = 0.0706573e-10;
            parameter Real C_great_saphenous_vein_T7_R36(unit = "m6.J-1") = 0.738807e-10;
            parameter Real C_femoral_vein_R38(unit = "m6.J-1") = 0.56e-10;
            parameter Real C_profunda_femoris_vein_T2_R40(unit = "m6.J-1") = 1.32176e-10;
            parameter Real C_femoral_vein_R42(unit = "m6.J-1") = 3.96026e-10;
            parameter Real C_venous_perforator_T3_R44(unit = "m6.J-1") = 0.00550536e-10;
            parameter Real C_femoral_vein_R46(unit = "m6.J-1") = 0.218102e-10;
            parameter Real C_popliteal_vein_R48(unit = "m6.J-1") = 0.741013e-10;
            parameter Real C_anterior_tibial_vein_T4_R50(unit = "m6.J-1") = 0.108531e-10;
            parameter Real C_popliteal_vein_R52(unit = "m6.J-1") = 0.164821e-10;
            parameter Real C_posterior_tibial_vein_T6_R54(unit = "m6.J-1") = 0.209333e-10;
            parameter Real C_external_iliac_vein_L58(unit = "m6.J-1") = 0.145648e-10;
            parameter Real C_internal_iliac_vein_T1_L60(unit = "m6.J-1") = 0.580595e-10;
            parameter Real C_external_iliac_vein_L62(unit = "m6.J-1") = 1.65636e-10;
            parameter Real C_femoral_vein_L64(unit = "m6.J-1") = 0.0826029e-10;
            parameter Real C_great_saphenous_vein_T7_L66(unit = "m6.J-1") = 0.738807e-10;
            parameter Real C_femoral_vein_L68(unit = "m6.J-1") = 0.560026e-10;
            parameter Real C_profunda_femoris_vein_T2_L70(unit = "m6.J-1") = 1.32176e-10;
            parameter Real C_femoral_vein_L72(unit = "m6.J-1") = 3.96026e-10;
            parameter Real C_venous_perforator_T3_L74(unit = "m6.J-1") = 0.138275e-10;
            parameter Real C_femoral_vein_L76(unit = "m6.J-1") = 0.218101e-10;
            parameter Real C_popliteal_vein_L78(unit = "m6.J-1") = 0.741013e-10;
            parameter Real C_anterior_tibial_vein_T4_L80(unit = "m6.J-1") = 0.108531e-10;
            parameter Real C_popliteal_vein_L82(unit = "m6.J-1") = 0.164822e-10;
            parameter Real C_posterior_tibial_vein_T6_L84(unit = "m6.J-1") = 0.209333e-10;
            parameter Real C_brachiocephalic_vein_R90(unit = "m6.J-1") = 1.07899e-10;
            parameter Real C_brachiocephalic_vein_L124(unit = "m6.J-1") = 1.98898e-10;
            parameter Real C_vertebral_vein_R92(unit = "m6.J-1") = 0.424745e-10;
            parameter Real C_brachiocephalic_vein_R94(unit = "m6.J-1") = 0.244606e-10;
            parameter Real C_subclavian_vein_R96(unit = "m6.J-1") = 0.106357e-10;
            parameter Real C_internal_jugular_vein_R122(unit = "m6.J-1") = 3.36401e-10;
            parameter Real C_external_jugular_vein_R98(unit = "m6.J-1") = 0.187997e-10;
            parameter Real C_subclavian_vein_R100(unit = "m6.J-1") = 0.434967e-10;
            parameter Real C_axillary_vein_R102(unit = "m6.J-1") = 1.52827e-10;
            parameter Real C_brachial_vein_R104(unit = "m6.J-1") = 0.171851e-10;
            parameter Real C_brachial_vein_R114(unit = "m6.J-1") = 0.148197e-10;
            parameter Real C_venous_perforator_T2_R106(unit = "m6.J-1") = 0.0112351e-10;
            parameter Real C_brachial_vein_R108(unit = "m6.J-1") = 0.0236588e-10;
            parameter Real C_ulnar_vein_T7_R110(unit = "m6.J-1") = 0.0360248e-10;
            parameter Real C_brachial_vein_R112(unit = "m6.J-1") = 0.00897427e-10;
            parameter Real C_venous_perforator_T1_R116(unit = "m6.J-1") = 0.0131264e-10;
            parameter Real C_brachial_vein_R118(unit = "m6.J-1") = 0.0142775e-10;
            parameter Real C_radial_vein_T3_R120(unit = "m6.J-1") = 0.0203056e-10;
            parameter Real C_vertebral_vein_L126(unit = "m6.J-1") = 0.397304e-10;
            parameter Real C_brachiocephalic_vein_L128(unit = "m6.J-1") = 0.121591e-10;
            parameter Real C_subclavian_vein_L130(unit = "m6.J-1") = 0.0945766e-10;
            parameter Real C_internal_jugular_vein_L156(unit = "m6.J-1") = 1.92288e-10;
            parameter Real C_external_jugular_vein_L132(unit = "m6.J-1") = 0.184364e-10;
            parameter Real C_subclavian_vein_L134(unit = "m6.J-1") = 0.423894e-10;
            parameter Real C_axillary_vein_L136(unit = "m6.J-1") = 1.54556e-10;
            parameter Real C_brachial_vein_L138(unit = "m6.J-1") = 0.171851e-10;
            parameter Real C_brachial_vein_L148(unit = "m6.J-1") = 0.148197e-10;
            parameter Real C_venous_perforator_T2_L140(unit = "m6.J-1") = 0.0137984e-10;
            parameter Real C_brachial_vein_L142(unit = "m6.J-1") = 0.0236591e-10;
            parameter Real C_ulnar_vein_T7_L144(unit = "m6.J-1") = 0.0360249e-10;
            parameter Real C_brachial_vein_L146(unit = "m6.J-1") = 0.00897427e-10;
            parameter Real C_venous_perforator_T1_L150(unit = "m6.J-1") = 0.0106881e-10;
            parameter Real C_brachial_vein_L152(unit = "m6.J-1") = 0.0142775e-10;
            parameter Real C_radial_vein_T3_L154(unit = "m6.J-1") = 0.0203056e-10;
            parameter Real E_superior_vena_cava_C2(unit = "Pa") = 0.555603e+6;
            parameter Real E_azygos_vein_T1_C4(unit = "Pa") = 1.22148e+6;
            parameter Real E_superior_vena_cava_C88(unit = "Pa") = 0.957416e+6;
            parameter Real E_azygos_vein_T1_C86(unit = "Pa") = 0.210878e+6;
            parameter Real E_inferior_vena_cava_C8(unit = "Pa") = 0.829339e+6;
            parameter Real E_hepatic_vein_T1_C10(unit = "Pa") = 0.30168e+6;
            parameter Real E_inferior_vena_cava_C12(unit = "Pa") = 2.21275e+6;
            parameter Real E_venous_perforator_T2_C14(unit = "Pa") = 0.159254e+6;
            parameter Real E_inferior_vena_cava_C16(unit = "Pa") = 1.80509e+6;
            parameter Real E_renal_vein_T1_R18(unit = "Pa") = 0.460512e+6;
            parameter Real E_inferior_vena_cava_C20(unit = "Pa") = 0.123145e+6;
            parameter Real E_renal_vein_T1_L22(unit = "Pa") = 0.393746e+6;
            parameter Real E_inferior_vena_cava_C24(unit = "Pa") = 4.63354e+6;
            parameter Real E_common_iliac_vein_L56(unit = "Pa") = 1.08597e+6;
            parameter Real E_common_iliac_vein_R26(unit = "Pa") = 0.998205e+6;
            parameter Real E_external_iliac_vein_R28(unit = "Pa") = 0.14547e+6;
            parameter Real E_internal_iliac_vein_T1_R30(unit = "Pa") = 0.564484e+6;
            parameter Real E_external_iliac_vein_R32(unit = "Pa") = 1.68715e+6;
            parameter Real E_femoral_vein_R34(unit = "Pa") = 0.0706573e+6;
            parameter Real E_great_saphenous_vein_T7_R36(unit = "Pa") = 0.738807e+6;
            parameter Real E_femoral_vein_R38(unit = "Pa") = 0.56e+6;
            parameter Real E_profunda_femoris_vein_T2_R40(unit = "Pa") = 1.32176e+6;
            parameter Real E_femoral_vein_R42(unit = "Pa") = 3.96026e+6;
            parameter Real E_venous_perforator_T3_R44(unit = "Pa") = 0.00550536e+6;
            parameter Real E_femoral_vein_R46(unit = "Pa") = 0.218102e+6;
            parameter Real E_popliteal_vein_R48(unit = "Pa") = 0.741013e+6;
            parameter Real E_anterior_tibial_vein_T4_R50(unit = "Pa") = 0.108531e+6;
            parameter Real E_popliteal_vein_R52(unit = "Pa") = 0.164821e+6;
            parameter Real E_posterior_tibial_vein_T6_R54(unit = "Pa") = 0.209333e+6;
            parameter Real E_external_iliac_vein_L58(unit = "Pa") = 0.145648e+6;
            parameter Real E_internal_iliac_vein_T1_L60(unit = "Pa") = 0.580595e+6;
            parameter Real E_external_iliac_vein_L62(unit = "Pa") = 1.65636e+6;
            parameter Real E_femoral_vein_L64(unit = "Pa") = 0.0826029e+6;
            parameter Real E_great_saphenous_vein_T7_L66(unit = "Pa") = 0.738807e+6;
            parameter Real E_femoral_vein_L68(unit = "Pa") = 0.560026e+6;
            parameter Real E_profunda_femoris_vein_T2_L70(unit = "Pa") = 1.32176e+6;
            parameter Real E_femoral_vein_L72(unit = "Pa") = 3.96026e+6;
            parameter Real E_venous_perforator_T3_L74(unit = "Pa") = 0.138275e+6;
            parameter Real E_femoral_vein_L76(unit = "Pa") = 0.218101e+6;
            parameter Real E_popliteal_vein_L78(unit = "Pa") = 0.741013e+6;
            parameter Real E_anterior_tibial_vein_T4_L80(unit = "Pa") = 0.108531e+6;
            parameter Real E_popliteal_vein_L82(unit = "Pa") = 0.164822e+6;
            parameter Real E_posterior_tibial_vein_T6_L84(unit = "Pa") = 0.209333e+6;
            parameter Real E_brachiocephalic_vein_R90(unit = "Pa") = 1.07899e+6;
            parameter Real E_brachiocephalic_vein_L124(unit = "Pa") = 1.98898e+6;
            parameter Real E_vertebral_vein_R92(unit = "Pa") = 0.424745e+6;
            parameter Real E_brachiocephalic_vein_R94(unit = "Pa") = 0.244606e+6;
            parameter Real E_subclavian_vein_R96(unit = "Pa") = 0.106357e+6;
            parameter Real E_internal_jugular_vein_R122(unit = "Pa") = 3.36401e+6;
            parameter Real E_external_jugular_vein_R98(unit = "Pa") = 0.187997e+6;
            parameter Real E_subclavian_vein_R100(unit = "Pa") = 0.434967e+6;
            parameter Real E_axillary_vein_R102(unit = "Pa") = 1.52827e+6;
            parameter Real E_brachial_vein_R104(unit = "Pa") = 0.171851e+6;
            parameter Real E_brachial_vein_R114(unit = "Pa") = 0.148197e+6;
            parameter Real E_venous_perforator_T2_R106(unit = "Pa") = 0.0112351e+6;
            parameter Real E_brachial_vein_R108(unit = "Pa") = 0.0236588e+6;
            parameter Real E_ulnar_vein_T7_R110(unit = "Pa") = 0.0360248e+6;
            parameter Real E_brachial_vein_R112(unit = "Pa") = 0.00897427e+6;
            parameter Real E_venous_perforator_T1_R116(unit = "Pa") = 0.0131264e+6;
            parameter Real E_brachial_vein_R118(unit = "Pa") = 0.0142775e+6;
            parameter Real E_radial_vein_T3_R120(unit = "Pa") = 0.0203056e+6;
            parameter Real E_vertebral_vein_L126(unit = "Pa") = 0.397304e+6;
            parameter Real E_brachiocephalic_vein_L128(unit = "Pa") = 0.121591e+6;
            parameter Real E_subclavian_vein_L130(unit = "Pa") = 0.0945766e+6;
            parameter Real E_internal_jugular_vein_L156(unit = "Pa") = 1.92288e+6;
            parameter Real E_external_jugular_vein_L132(unit = "Pa") = 0.184364e+6;
            parameter Real E_subclavian_vein_L134(unit = "Pa") = 0.423894e+6;
            parameter Real E_axillary_vein_L136(unit = "Pa") = 1.54556e+6;
            parameter Real E_brachial_vein_L138(unit = "Pa") = 0.171851e+6;
            parameter Real E_brachial_vein_L148(unit = "Pa") = 0.148197e+6;
            parameter Real E_venous_perforator_T2_L140(unit = "Pa") = 0.0137984e+6;
            parameter Real E_brachial_vein_L142(unit = "Pa") = 0.0236591e+6;
            parameter Real E_ulnar_vein_T7_L144(unit = "Pa") = 0.0360249e+6;
            parameter Real E_brachial_vein_L146(unit = "Pa") = 0.00897427e+6;
            parameter Real E_venous_perforator_T1_L150(unit = "Pa") = 0.0106881e+6;
            parameter Real E_brachial_vein_L152(unit = "Pa") = 0.0142775e+6;
            parameter Real E_radial_vein_T3_L154(unit = "Pa") = 0.0203056e+6;
          equation

          end Parameters_Venous;

           record TerminalsParameters
             parameter Physiolibrary.Types.HydraulicResistance RTA_posterior_intercostal_T1_R98 = 121720922531.92276;
             parameter Physiolibrary.Types.HydraulicResistance RTV_posterior_intercostal_T1_R98 = 25060181492.24913;
             parameter Physiolibrary.Types.HydraulicCompliance CT_posterior_intercostal_T1_R98 = 1.3469354009484192e-10;
             parameter Physiolibrary.Types.HydraulicResistance RTA_posterior_intercostal_T1_L102 = 124885209048.07748;
             parameter Physiolibrary.Types.HydraulicResistance RTV_posterior_intercostal_T1_L102 = 25699846065.499233;
             parameter Physiolibrary.Types.HydraulicCompliance CT_posterior_intercostal_T1_L102 = 1.3134104196606998e-10;
             parameter Physiolibrary.Types.HydraulicResistance RTA_posterior_intercostal_T2_R106 = 113584341798.4081;
             parameter Physiolibrary.Types.HydraulicResistance RTV_posterior_intercostal_T2_R106 = 23361271821.129253;
             parameter Physiolibrary.Types.HydraulicCompliance CT_posterior_intercostal_T2_R106 = 1.444889039627256e-10;
             parameter Physiolibrary.Types.HydraulicResistance RTA_posterior_intercostal_T2_L110 = 114562220382.26729;
             parameter Physiolibrary.Types.HydraulicResistance RTV_posterior_intercostal_T2_L110 = 23556696023.29988;
             parameter Physiolibrary.Types.HydraulicCompliance CT_posterior_intercostal_T2_L110 = 1.4329023719080247e-10;
             parameter Physiolibrary.Types.HydraulicResistance RTA_left_gastric_T3_C120 = 167778061735.74564;
             parameter Physiolibrary.Types.HydraulicResistance RTV_left_gastric_T3_C120 = 34542530237.561066;
             parameter Physiolibrary.Types.HydraulicCompliance CT_left_gastric_T3_C120 = 9.771850925210632e-11;
             parameter Physiolibrary.Types.HydraulicResistance RTA_dorsal_pancreatic_T1_C124 = 89050359615.23083;
             parameter Physiolibrary.Types.HydraulicResistance RTV_dorsal_pancreatic_T1_C124 = 19068392425.122166;
             parameter Physiolibrary.Types.HydraulicCompliance CT_dorsal_pancreatic_T1_C124 = 1.7701778342694492e-10;
             parameter Physiolibrary.Types.HydraulicResistance RTA_splenic_T2_C126 = 2306881525.3565836;
             parameter Physiolibrary.Types.HydraulicResistance RTV_splenic_T2_C126 = 481903444.4561611;
             parameter Physiolibrary.Types.HydraulicCompliance CT_splenic_T2_C126 = 7.004400154100451e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_hepatic_artery_proper_left_branch_C132 = 4421342380.770758;
             parameter Physiolibrary.Types.HydraulicResistance RTV_hepatic_artery_proper_left_branch_C132 = 1117422336.7568448;
             parameter Physiolibrary.Types.HydraulicCompliance CT_hepatic_artery_proper_left_branch_C132 = 3.0207419787284805e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_hepatic_artery_proper_right_branch_C134 = 2498250419.792075;
             parameter Physiolibrary.Types.HydraulicResistance RTV_hepatic_artery_proper_right_branch_C134 = 566212328.784714;
             parameter Physiolibrary.Types.HydraulicCompliance CT_hepatic_artery_proper_right_branch_C134 = 5.961446596995046e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_middle_colic_T8_C140 = 14432127125.7224;
             parameter Physiolibrary.Types.HydraulicResistance RTV_middle_colic_T8_C140 = 3030771823.157145;
             parameter Physiolibrary.Types.HydraulicCompliance CT_middle_colic_T8_C140 = 1.113724410006585e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_jejunal_3_T10_C144 = 10598904602.39022;
             parameter Physiolibrary.Types.HydraulicResistance RTV_jejunal_3_T10_C144 = 2203449352.504899;
             parameter Physiolibrary.Types.HydraulicCompliance CT_jejunal_3_T10_C144 = 1.5318911491081201e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_jejunal_6_T11_C148 = 10589180379.640747;
             parameter Physiolibrary.Types.HydraulicResistance RTV_jejunal_6_T11_C148 = 2213175206.5354366;
             parameter Physiolibrary.Types.HydraulicCompliance CT_jejunal_6_T11_C148 = 1.5251592149788646e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_ileocolic_T9_C152 = 5226625953.727648;
             parameter Physiolibrary.Types.HydraulicResistance RTV_ileocolic_T9_C152 = 1089801701.9209597;
             parameter Physiolibrary.Types.HydraulicCompliance CT_ileocolic_T9_C152 = 3.0973016051089675e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_ileal_4_T12_C156 = 7148492367.897767;
             parameter Physiolibrary.Types.HydraulicResistance RTV_ileal_4_T12_C156 = 1494489240.3647008;
             parameter Physiolibrary.Types.HydraulicCompliance CT_ileal_4_T12_C156 = 2.2585940864897507e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_ileal_6_T13_C160 = 7148908645.38848;
             parameter Physiolibrary.Types.HydraulicResistance RTV_ileal_6_T13_C160 = 1494073025.1843982;
             parameter Physiolibrary.Types.HydraulicCompliance CT_ileal_6_T13_C160 = 2.259223280062684e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_superior_mesenteric_T4_C162 = 4735554193.57238;
             parameter Physiolibrary.Types.HydraulicResistance RTV_superior_mesenteric_T4_C162 = 989501454.7643749;
             parameter Physiolibrary.Types.HydraulicCompliance CT_superior_mesenteric_T4_C162 = 3.411257804986301e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_inferior_segmental_T5_L170 = 2828879674.5256824;
             parameter Physiolibrary.Types.HydraulicResistance RTV_inferior_segmental_T5_L170 = 590617600.061511;
             parameter Physiolibrary.Types.HydraulicCompliance CT_inferior_segmental_T5_L170 = 5.715110014091573e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_superior_segmental_T4_L172 = 2830288745.7780023;
             parameter Physiolibrary.Types.HydraulicResistance RTV_superior_segmental_T4_L172 = 589208416.2083919;
             parameter Physiolibrary.Types.HydraulicCompliance CT_superior_segmental_T4_L172 = 5.728778591337096e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_renal_posterior_branch_T3_L174 = 5012958859.420983;
             parameter Physiolibrary.Types.HydraulicResistance RTV_renal_posterior_branch_T3_L174 = 1040741079.3862787;
             parameter Physiolibrary.Types.HydraulicCompliance CT_renal_posterior_branch_T3_L174 = 3.2433086648225327e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_superior_segmental_T4_R182 = 2839319452.86548;
             parameter Physiolibrary.Types.HydraulicResistance RTV_superior_segmental_T4_R182 = 591657661.438945;
             parameter Physiolibrary.Types.HydraulicCompliance CT_superior_segmental_T4_R182 = 5.705063553814212e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_inferior_segmental_T5_R184 = 2837909280.100614;
             parameter Physiolibrary.Types.HydraulicResistance RTV_inferior_segmental_T5_R184 = 593067964.3221778;
             parameter Physiolibrary.Types.HydraulicCompliance CT_inferior_segmental_T5_R184 = 5.691497035197469e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_renal_posterior_branch_T3_R186 = 5028951534.910597;
             parameter Physiolibrary.Types.HydraulicResistance RTV_renal_posterior_branch_T3_R186 = 1045075538.8807153;
             parameter Physiolibrary.Types.HydraulicCompliance CT_renal_posterior_branch_T3_R186 = 3.2298570151449554e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_inferior_mesenteric_T5_C190 = 11678059311.85916;
             parameter Physiolibrary.Types.HydraulicResistance RTV_inferior_mesenteric_T5_C190 = 2410960472.8398743;
             parameter Physiolibrary.Types.HydraulicCompliance CT_inferior_mesenteric_T5_C190 = 1.4000414352021008e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_internal_iliac_T1_R218 = 2022787388.8628135;
             parameter Physiolibrary.Types.HydraulicResistance RTV_internal_iliac_T1_R218 = 419709881.5699387;
             parameter Physiolibrary.Types.HydraulicCompliance CT_internal_iliac_T1_R218 = 8.042328067150364e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_profundus_T2_R224 = 1651499374.5338628;
             parameter Physiolibrary.Types.HydraulicResistance RTV_profundus_T2_R224 = 367573514.07539374;
             parameter Physiolibrary.Types.HydraulicCompliance CT_profundus_T2_R224 = 9.183046197169496e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_anterior_tibial_T3_R230 = 11564579510.136164;
             parameter Physiolibrary.Types.HydraulicResistance RTV_anterior_tibial_T3_R230 = 2885368741.7691307;
             parameter Physiolibrary.Types.HydraulicCompliance CT_anterior_tibial_T3_R230 = 1.169848592225567e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_posterior_tibial_T4_R236 = 9995533741.537657;
             parameter Physiolibrary.Types.HydraulicResistance RTV_posterior_tibial_T4_R236 = 2469549201.60386;
             parameter Physiolibrary.Types.HydraulicCompliance CT_posterior_tibial_T4_R236 = 1.3668262039153039e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_internal_iliac_T1_L196 = 2028858975.301878;
             parameter Physiolibrary.Types.HydraulicResistance RTV_internal_iliac_T1_L196 = 420950991.9275378;
             parameter Physiolibrary.Types.HydraulicCompliance CT_internal_iliac_T1_L196 = 8.018616478735652e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_profundus_T2_L202 = 1652401894.6796947;
             parameter Physiolibrary.Types.HydraulicResistance RTV_profundus_T2_L202 = 367749836.71753293;
             parameter Physiolibrary.Types.HydraulicCompliance CT_profundus_T2_L202 = 9.178643261242118e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_posterior_tibial_T4_L214 = 10000114842.248081;
             parameter Physiolibrary.Types.HydraulicResistance RTV_posterior_tibial_T4_L214 = 2470426938.576158;
             parameter Physiolibrary.Types.HydraulicCompliance CT_posterior_tibial_T4_L214 = 1.366340573729222e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_anterior_tibial_T3_L208 = 11568366422.121117;
             parameter Physiolibrary.Types.HydraulicResistance RTV_anterior_tibial_T3_L208 = 2886065445.010966;
             parameter Physiolibrary.Types.HydraulicCompliance CT_anterior_tibial_T3_L208 = 1.1695661879204019e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_posterior_interosseous_T3_R40 = 23176801733.075615;
             parameter Physiolibrary.Types.HydraulicResistance RTV_posterior_interosseous_T3_R40 = 4993874023.565773;
             parameter Physiolibrary.Types.HydraulicCompliance CT_posterior_interosseous_T3_R40 = 4.382899572440318e-10;
             parameter Physiolibrary.Types.HydraulicResistance RTA_ulnar_T2_R42 = 5972619850.672998;
             parameter Physiolibrary.Types.HydraulicResistance RTV_ulnar_T2_R42 = 949498581.8996296;
             parameter Physiolibrary.Types.HydraulicCompliance CT_ulnar_T2_R42 = 2.3051796748255654e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_radial_T1_R44 = 5846751531.424068;
             parameter Physiolibrary.Types.HydraulicResistance RTV_radial_T1_R44 = 951736406.7160424;
             parameter Physiolibrary.Types.HydraulicCompliance CT_radial_T1_R44 = 2.2997594888936074e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_posterior_interosseous_T3_L88 = 23261323422.01636;
             parameter Physiolibrary.Types.HydraulicResistance RTV_posterior_interosseous_T3_L88 = 5011411222.211492;
             parameter Physiolibrary.Types.HydraulicCompliance CT_posterior_interosseous_T3_L88 = 4.3675618208494197e-10;
             parameter Physiolibrary.Types.HydraulicResistance RTA_ulnar_T2_L90 = 6088935740.334953;
             parameter Physiolibrary.Types.HydraulicResistance RTV_ulnar_T2_L90 = 967285016.8762524;
             parameter Physiolibrary.Types.HydraulicCompliance CT_ulnar_T2_L90 = 2.2627920355254907e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_radial_T1_L92 = 5739100519.964781;
             parameter Physiolibrary.Types.HydraulicResistance RTV_radial_T1_L92 = 937639800.2454276;
             parameter Physiolibrary.Types.HydraulicCompliance CT_radial_T1_L92 = 2.3343343911999186e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_internal_carotid_R8_C = 4869657401.315867;
             parameter Physiolibrary.Types.HydraulicResistance RTV_internal_carotid_R8_C = 663240995.0708315;
             parameter Physiolibrary.Types.HydraulicCompliance CT_internal_carotid_R8_C = 3.300104861637771e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_external_carotid_T2_R26 = 4880180902.653618;
             parameter Physiolibrary.Types.HydraulicResistance RTV_external_carotid_T2_R26 = 652718330.7810677;
             parameter Physiolibrary.Types.HydraulicCompliance CT_external_carotid_T2_R26 = 3.3533068232533995e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_internal_carotid_L50_C = 4886556544.53718;
             parameter Physiolibrary.Types.HydraulicResistance RTV_internal_carotid_L50_C = 665842688.1757467;
             parameter Physiolibrary.Types.HydraulicCompliance CT_internal_carotid_L50_C = 3.287210134074503e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_external_carotid_T2_L62 = 4897084984.91215;
             parameter Physiolibrary.Types.HydraulicResistance RTV_external_carotid_T2_L62 = 655315122.8747339;
             parameter Physiolibrary.Types.HydraulicCompliance CT_external_carotid_T2_L62 = 3.3400188029677365e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_vertebral_L2 = 4821556787.2610655;
             parameter Physiolibrary.Types.HydraulicResistance RTV_vertebral_L2 = 730843503.507177;
             parameter Physiolibrary.Types.HydraulicCompliance CT_vertebral_L2 = 2.9948474902865846e-09;
             parameter Physiolibrary.Types.HydraulicResistance RTA_vertebral_R272 = 4804569234.441906;
             parameter Physiolibrary.Types.HydraulicResistance RTV_vertebral_R272 = 728329394.4737806;
             parameter Physiolibrary.Types.HydraulicCompliance CT_vertebral_R272 = 3.0051853582706363e-09;
           end TerminalsParameters;
        end Parameters_cellml;

          model arteries_ADAN86
            inner parameter Real periferyModifier = 1.3;

            Physiolibrary.Types.RealIO.PressureInput thoracic_pressure annotation (Placement(
                transformation(extent={{-124,-120},{-84,-80}}),
                                                              iconTransformation(extent={{-124,
                      -120},{-84,-80}})));
            Parameters_cellml.Parameters_Systemic Parameters_Systemic1
              annotation (Placement(transformation(extent={{-100,-79},{-80,-74}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Ascending_aorta
              ascending_aorta_A(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_ascending_aorta_A,
              E=Parameters_Systemic1.E_ascending_aorta_A,
              r=Parameters_Systemic1.r_ascending_aorta_A) annotation (Placement(
                  transformation(extent={{-241,47},{-221,52}})));
            ADAN_main.Components.Obsolete.pv_type_thoracic ascending_aorta_B(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_ascending_aorta_B,
              E=Parameters_Systemic1.E_ascending_aorta_B,
              r=Parameters_Systemic1.r_ascending_aorta_B) annotation (Placement(
                  transformation(extent={{-216,47},{-196,52}})));
            ADAN_main.Components.Obsolete.pv_type_thoracic ascending_aorta_C(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_ascending_aorta_C,
              E=Parameters_Systemic1.E_ascending_aorta_C,
              r=Parameters_Systemic1.r_ascending_aorta_C) annotation (Placement(
                  transformation(extent={{-191,47},{-171,52}})));
            ADAN_main.Components.Obsolete.pv_type_thoracic ascending_aorta_D(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_ascending_aorta_D,
              E=Parameters_Systemic1.E_ascending_aorta_D,
              r=Parameters_Systemic1.r_ascending_aorta_D) annotation (Placement(
                  transformation(extent={{-166,47},{-146,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic aortic_arch_C2(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_aortic_arch_C2,
              E=Parameters_Systemic1.E_aortic_arch_C2,
              r=Parameters_Systemic1.r_aortic_arch_C2) annotation (Placement(
                  transformation(extent={{-141,47},{-121,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              brachiocephalic_trunk_C4(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_brachiocephalic_trunk_C4,
              E=Parameters_Systemic1.E_brachiocephalic_trunk_C4,
              r=Parameters_Systemic1.r_brachiocephalic_trunk_C4) annotation (
                Placement(transformation(extent={{-98,127},{-78,132}})));
            replaceable ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              aortic_arch_C46(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_aortic_arch_C46,
              E=Parameters_Systemic1.E_aortic_arch_C46,
              r=Parameters_Systemic1.r_aortic_arch_C46) annotation (Placement(
                  transformation(extent={{-105,47},{-85,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic aortic_arch_C64(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_aortic_arch_C64,
              E=Parameters_Systemic1.E_aortic_arch_C64,
              r=Parameters_Systemic1.r_aortic_arch_C64) annotation (Placement(
                  transformation(extent={{-78,47},{-58,52}})));
            ADAN_main.Components.Obsolete.pv_type_thoracic aortic_arch_C94(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_aortic_arch_C94,
              E=Parameters_Systemic1.E_aortic_arch_C94,
              r=Parameters_Systemic1.r_aortic_arch_C94) annotation (Placement(
                  transformation(extent={{-49,47},{-29,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              thoracic_aorta_C96(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_thoracic_aorta_C96,
              E=Parameters_Systemic1.E_thoracic_aorta_C96,
              r=Parameters_Systemic1.r_thoracic_aorta_C96)
              annotation (Placement(transformation(extent={{-26,47},{-6,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              thoracic_aorta_C100(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_thoracic_aorta_C100,
              E=Parameters_Systemic1.E_thoracic_aorta_C100,
              r=Parameters_Systemic1.r_thoracic_aorta_C100)
              annotation (Placement(transformation(extent={{3,47},{23,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              thoracic_aorta_C104(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_thoracic_aorta_C104,
              E=Parameters_Systemic1.E_thoracic_aorta_C104,
              r=Parameters_Systemic1.r_thoracic_aorta_C104)
              annotation (Placement(transformation(extent={{28,47},{48,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              thoracic_aorta_C108(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_thoracic_aorta_C108,
              E=Parameters_Systemic1.E_thoracic_aorta_C108,
              r=Parameters_Systemic1.r_thoracic_aorta_C108)
              annotation (Placement(transformation(extent={{53,47},{73,52}})));
            ADAN_main.Components.Obsolete.pv_type_thoracic thoracic_aorta_C112(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_thoracic_aorta_C112,
              E=Parameters_Systemic1.E_thoracic_aorta_C112,
              r=Parameters_Systemic1.r_thoracic_aorta_C112)
              annotation (Placement(transformation(extent={{78,47},{98,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C114(
              l=Parameters_Systemic1.l_abdominal_aorta_C114,
              E=Parameters_Systemic1.E_abdominal_aorta_C114,
              r=Parameters_Systemic1.r_abdominal_aorta_C114) annotation (
                Placement(transformation(extent={{-99,-43},{-79,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C136(
              l=Parameters_Systemic1.l_abdominal_aorta_C136,
              E=Parameters_Systemic1.E_abdominal_aorta_C136,
              r=Parameters_Systemic1.r_abdominal_aorta_C136) annotation (
                Placement(transformation(extent={{-74,-43},{-54,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C164(
              l=Parameters_Systemic1.l_abdominal_aorta_C164,
              E=Parameters_Systemic1.E_abdominal_aorta_C164,
              r=Parameters_Systemic1.r_abdominal_aorta_C164) annotation (
                Placement(transformation(extent={{-47,-43},{-27,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C176(
              l=Parameters_Systemic1.l_abdominal_aorta_C176,
              E=Parameters_Systemic1.E_abdominal_aorta_C176,
              r=Parameters_Systemic1.r_abdominal_aorta_C176) annotation (
                Placement(transformation(extent={{-2,-43},{18,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C188(
              l=Parameters_Systemic1.l_abdominal_aorta_C188,
              E=Parameters_Systemic1.E_abdominal_aorta_C188,
              r=Parameters_Systemic1.r_abdominal_aorta_C188) annotation (
                Placement(transformation(extent={{23,-43},{43,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C192(
              l=Parameters_Systemic1.l_abdominal_aorta_C192,
              E=Parameters_Systemic1.E_abdominal_aorta_C192,
              r=Parameters_Systemic1.r_abdominal_aorta_C192) annotation (
                Placement(transformation(extent={{48,-43},{68,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_intercostal_T1_R98(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_intercostal_T1_R98,
              E=Parameters_Systemic1.E_posterior_intercostal_T1_R98,
              R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_R98,
              C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_R98,
              r=Parameters_Systemic1.r_posterior_intercostal_T1_R98)
              annotation (Placement(transformation(extent={{3,37},{23,42}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_intercostal_T1_L102(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_intercostal_T1_L102,
              E=Parameters_Systemic1.E_posterior_intercostal_T1_L102,
              R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_L102,
              C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_L102,
              r=Parameters_Systemic1.r_posterior_intercostal_T1_L102)
              annotation (Placement(transformation(extent={{28,37},{48,42}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_intercostal_T2_R106(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_intercostal_T2_R106,
              E=Parameters_Systemic1.E_posterior_intercostal_T2_R106,
              R_T=Parameters_Systemic1.R_T_posterior_intercostal_T2_R106,
              C_T=Parameters_Systemic1.C_T_posterior_intercostal_T2_R106,
              r=Parameters_Systemic1.r_posterior_intercostal_T2_R106)
              annotation (Placement(transformation(extent={{51,37},{71,42}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_intercostal_T2_L110(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_intercostal_T2_L110,
              E=Parameters_Systemic1.E_posterior_intercostal_T2_L110,
              R_T=Parameters_Systemic1.R_T_posterior_intercostal_T2_L110,
              C_T=Parameters_Systemic1.C_T_posterior_intercostal_T2_L110,
              r=Parameters_Systemic1.r_posterior_intercostal_T2_L110)
              annotation (Placement(transformation(extent={{78,37},{98,42}})));
            ADAN_main.Components.Obsolete.pv_jII_type celiac_trunk_C116(
              l=Parameters_Systemic1.l_celiac_trunk_C116,
              E=Parameters_Systemic1.E_celiac_trunk_C116,
              r=Parameters_Systemic1.r_celiac_trunk_C116)
              annotation (Placement(transformation(extent={{-71,-3},{-51,2}})));
            ADAN_main.Components.Obsolete.pv_jII_type splenic_T2_C118(
              l=Parameters_Systemic1.l_splenic_T2_C118,
              E=Parameters_Systemic1.E_splenic_T2_C118,
              r=Parameters_Systemic1.r_splenic_T2_C118)
              annotation (Placement(transformation(extent={{-46,-3},{-26,2}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              left_gastric_T3_C120(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_left_gastric_T3_C120,
              E=Parameters_Systemic1.E_left_gastric_T3_C120,
              R_T=Parameters_Systemic1.R_T_left_gastric_T3_C120,
              C_T=Parameters_Systemic1.C_T_left_gastric_T3_C120,
              r=Parameters_Systemic1.r_left_gastric_T3_C120)
              annotation (Placement(transformation(extent={{-45,5},{-25,10}})));
            ADAN_main.Components.Obsolete.pv_jII_type splenic_T2_C122(
              l=Parameters_Systemic1.l_splenic_T2_C122,
              E=Parameters_Systemic1.E_splenic_T2_C122,
              r=Parameters_Systemic1.r_splenic_T2_C122)
              annotation (Placement(transformation(extent={{-18,-3},{2,2}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              dorsal_pancreatic_T1_C124(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_dorsal_pancreatic_T1_C124,
              E=Parameters_Systemic1.E_dorsal_pancreatic_T1_C124,
              R_T=Parameters_Systemic1.R_T_dorsal_pancreatic_T1_C124,
              C_T=Parameters_Systemic1.C_T_dorsal_pancreatic_T1_C124,
              r=Parameters_Systemic1.r_dorsal_pancreatic_T1_C124)
              annotation (Placement(transformation(extent={{-17,5},{3,10}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              splenic_T2_C126(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_splenic_T2_C126,
              E=Parameters_Systemic1.E_splenic_T2_C126,
              R_T=Parameters_Systemic1.R_T_splenic_T2_C126,
              C_T=Parameters_Systemic1.C_T_splenic_T2_C126,
              r=Parameters_Systemic1.r_splenic_T2_C126)
              annotation (Placement(transformation(extent={{8,5},{28,10}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_hepatic_C128(
              l=Parameters_Systemic1.l_common_hepatic_C128,
              E=Parameters_Systemic1.E_common_hepatic_C128,
              r=Parameters_Systemic1.r_common_hepatic_C128)
              annotation (Placement(transformation(extent={{9,-3},{29,2}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              hepatic_artery_proper_C130(
              l=Parameters_Systemic1.l_hepatic_artery_proper_C130,
              E=Parameters_Systemic1.E_hepatic_artery_proper_C130,
              r=Parameters_Systemic1.r_hepatic_artery_proper_C130)
              annotation (Placement(transformation(extent={{32,-3},{52,2}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              hepatic_artery_proper_left_branch_C132(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_hepatic_artery_proper_left_branch_C132,
              E=Parameters_Systemic1.E_hepatic_artery_proper_left_branch_C132,
              R_T=Parameters_Systemic1.R_T_hepatic_artery_proper_left_branch_C132,
              C_T=Parameters_Systemic1.C_T_hepatic_artery_proper_left_branch_C132,
              r=Parameters_Systemic1.r_hepatic_artery_proper_left_branch_C132)
              annotation (Placement(transformation(extent={{55,-3},{75,2}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              hepatic_artery_proper_right_branch_C134(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_hepatic_artery_proper_right_branch_C134,
              E=Parameters_Systemic1.E_hepatic_artery_proper_right_branch_C134,
              R_T=Parameters_Systemic1.R_T_hepatic_artery_proper_right_branch_C134,
              C_T=Parameters_Systemic1.C_T_hepatic_artery_proper_right_branch_C134,
              r=Parameters_Systemic1.r_hepatic_artery_proper_right_branch_C134)
              annotation (Placement(transformation(extent={{56,5},{76,10}})));

            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C138(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C138,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C138,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C138) annotation (
               Placement(transformation(extent={{-45,-91},{-25,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              middle_colic_T8_C140(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_middle_colic_T8_C140,
              E=Parameters_Systemic1.E_middle_colic_T8_C140,
              R_T=Parameters_Systemic1.R_T_middle_colic_T8_C140,
              C_T=Parameters_Systemic1.C_T_middle_colic_T8_C140,
              r=Parameters_Systemic1.r_middle_colic_T8_C140) annotation (
                Placement(transformation(extent={{-18,-99},{2,-94}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C142(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C142,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C142,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C142) annotation (
               Placement(transformation(extent={{-19,-91},{1,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              jejunal_3_T10_C144(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_jejunal_3_T10_C144,
              E=Parameters_Systemic1.E_jejunal_3_T10_C144,
              R_T=Parameters_Systemic1.R_T_jejunal_3_T10_C144,
              C_T=Parameters_Systemic1.C_T_jejunal_3_T10_C144,
              r=Parameters_Systemic1.r_jejunal_3_T10_C144)
              annotation (Placement(transformation(extent={{6,-99},{26,-94}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C146(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C146,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C146,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C146)
              annotation (Placement(transformation(extent={{5,-91},{25,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              jejunal_6_T11_C148(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_jejunal_6_T11_C148,
              E=Parameters_Systemic1.E_jejunal_6_T11_C148,
              R_T=Parameters_Systemic1.R_T_jejunal_6_T11_C148,
              C_T=Parameters_Systemic1.C_T_jejunal_6_T11_C148,
              r=Parameters_Systemic1.r_jejunal_6_T11_C148) annotation (
                Placement(transformation(extent={{32,-99},{52,-94}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C150(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C150,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C150,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C150) annotation (
               Placement(transformation(extent={{31,-91},{51,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              ileocolic_T9_C152(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_ileocolic_T9_C152,
              E=Parameters_Systemic1.E_ileocolic_T9_C152,
              R_T=Parameters_Systemic1.R_T_ileocolic_T9_C152,
              C_T=Parameters_Systemic1.C_T_ileocolic_T9_C152,
              r=Parameters_Systemic1.r_ileocolic_T9_C152) annotation (Placement(
                  transformation(extent={{58,-99},{78,-94}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C154(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C154,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C154,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C154) annotation (
               Placement(transformation(extent={{57,-91},{77,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              ileal_4_T12_C156(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_ileal_4_T12_C156,
              E=Parameters_Systemic1.E_ileal_4_T12_C156,
              R_T=Parameters_Systemic1.R_T_ileal_4_T12_C156,
              C_T=Parameters_Systemic1.C_T_ileal_4_T12_C156,
              r=Parameters_Systemic1.r_ileal_4_T12_C156) annotation (Placement(
                  transformation(extent={{84,-99},{104,-94}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C158(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C158,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C158,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C158) annotation (
               Placement(transformation(extent={{83,-91},{103,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              ileal_6_T13_C160(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_ileal_6_T13_C160,
              E=Parameters_Systemic1.E_ileal_6_T13_C160,
              R_T=Parameters_Systemic1.R_T_ileal_6_T13_C160,
              C_T=Parameters_Systemic1.C_T_ileal_6_T13_C160,
              r=Parameters_Systemic1.r_ileal_6_T13_C160) annotation (Placement(
                  transformation(extent={{108,-99},{128,-94}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              superior_mesenteric_T4_C162(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C162,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C162,
              R_T=Parameters_Systemic1.R_T_superior_mesenteric_T4_C162,
              C_T=Parameters_Systemic1.C_T_superior_mesenteric_T4_C162,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C162) annotation (
               Placement(transformation(extent={{107,-91},{127,-86}})));
            ADAN_main.Components.Obsolete.pv_jII_type renal_L166(
              l=Parameters_Systemic1.l_renal_L166,
              E=Parameters_Systemic1.E_renal_L166,
              r=Parameters_Systemic1.r_renal_L166) annotation (Placement(
                  transformation(extent={{-2,-67},{18,-62}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              renal_anterior_branch_L168(
              l=Parameters_Systemic1.l_renal_anterior_branch_L168,
              E=Parameters_Systemic1.E_renal_anterior_branch_L168,
              r=Parameters_Systemic1.r_renal_anterior_branch_L168) annotation (
                Placement(transformation(extent={{23,-67},{43,-62}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              inferior_segmental_T5_L170(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_inferior_segmental_T5_L170,
              E=Parameters_Systemic1.E_inferior_segmental_T5_L170,
              R_T=Parameters_Systemic1.R_T_inferior_segmental_T5_L170,
              C_T=Parameters_Systemic1.C_T_inferior_segmental_T5_L170,
              r=Parameters_Systemic1.r_inferior_segmental_T5_L170) annotation (
                Placement(transformation(extent={{48,-67},{68,-62}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              superior_segmental_T4_L172(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_superior_segmental_T4_L172,
              E=Parameters_Systemic1.E_superior_segmental_T4_L172,
              R_T=Parameters_Systemic1.R_T_superior_segmental_T4_L172,
              C_T=Parameters_Systemic1.C_T_superior_segmental_T4_L172,
              r=Parameters_Systemic1.r_superior_segmental_T4_L172) annotation (
                Placement(transformation(extent={{47,-77},{67,-72}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              renal_posterior_branch_T3_L174(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_renal_posterior_branch_T3_L174,
              E=Parameters_Systemic1.E_renal_posterior_branch_T3_L174,
              R_T=Parameters_Systemic1.R_T_renal_posterior_branch_T3_L174,
              C_T=Parameters_Systemic1.C_T_renal_posterior_branch_T3_L174,
              r=Parameters_Systemic1.r_renal_posterior_branch_T3_L174)
              annotation (Placement(transformation(extent={{24,-77},{44,-72}})));
            ADAN_main.Components.Obsolete.pv_jII_type renal_R178(
              l=Parameters_Systemic1.l_renal_R178,
              E=Parameters_Systemic1.E_renal_R178,
              r=Parameters_Systemic1.r_renal_R178) annotation (Placement(
                  transformation(extent={{25,-25},{45,-20}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              renal_anterior_branch_R180(
              l=Parameters_Systemic1.l_renal_anterior_branch_R180,
              E=Parameters_Systemic1.E_renal_anterior_branch_R180,
              r=Parameters_Systemic1.r_renal_anterior_branch_R180) annotation (
                Placement(transformation(extent={{50,-25},{70,-20}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              superior_segmental_T4_R182(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_superior_segmental_T4_R182,
              E=Parameters_Systemic1.E_superior_segmental_T4_R182,
              R_T=Parameters_Systemic1.R_T_superior_segmental_T4_R182,
              C_T=Parameters_Systemic1.C_T_superior_segmental_T4_R182,
              r=Parameters_Systemic1.r_superior_segmental_T4_R182) annotation (
                Placement(transformation(extent={{75,-25},{95,-20}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              inferior_segmental_T5_R184(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_inferior_segmental_T5_R184,
              E=Parameters_Systemic1.E_inferior_segmental_T5_R184,
              R_T=Parameters_Systemic1.R_T_inferior_segmental_T5_R184,
              C_T=Parameters_Systemic1.C_T_inferior_segmental_T5_R184,
              r=Parameters_Systemic1.r_inferior_segmental_T5_R184) annotation (
                Placement(transformation(extent={{74,-17},{94,-12}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              renal_posterior_branch_T3_R186(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_renal_posterior_branch_T3_R186,
              E=Parameters_Systemic1.E_renal_posterior_branch_T3_R186,
              R_T=Parameters_Systemic1.R_T_renal_posterior_branch_T3_R186,
              C_T=Parameters_Systemic1.C_T_renal_posterior_branch_T3_R186,
              r=Parameters_Systemic1.r_renal_posterior_branch_T3_R186)
              annotation (Placement(transformation(extent={{49,-17},{69,-12}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              inferior_mesenteric_T5_C190(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_inferior_mesenteric_T5_C190,
              E=Parameters_Systemic1.E_inferior_mesenteric_T5_C190,
              R_T=Parameters_Systemic1.R_T_inferior_mesenteric_T5_C190,
              C_T=Parameters_Systemic1.C_T_inferior_mesenteric_T5_C190,
              r=Parameters_Systemic1.r_inferior_mesenteric_T5_C190) annotation (
               Placement(transformation(extent={{48,-57},{68,-52}})));
            ADAN_main.Components.Obsolete.pv_jII_type common_iliac_R216(
              l=Parameters_Systemic1.l_common_iliac_R216,
              E=Parameters_Systemic1.E_common_iliac_R216,
              r=Parameters_Systemic1.r_common_iliac_R216) annotation (Placement(
                  transformation(extent={{75,-43},{95,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              internal_iliac_T1_R218(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_internal_iliac_T1_R218,
              E=Parameters_Systemic1.E_internal_iliac_T1_R218,
              R_T=Parameters_Systemic1.R_T_internal_iliac_T1_R218,
              C_T=Parameters_Systemic1.C_T_internal_iliac_T1_R218,
              r=Parameters_Systemic1.r_internal_iliac_T1_R218) annotation (
                Placement(transformation(extent={{98,-33},{118,-28}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              external_iliac_R220(
              l=Parameters_Systemic1.l_external_iliac_R220,
              E=Parameters_Systemic1.E_external_iliac_R220,
              r=Parameters_Systemic1.r_external_iliac_R220) annotation (
                Placement(transformation(extent={{99,-43},{119,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type femoral_R222(
              l=Parameters_Systemic1.l_femoral_R222,
              E=Parameters_Systemic1.E_femoral_R222,
              r=Parameters_Systemic1.r_femoral_R222) annotation (Placement(
                  transformation(extent={{124,-43},{144,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              profundus_T2_R224(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_profundus_T2_R224,
              E=Parameters_Systemic1.E_profundus_T2_R224,
              R_T=Parameters_Systemic1.R_T_profundus_T2_R224,
              C_T=Parameters_Systemic1.C_T_profundus_T2_R224,
              r=Parameters_Systemic1.r_profundus_T2_R224) annotation (Placement(
                  transformation(extent={{149,-33},{169,-28}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              femoral_R226(
              l=Parameters_Systemic1.l_femoral_R226,
              E=Parameters_Systemic1.E_femoral_R226,
              r=Parameters_Systemic1.r_femoral_R226) annotation (Placement(
                  transformation(extent={{150,-43},{170,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type popliteal_R228(
              l=Parameters_Systemic1.l_popliteal_R228,
              E=Parameters_Systemic1.E_popliteal_R228,
              r=Parameters_Systemic1.r_popliteal_R228) annotation (Placement(
                  transformation(extent={{175,-43},{195,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              anterior_tibial_T3_R230(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_anterior_tibial_T3_R230,
              E=Parameters_Systemic1.E_anterior_tibial_T3_R230,
              R_T=Parameters_Systemic1.R_T_anterior_tibial_T3_R230,
              C_T=Parameters_Systemic1.C_T_anterior_tibial_T3_R230,
              r=Parameters_Systemic1.r_anterior_tibial_T3_R230) annotation (
                Placement(transformation(extent={{200,-33},{220,-28}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              popliteal_R232(
              l=Parameters_Systemic1.l_popliteal_R232,
              E=Parameters_Systemic1.E_popliteal_R232,
              r=Parameters_Systemic1.r_popliteal_R232) annotation (Placement(
                  transformation(extent={{199,-43},{219,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              tibiofibular_trunk_R234(
              l=Parameters_Systemic1.l_tibiofibular_trunk_R234,
              E=Parameters_Systemic1.E_tibiofibular_trunk_R234,
              r=Parameters_Systemic1.r_tibiofibular_trunk_R234) annotation (
                Placement(transformation(extent={{224,-43},{244,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_tibial_T4_R236(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_tibial_T4_R236,
              E=Parameters_Systemic1.E_posterior_tibial_T4_R236,
              R_T=Parameters_Systemic1.R_T_posterior_tibial_T4_R236,
              C_T=Parameters_Systemic1.C_T_posterior_tibial_T4_R236,
              r=Parameters_Systemic1.r_posterior_tibial_T4_R236) annotation (
                Placement(transformation(extent={{249,-43},{269,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type common_iliac_L194(
              l=Parameters_Systemic1.l_common_iliac_L194,
              E=Parameters_Systemic1.E_common_iliac_L194,
              r=Parameters_Systemic1.r_common_iliac_L194) annotation (Placement(
                  transformation(extent={{74,-57},{94,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              internal_iliac_T1_L196(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_internal_iliac_T1_L196,
              E=Parameters_Systemic1.E_internal_iliac_T1_L196,
              R_T=Parameters_Systemic1.R_T_internal_iliac_T1_L196,
              C_T=Parameters_Systemic1.C_T_internal_iliac_T1_L196,
              r=Parameters_Systemic1.r_internal_iliac_T1_L196) annotation (
                Placement(transformation(extent={{99,-65},{119,-60}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              external_iliac_L198(
              l=Parameters_Systemic1.l_external_iliac_L198,
              E=Parameters_Systemic1.E_external_iliac_L198,
              r=Parameters_Systemic1.r_external_iliac_L198) annotation (
                Placement(transformation(extent={{100,-57},{120,-52}})));
            ADAN_main.Components.Obsolete.pv_jII_type femoral_L200(
              l=Parameters_Systemic1.l_femoral_L200,
              E=Parameters_Systemic1.E_femoral_L200,
              r=Parameters_Systemic1.r_femoral_L200) annotation (Placement(
                  transformation(extent={{125,-57},{145,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              profundus_T2_L202(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_profundus_T2_L202,
              E=Parameters_Systemic1.E_profundus_T2_L202,
              R_T=Parameters_Systemic1.R_T_profundus_T2_L202,
              C_T=Parameters_Systemic1.C_T_profundus_T2_L202,
              r=Parameters_Systemic1.r_profundus_T2_L202) annotation (Placement(
                  transformation(extent={{150,-65},{170,-60}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              femoral_L204(
              l=Parameters_Systemic1.l_femoral_L204,
              E=Parameters_Systemic1.E_femoral_L204,
              r=Parameters_Systemic1.r_femoral_L204) annotation (Placement(
                  transformation(extent={{149,-57},{169,-52}})));
            ADAN_main.Components.Obsolete.pv_jII_type popliteal_L206(
              l=Parameters_Systemic1.l_popliteal_L206,
              E=Parameters_Systemic1.E_popliteal_L206,
              r=Parameters_Systemic1.r_popliteal_L206) annotation (Placement(
                  transformation(extent={{174,-57},{194,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              anterior_tibial_T3_L208(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_anterior_tibial_T3_L208,
              E=Parameters_Systemic1.E_anterior_tibial_T3_L208,
              R_T=Parameters_Systemic1.R_T_anterior_tibial_T3_L208,
              C_T=Parameters_Systemic1.C_T_anterior_tibial_T3_L208,
              r=Parameters_Systemic1.r_anterior_tibial_T3_L208) annotation (
                Placement(transformation(extent={{199,-65},{219,-60}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              popliteal_L210(
              l=Parameters_Systemic1.l_popliteal_L210,
              E=Parameters_Systemic1.E_popliteal_L210,
              r=Parameters_Systemic1.r_popliteal_L210) annotation (Placement(
                  transformation(extent={{200,-57},{220,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              tibiofibular_trunk_L212(
              l=Parameters_Systemic1.l_tibiofibular_trunk_L212,
              E=Parameters_Systemic1.E_tibiofibular_trunk_L212,
              r=Parameters_Systemic1.r_tibiofibular_trunk_L212) annotation (
                Placement(transformation(extent={{225,-57},{245,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_tibial_T4_L214(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_tibial_T4_L214,
              E=Parameters_Systemic1.E_posterior_tibial_T4_L214,
              R_T=Parameters_Systemic1.R_T_posterior_tibial_T4_L214,
              C_T=Parameters_Systemic1.C_T_posterior_tibial_T4_L214,
              r=Parameters_Systemic1.r_posterior_tibial_T4_L214) annotation (
                Placement(transformation(extent={{250,-57},{270,-52}})));
            ADAN_main.Components.Obsolete.pv_jII_type subclavian_R28(
              l=Parameters_Systemic1.l_subclavian_R28,
              E=Parameters_Systemic1.E_subclavian_R28,
              r=Parameters_Systemic1.r_subclavian_R28) annotation (Placement(
                  transformation(extent={{-75,119},{-55,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              subclavian_R30(
              l=Parameters_Systemic1.l_subclavian_R30,
              E=Parameters_Systemic1.E_subclavian_R30,
              r=Parameters_Systemic1.r_subclavian_R30) annotation (Placement(
                  transformation(extent={{-50,119},{-30,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              axillary_R32(
              l=Parameters_Systemic1.l_axillary_R32,
              E=Parameters_Systemic1.E_axillary_R32,
              r=Parameters_Systemic1.r_axillary_R32) annotation (Placement(
                  transformation(extent={{-25,119},{-5,124}})));
            ADAN_main.Components.Obsolete.pv_jII_type brachial_R34(
              l=Parameters_Systemic1.l_brachial_R34,
              E=Parameters_Systemic1.E_brachial_R34,
              r=Parameters_Systemic1.r_brachial_R34)
              annotation (Placement(transformation(extent={{0,119},{20,124}})));
            ADAN_main.Components.Obsolete.pv_jII_type ulnar_T2_R36(
              l=Parameters_Systemic1.l_ulnar_T2_R36,
              E=Parameters_Systemic1.E_ulnar_T2_R36,
              r=Parameters_Systemic1.r_ulnar_T2_R36) annotation (Placement(
                  transformation(extent={{25,119},{45,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_interosseous_R38(
              l=Parameters_Systemic1.l_common_interosseous_R38,
              E=Parameters_Systemic1.E_common_interosseous_R38,
              r=Parameters_Systemic1.r_common_interosseous_R38) annotation (
                Placement(transformation(extent={{50,119},{70,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_interosseous_T3_R40(
              p_out=u_svl,
              l=Parameters_Systemic1.l_posterior_interosseous_T3_R40,
              E=Parameters_Systemic1.E_posterior_interosseous_T3_R40,
              R_T=Parameters_Systemic1.R_T_posterior_interosseous_T3_R40,
              C_T=Parameters_Systemic1.C_T_posterior_interosseous_T3_R40,
              r=Parameters_Systemic1.r_posterior_interosseous_T3_R40)
              annotation (Placement(transformation(extent={{75,119},{95,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              ulnar_T2_R42(
              p_out=u_svl,
              l=Parameters_Systemic1.l_ulnar_T2_R42,
              E=Parameters_Systemic1.E_ulnar_T2_R42,
              R_T=Parameters_Systemic1.R_T_ulnar_T2_R42,
              C_T=Parameters_Systemic1.C_T_ulnar_T2_R42,
              r=Parameters_Systemic1.r_ulnar_T2_R42) annotation (Placement(
                  transformation(extent={{50,109},{70,114}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              radial_T1_R44(
              p_out=u_svl,
              l=Parameters_Systemic1.l_radial_T1_R44,
              E=Parameters_Systemic1.E_radial_T1_R44,
              R_T=Parameters_Systemic1.R_T_radial_T1_R44,
              C_T=Parameters_Systemic1.C_T_radial_T1_R44,
              r=Parameters_Systemic1.r_radial_T1_R44) annotation (Placement(
                  transformation(extent={{25,109},{45,114}})));
            ADAN_main.Components.Obsolete.pv_jII_type subclavian_L66(
              l=Parameters_Systemic1.l_subclavian_L66,
              E=Parameters_Systemic1.E_subclavian_L66,
              r=Parameters_Systemic1.r_subclavian_L66) annotation (Placement(
                  transformation(extent={{-50,73},{-30,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              subclavian_L78(
              l=Parameters_Systemic1.l_subclavian_L78,
              E=Parameters_Systemic1.E_subclavian_L78,
              r=Parameters_Systemic1.r_subclavian_L78)
              annotation (Placement(transformation(extent={{-25,73},{-5,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              axillary_L80(
              l=Parameters_Systemic1.l_axillary_L80,
              E=Parameters_Systemic1.E_axillary_L80,
              r=Parameters_Systemic1.r_axillary_L80)
              annotation (Placement(transformation(extent={{0,73},{20,78}})));
            ADAN_main.Components.Obsolete.pv_jII_type brachial_L82(
              l=Parameters_Systemic1.l_brachial_L82,
              E=Parameters_Systemic1.E_brachial_L82,
              r=Parameters_Systemic1.r_brachial_L82)
              annotation (Placement(transformation(extent={{25,73},{45,78}})));
            ADAN_main.Components.Obsolete.pv_jII_type ulnar_T2_L84(
              l=Parameters_Systemic1.l_ulnar_T2_L84,
              E=Parameters_Systemic1.E_ulnar_T2_L84,
              r=Parameters_Systemic1.r_ulnar_T2_L84)
              annotation (Placement(transformation(extent={{50,73},{70,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_interosseous_L86(
              l=Parameters_Systemic1.l_common_interosseous_L86,
              E=Parameters_Systemic1.E_common_interosseous_L86,
              r=Parameters_Systemic1.r_common_interosseous_L86)
              annotation (Placement(transformation(extent={{75,73},{95,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_interosseous_T3_L88(
              p_out=u_svl,
              l=Parameters_Systemic1.l_posterior_interosseous_T3_L88,
              E=Parameters_Systemic1.E_posterior_interosseous_T3_L88,
              R_T=Parameters_Systemic1.R_T_posterior_interosseous_T3_L88,
              C_T=Parameters_Systemic1.C_T_posterior_interosseous_T3_L88,
              r=Parameters_Systemic1.r_posterior_interosseous_T3_L88)
              annotation (Placement(transformation(extent={{100,73},{120,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              ulnar_T2_L90(
              p_out=u_svl,
              l=Parameters_Systemic1.l_ulnar_T2_L90,
              E=Parameters_Systemic1.E_ulnar_T2_L90,
              R_T=Parameters_Systemic1.R_T_ulnar_T2_L90,
              C_T=Parameters_Systemic1.C_T_ulnar_T2_L90,
              r=Parameters_Systemic1.r_ulnar_T2_L90)
              annotation (Placement(transformation(extent={{75,63},{95,68}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              radial_T1_L92(
              p_out=u_svl,
              l=Parameters_Systemic1.l_radial_T1_L92,
              E=Parameters_Systemic1.E_radial_T1_L92,
              R_T=Parameters_Systemic1.R_T_radial_T1_L92,
              C_T=Parameters_Systemic1.C_T_radial_T1_L92,
              r=Parameters_Systemic1.r_radial_T1_L92)
              annotation (Placement(transformation(extent={{50,63},{70,68}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_R6_A(
              l=Parameters_Systemic1.l_common_carotid_R6_A,
              E=Parameters_Systemic1.E_common_carotid_R6_A,
              r=Parameters_Systemic1.r_common_carotid_R6_A) annotation (
                Placement(transformation(extent={{-73,133},{-53,138}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_R6_B(
              l=Parameters_Systemic1.l_common_carotid_R6_B,
              E=Parameters_Systemic1.E_common_carotid_R6_B,
              r=Parameters_Systemic1.r_common_carotid_R6_B) annotation (
                Placement(transformation(extent={{-48,133},{-28,138}})));
            ADAN_main.Components.Obsolete.pv_jII_type common_carotid_R6_C(
              l=Parameters_Systemic1.l_common_carotid_R6_C,
              E=Parameters_Systemic1.E_common_carotid_R6_C,
              r=Parameters_Systemic1.r_common_carotid_R6_C) annotation (
                Placement(transformation(extent={{-23,133},{-3,138}})));
            replaceable
              ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              internal_carotid_R8_A(
              l=Parameters_Systemic1.l_internal_carotid_R8_A,
              E=Parameters_Systemic1.E_internal_carotid_R8_A,
              r=Parameters_Systemic1.r_internal_carotid_R8_A)
              annotation (Placement(transformation(extent={{2,133},{22,138}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              internal_carotid_R8_B(
              l=Parameters_Systemic1.l_internal_carotid_R8_B,
              E=Parameters_Systemic1.E_internal_carotid_R8_B,
              r=Parameters_Systemic1.r_internal_carotid_R8_B) annotation (
                Placement(transformation(extent={{27,133},{47,138}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              internal_carotid_R8_C(
              p_out=u_svl,
              l=Parameters_Systemic1.l_internal_carotid_R8_C,
              E=Parameters_Systemic1.E_internal_carotid_R8_C,
              R_T=Parameters_Systemic1.R_T_internal_carotid_R8_C,
              C_T=Parameters_Systemic1.C_T_internal_carotid_R8_C,
              r=Parameters_Systemic1.r_internal_carotid_R8_C) annotation (
                Placement(transformation(extent={{54,133},{74,138}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              external_carotid_T2_R26(
              p_out=u_svl,
              l=Parameters_Systemic1.l_external_carotid_T2_R26,
              E=Parameters_Systemic1.E_external_carotid_T2_R26,
              R_T=Parameters_Systemic1.R_T_external_carotid_T2_R26,
              C_T=Parameters_Systemic1.C_T_external_carotid_T2_R26,
              r=Parameters_Systemic1.r_external_carotid_T2_R26)
              annotation (Placement(transformation(extent={{3,145},{23,150}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_L48_A(
              l=Parameters_Systemic1.l_common_carotid_L48_A,
              E=Parameters_Systemic1.E_common_carotid_L48_A,
              r=Parameters_Systemic1.r_common_carotid_L48_A) annotation (
                Placement(transformation(extent={{-72,93},{-52,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_L48_B(
              l=Parameters_Systemic1.l_common_carotid_L48_B,
              E=Parameters_Systemic1.E_common_carotid_L48_B,
              r=Parameters_Systemic1.r_common_carotid_L48_B) annotation (
                Placement(transformation(extent={{-47,93},{-27,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_L48_C(
              l=Parameters_Systemic1.l_common_carotid_L48_C,
              E=Parameters_Systemic1.E_common_carotid_L48_C,
              r=Parameters_Systemic1.r_common_carotid_L48_C)
              annotation (Placement(transformation(extent={{-22,93},{-2,98}})));
            ADAN_main.Components.Obsolete.pv_jII_type common_carotid_L48_D(
              l=Parameters_Systemic1.l_common_carotid_L48_D,
              E=Parameters_Systemic1.E_common_carotid_L48_D,
              r=Parameters_Systemic1.r_common_carotid_L48_D)
              annotation (Placement(transformation(extent={{3,93},{23,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              internal_carotid_L50_A(
              l=Parameters_Systemic1.l_internal_carotid_L50_A,
              E=Parameters_Systemic1.E_internal_carotid_L50_A,
              r=Parameters_Systemic1.r_internal_carotid_L50_A)
              annotation (Placement(transformation(extent={{28,93},{48,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              internal_carotid_L50_B(
              l=Parameters_Systemic1.l_internal_carotid_L50_B,
              E=Parameters_Systemic1.E_internal_carotid_L50_B,
              r=Parameters_Systemic1.r_internal_carotid_L50_B)
              annotation (Placement(transformation(extent={{53,93},{73,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              internal_carotid_L50_C(
              p_out=u_svl,
              l=Parameters_Systemic1.l_internal_carotid_L50_C,
              E=Parameters_Systemic1.E_internal_carotid_L50_C,
              R_T=Parameters_Systemic1.R_T_internal_carotid_L50_C,
              C_T=Parameters_Systemic1.C_T_internal_carotid_L50_C,
              r=Parameters_Systemic1.r_internal_carotid_L50_C)
              annotation (Placement(transformation(extent={{78,93},{98,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              external_carotid_T2_L62(
              p_out=u_svl,
              l=Parameters_Systemic1.l_external_carotid_T2_L62,
              E=Parameters_Systemic1.E_external_carotid_T2_L62,
              R_T=Parameters_Systemic1.R_T_external_carotid_T2_L62,
              C_T=Parameters_Systemic1.C_T_external_carotid_T2_L62,
              r=Parameters_Systemic1.r_external_carotid_T2_L62)
              annotation (Placement(transformation(extent={{27,85},{47,90}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              vertebral_L2(
              p_out=u_svl,
              l=Parameters_Systemic1.l_vertebral_L2,
              E=Parameters_Systemic1.E_vertebral_L2,
              R_T=Parameters_Systemic1.R_T_vertebral_L2,
              C_T=Parameters_Systemic1.C_T_vertebral_L2,
              r=Parameters_Systemic1.r_vertebral_L2)
              annotation (Placement(transformation(extent={{-26,63},{-6,68}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              vertebral_R272(
              p_out=u_svl,
              l=Parameters_Systemic1.l_vertebral_R272,
              E=Parameters_Systemic1.E_vertebral_R272,
              R_T=Parameters_Systemic1.R_T_vertebral_R272,
              C_T=Parameters_Systemic1.C_T_vertebral_R272,
              r=Parameters_Systemic1.r_vertebral_R272) annotation (Placement(
                  transformation(extent={{-49,111},{-29,116}})));
            Physiolibrary.Types.Pressure u_svl = pq_terminator_v.u;
            Physiolibrary.Types.Pressure u_ivl = u_svl;
            Physiolibrary.Types.VolumeFlowRate v_veins = v_sup_venacava + v_inf_venacava;
            Real v_sup_venacava(unit = "m3.s-1") = v_arms+v_head;
            Real v_inf_venacava(unit = "m3.s-1") = v_chest+v_trunk+v_intestines+v_kidneys+v_legs;
            Real v_chest(unit = "m3.s-1") = v_posterior_intercostal_T1_R98+v_posterior_intercostal_T1_L102+v_posterior_intercostal_T2_R106+v_posterior_intercostal_T2_L110;
            Real v_trunk(unit = "m3.s-1")= v_left_gastric_T3_C120+v_dorsal_pancreatic_T1_C124+v_splenic_T2_C126+v_hepatic_artery_proper_left_branch_C132+v_hepatic_artery_proper_right_branch_C134;
            Real v_kidneys(unit = "m3.s-1") = v_inferior_segmental_T5_L170+v_superior_segmental_T4_L172+v_renal_posterior_branch_T3_L174+v_superior_segmental_T4_R182+v_inferior_segmental_T5_R184+v_renal_posterior_branch_T3_R186;
            Real v_intestines(unit = "m3.s-1") = v_middle_colic_T8_C140+v_jejunal_3_T10_C144+v_jejunal_6_T11_C148+v_ileocolic_T9_C152+v_ileal_4_T12_C156+v_ileal_6_T13_C160+v_superior_mesenteric_T4_C162+v_inferior_mesenteric_T5_C190;
            Real v_legs(unit = "m3.s-1") = v_internal_iliac_T1_R218+v_profundus_T2_R224+v_anterior_tibial_T3_R230+v_posterior_tibial_T4_R236+v_internal_iliac_T1_L196+v_profundus_T2_L202+v_anterior_tibial_T3_L208+v_posterior_tibial_T4_L214;
            Real v_arms(unit = "m3.s-1") = v_posterior_interosseous_T3_R40+v_ulnar_T2_R42+v_radial_T1_R44+v_posterior_interosseous_T3_L88+v_ulnar_T2_L90+v_radial_T1_L92;
            Real v_head(unit = "m3.s-1") = v_external_carotid_T2_R26+v_external_carotid_T2_L62+v_internal_carotid_R8_C+v_internal_carotid_L50_C+v_vertebral_R272+v_vertebral_L2;
            Real v_posterior_intercostal_T1_R98(unit = "m3.s-1");
            Real v_posterior_intercostal_T1_L102(unit = "m3.s-1");
            Real v_posterior_intercostal_T2_R106(unit = "m3.s-1");
            Real v_posterior_intercostal_T2_L110(unit = "m3.s-1");
            Real v_left_gastric_T3_C120(unit = "m3.s-1");
            Real v_dorsal_pancreatic_T1_C124(unit = "m3.s-1");
            Real v_splenic_T2_C126(unit = "m3.s-1");
            Real v_hepatic_artery_proper_left_branch_C132(unit = "m3.s-1");
            Real v_hepatic_artery_proper_right_branch_C134(unit = "m3.s-1");
            Real v_middle_colic_T8_C140(unit = "m3.s-1");
            Real v_jejunal_3_T10_C144(unit = "m3.s-1");
            Real v_jejunal_6_T11_C148(unit = "m3.s-1");
            Real v_ileocolic_T9_C152(unit = "m3.s-1");
            Real v_ileal_4_T12_C156(unit = "m3.s-1");
            Real v_ileal_6_T13_C160(unit = "m3.s-1");
            Real v_superior_mesenteric_T4_C162(unit = "m3.s-1");
            Real v_inferior_segmental_T5_L170(unit = "m3.s-1");
            Real v_superior_segmental_T4_L172(unit = "m3.s-1");
            Real v_renal_posterior_branch_T3_L174(unit = "m3.s-1");
            Real v_superior_segmental_T4_R182(unit = "m3.s-1");
            Real v_inferior_segmental_T5_R184(unit = "m3.s-1");
            Real v_renal_posterior_branch_T3_R186(unit = "m3.s-1");
            Real v_inferior_mesenteric_T5_C190(unit = "m3.s-1");
            Real v_internal_iliac_T1_R218(unit = "m3.s-1");
            Real v_profundus_T2_R224(unit = "m3.s-1");
            Real v_anterior_tibial_T3_R230(unit = "m3.s-1");
            Real v_posterior_tibial_T4_R236(unit = "m3.s-1");
            Real v_internal_iliac_T1_L196(unit = "m3.s-1");
            Real v_profundus_T2_L202(unit = "m3.s-1");
            Real v_anterior_tibial_T3_L208(unit = "m3.s-1");
            Real v_posterior_tibial_T4_L214(unit = "m3.s-1");
            Real v_posterior_interosseous_T3_R40(unit = "m3.s-1");
            Real v_ulnar_T2_R42(unit = "m3.s-1");
            Real v_radial_T1_R44(unit = "m3.s-1");
            Real v_posterior_interosseous_T3_L88(unit = "m3.s-1");
            Real v_ulnar_T2_L90(unit = "m3.s-1");
            Real v_radial_T1_L92(unit = "m3.s-1");
            Real v_external_carotid_T2_R26(unit = "m3.s-1");
            Real v_external_carotid_T2_L62(unit = "m3.s-1");
            Real v_internal_carotid_R8_C(unit = "m3.s-1");
            Real v_internal_carotid_L50_C(unit = "m3.s-1");
            Real v_vertebral_R272(unit = "m3.s-1");
            Real v_vertebral_L2(unit = "m3.s-1");
            ADAN_main.Components.Interfaces.Pq_terminator_v pq_terminator_v(v=-
                  v_veins)
              annotation (Placement(transformation(extent={{100,0},{120,20}})));
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_a
              annotation (Placement(transformation(extent={{-270,40},{-250,60}}),
                  iconTransformation(extent={{-110,-10},{-90,10}})));
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b port_b
              annotation (Placement(transformation(extent={{124,0},{144,20}}),
                  iconTransformation(extent={{90,-10},{110,10}})));
          equation
            v_posterior_intercostal_T1_R98 = posterior_intercostal_T1_R98.v_T;
            v_posterior_intercostal_T1_L102 = posterior_intercostal_T1_L102.v_T;
            v_posterior_intercostal_T2_R106 = posterior_intercostal_T2_R106.v_T;
            v_posterior_intercostal_T2_L110 = posterior_intercostal_T2_L110.v_T;
            v_left_gastric_T3_C120 = left_gastric_T3_C120.v_T;
            v_dorsal_pancreatic_T1_C124 = dorsal_pancreatic_T1_C124.v_T;
            v_splenic_T2_C126 = splenic_T2_C126.v_T;
            v_hepatic_artery_proper_left_branch_C132 = hepatic_artery_proper_left_branch_C132.v_T;
            v_hepatic_artery_proper_right_branch_C134 = hepatic_artery_proper_right_branch_C134.v_T;
            v_middle_colic_T8_C140 = middle_colic_T8_C140.v_T;
            v_jejunal_3_T10_C144 = jejunal_3_T10_C144.v_T;
            v_jejunal_6_T11_C148 = jejunal_6_T11_C148.v_T;
            v_ileocolic_T9_C152 = ileocolic_T9_C152.v_T;
            v_ileal_4_T12_C156 = ileal_4_T12_C156.v_T;
            v_ileal_6_T13_C160 = ileal_6_T13_C160.v_T;
            v_superior_mesenteric_T4_C162 = superior_mesenteric_T4_C162.v_T;
            v_inferior_segmental_T5_L170 = inferior_segmental_T5_L170.v_T;
            v_superior_segmental_T4_L172 = superior_segmental_T4_L172.v_T;
            v_renal_posterior_branch_T3_L174 = renal_posterior_branch_T3_L174.v_T;
            v_superior_segmental_T4_R182 = superior_segmental_T4_R182.v_T;
            v_inferior_segmental_T5_R184 = inferior_segmental_T5_R184.v_T;
            v_renal_posterior_branch_T3_R186 = renal_posterior_branch_T3_R186.v_T;
            v_inferior_mesenteric_T5_C190 = inferior_mesenteric_T5_C190.v_T;
            v_internal_iliac_T1_R218 = internal_iliac_T1_R218.v_T;
            v_profundus_T2_R224 = profundus_T2_R224.v_T;
            v_anterior_tibial_T3_R230 = anterior_tibial_T3_R230.v_T;
            v_posterior_tibial_T4_R236 = posterior_tibial_T4_R236.v_T;
            v_internal_iliac_T1_L196 = internal_iliac_T1_L196.v_T;
            v_profundus_T2_L202 = profundus_T2_L202.v_T;
            v_anterior_tibial_T3_L208 = anterior_tibial_T3_L208.v_T;
            v_posterior_tibial_T4_L214 = posterior_tibial_T4_L214.v_T;
            v_posterior_interosseous_T3_R40 = posterior_interosseous_T3_R40.v_T;
            v_ulnar_T2_R42 = ulnar_T2_R42.v_T;
            v_radial_T1_R44 = radial_T1_R44.v_T;
            v_posterior_interosseous_T3_L88 = posterior_interosseous_T3_L88.v_T;
            v_ulnar_T2_L90 = ulnar_T2_L90.v_T;
            v_radial_T1_L92 = radial_T1_L92.v_T;
            v_external_carotid_T2_R26 = external_carotid_T2_R26.v_T;
            v_external_carotid_T2_L62 = external_carotid_T2_L62.v_T;
            v_internal_carotid_R8_C = internal_carotid_R8_C.v_T;
            v_internal_carotid_L50_C = internal_carotid_L50_C.v_T;
            v_vertebral_R272 = vertebral_R272.v_T;
            v_vertebral_L2 = vertebral_L2.v_T;
            connect(brachiocephalic_trunk_C4.port_a,aortic_arch_C2.port_b) annotation (Line(points={{-98,
                    129.5},{-121,49.5}},                                                                                           thickness=1));
            connect(aortic_arch_C46.port_a,aortic_arch_C2.port_b) annotation (Line(points={{-105,
                    49.5},{-121,49.5}},                                                                                   thickness=1));
            connect(common_carotid_R6_A.port_a,brachiocephalic_trunk_C4.port_b) annotation (Line(points={{-73,
                    135.5},{-78,129.5}},                                                                                                thickness=1));
            connect(subclavian_R28.port_a,brachiocephalic_trunk_C4.port_b) annotation (Line(points={{-75,
                    121.5},{-78,129.5}},                                                                                           thickness=1));
            connect(aortic_arch_C64.port_a,aortic_arch_C46.port_b) annotation (Line(points={{-78,
                    49.5},{-85,49.5}},                                                                                     thickness=1));
            connect(common_carotid_L48_A.port_a,aortic_arch_C46.port_b) annotation (Line(points={{-72,
                    95.5},{-85,49.5}},                                                                                          thickness=1));
            connect(aortic_arch_C94.port_a,aortic_arch_C64.port_b) annotation (Line(points={{-49,
                    49.5},{-58,49.5}},                                                                                     thickness=1));
            connect(subclavian_L66.port_a,aortic_arch_C64.port_b) annotation (Line(points={{-50,
                    75.5},{-58,49.5}},                                                                                    thickness=1));
            connect(thoracic_aorta_C100.port_a,thoracic_aorta_C96.port_b) annotation (Line(points={{3,49.5},
                    {-6,49.5}},                                                                                                   thickness=1));
            connect(posterior_intercostal_T1_R98.port_a,thoracic_aorta_C96.port_b) annotation (Line(points={{3,39.5},
                    {-6,49.5}},                                                                                                            thickness=1));
            connect(thoracic_aorta_C104.port_a,thoracic_aorta_C100.port_b) annotation (Line(points={{28,49.5},
                    {23,49.5}},                                                                                                    thickness=1));
            connect(posterior_intercostal_T1_L102.port_a,thoracic_aorta_C100.port_b) annotation (Line(points={{28,39.5},
                    {23,49.5}},                                                                                                              thickness=1));
            connect(thoracic_aorta_C108.port_a,thoracic_aorta_C104.port_b) annotation (Line(points={{53,49.5},
                    {48,49.5}},                                                                                                    thickness=1));
            connect(posterior_intercostal_T2_R106.port_a,thoracic_aorta_C104.port_b) annotation (Line(points={{51,39.5},
                    {48,49.5}},                                                                                                              thickness=1));
            connect(thoracic_aorta_C112.port_a,thoracic_aorta_C108.port_b) annotation (Line(points={{78,49.5},
                    {73,49.5}},                                                                                                    thickness=1));
            connect(posterior_intercostal_T2_L110.port_a,thoracic_aorta_C108.port_b) annotation (Line(points={{78,39.5},
                    {73,49.5}},                                                                                                              thickness=1));
            connect(abdominal_aorta_C136.port_a,abdominal_aorta_C114.port_b) annotation (Line(points={{-74,
                    -40.5},{-79,-40.5}},                                                                                             thickness=1));
            connect(celiac_trunk_C116.port_a,abdominal_aorta_C114.port_b) annotation (Line(points={{-71,
                    -0.5},{-79,-40.5}},                                                                                           thickness=1));
            connect(abdominal_aorta_C164.port_a,abdominal_aorta_C136.port_b) annotation (Line(points={{-47,
                    -40.5},{-54,-40.5}},                                                                                             thickness=1));
            connect(superior_mesenteric_T4_C138.port_a,abdominal_aorta_C136.port_b) annotation (Line(points={{-45,
                    -88.5},{-54,-40.5}},                                                                                                    thickness=1));
            connect(abdominal_aorta_C176.port_a,abdominal_aorta_C164.port_b) annotation (Line(points={{-2,
                    -40.5},{-27,-40.5}},                                                                                             thickness=1));
            connect(renal_L166.port_a,abdominal_aorta_C164.port_b) annotation (Line(points={{-2,
                    -64.5},{-14,-64.5},{-14,-40.5},{-27,-40.5}},                                                           thickness=1));
            connect(abdominal_aorta_C188.port_a,abdominal_aorta_C176.port_b) annotation (Line(points={{23,
                    -40.5},{18,-40.5}},                                                                                              thickness=1));
            connect(renal_R178.port_a,abdominal_aorta_C176.port_b) annotation (Line(points={{25,
                    -22.5},{18,-40.5}},                                                                                    thickness=1));
            connect(abdominal_aorta_C192.port_a,abdominal_aorta_C188.port_b) annotation (Line(points={{48,
                    -40.5},{43,-40.5}},                                                                                              thickness=1));
            connect(inferior_mesenteric_T5_C190.port_a,abdominal_aorta_C188.port_b) annotation (Line(points={{48,
                    -54.5},{43,-40.5}},                                                                                                     thickness=1));
            connect(common_iliac_R216.port_a,abdominal_aorta_C192.port_b) annotation (Line(points={{75,
                    -40.5},{68,-40.5}},                                                                                           thickness=1));
            connect(common_iliac_L194.port_a,abdominal_aorta_C192.port_b) annotation (Line(points={{74,
                    -54.5},{68,-40.5}},                                                                                           thickness=1));
            connect(internal_iliac_T1_R218.port_a,common_iliac_R216.port_b) annotation (Line(points={{98,
                    -30.5},{96,-40.5},{95,-40.5}},                                                                                  thickness=1));
            connect(external_iliac_R220.port_a,common_iliac_R216.port_b) annotation (Line(points={{99,
                    -40.5},{95,-40.5}},                                                                                          thickness=1));
            connect(profundus_T2_R224.port_a,femoral_R222.port_b) annotation (Line(points={{149,
                    -30.5},{144,-40.5}},                                                                                  thickness=1));
            connect(femoral_R226.port_a,femoral_R222.port_b) annotation (Line(points={{150,
                    -40.5},{144,-40.5}},                                                                             thickness=1));
            connect(anterior_tibial_T3_R230.port_a,popliteal_R228.port_b) annotation (Line(points={{200,
                    -30.5},{195,-40.5}},                                                                                          thickness=1));
            connect(popliteal_R232.port_a,popliteal_R228.port_b) annotation (Line(points={{199,
                    -40.5},{195,-40.5}},                                                                                 thickness=1));
            connect(internal_iliac_T1_L196.port_a,common_iliac_L194.port_b) annotation (Line(points={{99,
                    -62.5},{94,-54.5}},                                                                                             thickness=1));
            connect(external_iliac_L198.port_a,common_iliac_L194.port_b) annotation (Line(points={{100,
                    -54.5},{94,-54.5}},                                                                                          thickness=1));
            connect(profundus_T2_L202.port_a,femoral_L200.port_b) annotation (Line(points={{150,
                    -62.5},{145,-54.5}},                                                                                  thickness=1));
            connect(femoral_L204.port_a,femoral_L200.port_b) annotation (Line(points={{149,
                    -54.5},{145,-54.5}},                                                                             thickness=1));
            connect(anterior_tibial_T3_L208.port_a,popliteal_L206.port_b) annotation (Line(points={{199,
                    -62.5},{194,-54.5}},                                                                                          thickness=1));
            connect(popliteal_L210.port_a,popliteal_L206.port_b) annotation (Line(points={{200,
                    -54.5},{194,-54.5}},                                                                                 thickness=1));
            connect(subclavian_R30.port_a,subclavian_R28.port_b) annotation (Line(points={{-50,
                    121.5},{-55,121.5}},                                                                                 thickness=1));
            connect(vertebral_R272.port_a,subclavian_R28.port_b) annotation (Line(points={{-49,
                    113.5},{-55,121.5}},                                                                                 thickness=1));
            connect(ulnar_T2_R36.port_a,brachial_R34.port_b) annotation (Line(points={{25,
                    121.5},{20,121.5}},                                                                              thickness=1));
            connect(radial_T1_R44.port_a,brachial_R34.port_b) annotation (Line(points={{25,
                    111.5},{20,121.5}},                                                                               thickness=1));
            connect(common_interosseous_R38.port_a,ulnar_T2_R36.port_b) annotation (Line(points={{50,
                    121.5},{45,121.5}},                                                                                         thickness=1));
            connect(ulnar_T2_R42.port_a,ulnar_T2_R36.port_b) annotation (Line(points={{50,
                    111.5},{45,121.5}},                                                                              thickness=1));
            connect(subclavian_L78.port_a,subclavian_L66.port_b) annotation (Line(points={{-25,
                    75.5},{-26,75.5},{-26,76},{-30,76},{-30,75.5}},                                                      thickness=1));
            connect(vertebral_L2.port_a,subclavian_L66.port_b) annotation (Line(points={{-26,
                    65.5},{-30,75.5}},                                                                                 thickness=1));
            connect(ulnar_T2_L84.port_a,brachial_L82.port_b) annotation (Line(points={{50,75.5},
                    {45,75.5}},                                                                                      thickness=1));
            connect(radial_T1_L92.port_a,brachial_L82.port_b) annotation (Line(points={{50,65.5},
                    {45,75.5}},                                                                                       thickness=1));
            connect(common_interosseous_L86.port_a,ulnar_T2_L84.port_b) annotation (Line(points={{75,75.5},
                    {70,75.5}},                                                                                                 thickness=1));
            connect(ulnar_T2_L90.port_a,ulnar_T2_L84.port_b) annotation (Line(points={{75,65.5},
                    {70,75.5}},                                                                                      thickness=1));
            connect(internal_carotid_R8_A.port_a,common_carotid_R6_C.port_b) annotation (Line(points={{2,135.5},
                    {-3,135.5}},                                                                                                     thickness=1));
            connect(external_carotid_T2_R26.port_a,common_carotid_R6_C.port_b) annotation (Line(points={{3,147.5},
                    {-3,135.5}},                                                                                                       thickness=1));
            connect(internal_carotid_L50_A.port_a,common_carotid_L48_D.port_b) annotation (Line(points={{28,95.5},
                    {23,95.5}},                                                                                                        thickness=1));
            connect(external_carotid_T2_L62.port_a,common_carotid_L48_D.port_b) annotation (Line(points={{27,87.5},
                    {27,88},{23,88},{23,95.5}},                                                                                         thickness=1));
            connect(splenic_T2_C118.port_a,celiac_trunk_C116.port_b) annotation (Line(points={{-46,
                    -0.5},{-51,-0.5}},                                                                                       thickness=1));
            connect(left_gastric_T3_C120.port_a,celiac_trunk_C116.port_b) annotation (Line(points={{-45,7.5},
                    {-51,-0.5}},                                                                                                  thickness=1));
            connect(splenic_T2_C122.port_a,splenic_T2_C118.port_b) annotation (Line(points={{-18,
                    -0.5},{-26,-0.5}},                                                                                     thickness=1));
            connect(dorsal_pancreatic_T1_C124.port_a,splenic_T2_C118.port_b) annotation (Line(points={{-17,7.5},
                    {-26,-0.5}},                                                                                                     thickness=1));
            connect(splenic_T2_C126.port_a,splenic_T2_C122.port_b) annotation (Line(points={{8,7.5},
                    {2,-0.5}},                                                                                             thickness=1));
            connect(common_hepatic_C128.port_a,splenic_T2_C122.port_b) annotation (Line(points={{9,-0.5},
                    {2,-0.5}},                                                                                                 thickness=1));
            connect(hepatic_artery_proper_left_branch_C132.port_a,hepatic_artery_proper_C130.port_b) annotation (Line(points={{55,-0.5},
                    {52,-0.5}},                                                                                                                              thickness=1));
            connect(hepatic_artery_proper_right_branch_C134.port_a,hepatic_artery_proper_C130.port_b) annotation (Line(points={{56,7.5},
                    {52,-0.5}},                                                                                                                               thickness=1));
            connect(middle_colic_T8_C140.port_a,superior_mesenteric_T4_C138.port_b) annotation (Line(points={{-18,
                    -96.5},{-25,-88.5}},                                                                                                    thickness=1));
            connect(superior_mesenteric_T4_C142.port_a,superior_mesenteric_T4_C138.port_b) annotation (Line(points={{-19,
                    -88.5},{-25,-88.5}},                                                                                                           thickness=1));
            connect(jejunal_3_T10_C144.port_a,superior_mesenteric_T4_C142.port_b) annotation (Line(points={{6,-96.5},
                    {1,-88.5}},                                                                                                           thickness=1));
            connect(superior_mesenteric_T4_C146.port_a,superior_mesenteric_T4_C142.port_b) annotation (Line(points={{5,-88.5},
                    {1,-88.5}},                                                                                                                    thickness=1));
            connect(jejunal_6_T11_C148.port_a,superior_mesenteric_T4_C146.port_b) annotation (Line(points={{32,
                    -96.5},{25,-88.5}},                                                                                                   thickness=1));
            connect(superior_mesenteric_T4_C150.port_a,superior_mesenteric_T4_C146.port_b) annotation (Line(points={{31,
                    -88.5},{25,-88.5}},                                                                                                            thickness=1));
            connect(ileocolic_T9_C152.port_a,superior_mesenteric_T4_C150.port_b) annotation (Line(points={{58,
                    -96.5},{51,-88.5}},                                                                                                  thickness=1));
            connect(superior_mesenteric_T4_C154.port_a,superior_mesenteric_T4_C150.port_b) annotation (Line(points={{57,
                    -88.5},{51,-88.5}},                                                                                                            thickness=1));
            connect(ileal_4_T12_C156.port_a,superior_mesenteric_T4_C154.port_b) annotation (Line(points={{84,
                    -96.5},{77,-88.5}},                                                                                                 thickness=1));
            connect(superior_mesenteric_T4_C158.port_a,superior_mesenteric_T4_C154.port_b) annotation (Line(points={{83,
                    -88.5},{77,-88.5}},                                                                                                            thickness=1));
            connect(ileal_6_T13_C160.port_a,superior_mesenteric_T4_C158.port_b) annotation (Line(points={{108,
                    -96.5},{103,-88.5}},                                                                                                thickness=1));
            connect(superior_mesenteric_T4_C162.port_a,superior_mesenteric_T4_C158.port_b) annotation (Line(points={{107,
                    -88.5},{103,-88.5}},                                                                                                           thickness=1));
            connect(renal_anterior_branch_L168.port_a,renal_L166.port_b) annotation (Line(points={{23,
                    -64.5},{18,-64.5}},                                                                                          thickness=1));
            connect(renal_posterior_branch_T3_L174.port_a,renal_L166.port_b) annotation (Line(points={{24,
                    -74.5},{18,-64.5}},                                                                                              thickness=1));
            connect(inferior_segmental_T5_L170.port_a,renal_anterior_branch_L168.port_b) annotation (Line(points={{48,
                    -64.5},{43,-64.5}},                                                                                                          thickness=1));
            connect(superior_segmental_T4_L172.port_a,renal_anterior_branch_L168.port_b) annotation (Line(points={{47,
                    -74.5},{43,-64.5}},                                                                                                          thickness=1));
            connect(renal_anterior_branch_R180.port_a,renal_R178.port_b) annotation (Line(points={{50,
                    -22.5},{45,-22.5}},                                                                                          thickness=1));
            connect(renal_posterior_branch_T3_R186.port_a,renal_R178.port_b) annotation (Line(points={{49,
                    -14.5},{45,-22.5}},                                                                                              thickness=1));
            connect(superior_segmental_T4_R182.port_a,renal_anterior_branch_R180.port_b) annotation (Line(points={{75,
                    -22.5},{70,-22.5}},                                                                                                          thickness=1));
            connect(inferior_segmental_T5_R184.port_a,renal_anterior_branch_R180.port_b) annotation (Line(points={{74,
                    -14.5},{70,-22.5}},                                                                                                          thickness=1));
            connect(ascending_aorta_B.port_a,ascending_aorta_A.port_b) annotation (Line(points={{-216,
                    49.5},{-221,49.5}},                                                                                        thickness=1));
            connect(ascending_aorta_C.port_a,ascending_aorta_B.port_b) annotation (Line(points={{-191,
                    49.5},{-196,49.5}},                                                                                        thickness=1));
            connect(ascending_aorta_D.port_a,ascending_aorta_C.port_b) annotation (Line(points={{-166,
                    49.5},{-171,49.5}},                                                                                        thickness=1));
            connect(aortic_arch_C2.port_a,ascending_aorta_D.port_b) annotation (Line(points={{-141,
                    49.5},{-146,49.5}},                                                                                     thickness=1));
            connect(thoracic_aorta_C96.port_a,aortic_arch_C94.port_b) annotation (Line(points={{-26,
                    49.5},{-29,49.5}},                                                                                        thickness=1));
            connect(abdominal_aorta_C114.port_a,thoracic_aorta_C112.port_b) annotation (Line(points={{-99,
                    -40.5},{-99,22},{108,22},{108,49.5},{98,49.5}},                                                                 thickness=1));
            connect(hepatic_artery_proper_C130.port_a,common_hepatic_C128.port_b) annotation (Line(points={{32,-0.5},
                    {29,-0.5}},                                                                                                           thickness=1));
            connect(femoral_R222.port_a,external_iliac_R220.port_b) annotation (Line(points={{124,
                    -40.5},{119,-40.5}},                                                                                    thickness=1));
            connect(popliteal_R228.port_a,femoral_R226.port_b) annotation (Line(points={{175,
                    -40.5},{170,-40.5}},                                                                               thickness=1));
            connect(tibiofibular_trunk_R234.port_a,popliteal_R232.port_b) annotation (Line(points={{224,
                    -40.5},{219,-40.5}},                                                                                          thickness=1));
            connect(posterior_tibial_T4_R236.port_a,tibiofibular_trunk_R234.port_b) annotation (Line(points={{249,
                    -40.5},{249,-40},{244,-40},{244,-40.5}},                                                                                thickness=1));
            connect(femoral_L200.port_a,external_iliac_L198.port_b) annotation (Line(points={{125,
                    -54.5},{120,-54.5}},                                                                                    thickness=1));
            connect(popliteal_L206.port_a,femoral_L204.port_b) annotation (Line(points={{174,
                    -54.5},{169,-54.5}},                                                                               thickness=1));
            connect(tibiofibular_trunk_L212.port_a,popliteal_L210.port_b) annotation (Line(points={{225,
                    -54.5},{220,-54.5}},                                                                                          thickness=1));
            connect(posterior_tibial_T4_L214.port_a,tibiofibular_trunk_L212.port_b) annotation (Line(points={{250,
                    -54.5},{245,-54.5}},                                                                                                    thickness=1));
            connect(axillary_R32.port_a,subclavian_R30.port_b) annotation (Line(points={{-25,
                    121.5},{-30,121.5}},                                                                               thickness=1));
            connect(brachial_R34.port_a,axillary_R32.port_b) annotation (Line(points={{0,121.5},
                    {-5,121.5}},                                                                                     thickness=1));
            connect(posterior_interosseous_T3_R40.port_a,common_interosseous_R38.port_b) annotation (Line(points={{75,
                    121.5},{70,121.5}},                                                                                                          thickness=1));
            connect(axillary_L80.port_a,subclavian_L78.port_b) annotation (Line(points={{0,75.5},
                    {-5,75.5}},                                                                                        thickness=1));
            connect(brachial_L82.port_a,axillary_L80.port_b) annotation (Line(points={{25,75.5},
                    {20,75.5}},                                                                                      thickness=1));
            connect(posterior_interosseous_T3_L88.port_a,common_interosseous_L86.port_b) annotation (Line(points={{100,
                    75.5},{95,75.5}},                                                                                                            thickness=1));
            connect(common_carotid_R6_B.port_a,common_carotid_R6_A.port_b) annotation (Line(points={{-48,
                    135.5},{-53,135.5}},                                                                                           thickness=1));
            connect(common_carotid_R6_C.port_a,common_carotid_R6_B.port_b) annotation (Line(points={{-23,
                    135.5},{-28,135.5}},                                                                                           thickness=1));
            connect(internal_carotid_R8_B.port_a,internal_carotid_R8_A.port_b) annotation (Line(points={{27,
                    135.5},{22,135.5}},                                                                                                thickness=1));
            connect(internal_carotid_R8_C.port_a,internal_carotid_R8_B.port_b) annotation (Line(points={{54,
                    135.5},{47,135.5}},                                                                                                thickness=1));
            connect(common_carotid_L48_B.port_a,common_carotid_L48_A.port_b) annotation (Line(points={{-47,
                    95.5},{-52,95.5}},                                                                                               thickness=1));
            connect(common_carotid_L48_C.port_a,common_carotid_L48_B.port_b) annotation (Line(points={{-22,
                    95.5},{-27,95.5}},                                                                                               thickness=1));
            connect(common_carotid_L48_D.port_a,common_carotid_L48_C.port_b) annotation (Line(points={{3,95.5},
                    {-2,95.5}},                                                                                                      thickness=1));
            connect(internal_carotid_L50_B.port_a,internal_carotid_L50_A.port_b) annotation (Line(points={{53,95.5},
                    {48,95.5}},                                                                                                          thickness=1));
            connect(internal_carotid_L50_C.port_a,internal_carotid_L50_B.port_b) annotation (Line(points={{78,95.5},
                    {73,95.5}},                                                                                                          thickness=1));
            connect(port_a, ascending_aorta_A.port_a) annotation (Line(
                points={{-260,50},{-248,50},{-248,49.5},{-241,49.5}},
                color={0,0,0},
                thickness=1));
            connect(pq_terminator_v.port_a, port_b) annotation (Line(
                points={{120,10},{134,10}},
                color={0,0,0},
                thickness=1));
            annotation (Icon(graphics={
                  Line(
                    points={{-88,18},{-88,22},{-80,48},{-54,54},{-28,46},{-16,-98}},
                    color={238,46,47},
                    thickness=1),
                  Line(
                    points={{-100,80},{-80,48},{-54,54},{-74,86},{-68,98}},
                    color={238,46,47},
                    thickness=1),
                  Line(
                    points={{-74,86},{-94,98}},
                    color={238,46,47},
                    thickness=1),
                  Line(
                    points={{-28,46},{-12,92}},
                    color={238,46,47},
                    thickness=1),
                  Line(
                    points={{-26,10},{-58,-10}},
                    color={238,46,47},
                    thickness=1),
                  Line(
                    points={{-18,72},{44,80}},
                    color={238,46,47},
                    thickness=1),
                  Line(
                    points={{-22,-12},{46,-42}},
                    color={238,46,47},
                    thickness=1),      Text(
                    extent={{-100,-80},{100,0}},
                    lineColor={0,0,0},
                    pattern=LinePattern.None,
                    lineThickness=0.5,
                    fillColor={244,125,35},
                    fillPattern=FillPattern.None,
                    textString="ADAN86")}), Diagram(graphics={
                  Rectangle(
                    extent={{-64,6},{-58,-8}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{32,-16},{38,-30}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{6,-58},{12,-72}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{106,-24},{112,-38}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{156,-24},{162,-38}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{206,-24},{212,-38}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{256,-34},{262,-48}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{256,-48},{262,-62}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{106,-56},{112,-70}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{156,-56},{162,-70}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{206,-56},{212,-70}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{32,118},{38,104}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{58,118},{64,104}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{82,72},{88,58}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{56,72},{62,58}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{60,142},{66,128}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{10,154},{16,140}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{84,102},{90,88}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{34,94},{40,80}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{-42,120},{-36,106}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{-20,72},{-14,58}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{-58,-80},{142,-108}},
                    fillColor={255,255,255},
                    fillPattern=FillPattern.Solid,
                    lineColor={238,46,47},
                    lineThickness=0.5),
                  Rectangle(
                    extent={{-6,44},{104,32}},
                    fillColor={255,255,255},
                    fillPattern=FillPattern.Solid,
                    lineColor={238,46,47},
                    lineThickness=0.5)}));
          end arteries_ADAN86;

          model arteries_ADAN86_baroreflex
            import ADAN_main;
            import ADAN_main;
            extends
              ADAN_main.Components.Subsystems.Systemic.ADAN86ArterialTree.arteries_ADAN86(
               redeclare ADAN_main.Components.Obsolete.pv_jII_type_baroreceptor
                aortic_arch_C46, redeclare
                ADAN_main.Components.Obsolete.pv_type_baroreceptor
                internal_carotid_R8_A);
            ADAN_main.Components.Subsystems.Baroreflex.Baroreflex baroreflex
              annotation (Placement(transformation(extent={{134,82},{154,62}})));
            Physiolibrary.Types.RealIO.FrequencyOutput HR annotation (Placement(
                  transformation(extent={{144,40},{164,60}}), iconTransformation(extent={{92,-110},
                      {112,-90}})));
          equation
            connect(baroreflex.HR,HR)  annotation (Line(points={{154,81.8},{150,81.8},
                    {150,50},{154,50}},
                                     color={0,0,127}));
            connect(baroreflex.carotid_BR, internal_carotid_R8_A.y) annotation (Line(
                  points={{134,82},{22,82},{22,133},{20.2,133}},     color={0,0,127}));
            connect(aortic_arch_C46.y, baroreflex.aortic_BR) annotation (Line(points={{-86.8,
                    47},{-85.3,47},{-85.3,62},{134,62}},             color={0,0,127}));
          end arteries_ADAN86_baroreflex;

          model arteries_ADAN86_simplified
            inner parameter Real periferyModifier = 1.3;

            Physiolibrary.Types.RealIO.PressureInput thoracic_pressure annotation (Placement(
                transformation(extent={{-124,-120},{-84,-80}}),
                                                              iconTransformation(extent={{-124,
                      -120},{-84,-80}})));
            Parameters_cellml.Parameters_Systemic Parameters_Systemic1
              annotation (Placement(transformation(extent={{-100,-79},{-80,-74}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Ascending_aorta
              ascending_aorta_A(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_ascending_aorta_A,
              E=Parameters_Systemic1.E_ascending_aorta_A,
              r=Parameters_Systemic1.r_ascending_aorta_A) annotation (Placement(
                  transformation(extent={{-241,47},{-221,52}})));
            ADAN_main.Components.Obsolete.pv_type_thoracic ascending_aorta_B(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_ascending_aorta_B,
              E=Parameters_Systemic1.E_ascending_aorta_B,
              r=Parameters_Systemic1.r_ascending_aorta_B) annotation (Placement(
                  transformation(extent={{-216,47},{-196,52}})));
            ADAN_main.Components.Obsolete.pv_type_thoracic ascending_aorta_C(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_ascending_aorta_C,
              E=Parameters_Systemic1.E_ascending_aorta_C,
              r=Parameters_Systemic1.r_ascending_aorta_C) annotation (Placement(
                  transformation(extent={{-191,47},{-171,52}})));
            ADAN_main.Components.Obsolete.pv_type_thoracic ascending_aorta_D(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_ascending_aorta_D,
              E=Parameters_Systemic1.E_ascending_aorta_D,
              r=Parameters_Systemic1.r_ascending_aorta_D) annotation (Placement(
                  transformation(extent={{-166,47},{-146,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic aortic_arch_C2(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_aortic_arch_C2,
              E=Parameters_Systemic1.E_aortic_arch_C2,
              r=Parameters_Systemic1.r_aortic_arch_C2) annotation (Placement(
                  transformation(extent={{-141,47},{-121,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              brachiocephalic_trunk_C4(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_brachiocephalic_trunk_C4,
              E=Parameters_Systemic1.E_brachiocephalic_trunk_C4,
              r=Parameters_Systemic1.r_brachiocephalic_trunk_C4) annotation (
                Placement(transformation(extent={{-98,127},{-78,132}})));
            replaceable ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              aortic_arch_C46(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_aortic_arch_C46,
              E=Parameters_Systemic1.E_aortic_arch_C46,
              r=Parameters_Systemic1.r_aortic_arch_C46) annotation (Placement(
                  transformation(extent={{-105,47},{-85,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic aortic_arch_C64(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_aortic_arch_C64,
              E=Parameters_Systemic1.E_aortic_arch_C64,
              r=Parameters_Systemic1.r_aortic_arch_C64) annotation (Placement(
                  transformation(extent={{-78,47},{-58,52}})));
            ADAN_main.Components.Obsolete.pv_type_thoracic aortic_arch_C94(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_aortic_arch_C94,
              E=Parameters_Systemic1.E_aortic_arch_C94,
              r=Parameters_Systemic1.r_aortic_arch_C94) annotation (Placement(
                  transformation(extent={{-49,47},{-29,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              thoracic_aorta_C96(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_thoracic_aorta_C96,
              E=Parameters_Systemic1.E_thoracic_aorta_C96,
              r=Parameters_Systemic1.r_thoracic_aorta_C96)
              annotation (Placement(transformation(extent={{-26,47},{-6,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              thoracic_aorta_C100(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_thoracic_aorta_C100,
              E=Parameters_Systemic1.E_thoracic_aorta_C100,
              r=Parameters_Systemic1.r_thoracic_aorta_C100)
              annotation (Placement(transformation(extent={{3,47},{23,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              thoracic_aorta_C104(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_thoracic_aorta_C104,
              E=Parameters_Systemic1.E_thoracic_aorta_C104,
              r=Parameters_Systemic1.r_thoracic_aorta_C104)
              annotation (Placement(transformation(extent={{28,47},{48,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type_thoracic
              thoracic_aorta_C108(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_thoracic_aorta_C108,
              E=Parameters_Systemic1.E_thoracic_aorta_C108,
              r=Parameters_Systemic1.r_thoracic_aorta_C108)
              annotation (Placement(transformation(extent={{53,47},{73,52}})));
            ADAN_main.Components.Obsolete.pv_type_thoracic thoracic_aorta_C112(
              thoracic_pressure=thoracic_pressure,
              l=Parameters_Systemic1.l_thoracic_aorta_C112,
              E=Parameters_Systemic1.E_thoracic_aorta_C112,
              r=Parameters_Systemic1.r_thoracic_aorta_C112)
              annotation (Placement(transformation(extent={{78,47},{98,52}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C114(
              l=Parameters_Systemic1.l_abdominal_aorta_C114,
              E=Parameters_Systemic1.E_abdominal_aorta_C114,
              r=Parameters_Systemic1.r_abdominal_aorta_C114) annotation (
                Placement(transformation(extent={{-99,-43},{-79,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C136(
              l=Parameters_Systemic1.l_abdominal_aorta_C136,
              E=Parameters_Systemic1.E_abdominal_aorta_C136,
              r=Parameters_Systemic1.r_abdominal_aorta_C136) annotation (
                Placement(transformation(extent={{-74,-43},{-54,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C164(
              l=Parameters_Systemic1.l_abdominal_aorta_C164,
              E=Parameters_Systemic1.E_abdominal_aorta_C164,
              r=Parameters_Systemic1.r_abdominal_aorta_C164) annotation (
                Placement(transformation(extent={{-47,-43},{-27,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C176(
              l=Parameters_Systemic1.l_abdominal_aorta_C176,
              E=Parameters_Systemic1.E_abdominal_aorta_C176,
              r=Parameters_Systemic1.r_abdominal_aorta_C176) annotation (
                Placement(transformation(extent={{-2,-43},{18,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C188(
              l=Parameters_Systemic1.l_abdominal_aorta_C188,
              E=Parameters_Systemic1.E_abdominal_aorta_C188,
              r=Parameters_Systemic1.r_abdominal_aorta_C188) annotation (
                Placement(transformation(extent={{23,-43},{43,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type abdominal_aorta_C192(
              l=Parameters_Systemic1.l_abdominal_aorta_C192,
              E=Parameters_Systemic1.E_abdominal_aorta_C192,
              r=Parameters_Systemic1.r_abdominal_aorta_C192) annotation (
                Placement(transformation(extent={{48,-43},{68,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_intercostal_T1_R98(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_intercostal_T1_R98,
              E=Parameters_Systemic1.E_posterior_intercostal_T1_R98,
              R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_R98,
              C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_R98,
              r=Parameters_Systemic1.r_posterior_intercostal_T1_R98)
              annotation (Placement(transformation(extent={{3,37},{23,42}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_intercostal_T1_L102(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_intercostal_T1_L102,
              E=Parameters_Systemic1.E_posterior_intercostal_T1_L102,
              R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_L102,
              C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_L102,
              r=Parameters_Systemic1.r_posterior_intercostal_T1_L102)
              annotation (Placement(transformation(extent={{28,37},{48,42}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_intercostal_T2_R106(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_intercostal_T2_R106,
              E=Parameters_Systemic1.E_posterior_intercostal_T2_R106,
              R_T=Parameters_Systemic1.R_T_posterior_intercostal_T2_R106,
              C_T=Parameters_Systemic1.C_T_posterior_intercostal_T2_R106,
              r=Parameters_Systemic1.r_posterior_intercostal_T2_R106)
              annotation (Placement(transformation(extent={{51,37},{71,42}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_intercostal_T2_L110(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_intercostal_T2_L110,
              E=Parameters_Systemic1.E_posterior_intercostal_T2_L110,
              R_T=Parameters_Systemic1.R_T_posterior_intercostal_T2_L110,
              C_T=Parameters_Systemic1.C_T_posterior_intercostal_T2_L110,
              r=Parameters_Systemic1.r_posterior_intercostal_T2_L110)
              annotation (Placement(transformation(extent={{78,37},{98,42}})));
            ADAN_main.Components.Obsolete.pv_jII_type celiac_trunk_C116(
              l=Parameters_Systemic1.l_celiac_trunk_C116,
              E=Parameters_Systemic1.E_celiac_trunk_C116,
              r=Parameters_Systemic1.r_celiac_trunk_C116)
              annotation (Placement(transformation(extent={{-71,-3},{-51,2}})));
            ADAN_main.Components.Obsolete.pv_jII_type splenic_T2_C118(
              l=Parameters_Systemic1.l_splenic_T2_C118,
              E=Parameters_Systemic1.E_splenic_T2_C118,
              r=Parameters_Systemic1.r_splenic_T2_C118)
              annotation (Placement(transformation(extent={{-46,-3},{-26,2}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              left_gastric_T3_C120(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_left_gastric_T3_C120,
              E=Parameters_Systemic1.E_left_gastric_T3_C120,
              R_T=Parameters_Systemic1.R_T_left_gastric_T3_C120,
              C_T=Parameters_Systemic1.C_T_left_gastric_T3_C120,
              r=Parameters_Systemic1.r_left_gastric_T3_C120)
              annotation (Placement(transformation(extent={{-45,5},{-25,10}})));
            ADAN_main.Components.Obsolete.pv_jII_type splenic_T2_C122(
              l=Parameters_Systemic1.l_splenic_T2_C122,
              E=Parameters_Systemic1.E_splenic_T2_C122,
              r=Parameters_Systemic1.r_splenic_T2_C122)
              annotation (Placement(transformation(extent={{-18,-3},{2,2}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              dorsal_pancreatic_T1_C124(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_dorsal_pancreatic_T1_C124,
              E=Parameters_Systemic1.E_dorsal_pancreatic_T1_C124,
              R_T=Parameters_Systemic1.R_T_dorsal_pancreatic_T1_C124,
              C_T=Parameters_Systemic1.C_T_dorsal_pancreatic_T1_C124,
              r=Parameters_Systemic1.r_dorsal_pancreatic_T1_C124)
              annotation (Placement(transformation(extent={{-17,5},{3,10}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              splenic_T2_C126(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_splenic_T2_C126,
              E=Parameters_Systemic1.E_splenic_T2_C126,
              R_T=Parameters_Systemic1.R_T_splenic_T2_C126,
              C_T=Parameters_Systemic1.C_T_splenic_T2_C126,
              r=Parameters_Systemic1.r_splenic_T2_C126)
              annotation (Placement(transformation(extent={{8,5},{28,10}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_hepatic_C128(
              l=Parameters_Systemic1.l_common_hepatic_C128,
              E=Parameters_Systemic1.E_common_hepatic_C128,
              r=Parameters_Systemic1.r_common_hepatic_C128)
              annotation (Placement(transformation(extent={{9,-3},{29,2}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              hepatic_artery_proper_C130(
              l=Parameters_Systemic1.l_hepatic_artery_proper_C130,
              E=Parameters_Systemic1.E_hepatic_artery_proper_C130,
              r=Parameters_Systemic1.r_hepatic_artery_proper_C130)
              annotation (Placement(transformation(extent={{32,-3},{52,2}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              hepatic_artery_proper_left_branch_C132(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_hepatic_artery_proper_left_branch_C132,
              E=Parameters_Systemic1.E_hepatic_artery_proper_left_branch_C132,
              R_T=Parameters_Systemic1.R_T_hepatic_artery_proper_left_branch_C132,
              C_T=Parameters_Systemic1.C_T_hepatic_artery_proper_left_branch_C132,
              r=Parameters_Systemic1.r_hepatic_artery_proper_left_branch_C132)
              annotation (Placement(transformation(extent={{55,-3},{75,2}})));

            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              hepatic_artery_proper_right_branch_C134(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_hepatic_artery_proper_right_branch_C134,
              E=Parameters_Systemic1.E_hepatic_artery_proper_right_branch_C134,
              R_T=Parameters_Systemic1.R_T_hepatic_artery_proper_right_branch_C134,
              C_T=Parameters_Systemic1.C_T_hepatic_artery_proper_right_branch_C134,
              r=Parameters_Systemic1.r_hepatic_artery_proper_right_branch_C134)
              annotation (Placement(transformation(extent={{56,5},{76,10}})));

            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C138(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C138,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C138,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C138) annotation (
               Placement(transformation(extent={{-45,-91},{-25,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              middle_colic_T8_C140(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_middle_colic_T8_C140,
              E=Parameters_Systemic1.E_middle_colic_T8_C140,
              R_T=Parameters_Systemic1.R_T_middle_colic_T8_C140,
              C_T=Parameters_Systemic1.C_T_middle_colic_T8_C140,
              r=Parameters_Systemic1.r_middle_colic_T8_C140) annotation (
                Placement(transformation(extent={{-18,-99},{2,-94}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C142(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C142,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C142,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C142) annotation (
               Placement(transformation(extent={{-19,-91},{1,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              jejunal_3_T10_C144(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_jejunal_3_T10_C144,
              E=Parameters_Systemic1.E_jejunal_3_T10_C144,
              R_T=Parameters_Systemic1.R_T_jejunal_3_T10_C144,
              C_T=Parameters_Systemic1.C_T_jejunal_3_T10_C144,
              r=Parameters_Systemic1.r_jejunal_3_T10_C144)
              annotation (Placement(transformation(extent={{6,-99},{26,-94}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C146(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C146,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C146,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C146)
              annotation (Placement(transformation(extent={{5,-91},{25,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              jejunal_6_T11_C148(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_jejunal_6_T11_C148,
              E=Parameters_Systemic1.E_jejunal_6_T11_C148,
              R_T=Parameters_Systemic1.R_T_jejunal_6_T11_C148,
              C_T=Parameters_Systemic1.C_T_jejunal_6_T11_C148,
              r=Parameters_Systemic1.r_jejunal_6_T11_C148) annotation (
                Placement(transformation(extent={{32,-99},{52,-94}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C150(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C150,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C150,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C150) annotation (
               Placement(transformation(extent={{31,-91},{51,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              ileocolic_T9_C152(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_ileocolic_T9_C152,
              E=Parameters_Systemic1.E_ileocolic_T9_C152,
              R_T=Parameters_Systemic1.R_T_ileocolic_T9_C152,
              C_T=Parameters_Systemic1.C_T_ileocolic_T9_C152,
              r=Parameters_Systemic1.r_ileocolic_T9_C152) annotation (Placement(
                  transformation(extent={{58,-99},{78,-94}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C154(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C154,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C154,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C154) annotation (
               Placement(transformation(extent={{57,-91},{77,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              ileal_4_T12_C156(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_ileal_4_T12_C156,
              E=Parameters_Systemic1.E_ileal_4_T12_C156,
              R_T=Parameters_Systemic1.R_T_ileal_4_T12_C156,
              C_T=Parameters_Systemic1.C_T_ileal_4_T12_C156,
              r=Parameters_Systemic1.r_ileal_4_T12_C156) annotation (Placement(
                  transformation(extent={{84,-99},{104,-94}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              superior_mesenteric_T4_C158(
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C158,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C158,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C158) annotation (
               Placement(transformation(extent={{83,-91},{103,-86}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              ileal_6_T13_C160(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_ileal_6_T13_C160,
              E=Parameters_Systemic1.E_ileal_6_T13_C160,
              R_T=Parameters_Systemic1.R_T_ileal_6_T13_C160,
              C_T=Parameters_Systemic1.C_T_ileal_6_T13_C160,
              r=Parameters_Systemic1.r_ileal_6_T13_C160) annotation (Placement(
                  transformation(extent={{108,-99},{128,-94}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              superior_mesenteric_T4_C162(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_superior_mesenteric_T4_C162,
              E=Parameters_Systemic1.E_superior_mesenteric_T4_C162,
              R_T=Parameters_Systemic1.R_T_superior_mesenteric_T4_C162,
              C_T=Parameters_Systemic1.C_T_superior_mesenteric_T4_C162,
              r=Parameters_Systemic1.r_superior_mesenteric_T4_C162) annotation (
               Placement(transformation(extent={{107,-91},{127,-86}})));
            ADAN_main.Components.Obsolete.pv_jII_type renal_L166(
              l=Parameters_Systemic1.l_renal_L166,
              E=Parameters_Systemic1.E_renal_L166,
              r=Parameters_Systemic1.r_renal_L166) annotation (Placement(
                  transformation(extent={{-2,-67},{18,-62}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              renal_anterior_branch_L168(
              l=Parameters_Systemic1.l_renal_anterior_branch_L168,
              E=Parameters_Systemic1.E_renal_anterior_branch_L168,
              r=Parameters_Systemic1.r_renal_anterior_branch_L168) annotation (
                Placement(transformation(extent={{23,-67},{43,-62}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              inferior_segmental_T5_L170(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_inferior_segmental_T5_L170,
              E=Parameters_Systemic1.E_inferior_segmental_T5_L170,
              R_T=Parameters_Systemic1.R_T_inferior_segmental_T5_L170,
              C_T=Parameters_Systemic1.C_T_inferior_segmental_T5_L170,
              r=Parameters_Systemic1.r_inferior_segmental_T5_L170) annotation (
                Placement(transformation(extent={{48,-67},{68,-62}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              superior_segmental_T4_L172(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_superior_segmental_T4_L172,
              E=Parameters_Systemic1.E_superior_segmental_T4_L172,
              R_T=Parameters_Systemic1.R_T_superior_segmental_T4_L172,
              C_T=Parameters_Systemic1.C_T_superior_segmental_T4_L172,
              r=Parameters_Systemic1.r_superior_segmental_T4_L172) annotation (
                Placement(transformation(extent={{47,-77},{67,-72}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              renal_posterior_branch_T3_L174(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_renal_posterior_branch_T3_L174,
              E=Parameters_Systemic1.E_renal_posterior_branch_T3_L174,
              R_T=Parameters_Systemic1.R_T_renal_posterior_branch_T3_L174,
              C_T=Parameters_Systemic1.C_T_renal_posterior_branch_T3_L174,
              r=Parameters_Systemic1.r_renal_posterior_branch_T3_L174)
              annotation (Placement(transformation(extent={{24,-77},{44,-72}})));
            ADAN_main.Components.Obsolete.pv_jII_type renal_R178(
              l=Parameters_Systemic1.l_renal_R178,
              E=Parameters_Systemic1.E_renal_R178,
              r=Parameters_Systemic1.r_renal_R178) annotation (Placement(
                  transformation(extent={{25,-25},{45,-20}})));
            ADAN_main.Components.Obsolete.pv_jII_type
              renal_anterior_branch_R180(
              l=Parameters_Systemic1.l_renal_anterior_branch_R180,
              E=Parameters_Systemic1.E_renal_anterior_branch_R180,
              r=Parameters_Systemic1.r_renal_anterior_branch_R180) annotation (
                Placement(transformation(extent={{50,-25},{70,-20}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              superior_segmental_T4_R182(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_superior_segmental_T4_R182,
              E=Parameters_Systemic1.E_superior_segmental_T4_R182,
              R_T=Parameters_Systemic1.R_T_superior_segmental_T4_R182,
              C_T=Parameters_Systemic1.C_T_superior_segmental_T4_R182,
              r=Parameters_Systemic1.r_superior_segmental_T4_R182) annotation (
                Placement(transformation(extent={{75,-25},{95,-20}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              inferior_segmental_T5_R184(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_inferior_segmental_T5_R184,
              E=Parameters_Systemic1.E_inferior_segmental_T5_R184,
              R_T=Parameters_Systemic1.R_T_inferior_segmental_T5_R184,
              C_T=Parameters_Systemic1.C_T_inferior_segmental_T5_R184,
              r=Parameters_Systemic1.r_inferior_segmental_T5_R184) annotation (
                Placement(transformation(extent={{74,-17},{94,-12}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              renal_posterior_branch_T3_R186(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_renal_posterior_branch_T3_R186,
              E=Parameters_Systemic1.E_renal_posterior_branch_T3_R186,
              R_T=Parameters_Systemic1.R_T_renal_posterior_branch_T3_R186,
              C_T=Parameters_Systemic1.C_T_renal_posterior_branch_T3_R186,
              r=Parameters_Systemic1.r_renal_posterior_branch_T3_R186)
              annotation (Placement(transformation(extent={{49,-17},{69,-12}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              inferior_mesenteric_T5_C190(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_inferior_mesenteric_T5_C190,
              E=Parameters_Systemic1.E_inferior_mesenteric_T5_C190,
              R_T=Parameters_Systemic1.R_T_inferior_mesenteric_T5_C190,
              C_T=Parameters_Systemic1.C_T_inferior_mesenteric_T5_C190,
              r=Parameters_Systemic1.r_inferior_mesenteric_T5_C190) annotation (
               Placement(transformation(extent={{48,-57},{68,-52}})));
            ADAN_main.Components.Obsolete.pv_jII_type common_iliac_R216(
              l=Parameters_Systemic1.l_common_iliac_R216,
              E=Parameters_Systemic1.E_common_iliac_R216,
              r=Parameters_Systemic1.r_common_iliac_R216) annotation (Placement(
                  transformation(extent={{75,-43},{95,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              internal_iliac_T1_R218(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_internal_iliac_T1_R218,
              E=Parameters_Systemic1.E_internal_iliac_T1_R218,
              R_T=Parameters_Systemic1.R_T_internal_iliac_T1_R218,
              C_T=Parameters_Systemic1.C_T_internal_iliac_T1_R218,
              r=Parameters_Systemic1.r_internal_iliac_T1_R218) annotation (
                Placement(transformation(extent={{98,-33},{118,-28}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              external_iliac_R220(
              l=Parameters_Systemic1.l_external_iliac_R220,
              E=Parameters_Systemic1.E_external_iliac_R220,
              r=Parameters_Systemic1.r_external_iliac_R220) annotation (
                Placement(transformation(extent={{99,-43},{119,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type femoral_R222(
              l=Parameters_Systemic1.l_femoral_R222,
              E=Parameters_Systemic1.E_femoral_R222,
              r=Parameters_Systemic1.r_femoral_R222) annotation (Placement(
                  transformation(extent={{124,-43},{144,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              profundus_T2_R224(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_profundus_T2_R224,
              E=Parameters_Systemic1.E_profundus_T2_R224,
              R_T=Parameters_Systemic1.R_T_profundus_T2_R224,
              C_T=Parameters_Systemic1.C_T_profundus_T2_R224,
              r=Parameters_Systemic1.r_profundus_T2_R224) annotation (Placement(
                  transformation(extent={{149,-33},{169,-28}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              femoral_R226(
              l=Parameters_Systemic1.l_femoral_R226,
              E=Parameters_Systemic1.E_femoral_R226,
              r=Parameters_Systemic1.r_femoral_R226) annotation (Placement(
                  transformation(extent={{150,-43},{170,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type popliteal_R228(
              l=Parameters_Systemic1.l_popliteal_R228,
              E=Parameters_Systemic1.E_popliteal_R228,
              r=Parameters_Systemic1.r_popliteal_R228) annotation (Placement(
                  transformation(extent={{175,-43},{195,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              anterior_tibial_T3_R230(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_anterior_tibial_T3_R230,
              E=Parameters_Systemic1.E_anterior_tibial_T3_R230,
              R_T=Parameters_Systemic1.R_T_anterior_tibial_T3_R230,
              C_T=Parameters_Systemic1.C_T_anterior_tibial_T3_R230,
              r=Parameters_Systemic1.r_anterior_tibial_T3_R230) annotation (
                Placement(transformation(extent={{200,-33},{220,-28}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              popliteal_R232(
              l=Parameters_Systemic1.l_popliteal_R232,
              E=Parameters_Systemic1.E_popliteal_R232,
              r=Parameters_Systemic1.r_popliteal_R232) annotation (Placement(
                  transformation(extent={{199,-43},{219,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              tibiofibular_trunk_R234(
              l=Parameters_Systemic1.l_tibiofibular_trunk_R234,
              E=Parameters_Systemic1.E_tibiofibular_trunk_R234,
              r=Parameters_Systemic1.r_tibiofibular_trunk_R234) annotation (
                Placement(transformation(extent={{224,-43},{244,-38}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_tibial_T4_R236(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_tibial_T4_R236,
              E=Parameters_Systemic1.E_posterior_tibial_T4_R236,
              R_T=Parameters_Systemic1.R_T_posterior_tibial_T4_R236,
              C_T=Parameters_Systemic1.C_T_posterior_tibial_T4_R236,
              r=Parameters_Systemic1.r_posterior_tibial_T4_R236) annotation (
                Placement(transformation(extent={{249,-43},{269,-38}})));
            ADAN_main.Components.Obsolete.pv_jII_type common_iliac_L194(
              l=Parameters_Systemic1.l_common_iliac_L194,
              E=Parameters_Systemic1.E_common_iliac_L194,
              r=Parameters_Systemic1.r_common_iliac_L194) annotation (Placement(
                  transformation(extent={{74,-57},{94,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              internal_iliac_T1_L196(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_internal_iliac_T1_L196,
              E=Parameters_Systemic1.E_internal_iliac_T1_L196,
              R_T=Parameters_Systemic1.R_T_internal_iliac_T1_L196,
              C_T=Parameters_Systemic1.C_T_internal_iliac_T1_L196,
              r=Parameters_Systemic1.r_internal_iliac_T1_L196) annotation (
                Placement(transformation(extent={{99,-65},{119,-60}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              external_iliac_L198(
              l=Parameters_Systemic1.l_external_iliac_L198,
              E=Parameters_Systemic1.E_external_iliac_L198,
              r=Parameters_Systemic1.r_external_iliac_L198) annotation (
                Placement(transformation(extent={{100,-57},{120,-52}})));
            ADAN_main.Components.Obsolete.pv_jII_type femoral_L200(
              l=Parameters_Systemic1.l_femoral_L200,
              E=Parameters_Systemic1.E_femoral_L200,
              r=Parameters_Systemic1.r_femoral_L200) annotation (Placement(
                  transformation(extent={{125,-57},{145,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              profundus_T2_L202(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_profundus_T2_L202,
              E=Parameters_Systemic1.E_profundus_T2_L202,
              R_T=Parameters_Systemic1.R_T_profundus_T2_L202,
              C_T=Parameters_Systemic1.C_T_profundus_T2_L202,
              r=Parameters_Systemic1.r_profundus_T2_L202) annotation (Placement(
                  transformation(extent={{150,-65},{170,-60}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              femoral_L204(
              l=Parameters_Systemic1.l_femoral_L204,
              E=Parameters_Systemic1.E_femoral_L204,
              r=Parameters_Systemic1.r_femoral_L204) annotation (Placement(
                  transformation(extent={{149,-57},{169,-52}})));
            ADAN_main.Components.Obsolete.pv_jII_type popliteal_L206(
              l=Parameters_Systemic1.l_popliteal_L206,
              E=Parameters_Systemic1.E_popliteal_L206,
              r=Parameters_Systemic1.r_popliteal_L206) annotation (Placement(
                  transformation(extent={{174,-57},{194,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              anterior_tibial_T3_L208(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_anterior_tibial_T3_L208,
              E=Parameters_Systemic1.E_anterior_tibial_T3_L208,
              R_T=Parameters_Systemic1.R_T_anterior_tibial_T3_L208,
              C_T=Parameters_Systemic1.C_T_anterior_tibial_T3_L208,
              r=Parameters_Systemic1.r_anterior_tibial_T3_L208) annotation (
                Placement(transformation(extent={{199,-65},{219,-60}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              popliteal_L210(
              l=Parameters_Systemic1.l_popliteal_L210,
              E=Parameters_Systemic1.E_popliteal_L210,
              r=Parameters_Systemic1.r_popliteal_L210) annotation (Placement(
                  transformation(extent={{200,-57},{220,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              tibiofibular_trunk_L212(
              l=Parameters_Systemic1.l_tibiofibular_trunk_L212,
              E=Parameters_Systemic1.E_tibiofibular_trunk_L212,
              r=Parameters_Systemic1.r_tibiofibular_trunk_L212) annotation (
                Placement(transformation(extent={{225,-57},{245,-52}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_tibial_T4_L214(
              p_out=u_ivl,
              l=Parameters_Systemic1.l_posterior_tibial_T4_L214,
              E=Parameters_Systemic1.E_posterior_tibial_T4_L214,
              R_T=Parameters_Systemic1.R_T_posterior_tibial_T4_L214,
              C_T=Parameters_Systemic1.C_T_posterior_tibial_T4_L214,
              r=Parameters_Systemic1.r_posterior_tibial_T4_L214) annotation (
                Placement(transformation(extent={{250,-57},{270,-52}})));
            ADAN_main.Components.Obsolete.pv_jII_type subclavian_R28(
              l=Parameters_Systemic1.l_subclavian_R28,
              E=Parameters_Systemic1.E_subclavian_R28,
              r=Parameters_Systemic1.r_subclavian_R28) annotation (Placement(
                  transformation(extent={{-75,119},{-55,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              subclavian_R30(
              l=Parameters_Systemic1.l_subclavian_R30,
              E=Parameters_Systemic1.E_subclavian_R30,
              r=Parameters_Systemic1.r_subclavian_R30) annotation (Placement(
                  transformation(extent={{-50,119},{-30,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              axillary_R32(
              l=Parameters_Systemic1.l_axillary_R32,
              E=Parameters_Systemic1.E_axillary_R32,
              r=Parameters_Systemic1.r_axillary_R32) annotation (Placement(
                  transformation(extent={{-25,119},{-5,124}})));
            ADAN_main.Components.Obsolete.pv_jII_type brachial_R34(
              l=Parameters_Systemic1.l_brachial_R34,
              E=Parameters_Systemic1.E_brachial_R34,
              r=Parameters_Systemic1.r_brachial_R34)
              annotation (Placement(transformation(extent={{0,119},{20,124}})));
            ADAN_main.Components.Obsolete.pv_jII_type ulnar_T2_R36(
              l=Parameters_Systemic1.l_ulnar_T2_R36,
              E=Parameters_Systemic1.E_ulnar_T2_R36,
              r=Parameters_Systemic1.r_ulnar_T2_R36) annotation (Placement(
                  transformation(extent={{25,119},{45,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_interosseous_R38(
              l=Parameters_Systemic1.l_common_interosseous_R38,
              E=Parameters_Systemic1.E_common_interosseous_R38,
              r=Parameters_Systemic1.r_common_interosseous_R38) annotation (
                Placement(transformation(extent={{50,119},{70,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_interosseous_T3_R40(
              p_out=u_svl,
              l=Parameters_Systemic1.l_posterior_interosseous_T3_R40,
              E=Parameters_Systemic1.E_posterior_interosseous_T3_R40,
              R_T=Parameters_Systemic1.R_T_posterior_interosseous_T3_R40,
              C_T=Parameters_Systemic1.C_T_posterior_interosseous_T3_R40,
              r=Parameters_Systemic1.r_posterior_interosseous_T3_R40)
              annotation (Placement(transformation(extent={{75,119},{95,124}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              ulnar_T2_R42(
              p_out=u_svl,
              l=Parameters_Systemic1.l_ulnar_T2_R42,
              E=Parameters_Systemic1.E_ulnar_T2_R42,
              R_T=Parameters_Systemic1.R_T_ulnar_T2_R42,
              C_T=Parameters_Systemic1.C_T_ulnar_T2_R42,
              r=Parameters_Systemic1.r_ulnar_T2_R42) annotation (Placement(
                  transformation(extent={{50,109},{70,114}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              radial_T1_R44(
              p_out=u_svl,
              l=Parameters_Systemic1.l_radial_T1_R44,
              E=Parameters_Systemic1.E_radial_T1_R44,
              R_T=Parameters_Systemic1.R_T_radial_T1_R44,
              C_T=Parameters_Systemic1.C_T_radial_T1_R44,
              r=Parameters_Systemic1.r_radial_T1_R44) annotation (Placement(
                  transformation(extent={{25,109},{45,114}})));
            ADAN_main.Components.Obsolete.pv_jII_type subclavian_L66(
              l=Parameters_Systemic1.l_subclavian_L66,
              E=Parameters_Systemic1.E_subclavian_L66,
              r=Parameters_Systemic1.r_subclavian_L66) annotation (Placement(
                  transformation(extent={{-50,73},{-30,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              subclavian_L78(
              l=Parameters_Systemic1.l_subclavian_L78,
              E=Parameters_Systemic1.E_subclavian_L78,
              r=Parameters_Systemic1.r_subclavian_L78)
              annotation (Placement(transformation(extent={{-25,73},{-5,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              axillary_L80(
              l=Parameters_Systemic1.l_axillary_L80,
              E=Parameters_Systemic1.E_axillary_L80,
              r=Parameters_Systemic1.r_axillary_L80)
              annotation (Placement(transformation(extent={{0,73},{20,78}})));
            ADAN_main.Components.Obsolete.pv_jII_type brachial_L82(
              l=Parameters_Systemic1.l_brachial_L82,
              E=Parameters_Systemic1.E_brachial_L82,
              r=Parameters_Systemic1.r_brachial_L82)
              annotation (Placement(transformation(extent={{25,73},{45,78}})));
            ADAN_main.Components.Obsolete.pv_jII_type ulnar_T2_L84(
              l=Parameters_Systemic1.l_ulnar_T2_L84,
              E=Parameters_Systemic1.E_ulnar_T2_L84,
              r=Parameters_Systemic1.r_ulnar_T2_L84)
              annotation (Placement(transformation(extent={{50,73},{70,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_interosseous_L86(
              l=Parameters_Systemic1.l_common_interosseous_L86,
              E=Parameters_Systemic1.E_common_interosseous_L86,
              r=Parameters_Systemic1.r_common_interosseous_L86)
              annotation (Placement(transformation(extent={{75,73},{95,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              posterior_interosseous_T3_L88(
              p_out=u_svl,
              l=Parameters_Systemic1.l_posterior_interosseous_T3_L88,
              E=Parameters_Systemic1.E_posterior_interosseous_T3_L88,
              R_T=Parameters_Systemic1.R_T_posterior_interosseous_T3_L88,
              C_T=Parameters_Systemic1.C_T_posterior_interosseous_T3_L88,
              r=Parameters_Systemic1.r_posterior_interosseous_T3_L88)
              annotation (Placement(transformation(extent={{100,73},{120,78}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              ulnar_T2_L90(
              p_out=u_svl,
              l=Parameters_Systemic1.l_ulnar_T2_L90,
              E=Parameters_Systemic1.E_ulnar_T2_L90,
              R_T=Parameters_Systemic1.R_T_ulnar_T2_L90,
              C_T=Parameters_Systemic1.C_T_ulnar_T2_L90,
              r=Parameters_Systemic1.r_ulnar_T2_L90)
              annotation (Placement(transformation(extent={{75,63},{95,68}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              radial_T1_L92(
              p_out=u_svl,
              l=Parameters_Systemic1.l_radial_T1_L92,
              E=Parameters_Systemic1.E_radial_T1_L92,
              R_T=Parameters_Systemic1.R_T_radial_T1_L92,
              C_T=Parameters_Systemic1.C_T_radial_T1_L92,
              r=Parameters_Systemic1.r_radial_T1_L92)
              annotation (Placement(transformation(extent={{50,63},{70,68}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_R6_A(
              l=Parameters_Systemic1.l_common_carotid_R6_A,
              E=Parameters_Systemic1.E_common_carotid_R6_A,
              r=Parameters_Systemic1.r_common_carotid_R6_A) annotation (
                Placement(transformation(extent={{-73,133},{-53,138}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_R6_B(
              l=Parameters_Systemic1.l_common_carotid_R6_B,
              E=Parameters_Systemic1.E_common_carotid_R6_B,
              r=Parameters_Systemic1.r_common_carotid_R6_B) annotation (
                Placement(transformation(extent={{-48,133},{-28,138}})));
            ADAN_main.Components.Obsolete.pv_jII_type common_carotid_R6_C(
              l=Parameters_Systemic1.l_common_carotid_R6_C,
              E=Parameters_Systemic1.E_common_carotid_R6_C,
              r=Parameters_Systemic1.r_common_carotid_R6_C) annotation (
                Placement(transformation(extent={{-23,133},{-3,138}})));
            replaceable
              ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              internal_carotid_R8_A(
              l=Parameters_Systemic1.l_internal_carotid_R8_A,
              E=Parameters_Systemic1.E_internal_carotid_R8_A,
              r=Parameters_Systemic1.r_internal_carotid_R8_A)
              annotation (Placement(transformation(extent={{2,133},{22,138}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              internal_carotid_R8_B(
              l=Parameters_Systemic1.l_internal_carotid_R8_B,
              E=Parameters_Systemic1.E_internal_carotid_R8_B,
              r=Parameters_Systemic1.r_internal_carotid_R8_B) annotation (
                Placement(transformation(extent={{27,133},{47,138}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              internal_carotid_R8_C(
              p_out=u_svl,
              l=Parameters_Systemic1.l_internal_carotid_R8_C,
              E=Parameters_Systemic1.E_internal_carotid_R8_C,
              R_T=Parameters_Systemic1.R_T_internal_carotid_R8_C,
              C_T=Parameters_Systemic1.C_T_internal_carotid_R8_C,
              r=Parameters_Systemic1.r_internal_carotid_R8_C) annotation (
                Placement(transformation(extent={{54,133},{74,138}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              external_carotid_T2_R26(
              p_out=u_svl,
              l=Parameters_Systemic1.l_external_carotid_T2_R26,
              E=Parameters_Systemic1.E_external_carotid_T2_R26,
              R_T=Parameters_Systemic1.R_T_external_carotid_T2_R26,
              C_T=Parameters_Systemic1.C_T_external_carotid_T2_R26,
              r=Parameters_Systemic1.r_external_carotid_T2_R26)
              annotation (Placement(transformation(extent={{3,145},{23,150}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_L48_A(
              l=Parameters_Systemic1.l_common_carotid_L48_A,
              E=Parameters_Systemic1.E_common_carotid_L48_A,
              r=Parameters_Systemic1.r_common_carotid_L48_A) annotation (
                Placement(transformation(extent={{-72,93},{-52,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_L48_B(
              l=Parameters_Systemic1.l_common_carotid_L48_B,
              E=Parameters_Systemic1.E_common_carotid_L48_B,
              r=Parameters_Systemic1.r_common_carotid_L48_B) annotation (
                Placement(transformation(extent={{-47,93},{-27,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              common_carotid_L48_C(
              l=Parameters_Systemic1.l_common_carotid_L48_C,
              E=Parameters_Systemic1.E_common_carotid_L48_C,
              r=Parameters_Systemic1.r_common_carotid_L48_C)
              annotation (Placement(transformation(extent={{-22,93},{-2,98}})));
            ADAN_main.Components.Obsolete.pv_jII_type common_carotid_L48_D(
              l=Parameters_Systemic1.l_common_carotid_L48_D,
              E=Parameters_Systemic1.E_common_carotid_L48_D,
              r=Parameters_Systemic1.r_common_carotid_L48_D)
              annotation (Placement(transformation(extent={{3,93},{23,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              internal_carotid_L50_A(
              l=Parameters_Systemic1.l_internal_carotid_L50_A,
              E=Parameters_Systemic1.E_internal_carotid_L50_A,
              r=Parameters_Systemic1.r_internal_carotid_L50_A)
              annotation (Placement(transformation(extent={{28,93},{48,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
              internal_carotid_L50_B(
              l=Parameters_Systemic1.l_internal_carotid_L50_B,
              E=Parameters_Systemic1.E_internal_carotid_L50_B,
              r=Parameters_Systemic1.r_internal_carotid_L50_B)
              annotation (Placement(transformation(extent={{53,93},{73,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              internal_carotid_L50_C(
              p_out=u_svl,
              l=Parameters_Systemic1.l_internal_carotid_L50_C,
              E=Parameters_Systemic1.E_internal_carotid_L50_C,
              R_T=Parameters_Systemic1.R_T_internal_carotid_L50_C,
              C_T=Parameters_Systemic1.C_T_internal_carotid_L50_C,
              r=Parameters_Systemic1.r_internal_carotid_L50_C)
              annotation (Placement(transformation(extent={{78,93},{98,98}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              external_carotid_T2_L62(
              p_out=u_svl,
              l=Parameters_Systemic1.l_external_carotid_T2_L62,
              E=Parameters_Systemic1.E_external_carotid_T2_L62,
              R_T=Parameters_Systemic1.R_T_external_carotid_T2_L62,
              C_T=Parameters_Systemic1.C_T_external_carotid_T2_L62,
              r=Parameters_Systemic1.r_external_carotid_T2_L62)
              annotation (Placement(transformation(extent={{27,85},{47,90}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              vertebral_L2(
              p_out=u_svl,
              l=Parameters_Systemic1.l_vertebral_L2,
              E=Parameters_Systemic1.E_vertebral_L2,
              R_T=Parameters_Systemic1.R_T_vertebral_L2,
              C_T=Parameters_Systemic1.C_T_vertebral_L2,
              r=Parameters_Systemic1.r_vertebral_L2)
              annotation (Placement(transformation(extent={{-26,63},{-6,68}})));
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
              vertebral_R272(
              p_out=u_svl,
              l=Parameters_Systemic1.l_vertebral_R272,
              E=Parameters_Systemic1.E_vertebral_R272,
              R_T=Parameters_Systemic1.R_T_vertebral_R272,
              C_T=Parameters_Systemic1.C_T_vertebral_R272,
              r=Parameters_Systemic1.r_vertebral_R272) annotation (Placement(
                  transformation(extent={{-49,111},{-29,116}})));
            Physiolibrary.Types.Pressure u_svl = pq_terminator_v.u;
            Physiolibrary.Types.Pressure u_ivl = u_svl;
            Physiolibrary.Types.VolumeFlowRate v_veins = v_sup_venacava + v_inf_venacava;
            Real v_sup_venacava(unit = "m3.s-1") = v_arms+v_head;
            Real v_inf_venacava(unit = "m3.s-1") = v_chest+v_trunk+v_intestines+v_kidneys+v_legs;
            Real v_chest(unit = "m3.s-1") = v_posterior_intercostal_T1_R98+v_posterior_intercostal_T1_L102+v_posterior_intercostal_T2_R106+v_posterior_intercostal_T2_L110;
            Real v_trunk(unit = "m3.s-1")= v_left_gastric_T3_C120+v_dorsal_pancreatic_T1_C124+v_splenic_T2_C126+v_hepatic_artery_proper_left_branch_C132+v_hepatic_artery_proper_right_branch_C134;
            Real v_kidneys(unit = "m3.s-1") = v_inferior_segmental_T5_L170+v_superior_segmental_T4_L172+v_renal_posterior_branch_T3_L174+v_superior_segmental_T4_R182+v_inferior_segmental_T5_R184+v_renal_posterior_branch_T3_R186;
            Real v_intestines(unit = "m3.s-1") = v_middle_colic_T8_C140+v_jejunal_3_T10_C144+v_jejunal_6_T11_C148+v_ileocolic_T9_C152+v_ileal_4_T12_C156+v_ileal_6_T13_C160+v_superior_mesenteric_T4_C162+v_inferior_mesenteric_T5_C190;
            Real v_legs(unit = "m3.s-1") = v_internal_iliac_T1_R218+v_profundus_T2_R224+v_anterior_tibial_T3_R230+v_posterior_tibial_T4_R236+v_internal_iliac_T1_L196+v_profundus_T2_L202+v_anterior_tibial_T3_L208+v_posterior_tibial_T4_L214;
            Real v_arms(unit = "m3.s-1") = v_posterior_interosseous_T3_R40+v_ulnar_T2_R42+v_radial_T1_R44+v_posterior_interosseous_T3_L88+v_ulnar_T2_L90+v_radial_T1_L92;
            Real v_head(unit = "m3.s-1") = v_external_carotid_T2_R26+v_external_carotid_T2_L62+v_internal_carotid_R8_C+v_internal_carotid_L50_C+v_vertebral_R272+v_vertebral_L2;
            Real v_posterior_intercostal_T1_R98(unit = "m3.s-1");
            Real v_posterior_intercostal_T1_L102(unit = "m3.s-1");
            Real v_posterior_intercostal_T2_R106(unit = "m3.s-1");
            Real v_posterior_intercostal_T2_L110(unit = "m3.s-1");
            Real v_left_gastric_T3_C120(unit = "m3.s-1");
            Real v_dorsal_pancreatic_T1_C124(unit = "m3.s-1");
            Real v_splenic_T2_C126(unit = "m3.s-1");
            Real v_hepatic_artery_proper_left_branch_C132(unit = "m3.s-1");
            Real v_hepatic_artery_proper_right_branch_C134(unit = "m3.s-1");
            Real v_middle_colic_T8_C140(unit = "m3.s-1");
            Real v_jejunal_3_T10_C144(unit = "m3.s-1");
            Real v_jejunal_6_T11_C148(unit = "m3.s-1");
            Real v_ileocolic_T9_C152(unit = "m3.s-1");
            Real v_ileal_4_T12_C156(unit = "m3.s-1");
            Real v_ileal_6_T13_C160(unit = "m3.s-1");
            Real v_superior_mesenteric_T4_C162(unit = "m3.s-1");
            Real v_inferior_segmental_T5_L170(unit = "m3.s-1");
            Real v_superior_segmental_T4_L172(unit = "m3.s-1");
            Real v_renal_posterior_branch_T3_L174(unit = "m3.s-1");
            Real v_superior_segmental_T4_R182(unit = "m3.s-1");
            Real v_inferior_segmental_T5_R184(unit = "m3.s-1");
            Real v_renal_posterior_branch_T3_R186(unit = "m3.s-1");
            Real v_inferior_mesenteric_T5_C190(unit = "m3.s-1");
            Real v_internal_iliac_T1_R218(unit = "m3.s-1");
            Real v_profundus_T2_R224(unit = "m3.s-1");
            Real v_anterior_tibial_T3_R230(unit = "m3.s-1");
            Real v_posterior_tibial_T4_R236(unit = "m3.s-1");
            Real v_internal_iliac_T1_L196(unit = "m3.s-1");
            Real v_profundus_T2_L202(unit = "m3.s-1");
            Real v_anterior_tibial_T3_L208(unit = "m3.s-1");
            Real v_posterior_tibial_T4_L214(unit = "m3.s-1");
            Real v_posterior_interosseous_T3_R40(unit = "m3.s-1");
            Real v_ulnar_T2_R42(unit = "m3.s-1");
            Real v_radial_T1_R44(unit = "m3.s-1");
            Real v_posterior_interosseous_T3_L88(unit = "m3.s-1");
            Real v_ulnar_T2_L90(unit = "m3.s-1");
            Real v_radial_T1_L92(unit = "m3.s-1");
            Real v_external_carotid_T2_R26(unit = "m3.s-1");
            Real v_external_carotid_T2_L62(unit = "m3.s-1");
            Real v_internal_carotid_R8_C(unit = "m3.s-1");
            Real v_internal_carotid_L50_C(unit = "m3.s-1");
            Real v_vertebral_R272(unit = "m3.s-1");
            Real v_vertebral_L2(unit = "m3.s-1");
            ADAN_main.Components.Interfaces.Pq_terminator_v pq_terminator_v(v=-
                  v_veins)
              annotation (Placement(transformation(extent={{100,0},{120,20}})));
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_a
              annotation (Placement(transformation(extent={{-270,40},{-250,60}}),
                  iconTransformation(extent={{-110,-10},{-90,10}})));
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b port_b
              annotation (Placement(transformation(extent={{124,0},{144,20}}),
                  iconTransformation(extent={{90,-10},{110,10}})));
          equation
            v_posterior_intercostal_T1_R98 = posterior_intercostal_T1_R98.v_T;
            v_posterior_intercostal_T1_L102 = posterior_intercostal_T1_L102.v_T;
            v_posterior_intercostal_T2_R106 = posterior_intercostal_T2_R106.v_T;
            v_posterior_intercostal_T2_L110 = posterior_intercostal_T2_L110.v_T;
            v_left_gastric_T3_C120 = left_gastric_T3_C120.v_T;
            v_dorsal_pancreatic_T1_C124 = dorsal_pancreatic_T1_C124.v_T;
            v_splenic_T2_C126 = splenic_T2_C126.v_T;
            v_hepatic_artery_proper_left_branch_C132 = hepatic_artery_proper_left_branch_C132.v_T;
            v_hepatic_artery_proper_right_branch_C134 = hepatic_artery_proper_right_branch_C134.v_T;
            v_middle_colic_T8_C140 = middle_colic_T8_C140.v_T;
            v_jejunal_3_T10_C144 = jejunal_3_T10_C144.v_T;
            v_jejunal_6_T11_C148 = jejunal_6_T11_C148.v_T;
            v_ileocolic_T9_C152 = ileocolic_T9_C152.v_T;
            v_ileal_4_T12_C156 = ileal_4_T12_C156.v_T;
            v_ileal_6_T13_C160 = ileal_6_T13_C160.v_T;
            v_superior_mesenteric_T4_C162 = superior_mesenteric_T4_C162.v_T;
            v_inferior_segmental_T5_L170 = inferior_segmental_T5_L170.v_T;
            v_superior_segmental_T4_L172 = superior_segmental_T4_L172.v_T;
            v_renal_posterior_branch_T3_L174 = renal_posterior_branch_T3_L174.v_T;
            v_superior_segmental_T4_R182 = superior_segmental_T4_R182.v_T;
            v_inferior_segmental_T5_R184 = inferior_segmental_T5_R184.v_T;
            v_renal_posterior_branch_T3_R186 = renal_posterior_branch_T3_R186.v_T;
            v_inferior_mesenteric_T5_C190 = inferior_mesenteric_T5_C190.v_T;
            v_internal_iliac_T1_R218 = internal_iliac_T1_R218.v_T;
            v_profundus_T2_R224 = profundus_T2_R224.v_T;
            v_anterior_tibial_T3_R230 = anterior_tibial_T3_R230.v_T;
            v_posterior_tibial_T4_R236 = posterior_tibial_T4_R236.v_T;
            v_internal_iliac_T1_L196 = internal_iliac_T1_L196.v_T;
            v_profundus_T2_L202 = profundus_T2_L202.v_T;
            v_anterior_tibial_T3_L208 = anterior_tibial_T3_L208.v_T;
            v_posterior_tibial_T4_L214 = posterior_tibial_T4_L214.v_T;
            v_posterior_interosseous_T3_R40 = posterior_interosseous_T3_R40.v_T;
            v_ulnar_T2_R42 = ulnar_T2_R42.v_T;
            v_radial_T1_R44 = radial_T1_R44.v_T;
            v_posterior_interosseous_T3_L88 = posterior_interosseous_T3_L88.v_T;
            v_ulnar_T2_L90 = ulnar_T2_L90.v_T;
            v_radial_T1_L92 = radial_T1_L92.v_T;
            v_external_carotid_T2_R26 = external_carotid_T2_R26.v_T;
            v_external_carotid_T2_L62 = external_carotid_T2_L62.v_T;
            v_internal_carotid_R8_C = internal_carotid_R8_C.v_T;
            v_internal_carotid_L50_C = internal_carotid_L50_C.v_T;
            v_vertebral_R272 = vertebral_R272.v_T;
            v_vertebral_L2 = vertebral_L2.v_T;
            connect(brachiocephalic_trunk_C4.port_a,aortic_arch_C2.port_b) annotation (Line(points={{-98,
                    129.5},{-121,49.5}},                                                                                           thickness=1));
            connect(aortic_arch_C46.port_a,aortic_arch_C2.port_b) annotation (Line(points={{-105,
                    49.5},{-121,49.5}},                                                                                   thickness=1));
            connect(common_carotid_R6_A.port_a,brachiocephalic_trunk_C4.port_b) annotation (Line(points={{-73,
                    135.5},{-78,129.5}},                                                                                                thickness=1));
            connect(subclavian_R28.port_a,brachiocephalic_trunk_C4.port_b) annotation (Line(points={{-75,
                    121.5},{-78,129.5}},                                                                                           thickness=1));
            connect(aortic_arch_C64.port_a,aortic_arch_C46.port_b) annotation (Line(points={{-78,
                    49.5},{-85,49.5}},                                                                                     thickness=1));
            connect(common_carotid_L48_A.port_a,aortic_arch_C46.port_b) annotation (Line(points={{-72,
                    95.5},{-85,49.5}},                                                                                          thickness=1));
            connect(aortic_arch_C94.port_a,aortic_arch_C64.port_b) annotation (Line(points={{-49,
                    49.5},{-58,49.5}},                                                                                     thickness=1));
            connect(subclavian_L66.port_a,aortic_arch_C64.port_b) annotation (Line(points={{-50,
                    75.5},{-58,49.5}},                                                                                    thickness=1));
            connect(thoracic_aorta_C100.port_a,thoracic_aorta_C96.port_b) annotation (Line(points={{3,49.5},
                    {-6,49.5}},                                                                                                   thickness=1));
            connect(posterior_intercostal_T1_R98.port_a,thoracic_aorta_C96.port_b) annotation (Line(points={{3,39.5},
                    {-6,49.5}},                                                                                                            thickness=1));
            connect(thoracic_aorta_C104.port_a,thoracic_aorta_C100.port_b) annotation (Line(points={{28,49.5},
                    {23,49.5}},                                                                                                    thickness=1));
            connect(posterior_intercostal_T1_L102.port_a,thoracic_aorta_C100.port_b) annotation (Line(points={{28,39.5},
                    {23,49.5}},                                                                                                              thickness=1));
            connect(thoracic_aorta_C108.port_a,thoracic_aorta_C104.port_b) annotation (Line(points={{53,49.5},
                    {48,49.5}},                                                                                                    thickness=1));
            connect(posterior_intercostal_T2_R106.port_a,thoracic_aorta_C104.port_b) annotation (Line(points={{51,39.5},
                    {48,49.5}},                                                                                                              thickness=1));
            connect(thoracic_aorta_C112.port_a,thoracic_aorta_C108.port_b) annotation (Line(points={{78,49.5},
                    {73,49.5}},                                                                                                    thickness=1));
            connect(posterior_intercostal_T2_L110.port_a,thoracic_aorta_C108.port_b) annotation (Line(points={{78,39.5},
                    {73,49.5}},                                                                                                              thickness=1));
            connect(abdominal_aorta_C136.port_a,abdominal_aorta_C114.port_b) annotation (Line(points={{-74,
                    -40.5},{-79,-40.5}},                                                                                             thickness=1));
            connect(celiac_trunk_C116.port_a,abdominal_aorta_C114.port_b) annotation (Line(points={{-71,
                    -0.5},{-79,-40.5}},                                                                                           thickness=1));
            connect(abdominal_aorta_C164.port_a,abdominal_aorta_C136.port_b) annotation (Line(points={{-47,
                    -40.5},{-54,-40.5}},                                                                                             thickness=1));
            connect(superior_mesenteric_T4_C138.port_a,abdominal_aorta_C136.port_b) annotation (Line(points={{-45,
                    -88.5},{-54,-40.5}},                                                                                                    thickness=1));
            connect(abdominal_aorta_C176.port_a,abdominal_aorta_C164.port_b) annotation (Line(points={{-2,
                    -40.5},{-27,-40.5}},                                                                                             thickness=1));
            connect(renal_L166.port_a,abdominal_aorta_C164.port_b) annotation (Line(points={{-2,
                    -64.5},{-14,-64.5},{-14,-40.5},{-27,-40.5}},                                                           thickness=1));
            connect(abdominal_aorta_C188.port_a,abdominal_aorta_C176.port_b) annotation (Line(points={{23,
                    -40.5},{18,-40.5}},                                                                                              thickness=1));
            connect(renal_R178.port_a,abdominal_aorta_C176.port_b) annotation (Line(points={{25,
                    -22.5},{18,-40.5}},                                                                                    thickness=1));
            connect(abdominal_aorta_C192.port_a,abdominal_aorta_C188.port_b) annotation (Line(points={{48,
                    -40.5},{43,-40.5}},                                                                                              thickness=1));
            connect(inferior_mesenteric_T5_C190.port_a,abdominal_aorta_C188.port_b) annotation (Line(points={{48,
                    -54.5},{43,-40.5}},                                                                                                     thickness=1));
            connect(common_iliac_R216.port_a,abdominal_aorta_C192.port_b) annotation (Line(points={{75,
                    -40.5},{68,-40.5}},                                                                                           thickness=1));
            connect(common_iliac_L194.port_a,abdominal_aorta_C192.port_b) annotation (Line(points={{74,
                    -54.5},{68,-40.5}},                                                                                           thickness=1));
            connect(internal_iliac_T1_R218.port_a,common_iliac_R216.port_b) annotation (Line(points={{98,
                    -30.5},{96,-40.5},{95,-40.5}},                                                                                  thickness=1));
            connect(external_iliac_R220.port_a,common_iliac_R216.port_b) annotation (Line(points={{99,
                    -40.5},{95,-40.5}},                                                                                          thickness=1));
            connect(profundus_T2_R224.port_a,femoral_R222.port_b) annotation (Line(points={{149,
                    -30.5},{144,-40.5}},                                                                                  thickness=1));
            connect(femoral_R226.port_a,femoral_R222.port_b) annotation (Line(points={{150,
                    -40.5},{144,-40.5}},                                                                             thickness=1));
            connect(anterior_tibial_T3_R230.port_a,popliteal_R228.port_b) annotation (Line(points={{200,
                    -30.5},{195,-40.5}},                                                                                          thickness=1));
            connect(popliteal_R232.port_a,popliteal_R228.port_b) annotation (Line(points={{199,
                    -40.5},{195,-40.5}},                                                                                 thickness=1));
            connect(internal_iliac_T1_L196.port_a,common_iliac_L194.port_b) annotation (Line(points={{99,
                    -62.5},{94,-54.5}},                                                                                             thickness=1));
            connect(external_iliac_L198.port_a,common_iliac_L194.port_b) annotation (Line(points={{100,
                    -54.5},{94,-54.5}},                                                                                          thickness=1));
            connect(profundus_T2_L202.port_a,femoral_L200.port_b) annotation (Line(points={{150,
                    -62.5},{145,-54.5}},                                                                                  thickness=1));
            connect(femoral_L204.port_a,femoral_L200.port_b) annotation (Line(points={{149,
                    -54.5},{145,-54.5}},                                                                             thickness=1));
            connect(anterior_tibial_T3_L208.port_a,popliteal_L206.port_b) annotation (Line(points={{199,
                    -62.5},{194,-54.5}},                                                                                          thickness=1));
            connect(popliteal_L210.port_a,popliteal_L206.port_b) annotation (Line(points={{200,
                    -54.5},{194,-54.5}},                                                                                 thickness=1));
            connect(subclavian_R30.port_a,subclavian_R28.port_b) annotation (Line(points={{-50,
                    121.5},{-55,121.5}},                                                                                 thickness=1));
            connect(vertebral_R272.port_a,subclavian_R28.port_b) annotation (Line(points={{-49,
                    113.5},{-55,121.5}},                                                                                 thickness=1));
            connect(ulnar_T2_R36.port_a,brachial_R34.port_b) annotation (Line(points={{25,
                    121.5},{20,121.5}},                                                                              thickness=1));
            connect(radial_T1_R44.port_a,brachial_R34.port_b) annotation (Line(points={{25,
                    111.5},{20,121.5}},                                                                               thickness=1));
            connect(common_interosseous_R38.port_a,ulnar_T2_R36.port_b) annotation (Line(points={{50,
                    121.5},{45,121.5}},                                                                                         thickness=1));
            connect(ulnar_T2_R42.port_a,ulnar_T2_R36.port_b) annotation (Line(points={{50,
                    111.5},{45,121.5}},                                                                              thickness=1));
            connect(subclavian_L78.port_a,subclavian_L66.port_b) annotation (Line(points={{-25,
                    75.5},{-26,75.5},{-26,76},{-30,76},{-30,75.5}},                                                      thickness=1));
            connect(vertebral_L2.port_a,subclavian_L66.port_b) annotation (Line(points={{-26,
                    65.5},{-30,75.5}},                                                                                 thickness=1));
            connect(ulnar_T2_L84.port_a,brachial_L82.port_b) annotation (Line(points={{50,75.5},
                    {45,75.5}},                                                                                      thickness=1));
            connect(radial_T1_L92.port_a,brachial_L82.port_b) annotation (Line(points={{50,65.5},
                    {45,75.5}},                                                                                       thickness=1));
            connect(common_interosseous_L86.port_a,ulnar_T2_L84.port_b) annotation (Line(points={{75,75.5},
                    {70,75.5}},                                                                                                 thickness=1));
            connect(ulnar_T2_L90.port_a,ulnar_T2_L84.port_b) annotation (Line(points={{75,65.5},
                    {70,75.5}},                                                                                      thickness=1));
            connect(internal_carotid_R8_A.port_a,common_carotid_R6_C.port_b) annotation (Line(points={{2,135.5},
                    {-3,135.5}},                                                                                                     thickness=1));
            connect(external_carotid_T2_R26.port_a,common_carotid_R6_C.port_b) annotation (Line(points={{3,147.5},
                    {-3,135.5}},                                                                                                       thickness=1));
            connect(internal_carotid_L50_A.port_a,common_carotid_L48_D.port_b) annotation (Line(points={{28,95.5},
                    {23,95.5}},                                                                                                        thickness=1));
            connect(external_carotid_T2_L62.port_a,common_carotid_L48_D.port_b) annotation (Line(points={{27,87.5},
                    {27,88},{23,88},{23,95.5}},                                                                                         thickness=1));
            connect(splenic_T2_C118.port_a,celiac_trunk_C116.port_b) annotation (Line(points={{-46,
                    -0.5},{-51,-0.5}},                                                                                       thickness=1));
            connect(left_gastric_T3_C120.port_a,celiac_trunk_C116.port_b) annotation (Line(points={{-45,7.5},
                    {-51,-0.5}},                                                                                                  thickness=1));
            connect(splenic_T2_C122.port_a,splenic_T2_C118.port_b) annotation (Line(points={{-18,
                    -0.5},{-26,-0.5}},                                                                                     thickness=1));
            connect(dorsal_pancreatic_T1_C124.port_a,splenic_T2_C118.port_b) annotation (Line(points={{-17,7.5},
                    {-26,-0.5}},                                                                                                     thickness=1));
            connect(splenic_T2_C126.port_a,splenic_T2_C122.port_b) annotation (Line(points={{8,7.5},
                    {2,-0.5}},                                                                                             thickness=1));
            connect(common_hepatic_C128.port_a,splenic_T2_C122.port_b) annotation (Line(points={{9,-0.5},
                    {2,-0.5}},                                                                                                 thickness=1));
            connect(hepatic_artery_proper_left_branch_C132.port_a,hepatic_artery_proper_C130.port_b) annotation (Line(points={{55,-0.5},
                    {52,-0.5}},                                                                                                                              thickness=1));
            connect(hepatic_artery_proper_right_branch_C134.port_a,hepatic_artery_proper_C130.port_b) annotation (Line(points={{56,7.5},
                    {52,-0.5}},                                                                                                                               thickness=1));
            connect(middle_colic_T8_C140.port_a,superior_mesenteric_T4_C138.port_b) annotation (Line(points={{-18,
                    -96.5},{-25,-88.5}},                                                                                                    thickness=1));
            connect(superior_mesenteric_T4_C142.port_a,superior_mesenteric_T4_C138.port_b) annotation (Line(points={{-19,
                    -88.5},{-25,-88.5}},                                                                                                           thickness=1));
            connect(jejunal_3_T10_C144.port_a,superior_mesenteric_T4_C142.port_b) annotation (Line(points={{6,-96.5},
                    {1,-88.5}},                                                                                                           thickness=1));
            connect(superior_mesenteric_T4_C146.port_a,superior_mesenteric_T4_C142.port_b) annotation (Line(points={{5,-88.5},
                    {1,-88.5}},                                                                                                                    thickness=1));
            connect(jejunal_6_T11_C148.port_a,superior_mesenteric_T4_C146.port_b) annotation (Line(points={{32,
                    -96.5},{25,-88.5}},                                                                                                   thickness=1));
            connect(superior_mesenteric_T4_C150.port_a,superior_mesenteric_T4_C146.port_b) annotation (Line(points={{31,
                    -88.5},{25,-88.5}},                                                                                                            thickness=1));
            connect(ileocolic_T9_C152.port_a,superior_mesenteric_T4_C150.port_b) annotation (Line(points={{58,
                    -96.5},{51,-88.5}},                                                                                                  thickness=1));
            connect(superior_mesenteric_T4_C154.port_a,superior_mesenteric_T4_C150.port_b) annotation (Line(points={{57,
                    -88.5},{51,-88.5}},                                                                                                            thickness=1));
            connect(ileal_4_T12_C156.port_a,superior_mesenteric_T4_C154.port_b) annotation (Line(points={{84,
                    -96.5},{77,-88.5}},                                                                                                 thickness=1));
            connect(superior_mesenteric_T4_C158.port_a,superior_mesenteric_T4_C154.port_b) annotation (Line(points={{83,
                    -88.5},{77,-88.5}},                                                                                                            thickness=1));
            connect(ileal_6_T13_C160.port_a,superior_mesenteric_T4_C158.port_b) annotation (Line(points={{108,
                    -96.5},{103,-88.5}},                                                                                                thickness=1));
            connect(superior_mesenteric_T4_C162.port_a,superior_mesenteric_T4_C158.port_b) annotation (Line(points={{107,
                    -88.5},{103,-88.5}},                                                                                                           thickness=1));
            connect(renal_anterior_branch_L168.port_a,renal_L166.port_b) annotation (Line(points={{23,
                    -64.5},{18,-64.5}},                                                                                          thickness=1));
            connect(renal_posterior_branch_T3_L174.port_a,renal_L166.port_b) annotation (Line(points={{24,
                    -74.5},{18,-64.5}},                                                                                              thickness=1));
            connect(inferior_segmental_T5_L170.port_a,renal_anterior_branch_L168.port_b) annotation (Line(points={{48,
                    -64.5},{43,-64.5}},                                                                                                          thickness=1));
            connect(superior_segmental_T4_L172.port_a,renal_anterior_branch_L168.port_b) annotation (Line(points={{47,
                    -74.5},{43,-64.5}},                                                                                                          thickness=1));
            connect(renal_anterior_branch_R180.port_a,renal_R178.port_b) annotation (Line(points={{50,
                    -22.5},{45,-22.5}},                                                                                          thickness=1));
            connect(renal_posterior_branch_T3_R186.port_a,renal_R178.port_b) annotation (Line(points={{49,
                    -14.5},{45,-22.5}},                                                                                              thickness=1));
            connect(superior_segmental_T4_R182.port_a,renal_anterior_branch_R180.port_b) annotation (Line(points={{75,
                    -22.5},{70,-22.5}},                                                                                                          thickness=1));
            connect(inferior_segmental_T5_R184.port_a,renal_anterior_branch_R180.port_b) annotation (Line(points={{74,
                    -14.5},{70,-22.5}},                                                                                                          thickness=1));
            connect(ascending_aorta_B.port_a,ascending_aorta_A.port_b) annotation (Line(points={{-216,
                    49.5},{-221,49.5}},                                                                                        thickness=1));
            connect(ascending_aorta_C.port_a,ascending_aorta_B.port_b) annotation (Line(points={{-191,
                    49.5},{-196,49.5}},                                                                                        thickness=1));
            connect(ascending_aorta_D.port_a,ascending_aorta_C.port_b) annotation (Line(points={{-166,
                    49.5},{-171,49.5}},                                                                                        thickness=1));
            connect(aortic_arch_C2.port_a,ascending_aorta_D.port_b) annotation (Line(points={{-141,
                    49.5},{-146,49.5}},                                                                                     thickness=1));
            connect(thoracic_aorta_C96.port_a,aortic_arch_C94.port_b) annotation (Line(points={{-26,
                    49.5},{-29,49.5}},                                                                                        thickness=1));
            connect(abdominal_aorta_C114.port_a,thoracic_aorta_C112.port_b) annotation (Line(points={{-99,
                    -40.5},{-99,22},{108,22},{108,49.5},{98,49.5}},                                                                 thickness=1));
            connect(hepatic_artery_proper_C130.port_a,common_hepatic_C128.port_b) annotation (Line(points={{32,-0.5},
                    {29,-0.5}},                                                                                                           thickness=1));
            connect(femoral_R222.port_a,external_iliac_R220.port_b) annotation (Line(points={{124,
                    -40.5},{119,-40.5}},                                                                                    thickness=1));
            connect(popliteal_R228.port_a,femoral_R226.port_b) annotation (Line(points={{175,
                    -40.5},{170,-40.5}},                                                                               thickness=1));
            connect(tibiofibular_trunk_R234.port_a,popliteal_R232.port_b) annotation (Line(points={{224,
                    -40.5},{219,-40.5}},                                                                                          thickness=1));
            connect(posterior_tibial_T4_R236.port_a,tibiofibular_trunk_R234.port_b) annotation (Line(points={{249,
                    -40.5},{249,-40},{244,-40},{244,-40.5}},                                                                                thickness=1));
            connect(femoral_L200.port_a,external_iliac_L198.port_b) annotation (Line(points={{125,
                    -54.5},{120,-54.5}},                                                                                    thickness=1));
            connect(popliteal_L206.port_a,femoral_L204.port_b) annotation (Line(points={{174,
                    -54.5},{169,-54.5}},                                                                               thickness=1));
            connect(tibiofibular_trunk_L212.port_a,popliteal_L210.port_b) annotation (Line(points={{225,
                    -54.5},{220,-54.5}},                                                                                          thickness=1));
            connect(posterior_tibial_T4_L214.port_a,tibiofibular_trunk_L212.port_b) annotation (Line(points={{250,
                    -54.5},{245,-54.5}},                                                                                                    thickness=1));
            connect(axillary_R32.port_a,subclavian_R30.port_b) annotation (Line(points={{-25,
                    121.5},{-30,121.5}},                                                                               thickness=1));
            connect(brachial_R34.port_a,axillary_R32.port_b) annotation (Line(points={{0,121.5},
                    {-5,121.5}},                                                                                     thickness=1));
            connect(posterior_interosseous_T3_R40.port_a,common_interosseous_R38.port_b) annotation (Line(points={{75,
                    121.5},{70,121.5}},                                                                                                          thickness=1));
            connect(axillary_L80.port_a,subclavian_L78.port_b) annotation (Line(points={{0,75.5},
                    {-5,75.5}},                                                                                        thickness=1));
            connect(brachial_L82.port_a,axillary_L80.port_b) annotation (Line(points={{25,75.5},
                    {20,75.5}},                                                                                      thickness=1));
            connect(posterior_interosseous_T3_L88.port_a,common_interosseous_L86.port_b) annotation (Line(points={{100,
                    75.5},{95,75.5}},                                                                                                            thickness=1));
            connect(common_carotid_R6_B.port_a,common_carotid_R6_A.port_b) annotation (Line(points={{-48,
                    135.5},{-53,135.5}},                                                                                           thickness=1));
            connect(common_carotid_R6_C.port_a,common_carotid_R6_B.port_b) annotation (Line(points={{-23,
                    135.5},{-28,135.5}},                                                                                           thickness=1));
            connect(internal_carotid_R8_B.port_a,internal_carotid_R8_A.port_b) annotation (Line(points={{27,
                    135.5},{22,135.5}},                                                                                                thickness=1));
            connect(internal_carotid_R8_C.port_a,internal_carotid_R8_B.port_b) annotation (Line(points={{54,
                    135.5},{47,135.5}},                                                                                                thickness=1));
            connect(common_carotid_L48_B.port_a,common_carotid_L48_A.port_b) annotation (Line(points={{-47,
                    95.5},{-52,95.5}},                                                                                               thickness=1));
            connect(common_carotid_L48_C.port_a,common_carotid_L48_B.port_b) annotation (Line(points={{-22,
                    95.5},{-27,95.5}},                                                                                               thickness=1));
            connect(common_carotid_L48_D.port_a,common_carotid_L48_C.port_b) annotation (Line(points={{3,95.5},
                    {-2,95.5}},                                                                                                      thickness=1));
            connect(internal_carotid_L50_B.port_a,internal_carotid_L50_A.port_b) annotation (Line(points={{53,95.5},
                    {48,95.5}},                                                                                                          thickness=1));
            connect(internal_carotid_L50_C.port_a,internal_carotid_L50_B.port_b) annotation (Line(points={{78,95.5},
                    {73,95.5}},                                                                                                          thickness=1));
            connect(port_a, ascending_aorta_A.port_a) annotation (Line(
                points={{-260,50},{-248,50},{-248,49.5},{-241,49.5}},
                color={0,0,0},
                thickness=1));
            connect(pq_terminator_v.port_a, port_b) annotation (Line(
                points={{120,10},{134,10}},
                color={0,0,0},
                thickness=1));
            annotation (Icon(graphics={
                  Line(
                    points={{-88,18},{-88,22},{-80,48},{-54,54},{-28,46},{-16,-98}},
                    color={238,46,47},
                    thickness=1),
                  Line(
                    points={{-100,80},{-80,48},{-54,54},{-74,86},{-68,98}},
                    color={238,46,47},
                    thickness=1),
                  Line(
                    points={{-74,86},{-94,98}},
                    color={238,46,47},
                    thickness=1),
                  Line(
                    points={{-28,46},{-12,92}},
                    color={238,46,47},
                    thickness=1),
                  Line(
                    points={{-26,10},{-58,-10}},
                    color={238,46,47},
                    thickness=1),
                  Line(
                    points={{-18,72},{44,80}},
                    color={238,46,47},
                    thickness=1),
                  Line(
                    points={{-22,-12},{46,-42}},
                    color={238,46,47},
                    thickness=1),      Text(
                    extent={{-100,-80},{100,0}},
                    lineColor={0,0,0},
                    pattern=LinePattern.None,
                    lineThickness=0.5,
                    fillColor={244,125,35},
                    fillPattern=FillPattern.None,
                    textString="ADAN86")}), Diagram(graphics={
                  Rectangle(
                    extent={{-64,6},{-58,-8}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{32,-16},{38,-30}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{6,-58},{12,-72}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{106,-24},{112,-38}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{156,-24},{162,-38}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{206,-24},{212,-38}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{256,-34},{262,-48}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{256,-48},{262,-62}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{106,-56},{112,-70}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{156,-56},{162,-70}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{206,-56},{212,-70}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{32,118},{38,104}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{58,118},{64,104}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{82,72},{88,58}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{56,72},{62,58}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{60,142},{66,128}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{10,154},{16,140}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{84,102},{90,88}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{34,94},{40,80}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{-42,120},{-36,106}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{-20,72},{-14,58}},
                    fillColor={244,125,35},
                    fillPattern=FillPattern.Solid,
                    pattern=LinePattern.None),
                  Rectangle(
                    extent={{-58,-80},{142,-108}},
                    fillColor={255,255,255},
                    fillPattern=FillPattern.Solid,
                    lineColor={238,46,47},
                    lineThickness=0.5),
                  Rectangle(
                    extent={{-6,44},{104,32}},
                    fillColor={255,255,255},
                    fillPattern=FillPattern.Solid,
                    lineColor={238,46,47},
                    lineThickness=0.5)}));
          end arteries_ADAN86_simplified;
        end ADAN86ArterialTree;

        package Testers
          extends Modelica.Icons.ExamplesPackage;
          model testSimplestLumpedLeveled
            Systemic_SimpleLumped systemic_SimpleLumped
              annotation (Placement(transformation(extent={{-34,-22},{42,8}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(P=
                  13332.2387415) annotation (Placement(transformation(extent={{
                      -84,-22},{-64,-2}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(P=
                  1333.22387415)
              annotation (Placement(transformation(extent={{74,-22},{54,-2}})));
            inner Settings settings annotation (Placement(transformation(extent=
                     {{-100,78},{-80,98}})));
            SystemicAV_base systemicAV_base
              annotation (Placement(transformation(extent={{-32,26},{44,56}})));
          equation
            connect(systemic_SimpleLumped.port_a, unlimitedVolume.y)
              annotation (Line(
                points={{-34,-12},{-64,-12}},
                color={0,0,0},
                thickness=1));
            connect(systemic_SimpleLumped.port_b, unlimitedVolume1.y)
              annotation (Line(
                points={{42,-12},{54,-12}},
                color={0,0,0},
                thickness=1));
            connect(systemicAV_base.port_a, unlimitedVolume.y) annotation (Line(
                points={{-32,36},{-48,36},{-48,-12},{-64,-12}},
                color={0,0,0},
                thickness=1));
            connect(systemicAV_base.port_b, unlimitedVolume1.y) annotation (
                Line(
                points={{44,36},{50,36},{50,-12},{54,-12}},
                color={0,0,0},
                thickness=1));
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)),
                Diagram(coordinateSystem(preserveAspectRatio=false)));
          end testSimplestLumpedLeveled;

          model TestSystemic
            Systemic_TriSeg systemic_TriSeg annotation (Placement(
                  transformation(extent={{-54,-18},{22,12}})));
            Pulmonary.PulmonaryTriSeg pulmonaryTriSeg annotation (Placement(
                  transformation(extent={{-34,-86},{-14,-66}})));
            Heart.Heart_TriSegMechanics_Lumens heart_TriSegMechanics_Lumens
              annotation (Placement(transformation(extent={{-14,-48},{-34,-28}})));
          equation
            connect(heart_TriSegMechanics_Lumens.pa, pulmonaryTriSeg.port_a)
              annotation (Line(
                points={{-34,-32.4},{-48,-32.4},{-48,-46},{-66,-46},{-66,-76},{
                    -34,-76}},
                color={0,0,0},
                thickness=1));
            connect(pulmonaryTriSeg.port_b, heart_TriSegMechanics_Lumens.pv)
              annotation (Line(
                points={{-14,-76},{18,-76},{18,-41.4},{-34,-41.4}},
                color={0,0,0},
                thickness=1));
            connect(heart_TriSegMechanics_Lumens.sv, systemic_TriSeg.port_b)
              annotation (Line(
                points={{-14,-32.4},{6,-32.4},{6,-30},{34,-30},{34,-8},{22,-8}},
                color={0,0,0},
                thickness=1));
            connect(systemic_TriSeg.port_a, heart_TriSegMechanics_Lumens.sa)
              annotation (Line(
                points={{-54,-8},{-74,-8},{-74,-41.4},{-14,-41.4}},
                color={0,0,0},
                thickness=1));
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)),
                Diagram(coordinateSystem(preserveAspectRatio=false)));
          end TestSystemic;

          model TestSystemicArterial
            ADAN86ArterialTree.arteries_ADAN86_dv arteries_ADAN86_dv
              annotation (Placement(transformation(extent={{-38,-12},{38,18}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(P=
                  13332.2387415) annotation (Placement(transformation(extent={{
                      -78,-12},{-58,8}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1
              annotation (Placement(transformation(extent={{82,-8},{62,12}})));
          equation
            connect(arteries_ADAN86_dv.port_a, unlimitedVolume.y) annotation (
                Line(
                points={{-16,-2},{-58,-2}},
                color={0,0,0},
                thickness=1));
            connect(arteries_ADAN86_dv.port_b, unlimitedVolume1.y) annotation (
                Line(
                points={{38,-2},{50,-2},{50,2},{62,2}},
                color={0,0,0},
                thickness=1));
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)),
                Diagram(coordinateSystem(preserveAspectRatio=false)));
          end TestSystemicArterial;
        end Testers;

        package Organs
          package Renal

            package Src
            model GFR_orig "Rewritten from Dan's source"
             // INPUT PARAMETERS
            Real P_A2 = 100;

            // Adjustble Parameters
            Real R_K_a0 = 35/RBFo;
            Real Q_ra =   0.022981;
            Real KfL =    0.0024203;
            Real Cpass0 = 100; // mmHg*micron
            Real Cpass1 = 4.8703;
            Real Cact0 =  1200; // mmHg*micron
            Real Cact1 =  0.98321;
            Real Cact2 =  0.42164;
            Real Ctone0 = 0.0078167; // 1/mmHg/micron
            Real Ctone1 = 4.2021;

            // Fixed Parameters
            Real RMo = 290; // rat mass, grams
            Real BVo = 0.09*RMo; // target blood volume in ml
            Real COo = 244*RMo/1000/60/0.95; // target cardiac output
            Real PSVo = 5; // target systemic venous pressure, mmHg
            Real MAPo = 100; // target MAP, mmHg
            Real RBFo = COo*0.2; // target RBF, 0.2 of CO
            Real R_K_efferent = 40/RBFo;
            Real R_AKIDNEY = (MAPo-90)/RBFo; // mmHg*sec/ml, assumes (MAPo-90mmHg) drop PA2 - PAKidney
            Real R_VKIDNEY = (10-PSVo)/RBFo; // mmHg*sec/ml, assumes (10mmHg-PSVo) drop from PCkidney - PSV
            Real C_AKIDNEY = 0.002*BVo/90; // ml/mmHg, assumes 0.002 of BV at 90 mmHg
            Real C_VKIDNEY = 0.002*BVo/10; // ml/mmHg, assumes 0.002 of BV at 10 mmHg
            Real PI_i = 28;
            Real tau_R_K_afferent = 60;
            Real P_SV = PSVo;
            Real D0 = 10;

            // State Variables
            Real V_AKIDNEY( start = 0.0206);
            Real V_VKIDNEY( start = 0.0906);
            Real A_myo( start = 0.5);
            Real D_aff( start = 7);

            Real R_K_afferent = R_K_a0*(D0/D_aff)^4;
            Real P_AKIDNEY = V_AKIDNEY/C_AKIDNEY;
            Real P_CKIDNEY = V_VKIDNEY/C_VKIDNEY;
            Real F_K1 = (P_A2-P_AKIDNEY)/R_AKIDNEY;
            Real F_K2 = (P_AKIDNEY - P_CKIDNEY)/(R_K_afferent + R_K_efferent);
            Real F_K4 = (P_CKIDNEY - P_SV)/R_VKIDNEY;
            Real P_GLOMER = P_AKIDNEY - F_K2*R_K_afferent;

            Real dPf = P_GLOMER - PI_i - P_CKIDNEY;
            Real Gmax = F_K2*dPf/(P_GLOMER - P_CKIDNEY);
            // GFR = max(0,KfL*(P_GLOMER - PI_i - P_CKIDNEY));
            Real GFR = Gmax*(1 - exp(-(exp(KfL*dPf/Gmax)-1)));
            Real Q_urine = max(0,(GFR-Q_ra)/2);
            Real F_K3 = F_K2 - Q_urine;

            Real T_pass_aff =  Cpass0*exp( Cpass1*(D_aff/D0 - 1));
            Real T_a_max = Cact0*exp( -((D_aff/D0-Cact1)/Cact2)^2);
            Real T_total = T_pass_aff + A_myo*T_a_max;
            Real A_myo_inf = 1/(1 + exp(-Ctone0*T_total + Ctone1));

            equation

            der(V_AKIDNEY) = F_K1 - F_K2;
            der(V_VKIDNEY) = F_K3 - F_K4;
            der(A_myo) = (A_myo_inf - A_myo)/tau_R_K_afferent;
            der(D_aff) = (P_AKIDNEY*D_aff/2 - T_total)/P_AKIDNEY;

              annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end GFR_orig;

            model GFR_ss "Rewritten from Dan's source in steady state"
             // INPUT PARAMETERS
            Real P_A2 = 100;

            // Adjustble Parameters
            Real R_K_a0 = 35/RBFo;
            Real Q_ra =   0.022981;
            Real KfL =    0.0024203;
            Real Cpass0 = 100; // mmHg*micron
            Real Cpass1 = 4.8703;
            Real Cact0 =  1200; // mmHg*micron
            Real Cact1 =  0.98321;
            Real Cact2 =  0.42164;
            Real Ctone0 = 0.0078167; // 1/mmHg/micron
            Real Ctone1 = 4.2021;

            // Fixed Parameters
            Real RMo = 290; // rat mass, grams
            Real BVo = 0.09*RMo; // target blood volume in ml
            Real COo = 244*RMo/1000/60/0.95; // target cardiac output
            Real PSVo = 5; // target systemic venous pressure, mmHg
            Real MAPo = 100; // target MAP, mmHg
            Real RBFo = COo*0.2; // target RBF, 0.2 of CO
            Real R_K_efferent = 40/RBFo;
            Real R_AKIDNEY = (MAPo-90)/RBFo; // mmHg*sec/ml, assumes (MAPo-90mmHg) drop PA2 - PAKidney
            Real R_VKIDNEY = (10-PSVo)/RBFo; // mmHg*sec/ml, assumes (10mmHg-PSVo) drop from PCkidney - PSV
            Real C_AKIDNEY = 0.002*BVo/90; // ml/mmHg, assumes 0.002 of BV at 90 mmHg
            Real C_VKIDNEY = 0.002*BVo/10; // ml/mmHg, assumes 0.002 of BV at 10 mmHg
            Real PI_i = 28;
            Real tau_R_K_afferent = 60;
            Real P_SV = PSVo;
            Real D0 = 10;

            // State Variables
            Real V_AKIDNEY( start = 0.0206);
            Real V_VKIDNEY( start = 0.0906);
            Real A_myo( start = 0.5);
            Real D_aff( start = 7);

            Real R_K_afferent = R_K_a0*(D0/D_aff)^4;
            Real P_AKIDNEY = V_AKIDNEY/C_AKIDNEY;
            Real P_CKIDNEY = V_VKIDNEY/C_VKIDNEY;
            Real F_K1 = (P_A2-P_AKIDNEY)/R_AKIDNEY;
            Real F_K2 = (P_AKIDNEY - P_CKIDNEY)/(R_K_afferent + R_K_efferent);
            Real F_K4 = (P_CKIDNEY - P_SV)/R_VKIDNEY;
            Real P_GLOMER = P_AKIDNEY - F_K2*R_K_afferent;

            Real dPf = P_GLOMER - PI_i - P_CKIDNEY;
            Real Gmax = F_K2*dPf/(P_GLOMER - P_CKIDNEY);
            // GFR = max(0,KfL*(P_GLOMER - PI_i - P_CKIDNEY));
            Real GFR = Gmax*(1 - exp(-(exp(KfL*dPf/Gmax)-1)));
            Real Q_urine = max(0,(GFR-Q_ra)/2);
            Real F_K3 = F_K2 - Q_urine;

            Real T_pass_aff =  Cpass0*exp( Cpass1*(D_aff/D0 - 1));
            Real T_a_max = Cact0*exp( -((D_aff/D0-Cact1)/Cact2)^2);
            Real T_total = T_pass_aff + A_myo*T_a_max;
            Real A_myo_inf = 1/(1 + exp(-Ctone0*T_total + Ctone1));

            equation

            0 = F_K1 - F_K2;
            0 = F_K3 - F_K4;
            0 = (A_myo_inf - A_myo)/tau_R_K_afferent;
            0 = (P_AKIDNEY*D_aff/2 - T_total)/P_AKIDNEY;

              annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end GFR_ss;

            model GFR_ss_SIUnits
                "Rewritten from Dan's source in steady state, converted to SI units"
              import Physiolibrary.Types.*;

              constant Real mmHg2SI(unit="Pa") = 133.322;
              constant Real ml2SI(unit="m3") = 1e-6;
              constant Real q2SI(unit="m3/s") = 1e-6;
              constant Real C2SI(unit="m3/Pa") = ml2SI/mmHg2SI;
              constant Real R2SI(unit="Pa.s/m3") = mmHg2SI*1.0/ml2SI;
              // INPUT PARAMETERS
              parameter Pressure P_A2=100*mmHg2SI;
                parameter Modelica.Units.SI.Area BSA=1.73;

              // Adjustble Parameters
              parameter HydraulicResistance R_K_a0=35*mmHg2SI/RBFo;
              parameter VolumeFlowRate Q_ra=0.022981*q2SI;
              parameter Real KfL=1.8153793e-11 "filtration coeffcicient, m3/Pa, for rat 0.0024203*ml2SI/mmHg2SI";
              parameter Real Cpass0=100*mmHg2SI "Pa*micron";
              parameter Real Cpass1=4.8703;
              parameter Real Cact0=1200*mmHg2SI "mmHg*micron";
              parameter Real Cact1=0.98321;
              parameter Real Cact2=0.42164;
              parameter Real Ctone0=0.0078167/mmHg2SI "1/mmHg/micron";
              parameter Real Ctone1=4.2021;

              // Fixed Parameters
              parameter Physiolibrary.Types.Mass weight=0.290 "body mass, kilograms";
              parameter Volume BVo=0.09*weight*1000*ml2SI "target blood volume ";
              parameter VolumeFlowRate COo=244*weight*1000/1000/60/0.95*q2SI
                "target cardiac output";
              parameter Pressure PSVo=5*mmHg2SI "target systemic venous pressure";
              parameter Pressure MAPo=100*mmHg2SI "target MAP, mmHg";
              parameter VolumeFlowRate RBFo=COo*0.2 "target RBF, 0.2 of CO";

              parameter HydraulicResistance R_K_efferent=40*mmHg2SI/RBFo;

              parameter HydraulicResistance R_AKIDNEY=(MAPo - 90*mmHg2SI)/RBFo "assumes (MAPo-90mmHg) drop PA2 - PAKidney";
              parameter HydraulicResistance R_VKIDNEY=(10*mmHg2SI - PSVo)/RBFo "assumes (10mmHg-PSVo) drop from PCkidney - PSV";
              parameter HydraulicCompliance C_AKIDNEY=0.002*BVo/(90*mmHg2SI) "assumes 0.002 of BV at 90 mmHg";
              parameter HydraulicCompliance C_VKIDNEY=0.002*BVo/(10*mmHg2SI) "assumes 0.002 of BV at 10 mmHg";
              parameter Pressure PI_i=28*mmHg2SI "Onkotic pressure";
                parameter Modelica.Units.SI.Time tau_R_K_afferent=60
                  "Time constant in seconds";
              parameter Pressure P_SV=PSVo;

              parameter Real D0=10 "TODO";

              // State Variables
              Volume V_AKIDNEY(start=0.0206*ml2SI);
              Volume V_VKIDNEY(start=0.0906*ml2SI);
              Real A_myo(start=0.5) "TODO";
              Real D_aff(start=7) "TODO";

              HydraulicResistance R_K_afferent=R_K_a0*(D0/D_aff)^4;
              Pressure P_AKIDNEY(start=90*mmHg2SI) = V_AKIDNEY/C_AKIDNEY;
              Pressure P_CKIDNEY=V_VKIDNEY/C_VKIDNEY;
              VolumeFlowRate F_K1=(P_A2 - P_AKIDNEY)/R_AKIDNEY;
              VolumeFlowRate F_K2=(P_AKIDNEY - P_CKIDNEY)/(R_K_afferent + R_K_efferent);
              VolumeFlowRate F_K4=(P_CKIDNEY - P_SV)/R_VKIDNEY;
              Pressure P_GLOMER=P_AKIDNEY - F_K2*R_K_afferent;

              Pressure dPf=P_GLOMER - PI_i - P_CKIDNEY;
              VolumeFlowRate Gmax=F_K2*dPf/(P_GLOMER - P_CKIDNEY);
              // GFR = max(0,KfL*(P_GLOMER - PI_i - P_CKIDNEY));
              VolumeFlowRate GFR=Gmax*(1 - exp(-(exp(KfL*dPf/Gmax) - 1)));
              Real GFR_surf = GFR*1e6*60/BSA "ml/min/1.73m2";
              VolumeFlowRate Q_urine=max(0, (GFR - Q_ra)/2);
              VolumeFlowRate F_K3=F_K2 - Q_urine;

              Real T_pass_aff=Cpass0*exp(Cpass1*(D_aff/D0 - 1));
              Real T_a_max=Cact0*exp(-((D_aff/D0 - Cact1)/Cact2)^2);
              Real T_total=T_pass_aff + A_myo*T_a_max;
              Real A_myo_inf=1/(1 + exp(-Ctone0*T_total + Ctone1));

            equation

              0 = F_K1 - F_K2;
              0 = F_K3 - F_K4;
              0 = (A_myo_inf - A_myo)/tau_R_K_afferent;
              0 = (P_AKIDNEY*D_aff/2 - T_total)/P_AKIDNEY;

              annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end GFR_ss_SIUnits;

            model GFR_ss_human
                "Rewritten from Dan's source in steady state, hard converted to SI units"

              extends Src.GFR_ss_SIUnits(
                KfL=2e-9,
                MAPo=12665.626804425,
                PSVo=666.611937075,
                COo(displayUnit="l/min") = 9.6e-05,
                BVo=70e-6*weight,
                weight(displayUnit="kg") = 75,
                Q_ra(displayUnit="l/day") = 2.2981e-08);

               annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end GFR_ss_human;
            end Src;

            package Test
                extends Modelica.Icons.ExamplesPackage;
            model testRenal_
              Renal renal(volume(start = 10e-6)) annotation (Placement(transformation(extent={{-20,-20},{0,0}})));
              Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter(level=0,
                  useLevel=true)
                annotation (Placement(transformation(extent={{-34,-14},{-26,-6}})));
              Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter1(level=
                   0, useLevel=true)
                annotation (Placement(transformation(extent={{14,-14},{6,-6}})));
              Physiolibrary.Hydraulic.Sources.UnlimitedVolume pArt(P=13332.2387415)
                annotation (Placement(transformation(extent={{-60,-20},{-40,0}})));
              Physiolibrary.Hydraulic.Sources.UnlimitedVolume pVen(usePressureInput=true, P=
                   666.611937075)
                annotation (Placement(transformation(extent={{40,-20},{20,0}})));
              Modelica.Blocks.Sources.Ramp ramp(
                height=4000,
                duration=1000,
                offset=0) annotation (Placement(transformation(extent={{4,32},{24,52}})));
            equation
              connect(renal.port_a, leveledPressureFlowConverter.leveledPort_b)
                annotation (Line(
                  points={{-20,-10},{-26,-10}},
                  color={162,29,33},
                  thickness=0.5));
              connect(renal.port_b, leveledPressureFlowConverter1.leveledPort_b)
                annotation (Line(
                  points={{0,-10},{6,-10}},
                  color={162,29,33},
                  thickness=0.5));
              connect(leveledPressureFlowConverter.port_a, pArt.y) annotation (Line(
                  points={{-34,-10},{-40,-10}},
                  color={0,0,0},
                  thickness=1));
              connect(leveledPressureFlowConverter1.port_a, pVen.y) annotation (Line(
                  points={{14,-10},{20,-10}},
                  color={0,0,0},
                  thickness=1));
              connect(ramp.y, pVen.pressure) annotation (Line(points={{25,42},{64,42},{64,-10},
                      {40,-10}}, color={0,0,127}));
              annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end testRenal_;

            model testRenal
              import Signals;
              Renal renal(
                halving=1,
                Q_ra(displayUnit="m3/s") = 0.0230e-6,
                KfL=0.0024203e-6/133.322,
                weight=0.29,
                BVo=2.61e-05,
                COo(displayUnit="m3/s") = 1.2414e-6,
                V_VKIDNEY(start=5e-08),
                R_K_afferent(displayUnit="(mmHg.s)/ml"))
                annotation (Placement(transformation(extent={{-20,-20},{0,0}})));
              Physiolibrary.Hydraulic.Sources.UnlimitedVolume pArt(P=13332.2387415)
                annotation (Placement(transformation(extent={{-82,-20},{-62,0}})));
              Physiolibrary.Hydraulic.Sources.UnlimitedVolume pVen(P=666.611937075)
                annotation (Placement(transformation(extent={{40,-20},{20,0}})));
              Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter
                annotation (Placement(transformation(extent={{-44,-14},{-36,-6}})));
              Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter1
                annotation (Placement(transformation(extent={{16,-14},{8,-6}})));
              Renal renal_puls(
                halving=1,
                Q_ra(displayUnit="m3/s") = 0.0230e-6,
                KfL=0.0024203e-6/133.322,
                weight=0.29,
                BVo=2.61e-05,
                COo(displayUnit="m3/s") = 1.2414e-6,
                V_VKIDNEY(start=5e-08),
                R_K_afferent(displayUnit="(mmHg.s)/ml"))
                annotation (Placement(transformation(extent={{-20,-90},{0,-70}})));
              Physiolibrary.Hydraulic.Sources.UnlimitedVolume pArt1(usePressureInput=true,
                  P(displayUnit="Pa") = 13332.2387415)
                annotation (Placement(transformation(extent={{-82,-90},{-62,-70}})));
              Physiolibrary.Hydraulic.Sources.UnlimitedVolume pVen1(P=666.611937075)
                annotation (Placement(transformation(extent={{40,-90},{20,-70}})));
              Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter2
                annotation (Placement(transformation(extent={{-44,-84},{-36,-76}})));
              Interfaces.LeveledPressureFlowConverter leveledPressureFlowConverter3
                annotation (Placement(transformation(extent={{16,-84},{8,-76}})));
              Modelica.Blocks.Sources.Sine sine(
                amplitude=20*133.322,
                f=1,
                offset=pArt.P,
                startTime=0)
                annotation (Placement(transformation(extent={{-118,-60},{-98,-40}})));
              Signals.ContinuousMeanValue AVG_P_glomer(reset=time > 90, tau=60)
                annotation (Placement(transformation(extent={{100,-40},{120,-20}})));
              Modelica.Blocks.Sources.RealExpression realExpression(y=renal_puls.P_GLOMER)
                annotation (Placement(transformation(extent={{66,-40},{86,-20}})));
              Signals.ContinuousMeanValue AVG_GFR(reset=time > 90, tau=60)
                  annotation (Placement(transformation(extent={{100,-70},{120,-50}})));
              Modelica.Blocks.Sources.RealExpression realExpression1(y=renal_puls.GFR)
                annotation (Placement(transformation(extent={{66,-70},{86,-50}})));
            equation
              connect(renal.port_a, leveledPressureFlowConverter.leveledPort_b) annotation (
                 Line(
                  points={{-20,-10},{-36,-10}},
                  color={162,29,33},
                  thickness=0.5));
              connect(pArt.y, leveledPressureFlowConverter.port_a) annotation (Line(
                  points={{-62,-10},{-44,-10}},
                  color={0,0,0},
                  thickness=1));
              connect(renal.port_b, leveledPressureFlowConverter1.leveledPort_b)
                annotation (Line(
                  points={{0,-10},{8,-10}},
                  color={162,29,33},
                  thickness=0.5));
              connect(pVen.y, leveledPressureFlowConverter1.port_a) annotation (Line(
                  points={{20,-10},{16,-10}},
                  color={0,0,0},
                  thickness=1));
              connect(renal_puls.port_a, leveledPressureFlowConverter2.leveledPort_b)
                annotation (Line(
                  points={{-20,-80},{-36,-80}},
                  color={162,29,33},
                  thickness=0.5));
              connect(pArt1.y, leveledPressureFlowConverter2.port_a) annotation (Line(
                  points={{-62,-80},{-44,-80}},
                  color={0,0,0},
                  thickness=1));
              connect(renal_puls.port_b, leveledPressureFlowConverter3.leveledPort_b)
                annotation (Line(
                  points={{0,-80},{8,-80}},
                  color={162,29,33},
                  thickness=0.5));
              connect(pVen1.y, leveledPressureFlowConverter3.port_a) annotation (Line(
                  points={{20,-80},{16,-80}},
                  color={0,0,0},
                  thickness=1));
              connect(pArt1.pressure, sine.y) annotation (Line(points={{-82,-80},{-90,-80},{
                      -90,-50},{-97,-50}}, color={0,0,127}));
              connect(realExpression.y, AVG_P_glomer.u)
                annotation (Line(points={{87,-30},{98,-30}}, color={0,0,127}));
                connect(realExpression1.y, AVG_GFR.u) annotation (Line(points={
                        {87,-60},{98,-60}}, color={0,0,127}));
              annotation (
                Icon(coordinateSystem(preserveAspectRatio=false)),
                Diagram(coordinateSystem(preserveAspectRatio=false)),
                experiment(
                    StopTime=400,
                    Interval=0.05,
                    Tolerance=1e-06,
                    __Dymola_Algorithm="Cvode"));
            end testRenal;
            end Test;

          model Renal
            "Rewritten from Dan's source in steady state, converted to SI units, divided to one kidney model only. leaking urine!"
            import Physiolibrary.Types.*;

            // adjustment to fit within the infrastructure
            parameter Real Ra = 0, Rv = 0, thoracic_pressure_ratio = 0, I = 0, C = 0, zpv = 0, nominal_pressure = 0;
            parameter Boolean UseOuter_thoracic_pressure = false;
            Pressure p = P_CKIDNEY;
            Pressure p_C = P_GLOMER;
            VolumeFlowRate q_in = F_K1;

            Volume volume = V_AKIDNEY + V_VKIDNEY;

            constant Real mmHg2SI(unit="Pa") = 133.322;
            constant Real ml2SI(unit="m3") = 1e-6;
            constant Real q2SI(unit="m3/s") = 1e-6;
            constant Real C2SI(unit="m3/Pa") = ml2SI/mmHg2SI;
            constant Real R2SI(unit="Pa.s/m3") = mmHg2SI*1.0/ml2SI;
            // INPUT PARAMETERS
              parameter Modelica.Units.SI.Area BSA=1.73;
            parameter Real halving = 0.5 "halving of volumes to divide for two kidneys";

            // Adjustble Parameters
            parameter VolumeFlowRate Q_ra=2.68E-06*halving;
            parameter Real KfL=2e-9*halving "filtration coeffcicient, m3/Pa, for rat 0.0024203*ml2SI/mmHg2SI";
            parameter Real Cpass0=100*mmHg2SI "Pa*micron";
            parameter Real Cpass1=4.8703;
            parameter Real Cact0=1200*mmHg2SI "Pa*micron";
            parameter Real Cact1=0.98321;
            parameter Real Cact2=0.42164;
            parameter Real Ctone0=0.0078167/mmHg2SI "1/mmHg/micron";
            parameter Real Ctone1=4.2021;

            // Fixed Parameters
            parameter Physiolibrary.Types.Mass weight=70 "body mass, kilograms";
            parameter Volume BVo=70e-6*weight*halving "reference total blood volume";
            parameter VolumeFlowRate COo=9.5e-05
              "target cardiac output";
            parameter Pressure PSVo=666.611937075
                                              "target systemic venous pressure";
            parameter Pressure MAPo=13332.2387415
                                                "target MAP, mmHg";
            parameter VolumeFlowRate RBFo=COo*0.2*halving "target RBF, 0.2 of CO";

            parameter Pressure P_G_nom=4666.283559525;
            parameter HydraulicResistance R_K_a0=P_G_nom/RBFo;
            parameter HydraulicResistance R_K_efferent=40*mmHg2SI/RBFo;

            parameter HydraulicResistance R_AKIDNEY=(MAPo - 90*mmHg2SI)/RBFo "assumes (MAPo-90mmHg) drop PA2 - PAKidney";
            parameter HydraulicResistance R_VKIDNEY=(10*mmHg2SI - PSVo)/RBFo "assumes (10mmHg-PSVo) drop from PCkidney - PSV";
            parameter HydraulicCompliance C_AKIDNEY=0.002*BVo/(90*mmHg2SI) "assumes 0.002 of BV at 90 mmHg";
            parameter HydraulicCompliance C_VKIDNEY=0.002*BVo/(10*mmHg2SI) "assumes 0.002 of BV at 10 mmHg";
            parameter Pressure PI_i=3733.02684762
                                               "Onkotic pressure";
              parameter Modelica.Units.SI.Time tau_R_K_afferent=60
                "Time constant in seconds";

            parameter Real D0=10 "TODO";

            Physiolibrary.Types.Pressure p_out "venous pressure output";
            Physiolibrary.Types.Pressure p_in "Arterial pressure input";

            // State Variables
            Volume V_AKIDNEY;
            Volume V_VKIDNEY(start=5*ml2SI);
            Real A_myo(start=0.3) "TODO";
            Real D_aff(start=9.5) "Diameter of afferent resistance. Relative to D0";

            HydraulicResistance R_K_afferent=R_K_a0*(D0/D_aff)^4;
            Pressure P_AKIDNEY(start=90*mmHg2SI) = V_AKIDNEY/C_AKIDNEY;
            Pressure P_CKIDNEY=V_VKIDNEY/C_VKIDNEY;
            VolumeFlowRate F_K1=(p_in - P_AKIDNEY)/R_AKIDNEY;
            VolumeFlowRate F_K2=(P_AKIDNEY - P_CKIDNEY)/(R_K_afferent + R_K_efferent);
            // VolumeFlowRate F_K3=F_K2 - Q_urine;
            VolumeFlowRate F_K3=F_K2;
            VolumeFlowRate F_K4=(P_CKIDNEY - p_out)/R_VKIDNEY;
            Pressure P_GLOMER=P_AKIDNEY - F_K2*R_K_afferent;

            Pressure dPf=P_GLOMER - PI_i - P_CKIDNEY;
            VolumeFlowRate Gmax=F_K2*dPf/(P_GLOMER - P_CKIDNEY);
            // GFR = max(0,KfL*(P_GLOMER - PI_i - P_CKIDNEY));
            VolumeFlowRate GFR=Gmax*(1 - exp(-(exp(KfL*dPf/Gmax) - 1)));
            Real GFR_surf = GFR*1e6*60/BSA "ml/min/1.73m2";
            VolumeFlowRate Q_urine=max(0, (GFR - Q_ra)/2);

            Real T_pass_aff=Cpass0*exp(Cpass1*(D_aff/D0 - 1));
            Real T_a_max=Cact0*exp(-((D_aff/D0 - Cact1)/Cact2)^2);
            Real T_total=T_pass_aff + A_myo*T_a_max;
            Real A_myo_inf=1/(1 + exp(-Ctone0*T_total + Ctone1));

            ADAN_main.Components.Interfaces.HydraulicPort_a_leveled port_a
              annotation (Placement(transformation(extent={{-110,-10},{-90,10}})));
            ADAN_main.Components.Interfaces.HydraulicPort_b_leveled port_b
              annotation (Placement(transformation(extent={{90,-10},{110,10}})));
          initial equation
            V_AKIDNEY = V_VKIDNEY;
          equation
            port_a.pressure =p_in;
            port_b.pressure =p_out;
              port_a.q = F_K1;
              port_b.q = -F_K4;

            der(V_AKIDNEY) = F_K1 - F_K2;
            der(V_VKIDNEY) = F_K3 - F_K4;
            der(A_myo) = (A_myo_inf - A_myo)/tau_R_K_afferent;
            der(D_aff) = (P_AKIDNEY*D_aff/2 - T_total)/P_AKIDNEY;

            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)));
          end Renal;

          model Renal_P_Int_i
              "Rewritten from Dan's source in steady state, converted to SI units, divided to one kidney model only. leaking urine!"
            import Physiolibrary.Types.*;
            extends Vessel_modules.Auxiliary.PartialSystemicElement(
                final UseInertance=false, final LimitBackflow = false, zpv = 0);

            // adjustment to fit within the infrastructure
          //  parameter Real Ra = 0, Rv = 0, thoracic_pressure_ratio = 0, I = 0, C = 0, zpv = 0, nominal_pressure = 0;
            parameter Boolean UseOuter_thoracic_pressure = false;
            parameter Real phi_delayed = 0 "A dummy parameter to allow inheritance from unrelated parent";

            Pressure p = P_CKIDNEY;
            Pressure p_C = P_GLOMER;

            constant Real mmHg2SI(unit="Pa") = 133.322;
            constant Real ml2SI(unit="m3") = 1e-6;
            constant Real q2SI(unit="m3/s") = 1e-6;
            constant Real C2SI(unit="m3/Pa") = ml2SI/mmHg2SI;
            constant Real R2SI(unit="Pa.s/m3") = mmHg2SI*1.0/ml2SI;
            // INPUT PARAMETERS
            parameter Modelica.Units.SI.Area BSA=1.73;
            parameter Real halving = 0.5 "halving of volumes to divide for two kidneys";

            // Adjustble Parameters
            parameter VolumeFlowRate Q_ra=2.68E-06;
            parameter Real KfL=2e-9 "filtration coeffcicient, m3/Pa, for rat 0.0024203*ml2SI/mmHg2SI";
            parameter Real Cpass0=100*mmHg2SI "Pa*micron";
            parameter Real Cpass1=4.8703;
            parameter Real Cact0=1200*mmHg2SI "Pa*micron";
            parameter Real Cact1=0.98321;
            parameter Real Cact2=0.42164;
            parameter Real Ctone0=0.0078167/mmHg2SI "1/mmHg/micron";
            parameter Real Ctone1=4.2021 "TODO: dependent on the phi?";

            // Fixed Parameters
            parameter Physiolibrary.Types.Mass weight=70 "body mass, kilograms";
            parameter Volume BVo=70e-6*weight*halving "reference total blood volume";
            parameter VolumeFlowRate COo=9.5e-05
              "target cardiac output";
            parameter Pressure PSVo=666.611937075
                                              "target systemic venous pressure";
            parameter Pressure MAPo=13332.2387415
                                                "target MAP, mmHg";
            parameter VolumeFlowRate RBFo=COo*0.2*halving "target RBF, 0.2 of CO";

            parameter Pressure P_G_nom=4666.283559525;
            parameter HydraulicResistance R_K_a0=P_G_nom/RBFo;
            parameter HydraulicResistance R_K_efferent=40*mmHg2SI/RBFo;

            parameter HydraulicResistance R_AKIDNEY=(MAPo - 90*mmHg2SI)/RBFo "assumes (MAPo-90mmHg) drop PA2 - PAKidney";
            parameter HydraulicResistance R_VKIDNEY=(10*mmHg2SI - PSVo)/RBFo "assumes (10mmHg-PSVo) drop from PCkidney - PSV";
            parameter HydraulicCompliance C_AKIDNEY=0.002*BVo/(90*mmHg2SI) "assumes 0.002 of BV at 90 mmHg";
            parameter HydraulicCompliance C_VKIDNEY=0.002*BVo/(10*mmHg2SI) "assumes 0.002 of BV at 10 mmHg";
            parameter Pressure PI_i=3733.02684762
                                               "Onkotic pressure";
            parameter Modelica.Units.SI.Time tau_R_K_afferent=60
              "Time constant in seconds";

            parameter Real D0=10 "TODO";
            parameter Boolean leakUrine = false "If true, leaks the urine from the organism. Total volume decreases then!!";

            // State Variables
            Volume V_AKIDNEY;
            Volume V_VKIDNEY(start=5*ml2SI);
            Real A_myo(start=0.3) "TODO";
            Real D_aff(start=9.5) "Diameter of afferent resistance. Relative to D0";

            parameter Boolean UsePhiOnResistance = true annotation (Evaluate = true);
            HydraulicResistance R_K_a = if UsePhiOnResistance then R_K_a0*(1 + (phi - settings.phi0)) else R_K_a0;
            HydraulicResistance R_K_afferent=R_K_a*(D0/D_aff)^4;

            Pressure P_AKIDNEY(start=90*mmHg2SI) = V_AKIDNEY/C_AKIDNEY;
            Pressure P_CKIDNEY=V_VKIDNEY/C_VKIDNEY;
            VolumeFlowRate F_K1=(p_in - P_AKIDNEY)/R_AKIDNEY;
            VolumeFlowRate F_K2=(P_AKIDNEY - P_CKIDNEY)/(R_K_afferent + R_K_efferent);
            VolumeFlowRate F_K3=if leakUrine then F_K2 - Q_urine else F_K2;
            VolumeFlowRate F_K4=(P_CKIDNEY - p_out)/R_VKIDNEY;
            Pressure P_GLOMER=P_AKIDNEY - F_K2*R_K_afferent;

            input Pressure P_int;
            Pressure dPf=P_GLOMER - PI_i - P_int;
            VolumeFlowRate Gmax=F_K2*dPf/(P_GLOMER - P_int);
            // GFR = max(0,KfL*(P_GLOMER - PI_i - P_CKIDNEY));
            VolumeFlowRate GFR=Gmax*(1 - exp(-(exp(KfL*halving*dPf/Gmax) - 1)));
            Real GFR_surf = GFR*1e6*60/BSA "ml/min/1.73m2";
            VolumeFlowRate Q_urine=max(0, (GFR - Q_ra*halving)/2);

            Real T_pass_aff=Cpass0*exp(Cpass1*(D_aff/D0 - 1));
            Real T_a_max=Cact0*exp(-((D_aff/D0 - Cact1)/Cact2)^2);
            Real T_total=T_pass_aff + A_myo*T_a_max;
            Real A_myo_inf=1/(1 + exp(-Ctone0*T_total + Ctone1));

          initial equation
          //  V_AKIDNEY = V_VKIDNEY;
          equation
            volume = V_AKIDNEY + V_VKIDNEY;
            q_in = F_K1;
            q_out = F_K4;

            der(V_AKIDNEY) = F_K1 - F_K2;
            der(V_VKIDNEY) = F_K3 - F_K4;
            der(A_myo) = (A_myo_inf - A_myo)/tau_R_K_afferent;
            der(D_aff) = (P_AKIDNEY*D_aff/2 - T_total)/tau_R_K_afferent;

            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)));
          end Renal_P_Int_i;

          end Renal;

          package Splanchnic
            model Splanchnic_circulation "Linear Splanchnic circulation with extra volume"
                extends Vessel_modules.Auxiliary.PartialSystemicElement(
                  final UseInertance=false, final LimitBackflow = false);

              parameter Real phi_delayed = 0;
              Physiolibrary.Types.Pressure p = Cliver.q_in.pressure;

              Interfaces.LeveledPressureFlowConverter
                leveledPressureFlowConverter(useLevel=false) annotation (
                  Placement(transformation(extent={{-74,-4},{-82,4}})));
              Interfaces.LeveledPressureFlowConverter
                leveledPressureFlowConverter1(useLevel=false)
                annotation (Placement(transformation(extent={{76,-4},{84,4}})));


            Physiolibrary.Hydraulic.Components.Resistor splanchnic(Resistance=7999343244.900001*(93/500))
              annotation (Placement(transformation(extent={{-60,-10},{-40,10}})));
            Physiolibrary.Hydraulic.Components.Resistor HV(Resistance(
                    displayUnit="(mmHg.min)/l") = 79993432.449)
              annotation (Placement(transformation(extent={{40,-10},{60,10}})));
            Physiolibrary.Hydraulic.Components.ElasticVessel Cliver(
                volume_start=0.001,
                ZeroPressureVolume=0.0003,
                Compliance=7.500615758456563e-09*(600/8),
                useExternalPressureInput=true)
              annotation (Placement(transformation(extent={{-10,10},{10,30}})));
              Modelica.Blocks.Sources.RealExpression realExpression(y=
                    external_pressure_outside)
                annotation (Placement(transformation(extent={{-36,24},{-16,44}})));
            equation
              volume = Cliver.volume;
              connect(leveledPressureFlowConverter.leveledPort_b, port_a)
                annotation (Line(
                  points={{-82,0},{-100,0}},
                  color={162,29,33},
                  thickness=0.5));
              connect(leveledPressureFlowConverter1.leveledPort_b, port_b)
                annotation (Line(
                  points={{84,0},{100,0}},
                  color={162,29,33},
                  thickness=0.5));
              connect(leveledPressureFlowConverter.port_a, splanchnic.q_in) annotation (
                  Line(
                  points={{-74,0},{-60,0}},
                  color={0,0,0},
                  thickness=1));
              connect(splanchnic.q_out, Cliver.q_in) annotation (Line(
                  points={{-40,0},{0,0},{0,20}},
                  color={0,0,0},
                  thickness=1));
              connect(HV.q_in, Cliver.q_in) annotation (Line(
                  points={{40,0},{0,0},{0,20}},
                  color={0,0,0},
                  thickness=1));
              connect(HV.q_out, leveledPressureFlowConverter1.port_a) annotation (Line(
                  points={{60,0},{76,0}},
                  color={0,0,0},
                  thickness=1));
              connect(realExpression.y, Cliver.externalPressure)
                annotation (Line(points={{-15,34},{8,34},{8,28}}, color={0,0,127}));
              annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end Splanchnic_circulation;

            model Ascites
              "Ascites build up model by Levitt and Levitt (PMID 22453061)"

              parameter Boolean steadyState = false;

              Real J_L=max(0,L_L*(P_L - P_A - P_Break)) "LIver leak, eq. 19";
              Real J_lymph= max(0, L_Y*(P_A - P_RA + P_min)) "Lymph flow, eq. 20";
              Real J_I;
              //  Real J_I = L_I*((P_I - P_A) - (Pi_I - Pi_A)) equation 4

              Real J_C = L_C* (P_C - P_I) - (Pi_P - Pi_I) "Eq. 1 and A4";

              Real P_L = (P_P + P_HV)/2 "Liver pressure";
              Boolean ascites = P_A > P_RA + 2 "Are we in the ascites zone?";
              Real P_HV(start = 4) "Hepatic vein pressure";
              Real P_A( start = 2) "Peritonela pressure";
              Real P_P "Portal vein pressure, use PV wedge";
              Real P_C( start = 9) = P_P + 3 "Intestinal capillary pressure, deduced from eq. 23";
              Real P_I "Intestinal pressure";

              parameter Real P_Break = 8 "mmHg";
              parameter Real P_RA = 5 "mmHg";
              parameter Real P_HPVG= 16 "mmHg";
              parameter Real P_min = 2 "mmHg";
              parameter Real L_L=10.3 "Conductance of ruptured liver lymphatics ml/h/mmHg";
              parameter Real L_Y=7.86 "ml/h/mmHg";
              parameter Real L_T=6.25 "Intestinal Blood to peritoneal conductance ml/h/mmHg";
              parameter Real L_I=2*L_T "ml/h/mmHg";
              parameter Real L_C=2*L_T "ml/h/mmHg";

              parameter Real V_min = 100 "ml";
              parameter Real D = 800 "mL/mmHg";
              parameter Real D_I = 133  "mL/mmHg";
              parameter Real V_I1 = 100 "ml";
              parameter Real V_I2 = 50 "ml";
              parameter Real Perm = 2 "ml/h";
              parameter Real L_YI = 18 "ml/h/mmHg";
              parameter Real m = 0.8 "Ratio of plasma to peritoneal protein oncotic pressure. This should probably be a time-variable";

              parameter Real F_L = 5*0.1 "Nominal liver blood flow, Lpm";
              parameter Real R_L = P_HPVG/F_L "Normal liver resistance, mmHg.min/L";

              // Concentrations - no equations?
              Real Pi_P(start = 25) = 25;
              Real Pi_I(start = 18, fixed = true);// = Pi_P + P_A  - P_C "Equation 3";
              Real Pi_A(start = 18, fixed = true);// = Pi_I;

              Real J_ILymph = max(0, P_I - P_A)*L_YI;
              Real J_Ca =  Perm*(Pi_P - Pi_I) "Capillary leak";

              // time-varying
              Real V(start= 200)=V_min + D*(P_A - P_min) "Eq. 24";
              Real V_I(start = 60);
              Real Amt_A = Pi_A / V "peritoneal Protein amount ";
              Real Amt_I = Pi_I / V_I "Intestinal Protein amount ";

              Real dV;
              Real dV_I;
              Real dAmt_A;
              Real dAmt_I;
            equation
              if not ascites then
                P_HV = P_RA + 2;
                P_P = P_RA + F_L*R_L + 2 "Eq.23";
                //P_C = P_RA + F_L*R_L + 5;
                //P_RA + HPVG + 5;
              else
                P_HV = P_A;
                P_P = P_A + F_L*R_L "Eq. 23";
            //     P_C = P_A - 2 + F_L*R_L +5;
              end if;

              if steadyState then
                P_I = P_A "Eq. 4";
              elseif V_I < V_I2 then
                // not steadyState - volume maxxed
                P_I = P_A + (V_I2 - V_I1)/D_I "Eq A7";
              else
                // not steady state compliance curve
                P_I = P_A + (V_I - V_I1)/D_I "Eq A7";
              end if;

              dV = J_I + J_L - J_lymph;
              dAmt_A = m*Pi_P*J_L - Pi_A*J_lymph;
              dV_I = J_C - J_ILymph - J_I;
              dAmt_I = J_Ca - Pi_I *J_ILymph;

            if steadyState then
                Pi_I = Pi_P + P_A  - P_C "Equation 3";
                dV = 0 "Eq. 21";
            //     J_lymph=J_I + J_L "Eq. 21";
                //dV_I = 0;
                dAmt_A = 0 "Eq. 22";
                //dAmt_I = 0;

                J_I = L_T*((P_C - P_A) - (Pi_P - Pi_A)) "Eq. 18";
                V_I = 60 "Assumed constant";
            else

                J_I = L_I*((P_I - P_A) - (Pi_I - Pi_A)) "Eq. A5";
                der(V) = dV;
                der(V_I) = dV_I;
                der(Amt_A) = dAmt_A;
                der(Amt_I) = dAmt_I;
            end if;

              // der(V) = J_I + J_L - J_lymph;
            //   der(Amt_A) = m*Pi_P*J_L - Pi_A*J_lymph;
            //   der(V_I) = J_C - J_ILymph - J_I;
            //   der(Amt_I) = J_Ca - Pi_I *J_ILymph;

              // der(Amt_A) = dAmt_A;
              // der(V_I) = dV_I;
              // der(Amt_I) = dAmt_I;

              annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                    coordinateSystem(preserveAspectRatio=false)));
            end Ascites;

            model AscitesSS
              "Ascites build up model by Levitt and Levitt (PMID 22453061)"
              //
              constant Real h2min = 1/60;
               Real J_L=max(0,L_L*(P_L - P_A - P_Break)) "LIver leak, eq. 19";
               Real J_lymph= max(0,L_Y*(P_A - P_RA + P_min)) "Lymph flow, eq. 20";
               Real J_I;
            //   //  Real J_I = L_I*((P_I - P_A) - (Pi_I - Pi_A)) equation 4
            //
            //   Real J_C = L_C* (P_C - P_I) - (Pi_P - Pi_I) "Eq. 1 and A4";
            //
               Real P_L = (P_P + P_HV)/2 "Liver pressure";
               Boolean ascites = P_A > P_RA + 2 "Are we in the ascites zone?";
               Real P_HV(start = 4) "Hepatic vein pressure";
               Real P_A( start = 2)  "Peritonela pressure";
               Real P_P "Portal vein pressure, use PV wedge";
               Real P_C( start = 9)  "= P_P + 3, Intestinal capillary pressure, deduced from eq. 23";
            //   Real P_I "Intestinal pressure";
            //
               parameter Real P_Break = 8 "mmHg";
               parameter Real P_RA = 2 "mmHg";
               Real P_HPVG = time "4 mmHg";
               parameter Real P_min = 2 "mmHg";
               parameter Real L_L=10.3*h2min "Conductance of ruptured liver lymphatics ml/h/mmHg";
               parameter Real L_Y=7.86*h2min "ml/h/mmHg";
               parameter Real L_T=6.25*h2min "Intestinal Blood to peritoneal conductance ml/h/mmHg";
            //   parameter Real L_I=2*L_T "ml/h/mmHg";
            //   parameter Real L_C=2*L_T "ml/h/mmHg";
            //
               parameter Real V_min = 100 "ml";
               parameter Real D = 800 "mL/mmHg";
            //   parameter Real D_I = 133  "mL/mmHg";
            //   parameter Real V_I1 = 100 "ml";
            //   parameter Real V_I2 = 50 "ml";
            //   parameter Real Perm = 2 "ml/h";
            //   parameter Real L_YI = 18 "ml/h/mmHg";
               parameter Real m = 0.8 "Ratio of plasma to peritoneal protein oncotic pressure. This should probably be a time-variable";
            //
            //   parameter Real F_L = 5*0.1 "Nominal liver blood flow, Lpm";
            //   Real R_L = P_HPVG/F_L "Normal liver resistance, mmHg.min/L";
            //
            //   // Concentrations - no equations?
               Real Pi_P(start = 25) = 25;
            //   Real Pi_I(start = 18, fixed = false);// = Pi_P + P_A  - P_C "Equation 3";
               Real Pi_A(start = 18, fixed = false);// = Pi_I;
            //
            //   // time-varying
               Real V(start= 200)=V_min + D*(P_A - P_min) "Eq. 24";
            //
             //  Real dV;
              // Real dAmt_A;
            equation
               if not ascites then
                 P_HV = P_RA + 2;
            //     P_P = P_RA + F_L*R_L + 2 "Eq.23";
            //     //P_C = P_RA + F_L*R_L + 5;
            //     //P_RA + HPVG + 5;
               else
                 P_HV = P_A;
            //     P_P = P_A + F_L*R_L "Eq. 23";
            //     P_C = P_A - 2 + F_L*R_L +5;
               end if;
               P_C = P_P + 3;
            //
            //     P_I = P_A "Eq. 4";
            //
               P_HPVG = P_P - P_HV;
            //
               J_lymph = J_I + J_L "Eq. 21";
               Pi_A*J_lymph = m*Pi_P*(J_L) "Eq. 22";
            //
            //     Pi_I = Pi_P + P_A  - P_C "Equation 3";
                 //dV = 0 "Eq. 21";
            //     J_lymph=J_I + J_L "Eq. 21";
            //     //dV_I = 0;
                // dAmt_A = 0 "Eq. 22";
            //     //dAmt_I = 0;
            //
                 J_I = L_T*((P_C - P_A) - (Pi_P - Pi_A)) "Eq. 18";

              // der(V) = J_I + J_L - J_lymph;
            //   der(Amt_A) = m*Pi_P*J_L - Pi_A*J_lymph;
            //   der(V_I) = J_C - J_ILymph - J_I;
            //   der(Amt_I) = J_Ca - Pi_I *J_ILymph;

              // der(Amt_A) = dAmt_A;
              // der(V_I) = dV_I;
              // der(Amt_I) = dAmt_I;

              annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                    coordinateSystem(preserveAspectRatio=false)),
                experiment(
                  StartTime=6,
                  StopTime=25,
                  __Dymola_Algorithm="Dassl"));
            end AscitesSS;
          end Splanchnic;
        end Organs;
      end Systemic;

      package Lymphatic
        model SimplestLymphatic
          parameter Integer nc = 0 "number of capillaries";
           // annotation(Dialog(connectorSizing = true));
           Physiolibrary.Types.RealIO.PressureInput capillaryPressures[nc] annotation (Placement(transformation(extent={{-102,
                     -10},{-82,10}}),
                                 iconTransformation(extent={{-100,-10},{-80,10}})));

        //   Real capillaryPressures[:] = {1412, 12412};
          Physiolibrary.Types.Pressure capillaryPressures_mean[nc](each start = 2664);
          Physiolibrary.Types.VolumeFlowRate J1[nc];
          Physiolibrary.Types.VolumeFlowRate J2 = k2*(p_int -  p_lymph);
          Physiolibrary.Types.VolumeFlowRate J3 = k3*(p_lymph -  p_vc_mean);

          parameter Modelica.Units.SI.Time tau=10;
          parameter Physiolibrary.Types.Pressure deltaPi=1066.57909932;

          parameter Physiolibrary.Types.HydraulicConductance k1=7.35e-12;
          parameter Physiolibrary.Types.HydraulicConductance k2=1.085e-10;
          parameter Physiolibrary.Types.HydraulicConductance k3=2.4e-10;

          output Physiolibrary.Types.Pressure p_int(displayUnit="mmHg"); // =1333.22387415;
        //  Physiolibrary.Types.Volume v_int;
         // parameter Real c_int = 1;
          output Physiolibrary.Types.Pressure p_lymph(displayUnit="mmHg"); //=799.93432449;
          Physiolibrary.Types.Pressure p_vc_mean( start = 666);

          Physiolibrary.Types.RealIO.PressureInput p_vc annotation (Placement(transformation(extent={{-102,
                    -92},{-82,-72}}),
                                iconTransformation(extent={{-100,-100},{-80,-80}})));

          output Physiolibrary.Types.VolumeFlowRate lymph_flow               "normal Lymphatic flow per day is 5.787037037037e-08";

        parameter Real p1 =   6.443e-09;
        parameter Real p2 =   4.159e-05;
        parameter Real p3 =       1.045;
        parameter Real a =        1.06;
        parameter Real b =  -5.451e-05;
        parameter Real c =     -0.7703;
        parameter Real d =  -0.0007743;
        parameter Physiolibrary.Types.Pressure p_int_diff(displayUnit="mmHg")=1866.51342381;
        Physiolibrary.Types.Pressure x = p_int - p_int_diff;
        output Physiolibrary.Types.Fraction Vr = max(0, p1*x.^2 + p2*x + p3) + max(0,a*exp(b*x) + c*exp(d*x));
        parameter Physiolibrary.Types.Volume V_normal(displayUnit="l")=0.07;
        Physiolibrary.Types.Volume V_int = V_excess + V_normal;
        output Physiolibrary.Types.Volume V_excess(min = -V_normal) = V_normal*(Vr -1);
        equation
          sum(J1) = J2;
          J2 = J3;

          lymph_flow = J3;

        //  v_int = p_int*c_int;

          for i in 1:nc loop
            k1*(capillaryPressures_mean[i] - deltaPi - p_int) = J1[i];
          der(capillaryPressures_mean[i])*tau = capillaryPressures[i] -
            capillaryPressures_mean[i];
          end for;

          der(p_vc_mean)*tau = p_vc - p_vc_mean;

          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end SimplestLymphatic;

        package Testers
            extends Modelica.Icons.ExamplesPackage;
          model LymphaticTest
            Modelica.Blocks.Sources.Ramp Pcap(
              height=0*133.322,
              duration(displayUnit="h") = 86400,
              offset=76*133.32)
              annotation (Placement(transformation(extent={{-80,20},{-60,40}})));
            Modelica.Blocks.Sources.Ramp Pv(
              height=0*133.322,
              duration=100,
              offset=5*133.32,
              startTime=100)                                      annotation (
                Placement(transformation(extent={{-80,-40},{-60,-20}})));
            SimplestLymphatic simplestLymphatic(nc=1,
              tau=1,
              p_int_diff=2666.4477483,
              V_normal=0.015)
              annotation (Placement(transformation(extent={{-20,20},{0,40}})));
            SimplestLymphaticDynamic simplestLymphaticDynamic(
              nc=1,
              tau=1,
              p_int_diff=2666.4477483,
              V_normal=0.015)
              annotation (Placement(transformation(extent={{-20,-40},{0,-20}})));
            SimplestLymphaticDynamicSpeedUp simplestLymphaticDynamicSpeedUp(
              nc=1,
              tau=1,
              p_int_diff=2666.4477483,
              V_normal=0.015,
              timeSpeedUpFactor(amplitude=800.0))
              annotation (Placement(transformation(extent={{-20,-10},{0,10}})));
          equation
            connect(Pcap.y, simplestLymphatic.capillaryPressures[1])
              annotation (Line(points={{-59,30},{-19,30}},
                  color={0,0,127}));
            connect(simplestLymphatic.p_vc, Pv.y) annotation (Line(points={{-19,21},{-50,21},
                    {-50,-30},{-59,-30}},            color={0,0,127}));
            connect(simplestLymphaticDynamic.capillaryPressures[1], Pcap.y) annotation (
                Line(points={{-19,-30},{-40,-30},{-40,30},{-59,30}}, color={0,0,127}));
            connect(simplestLymphaticDynamic.p_vc, Pv.y) annotation (Line(points={{-19,-39},
                    {-50,-39},{-50,-30},{-59,-30}}, color={0,0,127}));
            connect(simplestLymphaticDynamicSpeedUp.capillaryPressures[1], Pcap.y)
              annotation (Line(points={{-19.6,1.6},{-40,1.6},{-40,30},{-59,30}},
                                                                           color={0,0,127}));
            connect(simplestLymphaticDynamicSpeedUp.p_vc, Pv.y) annotation (Line(points={{-0.4,
                    1.6},{-50,1.6},{-50,-30},{-59,-30}},   color={0,0,127}));
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)),
                Diagram(coordinateSystem(preserveAspectRatio=false)),
              experiment(
                StopTime=1200,
                Interval=1,
                Tolerance=1e-07,
                __Dymola_Algorithm="Dassl"));
          end LymphaticTest;

          model testBasicLymphatics
            BasicLymphatics basicLymphatics(
              nc=nc,
              resistor(Resistance(displayUnit="(mmHg.min)/l") = 15998686.4898),
              capillaryMembrane(cond(displayUnit="ml/(mmHg.day)")=
                  3.4725072955817e-10),
              unlimitedPump(useSolutionFlowInput=false, SolutionFlow(
                    displayUnit="l/day") = 4.6296296296296e-08),
              speedUpCommand(speedUp=if time > 100 then 60 else 3600),
              pumpPressureHead(p_head0=
                                      3199.73729796),
              iSFOsm(useOsmolarityInput=true),
              resistor1(Resistance(displayUnit="(mmHg.min)/ml")=
                  7999343244.900001*(10/2.7777)),
              osmolarities(P_oncotic(displayUnit="mmHg") = 2533.13),
              unlimitedVolume(usePressureInput=false, P=533.28954966),
              elasticVessel(volume_start=0.0005, Compliance(displayUnit=
                      "l/mmHg") = 3.7503078792283e-07),
              booleanExpression(y=time > 100))
              annotation (Placement(transformation(extent={{-20,0},{0,20}})));

            Modelica.Blocks.Sources.RealExpression realExpression(y=20/mmHg2SI)
              annotation (Placement(transformation(extent={{-84,2},{-64,22}})));
            parameter Physiolibrary.Types.Pressure mmHg2SI(displayUnit="Pa")=1/
              133.322387415
              "Value of Real output";
            parameter Integer nc=1;
            Modelica.Blocks.Routing.Replicator replicator
              annotation (Placement(transformation(extent={{-54,2},{-34,22}})));
            Modelica.Blocks.Sources.RealExpression realExpression1(y=4/mmHg2SI)
              annotation (Placement(transformation(extent={{40,0},{20,20}})));
          equation
            connect(realExpression.y, replicator.u)
              annotation (Line(points={{-63,12},{-56,12}}, color={0,0,127}));
            connect(basicLymphatics.capillaryPressures, replicator.y)
              annotation (Line(points={{-19.6,11.6},{-33,12}}, color={0,0,127}));
            connect(realExpression1.y, basicLymphatics.p_vc) annotation (Line(
                  points={{19,10},{19,11.6},{-0.4,11.6}}, color={0,0,127}));
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)),
              experiment(
                StopTime=2400,
                Tolerance=1e-06,
                __Dymola_Algorithm="Dassl"));
          end testBasicLymphatics;
        end Testers;

        model DynamicLymphatics
          Physiolibrary.Hydraulic.Components.ElasticVessel ISF
            annotation (Placement(transformation(extent={{-38,-10},{-18,10}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume capillaryPressure(P=
                2666.4477483) annotation (Placement(transformation(extent={{
                    -118,-10},{-98,10}})));
          Physiolibrary.Hydraulic.Components.Resistor resistor
            annotation (Placement(transformation(extent={{-78,-10},{-58,10}})));
          Physiolibrary.Hydraulic.Components.ElasticVessel Lymphatics
            annotation (Placement(transformation(extent={{22,-10},{42,10}})));
          Physiolibrary.Hydraulic.Components.Resistor resistor1
            annotation (Placement(transformation(extent={{-10,-10},{10,10}})));
          Physiolibrary.Hydraulic.Components.Resistor resistor2
            annotation (Placement(transformation(extent={{52,-10},{72,10}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume vcPressure(P=
                2666.4477483)
            annotation (Placement(transformation(extent={{114,-10},{94,10}})));
        equation
          connect(ISF.q_in, resistor1.q_in) annotation (Line(
              points={{-28,0},{-10,0}},
              color={0,0,0},
              thickness=1));
          connect(Lymphatics.q_in, resistor1.q_out) annotation (Line(
              points={{32,0},{10,0}},
              color={0,0,0},
              thickness=1));
          connect(Lymphatics.q_in, resistor2.q_in) annotation (Line(
              points={{32,0},{52,0}},
              color={0,0,0},
              thickness=1));
          connect(capillaryPressure.y, resistor.q_in) annotation (Line(
              points={{-98,0},{-78,0}},
              color={0,0,0},
              thickness=1));
          connect(resistor.q_out, ISF.q_in) annotation (Line(
              points={{-58,0},{-28,0}},
              color={0,0,0},
              thickness=1));
          connect(resistor2.q_out, vcPressure.y) annotation (Line(
              points={{72,0},{94,0}},
              color={0,0,0},
              thickness=1));
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)),
              Diagram(coordinateSystem(preserveAspectRatio=false)));
        end DynamicLymphatics;

        model SimplestLymphaticDynamic
          parameter Integer nc = 0 "number of capillaries";
           // annotation(Dialog(connectorSizing = true));
           Physiolibrary.Types.RealIO.PressureInput capillaryPressures[nc] annotation (Placement(transformation(extent={{-102,
                     -10},{-82,10}}),
                                 iconTransformation(extent={{-100,-10},{-80,10}})));

        //   Real capillaryPressures[:] = {1412, 12412};
          Physiolibrary.Types.Pressure capillaryPressures_mean[nc](each start = 2664);
          Physiolibrary.Types.Pressure p_vc_mean( start = 666);
          Physiolibrary.Types.RealIO.PressureInput p_vc annotation (Placement(transformation(extent={{-102,
                    -92},{-82,-72}}),
                                iconTransformation(extent={{-100,-100},{-80,-80}})));

          output Physiolibrary.Types.VolumeFlowRate lymph_flow = J1_s  "normal Lymphatic flow per day is 5.787037037037e-08";
          parameter Modelica.Units.SI.Time tau=10;
          parameter Physiolibrary.Types.Pressure deltaPi=1066.57909932;

          Physiolibrary.Types.VolumeFlowRate J1[nc];
          Physiolibrary.Types.VolumeFlowRate J1_s = sum(J1);
          Physiolibrary.Types.VolumeFlowRate J2 = k2*(p_isf -  p_lymph);
          Physiolibrary.Types.VolumeFlowRate J3 = k3*(p_lymph -  p_vc_mean);

          parameter Physiolibrary.Types.HydraulicConductance k1=7.35e-12;
          parameter Physiolibrary.Types.HydraulicConductance k2=1.085e-10;
          parameter Physiolibrary.Types.HydraulicConductance k3=2.4e-10;

          output Physiolibrary.Types.Pressure p_isf(displayUnit="mmHg")
            "Default 10mmHg in healthy individual";
        parameter Real p1 =   6.443e-09;
        parameter Real p2 =   4.159e-05;
        parameter Real p3 =       1.045;
        parameter Real a =        1.06;
        parameter Real b =  -5.451e-05;
        parameter Real c =     -0.7703;
        parameter Real d =  -0.0007743;
        parameter Physiolibrary.Types.Pressure p_int_diff(displayUnit="mmHg")=1866.51342381;
        Physiolibrary.Types.Pressure x=p_isf   - p_int_diff;
        output Physiolibrary.Types.Fraction Vr(start = 1) = max(0, p1*x.^2 + p2*x + p3) + max(0,a*exp(b*x) + c*exp(d*x));
        parameter Physiolibrary.Types.Volume V_normal=0.07 annotation(Evaluate=false);
          Physiolibrary.Types.Volume v_isf(start = V_normal)= V_normal*Vr;
        output Physiolibrary.Types.Volume V_excess(min = -V_normal) = V_normal*(Vr -1);

          output Physiolibrary.Types.Pressure p_lymph(displayUnit="mmHg") "Default 6 mmHg";
          Physiolibrary.Types.Volume v_lymph(start = v_lymph_nom);
          parameter Physiolibrary.Types.HydraulicCompliance C_lymph = v_lymph_nom/(6*133.322) "Estimated compliance of lymphatic system";
          parameter Physiolibrary.Types.Volume v_lymph_nom = 1e-3;

          output   Physiolibrary.Types.VolumeFlowRate lymph_diff = J1_s - J3;
        equation
          der(v_isf) = J1_s - J2;
          der(v_lymph) = J2 - J3;
          v_lymph = p_lymph*C_lymph;

          for i in 1:nc loop
            k1*(capillaryPressures_mean[i] - deltaPi -p_isf)  = J1[i];
          der(capillaryPressures_mean[i])*tau = capillaryPressures[i] -
            capillaryPressures_mean[i];
          end for;

          der(p_vc_mean)*tau = p_vc - p_vc_mean;

          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end SimplestLymphaticDynamic;

        model SimplestLymphaticDynamicSpeedUp
          parameter Integer nc = 0 "number of capillaries";
          import Physiolibrary.Types.*;
           // annotation(Dialog(connectorSizing = true));
           RealIO.PressureInput capillaryPressures[nc] annotation (Placement(transformation(extent={{-106,6},
                    {-86,26}}),  iconTransformation(extent={{-106,6},{-86,26}})));

        //   Real capillaryPressures[:] = {1412, 12412};
        //   Pressure capillaryPressures_mean[nc](each start = 2664);
          Pressure p_vc_mean( start = 666);
          RealIO.PressureInput p_vc "vena cava pressure"
                                                        annotation (Placement(transformation(extent={{-102,
                    -92},{-82,-72}}),
                                iconTransformation(extent={{106,6},{86,26}})));

          output VolumeFlowRate lymph_flow = J1_s  "normal Lymphatic flow per day is 5.787037037037e-08";
          parameter Modelica.Units.SI.Time tau=10;
          parameter Pressure deltaPi=1066.57909932;

          VolumeFlowRate J1[nc];
          VolumeFlowRate J1_s;
          VolumeFlowRate J2 = k2*(p_isf -  p_lymph);
          VolumeFlowRate J3 = k3*(p_lymph -  p_vc_mean);

          parameter HydraulicConductance k1=7.35e-12;
          parameter HydraulicConductance k2=1.085e-10;
          parameter HydraulicConductance k3=2.4e-10;

          output Pressure p_isf(displayUnit="mmHg")
            "Default 10mmHg in healthy individual";
        parameter Real p1 =   6.443e-09;
        parameter Real p2 =   4.159e-05;
        parameter Real p3 =       1.045;
        parameter Real a =        1.06;
        parameter Real b =  -5.451e-05;
        parameter Real c =     -0.7703;
        parameter Real d =  -0.0007743;
        parameter Pressure p_int_diff=1866.51342381;
        Pressure x(start)= p_isf   - p_int_diff;
        output Fraction Vr(start = 1); // max(0, p1*x.^2 + p2*x + p3) + max(0,a*exp(b*x) + c*exp(d*x));
        parameter Volume V_normal=0.07 annotation(Evaluate=false);
          Volume v_isf(start = V_normal)= V_normal*Vr;
        output Volume V_excess(min = -1) = V_normal*(Vr -1);

          output Pressure p_lymph(displayUnit="mmHg") "Default 6 mmHg";
          Volume v_lymph(start = v_lymph_nom);
          parameter HydraulicCompliance C_lymph = v_lymph_nom/(6*133.322) "Estimated compliance of lymphatic system";
          parameter Volume v_lymph_nom=0.001;

          parameter Fraction reintroduceFraction = 0;
          RealIO.VolumeFlowRateOutput lymph_diff = if timeSpedUp > lymphaticsSettleTime then (J1_s - J3 - reintroduceFraction*lymphDrain)*speedUpFact else 0 annotation (Placement(transformation(extent={{80,-100},
                    {100,-80}}),iconTransformation(extent={{92,-46},{112,-26}})));

          Modelica.Units.SI.Time time_speedUp=speedUpFact "Speed-up factor";
          Modelica.Units.SI.Time timeSpedUp;
          Volume volume = v_isf + v_lymph;
          Volume q_int(start = v_lymph_nom + V_normal) "Should be same as volume. Just cross checking the calculations";
          Volume v_drained;
          parameter Modelica.Units.SI.Time drain_start=-1 "Start in CVS time";
          Modelica.Units.SI.Time drain_t0( start = Modelica.Constants.inf) "Start of the drainage in Lymphatics time";
          parameter Modelica.Units.SI.Time drain_length=Modelica.Constants.inf "Length in lzmphatics time";
          parameter VolumeFlowRate drain_q = 1e-6/60;
          VolumeFlowRate lymphDrain=if drain_started and not drain_stopped then drain_q else 0;
          Boolean drain_started(start = false, fixed = true);
          Boolean drain_stopped(start = false, fixed = true);
          Modelica.Units.SI.Time drain_tstop = drain_t0 + drain_length;

          Modelica.Blocks.Sources.Pulse timeSpeedUpFactor(
            amplitude=360,
            width=10,
            period(displayUnit="s") = 100,
            offset=1,
            startTime(displayUnit="s") = 60)
            annotation (Placement(transformation(extent={{100,-20},{80,0}})));
          Modelica.Blocks.Sources.Step step(
            height=-3600,
            offset=3600,
            startTime=lymphaticsSettleTime/3600)
            annotation (Placement(transformation(extent={{100,30},{80,50}})));
          parameter Modelica.Units.SI.Time lymphaticsSettleTime=43200
            "How long the lymphatics should fast-settle before invoking any output.";
          Modelica.Blocks.Math.Add add
            annotation (Placement(transformation(extent={{60,-10},{40,10}})));
        protected
          RealIO.FractionInput speedUpFact "How long lasts one second after speedup"
             annotation (Placement(transformation(extent={{6,-10},{26,10}})));
        public
                    Boolean beat = sample(0.01, 0.1) "Synchronization signal"
            annotation (Dialog(group="Time varying output signal"), Placement(
                transformation(extent={{100,-10},{120,10}})));
                Real p_vc_s;
                Real J1s_s;
                Real t0(start = 1, fixed = true) "BEat interval. Fixed for init";
                Real time0 "time of last beat";
                Real breakpoint = (a*exp(b*x) + c*exp(d*x));
                Real braking = 1/(1+exp(-k*breakpoint))*breakpoint;
                parameter Real k = 100;
          Modelica.Blocks.Sources.Step step1(
            height=-3600,
            offset=3600,
            startTime=lymphaticsSettleTime/3600)
            annotation (Placement(transformation(extent={{-28,42},{-48,62}})));
        equation
          when drain_start > 0 and time > drain_start then
            drain_started = true;
            drain_t0 = timeSpedUp;
          end when;

          when timeSpedUp > drain_t0 + drain_length then
            drain_stopped = true;
          end when;

          Vr = p1*x.^2 + p2*x + p3 + 1/(1+exp(-k*breakpoint))*breakpoint;

          der(v_isf)/speedUpFact = J1_s - J2;
          der(v_lymph)/speedUpFact = J2 - J3 - lymphDrain;
          v_lymph = p_lymph*C_lymph;
          der(q_int) = lymph_diff;
          der(v_drained)/speedUpFact = lymphDrain;
          der(timeSpedUp)/speedUpFact = 1;

          for i in 1:nc loop
            k1*(capillaryPressures[i] - deltaPi -p_isf)  = J1[i];
        //     k1*(capillaryPressures_mean[i] - deltaPi -p_isf)  = J1[i];
        //   der(capillaryPressures_mean[i])*tau = capillaryPressures[i] -
        //     capillaryPressures_mean[i];
          end for;


        //   der(p_vc_mean)*tau = p_vc - p_vc_mean;
        // J1_s = sum(J1);

          der(p_vc_s) = p_vc;
          der(J1s_s) = sum(J1);
          t0 = time - time0;
          when beat then
            time0 = time;
            reinit(p_vc_s, 0);
            reinit(J1s_s, 0);
            p_vc_mean = p_vc_s/pre(t0);
            J1_s = J1s_s/pre(t0);
          end when;

          connect(timeSpeedUpFactor.y, add.u2)
            annotation (Line(points={{79,-10},{70,-10},{70,-6},{62,-6}},
                                                                     color={0,0,127}));
          connect(step.y, add.u1) annotation (Line(points={{79,40},{68,40},{68,6},{62,6}},
                color={0,0,127}));
          connect(speedUpFact, add.y)
            annotation (Line(points={{16,0},{39,0}}, color={0,0,127}));
          annotation (Icon(coordinateSystem(preserveAspectRatio=false),
                graphics={
                Rectangle(
                  extent={{-102,102},{100,-38}},
                  lineColor={0,0,0},
                  lineThickness=0.5,
                  fillColor={142,201,255},
                  fillPattern=FillPattern.Solid),
                Ellipse(
                  extent={{-60,58},{-20,20}},
                  lineColor={0,0,0},
                  fillColor={244,125,35},
                  fillPattern=FillPattern.Solid,
                  lineThickness=0.5),
                Ellipse(
                  extent={{26,60},{66,22}},
                  lineColor={0,0,0},
                  fillColor={243,201,132},
                  fillPattern=FillPattern.Solid,
                  lineThickness=0.5),
                Line(
                  points={{-100,58},{-62,40}},
                  color={0,0,0},
                  thickness=0.5),
                Line(
                  points={{-100,40},{-62,40}},
                  color={0,0,0},
                  thickness=0.5),
                Line(
                  points={{-100,20},{-62,40}},
                  color={0,0,0},
                  thickness=0.5),
                Line(
                  points={{-14,40},{16,40}},
                  color={0,0,0},
                  thickness=0.5),
                Text(
                  extent={{-56,-2},{-24,16}},
                  textColor={0,0,0},
                  textString="ISF"),
                Text(
                  extent={{4,-10},{50,20}},
                  textColor={0,0,0},
                  textString="LYMPH"),
                Line(
                  points={{70,40},{94,40}},
                  color={0,0,0},
                  thickness=0.5),
                Text(
                  extent={{-198,-18},{-104,94}},
                  textColor={0,0,0},
                  textString="CAP"),
                Text(
                  extent={{92,10},{186,70}},
                  textColor={0,0,0},
                  textString="VC")}),                                    Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end SimplestLymphaticDynamicSpeedUp;

        model BasicLymphatics
          "A object-oriented implementation of SimplestLymphatics"
          extends Physiolibrary.Icons.Lymph;

          parameter Integer nc = 1;
           Physiolibrary.Types.RealIO.PressureInput
                                capillaryPressures[nc] annotation (Placement(transformation(extent={{-112,
                    -10},{-92,10}}),
                                 iconTransformation(extent={{-106,6},{-86,26}})));
          Physiolibrary.Types.RealIO.PressureInput
                               p_vc "vena cava pressure"
                                                        annotation (Placement(transformation(extent={{192,0},
                    {212,20}}), iconTransformation(extent={{106,6},{86,26}})));
          Auxiliary.ISF iSF(useVariableSpeedUp=true)
            annotation (Placement(transformation(extent={{0,0},{20,20}})));
          Physiolibrary.Osmotic.Components.Membrane capillaryMembrane[nc](
              useHydraulicPressureInputs=true)
            annotation (Placement(transformation(extent={{-70,90},{-50,70}})));
          Physiolibrary.Hydraulic.Components.Resistor resistor(Resistance=
                7999343244.9)
            annotation (Placement(transformation(extent={{60,0},{80,20}})));
            Auxiliary.ElasticVesselSpeedUp elasticVessel(useVariableSpeedUp=true)
            annotation (Placement(transformation(extent={{86,0},{106,20}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(
              usePressureInput=true)
            annotation (Placement(transformation(extent={{190,0},{170,20}})));
          Physiolibrary.Osmotic.Sources.UnlimitedSolution iSFOsm[nc](
              useOsmolarityInput=true)
            annotation (Placement(transformation(extent={{20,70},{0,90}})));
          Physiolibrary.Osmotic.Sensors.FlowMeasure capFlowMeasure[nc]
            annotation (Placement(transformation(extent={{-30,70},{-10,90}})));
          Physiolibrary.Osmotic.Sources.UnlimitedSolution bloodOsm[nc](Osm=
                osm_plasma)
            annotation (Placement(transformation(extent={{-100,70},{-80,90}})));
          Modelica.Blocks.Routing.Replicator replicator(nout=nc)
            annotation (Placement(transformation(extent={{-54,40},{-44,52}})));
          Modelica.Blocks.Sources.RealExpression iSFPressureConst
            annotation (Placement(transformation(extent={{-86,35},{-66,57}})));
          Modelica.Blocks.Math.MultiSum multiSum(nu=nc) annotation (Placement(
                transformation(
                extent={{-6,-6},{6,6}},
                rotation=270,
                origin={-20,50})));
          Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump(
              useSolutionFlowInput=true)
            annotation (Placement(transformation(extent={{-30,0},{-10,20}})));
          Physiolibrary.Hydraulic.Components.PumpPressureHead pumpPressureHead(
              p_head0=2666.4477483)
            annotation (Placement(transformation(extent={{28,0},{48,20}})));
          Physiolibrary.Hydraulic.Sensors.FlowMeasure flowMeasure
            annotation (Placement(transformation(extent={{142,20},{162,0}})));
          Auxiliary.SpeedUpCommand speedUpCommand(speedUp=if time > 10 then 60 else 60000)
            annotation (Placement(transformation(extent={{0,38},{20,58}})));
          Auxiliary.Osmolarities osmolarities
            annotation (Placement(transformation(extent={{60,70},{40,90}})));
          parameter Physiolibrary.Types.Osmolarity osm_plasma=280
            "Fixed osmolarity at port if useOsmolarityInput=false";
          Modelica.Blocks.Routing.Replicator replicator1(nout=nc)
            annotation (Placement(transformation(extent={{34,76},{26,84}})));
          Physiolibrary.Hydraulic.Components.Resistor resistor1(Resistance=
                7999343244.9)
            annotation (Placement(transformation(extent={{114,0},{134,20}})));
          Auxiliary.Averager averager[nc] annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=90,
                origin={-92,28})));
          Modelica.Blocks.Math.Add add(k1=-1) annotation (Placement(
                transformation(extent={{-38,-30},{-58,-10}})));
          Modelica.Blocks.Logical.Switch switch1 annotation (Placement(
                transformation(extent={{-74,-60},{-94,-40}})));
          Modelica.Blocks.Sources.BooleanExpression booleanExpression(y=time >
                10) annotation (Placement(transformation(extent={{-38,-60},{-58,
                    -40}})));
          Physiolibrary.Types.Constants.VolumeFlowRateConst volumeFlowRate(k=0)
            annotation (Placement(transformation(extent={{-50,-66},{-58,-58}})));
          Physiolibrary.Types.RealIO.VolumeFlowRateOutput dLymphFlow
            "Difference of lymphatic inflow/outflow, i.e. volume stolen from circulation"
            annotation (Placement(transformation(extent={{-100,-60},{-120,-40}})));
        equation

          connect(elasticVessel.q_in, resistor.q_out) annotation (Line(
              points={{96,10},{80,10}},
              color={0,0,0},
              thickness=1));
          connect(unlimitedVolume.pressure, p_vc)
            annotation (Line(points={{190,10},{202,10}},      color={0,0,127}));
          connect(bloodOsm.port, capillaryMembrane.q_in) annotation (Line(
              points={{-80,80},{-70,80}},
              color={127,127,0},
              thickness=1));
          connect(capillaryMembrane.q_out, capFlowMeasure.q_in) annotation (Line(
              points={{-50,80},{-30,80}},
              color={127,127,0},
              thickness=1));
          connect(capFlowMeasure.q_out, iSFOsm.port) annotation (Line(
              points={{-10,80},{0,80}},
              color={127,127,0},
              thickness=1));
          connect(replicator.y, capillaryMembrane.hydraulicPressureOut) annotation (
              Line(points={{-43.5,46},{-40,46},{-40,60},{-52,60},{-52,72}}, color={0,0,127}));
          connect(iSFPressureConst.y, replicator.u)
            annotation (Line(points={{-65,46},{-55,46}}, color={0,0,127}));
          connect(capFlowMeasure.volumeFlowRate, multiSum.u)
            annotation (Line(points={{-20,72},{-20,56}}, color={0,0,127}));
          connect(unlimitedPump.q_out, iSF.port_a) annotation (Line(
              points={{-10,10},{10,10}},
              color={0,0,0},
              thickness=1));
          connect(multiSum.y, unlimitedPump.solutionFlow)
            annotation (Line(points={{-20,42.98},{-20,17}}, color={0,0,127}));
          connect(iSF.port_a, pumpPressureHead.q_in) annotation (Line(
              points={{10,10},{28,10}},
              color={0,0,0},
              thickness=1));
          connect(pumpPressureHead.q_out, resistor.q_in) annotation (Line(
              points={{48,10},{60,10}},
              color={0,0,0},
              thickness=1));
          connect(unlimitedVolume.y, flowMeasure.q_out) annotation (Line(
              points={{170,10},{162,10}},
              color={0,0,0},
              thickness=1));
          connect(speedUpCommand.y, elasticVessel.speedUpCoeff)
            annotation (Line(points={{21,48},{88,48},{88,18}}, color={0,0,127}));
          connect(iSF.speedUpCoeff, elasticVessel.speedUpCoeff) annotation (Line(points=
                 {{2,18},{2,30},{40,30},{40,48},{88,48},{88,18}}, color={0,0,127}));
          connect(iSFOsm.osmolarity, replicator1.y)
            annotation (Line(points={{20,80},{25.6,80}}, color={0,0,127}));
          connect(osmolarities.osmolarity, replicator1.u)
            annotation (Line(points={{40,80},{34.8,80}}, color={0,0,127}));
          connect(flowMeasure.q_in, resistor1.q_out) annotation (Line(
              points={{142,10},{134,10}},
              color={0,0,0},
              thickness=1));
          connect(resistor1.q_in, elasticVessel.q_in) annotation (Line(
              points={{114,10},{96,10}},
              color={0,0,0},
              thickness=1));
          connect(capillaryPressures, averager.u) annotation (Line(points={{
                  -102,0},{-92,0},{-92,16}}, color={0,0,127}));
          connect(averager.y, capillaryMembrane.hydraulicPressureIn)
            annotation (Line(points={{-92,39},{-92,60},{-68,60},{-68,72}},
                color={0,0,127}));
          connect(multiSum.y, add.u1) annotation (Line(points={{-20,42.98},{-20,
                  22},{-32,22},{-32,-14},{-36,-14}}, color={0,0,127}));
          connect(flowMeasure.volumeFlow, add.u2) annotation (Line(points={{152,
                  -2},{152,-26},{-36,-26}}, color={0,0,127}));
          connect(switch1.u1, add.y) annotation (Line(points={{-72,-42},{-72,
                  -20},{-59,-20}}, color={0,0,127}));
          connect(switch1.u2, booleanExpression.y)
            annotation (Line(points={{-72,-50},{-59,-50}}, color={255,0,255}));
          connect(volumeFlowRate.y, switch1.u3) annotation (Line(points={{-59,
                  -62},{-66,-62},{-66,-58},{-72,-58}}, color={0,0,127}));
          connect(switch1.y, dLymphFlow)
            annotation (Line(points={{-95,-50},{-110,-50}}, color={0,0,127}));
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end BasicLymphatics;

        package Auxiliary
          model partialConditionalSpeed
            Modelica.Blocks.Interfaces.RealInput speedUpCoeff = speed*timeUnit
              if useVariableSpeedUp                                                 annotation (Placement(
                  transformation(extent={{-120,70},{-80,110}}),  iconTransformation(
                    extent={{-100,60},{-60,100}})));
            parameter Boolean useVariableSpeedUp=false  annotation(Evaluate=true, HideResult=true, choices(checkBox=true),Dialog(group="Speed"));
            parameter Modelica.Units.SI.Time speedUp = 1 "A time coefficient"  annotation (Dialog(enable=not useV0Input));
          protected
            Physiolibrary.Types.Fraction speed "A speed-up coefficient to 1s" annotation(HideResult=true);
            constant Modelica.Units.SI.Time timeUnit = 1;
          equation

            if not useVariableSpeedUp then
              speed*timeUnit = speedUp;
            end if;

            annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={Text(
                    extent={{-100,100},{100,160}},
                    textColor={238,46,47},
                    textString="%speedUp",
                    visible=DynamicSelect(true, speedUp <> 1 or not useVariableSpeedUp))}),          Diagram(
                  coordinateSystem(preserveAspectRatio=false)));
          end partialConditionalSpeed;

          model ISF "A basic ISF volume-pressure characteristics"
            extends Physiolibrary.Icons.ElasticBalloon;
            extends partialConditionalSpeed;
            import Physiolibrary.Types.Volume;
            import Physiolibrary.Types.Pressure;
            import Physiolibrary.Types.Fraction;
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_a annotation (
                Placement(transformation(extent={{-272,-48},{-252,-28}}),
                  iconTransformation(extent={{-10,-10},{10,10}})));


          output Pressure p_isf(displayUnit="mmHg")
              "Default 10mmHg in healthy individual";
          parameter Real p1 =   6.443e-09;
          parameter Real p2 =   4.159e-05;
          parameter Real p3 =       1.045;
          parameter Real a =        1.06;
          parameter Real b =  -5.451e-05;
          parameter Real c =     -0.7703;
          parameter Real d =  -0.0007743;
          parameter Real k = 100;
          parameter Pressure p_int_diff=1866.51342381;
          Pressure x= p_isf   - p_int_diff;

          // 1/(1+exp(-k*breakpoint))*breakpoint is numerically more stable than max(breakpoint) with minor error, given k large enough
          output Fraction Vr(start = 1) = p1*x.^2 + p2*x + p3 + 1/(1+exp(-k*breakpoint))*breakpoint "Relative volume change";
          Real breakpoint = (a*exp(b*x) + c*exp(d*x));

          parameter Volume V_normal=0.07 annotation(Evaluate=false);
          Volume v_isf(start = V_normal)= V_normal*Vr;
          output Volume V_excess(min = -1) = V_normal*(Vr -1);

          equation
            der(v_isf)/speed = port_a.q;
            port_a.pressure = x;

            annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                  Line(
                    points={{-100,-80},{-20,-66},{34,-60},{82,76}},
                    color={0,0,0},
                    smooth=Smooth.Bezier,
                    thickness=0.5),
                  Text(
                    extent={{-100,-100},{100,-140}},
                    textColor={28,108,200},
                    textString="ISF"),
                  Text(
                    extent={{-102,116},{98,-4}},
                    textColor={0,0,0},
                    textString="G")}),                                     Diagram(
                  coordinateSystem(preserveAspectRatio=false)));
          end ISF;

          model ElasticVesselSpeedUp
            "Elastic container for blood vessels, bladder, lumens with the speedUp functionality"
           extends Physiolibrary.Icons.ElasticBalloon;
           extends partialConditionalSpeed;
          // extends SteadyStates.Interfaces.SteadyState(state_start=volume_start, storeUnit="ml");
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a q_in
              annotation (Placement(transformation(extent={{-14,-14},{14,14}})));
            parameter Physiolibrary.Types.Volume volume_start=1e-11 "Volume start value"
              annotation (Dialog(group="Initialization"));                                 //default = 1e-5 ml
            Physiolibrary.Types.Volume excessVolume
              "Additional volume, that generate pressure";

             parameter Boolean useV0Input = false
              "=true, if zero-pressure-volume input is used"
              annotation(Evaluate=true, HideResult=true, choices(checkBox=true),Dialog(group="External inputs/outputs"));

             parameter Physiolibrary.Types.Volume ZeroPressureVolume=1e-11
              "Maximal volume, that does not generate pressure if useV0Input=false"
              annotation (Dialog(enable=not useV0Input)); //default = 1e-5 ml

             Physiolibrary.Types.RealIO.VolumeInput zeroPressureVolume(start=
                  ZeroPressureVolume)=zpv if useV0Input annotation (Placement(
                  transformation(
                  extent={{-20,-20},{20,20}},
                  rotation=270,
                  origin={-80,80})));
            parameter Boolean useComplianceInput = false
              "=true, if compliance input is used"
              annotation(Evaluate=true, HideResult=true, choices(checkBox=true),Dialog(group="External inputs/outputs"));
            parameter Physiolibrary.Types.HydraulicCompliance Compliance=1
              "Compliance if useComplianceInput=false" annotation (Dialog(enable=not
                    useComplianceInput), HideResult=useComplianceInput);

            Physiolibrary.Types.RealIO.HydraulicComplianceInput compliance(start=
                  Compliance)=c if useComplianceInput annotation (Placement(
                  transformation(
                  extent={{-20,-20},{20,20}},
                  rotation=270,
                  origin={0,80})));
            parameter Boolean useExternalPressureInput = false
              "=true, if external pressure input is used"
              annotation(Evaluate=true, HideResult=true, choices(checkBox=true),Dialog(group="External inputs/outputs"));
            parameter Physiolibrary.Types.Pressure ExternalPressure=0
              "External pressure. Set zero if internal pressure is relative to external. Valid only if useExternalPressureInput=false."
              annotation (Dialog(enable=not useExternalPressureInput), HideResult=
                  useExternalPressureInput);

            Physiolibrary.Types.RealIO.PressureInput externalPressure(start=
                  ExternalPressure)=ep if useExternalPressureInput annotation (Placement(
                  transformation(
                  extent={{-20,-20},{20,20}},
                  rotation=270,
                  origin={80,80})));

            Physiolibrary.Types.RealIO.VolumeOutput volume(start=volume_start, fixed=true)
              annotation (Placement(transformation(
                  extent={{-20,-20},{20,20}},
                  rotation=270,
                  origin={0,-100}), iconTransformation(
                  extent={{-20,-20},{20,20}},
                  rotation=270,
                  origin={60,-100})));
             parameter Physiolibrary.Types.Volume excessVolume_min(min = -Modelica.Constants.inf) = 0 "Minimal pressure below zeroPressureVolume" annotation(Evaluate = true);
            parameter Physiolibrary.Types.Pressure MinimalCollapsingPressure(min=-
                  Modelica.Constants.inf)=-101325;
              parameter Physiolibrary.Types.Volume CollapsingPressureVolume(min=-Modelica.Constants.inf)=
               1e-12 "Maximal volume, which generate negative collapsing pressure";
                                                                             //default = 1e-6 ml

          protected
            Physiolibrary.Types.Volume zpv;
            Physiolibrary.Types.HydraulicCompliance c;
            Physiolibrary.Types.Pressure ep;
            parameter Physiolibrary.Types.Pressure a=MinimalCollapsingPressure/log(
                Modelica.Constants.eps);

          equation
            if not useV0Input then
              zpv=ZeroPressureVolume;
            end if;
            if not useComplianceInput then
              c=Compliance;
            end if;
            if not useExternalPressureInput then
              ep=ExternalPressure;
            end if;
            excessVolume = max(excessVolume_min, volume - zpv);
            q_in.pressure =
            smooth(0,
              if noEvent(volume>CollapsingPressureVolume) then
                (excessVolume/c + ep)
               else
                 (a*log(max(Modelica.Constants.eps,volume/CollapsingPressureVolume)) + ep));
            //then: normal physiological state
            //else: abnormal collapsing state

            //Collapsing state: the max function prevents the zero or negative input to logarithm, the logarithm brings more negative pressure for smaller volume
            //However this collapsing is limited with numerical precission, which is reached relatively soon.

            der(volume)/speed =  q_in.q;
            assert(volume>=-Modelica.Constants.eps,"Collapsing of vessels are not supported!", AssertionLevel.warning);
           annotation (
              Icon(coordinateSystem(preserveAspectRatio=false,extent={{-100,-100},{
                      100,100}}), graphics={Text(
                    extent={{-318,-140},{160,-100}},
                    textString="%name",
                    lineColor={0,0,255})}),        Documentation(revisions="<html>
<p><i>2009-2014 - </i>Marek Matejak, Charles University, Prague, Czech Republic</p>
<ul>
<li>initial implementation </li>
</ul>
<p>4.5.2015 - Tom&aacute;&scaron; Kulh&aacute;nek, Charles University, Prague, Czech Republic</p>
<ul>
<li>fix of external pressure</li>
</ul>
</html>",       info="<html>
<p>Pressure can be generated by an elastic tissue surrounding some accumulated volume. Typically there is a threshold volume, below which the relative pressure is equal to external pressure and the wall of the blood vessels is not stressed. But if the volume rises above this value, the pressure increases proportionally. The slope in this pressure-volume characteristic is called &ldquo;Compliance&rdquo;.</p>
<ul>
<li>Increassing volume above ZeroPressureVolume (V0) generate positive pressure (greater than external pressure) lineary dependent on excess volume.</li>
<li>Decreasing volume below CollapsingPressureVolume (V00) generate negative pressure (lower than external pressure) logarithmicaly dependent on volume.</li>
<li>Otherwise external pressure is presented as pressure inside ElasticVessel.</li>
</ul>
<p><br><img src=\"modelica://Physiolibrary/Resources/Images/UserGuide/ElasticVessel_PV.png\"/></p>
</html>"));
          end ElasticVesselSpeedUp;

          model SpeedUpCommand "Creates speed up block"
            extends Modelica.Blocks.Interfaces.SO;

            Real speedUp = 1.0 annotation (Dialog(group="Time"));
            Modelica.Units.SI.Time time_spedUp;
          initial equation
            time_spedUp = 0;
          equation
            der(time_spedUp)= speedUp;
            y = speedUp;

            annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                  Ellipse(extent={{-80,66},{80,-94}}, lineColor={160,160,164}),
                  Line(points={{0,66},{0,46}}, color={160,160,164}),
                  Line(points={{80,-14},{60,-14}},
                                               color={160,160,164}),
                  Line(points={{0,-94},{0,-74}}, color={160,160,164}),
                  Line(points={{-80,-14},{-60,-14}},
                                                 color={160,160,164}),
                  Line(points={{37,56},{26,36}}, color={160,160,164}),
                  Line(points={{70,24},{49,12}}, color={160,160,164}),
                  Line(points={{71,-51},{52,-41}}, color={160,160,164}),
                  Line(points={{39,-84},{29,-65}}, color={160,160,164}),
                  Line(points={{-39,-84},{-29,-66}}, color={160,160,164}),
                  Line(points={{-71,-51},{-50,-40}}, color={160,160,164}),
                  Line(points={{-71,23},{-54,14}}, color={160,160,164}),
                  Line(points={{-38,56},{-28,37}}, color={160,160,164}),
                  Line(
                    points={{0,-14},{-50,36}},
                    thickness=0.5),
                  Line(
                    points={{0,-14},{40,-14}},
                    thickness=0.5),
                  Line(
                    points={{-40,36},{10,36}},
                    color={0,0,0},
                    thickness=1),
                  Line(
                    points={{-10,46},{10,36},{-10,28}},
                    color={0,0,0},
                    thickness=1),
                  Text(
                    extent={{-100,60},{100,100}},
                    textColor={0,0,0},
                    textString="x %speedUp")}),                            Diagram(
                  coordinateSystem(preserveAspectRatio=false)));
          end SpeedUpCommand;

          model Osmolarities
            parameter Physiolibrary.Types.Osmolarity osm_plasma(displayUnit="mosm/l")=280
              "Plasmatic osmolarity";
              Physiolibrary.Types.RealIO.OsmolarityOutput
                                         osmolarity=osm_ISF
              annotation (Placement(transformation(extent={{80,-20},{120,20}})));

            Physiolibrary.Types.Osmolarity osm_ISF= osm_plasma - alb_plasma + alb_isf
              "Interstitial osmolarity";
            Physiolibrary.Types.Concentration alb_plasma;
            constant Real alb_weight = 66.5 "kDa";
            parameter Real alb_plasma_gram_dL = 4;
            Physiolibrary.Types.Concentration alb_isf;
            parameter Physiolibrary.Types.Temperature T=310.15;
            Physiolibrary.Types.Pressure op_p = osm_plasma *(Modelica.Constants.R*T);
            Physiolibrary.Types.Pressure op_isf = osm_ISF *(Modelica.Constants.R*T);
            parameter Physiolibrary.Types.Pressure P_oncotic(displayUnit="mmHg")=-2399.8;
          equation
            P_oncotic = op_p - op_isf;
            alb_plasma_gram_dL = alb_plasma*alb_weight;
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)));
          end Osmolarities;

          model Averager
            extends Modelica.Blocks.Interfaces.SISO;

          equation
            y = u;
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)));
          end Averager;
        end Auxiliary;
      end Lymphatic;

      package Coronary
        model CoronaryCirculation
          extends Physiolibrary.Icons.PerfusionOD;

          CoronaryLayer coronaryLayer_SubEpicardium(
            cf_l=0.55,
            rf_l=1.28,
            pf_l=0.167*pf,
            s=s)
            annotation (Placement(transformation(extent={{6,30},{26,50}})));
          CoronaryLayer coronaryLayer_Mid(
            cf_l=0.68,
            rf_l=1.12,
            pf_l=0.500*pf,
            s=s)
            annotation (Placement(transformation(extent={{6,-10},{26,10}})));
          CoronaryLayer coronaryLayer_SubEndocardium(
            cf_l=1,
            rf_l=1,
            pf_l=0.833*pf,
            s=s)
            annotation (Placement(transformation(extent={{6,-50},{26,-30}})));
          Physiolibrary.Hydraulic.Components.ElasticVessel PA(Compliance(displayUnit="m3/Pa")=
                 7.500615758456563e-09*(0.0013/3*s), useExternalPressureInput=
                useExternalPressureInput) "Penetrating artery compliance"
            annotation (Placement(transformation(extent={{-30,10},{-10,-10}})));
          Physiolibrary.Hydraulic.Components.ElasticVessel PV(Compliance(displayUnit="m3/Pa")=
                 7.500615758456563e-09*(0.0254/3*s), useExternalPressureInput=
                useExternalPressureInput) "Penetrating vein compliance"
            annotation (Placement(transformation(extent={{40,10},{60,-10}})));
          Physiolibrary.Types.RealIO.PressureInput intraMuscularPressure annotation (
              Placement(transformation(
                extent={{20,-20},{-20,20}},
                rotation=270,
                origin={20,-100})));
          Physiolibrary.Hydraulic.Components.Inertia inertia(I(displayUnit="mmHg.s2/ml")=
                 266644774.83/s)
            annotation (Placement(transformation(extent={{-60,-10},{-40,10}})));
          Physiolibrary.Hydraulic.Components.Resistor R_PA(Resistance(displayUnit="(Pa.s)/m3")=
                 133322387.415*(4/s))
            annotation (Placement(transformation(extent={{-90,-10},{-70,10}})));
          Physiolibrary.Hydraulic.Components.Resistor R_PV(Resistance(displayUnit="(Pa.s)/m3")=
                 133322387.415*(2/s))
            annotation (Placement(transformation(extent={{70,-10},{90,10}})));
          Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_a
            annotation (Placement(transformation(extent={{-110,-10},{-90,10}})));
          Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b port_b
            annotation (Placement(transformation(extent={{90,-10},{110,10}})));
          parameter Real pf=1.2 "Left ventricular pressure multiplier";

          Physiolibrary.Types.VolumeFlowRate q_avg(start = target_q) "averaged flow";
          parameter Physiolibrary.Types.VolumeFlowRate target_q=1.6666666666667e-08*(1*
              weight*1e3)                                       "Target coronary flow - 1 ml/min per 1 g of muscle tissue";
          constant Physiolibrary.Types.Mass weight_nom=0.07;
          parameter Physiolibrary.Types.Mass weight=0.07;
          parameter Physiolibrary.Types.Fraction s = weight/weight_nom "Perfusion scaling factor";
        //  Physiolibrary.Types.Fraction EndoEpi_a= coronaryLayer_SubEndocardium.q / max(coronaryLayer_SubEpicardium.q, 1e-9);
        //  Physiolibrary.Types.Fraction EndoEpi_avg;
          Physiolibrary.Types.VolumeFlowRate endo_a(start = 1e-9);
          Physiolibrary.Types.VolumeFlowRate epi_a(start = 1e-9);
          Physiolibrary.Types.Fraction EndoEpi_avg2 = endo_a / epi_a;

          Physiolibrary.Types.Volume volume = PA.volume + PV.volume + coronaryLayer_SubEndocardium.volume + coronaryLayer_Mid.volume + coronaryLayer_SubEpicardium.volume;
          parameter Modelica.Units.SI.Time tau=4;
          Physiolibrary.Types.RealIO.PressureInput externalPressure
         if useExternalPressureInput annotation (Placement(transformation(
                extent={{20,-20},{-20,20}},
                rotation=270,
                origin={-20,-100})));
          Modelica.Blocks.Math.Add add annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=90,
                origin={2,-66})));
          Physiolibrary.Types.Constants.PressureConst pressure(k=0) if not
            useExternalPressureInput annotation (Placement(transformation(
                extent={{-4,-4},{4,4}},
                rotation=0,
                origin={-42,-78})));
          parameter Boolean useExternalPressureInput=false  annotation(choices(checkBox=true));
        equation
        //  der(EndoEpi_avg)*tau = EndoEpi_a - EndoEpi_avg;
          der(endo_a)*tau = coronaryLayer_SubEndocardium.q - endo_a;
          der(epi_a)*tau = coronaryLayer_SubEpicardium.q - epi_a;

          der(q_avg)*tau = port_a.q - q_avg;

          connect(coronaryLayer_SubEpicardium.port_a, coronaryLayer_Mid.port_a)
            annotation (Line(
              points={{6,40},{0,40},{0,0},{6,0}},
              color={0,0,0},
              thickness=1));
          connect(coronaryLayer_SubEndocardium.port_a, coronaryLayer_Mid.port_a)
            annotation (Line(
              points={{6,-40},{0,-40},{0,0},{6,0}},
              color={0,0,0},
              thickness=1));
          connect(coronaryLayer_SubEpicardium.port_b, coronaryLayer_Mid.port_b)
            annotation (Line(
              points={{26,40},{32,40},{32,0},{26,0}},
              color={0,0,0},
              thickness=1));
          connect(coronaryLayer_SubEndocardium.port_b, coronaryLayer_Mid.port_b)
            annotation (Line(
              points={{26,-40},{32,-40},{32,0},{26,0}},
              color={0,0,0},
              thickness=1));
          connect(PA.q_in, coronaryLayer_Mid.port_a) annotation (Line(
              points={{-20,0},{6,0}},
              color={0,0,0},
              thickness=1));
          connect(PV.q_in, coronaryLayer_Mid.port_b) annotation (Line(
              points={{50,0},{26,0}},
              color={0,0,0},
              thickness=1));
          connect(PV.q_in, R_PV.q_in) annotation (Line(
              points={{50,0},{70,0}},
              color={0,0,0},
              thickness=1));
          connect(R_PA.q_out, inertia.q_in) annotation (Line(
              points={{-70,0},{-60,0}},
              color={0,0,0},
              thickness=1));
          connect(inertia.q_out, PA.q_in) annotation (Line(
              points={{-40,0},{-20,0}},
              color={0,0,0},
              thickness=1));
          connect(R_PV.q_out, port_b) annotation (Line(
              points={{90,0},{100,0}},
              color={0,0,0},
              thickness=1));
          connect(R_PA.q_in, port_a) annotation (Line(
              points={{-90,0},{-100,0}},
              color={0,0,0},
              thickness=1));
          connect(PA.externalPressure, externalPressure) annotation (Line(points={{-12,-8},
                  {-12,-24},{-20,-24},{-20,-100}}, color={0,0,127}));
          connect(coronaryLayer_SubEndocardium.externalPressure, add.y)
            annotation (Line(points={{16,-50},{2,-50},{2,-55}}, color={0,0,127}));
          connect(add.u2, intraMuscularPressure)
            annotation (Line(points={{8,-78},{8,-100},{20,-100}}, color={0,0,127}));
          connect(add.y, coronaryLayer_Mid.externalPressure)
            annotation (Line(points={{2,-55},{2,-10},{16,-10}}, color={0,0,127}));
          connect(add.y, coronaryLayer_SubEpicardium.externalPressure)
            annotation (Line(points={{2,-55},{2,30},{16,30}}, color={0,0,127}));
          connect(externalPressure, PV.externalPressure) annotation (Line(points={{-20,-100},
                  {-20,-24},{58,-24},{58,-8}}, color={0,0,127}));
          connect(add.u1, externalPressure)
            annotation (Line(points={{-4,-78},{-20,-78},{-20,-100}}, color={0,0,127}));
          connect(pressure.y, add.u1)
            annotation (Line(points={{-37,-78},{-4,-78}}, color={0,0,127}));
          annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                Ellipse(
                  extent={{-20,0},{8,26}},
                  fillColor={238,46,47},
                  fillPattern=FillPattern.Solid,
                  pattern=LinePattern.None),
                Ellipse(
                  extent={{0,0},{28,26}},
                  fillColor={238,46,47},
                  fillPattern=FillPattern.Solid,
                  pattern=LinePattern.None),
                Polygon(
                  points={{-20,14},{28,14},{28,4},{6,-26},{-20,4},{-20,14}},
                  fillColor={238,46,47},
                  fillPattern=FillPattern.Solid,
                  pattern=LinePattern.None)}),                           Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end CoronaryCirculation;

        model CoronaryLayer
          "Used for Epi-endo and mid cardiac perfusion layers"
          extends Physiolibrary.Icons.CollapsingVessel;

          Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_a
            annotation (Placement(transformation(extent={{-110,-10},{-90,10}})));
          Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b port_b
            annotation (Placement(transformation(extent={{90,-10},{110,10}})));
          PhysiolibraryExtensions.ElasticVesselVolFractionOutput C1(
            volume_start=C1_v0*cf_l,
            ZeroPressureVolume=C1_v0*cf_l,
            Compliance=C1_c*cf_l,
            useExternalPressureInput=true,
            cf=cf_l)
            annotation (Placement(transformation(extent={{-50,10},{-30,-10}})));
          PhysiolibraryExtensions.ElasticVesselVolFractionOutput C2(
            volume_start=C2_v0*cf_l,
            ZeroPressureVolume=C2_v0*cf_l,
            Compliance=C2_c*cf_l,
            useExternalPressureInput=true,
            cf=cf_l)
            annotation (Placement(transformation(extent={{30,10},{50,-10}})));
          PhysiolibraryExtensions.ResistorFractionInput rm(R0(displayUnit=
                  "(mmHg.s)/ml") = r0m*rf_l, resistor(useConductanceInput=true))
            annotation (Placement(transformation(extent={{-10,-10},{10,10}})));
          PhysiolibraryExtensions.ResistorFractionInput R1(R0(displayUnit=
                  "(mmHg.s)/ml") = r0m*1.2*rf_l)
            annotation (Placement(transformation(extent={{-80,-10},{-60,10}})));
          PhysiolibraryExtensions.ResistorFractionInput R2(R0(displayUnit=
                  "(mmHg.s)/ml") = r0m*0.5*rf_l)
            annotation (Placement(transformation(extent={{60,-10},{80,10}})));
          PhysiolibraryExtensions.RmCalc rmCalc annotation (Placement(
                transformation(rotation=0, extent={{-18,20},{2,40}})));
          parameter Physiolibrary.Types.HydraulicCompliance C1_c=7.500615758456563e-09*(
              0.013/9*s)
            "Volume1 compliance";
          parameter Physiolibrary.Types.HydraulicCompliance C2_c=7.500615758456563e-09*(
              0.254/9*s)
            "Volume2 compliance";
          parameter Physiolibrary.Types.Volume C1_v0=1e-06*(2.5/9*s)
            "Volume1 zero pressure volume";
          parameter Physiolibrary.Types.Volume C2_v0=1e-06*(8/9*s)
            "Volume2 zero pressure volume";
          parameter Physiolibrary.Types.Fraction cf_l(displayUnit="1")
            "compliance factor of the cardiac layer";
          parameter Physiolibrary.Types.Fraction rf_l(displayUnit="1")
            "Resistance factor of the subcardial layer";
          parameter Physiolibrary.Types.Fraction pf_l(displayUnit="1")
            "LV Pressure factor";
          Physiolibrary.Types.RealIO.PressureInput
                                     externalPressure      annotation (Placement(transformation(
                  extent={{20,-20},{-20,20}},
                rotation=270,
                origin={0,-100})));
          Modelica.Blocks.Math.Gain gain(k=pf_l) annotation (Placement(
                transformation(
                extent={{-10,-10},{10,10}},
                rotation=90,
                origin={0,-52})));
          parameter Physiolibrary.Types.HydraulicResistance r0m(displayUnit="(Pa.s)/m3")=
               133322387.415*(44/s) "Basal Hydraulic resistance artery";
          parameter Physiolibrary.Types.Fraction s = 1 "Perfusion scaling factor";
          Physiolibrary.Types.VolumeFlowRate q = port_a.q;
          Physiolibrary.Types.Volume volume = C1.volume + C2.volume;
        equation
          connect(rmCalc.rMod, rm.ResistanceModifier)
            annotation (Line(points={{-8,20},{-8,6}},               color={0,0,127}));
          connect(C1.VolFracSq, rmCalc.f_vol1) annotation (Line(points={{-30,4},{-26,4},
                  {-26,30},{-18,30}}, color={0,0,127}));
          connect(rmCalc.f_vol2, C2.VolFracSq)
            annotation (Line(points={{2,30},{50,30},{50,4}},   color={0,0,127}));
          connect(C2.VolFracSq, R2.ResistanceModifier)
            annotation (Line(points={{50,4},{50,30},{62,30},{62,6}},
                                                             color={0,0,127}));
          connect(C1.VolFracSq, R1.ResistanceModifier) annotation (Line(points={{-30,4},
                  {-26,4},{-26,30},{-78,30},{-78,6}},  color={0,0,127}));
          connect(gain.u, externalPressure)
            annotation (Line(points={{-6.66134e-16,-64},{0,-100}}, color={0,0,127}));
          connect(gain.y, C1.externalPressure) annotation (Line(points={{0,-41},{0,-20},
                  {-32,-20},{-32,-8}}, color={0,0,127}));
          connect(gain.y, C2.externalPressure) annotation (Line(points={{0,-41},{0,-20},
                  {48,-20},{48,-8}}, color={0,0,127}));
          connect(port_a, R1.port_a) annotation (Line(
              points={{-100,0},{-80,0}},
              color={0,0,0},
              thickness=1));
          connect(R1.port_b, C1.q_in) annotation (Line(
              points={{-60,0},{-40,0}},
              color={0,0,0},
              thickness=1));
          connect(port_b, R2.port_b) annotation (Line(
              points={{100,0},{80,0}},
              color={0,0,0},
              thickness=1));
          connect(R2.port_a, C2.q_in) annotation (Line(
              points={{60,0},{40,0}},
              color={0,0,0},
              thickness=1));
          connect(C2.q_in, rm.port_b) annotation (Line(
              points={{40,0},{10,0}},
              color={0,0,0},
              thickness=1));
          connect(rm.port_a, C1.q_in) annotation (Line(
              points={{-10,0},{-54,0},{-54,-2.22045e-16},{-40,-2.22045e-16}},
              color={0,0,0},
              thickness=1));
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end CoronaryLayer;

        model CoronaryTest
          CoronaryCirculation coronaryCirculation(target_q=3.3333333333333e-06,
              weight=0.15)
            annotation (Placement(transformation(extent={{-20,-20},{20,20}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume PAo(usePressureInput=
                true)
            annotation (Placement(transformation(extent={{-60,-10},{-40,10}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume P_RA
            annotation (Placement(transformation(extent={{60,-10},{40,10}})));
          Modelica.Blocks.Tables.CombiTable1Ds combiTable1Ds(
            tableOnFile=true,
            tableName="pressureData",
            fileName="pdata.mat",
            columns=2:4,
            smoothness=Modelica.Blocks.Types.Smoothness.LinearSegments,
            extrapolation=Modelica.Blocks.Types.Extrapolation.HoldLastPoint,
            verboseExtrapolation=false) annotation (Placement(transformation(
                  extent={{-60,-60},{-40,-40}})));
          Modelica.Blocks.Sources.SawTooth sawTooth(amplitude=10, period=10)
            annotation (Placement(transformation(extent={{-100,-60},{-80,-40}})));
          Modelica.Blocks.Math.Gain gain(k=mmHg2SI)
            annotation (Placement(transformation(extent={{-78,-6},{-66,6}})));
          parameter Real mmHg2SI=133.322
            "Gain value multiplied with input signal";
          Modelica.Blocks.Math.Gain gain1(k=mmHg2SI)
            annotation (Placement(transformation(extent={{-14,-56},{-2,-44}})));
        equation
          connect(PAo.y, coronaryCirculation.port_a) annotation (Line(
              points={{-40,0},{-20,0}},
              color={0,0,0},
              thickness=1));
          connect(P_RA.y, coronaryCirculation.port_b) annotation (Line(
              points={{40,0},{20,0}},
              color={0,0,0},
              thickness=1));
          connect(sawTooth.y, combiTable1Ds.u)
            annotation (Line(points={{-79,-50},{-62,-50}}, color={0,0,127}));
          connect(PAo.pressure, gain.y)
            annotation (Line(points={{-60,0},{-65.4,0}}, color={0,0,127}));
          connect(gain1.y, coronaryCirculation.intraMuscularPressure)
            annotation (Line(points={{-1.4,-50},{4,-50},{4,-20}}, color={0,0,
                  127}));
          connect(gain1.u, combiTable1Ds.y[2])
            annotation (Line(points={{-15.2,-50},{-39,-50}}, color={0,0,127}));
          connect(gain.u, combiTable1Ds.y[1]) annotation (Line(points={{-79.2,0},
                  {-90,0},{-90,-22},{-26,-22},{-26,-50},{-39,-50}}, color={0,0,
                  127}));
          annotation (
            Icon(coordinateSystem(preserveAspectRatio=false)),
            Diagram(coordinateSystem(preserveAspectRatio=false)),
            experiment(
              StopTime=10,
              Interval=0.01,
              Tolerance=1e-09,
              __Dymola_Algorithm="Cvode"));
        end CoronaryTest;

        model CoronaryTestHuman
          CoronaryCirculation coronaryCirculation(
            coronaryLayer_SubEpicardium(r0m(displayUnit="(mmHg.s)/ml")),
            cf=1,
            target_q=3.73333e-06,
            rf=1)
            annotation (Placement(transformation(extent={{20,-20},{60,20}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume PAo(usePressureInput=
                true)
            annotation (Placement(transformation(extent={{-20,-10},{0,10}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume P_RA(P=533.28954966)
            annotation (Placement(transformation(extent={{100,-10},{80,10}})));
          Modelica.Blocks.Tables.CombiTable1Ds combiTable1Ds(
            tableOnFile=true,
            tableName="pressureData",
            fileName="pdata.mat",
            columns=2:4,
            smoothness=Modelica.Blocks.Types.Smoothness.LinearSegments,
            extrapolation=Modelica.Blocks.Types.Extrapolation.HoldLastPoint,
            verboseExtrapolation=false) annotation (Placement(transformation(
                  extent={{-60,-60},{-40,-40}})));
          Modelica.Blocks.Sources.SawTooth sawTooth(amplitude=10, period=10)
            annotation (Placement(transformation(extent={{-100,-60},{-80,-40}})));
          Modelica.Blocks.Math.Gain gain(k=108.0)
            annotation (Placement(transformation(extent={{-78,-6},{-66,6}})));
          parameter Real mmHg2SI=100.0
            "Gain value multiplied with input signal";
          Modelica.Blocks.Math.Gain gain1(k=108.0)
            annotation (Placement(transformation(extent={{-14,-56},{-2,-44}})));
        equation
          connect(PAo.y, coronaryCirculation.port_a) annotation (Line(
              points={{0,0},{20,0}},
              color={0,0,0},
              thickness=1));
          connect(P_RA.y, coronaryCirculation.port_b) annotation (Line(
              points={{80,0},{60,0}},
              color={0,0,0},
              thickness=1));
          connect(sawTooth.y, combiTable1Ds.u)
            annotation (Line(points={{-79,-50},{-62,-50}}, color={0,0,127}));
          connect(PAo.pressure, gain.y)
            annotation (Line(points={{-20,0},{-65.4,0}}, color={0,0,127}));
          connect(gain1.y, coronaryCirculation.intraMuscularPressure)
            annotation (Line(points={{-1.4,-50},{44,-50},{44,-20}}, color={0,0,
                  127}));
          connect(gain1.u, combiTable1Ds.y[2])
            annotation (Line(points={{-15.2,-50},{-39,-50}}, color={0,0,127}));
          connect(gain.u, combiTable1Ds.y[1]) annotation (Line(points={{-79.2,0},
                  {-90,0},{-90,-22},{-26,-22},{-26,-50},{-39,-50}}, color={0,0,
                  127}));
          annotation (
            Icon(coordinateSystem(preserveAspectRatio=false)),
            Diagram(coordinateSystem(preserveAspectRatio=false)),
            experiment(
              StopTime=10,
              Interval=0.01,
              Tolerance=1e-09,
              __Dymola_Algorithm="Cvode"));
        end CoronaryTestHuman;

        package PhysiolibraryExtensions
          model ElasticVesselVolFractionOutput
            "Elastic vessel extended by (V0/V)^2 output"
            extends Physiolibrary.Hydraulic.Components.ElasticVessel(final excessVolume_min = -Modelica.Constants.inf, final CollapsingPressureVolume = -Modelica.Constants.inf);
            parameter Real cf = 1 "Compliance factor fix - inconsistent in the source matlab model";
            Physiolibrary.Types.RealIO.FractionOutput
                                      VolFracSq = ((zpv/cf)/volume)^2 "(V0/V)^2 output"         annotation (Placement(transformation(
                    extent={{-20,-20},{20,20}},
                  rotation=270,
                  origin={82,-40}), iconTransformation(
                  extent={{-20,-20},{20,20}},
                  rotation=0,
                  origin={100,-40})));
          end ElasticVesselVolFractionOutput;

          model ResistorFractionInput "Reistor with resistance input"
             extends Physiolibrary.Icons.HydraulicResistor;

            Physiolibrary.Hydraulic.Components.Resistor resistor(useConductanceInput=true,
                Resistance=7999343244.9)
              annotation (Placement(transformation(extent={{-10,-10},{10,10}})));
            Physiolibrary.Blocks.Math.Reciprocal rec annotation (Placement(transformation(
                  extent={{-10,-10},{10,10}},
                  rotation=0,
                  origin={-18,50})));
            Physiolibrary.Types.RealIO.FractionInput ResistanceModifier annotation (
                Placement(transformation(extent={{-120,80},{-80,120}}),
                  iconTransformation(
                  extent={{-20,-20},{20,20}},
                  rotation=0,
                  origin={-80,60})));
            Physiolibrary.Types.Constants.HydraulicResistanceConst hydraulicResistance(k(
                  displayUnit="(Pa.s)/m3") = R0)
              annotation (Placement(transformation(extent={{-94,40},{-86,48}})));
            Modelica.Blocks.Math.Product product1
              annotation (Placement(transformation(extent={{-60,40},{-40,60}})));
            parameter Physiolibrary.Types.HydraulicResistance R0
              "Basal Hydraulic resistance";
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_a
              annotation (Placement(transformation(extent={{-110,-10},{-90,10}})));
            Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b port_b
              annotation (Placement(transformation(extent={{90,-10},{110,10}})));
          equation
            connect(rec.y, resistor.cond)
              annotation (Line(points={{-7,50},{0,50},{0,6}}, color={0,0,127}));
            connect(rec.u, product1.y)
              annotation (Line(points={{-30,50},{-39,50}}, color={0,0,127}));
            connect(hydraulicResistance.y, product1.u2)
              annotation (Line(points={{-85,44},{-62,44}}, color={0,0,127}));
            connect(ResistanceModifier, product1.u1) annotation (Line(points={{-100,100},{
                    -70,100},{-70,56},{-62,56}}, color={0,0,127}));
            connect(resistor.q_out, port_b) annotation (Line(
                points={{10,0},{100,0}},
                color={0,0,0},
                thickness=1));
            connect(resistor.q_in, port_a) annotation (Line(
                points={{-10,0},{-100,0}},
                color={0,0,0},
                thickness=1));
            annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={Text(
                    extent={{-60,40},{-20,100}},
                    lineColor={28,108,200},
                    textString="f")}),                                     Diagram(
                  coordinateSystem(preserveAspectRatio=false)));
          end ResistorFractionInput;

          model RmCalc
            Physiolibrary.Types.RealIO.FractionInput f_vol1 annotation (Placement(
                  transformation(extent={{-17,-47},{-11,-41}}), iconTransformation(extent={{-120,
                      -20},{-80,20}})));
            Physiolibrary.Types.RealIO.FractionInput f_vol2 annotation (Placement(
                  transformation(extent={{-3,-45},{-3,-45}}), iconTransformation(extent={{20,-20},
                      {-20,20}},
                  rotation=0,
                  origin={100,0})));
            Physiolibrary.Types.RealIO.FractionOutput rMod annotation (
                Placement(transformation(extent={{-18,-102},{22,-62}}),iconTransformation(
                    extent={{-20,-20},{20,20}},
                  rotation=270,
                  origin={0,-100})));
            parameter Real gamma = 0.75;
          equation
            rMod = gamma*f_vol1 + (1-gamma)*f_vol2;
          end RmCalc;
        end PhysiolibraryExtensions;
      end Coronary;
    end Subsystems;

    package Icons
      extends Modelica.Icons.IconsPackage;
      model Arteries

        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                Bitmap(
                    extent={{-87.243,-87.3037},{87.243,87.3037}},
                    fileName=
                  "modelica://Cardiovascular/Resources/Icons/Arteries.png",
                origin={4.25124,18.8661},
                    rotation=75)}), Diagram(coordinateSystem(preserveAspectRatio=
                  false)));

      end Arteries;

      class Atrium

        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                Bitmap(extent={{-100,-100},{100,100}}, fileName=
                "modelica://Cardiovascular/Resources/Icons/Atrium.png")}),
            Diagram(coordinateSystem(preserveAspectRatio=false)));
      end Atrium;

      class Cardio

        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                Bitmap(extent={{-100,-100},{100,100}}, fileName=
                "modelica://Cardiovascular/Resources/Icons/Cardio.png"),Bitmap(
                extent={{-50,-38},{52,62}}, fileName=
                "modelica://Cardiovascular/Resources/Icons/Cross.png")}), Diagram(
              coordinateSystem(preserveAspectRatio=false)));
      end Cardio;

      class ECMO

        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                Bitmap(extent={{-100,-100},{100,100}}, fileName=
                    "modelica://Cardiovascular/Resources/Icons/ECMO.png")}),
            Diagram(coordinateSystem(preserveAspectRatio=false)));
      end ECMO;

      class Heart_detailed

        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                Bitmap(extent={{-100,-100},{100,100}}, fileName=
                "modelica://Cardiovascular/Resources/Icons/Heart_detailed.png")}),
            Diagram(coordinateSystem(preserveAspectRatio=false)));
      end Heart_detailed;

      class O2

        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                Bitmap(extent={{-100,-100},{100,100}}, fileName=
                "modelica://Cardiovascular/Resources/Icons/O2.png")}), Diagram(
              coordinateSystem(preserveAspectRatio=false)));
      end O2;

      class Screw

        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                Bitmap(
                extent={{-100,-100},{100,100}},
                    fileName=
                  "modelica://Cardiovascular/Resources/Icons/Screw.png",
                origin={2,-4},
                rotation=90)}), Diagram(coordinateSystem(preserveAspectRatio=
                  false)));
      end Screw;

      class Settings

        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                Bitmap(extent={{-100,-100},{100,100}}, fileName=
                    "modelica://Cardiovascular/Resources/Icons/Settings.png")}),
            Diagram(coordinateSystem(preserveAspectRatio=false)));
      end Settings;

        class Valve

        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                Bitmap(extent={{-100,-100},{100,100}}, fileName=
                "modelica://Cardiovascular/Resources/Icons/Valve.png")}), Diagram(
              coordinateSystem(preserveAspectRatio=false)));
        end Valve;

        class Ventricle

        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                Bitmap(extent={{-100,-100},{100,100}}, fileName=
                "modelica://Cardiovascular/Resources/Icons/Ventricle.png")}),
            Diagram(coordinateSystem(preserveAspectRatio=false)));
        end Ventricle;

        class Vessels

        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                Bitmap(
                extent={{-130.465,-88.1195},{130.465,88.1195}},
                origin={0.99971,8.9994},
                rotation=-68,
                    fileName=
                  "modelica://Cardiovascular/Resources/Icons/Vessels.png")}),
            Diagram(coordinateSystem(preserveAspectRatio=false)));

        end Vessels;

      model Runnable_System

        annotation (
          Diagram(coordinateSystem(preserveAspectRatio=false, extent={{-20,-40},{
                  20,40}}), graphics),
          Icon(coordinateSystem(extent={{-20,-40},{20,40}}, preserveAspectRatio=
                  false), graphics={
              Text(
                extent={{-40,-42},{40,-50}},
                lineColor={0,0,255},
                textString="%name"),
              Ellipse(lineColor={75,138,73}, extent={{-20,-20},{20,20}}),
              Polygon(
                lineColor={0,0,255},
                fillColor={75,138,73},
                pattern=LinePattern.None,
                fillPattern=FillPattern.Solid,
                points={{-8,12},{12,0},{-8,-12},{-8,12}})}),
          Documentation(info="<html>
<p>Architectural model of cardiovascular subsystems. The partial subsystems are meant to be redeclared by the implemented submodels.</p>
</html>"));
      end Runnable_System;

      model Runnable_Shallow
        annotation (
          Diagram(coordinateSystem(extent={{-280,-140},{280,180}},
                preserveAspectRatio=false), graphics),
          Icon(coordinateSystem(extent={{-280,-140},{280,180}},
                preserveAspectRatio=false), graphics={Ellipse(
                    lineColor={75,138,73},
                      fillColor={255,255,255},
                    fillPattern=FillPattern.Solid,
                    extent={{-156,-140},{164,180}}),Polygon(
                    lineColor={0,0,255},
                    fillColor={75,138,73},
                    pattern=LinePattern.None,
                    fillPattern=FillPattern.Solid,
                      points={{-68,118},{104,16},{-68,-82},{-68,118}})}),
          experiment(StopTime=5, __Dymola_NumberOfIntervals=5000),
          Documentation(info="<html>
<p>Cardiovascular model implemented per description of Meurs et al.</p>
<p>[9] J. A. Goodwin, W. L. van Meurs, C. D. S a Couto, J. E. W. Beneken, S. A. Graves, A Model for Educational Simulation of Infant Cardiovascular Physiology, Anesthesia &AMP; Analgesia 99 (6) (2004) 1655&ndash;1664. doi:10.1213/01.ANE.0000134797.52793.AF.</p>
<p>[10] C. D. S a Couto, W. L. van Meurs, J. A. Goodwin, P. Andriessen, A Model for Educational Simulation of Neonatal Cardiovascular Pathophysiology, Simulation in Healthcare 1 (Inaugural) (2006) 4&ndash;12.</p>
<p>[11] W. van Meurs, Modeling and Simulation in Biomedical Engineering: Applications in Cardiorespiratory Physiology, McGraw-Hill Professional, 2011.</p>
</html>"));
      end Runnable_Shallow;
    end Icons;

    package Constants
      extends Modelica.Icons.Package;

      final constant Real ml2SI = 1e-6;
      final constant Real mmHg2SI = 133.32;
      final constant Real ml_per_mmhg2SI = 1e-6/133.32;
      final constant Real mmHgSec_per_ml2SI = 133.32*1e6;

      annotation (Icon(graphics={
          Polygon(
            origin={-9.2597,25.6673},
            fillColor={102,102,102},
            pattern=LinePattern.None,
            fillPattern=FillPattern.Solid,
            points={{48.017,11.336},{48.017,11.336},{10.766,11.336},{-25.684,10.95},{-34.944,-15.111},{-34.944,-15.111},{-32.298,-15.244},{-32.298,-15.244},{-22.112,0.168},{11.292,0.234},{48.267,-0.097},{48.267,-0.097}},
            smooth=Smooth.Bezier),
          Polygon(
            origin={-19.9923,-8.3993},
            fillColor={102,102,102},
            pattern=LinePattern.None,
            fillPattern=FillPattern.Solid,
            points={{3.239,37.343},{3.305,37.343},{-0.399,2.683},{-16.936,-20.071},{-7.808,-28.604},{6.811,-22.519},{9.986,37.145},{9.986,37.145}},
            smooth=Smooth.Bezier),
          Polygon(
            origin={23.753,-11.5422},
            fillColor={102,102,102},
            pattern=LinePattern.None,
            fillPattern=FillPattern.Solid,
            points={{-10.873,41.478},{-10.873,41.478},{-14.048,-4.162},{-9.352,-24.8},{7.912,-24.469},{16.247,0.27},{16.247,0.27},{13.336,0.071},{13.336,0.071},{7.515,-9.983},{-3.134,-7.271},{-2.671,41.214},{-2.671,41.214}},
            smooth=Smooth.Bezier)}));
    end Constants;

    package Obsolete
      extends Modelica.Icons.ObsoleteModel;
      model pv_type_baroreceptor
        extends Subsystems.Systemic.Vessel_modules.Artery;

      // Already inherited
      //  Physiolibrary.Types.Volume volume = u_C*C;
        Physiolibrary.Types.Volume v0 = Modelica.Constants.pi*(r^2) *l;

        Subsystems.Baroreflex.Baroreceptor baroreceptor(d=diameter)
          annotation (Placement(transformation(extent={{-10,-12},{10,8}})));
        Modelica.Blocks.Interfaces.RealOutput y annotation (Placement(transformation(
                extent={{76,-30},{96,-10}}), iconTransformation(extent={{72,-30},{92,-10}})));

        Modelica.Units.SI.Diameter dc "Current diameter";
        Modelica.Units.SI.Diameter rc "Current radius";

        // Real d = noEvent( if v > 0 then sqrt(v/v0) else 0) "The distension ratio r/r0";
        Real diameter = dc/d0;

        parameter Modelica.Units.SI.Diameter d0=5.45e-3
          "Normal vessel diameter";

      equation
        volume + v0= Modelica.Constants.pi*((dc/2)^2) *l;
          volume + v0= Modelica.Constants.pi*(rc^2) *l;

        connect(baroreceptor.fbr, y) annotation (Line(points={{10,-2},{56,-2},{
                  56,-20},{86,-20}},
                           color={0,0,127}));
      end pv_type_baroreceptor;

      model pv_jII_type
       extends ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery;
      //   input Real t(unit = "s");
      //   parameter Real mu(unit = "J.s.m-3") = 0.004;
      //   parameter Real rho(unit = "J.s2.m-5") = 1050;
      //   input Real E(unit = "Pa");
      //   Real E_m(unit = "Pa");
      //   input Real l(unit = "m");
      //   Real length(unit = "m");
      //   Real h(unit = "m");
      //   Real thickness(unit = "m");
      //   input Real r(unit = "m");
      //   Real radius(unit = "m");
      //   Real I(unit = "J.s2.m-6");
      //   Real C(unit = "m6.J-1");
      //   Real R(unit = "J.s.m-6");
      //   Real R_v(unit = "J.s.m-6");
      //   parameter Real a(unit = "1") = 0.2802;
      //   parameter Real b(unit = "m-1") = -505.3;
      //   parameter Real c(unit = "1") = 0.1324;
      //   parameter Real d(unit = "m-1") = -11.14;
      //   input Real u_in(unit = "Pa");
      //   Real u_C(unit = "Pa", start = 0.0);
      //   Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b port_b annotation (
      //       Placement(transformation(extent={{90,-10},{110,10}}), iconTransformation(
      //           extent={{90,-10},{110,10}})));
      //   Real u_out(unit = "Pa") = port_b.pressure;
      //   Real v_out(unit = "m3.s-1") = port_b.q;
      // equation
      //
      //       h = r*(a*exp(b*r)+c*exp(d*r));
      //       I = rho*l/(Modelica.Constants.pi*(r)^2);
      //       C = 2*Modelica.Constants.pi*(r^3) *l/(E*h);
      //       R = 8*mu*l/(Modelica.Constants.pi*(r^4));
      //       R_v = 0.01/C;
      //       length = l;
      //       E_m = E;
      //       radius = r;
      //       thickness = h;
      //
      //       der(v_in) = (u_in-u_out-R*v_in)/I;
      //       der(u_C) = (v_in-v_out)/C;
      //       u_out = u_C + R_v*(v_in-v_out);
      //
      //   annotation (Icon(graphics={
      //         Line(
      //           points={{-100,0},{-60,0}},
      //           color={28,108,200},
      //           arrow={Arrow.None,Arrow.Filled}),
      //         Text(
      //           extent={{-100,-20},{100,0}},
      //           lineColor={28,108,200},
      //           textString="%name"),
      //         Line(
      //           points={{60,10},{100,10}},
      //           color={28,108,200},
      //           arrow={Arrow.None,Arrow.Open}),
      //         Line(
      //           points={{60,-10},{100,-10}},
      //           color={28,108,200},
      //           arrow={Arrow.None,Arrow.Open})}));
      end pv_jII_type;

      model pv_jII_type_thoracic
        extends ADAN_main.Components.Obsolete.pv_type_thoracic;
      //   input Real t(unit = "s");
      //   parameter Real mu(unit = "J.s.m-3") = 0.004;
      //   parameter Real rho(unit = "J.s2.m-5") = 1050;
      //   input Real E(unit = "Pa");
      //   Real E_m(unit = "Pa");
      //   input Real l(unit = "m");
      //   Real length(unit = "m");
      //   Real h(unit = "m");
      //   Real thickness(unit = "m");
      //   input Real r(unit = "m");
      //   Real radius(unit = "m");
      //   Real I(unit = "J.s2.m-6");
      //   Real C(unit = "m6.J-1");
      //   Real R(unit = "J.s.m-6");
      //   Real R_v(unit = "J.s.m-6");
      //   parameter Real a(unit = "1") = 0.2802;
      //   parameter Real b(unit = "m-1") = -505.3;
      //   parameter Real c(unit = "1") = 0.1324;
      //   parameter Real d(unit = "m-1") = -11.14;
      //   input Real u_in(unit = "Pa");
      //   Real v(unit = "m3.s-1", start = 0.0);
      //   Real u(unit = "Pa");
      //   Real u_C(unit = "Pa", start = 0.0);
      //   input Real v_out_1(unit = "m3.s-1");
      //   input Real v_out_2(unit = "m3.s-1");
      //   input Physiolibrary.Types.Pressure thoracic_pressure;
      // equation
      //
      //       h = r*(a*exp(b*r)+c*exp(d*r));
      //       I = rho*l/(Modelica.Constants.pi*(r)^2);
      //       C = 2*Modelica.Constants.pi*(r^3) *l/(E*h);
      //       R = 8*mu*l/(Modelica.Constants.pi*(r^4));
      //       R_v = 0.01/C;
      //       length = l;
      //       E_m = E;
      //       radius = r;
      //       thickness = h;
      //
      //       der(v) = (u_in-u-R*v)/I;
      //       der(u_C) = (v-v_out_1-v_out_2)/C;
      //       u = u_C + thoracic_pressure + R_v*(v-v_out_1-v_out_2);
      //
      //   annotation (Icon(graphics={
      //         Line(
      //           points={{-100,0},{-60,0}},
      //           color={28,108,200},
      //           arrow={Arrow.None,Arrow.Filled}),
      //         Line(
      //           points={{60,10},{100,10}},
      //           color={28,108,200},
      //           arrow={Arrow.None,Arrow.Open}),
      //         Line(
      //           points={{60,-10},{100,-10}},
      //           color={28,108,200},
      //           arrow={Arrow.None,Arrow.Open})}));
      end pv_jII_type_thoracic;

    model pv_jII_type_baroreceptor
      extends ADAN_main.Components.Obsolete.pv_jII_type_thoracic;

    // Already inherited
    //  Physiolibrary.Types.Volume volume = u_C*C;
      Physiolibrary.Types.Volume v0 = Modelica.Constants.pi*(r^2) *l;

        Subsystems.Baroreflex.Baroreceptor baroreceptor(d=diameter)
          annotation (Placement(transformation(extent={{-10,-12},{10,8}})));
      Modelica.Blocks.Interfaces.RealOutput y annotation (Placement(transformation(
              extent={{76,-30},{96,-10}}), iconTransformation(extent={{72,-30},{92,-10}})));

        Modelica.Units.SI.Diameter dc "Current diameter";
        Modelica.Units.SI.Diameter rc "Current radius";

      // Real d = noEvent( if v > 0 then sqrt(v/v0) else 0) "The distension ratio r/r0";
      Real diameter = dc/d0;

        parameter Modelica.Units.SI.Diameter d0=32e-3 "Normal vessel diameter";

    equation
      volume + v0= Modelica.Constants.pi*((dc/2)^2) *l;
        volume + v0= Modelica.Constants.pi*(rc^2) *l;

      connect(baroreceptor.fbr, y) annotation (Line(points={{10,-2},{56,-2},{56,
                  -20},{86,-20}},
                         color={0,0,127}));
    end pv_jII_type_baroreceptor;

      package Delete
        model pp_BC_type2
           extends
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Auxiliary.PartialSystemicElement;
          parameter Real mu(unit = "J.s.m-3") = 0.004;
          parameter Real rho(unit = "J.s.m-3") = 1050;
          input Real E(unit = "Pa");
          Real E_m(unit = "Pa");
          input Real l(unit = "m");
          Real length(unit = "m");
          Real h(unit = "m");
          Real thickness(unit = "m");
          input Real r(unit = "m");
          Real radius(unit = "m");
          Real I(unit = "J.s2.m-6");
          Real C(unit = "m6.J-1");
          Real R(unit = "J.s.m-6");
          Real R_v(unit = "J.s.m-6");
          input Real R_T(unit = "J.s.m-6");
          Real R_T_2(unit = "J.s.m-6");
          input Real C_T(unit = "m6.J-1");
          parameter Real a(unit = "1") = 0.2802;
          parameter Real b(unit = "m-1") = -505.3;
          parameter Real c(unit = "1") = 0.1324;
          parameter Real d(unit = "m-1") = -11.14;
        //   input Real u_in(unit = "Pa");
        //   Real v_in(unit="m3.s-1", start=0.0);
          Real u(unit = "Pa");
          Real u_C(unit = "Pa", start = 0.0);
          Real u_C_T(unit = "Pa", start = 0.0);
          Real v_T(unit = "m3.s-1", start = 0.0);
          Real v_T_2(unit = "m3.s-1", start = 0.0);
          input Real u_out(unit = "Pa");
          Real v_out(unit = "m3.s-1") = v_T;
          parameter Real ups = 1e-6;
          outer parameter Real periferyModifier = 1.3;
          Real u1, v_c, u2, v3, u3, u4;
        equation

              h = r*(a*exp(b*r)+c*exp(d*r));
              I = rho*l/(Modelica.Constants.pi*(r)^2);
              C = 2*Modelica.Constants.pi*(r^3) *l/(E*h);
              R = 8*mu*l/(Modelica.Constants.pi*(r^4));
              R_v = 0.01/C;
              R_T_2 = 4*R_T;
              length = l;
              E_m = E;
              radius = r;
              thickness = h;

              // der(v) = (u_in-u-R*v)/I;
              // der(u_C) = (v-v_T)/C;
              // u = u_C+R_v*(v-v_T);
              // der(v_T) = (u-u_out-u_C_T-1.3*R_T*v_T)/(I*1e-6);
              // der(u_C_T) = (v_T-v_T_2)/C_T;
              // der(v_T_2) = (u_C_T-1.3*R_T_2*v_T_2)/(I*1e-6);

              der(q_in) = (u1 - u)/I;
              R*q_in =p_in  - u1 "u1 = u_in - R*v_in";
              u = u_C + R_v*(v_c);
              der(u_C) =(v_c)/C;
              v_c =q_in  - v_T;
              u2 = u - periferyModifier*R_T*v_T;
              der(v_T) = (u2-u3)/(I*ups);
              u3 =p_out -u_C_T;
              v3 = v_T-v_T_2;
              der(u_C_T) = (v3)/C_T;
              u4 = u3 - periferyModifier*R_T_2*v_T_2;
              der(v_T_2) = (u_C_T-u4)/(I*ups);

          annotation (Icon(graphics={
                Rectangle(
                  extent={{80,20},{100,-20}},
                  lineThickness=0.5,
                  fillColor={244,125,35},
                  fillPattern=FillPattern.Solid,
                  pattern=LinePattern.None),
                Line(
                  points={{-100,0},{-60,0}},
                  color={28,108,200},
                  arrow={Arrow.None,Arrow.Filled}),
                Line(
                  points={{60,0},{100,0}},
                  color={28,108,200},
                  arrow={Arrow.None,Arrow.Filled})}), Diagram(graphics={
                Rectangle(extent={{-90,10},{-80,14}}, lineColor={28,108,200}),
                Line(
                  points={{-74,12},{-72,16},{-70,12}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{-70,12},{-68,16},{-66,12}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{-66,12},{-64,16},{-62,12}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{-60,-6},{-52,-6}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{-60,-8},{-52,-8}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{-60,-14},{-52,-14}},
                  color={28,108,200},
                  smooth=Smooth.Bezier,
                  thickness=1),
                Rectangle(extent={{-50,10},{-40,14}}, lineColor={28,108,200}),
                Line(
                  points={{-34,12},{-32,16},{-30,12}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{-30,12},{-28,16},{-26,12}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{-26,12},{-24,16},{-22,12}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Rectangle(
                  extent={{-5,-2},{5,2}},
                  lineColor={28,108,200},
                  origin={-56,3},
                  rotation=90),
                Rectangle(extent={{-10,14},{0,18}}, lineColor={28,108,200}),
                Line(
                  points={{6,16},{8,20},{10,16}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{10,16},{12,20},{14,16}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{14,16},{16,20},{18,16}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{-4,-1},{4,-1}},
                  color={28,108,200},
                  smooth=Smooth.Bezier,
                  origin={3,8},
                  rotation=90),
                Line(
                  points={{-4,1},{4,1}},
                  color={28,108,200},
                  smooth=Smooth.Bezier,
                  origin={7,8},
                  rotation=90),
                Line(points={{-96,12},{-90,12}}, color={28,108,200}),
                Line(points={{-80,12},{-74,12}}, color={28,108,200}),
                Line(points={{-62,12},{-56,12}}, color={28,108,200}),
                Line(points={{-56,12},{-50,12}}, color={28,108,200}),
                Line(
                  points={{-2,1},{2,1}},
                  color={28,108,200},
                  origin={-55,10},
                  rotation=90),
                Line(
                  points={{-2,1},{2,1}},
                  color={28,108,200},
                  origin={-55,-4},
                  rotation=90),
                Line(
                  points={{-4,1},{2,1}},
                  color={28,108,200},
                  origin={-55,-10},
                  rotation=90),
                Line(points={{-40,12},{-34,12}}, color={28,108,200}),
                Line(points={{-22,12},{-16,12}}, color={28,108,200}),
                Line(points={{-16,16},{-10,16}}, color={28,108,200}),
                Line(points={{0,16},{6,16}}, color={28,108,200}),
                Line(points={{18,16},{24,16}}, color={28,108,200}),
                Line(points={{-16,8},{4,8}}, color={28,108,200}),
                Line(points={{6,8},{24,8}}, color={28,108,200}),
                Line(
                  points={{-2,1},{2,1}},
                  color={28,108,200},
                  origin={-15,14},
                  rotation=90),
                Line(
                  points={{-2,1},{2,1}},
                  color={28,108,200},
                  origin={-15,10},
                  rotation=90),
                Line(
                  points={{-2,1},{2,1}},
                  color={28,108,200},
                  origin={25,14},
                  rotation=90),
                Line(
                  points={{-2,1},{2,1}},
                  color={28,108,200},
                  origin={25,10},
                  rotation=90),
                Line(points={{24,12},{30,12}}, color={28,108,200})}));
        end pp_BC_type2;

        model tissue
           extends
            ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Auxiliary.PartialSystemicElement;
          parameter Real mu(unit = "J.s.m-3") = 0.004;
          parameter Real rho(unit = "J.s.m-3") = 1050;
          input Real E(unit = "Pa");
          Real E_m(unit = "Pa");
          input Real l(unit = "m");
          Real length(unit = "m");
          Real h(unit = "m");
          Real thickness(unit = "m");
          input Real r(unit = "m");
          Real radius(unit = "m");
          Real I(unit = "J.s2.m-6");
          Real C(unit = "m6.J-1");
          Real R(unit = "J.s.m-6");
          Real R_v(unit = "J.s.m-6");
          input Real R_T(unit = "J.s.m-6");
          Real R_T_2(unit = "J.s.m-6");
          input Real C_T(unit = "m6.J-1");
          parameter Real a(unit = "1") = 0.2802;
          parameter Real b(unit = "m-1") = -505.3;
          parameter Real c(unit = "1") = 0.1324;
          parameter Real d(unit = "m-1") = -11.14;
        //   input Real u_in(unit = "Pa");
        //   Real v_in(unit="m3.s-1", start=0.0);
          Real u(unit = "Pa");
          Real u_C(unit = "Pa", start = 0.0);
          Real u_C_T(unit = "Pa", start = 0.0);
          Real v_T(unit = "m3.s-1", start = 1e-7);
          Real v_T_2(unit = "m3.s-1", start = 1e-7);
          input Real u_out(unit = "Pa");
          Real v_out(unit = "m3.s-1") = v_T;
          parameter Real ups = 1e-6;
          outer parameter Real periferyModifier = 1.3;
          Real u1, v_c, u2, v3, u3, u4;
          parameter
            Subsystems.Systemic.Vessel_modules.Auxiliary.simplificationLevel
            simplification=Subsystems.Systemic.Vessel_modules.Auxiliary.simplificationLevel.noL3;
        equation

              h = r*(a*exp(b*r)+c*exp(d*r));
              I = rho*l/(Modelica.Constants.pi*(r)^2);
              C = 2*Modelica.Constants.pi*(r^3) *l/(E*h);
              R = 8*mu*l/(Modelica.Constants.pi*(r^4));
              R_v = 0.01/C;
              R_T_2 = 4*R_T;
              length = l;
              E_m = E;
              radius = r;
              thickness = h;

          if simplification == Subsystems.Systemic.Vessel_modules.Auxiliary.simplificationLevel.original then
              der(q_in) = (p_in-u-R*q_in)/I;
              der(u_C) = (q_in-v_T)/C;
              u = u_C+R_v*(q_in-v_T);
              der(v_T) = (u-p_out-u_C_T-1.3*R_T*v_T)/(I*1e-6);
              der(u_C_T) = (v_T-v_T_2)/C_T;
              der(v_T_2) = (u_C_T-1.3*R_T_2*v_T_2)/(I*1e-6);
              u1 =p_in -R*q_in;
              v_c =q_in  - v_T;
              u2 = u - periferyModifier*R_T*v_T;
              v3 = (v_T-u_C_T/(periferyModifier*R_T_2));
              u3 =p_out +u_C_T;
              u4 = u3 - periferyModifier*R_T_2*v_T_2;
              //v_T_2 = u_C_T/(periferyModifier*R_T_2);
          elseif simplification == Subsystems.Systemic.Vessel_modules.Auxiliary.simplificationLevel.detailed then
              der(q_in) = (u1 - u)/I;
              R*q_in =p_in  - u1 "u1 = u_in - R*v_in";
              u = u_C + R_v*(v_c);
              der(u_C) =(v_c)/C;
              v_c =q_in  - v_T;
              u2 = u - periferyModifier*R_T*v_T;
              der(v_T) = (u2-u3)/(I*ups);
              u3 =p_out +u_C_T;
              v3 = v_T-v_T_2;
              der(u_C_T) = (v3)/C_T;
              u4 = u3 - periferyModifier*R_T_2*v_T_2;
              der(v_T_2) = (p_out-u4)/(I*ups);
          elseif simplification == Subsystems.Systemic.Vessel_modules.Auxiliary.simplificationLevel.simplified then
              // simplified model acc to Soroush 2019/03 commit
              der(q_in) = (p_in-u-R*q_in)/I;
              der(u_C) = (q_in-v_T)/C;
              u = u_C+R_v*(q_in-v_T);
              der(v_T) = (u-p_out-u_C_T-periferyModifier*R_T*v_T)/(I*ups);
              der(u_C_T) = (v_T-u_C_T/(periferyModifier*R_T_2))/C_T;
              u1 =p_in -R*q_in;
              v_c =q_in  - v_T;
              u2 = u - periferyModifier*R_T*v_T;
              v3 = (v_T-u_C_T/(periferyModifier*R_T_2));
              u3 =p_out -u_C_T;
              u4 = u3 - periferyModifier*R_T_2*v_T_2;
              v_T_2 = u_C_T/(periferyModifier*R_T_2);
          elseif simplification == Subsystems.Systemic.Vessel_modules.Auxiliary.simplificationLevel.noL3 then
              der(q_in) = (u1 - u)/I;
              R*q_in =p_in  - u1 "u1 = u_in - R*v_in";
              u = u_C + R_v*(v_c);
              der(u_C) =(v_c)/C;
              v_c =q_in  - v_T;
              u2 = u - periferyModifier*R_T*v_T;
              //u2=u3;
              der(v_T) = (u2-u3)/(I*ups);
              u3 =p_out +u_C_T;
              v3 = v_T-v_T_2;
              der(u_C_T) = (v3)/C_T;
              u4 = u3 - periferyModifier*R_T_2*v_T_2;
              u4 =p_out;
        //      der(v_T_2) = (u_out-u4)/(I*ups);
          end if;

          annotation (Icon(graphics={
                Rectangle(
                  extent={{80,20},{100,-20}},
                  lineThickness=0.5,
                  fillColor={244,125,35},
                  fillPattern=FillPattern.Solid,
                  pattern=LinePattern.None),
                Line(
                  points={{-100,0},{-60,0}},
                  color={28,108,200},
                  arrow={Arrow.None,Arrow.Filled}),
                Line(
                  points={{60,0},{100,0}},
                  color={28,108,200},
                  arrow={Arrow.None,Arrow.Filled})}), Diagram(graphics={
                Rectangle(extent={{-74,6},{-64,10}}, lineColor={28,108,200}),
                Line(
                  points={{-58,8},{-56,12},{-54,8}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{-54,8},{-52,12},{-50,8}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{-50,8},{-48,12},{-46,8}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{-44,-10},{-36,-10}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{-44,-12},{-36,-12}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{-44,-18},{-36,-18}},
                  color={28,108,200},
                  smooth=Smooth.Bezier,
                  thickness=1),
                Rectangle(extent={{-34,6},{-24,10}}, lineColor={28,108,200}),
                Line(
                  points={{-18,8},{-16,12},{-14,8}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{-14,8},{-12,12},{-10,8}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{-10,8},{-8,12},{-6,8}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Rectangle(
                  extent={{-5,-2},{5,2}},
                  lineColor={28,108,200},
                  origin={-40,-1},
                  rotation=90),
                Rectangle(extent={{6,10},{16,14}}, lineColor={28,108,200}),
                Line(
                  points={{22,12},{24,16},{26,12}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{26,12},{28,16},{30,12}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{30,12},{32,16},{34,12}},
                  color={28,108,200},
                  smooth=Smooth.Bezier),
                Line(
                  points={{-4,-1},{4,-1}},
                  color={28,108,200},
                  smooth=Smooth.Bezier,
                  origin={19,4},
                  rotation=90),
                Line(
                  points={{-4,1},{4,1}},
                  color={28,108,200},
                  smooth=Smooth.Bezier,
                  origin={23,4},
                  rotation=90),
                Line(points={{-80,8},{-74,8}}, color={28,108,200}),
                Line(points={{-64,8},{-58,8}}, color={28,108,200}),
                Line(points={{-46,8},{-40,8}}, color={28,108,200}),
                Line(points={{-40,8},{-34,8}}, color={28,108,200}),
                Line(
                  points={{-2,1},{2,1}},
                  color={28,108,200},
                  origin={-39,6},
                  rotation=90),
                Line(
                  points={{-2,1},{2,1}},
                  color={28,108,200},
                  origin={-39,-8},
                  rotation=90),
                Line(
                  points={{-4,1},{2,1}},
                  color={28,108,200},
                  origin={-39,-14},
                  rotation=90),
                Line(points={{-24,8},{-18,8}}, color={28,108,200}),
                Line(points={{-6,8},{0,8}}, color={28,108,200}),
                Line(points={{0,12},{6,12}}, color={28,108,200}),
                Line(points={{16,12},{22,12}}, color={28,108,200}),
                Line(points={{34,12},{40,12}}, color={28,108,200}),
                Line(points={{0,4},{20,4}}, color={28,108,200}),
                Line(points={{22,4},{40,4}}, color={28,108,200}),
                Line(
                  points={{-2,1},{2,1}},
                  color={28,108,200},
                  origin={1,10},
                  rotation=90),
                Line(
                  points={{-2,1},{2,1}},
                  color={28,108,200},
                  origin={1,6},
                  rotation=90),
                Line(
                  points={{-2,1},{2,1}},
                  color={28,108,200},
                  origin={41,10},
                  rotation=90),
                Line(
                  points={{-2,1},{2,1}},
                  color={28,108,200},
                  origin={41,6},
                  rotation=90),
                Line(points={{40,8},{46,8}}, color={28,108,200}),
                Text(
                  extent={{-84,10},{-74,14}},
                  lineColor={0,0,0},
                  textString="u_in"),
                Text(
                  extent={{-66,10},{-56,14}},
                  lineColor={0,0,0},
                  textString="u1"),
                Text(
                  extent={{-44,10},{-34,14}},
                  lineColor={0,0,0},
                  textString="u"),
                Text(
                  extent={{-26,10},{-16,14}},
                  lineColor={0,0,0},
                  textString="u2"),
                Text(
                  extent={{-8,10},{2,14}},
                  lineColor={0,0,0},
                  textString="u3"),
                Text(
                  extent={{14,14},{24,18}},
                  lineColor={0,0,0},
                  textString="u4"),
                Text(
                  extent={{16,-6},{26,-2}},
                  lineColor={0,0,0},
                  textString="u_C_T"),
                Text(
                  extent={{40,10},{50,14}},
                  lineColor={0,0,0},
                  textString="u_out"),
                Text(
                  extent={{-18,2},{-8,6}},
                  lineColor={28,108,200},
                  textString="L2"),
                Text(
                  extent={{24,8},{34,12}},
                  lineColor={28,108,200},
                  textString="L3")}));
        end tissue;
      end Delete;

      model vp_jII_type
        extends Subsystems.Systemic.Vessel_modules.Vein;
      end vp_jII_type;

      model pv_type_thoracic_leveled
        import ADAN_main;
        extends ADAN_main.Components.Obsolete.pv_type_thoracic(redeclare
            ADAN_main.Components.Interfaces.HydraulicPort_a_leveled port_a,
            redeclare ADAN_main.Components.Interfaces.HydraulicPort_b_leveled
            port_b);
      equation
        port_a.position + height = port_b.position;
      end pv_type_thoracic_leveled;

      model vv_type_thoracic_leveled
        extends Subsystems.Systemic.Vessel_modules.Ascending_aorta(redeclare
            Interfaces.HydraulicPort_a_leveled port_a, redeclare
            Interfaces.HydraulicPort_b_leveled port_b);
      equation
        port_a.position + height = port_b.position;
      end vv_type_thoracic_leveled;

      model vp_type_phi_sensitive

        extends
          Subsystems.Systemic.Vessel_modules.Auxiliary.PartialSystemicVessel(
          UseNonLinearCompliance=true,
          zpv=l*Modelica.Constants.pi*((r*venous_diameter_correction)^2),
          R=8*mu*l/(Modelica.Constants.pi*((r*venous_diameter_correction)^4)),
          I=rho*l/(Modelica.Constants.pi*(r*venous_diameter_correction)^2));

      //  Physiolibrary.Types.Volume zpv = l*Modelica.Constants.pi*((r*venous_diameter_correction)^2);

        Real u_C(unit = "Pa", start = 0.0);
        input Physiolibrary.Types.Fraction phi_norm "phi normalized to 1 for normal conditions (phi = 0.25, phi_norm = 1)";
        parameter Physiolibrary.Types.Pressure p0 = 665 "nominal venous pressure";
        outer parameter Physiolibrary.Types.Fraction venous_diameter_correction annotation(missingInnerMessage = "We expected inner parameter Physiolibrary.Types.Fraction venous_diameter_correction! ");

        outer Physiolibrary.Types.Fraction ZPV_effect;
        outer Physiolibrary.Types.Fraction C_effect;
        Physiolibrary.Types.HydraulicCompliance c0 = zpv/p0*C_effect "nominal compliance";

        Physiolibrary.Types.Volume Vmax = 2*zpv;
        Physiolibrary.Types.Volume zpvs = zpv *ZPV_effect;
      initial equation
        u_C = p0;
      equation

       // v0 = len*pi*2*r^2
       // p0 = 5 mmHg
       //
       // C = alpha*c0;
       // v0 = alpha*V000
       // v00 = r^2*pi*len
       // zero pressure volume = current volume at p0
       // ressitances?
      // gth, E, r

      //   parameter Physiolibrary.Types.Fraction fzpv = 2.5 "Zero-pressure volume factor";
      //   parameter Physiolibrary.Types.Fraction fc = 2.5 "compliance factor";
      //   Physiolibrary.Types.Volume zpv = l*Modelica.Constants.pi*(r^2) "Zero-pressure volume";
      //   Physiolibrary.Types.Volume zpv = (1 + (phi_norm-1)*fzpv) * l*Modelica.Constants.pi*(r^2) "Zero-pressure volume scaled by the phi input";
      //   Physiolibrary.Types.HydraulicCompliance compliance = (1 + (phi_norm-1)*fc)*C "Compliance scaled by the phi input";
      //  outer Physiolibrary.Types.Fraction cfactor;

      //  volume = u_C*C + zpv;

        if UseNonLinearCompliance then
          // volume = zpvs + 2*Vmax/Modelica.Constants.pi*atan(Modelica.Constants.pi*c0/2/Vmax*u_C);
          // v_dan1  = Vmax*(tanh(pi/4.*u/u0) + 1)/2 ;
          // v_dan2  = Vmax*(tanh(pi/4.*(exp(u./u0)-1)) + 1)/2 ;

          if volume > zpvs then
            tan(volume - zpvs)/(2*Vmax/Modelica.Constants.pi) = (Modelica.Constants.pi*c0/2/Vmax*u_C);
          else
            u_C = 0;
          end if;

        else
          volume = u_C*C + zpvs;
        end if;

        if E == 0 or not UseInertance then
          0 =p_in -p_out-R*q_out;
        else
          der(q_out) = (p_in-p_out-R*q_out)/I;
        end if;
        //       der(u_C) = (v_in-v_out)/C;
        der(volume) =q_in -q_out;
        p_in =u_C + R_vis*(q_in - q_out);

          annotation (Diagram(graphics={
              Line(
                points={{-100,0},{-60,0}},
                color={28,108,200},
                arrow={Arrow.None,Arrow.Open}),
              Line(
                points={{40,0},{80,0}},
                color={28,108,200},
                arrow={Arrow.None,Arrow.Open})}), Icon(graphics={Line(
                points={{-80,0},{80,0}},
                color={28,108,200},
                arrow={Arrow.None,Arrow.Filled},
                thickness=0.5)}));
      end vp_type_phi_sensitive;

      model vp_type2

        extends
          Subsystems.Systemic.Vessel_modules.Auxiliary.PartialSystemicVessel(
          UseInertance=false,
          UseNonLinearCompliance=true,
          zpv=l*Modelica.Constants.pi*((r)^2),
          R=8*mu*l/(Modelica.Constants.pi*((r)^4)),
          I=rho*l/(Modelica.Constants.pi*(r)^2),
          volume(start=init_volume*2, fixed=false));

      //  Physiolibrary.Types.Volume zpv = l*Modelica.Constants.pi*((r*venous_diameter_correction)^2);

        Real u_C(unit = "Pa");
        input Physiolibrary.Types.Fraction phi_norm "phi normalized to 1 for normal conditions (phi = 0.25, phi_norm = 1)";

        Physiolibrary.Types.Pressure u_out_hs=p_out;

        parameter Physiolibrary.Types.Volume init_volume = V0;
        // parameter Physiolibrary.Types.Volume init_volume = zpv + 2*2*zpv/Modelica.Constants.pi*atan(Modelica.Constants.pi*zpv/p0/2/(2*zpv)*(p0));

      Real A = phi_norm * 0.25 "denormalizing the normalized normal";
      Real T_total = T_pass + T_active;
      Real T_active_inf = A*T_act_max;
      Real T_active;

      Real T_pass;
      Real T_pass_exp;
      Real T_act_max;
      parameter Physiolibrary.Types.Time tau = 0.1 "Time constant of the smooth muscle activation";

        Modelica.Units.SI.Length wall_L=Modelica.Constants.pi*D
          "Circumferential wall length";
        parameter Modelica.Units.SI.Length wall_L0=Modelica.Constants.pi*r*2
          "Circumferential wall length at nominal";
        parameter Modelica.Units.SI.Length wall_L_min=wall_L0*gamma
          "Minimal circumferential length";
        parameter Real gamma = 1/2;
        parameter Real alpha = 2.5;// = T_pass/(T_pass + T_act_max);
        parameter Physiolibrary.Types.Pressure P_passiveBase = 2*133;
        Real T_pass_nominal = C_pass*(exp((wall_L0 - wall_L_min) /wall_L_min) - 1);
        Real T_max_nominal = (T_pass_nominal  + C_act);

        Modelica.Units.SI.Diameter D(start=2*r);
      //Modelica.SIunits.Diameter D_inst(start = 2*r);

      Real C_pass;// = 2.52 "Fitted to have 2 mmHg @ l=l0, orig 0.459";//0.459;
      Real C_act;// = 10.4 "(N/m)";

        parameter Modelica.Units.SI.Length vessel_length=11.3168e-2;
      Physiolibrary.Types.Volume V = l * Modelica.Constants.pi * (D/2)^2;
      parameter Physiolibrary.Types.Volume V0 = l * Modelica.Constants.pi * (r)^2;
      //parameter Modelica.SIunits.Diameter D0 = 2*T_total/p0 ;

      Physiolibrary.Types.Fraction ll0( start = 1)=wall_L/wall_L0;

      initial equation
      //  u_C = p0;
      equation
        // identify the c_act
        alpha =   T_max_nominal/T_pass_nominal;
        // identify the c_pass
        P_passiveBase * r = T_pass_nominal;

      //  T_total = u_C *D/2
      //  der(D) = ( u_C *D/2 - T_total) /(p0*tau);

        T_pass_exp= (wall_L - wall_L_min) /wall_L_min;
        T_pass = C_pass*exp(T_pass_exp) - C_pass;

        T_act_max=C_act*wall_L/wall_L0;
        der(T_active) = (T_active_inf - T_active)/tau;
        //0 = (T_active_inf - T_active);

            volume = V;

        u_C *D/2 = T_total;
        0 =p_in -p_out_hs-R*q_out;
        der(volume) =q_in -q_out;
        p_in =u_C + R_vis*(q_in - q_out);

          annotation (Diagram(graphics={
              Line(
                points={{-100,0},{-60,0}},
                color={28,108,200},
                arrow={Arrow.None,Arrow.Open}),
              Line(
                points={{40,0},{80,0}},
                color={28,108,200},
                arrow={Arrow.None,Arrow.Open})}), Icon(graphics={Line(
                points={{-80,0},{80,0}},
                color={28,108,200},
                arrow={Arrow.None,Arrow.Filled},
                thickness=0.5)}));
      end vp_type2;

      model vp_type_backup

        extends
          Subsystems.Systemic.Vessel_modules.Auxiliary.PartialSystemicVessel(
          UseOuter_thoracic_pressure=false,
          UseInertance=false,
          UseNonLinearCompliance=true,
          zpv=l*Modelica.Constants.pi*((r*venous_diameter_correction)^2),
          R=8*mu*l/(Modelica.Constants.pi*((r*venous_diameter_correction)^4)),
          I=rho*l/(Modelica.Constants.pi*(r*venous_diameter_correction)^2),
          volume(start=init_volume, fixed=false),
          V_min=Modelica.Constants.pi*(wall_L_min/Modelica.Constants.pi/2)^2*l);

      //  Physiolibrary.Types.Volume zpv = l*Modelica.Constants.pi*((r*venous_diameter_correction)^2);

        Real u_C(unit = "Pa", start = p0);
        input Physiolibrary.Types.Fraction phi_norm "phi normalized to 1 for normal conditions (phi = 0.25, phi_norm = 1)";
        parameter Physiolibrary.Types.Pressure p0=665   "nominal venous pressure";
        outer parameter Physiolibrary.Types.Fraction venous_diameter_correction;
        outer parameter Physiolibrary.Types.Fraction C_effect;
        Physiolibrary.Types.HydraulicCompliance c0 = C_effect*zpv/p0 "nominal compliance";
        outer Physiolibrary.Types.Fraction ZPV_effect;
        Physiolibrary.Types.Volume zpvs = zpv *ZPV_effect;

        Physiolibrary.Types.Volume Vmax = 2*zpv;

        outer Modelica.Units.SI.Angle Tilt;
        Physiolibrary.Types.Pressure P_hs = sin(Tilt)*height*rho*Modelica.Constants.g_n "Hydrostatic pressure";
        Physiolibrary.Types.Pressure u_out_hs=p_out   + P_hs "Output pressure including the hydrostatic pressure";

        parameter Integer PV_variant = 5;

        parameter Physiolibrary.Types.Volume init_volume = V0;
        // parameter Physiolibrary.Types.Volume init_volume = zpv + 2*2*zpv/Modelica.Constants.pi*atan(Modelica.Constants.pi*zpv/p0/2/(2*zpv)*(p0));

      Real A_inf = phi_norm * 0.25 "denormalizing the normalized normal";
      Real A;
      Real T_total = T_pass + T_active;
      Real T_active_inf = A*T_act_max;
      Real T_active;

      Real T_pass;
      Real T_pass_exp;
      Real T_act_max;
      parameter Physiolibrary.Types.Time tau=0.1   "Time constant of the smooth muscle activation";

        Modelica.Units.SI.Length wall_L=Modelica.Constants.pi*D
          "Circumferential wall length";
        parameter Modelica.Units.SI.Length wall_L0=Modelica.Constants.pi*r*2
          "Circumferential wall length at nominal";
        parameter Modelica.Units.SI.Length wall_L_min=wall_L0*gamma
          "Minimal circumferential length";
        outer parameter Real gamma;// = 1/2;
        outer parameter Real alpha;// = 2.5;// = T_pass/(T_pass + T_act_max);

      //  parameter Physiolibrary.Types.Pressure P_passiveBase = p0;
        Real T_pass_base = C_pass*(exp((wall_L0 - wall_L_min) /wall_L_min) - 1);
        Real T_pass_nominal = T_pass_base + C_act*0.25;
        Real T_max_nominal = (T_pass_base  + C_act);

        Modelica.Units.SI.Diameter D(start=2*r);
      //Modelica.SIunits.Diameter D_inst(start = 2*r);

      Real C_pass(start = 1);// = 2.52 "Fitted to have 2 mmHg @ l=l0, orig 0.459";//0.459;
      parameter Real Cd_pass = 7.7 "Fitted to have compliance of 60 for whole vascular tree (60*0.08 for the test component) at l=l0. Orig 13";
      Real C_act(start = 1);// = 10.4 "(N/m)";
      Real C_act_guess = p0*r*(gamma*(alpha-1)/(1+phi_norm/4*(alpha-1)));
      parameter Real Cd_act = 1;
      parameter Real Cdd_act = 0.4;

        parameter Modelica.Units.SI.Length vessel_length=11.3168e-2;
      Physiolibrary.Types.Volume V = l * Modelica.Constants.pi * (D/2)^2;
      parameter Physiolibrary.Types.Volume V0 = l * Modelica.Constants.pi * (r)^2;
      //parameter Modelica.SIunits.Diameter D0 = 2*T_total/p0 ;

      Physiolibrary.Types.Fraction ll0( start = 1)=wall_L/wall_L0;

      Physiolibrary.Types.VolumeFlowRate netFlow=q_in  -q_out;

      parameter Boolean ignoreViscosityResistance = true;
      Physiolibrary.Types.Pressure external_pressure;
      parameter Boolean limitExternalPressure =  true;
      initial equation
        //  u_C = p0;
        //  T_active = T_active_inf;
        A = phi_norm * 0.25;
      equation
        der(A)*tau = A_inf - A;

        // identify the c_act
        alpha =   T_max_nominal/T_pass_base;
        // identify the c_pass
        p0 * r = T_pass_nominal;

      //  T_total = u_C *D/2
      //  der(D) = ( u_C *D/2 - T_total) /(p0*tau);

      if PV_variant == 5 then
        T_pass_exp= (wall_L - wall_L_min) /wall_L_min;
        T_pass = C_pass*exp(T_pass_exp) - C_pass;

        T_act_max=C_act*wall_L/wall_L0;
      //   der(T_active) = (T_active_inf - T_active)/tau;
      0 = (T_active_inf - T_active);

      else
        T_pass_exp=Cd_pass*(ll0 - 1);
        T_pass = C_pass*exp(T_pass_exp);

        T_act_max=C_act*exp(-((ll0 - Cd_act)/Cdd_act)^2);
        0 = (T_active_inf - T_active);

      end if;

        if UseNonLinearCompliance then
           // T_total = u_C * D_inst /2;
           // D_inst = D;
            // tau*der(D) = D_inst - D;

          if PV_variant == 1 then
            tan(volume - zpvs)/(2*Vmax/Modelica.Constants.pi) = (Modelica.Constants.pi*c0/2/Vmax*u_C);
            D = r*2;

          elseif PV_variant == 2 then
            // Dan 1
            volume  = ZPV_effect*Vmax*(tanh(Modelica.Constants.pi/4.*u_C/p0) + 1)/2;
            D = r*2;
          elseif PV_variant == 3 then
            // Dan 2
            volume = ZPV_effect*Vmax*(tanh(Modelica.Constants.pi/4.*(exp(u_C/p0)-1)) + 1)/2;
            D = r*2;
          elseif PV_variant == 4 then
            // Carslon&Secomb 2005
            volume = V;
            der(D) = ( u_C *D/2 - T_total) /(p0*tau);
          elseif PV_variant == 5 then
            volume = V;
            u_C *D/2 = T_total;
          else
            // 0
            // default original relation
            volume = zpv + 2*Vmax/Modelica.Constants.pi*atan(Modelica.Constants.pi*c0/2/Vmax*(u_C));
            D = r*2;
          end if;
      else  D = r*2;
        //   D = D_inst;
           volume = (u_C) *C + zpv;
         end if;

        if E == 0 or not UseInertance then
          // 0 = u_in-u_out_hs-R*v_out;
          if true or V > V_min or (p_in-p_out_hs) < 0 then
            (p_in-p_out_hs)/R =q_out;
          else
            q_out = 0;
          end if;

        else
          der(q_out) = (p_in-p_out_hs-R*q_out)/I;
        end if;

        der(volume) = netFlow;

        if UseOuter_thoracic_pressure and limitExternalPressure then
            external_pressure = thoracic_pressure_ratio*thoracic_pressure*max(min(V/V_min, 1), 0);
        elseif UseOuter_thoracic_pressure then
            external_pressure = thoracic_pressure_ratio*thoracic_pressure;
        else
          external_pressure = 0;
        end if;

        if not ignoreViscosityResistance then
          p_in   =u_C + R_vis*(q_in - q_out) + external_pressure;
          else
          p_in   = u_C + external_pressure;
        end if;

      end vp_type_backup;

      model pv_type_thoracic
        extends ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery(
                                                            final
              UseOuter_thoracic_pressure=true);
      end pv_type_thoracic;

      model CerebralArterioles
        "DOI 10.1111/micc.12518, to be finished using PMID 16020079"
        extends Physiolibrary.Hydraulic.Interfaces.OnePort;

      //parameter Real P_AB = 100;

      parameter Real R_AB = 500 "[(mm  Hg*s)/mL ] Cerebral arterial resistance to flow";
      parameter Real R_VB = 1700 "[(mm  Hg*s)/mL ] Cerebral venous resistance to flow";

      parameter Real C_AB = 0.0105 "[mL/mm Hg ] Cerebral arterial vasculature capacitance";
      parameter Real C_VB = 0.0500 "[mL/mm Hg] Cerebral venous vasculature capacitance";

      parameter Real R_AtlB0 = 2500 "[(mm  Hg*s)/mL ] Cerebral arteriolar reference resistance to flow";
      parameter Real AE_Ncol = 2.01e3 "[mm Hg] Arteriolar non_collagen content stiffness product";
      parameter Real AE_col = 8.77e6 "[mm Hg] Arteriolar collagen content stiffness product";
      parameter Real alpha = 1.24 "[unitless] Arteriolar collagen distribution characteristic strain";
      parameter Real gamma = 7.11 "[Unitless ] Arteriolar collagen distribution shape factor";
      parameter Real D_Atl0 = 189.8 "[μm] Arteriolar reference diameter";
      parameter Real A_Wall = 8405 "[μm2] Arteriolar circumferential wall area";
      parameter Real tau_DAtl = 1 "[s] Arteriolar diameter time constant";
      parameter Real tau_AAtl = 15 "[s] Arteriolar activation time constant";

      //Adjustable parameters
      parameter Real C_Act0 = 1 "[mm Hg*μm ] Arteriolar strength of smooth muscle";
      parameter Real C_Act1 = 0.5 "[Unitless ] Arteriolar position of peak tension generation";
      parameter Real C_Act2 = 0.1 "[Unitless ] Arteriolar width of smooth muscle diameter- tension  curve";
      parameter Real C_tone0 = 0  "[1/(mm Hg*μm) ] Arteriolar smooth muscle activation sensitivity to stress";
      parameter Real C_tone1 = 0 "[Unitles] Arteriolar smooth muscle activation baseline tone factor";
      // parameter Real CAct0 = 1-   10 "[mm Hg*μm ] Arteriolar strength of smooth muscle";
      // parameter Real CAct1 = 0 . 5 - 1 . 3 "[Unitless ] Arteriolar position of peak tension generation";
      // parameter Real CAct2 = 0.1- 1.0 "[Unitless ] Arteriolar width of smooth muscle diameter- tension  curve";
      // parameter Real Ctone0 = 0 - 25 "[1/(mm Hg*μm) ] Arteriolar smooth muscle activation sensitivity to stress";
      // parameter Real Ctone1 = 0 - 25 "[Unitles] Arteriolar smooth muscle activation baseline tone factor";

      constant Real Pa2mmHg = 1/133.32;
      // page 1
      Real P_AB = q_in.pressure*Pa2mmHg "[mmHg] Cerebral arterial pressure ";
      Real P_VB = q_out.pressure*Pa2mmHg "[mmHg] Cerebral venous pressure ";
      // Resistances
      Real R_AtlB = R_AtlB0*(D_AtlB0/D_AtlB)  "[(mmHg*s)/mL] Cerebral arteriolar resistance to flow ";
      Physiolibrary.Types.HydraulicResistance R_AtlB_SI = R_AtlB/Pa2mmHg*1e6;
      // Cerebral arteriole diameter and activation
      Real D_Atl "[mm] Arteriolar diameter ";
      Real A_Atl "[unitless] Arteriolar smooth muscle activation ";
      // Cerebral arteriole tensions
      Real T_TotAtl = T_PassAtl + A_Atl*T_ActAtl__max "[mmHg*mm] Arteriolar total circumferential tension ";
      Real T_PassAtl = T_NColAtl + T_ColAtl "[mmHg*mm] Arteriolar passive circumferential tension ";
      Real T_ActAtl__max = C_Act0*exp(-(D_Atl/D_Atl0 - C_Act1)^2) "[mmHg*mm] Arteriolar maximally active circumferential tension ";
      Real T_NColAtl = t_wall * AE_Ncol * eps_Atl "[mmHg*mm] Arteriolar non-collagen circumferential tension ";
      Real T_ColAtl = t_wall * AE_col * eps_ColAtl__Tot  "[mmHg*mm] Arteriolar collagen circumferential tension ";
      // page 2
      // Cerebral arteriole strains
      Real eps_Atl = (D_Atl - D_Atl0)/D_Atl0 "unitless] Arteriolar strain ";
      Real eps_ColAtl__Tot "[unitless] Arteriolar total collagen strain ";
      Real eps_ColRec "[unitless] Arteriolar collagen recruitment strain ";
      Real eps_Col = (eps_Atl - eps_ColRec)/(eps_ColRec + 1)  "[unitless] Arteriolar single collagen fiber strain ";
      // Cerebral arteriole reference variables and fixed parameters
      Real t_wall = -0.5*D_Atl + sqrt((D_Atl/2)^2 + A_Wall/Modelica.Constants.pi)  "[mm] Arteriolar wall thickness ";

      // MISSING FROM PARAMETER AND VARIABLES LISTS
      Real A_AtlInf = 1/(1 + exp(-(C_tone0*T_TotAtl) + C_tone1));

      // PROBLEMS
      parameter Real D_AtlB0 "??? Shopuld be D_Atl0?"; // read the code
      Real D_AtlB "??? Should be D_Atl??";  // read the code
      // ??? eps_ColAtl__Tot = Int[0 - eps_Atl](eps_Col*(gamma/eps_ColRec)*(eps_ColRec/alpha)^gamma) d eps_ColRec ??? partial Integration?? Really??
      // eps_ColRec - MISING EQUATION???
      equation
        // ADDED resistance equation
        dp = R_AtlB_SI* volumeFlowRate;

        der(D_AtlB) = (P_AB * D_AtlB*0.5 - T_TotAtl)  / tau_DAtl*P_AB;
        der(A_Atl) = (A_AtlInf - A_Atl)/tau_AAtl;

        annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
              coordinateSystem(preserveAspectRatio=false)));
      end CerebralArterioles;

      package dev
        model Carlson2005

        parameter Physiolibrary.Types.Fraction A = 0;

        Real T_total = T_pass + A*T_act_max;
        Real T_pass = C_pass*exp(exp_);
        Real exp_ = Cd_pass*(L/L0 - 1);
        Real T_act_max = C_act*exp(- ( (L/L0 - Cd_act)/Cdd_act)^2);

        Physiolibrary.Types.Pressure P; //= T_total / D * 2;

        Physiolibrary.Types.Pressure Pd;
        parameter Physiolibrary.Types.Time tau = 0.001;

          Modelica.Units.SI.Length L=Modelica.Constants.pi*D;
          Modelica.Units.SI.Length L0=Modelica.Constants.pi*D0;

          Modelica.Units.SI.Diameter D;
          parameter Modelica.Units.SI.Diameter D0=0.0189322;

        //Real C_pass;
        //Real Cd_pass;

        parameter Real C_pass = 2.52 "Fitted to have 2 mmHg @ l=l0, orig 0.459";//0.459;
        parameter Real Cd_pass = 7.7 "Fitted to have compliance of 60 for whole vascular tree (60*0.08 for the test component) at l=l0. Orig 13";
        parameter Real C_act = 2.5405 "(N/m)";
        parameter Real Cd_act = 0.910;
        parameter Real Cdd_act = 0.374;

          parameter Modelica.Units.SI.Length vessel_length=11.3168e-2;
        Physiolibrary.Types.Volume V = vessel_length * Modelica.Constants.pi * (D/2)^2;
        Physiolibrary.Types.Volume V0 = vessel_length * Modelica.Constants.pi * (D0/2)^2;

        Physiolibrary.Types.Fraction ll0 = L/L0;

          Physiolibrary.Types.Volume volume = V;

          Physiolibrary.Types.Volume Vmax = 2*zpv;
          parameter Physiolibrary.Types.Volume zpv = l*Modelica.Constants.pi*(r^2) "Zero-pressure volume" annotation (Dialog(tab = "General", group = "Calculated parameters"));
            parameter Physiolibrary.Types.Volume zpvs = zpv;
          parameter Modelica.Units.SI.Length l=vessel_length "Segmant length"
            annotation (Dialog(tab="General", group="Vessel properties"));
          parameter Modelica.Units.SI.Radius r=D0/2 "Vessel radius"
            annotation (Dialog(tab="General", group="Vessel properties"));
          Physiolibrary.Types.HydraulicCompliance c0 = zpv/p0 "nominal compliance";
          parameter Integer PV_variant = -1;
          Physiolibrary.Types.Pressure u_C;
          Physiolibrary.Types.Pressure u_C2;
          parameter Physiolibrary.Types.Pressure p0 = 665;
          Real tension = u_C*D/2;
          Real s(unit= "m3/Pa") = der(V)/der(P);
          Real s_mmhg_ml(unit = "ml/mmHg") = s*133.32*1000*1000;
          Real target_s = 60*0.08 "total venous compliance times percentage of volume of this particular segment C24";
        equation

        //  der(D)*Pd*tau = ( Pd*D/2 - T_total);
          P = T_total / D * 2;
          der(D) = ( Pd*D/2 - T_total) /( Pd*tau);

        //P = 2*133;
        //D = D0;
        //s_mmhg_ml = 6.18e-2;
        ll0 = time;

              volume = zpv + 2*Vmax/Modelica.Constants.pi*atan(Modelica.Constants.pi*c0/2/Vmax*(u_C2));

            if PV_variant == 0 then
              volume = (u_C) *c0 + zpv;
            elseif PV_variant == 1 then
              tan((volume - zpvs)*Modelica.Constants.pi/(2*Vmax)) = (Modelica.Constants.pi*c0/2/Vmax*u_C);
            elseif PV_variant == 2 then
              // Dan 1
              volume  = Vmax*(tanh(Modelica.Constants.pi/4.*u_C/p0) + 1)/2;
            elseif PV_variant == 3 then
              // Dan 2
              volume = Vmax*(tanh(Modelica.Constants.pi/4.*(exp(u_C/p0)-1)) + 1)/2;
            else
              // default original relation
              volume = zpv + 2*Vmax/Modelica.Constants.pi*atan(Modelica.Constants.pi*c0/2/Vmax*(u_C));
            end if;

          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end Carlson2005;

        model Liang2005
          Real sigma_x;

          parameter Real D_zpv = 5;
          parameter Real f_efs;
          parameter Real f_efs_min;
          Real G_zpv = -18;
          Physiolibrary.Types.Volume zpv;
          parameter Physiolibrary.Types.Time tau = 20;
        equation
          if  f_efs >= f_efs_min then
            sigma_x = G_x * log( f_efs*(t - D_x) - f_efs_min + 1);
          else
            sigma_x = 0;
          end if;

          der(zpv) *tau = sigma_x - zpv;
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end Liang2005;

        model Carlson2005_C24
          extends Carlson2005(D0=0.0189322);
        end Carlson2005_C24;
      end dev;

      model pp_vBC_type
        extends
          ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Auxiliary.PartialSystemicElement;
        parameter Real mu(unit = "J.s.m-3") = 0.004;
        parameter Real rho(unit = "J.s2.m-5") = 1050;
        input Real E(unit = "Pa");
        Real E_m(unit = "Pa");
        input Real l(unit = "m");
        Real length(unit = "m");
        Real h(unit = "m");
        Real thickness(unit = "m");
        input Real r(unit = "m");
        Real radius(unit = "m");
        Real I(unit = "J.s2.m-6");
        Real C(unit = "m6.J-1");
        Real R(unit = "J.s.m-6");
        Real R_v(unit = "J.s.m-6");
        parameter Real a(unit = "1") = 0.2802;
        parameter Real b(unit = "m-1") = -505.3;
        parameter Real c(unit = "1") = 0.1324;
        parameter Real d(unit = "m-1") = -11.14;
      //   Real v(unit = "m3.s-1", start = 0.0);
        Real I_e(unit = "J.s2.m-6");

        Real u_C(unit = "Pa", start = 0.0);
        Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b port_b annotation (
            Placement(transformation(extent={{90,-10},{110,10}}), iconTransformation(
                extent={{90,-10},{110,10}})));
        Real u_out(unit = "Pa") = port_b.pressure;

        Real v_out(unit="m3.s-1") = -port_b.q "same as v_T";
        input Real R_T(unit = "J.s.m-6");
        input Real C_T(unit = "m6.J-1");

        Real u(unit = "Pa");
        Physiolibrary.Types.Volume zpv = l*Modelica.Constants.pi*(r^2) "Zero-pressure volume scaled by the phi input";
      initial equation
        volume = zpv;
      equation

            h = r*(a*exp(b*r)+c*exp(d*r));
            I = rho*l/(Modelica.Constants.pi*(r)^2);
            I_e = I*1e-6;
            C = 2*Modelica.Constants.pi*(r^3) *l/(E*h);
            R = 8*mu*l/(Modelica.Constants.pi*(r^4));
            R_v = 0.01/C;
            length = l;
            E_m = E;
            radius = r;
            thickness = h;

            der(q_in) = (p_in-u-R*q_in)/I;
            der(volume) = (q_in-q_out);
            u = u_C+R_v*(q_in-q_out);
            der(q_out) = (u-p_out-3.0*R_T*q_out)/I_e;

        volume = u_C*C + zpv;

        annotation (Icon(graphics={
              Rectangle(
                extent={{-20,20},{20,0}},
                lineThickness=0.5,
                fillColor={244,125,35},
                fillPattern=FillPattern.Solid,
                pattern=LinePattern.None),
              Line(
                points={{-100,0},{-60,0}},
                color={28,108,200},
                arrow={Arrow.None,Arrow.Open}),
              Line(
                points={{40,0},{80,0}},
                color={28,108,200},
                arrow={Arrow.None,Arrow.Open})}));
      end pp_vBC_type;

      model Heart_ADAN_orig
        main_ADAN_86_cellml_converted.Parameters_cellml.Parameters_Heart Parameters_Heart1
          annotation (Placement(transformation(extent={{-100,100},{-80,80}})));
       input Real t(unit = "s");
        Real mt(unit = "s");
        Real e_a(unit = "1");
        Real e_v(unit = "1");
        Real T(unit = "s");
        Real t_ac(unit = "1");
        Real t_ar(unit = "1");
        Real T_ac(unit = "1");
        Real T_ar(unit = "1");
        Real T_vc(unit = "1");
        Real T_vr(unit = "1");
        Real CV_ra(unit = "UnitValve");
        Real CV_rv(unit = "UnitValve");
        Real CV_la(unit = "UnitValve");
        Real CV_lv(unit = "UnitValve");
        Real E_lv_A(unit = "J.m-6");
        Real E_lv_B(unit = "J.m-6");
        Real E_la_A(unit = "J.m-6");
        Real E_la_B(unit = "J.m-6");
        Real E_rv_A(unit = "J.m-6");
        Real E_rv_B(unit = "J.m-6");
        Real E_ra_A(unit = "J.m-6");
        Real E_ra_B(unit = "J.m-6");
        Real q_ra_0(unit = "m3");
        Real q_rv_0(unit = "m3");
        Real q_la_0(unit = "m3");
        Real q_lv_0(unit = "m3");
        Real u_ra(unit = "Pa");
        Real u_rv(unit = "Pa");
        Real u_la(unit = "Pa");
        Real u_lv(unit = "Pa");
        input Real u_root(unit = "Pa");
        input Real u_par(unit = "Pa");
        Real v_ra(unit = "m3.s-1");
        Real v_rv(unit = "m3.s-1");
        Real v_la(unit = "m3.s-1");
        Real v_lv(unit = "m3.s-1");
        input Real v_sup_venacava(unit = "m3.s-1");
        input Real v_inf_venacava(unit = "m3.s-1");
        input Real v_pvn(unit = "m3.s-1");
        Real q_ra(unit = "m3", start = 20.0e-6);
        Real q_rv(unit = "m3", start = 500.0e-6);
        Real q_la(unit = "m3", start = 20.0e-6);
        Real q_lv(unit = "m3", start = 500.0e-6);
        Real v_aux(unit = "m3.s-1");
        Physiolibrary.Types.RealIO.FrequencyInput frequency annotation (Placement(
              transformation(extent={{-126,-20},{-86,20}}), iconTransformation(extent=
                 {{-170,-20},{-130,20}})));

        Real int_f;
      equation
        T = Parameters_Heart1.T;
        t_ac = Parameters_Heart1.t_ac;
        t_ar = Parameters_Heart1.t_ar;
        T_ac = Parameters_Heart1.T_ac;
        T_ar = Parameters_Heart1.T_ar;
        T_vc = Parameters_Heart1.T_vc;
        T_vr = Parameters_Heart1.T_vr;
        CV_ra = Parameters_Heart1.CV_ra;
        CV_rv = Parameters_Heart1.CV_rv;
        CV_la = Parameters_Heart1.CV_la;
        CV_lv = Parameters_Heart1.CV_lv;
        E_lv_A = Parameters_Heart1.E_lv_A;
        E_lv_B = Parameters_Heart1.E_lv_B;
        E_la_A = Parameters_Heart1.E_la_A;
        E_la_B = Parameters_Heart1.E_la_B;
        E_rv_A = Parameters_Heart1.E_rv_A;
        E_rv_B = Parameters_Heart1.E_rv_B;
        E_ra_A = Parameters_Heart1.E_ra_A;
        E_ra_B = Parameters_Heart1.E_ra_B;
        q_ra_0 = Parameters_Heart1.q_ra_0;
        q_rv_0 = Parameters_Heart1.q_rv_0;
        q_la_0 = Parameters_Heart1.q_la_0;
        q_lv_0 = Parameters_Heart1.q_lv_0;

        der(int_f) = frequency;
        mt = int_f - floor(int_f);

      //       mt = t-T*floor(t/T);

            e_a = noEvent(if (mt >= 0) and (mt <= (t_ar+T_ar)*T-T) then
                    0.5*(1+cos(Modelica.Constants.pi*(mt+T-t_ar*T)/(T_ar*T)))
                elseif  (mt > (t_ar+T_ar)*T-T) and (mt <= t_ac*T) then
                    0
                elseif  (mt > t_ac*T) and (mt <= (t_ac+T_ac)*T) then
                    0.5*(1-cos(Modelica.Constants.pi*(mt-t_ac*T)/(T_ac*T)))
                else
                    0.5*(1+cos(Modelica.Constants.pi*(mt-t_ar*T)/(T_ar*T))));
                     /*  (mt > (t_ac+T_ac)*T) and (mt <= T) */

            e_v = noEvent(if (mt >= 0) and (mt <= T_vc*T) then
                    0.5*(1-cos(Modelica.Constants.pi*mt/(T_vc*T)))
                elseif  (mt > T_vc*T) and (mt <= (T_vc+T_vr)*T) then
                    0.5*(1+cos(Modelica.Constants.pi*(mt-T_vc*T)/(T_vr*T)))
                else
                    0);
                     /*  (mt > (T_vc+T_vr)*T) and (mt < T) */

            v_ra = noEvent(if u_ra >= u_rv then
                    CV_ra*sqrt(u_ra-u_rv)
                else
                    0);
                     /*  u_ra < u_rv */

            v_rv = noEvent(if u_rv >= u_par then
                    CV_rv*sqrt(u_rv-u_par)
                else
                    0);
                     /*  u_rv < u_par */

            v_la = noEvent(if u_la >= u_lv then
                    CV_la*sqrt(u_la-u_lv)
                else
                    0);
                     /*  u_la < u_lv */

            v_lv = noEvent(if u_lv >= u_root then
                    CV_lv*sqrt(u_lv-u_root)
                else
                    0);
                     /*  u_lv < u_root */

            u_ra = (e_a*E_ra_A+E_ra_B)*(q_ra-q_ra_0);
            u_rv = (e_v*E_rv_A+E_rv_B)*(q_rv-q_rv_0);
            u_la = (e_a*E_la_A+E_la_B)*(q_la-q_la_0);
            u_lv = (e_v*E_lv_A+E_lv_B)*(q_lv-q_lv_0);

            der(q_ra) = v_sup_venacava+v_inf_venacava-v_ra;
            der(q_rv) = v_ra-v_rv;
            der(q_la) = v_pvn-v_la;
            der(q_lv) = v_la-v_lv;

            v_aux = noEvent(if (mt >= 0.0) and (mt <= 0.03) then
                    0.0
                elseif  (mt > 0.03) and (mt <= 0.046) then
                    11860.05e-6*mt-343.94e-6
                elseif  (mt > 0.046) and (mt <= 0.057) then
                    9479.17e-6*mt-234.42e-6
                elseif  (mt > 0.057) and (mt <= 0.071) then
                    6653.03e-6*mt-73.33e-6
                elseif  (mt > 0.071) and (mt <= 0.082) then
                    4787.18e-6*mt+59.14e-6
                elseif  (mt > 0.082) and (mt <= 0.088) then
                    3997.84e-6*mt+123.87e-6
                elseif  (mt > 0.088) and (mt <= 0.097) then
                    2912.72e-6*mt+219.36e-6
                elseif  (mt > 0.097) and (mt <= 0.105) then
                    2333.06e-6*mt+275.59e-6
                elseif  (mt > 0.105) and (mt <= 0.112) then
                    1416.84e-6*mt+371.79e-6
                elseif  (mt > 0.112) and (mt <= 0.129) then
                    567.9e-6*mt+466.87e-6
                elseif  (mt > 0.129) and (mt <= 0.139) then
                    -64.04e-6*mt+548.39e-6
                elseif  (mt > 0.139) and (mt <= 0.149) then
                    -450.47e-6*mt+602.11e-6
                elseif  (mt >= 0.149) and (mt <= 0.157) then
                    -645.15e-6*mt+631.11e-6
                elseif  (mt > 0.157) and (mt <= 0.165) then
                    -1252.17e-6*mt+726.42e-6
                elseif  (mt > 0.165) and (mt <= 0.175) then
                    -1914.56e-6*mt+835.71e-6
                elseif  (mt > 0.175) and (mt <= 0.212) then
                    -2666.76e-6*mt+967.34e-6
                elseif  (mt > 0.212) and (mt <= 0.246) then
                    -2981.21e-6*mt+1034.01e-6
                elseif  (mt > 0.246) and (mt <= 0.295) then
                    -2075.32e-6*mt+811.16e-6
                elseif  (mt > 0.295) and (mt <= 0.373) then
                    -1583.28e-6*mt+666.01e-6
                elseif  (mt > 0.373) and (mt <= 0.41) then
                    -5855.6e-6*mt+2259.58e-6
                elseif  (mt > 0.41) and (mt <= 0.43) then
                    7060.64e-6*mt-3036.08e-6
                else
                    0.0);
                     /*  (mt > 0.43) and (mt <= 1.0) */

      end Heart_ADAN_orig;

      model Heart_ADAN_Heart
        Subsystems.Systemic.ADAN86ArterialTree.Parameters_cellml.Parameters_Heart
          Parameters_Heart1
          annotation (Placement(transformation(extent={{-100,100},{-80,80}})));
        input Real t(unit = "s");
        Real mt(unit = "s");
        Real e_a(unit = "1");
        Real e_v(unit = "1");
        Real T(unit = "s");
        Real t_ac(unit = "1");
        Real t_ar(unit = "1");
        Real T_ac(unit = "1");
        Real T_ar(unit = "1");
        Real T_vc(unit = "1");
        Real T_vr(unit = "1");
        Real R_trv(unit = "J.s.m-6");
        Real R_puv(unit = "J.s.m-6");
        Real R_miv(unit = "J.s.m-6");
        Real R_aov(unit = "J.s.m-6");
        Real B_trv(unit = "J.s2.m-9");
        Real B_puv(unit = "J.s2.m-9");
        Real B_miv(unit = "J.s2.m-9");
        Real B_aov(unit = "J.s2.m-9");
        Real L_trv(unit = "J.s2.m-6");
        Real L_puv(unit = "J.s2.m-6");
        Real L_miv(unit = "J.s2.m-6");
        Real L_aov(unit = "J.s2.m-6");
        Real E_lv_A(unit = "J.m-6");
        Real E_lv_B(unit = "J.m-6");
        Real E_la_A(unit = "J.m-6");
        Real E_la_B(unit = "J.m-6");
        Real E_rv_A(unit = "J.m-6");
        Real E_rv_B(unit = "J.m-6");
        Real E_ra_A(unit = "J.m-6");
        Real E_ra_B(unit = "J.m-6");
        Real q_ra_0(unit = "m3");
        Real q_rv_0(unit = "m3");
        Real q_la_0(unit = "m3");
        Real q_lv_0(unit = "m3");
        Real u_ra(unit = "Pa");
        Real u_rv(unit = "Pa");
        Real u_la(unit = "Pa");
        Real u_lv(unit = "Pa");
        input Real u_sas(unit = "Pa");
        input Real u_par(unit = "Pa");
        Real v_trv(unit = "m3.s-1", start = 0);
        Real v_puv(unit = "m3.s-1", start = 0);
        Real v_miv(unit = "m3.s-1", start = 0);
        Real v_aov(unit = "m3.s-1", start = 0);
        input Real v_sup_venacava(unit = "m3.s-1");
        input Real v_inf_venacava(unit = "m3.s-1");
        input Real v_pvn(unit = "m3.s-1");
        Real q_ra(unit = "m3", start = 20.0e-6);
        Real q_rv(unit = "m3", start = 500.0e-6);
        Real q_la(unit = "m3", start = 20.0e-6);
        Real q_lv(unit = "m3", start = 500.0e-6);
        Physiolibrary.Types.RealIO.FrequencyInput frequency annotation (Placement(
              transformation(extent={{-126,-20},{-86,20}}), iconTransformation(extent={{-120,
                  -20},{-80,20}})));

        Real int_f;
        Physiolibrary.Types.RealIO.PressureInput thoracic_pressure annotation (Placement(
              transformation(extent={{-28,-120},{12,-80}}), iconTransformation(extent={{-20,
                  -120},{20,-80}})));
      equation
        T = Parameters_Heart1.T;
        t_ac = Parameters_Heart1.t_ac;
        t_ar = Parameters_Heart1.t_ar;
        T_ac = Parameters_Heart1.T_ac;
        T_ar = Parameters_Heart1.T_ar;
        T_vc = Parameters_Heart1.T_vc;
        T_vr = Parameters_Heart1.T_vr;
        R_trv = Parameters_Heart1.R_trv;
        R_puv = Parameters_Heart1.R_puv;
        R_miv = Parameters_Heart1.R_miv;
        R_aov = Parameters_Heart1.R_aov;
        B_trv = Parameters_Heart1.B_trv;
        B_puv = Parameters_Heart1.B_puv;
        B_miv = Parameters_Heart1.B_miv;
        B_aov = Parameters_Heart1.B_aov;
        L_trv = Parameters_Heart1.L_trv;
        L_puv = Parameters_Heart1.L_puv;
        L_miv = Parameters_Heart1.L_miv;
        L_aov = Parameters_Heart1.L_aov;
        E_lv_A = Parameters_Heart1.E_lv_A;
        E_lv_B = Parameters_Heart1.E_lv_B;
        E_la_A = Parameters_Heart1.E_la_A;
        E_la_B = Parameters_Heart1.E_la_B;
        E_rv_A = Parameters_Heart1.E_rv_A;
        E_rv_B = Parameters_Heart1.E_rv_B;
        E_ra_A = Parameters_Heart1.E_ra_A;
        E_ra_B = Parameters_Heart1.E_ra_B;
        q_ra_0 = Parameters_Heart1.q_ra_0;
        q_rv_0 = Parameters_Heart1.q_rv_0;
        q_la_0 = Parameters_Heart1.q_la_0;
        q_lv_0 = Parameters_Heart1.q_lv_0;

        der(int_f) = frequency;

        mt = int_f - floor(int_f);
      //   when int_f > 1 then
      //     reinit(int_f, 0);
      //   end when;
      //  mt = int_f;

      //       mt = t-T*floor(t/T);

            e_a = if (mt >= 0) and (mt <= (t_ar+T_ar)*T-T) then
                    0.5*(1+cos(Modelica.Constants.pi*(mt+T-t_ar*T)/(T_ar*T)))
                elseif  (mt > (t_ar+T_ar)*T-T) and (mt <= t_ac*T) then
                    0
                elseif  (mt > t_ac*T) and (mt <= (t_ac+T_ac)*T) then
                    0.5*(1-cos(Modelica.Constants.pi*(mt-t_ac*T)/(T_ac*T)))
                else
                    0.5*(1+cos(Modelica.Constants.pi*(mt-t_ar*T)/(T_ar*T)));
                     /*  (mt > (t_ac+T_ac)*T) and (mt <= T) */

            e_v = if (mt >= 0) and (mt <= T_vc*T) then
                    0.5*(1-cos(Modelica.Constants.pi*mt/(T_vc*T)))
                elseif  (mt > T_vc*T) and (mt <= (T_vc+T_vr)*T) then
                    0.5*(1+cos(Modelica.Constants.pi*(mt-T_vc*T)/(T_vr*T)))
                else
                    0;
                     /*  (mt > (T_vc+T_vr)*T) and (mt < T) */

            der(v_trv) = if u_ra >= u_rv then
                    (u_ra-u_rv-(R_trv+B_trv*abs(v_trv))*v_trv)/L_trv
                else
                    -(R_trv+B_trv*abs(v_trv))*v_trv/L_trv;
                     /*  u_ra < u_rv */

            der(v_puv) = if u_rv >= u_par then
                    (u_rv-u_par-(R_puv+B_puv*abs(v_puv))*v_puv)/L_puv
                else
                    -(R_puv+B_puv*abs(v_puv))*v_puv/L_puv;
                     /*  u_rv < u_par */

            der(v_miv) = if u_la >= u_lv then
                    (u_la-u_lv-(R_miv+B_miv*abs(v_miv))*v_miv)/L_miv
                else
                    -(R_miv+B_miv*abs(v_miv))*v_miv/L_miv;
                     /*  u_la < u_lv */

            der(v_aov) = if u_lv >= u_sas then
                    (u_lv-u_sas-(R_aov+B_aov*abs(v_aov))*v_aov)/L_aov
                else
                    -(R_aov+B_aov*abs(v_aov))*v_aov/L_aov;
                     /*  u_lv < u_sas */

            u_ra = (e_a*E_ra_A+E_ra_B)*(q_ra-q_ra_0) + thoracic_pressure;
            u_rv = (e_v*E_rv_A+E_rv_B)*(q_rv-q_rv_0) + thoracic_pressure;
            u_la = (e_a*E_la_A+E_la_B)*(q_la-q_la_0) + thoracic_pressure;
            u_lv = (e_v*E_lv_A+E_lv_B)*(q_lv-q_lv_0) + thoracic_pressure;

            der(q_ra) = v_sup_venacava+v_inf_venacava-v_trv;
            der(q_rv) = v_trv-v_puv;
            der(q_la) = v_pvn-v_miv;
            der(q_lv) = v_miv-v_aov;

      end Heart_ADAN_Heart;

      model Parameters_Pulmonary
        parameter Real C_pas(unit = "m6.J-1") = 0.00135e-6;
        parameter Real C_pat(unit = "m6.J-1") = 0.0285e-6;
        parameter Real C_par(unit = "m6.J-1") = 0.0232e-6;
        parameter Real C_pcp(unit = "m6.J-1") = 0.0684e-6;
        parameter Real C_pvn(unit = "m6.J-1") = 0.15376e-6;
        parameter Real C_pvc(unit = "m6.J-1") = 0.01125e-6;
        parameter Real R_pas(unit = "J.s.m-6") = 0.26664e+6;
        parameter Real R_pat(unit = "J.s.m-6") = 1.3332e+6;
        parameter Real R_par(unit = "J.s.m-6") = 6.666e+6;
        parameter Real R_pcp(unit = "J.s.m-6") = 33.33e+6;
        parameter Real R_psh(unit = "J.s.m-6") = 701.11e+6;
        parameter Real R_pvn(unit = "J.s.m-6") = 0.8e+6;
        parameter Real I_pas(unit = "J.s2.m-6") = 0.00693e+6;
        parameter Real I_pat(unit = "J.s2.m-6") = 0.226644e+6;
        parameter Real I_par(unit = "J.s2.m-6") = 1e-12;
        parameter Real I_pcp(unit = "J.s2.m-6") = 1e-12;
        parameter Real I_pvn(unit = "J.s2.m-6") = 1e-12;
        parameter Real I_psh(unit = "J.s2.m-6") = 1e-12;
      equation

      end Parameters_Pulmonary;

      model Pulmonary
        ADAN_main.Components.Obsolete.Parameters_Pulmonary_7af
          Parameters_Pulmonary1
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
        input Real t(unit = "s");
        Real C_pas(unit = "m6.J-1");
        Real C_pat(unit = "m6.J-1");
        Real C_par(unit = "m6.J-1");
        Real C_pcp(unit = "m6.J-1");
        Real C_pvn(unit = "m6.J-1");
        Real C_pvc(unit = "m6.J-1");
        Real R_pas(unit = "J.s.m-6");
        Real R_pat(unit = "J.s.m-6");
        Real R_par(unit = "J.s.m-6");
        Real R_pcp(unit = "J.s.m-6");
        Real R_psh(unit = "J.s.m-6");
        Real R_pvn(unit = "J.s.m-6");
        Real I_pas(unit = "J.s2.m-6");
        Real I_pat(unit = "J.s2.m-6");
        Real I_par(unit = "J.s2.m-6");
        Real I_pcp(unit = "J.s2.m-6");
        Real I_pvn(unit = "J.s2.m-6");
        Real I_psh(unit = "J.s2.m-6");
        Real u_pas(unit = "Pa", start = 4000.0);
        Real u_pat(unit = "Pa", start = 0.0);
        Real u_par(unit = "Pa", start = 0.0);
        Real u_pcp(unit = "Pa", start = 0.0);
        Real u_pvn(unit = "Pa", start = 0.0);
        input Real u_la(unit = "Pa");
        Real v_pas(unit = "m3.s-1", start = 0.0);
        Real v_pat(unit = "m3.s-1", start = 0.0);
        Real v_par(unit = "m3.s-1", start = 0.0);
        Real v_pcp(unit = "m3.s-1", start = 0.0);
        Real v_psh(unit = "m3.s-1", start = 0.0);
        Real v_pvn(unit = "m3.s-1", start = 0.0);
        input Real v_puv(unit = "m3.s-1");
      equation
        C_pas = 0.00135e-6;
        C_pat = 0.0285e-6;
        C_par = 0.0232e-6;
        C_pcp = 0.0684e-6;
        C_pvn = 0.15376e-6;
        C_pvc = 0.01125e-6;
        R_pas = 0.26664e+6;
        R_pat = 1.3332e+6;
        R_par = 6.666e+6;
        R_pcp = 33.33e+6;
        R_psh = 701.11e+6;
        R_pvn = 0.8e+6;
        I_pas = 0.00693e+6;
        I_pat = 0.226644e+6;
        I_par = 1e-12;
        I_pcp = 1e-12;
        I_pvn = 1e-12;
        I_psh = 1e-12;

            der(u_pas) = (v_puv-v_pas)/C_pas;
            der(u_pat) = (v_pas-v_pat)/C_pat;
            der(u_par) = (v_pat-v_psh-v_par)/C_par;
            der(u_pcp) = (v_par-v_pcp)/C_pcp;
            der(u_pvn) = (v_pcp+v_psh-v_pvn)/C_pvn;
            der(v_pas) = (u_pas-u_pat-v_pas*R_pas)/I_pas;
            der(v_pat) = (u_pat-u_par-v_pat*R_pat)/I_pat;
            der(v_par) = (u_par-u_pcp-v_par*R_par)/I_par;
            der(v_pcp) = (u_pcp-u_pvn-v_pcp*R_pcp)/I_pcp;
            der(v_pvn) = (u_pvn-u_la-v_pvn*R_pvn)/I_pvn;
            der(v_psh) = (u_par-u_pvn-v_psh*R_psh)/I_psh;

      end Pulmonary;

      model Parameters_Pulmonary_7af
        parameter Real C_pas(unit = "m6.J-1") = 0.00135e-6;
        parameter Real C_pat(unit = "m6.J-1") = 0.0285e-6;
        parameter Real C_par(unit = "m6.J-1") = 0.0232e-6;
        parameter Real C_pcp(unit = "m6.J-1") = 0.0684e-6;
        parameter Real C_pvn(unit = "m6.J-1") = 0.15376e-6;
        parameter Real C_pvc(unit = "m6.J-1") = 0.01125e-6;
        parameter Real R_pas(unit = "J.s.m-6") = 0.26664e+6;
        parameter Real R_pat(unit = "J.s.m-6") = 1.3332e+6;
        parameter Real R_par(unit = "J.s.m-6") = 6.666e+6;
        parameter Real R_pcp(unit = "J.s.m-6") = 33.33e+6;
        parameter Real R_psh(unit = "J.s.m-6") = 701.11e+6;
        parameter Real R_pvn(unit = "J.s.m-6") = 0.8e+6;
        parameter Real I_pas(unit = "J.s2.m-6") = 0.00693e+6;
        parameter Real I_pat(unit = "J.s2.m-6") = 0.226644e+6;
        parameter Real I_par(unit = "J.s2.m-6") = 1e-12;
        parameter Real I_pcp(unit = "J.s2.m-6") = 1e-12;
        parameter Real I_pvn(unit = "J.s2.m-6") = 1e-12;
        parameter Real I_psh(unit = "J.s2.m-6") = 1e-12;
      equation

      end Parameters_Pulmonary_7af;

      model HeartOrig
        ADAN_main.Components.Subsystems.Heart.Auxiliary.Parameters_Heart
          Parameters_Heart1
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
        input Real t(unit = "s");
        Real mt(unit = "s");
        Real mta(unit = "s");
        Real T(unit = "s");
        Real CQ_trv(unit = "UnitValve");
        Real CQ_puv(unit = "UnitValve");
        Real CQ_miv(unit = "UnitValve");
        Real CQ_aov(unit = "UnitValve");
        Real q_ra_0(unit = "m3");
        Real q_rv_0(unit = "m3");
        Real q_la_0(unit = "m3");
        Real q_lv_0(unit = "m3");
        Real E_lv_max(unit = "J.m-6");
        Real E_lv_min(unit = "J.m-6");
        Real E_la_max(unit = "J.m-6");
        Real E_la_min(unit = "J.m-6");
        Real E_rv_max(unit = "J.m-6");
        Real E_rv_min(unit = "J.m-6");
        Real E_ra_max(unit = "J.m-6");
        Real E_ra_min(unit = "J.m-6");
        Real tau_1_lv(unit = "1");
        Real tau_2_lv(unit = "1");
        Real tau_1_la(unit = "1");
        Real tau_2_la(unit = "1");
        Real tau_1_rv(unit = "1");
        Real tau_2_rv(unit = "1");
        Real tau_1_ra(unit = "1");
        Real tau_2_ra(unit = "1");
        Real m_1_lv(unit = "1");
        Real m_2_lv(unit = "1");
        Real m_1_la(unit = "1");
        Real m_2_la(unit = "1");
        Real m_1_rv(unit = "1");
        Real m_2_rv(unit = "1");
        Real m_1_ra(unit = "1");
        Real m_2_ra(unit = "1");
        Real g_1_lv(unit = "1");
        Real g_2_lv(unit = "1");
        Real g_1_la(unit = "1");
        Real g_2_la(unit = "1");
        Real g_1_rv(unit = "1");
        Real g_2_rv(unit = "1");
        Real g_1_ra(unit = "1");
        Real g_2_ra(unit = "1");
        Real t_onset_a(unit = "1");
        Real E_lv(unit = "J.m-6");
        Real E_la(unit = "J.m-6");
        Real E_rv(unit = "J.m-6");
        Real E_ra(unit = "J.m-6");
        Real H_la(unit = "1");
        Real H_lv(unit = "1");
        Real H_ra(unit = "1");
        Real H_rv(unit = "1");
        Real u_ra(unit = "Pa");
        Real u_rv(unit = "Pa");
        Real u_la(unit = "Pa");
        Real u_lv(unit = "Pa");
        input Real u_sas(unit = "Pa");
        input Real u_par(unit = "Pa");
        Real v_trv(unit = "m3.s-1");
        Real v_puv(unit = "m3.s-1");
        Real v_miv(unit = "m3.s-1");
        Real v_aov(unit = "m3.s-1");
        input Real v_sup_venacava(unit = "m3.s-1");
        input Real v_inf_venacava(unit = "m3.s-1");
        input Real v_pvn(unit = "m3.s-1");
        Real q_lv(unit = "m3", start = 600.0e-6);
        Real q_rv(unit = "m3", start = 600.0e-6);
        Real q_la(unit = "m3", start = 20.0e-6);
        Real q_ra(unit = "m3", start = 20.0e-6);
        Physiolibrary.Types.Volume stressed_volume = q_la + q_lv + q_ra + q_rv;
        Physiolibrary.Types.Volume zp_volume = q_la_0 + q_lv_0 + q_ra_0 + q_rv_0;
        Physiolibrary.Types.Volume total_volume = stressed_volume + zp_volume;
      equation
        T = Parameters_Heart1.T;
        CQ_trv = Parameters_Heart1.CQ_trv;
        CQ_puv = Parameters_Heart1.CQ_puv;
        CQ_miv = Parameters_Heart1.CQ_miv;
        CQ_aov = Parameters_Heart1.CQ_aov;
        E_lv_max = Parameters_Heart1.E_lv_max;
        E_lv_min = Parameters_Heart1.E_lv_min;
        E_la_max = Parameters_Heart1.E_la_max;
        E_la_min = Parameters_Heart1.E_la_min;
        E_rv_max = Parameters_Heart1.E_rv_max;
        E_rv_min = Parameters_Heart1.E_rv_min;
        E_ra_max = Parameters_Heart1.E_ra_max;
        E_ra_min = Parameters_Heart1.E_ra_min;
        tau_1_lv = Parameters_Heart1.tau_1_lv;
        tau_2_lv = Parameters_Heart1.tau_2_lv;
        tau_1_la = Parameters_Heart1.tau_1_la;
        tau_2_la = Parameters_Heart1.tau_2_la;
        tau_1_rv = Parameters_Heart1.tau_1_rv;
        tau_2_rv = Parameters_Heart1.tau_2_rv;
        tau_1_ra = Parameters_Heart1.tau_1_ra;
        tau_2_ra = Parameters_Heart1.tau_2_ra;
        m_1_lv = Parameters_Heart1.m_1_lv;
        m_2_lv = Parameters_Heart1.m_2_lv;
        m_1_la = Parameters_Heart1.m_1_la;
        m_2_la = Parameters_Heart1.m_2_la;
        m_1_rv = Parameters_Heart1.m_1_rv;
        m_2_rv = Parameters_Heart1.m_2_rv;
        m_1_ra = Parameters_Heart1.m_1_ra;
        m_2_ra = Parameters_Heart1.m_2_ra;
        t_onset_a = Parameters_Heart1.t_onset_a;
        q_ra_0 = Parameters_Heart1.q_ra_0;
        q_rv_0 = Parameters_Heart1.q_rv_0;
        q_la_0 = Parameters_Heart1.q_la_0;
        q_lv_0 = Parameters_Heart1.q_lv_0;

            H_lv =Interfaces.pow((tau_1_lv + tau_2_lv)/(tau_1_lv + tau_1_lv),
          m_1_lv)/(Interfaces.pow((tau_1_lv + tau_2_lv)/(tau_1_lv + tau_1_lv),
          m_1_lv) + 1)*1/(Interfaces.pow((tau_1_lv + tau_2_lv)/(tau_2_lv + tau_2_lv),
          m_2_lv) + 1);
            H_la =Interfaces.pow((tau_1_la + tau_2_la)/(tau_1_la + tau_1_la),
          m_1_la)/(Interfaces.pow((tau_1_la + tau_2_la)/(tau_1_la + tau_1_la),
          m_1_la) + 1)*1/(Interfaces.pow((tau_1_la + tau_2_la)/(tau_2_la + tau_2_la),
          m_2_la) + 1);
            H_rv =Interfaces.pow((tau_1_rv + tau_2_rv)/(tau_1_rv + tau_1_rv),
          m_1_rv)/(Interfaces.pow((tau_1_rv + tau_2_rv)/(tau_1_rv + tau_1_rv),
          m_1_rv) + 1)*1/(Interfaces.pow((tau_1_rv + tau_2_rv)/(tau_2_rv + tau_2_rv),
          m_2_rv) + 1);
            H_ra =Interfaces.pow((tau_1_ra + tau_2_ra)/(tau_1_ra + tau_1_ra),
          m_1_ra)/(Interfaces.pow((tau_1_ra + tau_2_ra)/(tau_1_ra + tau_1_ra),
          m_1_ra) + 1)*1/(Interfaces.pow((tau_1_ra + tau_2_ra)/(tau_2_ra + tau_2_ra),
          m_2_ra) + 1);
            E_lv = (E_lv_max-E_lv_min)*g_1_lv/((g_1_lv+1)*(g_2_lv+1)*H_lv)+E_lv_min;
            g_1_lv =Interfaces.pow(mt/(tau_1_lv*T), m_1_lv);
            g_2_lv =Interfaces.pow(mt/(tau_2_lv*T), m_2_lv);
            E_la = (E_la_max-E_la_min)*g_1_la/((g_1_la+1)*(g_2_la+1)*H_la)+E_la_min;
            g_1_la =Interfaces.pow(mta/(tau_1_la*T), m_1_la);
            g_2_la =Interfaces.pow(mta/(tau_2_la*T), m_2_la);
            E_rv = (E_rv_max-E_rv_min)*g_1_rv/((g_1_rv+1)*(g_2_rv+1)*H_rv)+E_rv_min;
            g_1_rv =Interfaces.pow(mt/(tau_1_rv*T), m_1_rv);
            g_2_rv =Interfaces.pow(mt/(tau_2_rv*T), m_2_rv);
            E_ra = (E_ra_max-E_ra_min)*g_1_ra/((g_1_ra+1)*(g_2_ra+1)*H_ra)+E_ra_min;
            g_1_ra =Interfaces.pow(mta/(tau_1_ra*T), m_1_ra);
            g_2_ra =Interfaces.pow(mta/(tau_2_ra*T), m_2_ra);

            mt = t-T*floor(t/T);
            mta = t-t_onset_a*T-T*floor((t-t_onset_a*T)/T);

            v_trv = noEvent(if u_ra >= u_rv then
                    CQ_trv*sqrt(u_ra-u_rv)
                else
                    0.0);
                     /*  u_ra < u_rv */

            v_puv = noEvent(if u_rv >= u_par then
                    CQ_puv*sqrt(u_rv-u_par)
                else
                    0.0);
                     /*  u_rv < u_par */

            v_miv = noEvent(if u_la >= u_lv then
                    CQ_miv*sqrt(u_la-u_lv)
                else
                    0.0);
                     /*  u_la < u_lv */

            v_aov = noEvent(if u_lv >= u_sas then
                    CQ_aov*sqrt(u_lv-u_sas)
                else
                    0.0);
                     /*  u_lv < u_sas */

            u_ra = E_ra*(q_ra-q_ra_0);
            u_rv = E_rv*(q_rv-q_rv_0);
            u_la = E_la*(q_la-q_la_0);
            u_lv = E_lv*(q_lv-q_lv_0);

            der(q_ra) = v_sup_venacava+v_inf_venacava-v_trv;
            der(q_rv) = v_trv-v_puv;
            der(q_la) = v_pvn-v_miv;
            der(q_lv) = v_miv-v_aov;

      end HeartOrig;

      model Heart_b580e
        ADAN_main.Components.Obsolete.AdanVenousRed._b580e.Parameters_Venous_cellml.Parameters_Heart
          Parameters_Heart1
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
        input Real t(unit = "s");
        Real mt(unit = "s");
        Real e_a(unit = "1");
        Real e_v(unit = "1");
        Real T(unit = "s");
        Real t_ac(unit = "1");
        Real t_ar(unit = "1");
        Real T_ac(unit = "1");
        Real T_ar(unit = "1");
        Real T_vc(unit = "1");
        Real T_vr(unit = "1");
        Real R_trv(unit = "J.s.m-6");
        Real R_puv(unit = "J.s.m-6");
        Real R_miv(unit = "J.s.m-6");
        Real R_aov(unit = "J.s.m-6");
        Real B_trv(unit = "J.s2.m-9");
        Real B_puv(unit = "J.s2.m-9");
        Real B_miv(unit = "J.s2.m-9");
        Real B_aov(unit = "J.s2.m-9");
        Real L_trv(unit = "J.s2.m-6");
        Real L_puv(unit = "J.s2.m-6");
        Real L_miv(unit = "J.s2.m-6");
        Real L_aov(unit = "J.s2.m-6");
        Real E_lv_A(unit = "J.m-6");
        Real E_lv_B(unit = "J.m-6");
        Real E_la_A(unit = "J.m-6");
        Real E_la_B(unit = "J.m-6");
        Real E_rv_A(unit = "J.m-6");
        Real E_rv_B(unit = "J.m-6");
        Real E_ra_A(unit = "J.m-6");
        Real E_ra_B(unit = "J.m-6");
        Real q_ra_0(unit = "m3");
        Real q_rv_0(unit = "m3");
        Real q_la_0(unit = "m3");
        Real q_lv_0(unit = "m3");
        Real u_ra(unit = "Pa");
        Real u_rv(unit = "Pa");
        Real u_la(unit = "Pa");
        Real u_lv(unit = "Pa");
        input Real u_root(unit = "Pa");
        input Real u_pas(unit = "Pa");
        Real v_trv(unit = "m3.s-1", start = 0);
        Real v_puv(unit = "m3.s-1", start = 0);
        Real v_miv(unit = "m3.s-1", start = 0);
        Real v_aov(unit = "m3.s-1", start = 0);
        input Real v_sup_venacava(unit = "m3.s-1");
        input Real v_inf_venacava(unit = "m3.s-1");
        input Real v_pvn(unit = "m3.s-1");
        Real q_ra(unit = "m3", start = 20.0e-6);
        Real q_rv(unit = "m3", start = 500.0e-6);
        Real q_la(unit = "m3", start = 20.0e-6);
        Real q_lv(unit = "m3", start = 500.0e-6);
        Physiolibrary.Types.Volume stressed_volume = q_la + q_lv + q_ra + q_rv;
        Physiolibrary.Types.Volume zp_volume = q_la_0 + q_lv_0 + q_ra_0 + q_rv_0;
        Physiolibrary.Types.Volume total_volume = stressed_volume + zp_volume;

      equation
        T = Parameters_Heart1.T;
        t_ac = Parameters_Heart1.t_ac;
        t_ar = Parameters_Heart1.t_ar;
        T_ac = Parameters_Heart1.T_ac;
        T_ar = Parameters_Heart1.T_ar;
        T_vc = Parameters_Heart1.T_vc;
        T_vr = Parameters_Heart1.T_vr;
        R_trv = Parameters_Heart1.R_trv;
        R_puv = Parameters_Heart1.R_puv;
        R_miv = Parameters_Heart1.R_miv;
        R_aov = Parameters_Heart1.R_aov;
        B_trv = Parameters_Heart1.B_trv;
        B_puv = Parameters_Heart1.B_puv;
        B_miv = Parameters_Heart1.B_miv;
        B_aov = Parameters_Heart1.B_aov;
        L_trv = Parameters_Heart1.L_trv;
        L_puv = Parameters_Heart1.L_puv;
        L_miv = Parameters_Heart1.L_miv;
        L_aov = Parameters_Heart1.L_aov;
        E_lv_A = Parameters_Heart1.E_lv_A;
        E_lv_B = Parameters_Heart1.E_lv_B;
        E_la_A = Parameters_Heart1.E_la_A;
        E_la_B = Parameters_Heart1.E_la_B;
        E_rv_A = Parameters_Heart1.E_rv_A;
        E_rv_B = Parameters_Heart1.E_rv_B;
        E_ra_A = Parameters_Heart1.E_ra_A;
        E_ra_B = Parameters_Heart1.E_ra_B;
        q_ra_0 = Parameters_Heart1.q_ra_0;
        q_rv_0 = Parameters_Heart1.q_rv_0;
        q_la_0 = Parameters_Heart1.q_la_0;
        q_lv_0 = Parameters_Heart1.q_lv_0;

            mt = t-T*floor(t/T);

            e_a = noEvent(if mt <= (t_ar+T_ar)*T-T then
                    0.5*(1+cos(Modelica.Constants.pi*(mt+T-t_ar*T)/(T_ar*T)))
                elseif  mt <= t_ac*T then
                    0
                elseif  mt <= (t_ac+T_ac)*T then
                    0.5*(1-cos(Modelica.Constants.pi*(mt-t_ac*T)/(T_ac*T)))
                else
                    0.5*(1+cos(Modelica.Constants.pi*(mt-t_ar*T)/(T_ar*T))));
                     /*  mt <= T */

            e_v = noEvent(if mt <= T_vc*T then
                    0.5*(1-cos(Modelica.Constants.pi*mt/(T_vc*T)))
                elseif  mt <= (T_vc+T_vr)*T then
                    0.5*(1+cos(Modelica.Constants.pi*(mt-T_vc*T)/(T_vr*T)))
                else
                    0);
                     /*  mt < T */

            der(v_trv) = noEvent(if u_ra >= u_rv then
                    (u_ra-u_rv-(R_trv+B_trv*abs(v_trv))*v_trv)/L_trv
                else
                    -(R_trv+B_trv*abs(v_trv))*v_trv/L_trv);
                     /*  u_ra < u_rv */

            der(v_puv) = noEvent(if u_rv >= u_pas then
                    (u_rv-u_pas-(R_puv+B_puv*abs(v_puv))*v_puv)/L_puv
                else
                    -(R_puv+B_puv*abs(v_puv))*v_puv/L_puv);
                     /*  u_rv < u_pas */

            der(v_miv) = noEvent(if u_la >= u_lv then
                    (u_la-u_lv-(R_miv+B_miv*abs(v_miv))*v_miv)/L_miv
                else
                    -(R_miv+B_miv*abs(v_miv))*v_miv/L_miv);
                     /*  u_la < u_lv */

            der(v_aov) = noEvent(if u_lv >= u_root then
                    (u_lv-u_root-(R_aov+B_aov*abs(v_aov))*v_aov)/L_aov
                else
                    -(R_aov+B_aov*abs(v_aov))*v_aov/L_aov);
                     /*  u_lv < u_root */

            u_ra = (e_a*E_ra_A+E_ra_B)*(q_ra-q_ra_0);
            u_rv = (e_v*E_rv_A+E_rv_B)*(q_rv-q_rv_0);
            u_la = (e_a*E_la_A+E_la_B)*(q_la-q_la_0);
            u_lv = (e_v*E_lv_A+E_lv_B)*(q_lv-q_lv_0);

            der(q_ra) = v_sup_venacava+v_inf_venacava-v_trv;
            der(q_rv) = v_trv-v_puv;
            der(q_la) = v_pvn-v_miv;
            der(q_lv) = v_miv-v_aov;

      end Heart_b580e;

      model Systemic_eq
        extends ADAN_main.Components.Subsystems.Systemic.SystemicAV;
        replaceable ADAN_main.Components.Interfaces.Pq_terminator_v pq_terminator_v(
            v=-v_aov)
          annotation (Placement(transformation(extent={{-298,78},{-278,98}})));
        replaceable ADAN_main.Components.Interfaces.Pq_terminator_p
          pq_terminator_sup_vc(u=u_ra)
          annotation (Placement(transformation(extent={{380,156},{360,176}})));
        replaceable ADAN_main.Components.Interfaces.Pq_terminator_p
          pq_terminator_inf_vc(u=u_ra)
          annotation (Placement(transformation(extent={{500,-12},{480,8}})));
        input Real u_ra(unit = "Pa");
        input Real v_aov(unit = "m3.s-1");

        Subsystems.Systemic.Vessel_modules.CollapsibleVesselSegment
          collapsibleVesselSegment(PR1LL=66.6611937075)
          annotation (Placement(transformation(extent={{328,156},{348,176}})));
        Subsystems.Systemic.Vessel_modules.CollapsibleVesselSegment
          collapsibleVesselSegment1(PR1LL=66.6611937075)
          annotation (Placement(transformation(extent={{440,-12},{460,8}})));
      equation
        connect(ascending_aorta_A.port_a, pq_terminator_v.port_a) annotation (Line(
            points={{-263,87.5},{-270,87.5},{-270,88},{-278,88}},
            color={0,0,0},
            thickness=1));
        connect(superior_vena_cava_C2.port_b, collapsibleVesselSegment.q_in)
          annotation (Line(
            points={{317,165.5},{318,165.5},{318,166},{328,166}},
            color={0,0,0},
            thickness=1));
        connect(collapsibleVesselSegment.q_out, pq_terminator_sup_vc.port_a)
          annotation (Line(
            points={{348,166},{360,166}},
            color={0,0,0},
            thickness=1));
        connect(inferior_vena_cava_C8.port_b, collapsibleVesselSegment1.q_in)
          annotation (Line(
            points={{429,-2.5},{434,-2.5},{434,-2},{440,-2}},
            color={0,0,0},
            thickness=1));
        connect(collapsibleVesselSegment1.q_out, pq_terminator_inf_vc.port_a)
          annotation (Line(
            points={{460,-2},{480,-2}},
            color={0,0,0},
            thickness=1));
      end Systemic_eq;

      model Systemic_con
        extends ADAN_main.Components.Subsystems.Systemic.SystemicAV;
        replaceable ADAN_main.Components.Interfaces.Pq_terminator_v pq_terminator_v(
            v=-v_aov)
          annotation (Placement(transformation(extent={{-298,78},{-278,98}})));
        replaceable ADAN_main.Components.Interfaces.Pq_terminator_p
          pq_terminator_sup_vc(u=u_ra)
          annotation (Placement(transformation(extent={{380,160},{360,180}})));
        replaceable ADAN_main.Components.Interfaces.Pq_terminator_p
          pq_terminator_inf_vc(u=u_ra)
          annotation (Placement(transformation(extent={{480,-10},{460,10}})));
        Real u_ra(unit = "Pa") = port_b.pressure;
        Real v_aov(unit = "m3.s-1") = port_a.q;

        Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_a annotation (
            Placement(transformation(extent={{-330,70},{-310,90}}),
              iconTransformation(extent={{-330,-10},{-310,10}})));
        Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b port_b annotation (
            Placement(transformation(extent={{450,70},{470,90}}), iconTransformation(
                extent={{430,-10},{450,10}})));

      equation
        port_a.pressure = pq_terminator_v.u;
        port_b.q = -pq_terminator_inf_vc.v - pq_terminator_sup_vc.v;

        connect(ascending_aorta_A.port_a, pq_terminator_v.port_a) annotation (Line(
            points={{-263,87.5},{-270,87.5},{-270,88},{-278,88}},
            color={0,0,0},
            thickness=1));

        connect(superior_vena_cava_C2.port_b, pq_terminator_sup_vc.port_a)
          annotation (Line(
            points={{317,165.5},{340.5,165.5},{340.5,170},{360,170}},
            color={0,0,0},
            thickness=1));
        connect(inferior_vena_cava_C8.port_b, pq_terminator_inf_vc.port_a)
          annotation (Line(
            points={{429,-2.5},{444.5,-2.5},{444.5,0},{460,0}},
            color={0,0,0},
            thickness=1));
      end Systemic_con;

      package AdanVenousRed
        package _b580e "Commit to 4ac repository from May 2019"
        package Parameters_Venous_cellml

          model Parameters_Heart
            parameter Real T(unit = "s") = 1.0;
            parameter Real t_ac(unit = "1") = 0.80;
            parameter Real t_ar(unit = "1") = 0.97;
            parameter Real T_ac(unit = "1") = 0.17;
            parameter Real T_ar(unit = "1") = 0.17;
            parameter Real T_vc(unit = "1") = 0.3;
            parameter Real T_vr(unit = "1") = 0.15;
            parameter Real R_trv(unit = "J.s.m-6") = 0.13332e+6;
            parameter Real R_puv(unit = "J.s.m-6") = 0.19998e+6;
            parameter Real R_miv(unit = "J.s.m-6") = 0.13332e+6;
            parameter Real R_aov(unit = "J.s.m-6") = 0.19998e+6;
            parameter Real B_trv(unit = "J.s2.m-9") = 0.0013332e+12;
            parameter Real B_puv(unit = "J.s2.m-9") = 0.0019998e+12;
            parameter Real B_miv(unit = "J.s2.m-9") = 0.0013332e+12;
            parameter Real B_aov(unit = "J.s2.m-9") = 0.0019998e+12;
            parameter Real L_trv(unit = "J.s2.m-6") = 0.06666e+6;
            parameter Real L_puv(unit = "J.s2.m-6") = 0.06666e+6;
            parameter Real L_miv(unit = "J.s2.m-6") = 0.06666e+6;
            parameter Real L_aov(unit = "J.s2.m-6") = 0.06666e+6;
            parameter Real E_ra_A(unit = "J.m-6") = 7.998e+6;
            parameter Real E_ra_B(unit = "J.m-6") = 9.331e+6;
            parameter Real E_rv_A(unit = "J.m-6") = 73.315e+6;
            parameter Real E_rv_B(unit = "J.m-6") = 6.665e+6;
            parameter Real E_la_A(unit = "J.m-6") = 9.331e+6;
            parameter Real E_la_B(unit = "J.m-6") = 11.997e+6;
            parameter Real E_lv_A(unit = "J.m-6") = 366.575e+6;
            parameter Real E_lv_B(unit = "J.m-6") = 10.664e+6;
            parameter Real q_ra_0(unit = "m3") = 4.0e-6;
            parameter Real q_rv_0(unit = "m3") = 10.0e-6;
            parameter Real q_la_0(unit = "m3") = 4.0e-6;
            parameter Real q_lv_0(unit = "m3") = 5.0e-6;
          equation

          end Parameters_Heart;

          model Parameters_Coronary
            parameter Real C_corepi(unit = "m6.J-1") = 0.000555;
            parameter Real C_corint(unit = "m6.J-1") = 0.0009751;
            parameter Real C_corcap(unit = "m6.J-1") = 0.00705;
            parameter Real C_corvns(unit = "m6.J-1") = 0.018377;
            parameter Real R_corepi(unit = "J.s.m-6") = 704.0e+6;
            parameter Real R_corint(unit = "J.s.m-6") = 1350.0e+6;
            parameter Real R_corcap(unit = "J.s.m-6") = 564.0e+6;
            parameter Real R_corvns(unit = "J.s.m-6") = 197.0e+6;
            parameter Real I_corepi(unit = "J.s2.m-6") = 1e-6;
            parameter Real I_corint(unit = "J.s2.m-6") = 1e-6;
            parameter Real I_corcap(unit = "J.s2.m-6") = 1e-6;
            parameter Real I_corvns(unit = "J.s2.m-6") = 1e-6;
          equation

          end Parameters_Coronary;

          model Parameters_Systemic
            parameter Real C_svl(unit = "m6.J-1") = 0.0037509e-6;
            parameter Real C_svn(unit = "m6.J-1") = 0.1125281e-6;
            parameter Real C_svc(unit = "m6.J-1") = 0.0375094e-6;
            parameter Real C_ivl(unit = "m6.J-1") = 0.0112528e-6;
            parameter Real C_ivn(unit = "m6.J-1") = 0.5626407e-6;
            parameter Real C_ivc(unit = "m6.J-1") = 0.1125281e-6;
            parameter Real R_svl(unit = "J.s.m-6") = 18.662e+6;
            parameter Real R_svn(unit = "J.s.m-6") = 3.999e+6;
            parameter Real R_svc(unit = "J.s.m-6") = 0.06665e+6;
            parameter Real R_ivl(unit = "J.s.m-6") = 5.332e+6;
            parameter Real R_ivn(unit = "J.s.m-6") = 1.1997e+6;
            parameter Real R_ivc(unit = "J.s.m-6") = 0.06665e+6;
            parameter Real I_svl(unit = "J.s2.m-6") = 0.1333e+6;
            parameter Real I_svn(unit = "J.s2.m-6") = 0.06665e+6;
            parameter Real I_svc(unit = "J.s2.m-6") = 0.06665e+6;
            parameter Real I_ivl(unit = "J.s2.m-6") = 0.1333e+6;
            parameter Real I_ivn(unit = "J.s2.m-6") = 0.06665e+6;
            parameter Real I_ivc(unit = "J.s2.m-6") = 0.06665e+6;
            parameter Real r_ascending_aorta_A(unit = "m") = 15.642e-03;
            parameter Real r_ascending_aorta_B(unit = "m") = 15.08e-03;
            parameter Real r_ascending_aorta_C(unit = "m") = 14.5305e-03;
            parameter Real r_ascending_aorta_D(unit = "m") = 13.914e-03;
            parameter Real r_aortic_arch_C2(unit = "m") = 13.3364e-03;
            parameter Real r_brachiocephalic_trunk_C4(unit = "m") = 6.41887e-03;
            parameter Real r_aortic_arch_C46(unit = "m") = 12.76710e-03;
            parameter Real r_aortic_arch_C64(unit = "m") = 12.42880e-03;
            parameter Real r_aortic_arch_C94(unit = "m") = 11.7401e-03;
            parameter Real r_thoracic_aorta_C96(unit = "m") = 10.4579e-03;
            parameter Real r_thoracic_aorta_C100(unit = "m") = 10.2897e-03;
            parameter Real r_thoracic_aorta_C104(unit = "m") = 10.0681e-03;
            parameter Real r_thoracic_aorta_C108(unit = "m") = 9.87279e-03;
            parameter Real r_thoracic_aorta_C112(unit = "m") = 8.47543e-03;
            parameter Real r_abdominal_aorta_C114(unit = "m") = 7.51533e-03;
            parameter Real r_abdominal_aorta_C136(unit = "m") = 7.42666e-03;
            parameter Real r_abdominal_aorta_C164(unit = "m") = 7.29199e-03;
            parameter Real r_abdominal_aorta_C176(unit = "m") = 7.18902e-03;
            parameter Real r_abdominal_aorta_C188(unit = "m") = 6.79934e-03;
            parameter Real r_abdominal_aorta_C192(unit = "m") = 6.12422e-03;
            parameter Real r_posterior_intercostal_T1_R98(unit = "m") = 1.4e-03;
            parameter Real r_posterior_intercostal_T1_L102(unit = "m") = 1.4e-03;
            parameter Real r_posterior_intercostal_T2_R106(unit = "m") = 1.55e-03;
            parameter Real r_posterior_intercostal_T2_L110(unit = "m") = 1.55e-03;
            parameter Real r_celiac_trunk_C116(unit = "m") = 3.29653e-03;
            parameter Real r_splenic_T2_C118(unit = "m") = 2.16682e-03;
            parameter Real r_left_gastric_T3_C120(unit = "m") = 1.50666e-03;
            parameter Real r_splenic_T2_C122(unit = "m") = 2.16682e-03;
            parameter Real r_dorsal_pancreatic_T1_C124(unit = "m") = 0.558491e-03;
            parameter Real r_splenic_T2_C126(unit = "m") = 2.16682e-03;
            parameter Real r_common_hepatic_C128(unit = "m") = 2.68614e-03;
            parameter Real r_hepatic_artery_proper_C130(unit = "m") = 1.77555e-03;
            parameter Real r_hepatic_artery_proper_left_branch_C132(unit = "m") = 1.1663e-03;
            parameter Real r_hepatic_artery_proper_right_branch_C134(unit = "m") = 1.42068e-03;
            parameter Real r_superior_mesenteric_T4_C138(unit = "m") = 3.72737e-03;
            parameter Real r_middle_colic_T8_C140(unit = "m") = 1.425e-03;
            parameter Real r_superior_mesenteric_T4_C142(unit = "m") = 3.40146e-03;
            parameter Real r_jejunal_3_T10_C144(unit = "m") = 1.58037e-03;
            parameter Real r_superior_mesenteric_T4_C146(unit = "m") = 3.06914e-03;
            parameter Real r_jejunal_6_T11_C148(unit = "m") = 1.58037e-03;
            parameter Real r_superior_mesenteric_T4_C150(unit = "m") = 2.85201e-03;
            parameter Real r_ileocolic_T9_C152(unit = "m") = 2.0e-03;
            parameter Real r_superior_mesenteric_T4_C154(unit = "m") = 2.69257e-03;
            parameter Real r_ileal_4_T12_C156(unit = "m") = 1.8015e-03;
            parameter Real r_superior_mesenteric_T4_C158(unit = "m") = 2.49385e-03;
            parameter Real r_ileal_6_T13_C160(unit = "m") = 1.80150e-03;
            parameter Real r_superior_mesenteric_T4_C162(unit = "m") = 2.18233e-03;
            parameter Real r_renal_L166(unit = "m") = 2.73574e-03;
            parameter Real r_renal_anterior_branch_L168(unit = "m") = 2.48193e-03;
            parameter Real r_inferior_segmental_T5_L170(unit = "m") = 1.92732e-03;
            parameter Real r_superior_segmental_T4_L172(unit = "m") = 1.92732e-03;
            parameter Real r_renal_posterior_branch_T3_L174(unit = "m") = 1.59319e-03;
            parameter Real r_renal_R178(unit = "m") = 2.96767e-03;
            parameter Real r_renal_anterior_branch_R180(unit = "m") = 2.48193e-03;
            parameter Real r_superior_segmental_T4_R182(unit = "m") = 1.92732e-03;
            parameter Real r_inferior_segmental_T5_R184(unit = "m") = 1.92732e-03;
            parameter Real r_renal_posterior_branch_T3_R186(unit = "m") = 1.59319e-03;
            parameter Real r_inferior_mesenteric_T5_C190(unit = "m") = 2.07748e-03;
            parameter Real r_common_iliac_R216(unit = "m") = 4.30633e-03;
            parameter Real r_internal_iliac_T1_R218(unit = "m") = 2.81829e-03;
            parameter Real r_external_iliac_R220(unit = "m") = 3.28821e-03;
            parameter Real r_femoral_R222(unit = "m") = 3.17347e-03;
            parameter Real r_profundus_T2_R224(unit = "m") = 2.14445e-03;
            parameter Real r_femoral_R226(unit = "m") = 2.89103e-03;
            parameter Real r_popliteal_R228(unit = "m") = 2.51554e-03;
            parameter Real r_anterior_tibial_T3_R230(unit = "m") = 1.1663e-03;
            parameter Real r_popliteal_R232(unit = "m") = 2.35852e-03;
            parameter Real r_tibiofibular_trunk_R234(unit = "m") = 2.34646e-03;
            parameter Real r_posterior_tibial_T4_R236(unit = "m") = 1.22936e-03;
            parameter Real r_common_iliac_L194(unit = "m") = 4.28142e-03;
            parameter Real r_internal_iliac_T1_L196(unit = "m") = 2.81829e-03;
            parameter Real r_external_iliac_L198(unit = "m") = 3.28821e-03;
            parameter Real r_femoral_L200(unit = "m") = 3.17347e-03;
            parameter Real r_profundus_T2_L202(unit = "m") = 2.14445e-03;
            parameter Real r_femoral_L204(unit = "m") = 2.89103e-03;
            parameter Real r_popliteal_L206(unit = "m") = 2.51554e-03;
            parameter Real r_anterior_tibial_T3_L208(unit = "m") = 1.1663e-03;
            parameter Real r_popliteal_L210(unit = "m") = 2.35852e-03;
            parameter Real r_tibiofibular_trunk_L212(unit = "m") = 2.34646e-03;
            parameter Real r_posterior_tibial_T4_L214(unit = "m") = 1.22936e-03;
            parameter Real r_subclavian_R28(unit = "m") = 4.52027e-03;
            parameter Real r_subclavian_R30(unit = "m") = 3.32268e-03;
            parameter Real r_axillary_R32(unit = "m") = 2.18463e-03;
            parameter Real r_brachial_R34(unit = "m") = 1.96732e-03;
            parameter Real r_ulnar_T2_R36(unit = "m") = 1.408e-03;
            parameter Real r_common_interosseous_R38(unit = "m") = 0.959006e-03;
            parameter Real r_posterior_interosseous_T3_R40(unit = "m") = 0.675992e-03;
            parameter Real r_ulnar_T2_R42(unit = "m") = 1.408e-03;
            parameter Real r_radial_T1_R44(unit = "m") = 1.378e-03;
            parameter Real r_subclavian_L66(unit = "m") = 3.99235e-03;
            parameter Real r_subclavian_L78(unit = "m") = 2.90824e-03;
            parameter Real r_axillary_L80(unit = "m") = 2.18463e-03;
            parameter Real r_brachial_L82(unit = "m") = 1.96732e-03;
            parameter Real r_ulnar_T2_L84(unit = "m") = 1.408e-03;
            parameter Real r_common_interosseous_L86(unit = "m") = 0.959006e-03;
            parameter Real r_posterior_interosseous_T3_L88(unit = "m") = 0.675992e-03;
            parameter Real r_ulnar_T2_L90(unit = "m") = 1.408e-03;
            parameter Real r_radial_T1_L92(unit = "m") = 1.378e-03;
            parameter Real r_common_carotid_R6_A(unit = "m") = 4.43053e-03;
            parameter Real r_common_carotid_R6_B(unit = "m") = 4.137e-03;
            parameter Real r_common_carotid_R6_C(unit = "m") = 3.64938e-03;
            parameter Real r_internal_carotid_R8_A(unit = "m") = 2.53763e-03;
            parameter Real r_internal_carotid_R8_B(unit = "m") = 2.04793e-03;
            parameter Real r_internal_carotid_R8_C(unit = "m") = 1.56726e-03;
            parameter Real r_external_carotid_T2_R26(unit = "m") = 2.26547e-03;
            parameter Real r_common_carotid_L48_A(unit = "m") = 4.36635e-03;
            parameter Real r_common_carotid_L48_B(unit = "m") = 4.12756e-03;
            parameter Real r_common_carotid_L48_C(unit = "m") = 3.92047e-03;
            parameter Real r_common_carotid_L48_D(unit = "m") = 3.57978e-03;
            parameter Real r_internal_carotid_L50_A(unit = "m") = 2.53763e-03;
            parameter Real r_internal_carotid_L50_B(unit = "m") = 2.04793e-03;
            parameter Real r_internal_carotid_L50_C(unit = "m") = 1.56726e-03;
            parameter Real r_external_carotid_T2_L62(unit = "m") = 2.26547e-03;
            parameter Real r_vertebral_L2(unit = "m") = 0.133527e-2;
            parameter Real r_vertebral_R272(unit = "m") = 0.133527e-2;
            parameter Real r_basilar_C4(unit = "m") = 0.172394e-2;
            parameter Real r_posterior_cerebral_precommunicating_part_L6(unit = "m") = 0.0816459e-2;
            parameter Real r_posterior_cerebral_precommunicating_part_R204(unit = "m") = 0.0816459e-2;
            parameter Real r_posterior_communicating_L8(unit = "m") = 0.0494463e-2;
            parameter Real r_posterior_communicating_R206(unit = "m") = 0.0494463e-2;
            parameter Real r_posterior_cerebral_postcommunicating_part_L12(unit = "m") = 0.0869072e-2;
            parameter Real r_posterior_cerebral_postcommunicating_part_R208(unit = "m") = 0.0869072e-2;
            parameter Real r_occipital_lateral_L14(unit = "m") = 0.064999e-2;
            parameter Real r_occipital_lateral_R210(unit = "m") = 0.0649994e-2;
            parameter Real r_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "m") = 0.06e-2;
            parameter Real r_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "m") = 0.06e-2;
            parameter Real r_occipital_lateral_L18(unit = "m") = 0.0649994e-2;
            parameter Real r_occipital_lateral_R214(unit = "m") = 0.0649994e-2;
            parameter Real r_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "m") = 0.028e-2;
            parameter Real r_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "m") = 0.028e-2;
            parameter Real r_occipital_lateral_L22(unit = "m") = 0.0649994e-2;
            parameter Real r_occipital_lateral_R218(unit = "m") = 0.0649994e-2;
            parameter Real r_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "m") = 0.0375006e-2;
            parameter Real r_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "m") = 0.0375006e-2;
            parameter Real r_medial_occipital_L26(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_R222(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_dorsal_branch_to_corpus_callosum_L28(unit = "m") = 0.0349979e-2;
            parameter Real r_medial_occipital_dorsal_branch_to_corpus_callosum_R224(unit = "m") = 0.0349979e-2;
            parameter Real r_pericallosal_parieto_occipital_branch_T60_L30(unit = "m") = 0.0421522e-2;
            parameter Real r_pericallosal_parieto_occipital_branch_T124_R226(unit = "m") = 0.0421522e-2;
            parameter Real r_pericallosal_L32(unit = "m") = 0.0800314e-2;
            parameter Real r_pericallosal_R228(unit = "m") = 0.0800314e-2;
            parameter Real r_pericallosal_precuneal_branch_T61_L34(unit = "m") = 0.0477132e-2;
            parameter Real r_pericallosal_precuneal_branch_T125_R230(unit = "m") = 0.0477132e-2;
            parameter Real r_pericallosal_L36(unit = "m") = 0.0800314e-2;
            parameter Real r_pericallosal_R232(unit = "m") = 0.0800314e-2;
            parameter Real r_anterior_cerebral_L38(unit = "m") = 0.0965045e-2;
            parameter Real r_anterior_cerebral_R234(unit = "m") = 0.0965045e-2;
            parameter Real r_distal_medial_striate_T44_L40(unit = "m") = 0.027251e-2;
            parameter Real r_distal_medial_striate_T109_R236(unit = "m") = 0.027251e-2;
            parameter Real r_anterior_cerebral_L42(unit = "m") = 0.0965045e-2;
            parameter Real r_anterior_cerebral_R238(unit = "m") = 0.0965045e-2;
            parameter Real r_anterior_communicating_C44(unit = "m") = 0.0656645e-2;
            parameter Real r_anterior_cerebral_L110(unit = "m") = 0.0965045e-2;
            parameter Real r_anterior_cerebral_R46(unit = "m") = 0.0965045e-2;
            parameter Real r_internal_carotid_L112(unit = "m") = 0.132843e-2;
            parameter Real r_internal_carotid_R48(unit = "m") = 0.132843e-2;
            parameter Real r_middle_cerebral_L114(unit = "m") = 0.104132e-2;
            parameter Real r_middle_cerebral_R52(unit = "m") = 0.104132e-2;
            parameter Real r_anterior_choroidal_T34_L116(unit = "m") = 0.0519606e-2;
            parameter Real r_anterior_choroidal_T98_R54(unit = "m") = 0.0519606e-2;
            parameter Real r_middle_cerebral_L118(unit = "m") = 0.104132e-2;
            parameter Real r_middle_cerebral_R56(unit = "m") = 0.104132e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_L120(unit = "m") = 0.0877201e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_R58(unit = "m") = 0.0877201e-2;
            parameter Real r_lateral_frontobasal_T45_L122(unit = "m") = 0.0385346e-2;
            parameter Real r_lateral_frontobasal_T110_R60(unit = "m") = 0.0385346e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_L124(unit = "m") = 0.0877201e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_R62(unit = "m") = 0.0877201e-2;
            parameter Real r_prefrontal_T65_L126(unit = "m") = 0.0480986e-2;
            parameter Real r_prefrontal_T130_R64(unit = "m") = 0.0480986e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_L128(unit = "m") = 0.0877201e-2;
            parameter Real r_middle_cerebral_superior_terminal_branch_R66(unit = "m") = 0.0877201e-2;
            parameter Real r_artery_of_precentral_sulcus_T38_L130(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_precentral_sulcus_T103_R68(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_central_sulcus_T36_L132(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_central_sulcus_T101_R70(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_precentral_sulcus_T38_L134(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_precentral_sulcus_T103_R72(unit = "m") = 0.0480986e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L136(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R74(unit = "m") = 0.0816459e-2;
            parameter Real r_polar_temporal_T63_L138(unit = "m") = 0.0309894e-2;
            parameter Real r_polar_temporal_T127_R76(unit = "m") = 0.0309894e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L140(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R78(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "m") = 0.0442556e-2;
            parameter Real r_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "m") = 0.0442556e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L144(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R82(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_middle_temporal_branch_T57_L146(unit = "m") = 0.046174e-2;
            parameter Real r_middle_cerebral_middle_temporal_branch_T121_R84(unit = "m") = 0.046174e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L148(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R86(unit = "m") = 0.0816459e-2;
            parameter Real r_artery_of_postcentral_sulcus_T37_L150(unit = "m") = 0.0480986e-2;
            parameter Real r_artery_of_postcentral_sulcus_T102_R88(unit = "m") = 0.0480986e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L152(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R90(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_posterior_temporal_branch_T58_L154(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporal_branch_T122_R92(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "m") = 0.0500255e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L160(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R98(unit = "m") = 0.0816459e-2;
            parameter Real r_anterior_parietal_T35_L162(unit = "m") = 0.0442556e-2;
            parameter Real r_anterior_parietal_T100_R100(unit = "m") = 0.0442556e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_L164(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_inferior_terminal_branch_R102(unit = "m") = 0.0816459e-2;
            parameter Real r_middle_cerebral_branch_to_angular_gyrus_T56_L166(unit = "m") = 0.0558491e-2;
            parameter Real r_middle_cerebral_branch_to_angular_gyrus_T120_R104(unit = "m") = 0.0558491e-2;
            parameter Real r_posterior_parietal_T64_L168(unit = "m") = 0.0519606e-2;
            parameter Real r_posterior_parietal_T129_R106(unit = "m") = 0.0519606e-2;
            parameter Real r_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "m") = 0.0558491e-2;
            parameter Real r_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "m") = 0.0558491e-2;
            parameter Real r_callosomarginal_L172(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_R240(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "m") = 0.0465585e-2;
            parameter Real r_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "m") = 0.0465585e-2;
            parameter Real r_callosomarginal_L176(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_R244(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "m") = 0.0521563e-2;
            parameter Real r_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "m") = 0.0521563e-2;
            parameter Real r_callosomarginal_L180(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_R248(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_cingular_branch_T40_L182(unit = "m") = 0.0475194e-2;
            parameter Real r_callosomarginal_cingular_branch_T105_R250(unit = "m") = 0.0475194e-2;
            parameter Real r_callosomarginal_L184(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_R252(unit = "m") = 0.0623142e-2;
            parameter Real r_callosomarginal_paracentral_branch_T42_L186(unit = "m") = 0.0475194e-2;
            parameter Real r_callosomarginal_paracentral_branch_T107_R254(unit = "m") = 0.0475194e-2;
            parameter Real r_medial_occipital_L188(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_R256(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_occipitotemporal_branch_T52_L190(unit = "m") = 0.0349979e-2;
            parameter Real r_medial_occipital_occipitotemporal_branch_T80_R258(unit = "m") = 0.0349979e-2;
            parameter Real r_medial_occipital_L192(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_R260(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_parieto_occipital_branch_T54_L194(unit = "m") = 0.0500001e-2;
            parameter Real r_medial_occipital_parieto_occipital_branch_T118_R262(unit = "m") = 0.0500001e-2;
            parameter Real r_medial_occipital_parietal_branch_T53_L196(unit = "m") = 0.0295002e-2;
            parameter Real r_medial_occipital_parietal_branch_T81_R264(unit = "m") = 0.0295002e-2;
            parameter Real r_medial_occipital_parieto_occipital_branch_T54_L198(unit = "m") = 0.0500001e-2;
            parameter Real r_medial_occipital_parieto_occipital_branch_T118_R266(unit = "m") = 0.0500001e-2;
            parameter Real r_medial_occipital_L200(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_R268(unit = "m") = 0.0795007e-2;
            parameter Real r_medial_occipital_calcarine_branch_T51_L202(unit = "m") = 0.0349979e-2;
            parameter Real r_medial_occipital_calcarine_branch_T79_R270(unit = "m") = 0.0349979e-2;
            parameter Real l_ascending_aorta_A(unit = "m") = 15.3234e-03;
            parameter Real l_ascending_aorta_B(unit = "m") = 14.796e-03;
            parameter Real l_ascending_aorta_C(unit = "m") = 14.796e-03;
            parameter Real l_ascending_aorta_D(unit = "m") = 14.796e-03;
            parameter Real l_aortic_arch_C2(unit = "m") = 14.796e-03;
            parameter Real l_brachiocephalic_trunk_C4(unit = "m") = 47.3822e-03;
            parameter Real l_aortic_arch_C46(unit = "m") = 9.60849e-03;
            parameter Real l_aortic_arch_C64(unit = "m") = 6.97955e-03;
            parameter Real l_aortic_arch_C94(unit = "m") = 43.2111e-03;
            parameter Real l_thoracic_aorta_C96(unit = "m") = 9.89803e-03;
            parameter Real l_thoracic_aorta_C100(unit = "m") = 7.88038e-03;
            parameter Real l_thoracic_aorta_C104(unit = "m") = 15.5561e-03;
            parameter Real l_thoracic_aorta_C108(unit = "m") = 5.32705e-03;
            parameter Real l_thoracic_aorta_C112(unit = "m") = 121.566e-03;
            parameter Real l_abdominal_aorta_C114(unit = "m") = 3.24767e-03;
            parameter Real l_abdominal_aorta_C136(unit = "m") = 13.9886e-03;
            parameter Real l_abdominal_aorta_C164(unit = "m") = 4.31913e-03;
            parameter Real l_abdominal_aorta_C176(unit = "m") = 11.9773e-03;
            parameter Real l_abdominal_aorta_C188(unit = "m") = 54.0907e-03;
            parameter Real l_abdominal_aorta_C192(unit = "m") = 42.231e-03;
            parameter Real l_posterior_intercostal_T1_R98(unit = "m") = 197.232e-03;
            parameter Real l_posterior_intercostal_T1_L102(unit = "m") = 178.519e-03;
            parameter Real l_posterior_intercostal_T2_R106(unit = "m") = 201.883e-03;
            parameter Real l_posterior_intercostal_T2_L110(unit = "m") = 185.547e-03;
            parameter Real l_celiac_trunk_C116(unit = "m") = 16.9374e-03;
            parameter Real l_splenic_T2_C118(unit = "m") = 3.9576e-03;
            parameter Real l_left_gastric_T3_C120(unit = "m") = 94.8344e-03;
            parameter Real l_splenic_T2_C122(unit = "m") = 2.79812e-03;
            parameter Real l_dorsal_pancreatic_T1_C124(unit = "m") = 33.4687e-03;
            parameter Real l_splenic_T2_C126(unit = "m") = 63.2749e-03;
            parameter Real l_common_hepatic_C128(unit = "m") = 69.3076e-03;
            parameter Real l_hepatic_artery_proper_C130(unit = "m") = 16.8059e-03;
            parameter Real l_hepatic_artery_proper_left_branch_C132(unit = "m") = 164.224e-03;
            parameter Real l_hepatic_artery_proper_right_branch_C134(unit = "m") = 80.0632e-03;
            parameter Real l_superior_mesenteric_T4_C138(unit = "m") = 49.5492e-03;
            parameter Real l_middle_colic_T8_C140(unit = "m") = 116.298e-03;
            parameter Real l_superior_mesenteric_T4_C142(unit = "m") = 35.1664e-03;
            parameter Real l_jejunal_3_T10_C144(unit = "m") = 47.6944e-03;
            parameter Real l_superior_mesenteric_T4_C146(unit = "m") = 32.2488e-03;
            parameter Real l_jejunal_6_T11_C148(unit = "m") = 63.8535e-03;
            parameter Real l_superior_mesenteric_T4_C150(unit = "m") = 16.7458e-03;
            parameter Real l_ileocolic_T9_C152(unit = "m") = 46.8332e-03;
            parameter Real l_superior_mesenteric_T4_C154(unit = "m") = 23.0546e-03;
            parameter Real l_ileal_4_T12_C156(unit = "m") = 45.6984e-03;
            parameter Real l_superior_mesenteric_T4_C158(unit = "m") = 20.5397e-03;
            parameter Real l_ileal_6_T13_C160(unit = "m") = 29.1584e-03;
            parameter Real l_superior_mesenteric_T4_C162(unit = "m") = 39.4879e-03;
            parameter Real l_renal_L166(unit = "m") = 22.0037e-03;
            parameter Real l_renal_anterior_branch_L168(unit = "m") = 10.8789e-03;
            parameter Real l_inferior_segmental_T5_L170(unit = "m") = 40.8761e-03;
            parameter Real l_superior_segmental_T4_L172(unit = "m") = 29.7265e-03;
            parameter Real l_renal_posterior_branch_T3_L174(unit = "m") = 22.3608e-03;
            parameter Real l_renal_R178(unit = "m") = 37.7403e-03;
            parameter Real l_renal_anterior_branch_R180(unit = "m") = 10.8792e-03;
            parameter Real l_superior_segmental_T4_R182(unit = "m") = 29.7263e-03;
            parameter Real l_inferior_segmental_T5_R184(unit = "m") = 40.8756e-03;
            parameter Real l_renal_posterior_branch_T3_R186(unit = "m") = 22.36e-03;
            parameter Real l_inferior_mesenteric_T5_C190(unit = "m") = 90.3282e-03;
            parameter Real l_common_iliac_R216(unit = "m") = 76.4393e-03;
            parameter Real l_internal_iliac_T1_R218(unit = "m") = 72.5302e-03;
            parameter Real l_external_iliac_R220(unit = "m") = 102.358e-03;
            parameter Real l_femoral_R222(unit = "m") = 31.5982e-03;
            parameter Real l_profundus_T2_R224(unit = "m") = 238.438e-03;
            parameter Real l_femoral_R226(unit = "m") = 319.297e-03;
            parameter Real l_popliteal_R228(unit = "m") = 132.06e-03;
            parameter Real l_anterior_tibial_T3_R230(unit = "m") = 386.388e-03;
            parameter Real l_popliteal_R232(unit = "m") = 8.80051e-03;
            parameter Real l_tibiofibular_trunk_R234(unit = "m") = 36.1667e-03;
            parameter Real l_posterior_tibial_T4_R236(unit = "m") = 382.987e-03;
            parameter Real l_common_iliac_L194(unit = "m") = 74.0524e-03;
            parameter Real l_internal_iliac_T1_L196(unit = "m") = 72.5301e-03;
            parameter Real l_external_iliac_L198(unit = "m") = 102.358e-03;
            parameter Real l_femoral_L200(unit = "m") = 31.5982e-03;
            parameter Real l_profundus_T2_L202(unit = "m") = 238.438e-03;
            parameter Real l_femoral_L204(unit = "m") = 319.297e-03;
            parameter Real l_popliteal_L206(unit = "m") = 132.059e-03;
            parameter Real l_anterior_tibial_T3_L208(unit = "m") = 386.389e-03;
            parameter Real l_popliteal_L210(unit = "m") = 8.80046e-03;
            parameter Real l_tibiofibular_trunk_L212(unit = "m") = 36.1676e-03;
            parameter Real l_posterior_tibial_T4_L214(unit = "m") = 382.987e-03;
            parameter Real l_subclavian_R28(unit = "m") = 15.7469e-03;
            parameter Real l_subclavian_R30(unit = "m") = 41.1419e-03;
            parameter Real l_axillary_R32(unit = "m") = 120.021e-03;
            parameter Real l_brachial_R34(unit = "m") = 223.119e-03;
            parameter Real l_ulnar_T2_R36(unit = "m") = 29.7599e-03;
            parameter Real l_common_interosseous_R38(unit = "m") = 16.2682e-03;
            parameter Real l_posterior_interosseous_T3_R40(unit = "m") = 231.694e-03;
            parameter Real l_ulnar_T2_R42(unit = "m") = 239.276e-03;
            parameter Real l_radial_T1_R44(unit = "m") = 302.156e-03;
            parameter Real l_subclavian_L66(unit = "m") = 49.4669e-03;
            parameter Real l_subclavian_L78(unit = "m") = 41.1396e-03;
            parameter Real l_axillary_L80(unit = "m") = 120.021e-03;
            parameter Real l_brachial_L82(unit = "m") = 223.119e-03;
            parameter Real l_ulnar_T2_L84(unit = "m") = 29.7594e-03;
            parameter Real l_common_interosseous_L86(unit = "m") = 16.2681e-03;
            parameter Real l_posterior_interosseous_T3_L88(unit = "m") = 231.695e-03;
            parameter Real l_ulnar_T2_L90(unit = "m") = 239.277e-03;
            parameter Real l_radial_T1_L92(unit = "m") = 302.155e-03;
            parameter Real l_common_carotid_R6_A(unit = "m") = 27.0844e-03;
            parameter Real l_common_carotid_R6_B(unit = "m") = 27.0844e-03;
            parameter Real l_common_carotid_R6_C(unit = "m") = 27.0844e-03;
            parameter Real l_internal_carotid_R8_A(unit = "m") = 45.036e-03;
            parameter Real l_internal_carotid_R8_B(unit = "m") = 45.036e-03;
            parameter Real l_internal_carotid_R8_C(unit = "m") = 45.036e-03;
            parameter Real l_external_carotid_T2_R26(unit = "m") = 61.0125e-03;
            parameter Real l_common_carotid_L48_A(unit = "m") = 30.339e-03;
            parameter Real l_common_carotid_L48_B(unit = "m") = 30.339e-03;
            parameter Real l_common_carotid_L48_C(unit = "m") = 30.339e-03;
            parameter Real l_common_carotid_L48_D(unit = "m") = 30.339e-03;
            parameter Real l_internal_carotid_L50_A(unit = "m") = 45.036e-03;
            parameter Real l_internal_carotid_L50_B(unit = "m") = 45.036e-03;
            parameter Real l_internal_carotid_L50_C(unit = "m") = 45.036e-03;
            parameter Real l_external_carotid_T2_L62(unit = "m") = 61.0127e-03;
            parameter Real l_vertebral_L2(unit = "m") = 20.9765e-2;
            parameter Real l_vertebral_R272(unit = "m") = 21.0146e-2;
            parameter Real l_basilar_C4(unit = "m") = 2.26443e-2;
            parameter Real l_posterior_cerebral_precommunicating_part_L6(unit = "m") = 0.697753e-2;
            parameter Real l_posterior_cerebral_precommunicating_part_R204(unit = "m") = 0.77827e-2;
            parameter Real l_posterior_communicating_L8(unit = "m") = 1.65974e-2;
            parameter Real l_posterior_communicating_R206(unit = "m") = 1.6597e-2;
            parameter Real l_posterior_cerebral_postcommunicating_part_L12(unit = "m") = 1.28091e-2;
            parameter Real l_posterior_cerebral_postcommunicating_part_R208(unit = "m") = 1.28083e-2;
            parameter Real l_occipital_lateral_L14(unit = "m") = 0.472985e-2;
            parameter Real l_occipital_lateral_R210(unit = "m") = 0.472973e-2;
            parameter Real l_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "m") = 2.61986e-2;
            parameter Real l_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "m") = 2.61979e-2;
            parameter Real l_occipital_lateral_L18(unit = "m") = 1.11052e-2;
            parameter Real l_occipital_lateral_R214(unit = "m") = 1.11056e-2;
            parameter Real l_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "m") = 2.1112e-2;
            parameter Real l_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "m") = 2.1112e-2;
            parameter Real l_occipital_lateral_L22(unit = "m") = 1.2455e-2;
            parameter Real l_occipital_lateral_R218(unit = "m") = 1.2455e-2;
            parameter Real l_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "m") = 2.05518e-2;
            parameter Real l_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "m") = 2.05518e-2;
            parameter Real l_medial_occipital_L26(unit = "m") = 3.21752e-2;
            parameter Real l_medial_occipital_R222(unit = "m") = 3.21754e-2;
            parameter Real l_medial_occipital_dorsal_branch_to_corpus_callosum_L28(unit = "m") = 2.51851e-2;
            parameter Real l_medial_occipital_dorsal_branch_to_corpus_callosum_R224(unit = "m") = 2.51847e-2;
            parameter Real l_pericallosal_parieto_occipital_branch_T60_L30(unit = "m") = 4.1888e-2;
            parameter Real l_pericallosal_parieto_occipital_branch_T124_R226(unit = "m") = 4.18881e-2;
            parameter Real l_pericallosal_L32(unit = "m") = 1.5668e-2;
            parameter Real l_pericallosal_R228(unit = "m") = 1.5668e-2;
            parameter Real l_pericallosal_precuneal_branch_T61_L34(unit = "m") = 5.42988e-2;
            parameter Real l_pericallosal_precuneal_branch_T125_R230(unit = "m") = 5.42989e-2;
            parameter Real l_pericallosal_L36(unit = "m") = 5.57509e-2;
            parameter Real l_pericallosal_R232(unit = "m") = 5.57509e-2;
            parameter Real l_anterior_cerebral_L38(unit = "m") = 2.809e-2;
            parameter Real l_anterior_cerebral_R234(unit = "m") = 2.80898e-2;
            parameter Real l_distal_medial_striate_T44_L40(unit = "m") = 1.24626e-2;
            parameter Real l_distal_medial_striate_T109_R236(unit = "m") = 1.24626e-2;
            parameter Real l_anterior_cerebral_L42(unit = "m") = 0.114668e-2;
            parameter Real l_anterior_cerebral_R238(unit = "m") = 0.114733e-2;
            parameter Real l_anterior_communicating_C44(unit = "m") = 0.565531e-2;
            parameter Real l_anterior_cerebral_L110(unit = "m") = 1.05951e-2;
            parameter Real l_anterior_cerebral_R46(unit = "m") = 1.05945e-2;
            parameter Real l_internal_carotid_L112(unit = "m") = 0.196966e-2;
            parameter Real l_internal_carotid_R48(unit = "m") = 0.196955e-2;
            parameter Real l_middle_cerebral_L114(unit = "m") = 0.182233e-2;
            parameter Real l_middle_cerebral_R52(unit = "m") = 0.182229e-2;
            parameter Real l_anterior_choroidal_T34_L116(unit = "m") = 2.5869e-2;
            parameter Real l_anterior_choroidal_T98_R54(unit = "m") = 2.5869e-2;
            parameter Real l_middle_cerebral_L118(unit = "m") = 2.83007e-2;
            parameter Real l_middle_cerebral_R56(unit = "m") = 2.8301e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_L120(unit = "m") = 0.251165e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_R58(unit = "m") = 0.251165e-2;
            parameter Real l_lateral_frontobasal_T45_L122(unit = "m") = 4.32804e-2;
            parameter Real l_lateral_frontobasal_T110_R60(unit = "m") = 4.32805e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_L124(unit = "m") = 1.33091e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_R62(unit = "m") = 1.3309e-2;
            parameter Real l_prefrontal_T65_L126(unit = "m") = 10.0723e-2;
            parameter Real l_prefrontal_T130_R64(unit = "m") = 10.0723e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_L128(unit = "m") = 1.2255e-2;
            parameter Real l_middle_cerebral_superior_terminal_branch_R66(unit = "m") = 1.2255e-2;
            parameter Real l_artery_of_precentral_sulcus_T38_L130(unit = "m") = 0.935653e-2;
            parameter Real l_artery_of_precentral_sulcus_T103_R68(unit = "m") = 0.935654e-2;
            parameter Real l_artery_of_central_sulcus_T36_L132(unit = "m") = 10.6498e-2;
            parameter Real l_artery_of_central_sulcus_T101_R70(unit = "m") = 10.6498e-2;
            parameter Real l_artery_of_precentral_sulcus_T38_L134(unit = "m") = 8.81918e-2;
            parameter Real l_artery_of_precentral_sulcus_T103_R72(unit = "m") = 8.81919e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L136(unit = "m") = 0.142512e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R74(unit = "m") = 0.142516e-2;
            parameter Real l_polar_temporal_T63_L138(unit = "m") = 2.17951e-2;
            parameter Real l_polar_temporal_T127_R76(unit = "m") = 2.17953e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L140(unit = "m") = 0.0932844e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R78(unit = "m") = 0.0932844e-2;
            parameter Real l_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "m") = 2.67934e-2;
            parameter Real l_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "m") = 2.67942e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L144(unit = "m") = 2.83599e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R82(unit = "m") = 2.83601e-2;
            parameter Real l_middle_cerebral_middle_temporal_branch_T57_L146(unit = "m") = 3.00383e-2;
            parameter Real l_middle_cerebral_middle_temporal_branch_T121_R84(unit = "m") = 3.00379e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L148(unit = "m") = 1.82043e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R86(unit = "m") = 1.82041e-2;
            parameter Real l_artery_of_postcentral_sulcus_T37_L150(unit = "m") = 7.36477e-2;
            parameter Real l_artery_of_postcentral_sulcus_T102_R88(unit = "m") = 7.36471e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L152(unit = "m") = 0.708809e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R90(unit = "m") = 0.708809e-2;
            parameter Real l_middle_cerebral_posterior_temporal_branch_T58_L154(unit = "m") = 0.692097e-2;
            parameter Real l_middle_cerebral_posterior_temporal_branch_T122_R92(unit = "m") = 0.692096e-2;
            parameter Real l_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "m") = 5.73679e-2;
            parameter Real l_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "m") = 5.7368e-2;
            parameter Real l_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "m") = 2.26651e-2;
            parameter Real l_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "m") = 2.26651e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L160(unit = "m") = 0.549683e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R98(unit = "m") = 0.549683e-2;
            parameter Real l_anterior_parietal_T35_L162(unit = "m") = 6.219e-2;
            parameter Real l_anterior_parietal_T100_R100(unit = "m") = 6.21893e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_L164(unit = "m") = 1.05444e-2;
            parameter Real l_middle_cerebral_inferior_terminal_branch_R102(unit = "m") = 1.05443e-2;
            parameter Real l_middle_cerebral_branch_to_angular_gyrus_T56_L166(unit = "m") = 1.01852e-2;
            parameter Real l_middle_cerebral_branch_to_angular_gyrus_T120_R104(unit = "m") = 1.01852e-2;
            parameter Real l_posterior_parietal_T64_L168(unit = "m") = 4.2951e-2;
            parameter Real l_posterior_parietal_T129_R106(unit = "m") = 4.2951e-2;
            parameter Real l_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "m") = 4.19474e-2;
            parameter Real l_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "m") = 4.19475e-2;
            parameter Real l_callosomarginal_L172(unit = "m") = 1.13312e-2;
            parameter Real l_callosomarginal_R240(unit = "m") = 1.13311e-2;
            parameter Real l_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "m") = 3.43749e-2;
            parameter Real l_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "m") = 3.43749e-2;
            parameter Real l_callosomarginal_L176(unit = "m") = 1.72952e-2;
            parameter Real l_callosomarginal_R244(unit = "m") = 1.72952e-2;
            parameter Real l_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "m") = 4.19271e-2;
            parameter Real l_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "m") = 4.1927e-2;
            parameter Real l_callosomarginal_L180(unit = "m") = 1.39198e-2;
            parameter Real l_callosomarginal_R248(unit = "m") = 1.39198e-2;
            parameter Real l_callosomarginal_cingular_branch_T40_L182(unit = "m") = 1.75028e-2;
            parameter Real l_callosomarginal_cingular_branch_T105_R250(unit = "m") = 1.75028e-2;
            parameter Real l_callosomarginal_L184(unit = "m") = 0.496294e-2;
            parameter Real l_callosomarginal_R252(unit = "m") = 0.496295e-2;
            parameter Real l_callosomarginal_paracentral_branch_T42_L186(unit = "m") = 4.22964e-2;
            parameter Real l_callosomarginal_paracentral_branch_T107_R254(unit = "m") = 4.22964e-2;
            parameter Real l_medial_occipital_L188(unit = "m") = 0.490507e-2;
            parameter Real l_medial_occipital_R256(unit = "m") = 0.490474e-2;
            parameter Real l_medial_occipital_occipitotemporal_branch_T52_L190(unit = "m") = 2.98359e-2;
            parameter Real l_medial_occipital_occipitotemporal_branch_T80_R258(unit = "m") = 2.98366e-2;
            parameter Real l_medial_occipital_L192(unit = "m") = 0.892062e-2;
            parameter Real l_medial_occipital_R260(unit = "m") = 0.892067e-2;
            parameter Real l_medial_occipital_parieto_occipital_branch_T54_L194(unit = "m") = 1.88987e-2;
            parameter Real l_medial_occipital_parieto_occipital_branch_T118_R262(unit = "m") = 1.88989e-2;
            parameter Real l_medial_occipital_parietal_branch_T53_L196(unit = "m") = 2.80168e-2;
            parameter Real l_medial_occipital_parietal_branch_T81_R264(unit = "m") = 2.80169e-2;
            parameter Real l_medial_occipital_parieto_occipital_branch_T54_L198(unit = "m") = 2.33801e-2;
            parameter Real l_medial_occipital_parieto_occipital_branch_T118_R266(unit = "m") = 2.33801e-2;
            parameter Real l_medial_occipital_L200(unit = "m") = 1.26049e-2;
            parameter Real l_medial_occipital_R268(unit = "m") = 1.26049e-2;
            parameter Real l_medial_occipital_calcarine_branch_T51_L202(unit = "m") = 1.47666e-2;
            parameter Real l_medial_occipital_calcarine_branch_T79_R270(unit = "m") = 1.47667e-2;
            parameter Real C_ascending_aorta_A(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_ascending_aorta_B(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_ascending_aorta_C(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_ascending_aorta_D(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_aortic_arch_C2(unit = "m6.J-1") = 1.631e-10;
            parameter Real C_brachiocephalic_trunk_C4(unit = "m6.J-1") = 0.86529e-10;
            parameter Real C_aortic_arch_C46(unit = "m6.J-1") = 0.799e-10;
            parameter Real C_aortic_arch_C64(unit = "m6.J-1") = 0.548e-10;
            parameter Real C_aortic_arch_C94(unit = "m6.J-1") = 2.83e-10;
            parameter Real C_thoracic_aorta_C96(unit = "m6.J-1") = 0.534e-10;
            parameter Real C_thoracic_aorta_C100(unit = "m6.J-1") = 0.411e-10;
            parameter Real C_thoracic_aorta_C104(unit = "m6.J-1") = 0.774e-10;
            parameter Real C_thoracic_aorta_C108(unit = "m6.J-1") = 0.254e-10;
            parameter Real C_thoracic_aorta_C112(unit = "m6.J-1") = 4.39e-10;
            parameter Real C_abdominal_aorta_C114(unit = "m6.J-1") = 0.084e-10;
            parameter Real C_abdominal_aorta_C136(unit = "m6.J-1") = 0.35e-10;
            parameter Real C_abdominal_aorta_C164(unit = "m6.J-1") = 0.104e-10;
            parameter Real C_abdominal_aorta_C176(unit = "m6.J-1") = 0.281e-10;
            parameter Real C_abdominal_aorta_C188(unit = "m6.J-1") = 1.11e-10;
            parameter Real C_abdominal_aorta_C192(unit = "m6.J-1") = 0.6966e-10;
            parameter Real C_posterior_intercostal_T1_R98(unit = "m6.J-1") = 0.0848e-10;
            parameter Real C_posterior_intercostal_T1_L102(unit = "m6.J-1") = 0.0767e-10;
            parameter Real C_posterior_intercostal_T2_R106(unit = "m6.J-1") = 0.11e-10;
            parameter Real C_posterior_intercostal_T2_L110(unit = "m6.J-1") = 0.102e-10;
            parameter Real C_celiac_trunk_C116(unit = "m6.J-1") = 0.0593e-10;
            parameter Real C_splenic_T2_C118(unit = "m6.J-1") = 0.00491e-10;
            parameter Real C_left_gastric_T3_C120(unit = "m6.J-1") = 0.04857e-10;
            parameter Real C_splenic_T2_C122(unit = "m6.J-1") = 0.00347e-10;
            parameter Real C_dorsal_pancreatic_T1_C124(unit = "m6.J-1") = 0.00179e-10;
            parameter Real C_splenic_T2_C126(unit = "m6.J-1") = 0.07847e-10;
            parameter Real C_common_hepatic_C128(unit = "m6.J-1") = 0.1468e-10;
            parameter Real C_hepatic_artery_proper_C130(unit = "m6.J-1") = 0.01254e-10;
            parameter Real C_hepatic_artery_proper_left_branch_C132(unit = "m6.J-1") = 0.046e-10;
            parameter Real C_hepatic_artery_proper_right_branch_C134(unit = "m6.J-1") = 0.0356e-10;
            parameter Real C_superior_mesenteric_T4_C138(unit = "m6.J-1") = 0.2373e-10;
            parameter Real C_middle_colic_T8_C140(unit = "m6.J-1") = 0.0521e-10;
            parameter Real C_superior_mesenteric_T4_C142(unit = "m6.J-1") = 0.13e-10;
            parameter Real C_jejunal_3_T10_C144(unit = "m6.J-1") = 0.0274e-10;
            parameter Real C_superior_mesenteric_T4_C146(unit = "m6.J-1") = 0.095e-10;
            parameter Real C_jejunal_6_T11_C148(unit = "m6.J-1") = 0.03667e-10;
            parameter Real C_superior_mesenteric_T4_C150(unit = "m6.J-1") = 0.0412e-10;
            parameter Real C_ileocolic_T9_C152(unit = "m6.J-1") = 0.04767e-10;
            parameter Real C_superior_mesenteric_T4_C154(unit = "m6.J-1") = 0.0486e-10;
            parameter Real C_ileal_4_T12_C156(unit = "m6.J-1") = 0.036e-10;
            parameter Real C_superior_mesenteric_T4_C158(unit = "m6.J-1") = 0.0361e-10;
            parameter Real C_ileal_6_T13_C160(unit = "m6.J-1") = 0.023e-10;
            parameter Real C_superior_mesenteric_T4_C162(unit = "m6.J-1") = 0.0531e-10;
            parameter Real C_renal_L166(unit = "m6.J-1") = 0.049e-10;
            parameter Real C_renal_anterior_branch_L168(unit = "m6.J-1") = 0.0189e-10;
            parameter Real C_inferior_segmental_T5_L170(unit = "m6.J-1") = 0.038e-10;
            parameter Real C_superior_segmental_T4_L172(unit = "m6.J-1") = 0.0276e-10;
            parameter Real C_renal_posterior_branch_T3_L174(unit = "m6.J-1") = 0.0131e-10;
            parameter Real C_renal_R178(unit = "m6.J-1") = 0.1e-10;
            parameter Real C_renal_anterior_branch_R180(unit = "m6.J-1") = 0.0189e-10;
            parameter Real C_superior_segmental_T4_R182(unit = "m6.J-1") = 0.02763e-10;
            parameter Real C_inferior_segmental_T5_R184(unit = "m6.J-1") = 0.038e-10;
            parameter Real C_renal_posterior_branch_T3_R186(unit = "m6.J-1") = 0.0131e-10;
            parameter Real C_inferior_mesenteric_T5_C190(unit = "m6.J-1") = 0.1e-10;
            parameter Real C_common_iliac_R216(unit = "m6.J-1") = 0.525e-10;
            parameter Real C_internal_iliac_T1_R218(unit = "m6.J-1") = 0.1733e-10;
            parameter Real C_external_iliac_R220(unit = "m6.J-1") = 0.359e-10;
            parameter Real C_femoral_R222(unit = "m6.J-1") = 0.101e-10;
            parameter Real C_profundus_T2_R224(unit = "m6.J-1") = 0.288e-10;
            parameter Real C_femoral_R226(unit = "m6.J-1") = 0.8338e-10;
            parameter Real C_popliteal_R228(unit = "m6.J-1") = 0.241e-10;
            parameter Real C_anterior_tibial_T3_R230(unit = "m6.J-1") = 0.108e-10;
            parameter Real C_popliteal_R232(unit = "m6.J-1") = 0.01345e-10;
            parameter Real C_tibiofibular_trunk_R234(unit = "m6.J-1") = 0.0546e-10;
            parameter Real C_posterior_tibial_T4_R236(unit = "m6.J-1") = 0.121e-10;
            parameter Real C_common_iliac_L194(unit = "m6.J-1") = 0.509e-10;
            parameter Real C_internal_iliac_T1_L196(unit = "m6.J-1") = 0.1733e-10;
            parameter Real C_external_iliac_L198(unit = "m6.J-1") = 0.359e-10;
            parameter Real C_femoral_L200(unit = "m6.J-1") = 0.101e-10;
            parameter Real C_profundus_T2_L202(unit = "m6.J-1") = 0.288e-10;
            parameter Real C_femoral_L204(unit = "m6.J-1") = 0.8338e-10;
            parameter Real C_popliteal_L206(unit = "m6.J-1") = 0.241e-10;
            parameter Real C_anterior_tibial_T3_L208(unit = "m6.J-1") = 0.108e-10;
            parameter Real C_popliteal_L210(unit = "m6.J-1") = 0.01345e-10;
            parameter Real C_tibiofibular_trunk_L212(unit = "m6.J-1") = 0.05466e-10;
            parameter Real C_posterior_tibial_T4_L214(unit = "m6.J-1") = 0.121e-10;
            parameter Real C_subclavian_R28(unit = "m6.J-1") = 0.1242e-10;
            parameter Real C_subclavian_R30(unit = "m6.J-1") = 0.147e-10;
            parameter Real C_axillary_R32(unit = "m6.J-1") = 0.153e-10;
            parameter Real C_brachial_R34(unit = "m6.J-1") = 0.215e-10;
            parameter Real C_ulnar_T2_R36(unit = "m6.J-1") = 0.013e-10;
            parameter Real C_common_interosseous_R38(unit = "m6.J-1") = 0.0029e-10;
            parameter Real C_posterior_interosseous_T3_R40(unit = "m6.J-1") = 0.019e-10;
            parameter Real C_ulnar_T2_R42(unit = "m6.J-1") = 0.1043e-10;
            parameter Real C_radial_T1_R44(unit = "m6.J-1") = 0.125e-10;
            parameter Real C_subclavian_L66(unit = "m6.J-1") = 0.324e-10;
            parameter Real C_subclavian_L78(unit = "m6.J-1") = 0.1075e-10;
            parameter Real C_axillary_L80(unit = "m6.J-1") = 0.153e-10;
            parameter Real C_brachial_L82(unit = "m6.J-1") = 0.215e-10;
            parameter Real C_ulnar_T2_L84(unit = "m6.J-1") = 0.013e-10;
            parameter Real C_common_interosseous_L86(unit = "m6.J-1") = 0.0029e-10;
            parameter Real C_posterior_interosseous_T3_L88(unit = "m6.J-1") = 0.019e-10;
            parameter Real C_ulnar_T2_L90(unit = "m6.J-1") = 0.1043e-10;
            parameter Real C_radial_T1_L92(unit = "m6.J-1") = 0.125e-10;
            parameter Real C_common_carotid_R6_A(unit = "m6.J-1") = 0.148e-10;
            parameter Real C_common_carotid_R6_B(unit = "m6.J-1") = 0.148e-10;
            parameter Real C_common_carotid_R6_C(unit = "m6.J-1") = 0.148e-10;
            parameter Real C_internal_carotid_R8_A(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_internal_carotid_R8_B(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_internal_carotid_R8_C(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_external_carotid_T2_R26(unit = "m6.J-1") = 0.0845e-10;
            parameter Real C_common_carotid_L48_A(unit = "m6.J-1") = 0.1661e-10;
            parameter Real C_common_carotid_L48_B(unit = "m6.J-1") = 0.1661e-10;
            parameter Real C_common_carotid_L48_C(unit = "m6.J-1") = 0.1661e-10;
            parameter Real C_common_carotid_L48_D(unit = "m6.J-1") = 0.1661e-10;
            parameter Real C_internal_carotid_L50_A(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_internal_carotid_L50_B(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_internal_carotid_L50_C(unit = "m6.J-1") = 0.0525e-10;
            parameter Real C_external_carotid_T2_L62(unit = "m6.J-1") = 0.0845e-10;
            parameter Real C_vertebral_L2(unit = "m6.J-1") = 0.0811e-10;
            parameter Real C_vertebral_R272(unit = "m6.J-1") = 0.0811e-10;
            parameter Real C_basilar_C4(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_cerebral_precommunicating_part_L6(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_cerebral_precommunicating_part_R204(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_communicating_L8(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_communicating_R206(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_cerebral_postcommunicating_part_L12(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_cerebral_postcommunicating_part_R208(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_L14(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_R210(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_L18(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_R214(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_L22(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_occipital_lateral_R218(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_L26(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_R222(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_dorsal_branch_to_corpus_callosum_L28(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_dorsal_branch_to_corpus_callosum_R224(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_parieto_occipital_branch_T60_L30(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_parieto_occipital_branch_T124_R226(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_L32(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_R228(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_precuneal_branch_T61_L34(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_precuneal_branch_T125_R230(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_L36(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_pericallosal_R232(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_L38(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_R234(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_distal_medial_striate_T44_L40(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_distal_medial_striate_T109_R236(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_L42(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_R238(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_communicating_C44(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_L110(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_cerebral_R46(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_internal_carotid_L112(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_internal_carotid_R48(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_L114(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_R52(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_choroidal_T34_L116(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_choroidal_T98_R54(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_L118(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_R56(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_L120(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_R58(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_frontobasal_T45_L122(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_lateral_frontobasal_T110_R60(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_L124(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_R62(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_prefrontal_T65_L126(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_prefrontal_T130_R64(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_L128(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_superior_terminal_branch_R66(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_precentral_sulcus_T38_L130(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_precentral_sulcus_T103_R68(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_central_sulcus_T36_L132(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_central_sulcus_T101_R70(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_precentral_sulcus_T38_L134(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_precentral_sulcus_T103_R72(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L136(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R74(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_polar_temporal_T63_L138(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_polar_temporal_T127_R76(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L140(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R78(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L144(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R82(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_middle_temporal_branch_T57_L146(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_middle_temporal_branch_T121_R84(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L148(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R86(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_postcentral_sulcus_T37_L150(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_artery_of_postcentral_sulcus_T102_R88(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L152(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R90(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporal_branch_T58_L154(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporal_branch_T122_R92(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L160(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R98(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_parietal_T35_L162(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_anterior_parietal_T100_R100(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_L164(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_inferior_terminal_branch_R102(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_branch_to_angular_gyrus_T56_L166(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_branch_to_angular_gyrus_T120_R104(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_parietal_T64_L168(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_posterior_parietal_T129_R106(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_L172(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_R240(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_L176(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_R244(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_L180(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_R248(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_cingular_branch_T40_L182(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_cingular_branch_T105_R250(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_L184(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_R252(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_paracentral_branch_T42_L186(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_callosomarginal_paracentral_branch_T107_R254(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_L188(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_R256(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_occipitotemporal_branch_T52_L190(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_occipitotemporal_branch_T80_R258(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_L192(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_R260(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parieto_occipital_branch_T54_L194(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parieto_occipital_branch_T118_R262(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parietal_branch_T53_L196(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parietal_branch_T81_R264(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parieto_occipital_branch_T54_L198(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_parieto_occipital_branch_T118_R266(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_L200(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_R268(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_calcarine_branch_T51_L202(unit = "m6.J-1") = 1.6e-10;
            parameter Real C_medial_occipital_calcarine_branch_T79_R270(unit = "m6.J-1") = 1.6e-10;
            parameter Real R_T_posterior_intercostal_T1_R98(unit = "J.s.m-6") = 22.5809e+9;
            parameter Real R_T_posterior_intercostal_T1_L102(unit = "J.s.m-6") = 23.1661e+9;
            parameter Real R_T_posterior_intercostal_T2_R106(unit = "J.s.m-6") = 21.0678e+9;
            parameter Real R_T_posterior_intercostal_T2_L110(unit = "J.s.m-6") = 21.2483e+9;
            parameter Real R_T_left_gastric_T3_C120(unit = "J.s.m-6") = 31.1251e+9;
            parameter Real R_T_dorsal_pancreatic_T1_C124(unit = "J.s.m-6") = 16.6313e+9;
            parameter Real R_T_splenic_T2_C126(unit = "J.s.m-6") = 0.429028e+9;
            parameter Real R_T_hepatic_artery_proper_left_branch_C132(unit = "J.s.m-6") = 0.852085e+9;
            parameter Real R_T_hepatic_artery_proper_right_branch_C134(unit = "J.s.m-6") = 0.471438e+9;
            parameter Real R_T_middle_colic_T8_C140(unit = "J.s.m-6") = 2.6865e+9;
            parameter Real R_T_jejunal_3_T10_C144(unit = "J.s.m-6") = 1.96952e+9;
            parameter Real R_T_jejunal_6_T11_C148(unit = "J.s.m-6") = 1.96952e+9;
            parameter Real R_T_ileocolic_T9_C152(unit = "J.s.m-6") = 0.971722e+9;
            parameter Real R_T_ileal_4_T12_C156(unit = "J.s.m-6") = 1.32964e+9;
            parameter Real R_T_ileal_6_T13_C160(unit = "J.s.m-6") = 1.32964e+9;
            parameter Real R_T_superior_mesenteric_T4_C162(unit = "J.s.m-6") = 0.880745e+9;
            parameter Real R_T_inferior_segmental_T5_L170(unit = "J.s.m-6") = 0.526057e+9;
            parameter Real R_T_superior_segmental_T4_L172(unit = "J.s.m-6") = 0.526057e+9;
            parameter Real R_T_renal_posterior_branch_T3_L174(unit = "J.s.m-6") = 0.931304e+9;
            parameter Real R_T_superior_segmental_T4_R182(unit = "J.s.m-6") = 0.527823e+9;
            parameter Real R_T_inferior_segmental_T5_R184(unit = "J.s.m-6") = 0.527823e+9;
            parameter Real R_T_renal_posterior_branch_T3_R186(unit = "J.s.m-6") = 0.934431e+9;
            parameter Real R_T_inferior_mesenteric_T5_C190(unit = "J.s.m-6") = 2.16746e+9;
            parameter Real R_T_internal_iliac_T1_R218(unit = "J.s.m-6") = 0.375754e+9;
            parameter Real R_T_profundus_T2_R224(unit = "J.s.m-6") = 0.310612e+9;
            parameter Real R_T_anterior_tibial_T3_R230(unit = "J.s.m-6") = 2.22296e+9;
            parameter Real R_T_posterior_tibial_T4_R236(unit = "J.s.m-6") = 1.91761e+9;
            parameter Real R_T_internal_iliac_T1_L196(unit = "J.s.m-6") = 0.376879e+9;
            parameter Real R_T_profundus_T2_L202(unit = "J.s.m-6") = 0.310778e+9;
            parameter Real R_T_anterior_tibial_T3_L208(unit = "J.s.m-6") = 2.22365e+9;
            parameter Real R_T_posterior_tibial_T4_L214(unit = "J.s.m-6") = 1.91845e+9;
            parameter Real R_T_posterior_interosseous_T3_R40(unit = "J.s.m-6") = 4.33378e+9;
            parameter Real R_T_ulnar_T2_R42(unit = "J.s.m-6") = 1.0649e+9;
            parameter Real R_T_radial_T1_R44(unit = "J.s.m-6") = 1.04588e+9;
            parameter Real R_T_posterior_interosseous_T3_L88(unit = "J.s.m-6") = 4.34948e+9;
            parameter Real R_T_ulnar_T2_L90(unit = "J.s.m-6") = 1.08553e+9;
            parameter Real R_T_radial_T1_L92(unit = "J.s.m-6") = 1.02715e+9;
            parameter Real R_T_external_carotid_T2_R26(unit = "J.s.m-6") = 0.851183e+9;
            parameter Real R_T_external_carotid_T2_L62(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_internal_carotid_R8_C(unit = "J.s.m-6") = 0.851183e+9;
            parameter Real R_T_internal_carotid_L50_C(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_vertebral_R272(unit = "J.s.m-6") = 0.851183e+9;
            parameter Real R_T_vertebral_L2(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_renal_R178(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_renal_L166(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_celiac_trunk_C116(unit = "J.s.m-6") = 0.854183e+9;
            parameter Real R_T_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "J.s.m-6") = 6.17214e+9;
            parameter Real R_T_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "J.s.m-6") = 60.7317e+9;
            parameter Real R_T_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "J.s.m-6") = 25.2811e+9;
            parameter Real R_T_pericallosal_parieto_occipital_branch_T60_L30(unit = "J.s.m-6") = 17.8019e+9;
            parameter Real R_T_pericallosal_precuneal_branch_T61_L34(unit = "J.s.m-6") = 12.2746e+9;
            parameter Real R_T_distal_medial_striate_T44_L40(unit = "J.s.m-6") = 65.8855e+9;
            parameter Real R_T_anterior_choroidal_T34_L116(unit = "J.s.m-6") = 9.50237e+9;
            parameter Real R_T_lateral_frontobasal_T45_L122(unit = "J.s.m-6") = 23.3019e+9;
            parameter Real R_T_prefrontal_T65_L126(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_artery_of_central_sulcus_T36_L132(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_artery_of_precentral_sulcus_T38_L134(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_polar_temporal_T63_L138(unit = "J.s.m-6") = 44.8075e+9;
            parameter Real R_T_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "J.s.m-6") = 15.3827e+9;
            parameter Real R_T_middle_cerebral_middle_temporal_branch_T57_L146(unit = "J.s.m-6") = 13.5433e+9;
            parameter Real R_T_artery_of_postcentral_sulcus_T37_L150(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "J.s.m-6") = 10.6482e+9;
            parameter Real R_T_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "J.s.m-6") = 10.6482e+9;
            parameter Real R_T_anterior_parietal_T35_L162(unit = "J.s.m-6") = 15.3827e+9;
            parameter Real R_T_posterior_parietal_T64_L168(unit = "J.s.m-6") = 9.50237e+9;
            parameter Real R_T_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "J.s.m-6") = 7.65279e+9;
            parameter Real R_T_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "J.s.m-6") = 13.2110e+9;
            parameter Real R_T_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "J.s.m-6") = 9.39673e+9;
            parameter Real R_T_callosomarginal_cingular_branch_T40_L182(unit = "J.s.m-6") = 12.4248e+9;
            parameter Real R_T_callosomarginal_paracentral_branch_T42_L186(unit = "J.s.m-6") = 12.4248e+9;
            parameter Real R_T_medial_occipital_occipitotemporal_branch_T52_L190(unit = "J.s.m-6") = 31.0946e+9;
            parameter Real R_T_medial_occipital_parietal_branch_T53_L196(unit = "J.s.m-6") = 51.9306e+9;
            parameter Real R_T_medial_occipital_parieto_occipital_branch_T54_L198(unit = "J.s.m-6") = 10.6655e+9;
            parameter Real R_T_medial_occipital_calcarine_branch_T51_L202(unit = "J.s.m-6") = 31.0946e+9;
            parameter Real R_T_anterior_choroidal_T98_R54(unit = "J.s.m-6") = 9.50237e+9;
            parameter Real R_T_lateral_frontobasal_T110_R60(unit = "J.s.m-6") = 23.3019e+9;
            parameter Real R_T_prefrontal_T130_R64(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_artery_of_central_sulcus_T101_R70(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_artery_of_precentral_sulcus_T103_R72(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_polar_temporal_T127_R76(unit = "J.s.m-6") = 44.8075e+9;
            parameter Real R_T_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "J.s.m-6") = 15.3827e+9;
            parameter Real R_T_middle_cerebral_middle_temporal_branch_T121_R84(unit = "J.s.m-6") = 13.5433e+9;
            parameter Real R_T_artery_of_postcentral_sulcus_T102_R88(unit = "J.s.m-6") = 11.9822e+9;
            parameter Real R_T_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "J.s.m-6") = 10.6482e+9;
            parameter Real R_T_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "J.s.m-6") = 10.6482e+9;
            parameter Real R_T_anterior_parietal_T100_R100(unit = "J.s.m-6") = 15.3827e+9;
            parameter Real R_T_posterior_parietal_T129_R106(unit = "J.s.m-6") = 9.50237e+9;
            parameter Real R_T_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "J.s.m-6") = 7.65279e+9;
            parameter Real R_T_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "J.s.m-6") = 6.17214e+9;
            parameter Real R_T_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "J.s.m-6") = 60.7317e+9;
            parameter Real R_T_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "J.s.m-6") = 25.2811e+9;
            parameter Real R_T_pericallosal_parieto_occipital_branch_T124_R226(unit = "J.s.m-6") = 17.8019e+9;
            parameter Real R_T_pericallosal_precuneal_branch_T125_R230(unit = "J.s.m-6") = 12.2746e+9;
            parameter Real R_T_distal_medial_striate_T109_R236(unit = "J.s.m-6") = 65.8855e+9;
            parameter Real R_T_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "J.s.m-6") = 13.2110e+9;
            parameter Real R_T_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "J.s.m-6") = 9.39673e+9;
            parameter Real R_T_callosomarginal_cingular_branch_T105_R250(unit = "J.s.m-6") = 12.4248e+9;
            parameter Real R_T_callosomarginal_paracentral_branch_T107_R254(unit = "J.s.m-6") = 12.4248e+9;
            parameter Real R_T_medial_occipital_occipitotemporal_branch_T80_R258(unit = "J.s.m-6") = 31.0946e+9;
            parameter Real R_T_medial_occipital_parietal_branch_T81_R264(unit = "J.s.m-6") = 51.9306e+9;
            parameter Real R_T_medial_occipital_parieto_occipital_branch_T118_R266(unit = "J.s.m-6") = 10.6655e+9;
            parameter Real R_T_medial_occipital_calcarine_branch_T79_R270(unit = "J.s.m-6") = 31.0946e+9;
            parameter Real C_T_posterior_intercostal_T1_R98(unit = "m6.J-1") = 2.2736e-12;
            parameter Real C_T_posterior_intercostal_T1_L102(unit = "m6.J-1") = 2.2162e-12;
            parameter Real C_T_posterior_intercostal_T2_R106(unit = "m6.J-1") = 2.4369e-12;
            parameter Real C_T_posterior_intercostal_T2_L110(unit = "m6.J-1") = 2.4162e-12;
            parameter Real C_T_left_gastric_T3_C120(unit = "m6.J-1") = 1.6495e-12;
            parameter Real C_T_dorsal_pancreatic_T1_C124(unit = "m6.J-1") = 15.055e-12;
            parameter Real C_T_splenic_T2_C126(unit = "m6.J-1") = 119.67e-12;
            parameter Real C_T_hepatic_artery_proper_left_branch_C132(unit = "m6.J-1") = 60.253e-12;
            parameter Real C_T_hepatic_artery_proper_right_branch_C134(unit = "m6.J-1") = 108.9e-12;
            parameter Real C_T_middle_colic_T8_C140(unit = "m6.J-1") = 19.111e-12;
            parameter Real C_T_jejunal_3_T10_C144(unit = "m6.J-1") = 26.067e-12;
            parameter Real C_T_jejunal_6_T11_C148(unit = "m6.J-1") = 26.067e-12;
            parameter Real C_T_ileocolic_T9_C152(unit = "m6.J-1") = 52.835e-12;
            parameter Real C_T_ileal_4_T12_C156(unit = "m6.J-1") = 38.612e-12;
            parameter Real C_T_ileal_6_T13_C160(unit = "m6.J-1") = 38.612e-12;
            parameter Real C_T_superior_mesenteric_T4_C162(unit = "m6.J-1") = 58.292e-12;
            parameter Real C_T_inferior_segmental_T5_L170(unit = "m6.J-1") = 97.595e-12;
            parameter Real C_T_superior_segmental_T4_L172(unit = "m6.J-1") = 97.595e-12;
            parameter Real C_T_renal_posterior_branch_T3_L174(unit = "m6.J-1") = 55.127e-12;
            parameter Real C_T_superior_segmental_T4_R182(unit = "m6.J-1") = 97.268e-12;
            parameter Real C_T_inferior_segmental_T5_R184(unit = "m6.J-1") = 97.268e-12;
            parameter Real C_T_renal_posterior_branch_T3_R186(unit = "m6.J-1") = 54.943e-12;
            parameter Real C_T_inferior_mesenteric_T5_C190(unit = "m6.J-1") = 23.687e-12;
            parameter Real C_T_internal_iliac_T1_R218(unit = "m6.J-1") = 136.63e-12;
            parameter Real C_T_profundus_T2_R224(unit = "m6.J-1") = 165.29e-12;
            parameter Real C_T_anterior_tibial_T3_R230(unit = "m6.J-1") = 23.096e-12;
            parameter Real C_T_posterior_tibial_T4_R236(unit = "m6.J-1") = 26.773e-12;
            parameter Real C_T_internal_iliac_T1_L196(unit = "m6.J-1") = 136.23e-12;
            parameter Real C_T_profundus_T2_L202(unit = "m6.J-1") = 165.2e-12;
            parameter Real C_T_anterior_tibial_T3_L208(unit = "m6.J-1") = 23.088e-12;
            parameter Real C_T_posterior_tibial_T4_L214(unit = "m6.J-1") = 26.761e-12;
            parameter Real C_T_posterior_interosseous_T3_R40(unit = "m6.J-1") = 11.847e-12;
            parameter Real C_T_ulnar_T2_R42(unit = "m6.J-1") = 48.212e-12;
            parameter Real C_T_radial_T1_R44(unit = "m6.J-1") = 49.088e-12;
            parameter Real C_T_posterior_interosseous_T3_L88(unit = "m6.J-1") = 11.804e-12;
            parameter Real C_T_ulnar_T2_L90(unit = "m6.J-1") = 47.295e-12;
            parameter Real C_T_radial_T1_L92(unit = "m6.J-1") = 49.983e-12;
            parameter Real C_T_external_carotid_T2_R26(unit = "m6.J-1") = 60.317e-12;
            parameter Real C_T_external_carotid_T2_L62(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_internal_carotid_R8_C(unit = "m6.J-1") = 60.317e-12;
            parameter Real C_T_internal_carotid_L50_C(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_vertebral_R272(unit = "m6.J-1") = 60.317e-12;
            parameter Real C_T_vertebral_L2(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_renal_R178(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_renal_L166(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_celiac_trunk_C116(unit = "m6.J-1") = 60.105e-12;
            parameter Real C_T_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "m6.J-1") = 2.60095e-12;
            parameter Real C_T_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "m6.J-1") = 0.264334e-12;
            parameter Real C_T_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "m6.J-1") = 0.634997e-12;
            parameter Real C_T_pericallosal_parieto_occipital_branch_T60_L30(unit = "m6.J-1") = 0.901782e-12;
            parameter Real C_T_pericallosal_precuneal_branch_T61_L34(unit = "m6.J-1") = 1.30786e-12;
            parameter Real C_T_distal_medial_striate_T44_L40(unit = "m6.J-1") = 0.243656e-12;
            parameter Real C_T_anterior_choroidal_T34_L116(unit = "m6.J-1") = 1.68941e-12;
            parameter Real C_T_lateral_frontobasal_T45_L122(unit = "m6.J-1") = 0.688932e-12;
            parameter Real C_T_prefrontal_T65_L126(unit = "m6.J-1") = 1.33978e-12;
            parameter Real C_T_artery_of_central_sulcus_T36_L132(unit = "m6.J-1") = 1.33978e-12;
            parameter Real C_T_artery_of_precentral_sulcus_T38_L134(unit = "m6.J-1") = 1.33978e-12;
            parameter Real C_T_polar_temporal_T63_L138(unit = "m6.J-1") = 0.35828e-12;
            parameter Real C_T_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "m6.J-1") = 1.0436e-12;
            parameter Real C_T_middle_cerebral_middle_temporal_branch_T57_L146(unit = "m6.J-1") = 1.1853e-12;
            parameter Real C_T_artery_of_postcentral_sulcus_T37_L150(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "m6.J-1") = 1.5076e-12;
            parameter Real C_T_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "m6.J-1") = 1.5076e-12;
            parameter Real C_T_anterior_parietal_T35_L162(unit = "m6.J-1") = 1.0436e-12;
            parameter Real C_T_posterior_parietal_T64_L168(unit = "m6.J-1") = 1.6894e-12;
            parameter Real C_T_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "m6.J-1") = 2.0977e-12;
            parameter Real C_T_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "m6.J-1") = 1.2152e-12;
            parameter Real C_T_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "m6.J-1") = 1.7084e-12;
            parameter Real C_T_callosomarginal_cingular_branch_T40_L182(unit = "m6.J-1") = 1.2921e-12;
            parameter Real C_T_callosomarginal_paracentral_branch_T42_L186(unit = "m6.J-1") = 1.2921e-12;
            parameter Real C_T_medial_occipital_occipitotemporal_branch_T52_L190(unit = "m6.J-1") = 0.51628e-12;
            parameter Real C_T_medial_occipital_parietal_branch_T53_L196(unit = "m6.J-1") = 0.30913e-12;
            parameter Real C_T_medial_occipital_parieto_occipital_branch_T54_L198(unit = "m6.J-1") = 1.5052e-12;
            parameter Real C_T_medial_occipital_calcarine_branch_T51_L202(unit = "m6.J-1") = 0.51628e-12;
            parameter Real C_T_anterior_choroidal_T98_R54(unit = "m6.J-1") = 1.6894e-12;
            parameter Real C_T_lateral_frontobasal_T110_R60(unit = "m6.J-1") = 0.68893e-12;
            parameter Real C_T_prefrontal_T130_R64(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_artery_of_central_sulcus_T101_R70(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_artery_of_precentral_sulcus_T103_R72(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_polar_temporal_T127_R76(unit = "m6.J-1") = 0.35828e-12;
            parameter Real C_T_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "m6.J-1") = 1.0436e-12;
            parameter Real C_T_middle_cerebral_middle_temporal_branch_T121_R84(unit = "m6.J-1") = 1.1853e-12;
            parameter Real C_T_artery_of_postcentral_sulcus_T102_R88(unit = "m6.J-1") = 1.3398e-12;
            parameter Real C_T_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "m6.J-1") = 1.5076e-12;
            parameter Real C_T_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "m6.J-1") = 1.5076e-12;
            parameter Real C_T_anterior_parietal_T100_R100(unit = "m6.J-1") = 1.0436e-12;
            parameter Real C_T_posterior_parietal_T129_R106(unit = "m6.J-1") = 1.6894e-12;
            parameter Real C_T_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "m6.J-1") = 2.0977e-12;
            parameter Real C_T_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "m6.J-1") = 2.6009e-12;
            parameter Real C_T_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "m6.J-1") = 0.26433e-12;
            parameter Real C_T_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "m6.J-1") = 0.635e-12;
            parameter Real C_T_pericallosal_parieto_occipital_branch_T124_R226(unit = "m6.J-1") = 0.90178e-12;
            parameter Real C_T_pericallosal_precuneal_branch_T125_R230(unit = "m6.J-1") = 1.3079e-12;
            parameter Real C_T_distal_medial_striate_T109_R236(unit = "m6.J-1") = 0.24366e-12;
            parameter Real C_T_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "m6.J-1") = 1.2152e-12;
            parameter Real C_T_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "m6.J-1") = 1.7084e-12;
            parameter Real C_T_callosomarginal_cingular_branch_T105_R250(unit = "m6.J-1") = 1.2921e-12;
            parameter Real C_T_callosomarginal_paracentral_branch_T107_R254(unit = "m6.J-1") = 1.2921e-12;
            parameter Real C_T_medial_occipital_occipitotemporal_branch_T80_R258(unit = "m6.J-1") = 0.51628e-12;
            parameter Real C_T_medial_occipital_parietal_branch_T81_R264(unit = "m6.J-1") = 0.30913e-12;
            parameter Real C_T_medial_occipital_parieto_occipital_branch_T118_R266(unit = "m6.J-1") = 1.5052e-12;
            parameter Real C_T_medial_occipital_calcarine_branch_T79_R270(unit = "m6.J-1") = 0.51628e-12;
            parameter Real E_ascending_aorta_A(unit = "Pa") = 0.4e+6;
            parameter Real E_ascending_aorta_B(unit = "Pa") = 0.4e+6;
            parameter Real E_ascending_aorta_C(unit = "Pa") = 0.4e+6;
            parameter Real E_ascending_aorta_D(unit = "Pa") = 0.4e+6;
            parameter Real E_aortic_arch_C2(unit = "Pa") = 0.4e+6;
            parameter Real E_brachiocephalic_trunk_C4(unit = "Pa") = 0.4e+6;
            parameter Real E_aortic_arch_C46(unit = "Pa") = 0.4e+6;
            parameter Real E_aortic_arch_C64(unit = "Pa") = 0.4e+6;
            parameter Real E_aortic_arch_C94(unit = "Pa") = 0.4e+6;
            parameter Real E_thoracic_aorta_C96(unit = "Pa") = 0.4e+6;
            parameter Real E_thoracic_aorta_C100(unit = "Pa") = 0.4e+6;
            parameter Real E_thoracic_aorta_C104(unit = "Pa") = 0.4e+6;
            parameter Real E_thoracic_aorta_C108(unit = "Pa") = 0.4e+6;
            parameter Real E_thoracic_aorta_C112(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C114(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C136(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C164(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C176(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C188(unit = "Pa") = 0.4e+6;
            parameter Real E_abdominal_aorta_C192(unit = "Pa") = 0.4e+6;
            parameter Real E_posterior_intercostal_T1_R98(unit = "Pa") = 0.4e+6;
            parameter Real E_posterior_intercostal_T1_L102(unit = "Pa") = 0.4e+6;
            parameter Real E_posterior_intercostal_T2_R106(unit = "Pa") = 0.4e+6;
            parameter Real E_posterior_intercostal_T2_L110(unit = "Pa") = 0.4e+6;
            parameter Real E_celiac_trunk_C116(unit = "Pa") = 0.4e+6;
            parameter Real E_splenic_T2_C118(unit = "Pa") = 0.4e+6;
            parameter Real E_left_gastric_T3_C120(unit = "Pa") = 0.4e+6;
            parameter Real E_splenic_T2_C122(unit = "Pa") = 0.4e+6;
            parameter Real E_dorsal_pancreatic_T1_C124(unit = "Pa") = 0.4e+6;
            parameter Real E_splenic_T2_C126(unit = "Pa") = 0.4e+6;
            parameter Real E_common_hepatic_C128(unit = "Pa") = 0.4e+6;
            parameter Real E_hepatic_artery_proper_C130(unit = "Pa") = 0.4e+6;
            parameter Real E_hepatic_artery_proper_left_branch_C132(unit = "Pa") = 0.4e+6;
            parameter Real E_hepatic_artery_proper_right_branch_C134(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C138(unit = "Pa") = 0.4e+6;
            parameter Real E_middle_colic_T8_C140(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C142(unit = "Pa") = 0.4e+6;
            parameter Real E_jejunal_3_T10_C144(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C146(unit = "Pa") = 0.4e+6;
            parameter Real E_jejunal_6_T11_C148(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C150(unit = "Pa") = 0.4e+6;
            parameter Real E_ileocolic_T9_C152(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C154(unit = "Pa") = 0.4e+6;
            parameter Real E_ileal_4_T12_C156(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C158(unit = "Pa") = 0.4e+6;
            parameter Real E_ileal_6_T13_C160(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_mesenteric_T4_C162(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_L166(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_anterior_branch_L168(unit = "Pa") = 0.4e+6;
            parameter Real E_inferior_segmental_T5_L170(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_segmental_T4_L172(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_posterior_branch_T3_L174(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_R178(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_anterior_branch_R180(unit = "Pa") = 0.4e+6;
            parameter Real E_superior_segmental_T4_R182(unit = "Pa") = 0.4e+6;
            parameter Real E_inferior_segmental_T5_R184(unit = "Pa") = 0.4e+6;
            parameter Real E_renal_posterior_branch_T3_R186(unit = "Pa") = 0.4e+6;
            parameter Real E_inferior_mesenteric_T5_C190(unit = "Pa") = 0.4e+6;
            parameter Real E_common_iliac_R216(unit = "Pa") = 0.4e+6;
            parameter Real E_internal_iliac_T1_R218(unit = "Pa") = 1.6e+6;
            parameter Real E_external_iliac_R220(unit = "Pa") = 0.8e+6;
            parameter Real E_femoral_R222(unit = "Pa") = 0.8e+6;
            parameter Real E_profundus_T2_R224(unit = "Pa") = 0.8e+6;
            parameter Real E_femoral_R226(unit = "Pa") = 0.8e+6;
            parameter Real E_popliteal_R228(unit = "Pa") = 0.8e+6;
            parameter Real E_anterior_tibial_T3_R230(unit = "Pa") = 1.6e+6;
            parameter Real E_popliteal_R232(unit = "Pa") = 1.6e+6;
            parameter Real E_tibiofibular_trunk_R234(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_tibial_T4_R236(unit = "Pa") = 1.6e+6;
            parameter Real E_common_iliac_L194(unit = "Pa") = 0.4e+6;
            parameter Real E_internal_iliac_T1_L196(unit = "Pa") = 1.6e+6;
            parameter Real E_external_iliac_L198(unit = "Pa") = 0.8e+6;
            parameter Real E_femoral_L200(unit = "Pa") = 0.8e+6;
            parameter Real E_profundus_T2_L202(unit = "Pa") = 0.8e+6;
            parameter Real E_femoral_L204(unit = "Pa") = 0.8e+6;
            parameter Real E_popliteal_L206(unit = "Pa") = 0.8e+6;
            parameter Real E_anterior_tibial_T3_L208(unit = "Pa") = 1.6e+6;
            parameter Real E_popliteal_L210(unit = "Pa") = 1.6e+6;
            parameter Real E_tibiofibular_trunk_L212(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_tibial_T4_L214(unit = "Pa") = 1.6e+6;
            parameter Real E_subclavian_R28(unit = "Pa") = 0.4e+6;
            parameter Real E_subclavian_R30(unit = "Pa") = 0.4e+6;
            parameter Real E_axillary_R32(unit = "Pa") = 0.4e+6;
            parameter Real E_brachial_R34(unit = "Pa") = 0.4e+6;
            parameter Real E_ulnar_T2_R36(unit = "Pa") = 0.8e+6;
            parameter Real E_common_interosseous_R38(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_interosseous_T3_R40(unit = "Pa") = 1.6e+6;
            parameter Real E_ulnar_T2_R42(unit = "Pa") = 0.8e+6;
            parameter Real E_radial_T1_R44(unit = "Pa") = 0.8e+6;
            parameter Real E_subclavian_L66(unit = "Pa") = 0.4e+6;
            parameter Real E_subclavian_L78(unit = "Pa") = 0.4e+6;
            parameter Real E_axillary_L80(unit = "Pa") = 0.4e+6;
            parameter Real E_brachial_L82(unit = "Pa") = 0.4e+6;
            parameter Real E_ulnar_T2_L84(unit = "Pa") = 0.8e+6;
            parameter Real E_common_interosseous_L86(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_interosseous_T3_L88(unit = "Pa") = 1.6e+6;
            parameter Real E_ulnar_T2_L90(unit = "Pa") = 0.8e+6;
            parameter Real E_radial_T1_L92(unit = "Pa") = 0.8e+6;
            parameter Real E_common_carotid_R6_A(unit = "Pa") = 0.2e+6;
            parameter Real E_common_carotid_R6_B(unit = "Pa") = 0.2e+6;
            parameter Real E_common_carotid_R6_C(unit = "Pa") = 0.2e+6;
            parameter Real E_internal_carotid_R8_A(unit = "Pa") = 0.8e+6;
            parameter Real E_internal_carotid_R8_B(unit = "Pa") = 0.8e+6;
            parameter Real E_internal_carotid_R8_C(unit = "Pa") = 1.6e+6;
            parameter Real E_external_carotid_T2_R26(unit = "Pa") = 0.8e+6;
            parameter Real E_common_carotid_L48_A(unit = "Pa") = 0.2e+6;
            parameter Real E_common_carotid_L48_B(unit = "Pa") = 0.2e+6;
            parameter Real E_common_carotid_L48_C(unit = "Pa") = 0.2e+6;
            parameter Real E_common_carotid_L48_D(unit = "Pa") = 0.2e+6;
            parameter Real E_internal_carotid_L50_A(unit = "Pa") = 0.8e+6;
            parameter Real E_internal_carotid_L50_B(unit = "Pa") = 0.8e+6;
            parameter Real E_internal_carotid_L50_C(unit = "Pa") = 1.6e+6;
            parameter Real E_external_carotid_T2_L62(unit = "Pa") = 0.8e+6;
            parameter Real E_vertebral_L2(unit = "Pa") = 0.8e+6;
            parameter Real E_vertebral_R272(unit = "Pa") = 0.8e+6;
            parameter Real E_basilar_C4(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_cerebral_precommunicating_part_L6(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_cerebral_precommunicating_part_R204(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_communicating_L8(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_communicating_R206(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_cerebral_postcommunicating_part_L12(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_cerebral_postcommunicating_part_R208(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_L14(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_R210(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_anterior_temporal_branch_T111_R212(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_anterior_temporal_branch_T46_L16(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_L18(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_R214(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_intermediate_temporal_branch_T47_L20(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_intermediate_temporal_branch_T76_R216(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_L22(unit = "Pa") = 1.6e+6;
            parameter Real E_occipital_lateral_R218(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_posterior_temporal_branch_T48_L24(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_occipital_posterior_temporal_branch_T112_R220(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_L26(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_R222(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_dorsal_branch_to_corpus_callosum_L28(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_dorsal_branch_to_corpus_callosum_R224(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_parieto_occipital_branch_T60_L30(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_parieto_occipital_branch_T124_R226(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_L32(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_R228(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_precuneal_branch_T61_L34(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_precuneal_branch_T125_R230(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_L36(unit = "Pa") = 1.6e+6;
            parameter Real E_pericallosal_R232(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_L38(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_R234(unit = "Pa") = 1.6e+6;
            parameter Real E_distal_medial_striate_T44_L40(unit = "Pa") = 1.6e+6;
            parameter Real E_distal_medial_striate_T109_R236(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_L42(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_R238(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_communicating_C44(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_L110(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_cerebral_R46(unit = "Pa") = 1.6e+6;
            parameter Real E_internal_carotid_L112(unit = "Pa") = 1.6e+6;
            parameter Real E_internal_carotid_R48(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_L114(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_R52(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_choroidal_T34_L116(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_choroidal_T98_R54(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_L118(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_R56(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_L120(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_R58(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_frontobasal_T45_L122(unit = "Pa") = 1.6e+6;
            parameter Real E_lateral_frontobasal_T110_R60(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_L124(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_R62(unit = "Pa") = 1.6e+6;
            parameter Real E_prefrontal_T65_L126(unit = "Pa") = 1.6e+6;
            parameter Real E_prefrontal_T130_R64(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_L128(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_superior_terminal_branch_R66(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_precentral_sulcus_T38_L130(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_precentral_sulcus_T103_R68(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_central_sulcus_T36_L132(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_central_sulcus_T101_R70(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_precentral_sulcus_T38_L134(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_precentral_sulcus_T103_R72(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L136(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R74(unit = "Pa") = 1.6e+6;
            parameter Real E_polar_temporal_T63_L138(unit = "Pa") = 1.6e+6;
            parameter Real E_polar_temporal_T127_R76(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L140(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R78(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_anterior_temporal_branch_T55_L142(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_anterior_temporal_branch_T119_R80(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L144(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R82(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_middle_temporal_branch_T57_L146(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_middle_temporal_branch_T121_R84(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L148(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R86(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_postcentral_sulcus_T37_L150(unit = "Pa") = 1.6e+6;
            parameter Real E_artery_of_postcentral_sulcus_T102_R88(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L152(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R90(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporal_branch_T58_L154(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporal_branch_T122_R92(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporo_occipital_branch_T59_L156(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporo_occipital_branch_T123_R94(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporal_branch_T58_L158(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_posterior_temporal_branch_T122_R96(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L160(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R98(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_parietal_T35_L162(unit = "Pa") = 1.6e+6;
            parameter Real E_anterior_parietal_T100_R100(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_L164(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_inferior_terminal_branch_R102(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_branch_to_angular_gyrus_T56_L166(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_branch_to_angular_gyrus_T120_R104(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_parietal_T64_L168(unit = "Pa") = 1.6e+6;
            parameter Real E_posterior_parietal_T129_R106(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_branch_to_angular_gyrus_T56_L170(unit = "Pa") = 1.6e+6;
            parameter Real E_middle_cerebral_branch_to_angular_gyrus_T120_R108(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_L172(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_R240(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_intermediomedial_frontal_branch_T41_L174(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_intermediomedial_frontal_branch_T106_R242(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_L176(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_R244(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_posteromedial_frontal_branch_T43_L178(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_posteromedial_frontal_branch_T108_R246(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_L180(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_R248(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_cingular_branch_T40_L182(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_cingular_branch_T105_R250(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_L184(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_R252(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_paracentral_branch_T42_L186(unit = "Pa") = 1.6e+6;
            parameter Real E_callosomarginal_paracentral_branch_T107_R254(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_L188(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_R256(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_occipitotemporal_branch_T52_L190(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_occipitotemporal_branch_T80_R258(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_L192(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_R260(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parieto_occipital_branch_T54_L194(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parieto_occipital_branch_T118_R262(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parietal_branch_T53_L196(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parietal_branch_T81_R264(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parieto_occipital_branch_T54_L198(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_parieto_occipital_branch_T118_R266(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_L200(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_R268(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_calcarine_branch_T51_L202(unit = "Pa") = 1.6e+6;
            parameter Real E_medial_occipital_calcarine_branch_T79_R270(unit = "Pa") = 1.6e+6;
          equation

          end Parameters_Systemic;

          model Parameters_Venous
            parameter Real r_superior_vena_cava_C2(unit = "m") = 0.975e-2;
            parameter Real r_azygos_vein_T1_C4(unit = "m") = 0.38e-2;
            parameter Real r_superior_vena_cava_C88(unit = "m") = 0.975e-2;
            parameter Real r_azygos_vein_T1_C86(unit = "m") = 0.38e-2;
            parameter Real r_inferior_vena_cava_C8(unit = "m") = 0.995e-2;
            parameter Real r_hepatic_vein_T1_C10(unit = "m") = 0.6965e-2;
            parameter Real r_inferior_vena_cava_C12(unit = "m") = 0.98728e-2;
            parameter Real r_venous_perforator_T2_C14(unit = "m") = 0.4975e-2;
            parameter Real r_inferior_vena_cava_C16(unit = "m") = 0.94787e-2;
            parameter Real r_renal_vein_T1_R18(unit = "m") = 0.6e-2;
            parameter Real r_inferior_vena_cava_C20(unit = "m") = 0.94787e-2;
            parameter Real r_renal_vein_T1_L22(unit = "m") = 0.55e-2;
            parameter Real r_inferior_vena_cava_C24(unit = "m") = 0.94661e-2;
            parameter Real r_common_iliac_vein_L56(unit = "m") = 0.6314e-2;
            parameter Real r_common_iliac_vein_R26(unit = "m") = 0.6314e-2;
            parameter Real r_external_iliac_vein_R28(unit = "m") = 0.63e-2;
            parameter Real r_internal_iliac_vein_T1_R30(unit = "m") = 0.491e-2;
            parameter Real r_external_iliac_vein_R32(unit = "m") = 0.63e-2;
            parameter Real r_femoral_vein_R34(unit = "m") = 0.568e-2;
            parameter Real r_great_saphenous_vein_T7_R36(unit = "m") = 0.181e-2;
            parameter Real r_femoral_vein_R38(unit = "m") = 0.568e-2;
            parameter Real r_profunda_femoris_vein_T2_R40(unit = "m") = 0.4e-2;
            parameter Real r_femoral_vein_R42(unit = "m") = 0.568e-2;
            parameter Real r_venous_perforator_T3_R44(unit = "m") = 0.2e-2;
            parameter Real r_femoral_vein_R46(unit = "m") = 0.568e-2;
            parameter Real r_popliteal_vein_R48(unit = "m") = 0.381e-2;
            parameter Real r_anterior_tibial_vein_T4_R50(unit = "m") = 0.1175e-2;
            parameter Real r_popliteal_vein_R52(unit = "m") = 0.381e-2;
            parameter Real r_posterior_tibial_vein_T6_R54(unit = "m") = 0.17e-2;
            parameter Real r_external_iliac_vein_L58(unit = "m") = 0.63e-2;
            parameter Real r_internal_iliac_vein_T1_L60(unit = "m") = 0.491e-2;
            parameter Real r_external_iliac_vein_L62(unit = "m") = 0.63e-2;
            parameter Real r_femoral_vein_L64(unit = "m") = 0.568e-2;
            parameter Real r_great_saphenous_vein_T7_L66(unit = "m") = 0.181e-2;
            parameter Real r_femoral_vein_L68(unit = "m") = 0.568e-2;
            parameter Real r_profunda_femoris_vein_T2_L70(unit = "m") = 0.4e-2;
            parameter Real r_femoral_vein_L72(unit = "m") = 0.568e-2;
            parameter Real r_venous_perforator_T3_L74(unit = "m") = 0.568e-2;
            parameter Real r_femoral_vein_L76(unit = "m") = 0.568e-2;
            parameter Real r_popliteal_vein_L78(unit = "m") = 0.381e-2;
            parameter Real r_anterior_tibial_vein_T4_L80(unit = "m") = 0.1175e-2;
            parameter Real r_popliteal_vein_L82(unit = "m") = 0.381e-2;
            parameter Real r_posterior_tibial_vein_T6_L84(unit = "m") = 0.17e-2;
            parameter Real r_brachiocephalic_vein_R90(unit = "m") = 0.8e-2;
            parameter Real r_brachiocephalic_vein_L124(unit = "m") = 0.75e-2;
            parameter Real r_vertebral_vein_R92(unit = "m") = 0.27e-2;
            parameter Real r_brachiocephalic_vein_R94(unit = "m") = 0.8e-2;
            parameter Real r_subclavian_vein_R96(unit = "m") = 0.56e-2;
            parameter Real r_internal_jugular_vein_R122(unit = "m") = 0.75e-2;
            parameter Real r_external_jugular_vein_R98(unit = "m") = 0.225e-2;
            parameter Real r_subclavian_vein_R100(unit = "m") = 0.56e-2;
            parameter Real r_axillary_vein_R102(unit = "m") = 0.56e-2;
            parameter Real r_brachial_vein_R104(unit = "m") = 0.185e-2;
            parameter Real r_brachial_vein_R114(unit = "m") = 0.17e-2;
            parameter Real r_venous_perforator_T2_R106(unit = "m") = 0.17e-2;
            parameter Real r_brachial_vein_R108(unit = "m") = 0.185e-2;
            parameter Real r_ulnar_vein_T7_R110(unit = "m") = 0.085e-2;
            parameter Real r_brachial_vein_R112(unit = "m") = 0.185e-2;
            parameter Real r_venous_perforator_T1_R116(unit = "m") = 0.185e-2;
            parameter Real r_brachial_vein_R118(unit = "m") = 0.17e-2;
            parameter Real r_radial_vein_T3_R120(unit = "m") = 0.0665e-2;
            parameter Real r_vertebral_vein_L126(unit = "m") = 0.27e-2;
            parameter Real r_brachiocephalic_vein_L128(unit = "m") = 0.75e-2;
            parameter Real r_subclavian_vein_L130(unit = "m") = 0.56e-2;
            parameter Real r_internal_jugular_vein_L156(unit = "m") = 0.6e-2;
            parameter Real r_external_jugular_vein_L132(unit = "m") = 0.225e-2;
            parameter Real r_subclavian_vein_L134(unit = "m") = 0.56e-2;
            parameter Real r_axillary_vein_L136(unit = "m") = 0.56e-2;
            parameter Real r_brachial_vein_L138(unit = "m") = 0.185e-2;
            parameter Real r_brachial_vein_L148(unit = "m") = 0.17e-2;
            parameter Real r_venous_perforator_T2_L140(unit = "m") = 0.185e-2;
            parameter Real r_brachial_vein_L142(unit = "m") = 0.185e-2;
            parameter Real r_ulnar_vein_T7_L144(unit = "m") = 0.085e-2;
            parameter Real r_brachial_vein_L146(unit = "m") = 0.185e-2;
            parameter Real r_venous_perforator_T1_L150(unit = "m") = 0.17e-2;
            parameter Real r_brachial_vein_L152(unit = "m") = 0.17e-2;
            parameter Real r_radial_vein_T3_L154(unit = "m") = 0.0665e-2;
            parameter Real h_superior_vena_cava_C2(unit = "m") = 0.11778e-2;
            parameter Real h_azygos_vein_T1_C4(unit = "m") = 0.06384e-2;
            parameter Real h_superior_vena_cava_C88(unit = "m") = 0.11778e-2;
            parameter Real h_azygos_vein_T1_C86(unit = "m") = 0.06384e-2;
            parameter Real h_inferior_vena_cava_C8(unit = "m") = 0.11974e-2;
            parameter Real h_hepatic_vein_T1_C10(unit = "m") = 0.09111e-2;
            parameter Real h_inferior_vena_cava_C12(unit = "m") = 0.11899e-2;
            parameter Real h_venous_perforator_T2_C14(unit = "m") = 0.0736e-2;
            parameter Real h_inferior_vena_cava_C16(unit = "m") = 0.11513e-2;
            parameter Real h_renal_vein_T1_R18(unit = "m") = 0.08241e-2;
            parameter Real h_inferior_vena_cava_C20(unit = "m") = 0.11513e-2;
            parameter Real h_renal_vein_T1_L22(unit = "m") = 0.07806e-2;
            parameter Real h_inferior_vena_cava_C24(unit = "m") = 0.11501e-2;
            parameter Real h_common_iliac_vein_L56(unit = "m") = 0.0852e-2;
            parameter Real h_common_iliac_vein_R26(unit = "m") = 0.0852e-2;
            parameter Real h_external_iliac_vein_R28(unit = "m") = 0.08508e-2;
            parameter Real h_internal_iliac_vein_T1_R30(unit = "m") = 0.07306e-2;
            parameter Real h_external_iliac_vein_R32(unit = "m") = 0.08508e-2;
            parameter Real h_femoral_vein_R34(unit = "m") = 0.07962e-2;
            parameter Real h_great_saphenous_vein_T7_R36(unit = "m") = 0.04381e-2;
            parameter Real h_femoral_vein_R38(unit = "m") = 0.07962e-2;
            parameter Real h_profunda_femoris_vein_T2_R40(unit = "m") = 0.0655e-2;
            parameter Real h_femoral_vein_R42(unit = "m") = 0.07962e-2;
            parameter Real h_venous_perforator_T3_R44(unit = "m") = 0.0463e-2;
            parameter Real h_femoral_vein_R46(unit = "m") = 0.07962e-2;
            parameter Real h_popliteal_vein_R48(unit = "m") = 0.06392e-2;
            parameter Real h_anterior_tibial_vein_T4_R50(unit = "m") = 0.03354e-2;
            parameter Real h_popliteal_vein_R52(unit = "m") = 0.06392e-2;
            parameter Real h_posterior_tibial_vein_T6_R54(unit = "m") = 0.04226e-2;
            parameter Real h_external_iliac_vein_L58(unit = "m") = 0.08508e-2;
            parameter Real h_internal_iliac_vein_T1_L60(unit = "m") = 0.07306e-2;
            parameter Real h_external_iliac_vein_L62(unit = "m") = 0.08508e-2;
            parameter Real h_femoral_vein_L64(unit = "m") = 0.07962e-2;
            parameter Real h_great_saphenous_vein_T7_L66(unit = "m") = 0.04381e-2;
            parameter Real h_femoral_vein_L68(unit = "m") = 0.07962e-2;
            parameter Real h_profunda_femoris_vein_T2_L70(unit = "m") = 0.0655e-2;
            parameter Real h_femoral_vein_L72(unit = "m") = 0.07962e-2;
            parameter Real h_venous_perforator_T3_L74(unit = "m") = 0.07962e-2;
            parameter Real h_femoral_vein_L76(unit = "m") = 0.07962e-2;
            parameter Real h_popliteal_vein_L78(unit = "m") = 0.06392e-2;
            parameter Real h_anterior_tibial_vein_T4_L80(unit = "m") = 0.03354e-2;
            parameter Real h_popliteal_vein_L82(unit = "m") = 0.06392e-2;
            parameter Real h_posterior_tibial_vein_T6_L84(unit = "m") = 0.04226e-2;
            parameter Real h_brachiocephalic_vein_R90(unit = "m") = 0.10082e-2;
            parameter Real h_brachiocephalic_vein_L124(unit = "m") = 0.09609e-2;
            parameter Real h_vertebral_vein_R92(unit = "m") = 0.05402e-2;
            parameter Real h_brachiocephalic_vein_R94(unit = "m") = 0.10082e-2;
            parameter Real h_subclavian_vein_R96(unit = "m") = 0.07892e-2;
            parameter Real h_internal_jugular_vein_R122(unit = "m") = 0.09609e-2;
            parameter Real h_external_jugular_vein_R98(unit = "m") = 0.04928e-2;
            parameter Real h_subclavian_vein_R100(unit = "m") = 0.07892e-2;
            parameter Real h_axillary_vein_R102(unit = "m") = 0.07892e-2;
            parameter Real h_brachial_vein_R104(unit = "m") = 0.04435e-2;
            parameter Real h_brachial_vein_R114(unit = "m") = 0.04226e-2;
            parameter Real h_venous_perforator_T2_R106(unit = "m") = 0.04226e-2;
            parameter Real h_brachial_vein_R108(unit = "m") = 0.04435e-2;
            parameter Real h_ulnar_vein_T7_R110(unit = "m") = 0.02665e-2;
            parameter Real h_brachial_vein_R112(unit = "m") = 0.04435e-2;
            parameter Real h_venous_perforator_T1_R116(unit = "m") = 0.04435e-2;
            parameter Real h_brachial_vein_R118(unit = "m") = 0.04226e-2;
            parameter Real h_radial_vein_T3_R120(unit = "m") = 0.02206e-2;
            parameter Real h_vertebral_vein_L126(unit = "m") = 0.05402e-2;
            parameter Real h_brachiocephalic_vein_L128(unit = "m") = 0.09609e-2;
            parameter Real h_subclavian_vein_L130(unit = "m") = 0.07892e-2;
            parameter Real h_internal_jugular_vein_L156(unit = "m") = 0.08241e-2;
            parameter Real h_external_jugular_vein_L132(unit = "m") = 0.04928e-2;
            parameter Real h_subclavian_vein_L134(unit = "m") = 0.07892e-2;
            parameter Real h_axillary_vein_L136(unit = "m") = 0.07892e-2;
            parameter Real h_brachial_vein_L138(unit = "m") = 0.04435e-2;
            parameter Real h_brachial_vein_L148(unit = "m") = 0.04226e-2;
            parameter Real h_venous_perforator_T2_L140(unit = "m") = 0.04435e-2;
            parameter Real h_brachial_vein_L142(unit = "m") = 0.04435e-2;
            parameter Real h_ulnar_vein_T7_L144(unit = "m") = 0.02665e-2;
            parameter Real h_brachial_vein_L146(unit = "m") = 0.04435e-2;
            parameter Real h_venous_perforator_T1_L150(unit = "m") = 0.04226e-2;
            parameter Real h_brachial_vein_L152(unit = "m") = 0.04226e-2;
            parameter Real h_radial_vein_T3_L154(unit = "m") = 0.02206e-2;
            parameter Real l_superior_vena_cava_C2(unit = "m") = 1.19864e-2;
            parameter Real l_azygos_vein_T1_C4(unit = "m") = 24.1235e-2;
            parameter Real l_superior_vena_cava_C88(unit = "m") = 2.06549e-2;
            parameter Real l_azygos_vein_T1_C86(unit = "m") = 4.16471e-2;
            parameter Real l_inferior_vena_cava_C8(unit = "m") = 1.72606e-2;
            parameter Real l_hepatic_vein_T1_C10(unit = "m") = 1.38104e-2;
            parameter Real l_inferior_vena_cava_C12(unit = "m") = 4.75594e-2;
            parameter Real l_venous_perforator_T2_C14(unit = "m") = 1.61605e-2;
            parameter Real l_inferior_vena_cava_C16(unit = "m") = 4.05694e-2;
            parameter Real l_renal_vein_T1_R18(unit = "m") = 2.98282e-2;
            parameter Real l_inferior_vena_cava_C20(unit = "m") = 0.283038e-2;
            parameter Real l_renal_vein_T1_L22(unit = "m") = 3.13626e-2;
            parameter Real l_inferior_vena_cava_C24(unit = "m") = 11.3168e-2;
            parameter Real l_common_iliac_vein_L56(unit = "m") = 6.24014e-2;
            parameter Real l_common_iliac_vein_R26(unit = "m") = 5.73581e-2;
            parameter Real l_external_iliac_vein_R28(unit = "m") = 0.840236e-2;
            parameter Real l_internal_iliac_vein_T1_R30(unit = "m") = 5.91456e-2;
            parameter Real l_external_iliac_vein_R32(unit = "m") = 9.74495e-2;
            parameter Real l_femoral_vein_R34(unit = "m") = 0.521142e-2;
            parameter Real l_great_saphenous_vein_T7_R36(unit = "m") = 92.6589e-2;
            parameter Real l_femoral_vein_R38(unit = "m") = 4.13055e-2;
            parameter Real l_profunda_femoris_vein_T2_R40(unit = "m") = 22.9655e-2;
            parameter Real l_femoral_vein_R42(unit = "m") = 29.2094e-2;
            parameter Real l_venous_perforator_T3_R44(unit = "m") = 1.01988e-2;
            parameter Real l_femoral_vein_R46(unit = "m") = 1.60864e-2;
            parameter Real l_popliteal_vein_R48(unit = "m") = 14.5387e-2;
            parameter Real l_anterior_tibial_vein_T4_R50(unit = "m") = 38.09e-2;
            parameter Real l_popliteal_vein_R52(unit = "m") = 3.2338e-2;
            parameter Real l_posterior_tibial_vein_T6_R54(unit = "m") = 30.5697e-2;
            parameter Real l_external_iliac_vein_L58(unit = "m") = 0.841264e-2;
            parameter Real l_internal_iliac_vein_T1_L60(unit = "m") = 6.08336e-2;
            parameter Real l_external_iliac_vein_L62(unit = "m") = 9.56715e-2;
            parameter Real l_femoral_vein_L64(unit = "m") = 0.609248e-2;
            parameter Real l_great_saphenous_vein_T7_L66(unit = "m") = 92.6588e-2;
            parameter Real l_femoral_vein_L68(unit = "m") = 4.13055e-2;
            parameter Real l_profunda_femoris_vein_T2_L70(unit = "m") = 22.9654e-2;
            parameter Real l_femoral_vein_L72(unit = "m") = 29.2094e-2;
            parameter Real l_venous_perforator_T3_L74(unit = "m") = 1.01987e-2;
            parameter Real l_femoral_vein_L76(unit = "m") = 1.60863e-2;
            parameter Real l_popliteal_vein_L78(unit = "m") = 14.5387e-2;
            parameter Real l_anterior_tibial_vein_T4_L80(unit = "m") = 38.09e-2;
            parameter Real l_popliteal_vein_L82(unit = "m") = 3.23382e-2;
            parameter Real l_posterior_tibial_vein_T6_L84(unit = "m") = 30.5698e-2;
            parameter Real l_brachiocephalic_vein_R90(unit = "m") = 3.60711e-2;
            parameter Real l_brachiocephalic_vein_L124(unit = "m") = 7.69083e-2;
            parameter Real l_vertebral_vein_R92(unit = "m") = 19.7909e-2;
            parameter Real l_brachiocephalic_vein_R94(unit = "m") = 0.817729e-2;
            parameter Real l_subclavian_vein_R96(unit = "m") = 0.811432e-2;
            parameter Real l_internal_jugular_vein_R122(unit = "m") = 17.8797e-2;
            parameter Real l_external_jugular_vein_R98(unit = "m") = 13.807e-2;
            parameter Real l_subclavian_vein_R100(unit = "m") = 3.31851e-2;
            parameter Real l_axillary_vein_R102(unit = "m") = 11.6597e-2;
            parameter Real l_brachial_vein_R104(unit = "m") = 20.4344e-2;
            parameter Real l_brachial_vein_R114(unit = "m") = 21.6418e-2;
            parameter Real l_venous_perforator_T2_R106(unit = "m") = 1.64071e-2;
            parameter Real l_brachial_vein_R108(unit = "m") = 2.81322e-2;
            parameter Real l_ulnar_vein_T7_R110(unit = "m") = 26.5376e-2;
            parameter Real l_brachial_vein_R112(unit = "m") = 1.06711e-2;
            parameter Real l_venous_perforator_T1_R116(unit = "m") = 1.56083e-2;
            parameter Real l_brachial_vein_R118(unit = "m") = 2.085e-2;
            parameter Real l_radial_vein_T3_R120(unit = "m") = 25.8545e-2;
            parameter Real l_vertebral_vein_L126(unit = "m") = 18.5123e-2;
            parameter Real l_brachiocephalic_vein_L128(unit = "m") = 0.470158e-2;
            parameter Real l_subclavian_vein_L130(unit = "m") = 0.721557e-2;
            parameter Real l_internal_jugular_vein_L156(unit = "m") = 16.9554e-2;
            parameter Real l_external_jugular_vein_L132(unit = "m") = 13.5402e-2;
            parameter Real l_subclavian_vein_L134(unit = "m") = 3.23403e-2;
            parameter Real l_axillary_vein_L136(unit = "m") = 11.7916e-2;
            parameter Real l_brachial_vein_L138(unit = "m") = 20.4344e-2;
            parameter Real l_brachial_vein_L148(unit = "m") = 21.6418e-2;
            parameter Real l_venous_perforator_T2_L140(unit = "m") = 1.64073e-2;
            parameter Real l_brachial_vein_L142(unit = "m") = 2.81325e-2;
            parameter Real l_ulnar_vein_T7_L144(unit = "m") = 26.5376e-2;
            parameter Real l_brachial_vein_L146(unit = "m") = 1.06711e-2;
            parameter Real l_venous_perforator_T1_L150(unit = "m") = 1.56083e-2;
            parameter Real l_brachial_vein_L152(unit = "m") = 2.085e-2;
            parameter Real l_radial_vein_T3_L154(unit = "m") = 25.8545e-2;
            parameter Real C_superior_vena_cava_C2(unit = "m6.J-1") = 0.555603e-10;
            parameter Real C_azygos_vein_T1_C4(unit = "m6.J-1") = 1.22148e-10;
            parameter Real C_superior_vena_cava_C88(unit = "m6.J-1") = 0.957416e-10;
            parameter Real C_azygos_vein_T1_C86(unit = "m6.J-1") = 0.210878e-10;
            parameter Real C_inferior_vena_cava_C8(unit = "m6.J-1") = 0.829339e-10;
            parameter Real C_hepatic_vein_T1_C10(unit = "m6.J-1") = 0.30168e-10;
            parameter Real C_inferior_vena_cava_C12(unit = "m6.J-1") = 2.21275e-10;
            parameter Real C_venous_perforator_T2_C14(unit = "m6.J-1") = 0.159254e-10;
            parameter Real C_inferior_vena_cava_C16(unit = "m6.J-1") = 1.80509e-10;
            parameter Real C_renal_vein_T1_R18(unit = "m6.J-1") = 0.460512e-10;
            parameter Real C_inferior_vena_cava_C20(unit = "m6.J-1") = 0.123145e-10;
            parameter Real C_renal_vein_T1_L22(unit = "m6.J-1") = 0.393746e-10;
            parameter Real C_inferior_vena_cava_C24(unit = "m6.J-1") = 4.63354e-10;
            parameter Real C_common_iliac_vein_L56(unit = "m6.J-1") = 1.08597e-10;
            parameter Real C_common_iliac_vein_R26(unit = "m6.J-1") = 0.998205e-10;
            parameter Real C_external_iliac_vein_R28(unit = "m6.J-1") = 0.14547e-10;
            parameter Real C_internal_iliac_vein_T1_R30(unit = "m6.J-1") = 0.564484e-10;
            parameter Real C_external_iliac_vein_R32(unit = "m6.J-1") = 1.68715e-10;
            parameter Real C_femoral_vein_R34(unit = "m6.J-1") = 0.0706573e-10;
            parameter Real C_great_saphenous_vein_T7_R36(unit = "m6.J-1") = 0.738807e-10;
            parameter Real C_femoral_vein_R38(unit = "m6.J-1") = 0.56e-10;
            parameter Real C_profunda_femoris_vein_T2_R40(unit = "m6.J-1") = 1.32176e-10;
            parameter Real C_femoral_vein_R42(unit = "m6.J-1") = 3.96026e-10;
            parameter Real C_venous_perforator_T3_R44(unit = "m6.J-1") = 0.00550536e-10;
            parameter Real C_femoral_vein_R46(unit = "m6.J-1") = 0.218102e-10;
            parameter Real C_popliteal_vein_R48(unit = "m6.J-1") = 0.741013e-10;
            parameter Real C_anterior_tibial_vein_T4_R50(unit = "m6.J-1") = 0.108531e-10;
            parameter Real C_popliteal_vein_R52(unit = "m6.J-1") = 0.164821e-10;
            parameter Real C_posterior_tibial_vein_T6_R54(unit = "m6.J-1") = 0.209333e-10;
            parameter Real C_external_iliac_vein_L58(unit = "m6.J-1") = 0.145648e-10;
            parameter Real C_internal_iliac_vein_T1_L60(unit = "m6.J-1") = 0.580595e-10;
            parameter Real C_external_iliac_vein_L62(unit = "m6.J-1") = 1.65636e-10;
            parameter Real C_femoral_vein_L64(unit = "m6.J-1") = 0.0826029e-10;
            parameter Real C_great_saphenous_vein_T7_L66(unit = "m6.J-1") = 0.738807e-10;
            parameter Real C_femoral_vein_L68(unit = "m6.J-1") = 0.560026e-10;
            parameter Real C_profunda_femoris_vein_T2_L70(unit = "m6.J-1") = 1.32176e-10;
            parameter Real C_femoral_vein_L72(unit = "m6.J-1") = 3.96026e-10;
            parameter Real C_venous_perforator_T3_L74(unit = "m6.J-1") = 0.138275e-10;
            parameter Real C_femoral_vein_L76(unit = "m6.J-1") = 0.218101e-10;
            parameter Real C_popliteal_vein_L78(unit = "m6.J-1") = 0.741013e-10;
            parameter Real C_anterior_tibial_vein_T4_L80(unit = "m6.J-1") = 0.108531e-10;
            parameter Real C_popliteal_vein_L82(unit = "m6.J-1") = 0.164822e-10;
            parameter Real C_posterior_tibial_vein_T6_L84(unit = "m6.J-1") = 0.209333e-10;
            parameter Real C_brachiocephalic_vein_R90(unit = "m6.J-1") = 1.07899e-10;
            parameter Real C_brachiocephalic_vein_L124(unit = "m6.J-1") = 1.98898e-10;
            parameter Real C_vertebral_vein_R92(unit = "m6.J-1") = 0.424745e-10;
            parameter Real C_brachiocephalic_vein_R94(unit = "m6.J-1") = 0.244606e-10;
            parameter Real C_subclavian_vein_R96(unit = "m6.J-1") = 0.106357e-10;
            parameter Real C_internal_jugular_vein_R122(unit = "m6.J-1") = 3.36401e-10;
            parameter Real C_external_jugular_vein_R98(unit = "m6.J-1") = 0.187997e-10;
            parameter Real C_subclavian_vein_R100(unit = "m6.J-1") = 0.434967e-10;
            parameter Real C_axillary_vein_R102(unit = "m6.J-1") = 1.52827e-10;
            parameter Real C_brachial_vein_R104(unit = "m6.J-1") = 0.171851e-10;
            parameter Real C_brachial_vein_R114(unit = "m6.J-1") = 0.148197e-10;
            parameter Real C_venous_perforator_T2_R106(unit = "m6.J-1") = 0.0112351e-10;
            parameter Real C_brachial_vein_R108(unit = "m6.J-1") = 0.0236588e-10;
            parameter Real C_ulnar_vein_T7_R110(unit = "m6.J-1") = 0.0360248e-10;
            parameter Real C_brachial_vein_R112(unit = "m6.J-1") = 0.00897427e-10;
            parameter Real C_venous_perforator_T1_R116(unit = "m6.J-1") = 0.0131264e-10;
            parameter Real C_brachial_vein_R118(unit = "m6.J-1") = 0.0142775e-10;
            parameter Real C_radial_vein_T3_R120(unit = "m6.J-1") = 0.0203056e-10;
            parameter Real C_vertebral_vein_L126(unit = "m6.J-1") = 0.397304e-10;
            parameter Real C_brachiocephalic_vein_L128(unit = "m6.J-1") = 0.121591e-10;
            parameter Real C_subclavian_vein_L130(unit = "m6.J-1") = 0.0945766e-10;
            parameter Real C_internal_jugular_vein_L156(unit = "m6.J-1") = 1.92288e-10;
            parameter Real C_external_jugular_vein_L132(unit = "m6.J-1") = 0.184364e-10;
            parameter Real C_subclavian_vein_L134(unit = "m6.J-1") = 0.423894e-10;
            parameter Real C_axillary_vein_L136(unit = "m6.J-1") = 1.54556e-10;
            parameter Real C_brachial_vein_L138(unit = "m6.J-1") = 0.171851e-10;
            parameter Real C_brachial_vein_L148(unit = "m6.J-1") = 0.148197e-10;
            parameter Real C_venous_perforator_T2_L140(unit = "m6.J-1") = 0.0137984e-10;
            parameter Real C_brachial_vein_L142(unit = "m6.J-1") = 0.0236591e-10;
            parameter Real C_ulnar_vein_T7_L144(unit = "m6.J-1") = 0.0360249e-10;
            parameter Real C_brachial_vein_L146(unit = "m6.J-1") = 0.00897427e-10;
            parameter Real C_venous_perforator_T1_L150(unit = "m6.J-1") = 0.0106881e-10;
            parameter Real C_brachial_vein_L152(unit = "m6.J-1") = 0.0142775e-10;
            parameter Real C_radial_vein_T3_L154(unit = "m6.J-1") = 0.0203056e-10;
            parameter Real E_superior_vena_cava_C2(unit = "Pa") = 0.555603e+6;
            parameter Real E_azygos_vein_T1_C4(unit = "Pa") = 1.22148e+6;
            parameter Real E_superior_vena_cava_C88(unit = "Pa") = 0.957416e+6;
            parameter Real E_azygos_vein_T1_C86(unit = "Pa") = 0.210878e+6;
            parameter Real E_inferior_vena_cava_C8(unit = "Pa") = 0.829339e+6;
            parameter Real E_hepatic_vein_T1_C10(unit = "Pa") = 0.30168e+6;
            parameter Real E_inferior_vena_cava_C12(unit = "Pa") = 2.21275e+6;
            parameter Real E_venous_perforator_T2_C14(unit = "Pa") = 0.159254e+6;
            parameter Real E_inferior_vena_cava_C16(unit = "Pa") = 1.80509e+6;
            parameter Real E_renal_vein_T1_R18(unit = "Pa") = 0.460512e+6;
            parameter Real E_inferior_vena_cava_C20(unit = "Pa") = 0.123145e+6;
            parameter Real E_renal_vein_T1_L22(unit = "Pa") = 0.393746e+6;
            parameter Real E_inferior_vena_cava_C24(unit = "Pa") = 4.63354e+6;
            parameter Real E_common_iliac_vein_L56(unit = "Pa") = 1.08597e+6;
            parameter Real E_common_iliac_vein_R26(unit = "Pa") = 0.998205e+6;
            parameter Real E_external_iliac_vein_R28(unit = "Pa") = 0.14547e+6;
            parameter Real E_internal_iliac_vein_T1_R30(unit = "Pa") = 0.564484e+6;
            parameter Real E_external_iliac_vein_R32(unit = "Pa") = 1.68715e+6;
            parameter Real E_femoral_vein_R34(unit = "Pa") = 0.0706573e+6;
            parameter Real E_great_saphenous_vein_T7_R36(unit = "Pa") = 0.738807e+6;
            parameter Real E_femoral_vein_R38(unit = "Pa") = 0.56e+6;
            parameter Real E_profunda_femoris_vein_T2_R40(unit = "Pa") = 1.32176e+6;
            parameter Real E_femoral_vein_R42(unit = "Pa") = 3.96026e+6;
            parameter Real E_venous_perforator_T3_R44(unit = "Pa") = 0.00550536e+6;
            parameter Real E_femoral_vein_R46(unit = "Pa") = 0.218102e+6;
            parameter Real E_popliteal_vein_R48(unit = "Pa") = 0.741013e+6;
            parameter Real E_anterior_tibial_vein_T4_R50(unit = "Pa") = 0.108531e+6;
            parameter Real E_popliteal_vein_R52(unit = "Pa") = 0.164821e+6;
            parameter Real E_posterior_tibial_vein_T6_R54(unit = "Pa") = 0.209333e+6;
            parameter Real E_external_iliac_vein_L58(unit = "Pa") = 0.145648e+6;
            parameter Real E_internal_iliac_vein_T1_L60(unit = "Pa") = 0.580595e+6;
            parameter Real E_external_iliac_vein_L62(unit = "Pa") = 1.65636e+6;
            parameter Real E_femoral_vein_L64(unit = "Pa") = 0.0826029e+6;
            parameter Real E_great_saphenous_vein_T7_L66(unit = "Pa") = 0.738807e+6;
            parameter Real E_femoral_vein_L68(unit = "Pa") = 0.560026e+6;
            parameter Real E_profunda_femoris_vein_T2_L70(unit = "Pa") = 1.32176e+6;
            parameter Real E_femoral_vein_L72(unit = "Pa") = 3.96026e+6;
            parameter Real E_venous_perforator_T3_L74(unit = "Pa") = 0.138275e+6;
            parameter Real E_femoral_vein_L76(unit = "Pa") = 0.218101e+6;
            parameter Real E_popliteal_vein_L78(unit = "Pa") = 0.741013e+6;
            parameter Real E_anterior_tibial_vein_T4_L80(unit = "Pa") = 0.108531e+6;
            parameter Real E_popliteal_vein_L82(unit = "Pa") = 0.164822e+6;
            parameter Real E_posterior_tibial_vein_T6_L84(unit = "Pa") = 0.209333e+6;
            parameter Real E_brachiocephalic_vein_R90(unit = "Pa") = 1.07899e+6;
            parameter Real E_brachiocephalic_vein_L124(unit = "Pa") = 1.98898e+6;
            parameter Real E_vertebral_vein_R92(unit = "Pa") = 0.424745e+6;
            parameter Real E_brachiocephalic_vein_R94(unit = "Pa") = 0.244606e+6;
            parameter Real E_subclavian_vein_R96(unit = "Pa") = 0.106357e+6;
            parameter Real E_internal_jugular_vein_R122(unit = "Pa") = 3.36401e+6;
            parameter Real E_external_jugular_vein_R98(unit = "Pa") = 0.187997e+6;
            parameter Real E_subclavian_vein_R100(unit = "Pa") = 0.434967e+6;
            parameter Real E_axillary_vein_R102(unit = "Pa") = 1.52827e+6;
            parameter Real E_brachial_vein_R104(unit = "Pa") = 0.171851e+6;
            parameter Real E_brachial_vein_R114(unit = "Pa") = 0.148197e+6;
            parameter Real E_venous_perforator_T2_R106(unit = "Pa") = 0.0112351e+6;
            parameter Real E_brachial_vein_R108(unit = "Pa") = 0.0236588e+6;
            parameter Real E_ulnar_vein_T7_R110(unit = "Pa") = 0.0360248e+6;
            parameter Real E_brachial_vein_R112(unit = "Pa") = 0.00897427e+6;
            parameter Real E_venous_perforator_T1_R116(unit = "Pa") = 0.0131264e+6;
            parameter Real E_brachial_vein_R118(unit = "Pa") = 0.0142775e+6;
            parameter Real E_radial_vein_T3_R120(unit = "Pa") = 0.0203056e+6;
            parameter Real E_vertebral_vein_L126(unit = "Pa") = 0.397304e+6;
            parameter Real E_brachiocephalic_vein_L128(unit = "Pa") = 0.121591e+6;
            parameter Real E_subclavian_vein_L130(unit = "Pa") = 0.0945766e+6;
            parameter Real E_internal_jugular_vein_L156(unit = "Pa") = 1.92288e+6;
            parameter Real E_external_jugular_vein_L132(unit = "Pa") = 0.184364e+6;
            parameter Real E_subclavian_vein_L134(unit = "Pa") = 0.423894e+6;
            parameter Real E_axillary_vein_L136(unit = "Pa") = 1.54556e+6;
            parameter Real E_brachial_vein_L138(unit = "Pa") = 0.171851e+6;
            parameter Real E_brachial_vein_L148(unit = "Pa") = 0.148197e+6;
            parameter Real E_venous_perforator_T2_L140(unit = "Pa") = 0.0137984e+6;
            parameter Real E_brachial_vein_L142(unit = "Pa") = 0.0236591e+6;
            parameter Real E_ulnar_vein_T7_L144(unit = "Pa") = 0.0360249e+6;
            parameter Real E_brachial_vein_L146(unit = "Pa") = 0.00897427e+6;
            parameter Real E_venous_perforator_T1_L150(unit = "Pa") = 0.0106881e+6;
            parameter Real E_brachial_vein_L152(unit = "Pa") = 0.0142775e+6;
            parameter Real E_radial_vein_T3_L154(unit = "Pa") = 0.0203056e+6;
          equation

          end Parameters_Venous;
        end Parameters_Venous_cellml;

        end _b580e;

        package _7af7a4
        package Parameters86_cellml

          model Parameters_Coronary
            parameter Real C_corepi(unit = "m6.J-1") = 0.000555;
            parameter Real C_corint(unit = "m6.J-1") = 0.0009751;
            parameter Real C_corcap(unit = "m6.J-1") = 0.00705;
            parameter Real C_corvns(unit = "m6.J-1") = 0.018377;
            parameter Real R_corepi(unit = "J.s.m-6") = 704.0e+6;
            parameter Real R_corint(unit = "J.s.m-6") = 1350.0e+6;
            parameter Real R_corcap(unit = "J.s.m-6") = 564.0e+6;
            parameter Real R_corvns(unit = "J.s.m-6") = 197.0e+6;
            parameter Real I_corepi(unit = "J.s2.m-6") = 1e-6;
            parameter Real I_corint(unit = "J.s2.m-6") = 1e-6;
            parameter Real I_corcap(unit = "J.s2.m-6") = 1e-6;
            parameter Real I_corvns(unit = "J.s2.m-6") = 1e-6;
            parameter Real l_LM_1(unit = "m") = 12.1e-3;
            parameter Real l_LAD1_2(unit = "m") = 3.7e-3;
            parameter Real l_LAD2_3(unit = "m") = 7.4e-3;
            parameter Real l_LAD3_4(unit = "m") = 7.4e-3;
            parameter Real l_LAD4_5(unit = "m") = 3.7e-3;
            parameter Real l_LAD5_6(unit = "m") = 6.2e-3;
            parameter Real l_LAD6_7(unit = "m") = 6.2e-3;
            parameter Real l_LAD7_8(unit = "m") = 6.2e-3;
            parameter Real l_LAD8_9(unit = "m") = 15.6e-3;
            parameter Real l_LAD9_10(unit = "m") = 7.8e-3;
            parameter Real l_LAD10_11(unit = "m") = 12.8e-3;
            parameter Real l_LAD11_12(unit = "m") = 25.6e-3;
            parameter Real l_LAD12_13(unit = "m") = 22.9e-3;
            parameter Real l_LAD13_14(unit = "m") = 15.0e-3;
            parameter Real l_LAD14_15(unit = "m") = 7.4e-3;
            parameter Real l_LAD15_16(unit = "m") = 3.7e-3;
            parameter Real l_S1a_17(unit = "m") = 7.5e-3;
            parameter Real l_S1b_18(unit = "m") = 14.8e-3;
            parameter Real l_S1c_19(unit = "m") = 11.2e-3;
            parameter Real l_S2a_20(unit = "m") = 6.8e-3;
            parameter Real l_S2b_21(unit = "m") = 10.5e-3;
            parameter Real l_S3a_22(unit = "m") = 6.0e-3;
            parameter Real l_S3b_23(unit = "m") = 11.3e-3;
            parameter Real l_D1a_24(unit = "m") = 10.5e-3;
            parameter Real l_D1b_25(unit = "m") = 21.9e-3;
            parameter Real l_D1c_26(unit = "m") = 16.2e-3;
            parameter Real l_D1d_27(unit = "m") = 16.2e-3;
            parameter Real l_D2a_28(unit = "m") = 10.7e-3;
            parameter Real l_D2b_29(unit = "m") = 20.4e-3;
            parameter Real l_D2c_30(unit = "m") = 15.6e-3;
            parameter Real l_D2d_31(unit = "m") = 15.6e-3;
            parameter Real l_D3a_32(unit = "m") = 8.8e-3;
            parameter Real l_D3b_33(unit = "m") = 17.7e-3;
            parameter Real l_D3c_34(unit = "m") = 13.3e-3;
            parameter Real l_D3d_35(unit = "m") = 13.3e-3;
            parameter Real r_LM_1(unit = "m") = 2.25e-3;
            parameter Real r_LAD1_2(unit = "m") = 1.875e-3;
            parameter Real r_LAD2_3(unit = "m") = 1.85e-3;
            parameter Real r_LAD3_4(unit = "m") = 1.8e-3;
            parameter Real r_LAD4_5(unit = "m") = 1.725e-3;
            parameter Real r_LAD5_6(unit = "m") = 1.552e-3;
            parameter Real r_LAD6_7(unit = "m") = 1.493e-3;
            parameter Real r_LAD7_8(unit = "m") = 1.3351e-3;
            parameter Real r_LAD8_9(unit = "m") = 1.29e-3;
            parameter Real r_LAD9_10(unit = "m") = 1.14e-3;
            parameter Real r_LAD10_11(unit = "m") = 1.075e-3;
            parameter Real r_LAD11_12(unit = "m") = 1.0e-3;
            parameter Real r_LAD12_13(unit = "m") = 0.85e-3;
            parameter Real r_LAD13_14(unit = "m") = 0.7e-3;
            parameter Real r_LAD14_15(unit = "m") = 0.55e-3;
            parameter Real r_LAD15_16(unit = "m") = 0.45e-3;
            parameter Real r_S1a_17(unit = "m") = 1.055e-3;
            parameter Real r_S1b_18(unit = "m") = 0.65e-3;
            parameter Real r_S1c_19(unit = "m") = 0.5e-3;
            parameter Real r_S2a_20(unit = "m") = 0.55e-3;
            parameter Real r_S2b_21(unit = "m") = 0.465e-3;
            parameter Real r_S3a_22(unit = "m") = 0.55e-3;
            parameter Real r_S3b_23(unit = "m") = 0.465e-3;
            parameter Real r_D1a_24(unit = "m") = 1.05e-3;
            parameter Real r_D1b_25(unit = "m") = 0.95e-3;
            parameter Real r_D1c_26(unit = "m") = 0.75e-3;
            parameter Real r_D1d_27(unit = "m") = 0.6e-3;
            parameter Real r_D2a_28(unit = "m") = 0.95e-3;
            parameter Real r_D2b_29(unit = "m") = 0.85e-3;
            parameter Real r_D2c_30(unit = "m") = 0.7e-3;
            parameter Real r_D2d_31(unit = "m") = 0.55e-3;
            parameter Real r_D3a_32(unit = "m") = 0.85e-3;
            parameter Real r_D3b_33(unit = "m") = 0.8e-3;
            parameter Real r_D3c_34(unit = "m") = 0.65e-3;
            parameter Real r_D3d_35(unit = "m") = 0.51e-3;
            parameter Real E_LM_1(unit = "Pa") = 0.62e+6;
            parameter Real E_LAD1_2(unit = "Pa") = 0.64e+6;
            parameter Real E_LAD2_3(unit = "Pa") = 0.642e+6;
            parameter Real E_LAD3_4(unit = "Pa") = 0.648e+6;
            parameter Real E_LAD4_5(unit = "Pa") = 0.659e+6;
            parameter Real E_LAD5_6(unit = "Pa") = 0.693e+6;
            parameter Real E_LAD6_7(unit = "Pa") = 0.708e+6;
            parameter Real E_LAD7_8(unit = "Pa") = 0.758e+6;
            parameter Real E_LAD8_9(unit = "Pa") = 0.776e+6;
            parameter Real E_LAD9_10(unit = "Pa") = 0.846e+6;
            parameter Real E_LAD10_11(unit = "Pa") = 0.884e+6;
            parameter Real E_LAD11_12(unit = "Pa") = 0.932e+6;
            parameter Real E_LAD12_13(unit = "Pa") = 1.05e+6;
            parameter Real E_LAD13_14(unit = "Pa") = 1.2e+6;
            parameter Real E_LAD14_15(unit = "Pa") = 1.4e+6;
            parameter Real E_LAD15_16(unit = "Pa") = 1.55e+6;
            parameter Real E_S1a_17(unit = "Pa") = 0.9e+6;
            parameter Real E_S1b_18(unit = "Pa") = 1.26e+6;
            parameter Real E_S1c_19(unit = "Pa") = 1.47e+6;
            parameter Real E_S2a_20(unit = "Pa") = 1.4e+6;
            parameter Real E_S2b_21(unit = "Pa") = 1.53e+6;
            parameter Real E_S3a_22(unit = "Pa") = 1.4e+6;
            parameter Real E_S3b_23(unit = "Pa") = 1.53e+6;
            parameter Real E_D1a_24(unit = "Pa") = 0.9e+6;
            parameter Real E_D1b_25(unit = "Pa") = 0.97e+6;
            parameter Real E_D1c_26(unit = "Pa") = 1.15e+6;
            parameter Real E_D1d_27(unit = "Pa") = 1.33e+6;
            parameter Real E_D2a_28(unit = "Pa") = 0.97e+6;
            parameter Real E_D2b_29(unit = "Pa") = 1.05e+6;
            parameter Real E_D2c_30(unit = "Pa") = 1.2e+6;
            parameter Real E_D2d_31(unit = "Pa") = 1.39e+6;
            parameter Real E_D3a_32(unit = "Pa") = 1.05e+6;
            parameter Real E_D3b_33(unit = "Pa") = 1.1e+6;
            parameter Real E_D3c_34(unit = "Pa") = 1.26e+6;
            parameter Real E_D3d_35(unit = "Pa") = 1.45e+6;
          equation

          end Parameters_Coronary;

        end Parameters86_cellml;

        end _7af7a4;

        package SystemicTissueParameters

           annotation (Documentation(info="<html>
<p>Generated tissue parameters</p>
</html>",         revisions="<html>
<p>This revision was generated at 2019-07-15 11:36:55.332316</p>
</html>"));
        end SystemicTissueParameters;

        model environment
          Real time_(unit = "s");
        equation
          // GENERATED IMPLICIT TIME EQUATION - CHECK WITH THE DERIVATIVES
          time_ = time;

        end environment;

      end AdanVenousRed;

      package Adan86

      end Adan86;

      model HeartWrap

        input Real t;
        Real u_ra(unit = "Pa") = p_ra.u;
        Real v_aov(unit = "m3.s-1", start = 0) = v_lvalve.v;
        Real u_la(unit = "Pa") = p_la.u;
        Real v_puv(unit = "m3.s-1", start = 0) = v_rvalve.v;

        input Real u_sas(unit = "Pa");
        input Real u_par(unit = "Pa");
        input Real v_sup_venacava(unit = "m3.s-1");
        input Real v_inf_venacava(unit = "m3.s-1");
        input Real v_pvn(unit = "m3.s-1");
        Physiolibrary.Types.RealIO.FrequencyInput frequency annotation (Placement(
              transformation(extent={{-112,-20},{-72,20}}), iconTransformation(extent={{-120,
                  -20},{-80,20}})));

        Physiolibrary.Types.RealIO.PressureInput thoracic_pressure annotation (Placement(
              transformation(extent={{-28,-120},{12,-80}}), iconTransformation(extent={{-20,
                  -120},{20,-80}})));

        Interfaces.Pq_terminator_v p_ra(v=-(v_sup_venacava + v_inf_venacava))
          annotation (Placement(transformation(extent={{-100,16},{-80,36}})));
        Interfaces.Pq_terminator_v p_la(v=-v_pvn)
          annotation (Placement(transformation(extent={{100,-38},{80,-18}})));
        Interfaces.Pq_terminator_p v_rvalve(u=u_par)
          annotation (Placement(transformation(extent={{94,16},{74,36}})));
        Interfaces.Pq_terminator_p v_lvalve(u=u_sas)
          annotation (Placement(transformation(extent={{-100,-38},{-80,-18}})));
        Physiolibrary.Hydraulic.Components.IdealValveResistance
                             aorticValve(Pknee=0, _Ron(displayUnit="(mmHg.s)/ml") = 2399802.97347)
          annotation (Placement(transformation(extent={{-56,-38},{-76,-18}})));
        Physiolibrary.Hydraulic.Components.IdealValveResistance
                             tricuspidValve(Pknee=0, _Ron(displayUnit="(mmHg.s)/ml")=
               3159740.5817355)
          annotation (Placement(transformation(extent={{-50,16},{-30,36}})));
        Physiolibrary.Hydraulic.Components.Inertia
                Lav(I(displayUnit="mmHg.s2/ml") = 16250.665802014, volumeFlow_start(
              displayUnit="m3/s") = -1.4e-8)                annotation (
            Placement(transformation(
              extent={{-10,-10},{10,10}},
              rotation=180,
              origin={-32,-28})));
        Physiolibrary.Hydraulic.Components.Inertia
                Lpv(I(displayUnit="mmHg.s2/ml") = 19822.372560862, volumeFlow_start(
              displayUnit="m3/s") = -1.9e-9)
          annotation (Placement(transformation(extent={{8,16},{28,36}})));
        Physiolibrary.Hydraulic.Components.IdealValveResistance
                             pulmonaryValve(Pknee=0, _Ron(displayUnit="(mmHg.s)/ml")=
               733273.1307825)
          annotation (Placement(transformation(extent={{38,16},{58,36}})));
        Physiolibrary.Hydraulic.Components.IdealValveResistance
                             mitralValve(Pknee=0, _Ron(displayUnit="(mmHg.s)/ml") = 2106493.721157)
          annotation (Placement(transformation(extent={{28,-38},{8,-18}})));
        Physiolibrary.Hydraulic.Components.Inertia
                Ltc(I(displayUnit="mmHg.s2/ml") = 10678.18997523, volumeFlow_start(
              displayUnit="m3/s") = 0.0001372)
          annotation (Placement(transformation(extent={{-76,16},{-56,36}})));
        Physiolibrary.Hydraulic.Components.Inertia
                Lmt(I(displayUnit="mmHg.s2/ml") = 10261.557514558, volumeFlow_start(
              displayUnit="m3/s") = 0.0001141)                annotation (
            Placement(transformation(
              extent={{-10,-10},{10,10}},
              rotation=180,
              origin={46,-28})));
        Cardiovascular.Model.Smith2004.Parts.VentricularInteraction_flat.VentricularInteraction_flat
          ventricularInteraction_flat(
          lambdalv=33000,
          lambdaperi=30000,
          lambdas(displayUnit="1/m3") = 435000,
          lambdarv(displayUnit="1/m3") = 23000,
          Essept(displayUnit="mmHg/ml") = 6499999676.0309,
          V0peri=0.0002,
          Pi0sept=148.00118226939,
          Pi0rv=28.757638965416,
          Pi0lv=16.038683206025,
          Pi0peri=66.701190423724,
          Esrv=77993596.637775,
          Eslv=383941811.27772)
          annotation (Placement(transformation(extent={{-20,-20},{18,20}})));
      equation
        connect(Lav.q_out,aorticValve. q_in) annotation (Line(
            points={{-42,-28},{-56,-28}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Ltc.q_out,tricuspidValve. q_in) annotation (Line(
            points={{-56,26},{-50,26}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Lpv.q_out,pulmonaryValve. q_in) annotation (Line(
            points={{28,26},{38,26}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(mitralValve.q_in,Lmt. q_out) annotation (Line(
            points={{28,-28},{36,-28}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(tricuspidValve.q_out,ventricularInteraction_flat. rvflow)
          annotation (Line(
            points={{-30,26},{-1.38,26},{-1.38,20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Lpv.q_in,ventricularInteraction_flat. rvflow) annotation (Line(
            points={{8,26},{-1.38,26},{-1.38,20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(ventricularInteraction_flat.lvflow,Lav. q_in) annotation (Line(
            points={{-1,-20},{0,-20},{0,-28},{-22,-28}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(mitralValve.q_out,Lav. q_in) annotation (Line(
            points={{8,-28},{-22,-28}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(pulmonaryValve.q_out, v_rvalve.port_a) annotation (Line(
            points={{58,26},{74,26}},
            color={0,0,0},
            thickness=1));
        connect(Ltc.q_in, p_ra.port_a) annotation (Line(
            points={{-76,26},{-80,26}},
            color={0,0,0},
            thickness=1));
        connect(Lmt.q_in, p_la.port_a) annotation (Line(
            points={{56,-28},{80,-28}},
            color={0,0,0},
            thickness=1));
        connect(aorticValve.q_out, v_lvalve.port_a) annotation (Line(
            points={{-76,-28},{-80,-28}},
            color={0,0,0},
            thickness=1));
        connect(frequency, ventricularInteraction_flat.HR)
          annotation (Line(points={{-92,0},{-16.2,0}}, color={0,0,127}));
        connect(thoracic_pressure, ventricularInteraction_flat.Pth) annotation (Line(
              points={{-8,-100},{72,-100},{72,0},{14.58,0}}, color={0,0,127}));
        annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
              coordinateSystem(preserveAspectRatio=false)));
      end HeartWrap;

      package Auxiliary

        package AcausalConnector

        end AcausalConnector;

      end Auxiliary;

      model VentricleWallCalciumRat "Adapted from https://github.com/bmarzban/MechanoEnergetics commit ec495d5
  Not finished"
        extends
          Subsystems.Heart.Auxiliary.TriSegMechanics_components.partialVentricleWall;

        // Inlcuded in the base class:
      //   input Real xm;
      //   input Real ym;
      //   Modelica.Blocks.Interfaces.RealInput Ca_i "Connector of Calcium input signal"
      //     annotation (Placement(transformation(extent={{-120,-20},{-80,20}}),
      //         iconTransformation(extent={{-120,-20},{-80,20}})));
      //
      //   parameter Real Vw "Heart wall volumes (mL)";
      //   parameter Real Amref "midwall reference surface area, cm^2";
      //   Real Tm;
      //   Real Tx=Tm*2*xm*ym/(xm^2 + ym^2);
      //   Real Ty=Tm*(-xm^2 + ym^2)/(xm^2 + ym^2);

        // Collagen force
        parameter Real SLcollagen=2.25;
        // threshold for collagen activation, microns
        parameter Real PConcollagen=0.01;
        // contriubtion of collagen (??)
        parameter Real PExpcollagen=70;
        // expresion of collagen (??), unitless

        parameter Real k_passive=40;
        // mN / mm^2 / micron
        parameter Real L0=0.907;
        // micron

        parameter Real eta=0.1 " visconsity, mmHg s /micron ";
        parameter Real Kse=50000
          " series element elastance, mmHg/micron (Changed to match the value in Tewaris code) (9/5 BM)";
        parameter Real L_rest_passive = 0.9;

        // Metabolite levels (use the values from Tewari's paper) (9/5 BM)
        parameter Real MgATP=9.0675 " cytosolic Mg-ATP concentration, mM ";
        parameter Real MgADP=55.848e-3 " cytosolic Mg-ADP concentration, mM ";
        parameter Real Pi=0.37033 " cytosolic Pi concentration, mM ";

        // Sarcomere geometry parameters
        parameter Real L_thick=1.67 " Length of thick filament, um ";
        parameter Real L_hbare=0.10 " Length of bare region of thick filament, um ";
        parameter Real L_thin=1.20 " Length of thin filament, um ";
        parameter Real deltaR=0.010 " um ";

        parameter Real K_coop=11.659 " Campbell et al, Biophysical Journal 2018, ";
        parameter Real k_on=49.045 " Campbell et al, Biophysical Journal 2018 ";
        parameter Real k_off=184.464 " manually tuned parameter ";

        // transitions between super relaxed state and non relaxed state
        parameter Real k1sr=0.008*6.17*TODO;
        parameter Real kforce=0.150*TODO;

        parameter Real k2sr=226.54 " made-up number ";

        parameter Real kstiff1=20000 "kPa/um (9/5 BM)";
        parameter Real kstiff2=1.05*375000 "kPa/um (9/5 BM)";
      //   parameter Real k_passive = 40 "mN / mm^2 / micron";

        // Cross bridge rate constants Q10s values have been use for Temprature effect (9/5 BM)
        // Used the values from Tewari etal JMCC (9/5 BM)
        parameter Real K_Pi=4.00;
        parameter Real K_T=0.4897;
        parameter Real K_D=0.194;
        parameter Real ka=536.86 " myosin-actin attach rate constant, 1/sec ";
        parameter Real kd_0=905.1 " myosin-actin detach rate constant, 1/sec";
        parameter Real k1_0=44.778 " transition A1 to A2 rate constant, 1/sec ";
        parameter Real km1=21.296 " transition A2 to A1 rate constant, 1/sec ";
        parameter Real k2=811.72 " transition A2 to A3 rate constant, 1/sec ";
        parameter Real km2_0= 43.25;
        // transition A3 to A2 rate constant, 1/sec
        parameter Real k3_0=142.23 " transition A3 to P rate constant, 1/sec ";
        parameter Real alpha1=10.0 " Stretch sensing parameter for k1 and k1, 1/um ";
        parameter Real alpha2=9.1 " Stretch sensing parameter for k2 and k2, 1/um ";
        parameter Real alpha3=0.1*59.3 " Stretch sensing parameter for k3, 1/um ";
        parameter Real s3=9.9e-3 " Strain at which k3 is minimum, um ";

      //   // corrections
      //   parameter Real kd=kd_0*(Pi/K_Pi)/(1.0 + Pi/K_Pi);
      //   parameter Real k1=k1_0/(1.0 + Pi/K_Pi);
      //   parameter Real km2=km2_0*(MgADP/K_D)/(1.0 + MgADP/K_D + MgATP/K_T);
      //   parameter Real k3=k3_0*(MgATP/K_T)/(1.0 + MgATP/K_T + MgADP/K_D);

        parameter Real R_tac = 0;
      //   // ventricular mechanics
      //   Real Vm=(Modelica.Constants.pi/6)*xm*(xm^2 + 3*ym^2);
      //   Real Am=Modelica.Constants.pi*(xm^2 + ym^2);
      //   Real Cm=2*xm/(xm^2 + ym^2);
      //   Real z=3*Cm*Vw/(2*Am);
      //   Real epsf=(1/2)*log(Am/Amref) - (1/12)*z^2 - 0.019*z^4;
      //   Real SLo(nominal=1e-6) = Lsref*exp(epsf);
        // Sarcomere geometry
        Real sovr_ze=min(L_thick*0.5, SL*0.5);
        Real sovr_cle=max(SL*0.5 - (SL - L_thin), L_hbare*0.5);
        Real L_sovr=sovr_ze - sovr_cle;
        // Length of single overlap region
        Real N_overlap=L_sovr*2/(L_thick - L_hbare);
        // Collagen force
        Real sigma_collagen=if (SLo > SLcollagen) then PConcollagen*(exp(PExpcollagen*
            (SLo - SLcollagen)) - 1) else 0;
        Real sigmapas=k_passive*(SLo/2 - L_rest_passive)  + sigma_collagen;
        // Active forces
        Real sigmaact=(kstiff2*deltaR*(P3_0) + kstiff1*(P2_1 + P3_1));
        // mmHg * normalised force DAB 2/2/20
        // Total forces
        Real sigmaf=-Kse*(SL - SLo);

        // equilibrium of forces at junction circle already in base class

        // Myofiber Mechanics
        Real dSL=(Kse*(SLo - SL) - sigmaM)/eta;
        //
        //// Myofiber Mechanics: LV
        // Calculations for stretch-senstive rates
        Real f_alpha1o=(P1_0 - alpha1*P1_1 + 0.5*(alpha1*alpha1)*P1_2);
        Real f_alpha1i=(P1_1 - alpha1*P1_2);

        Real f_alpha0o=(P2_0 + alpha1*P2_1 + 0.5*alpha1*alpha1*P2_2);
        Real f_alpha0i=(P2_1 + alpha1*P2_2);

        Real f_alpha2o=(P2_0 - alpha2*P2_1 + 0.5*(alpha2*alpha2)*P2_2);
        Real f_alpha2i=(P2_1 - alpha2*P2_2);

        Real f_alpha3o=(P3_0 + alpha3*(s3*s3*P3_0 + 2.0*s3*P3_1 + P3_2));
        // f_alpha3o = (P3_0 + alpha3*(s3*s3*P3_0 + 2.0*s3*P3_1) + P3_2);
        Real f_alpha3i=(P3_1 + alpha3*(s3*s3*P3_1 + 2.0*s3*P3_2));

        Real P0=1.0 - N - P1_0 - P2_0 - P3_0;
        // DAB 10/8/2019

        Real U_SR=1 - U_NR;
        Real Jon=k_on*D*N*(1 + K_coop*(1 - N));
        Real Joff=k_off*P0*(1 + K_coop*N);

        // Real dP1_0 = ka*P0*U_NR*N_overlap - kd*P1_0 - k1*f_alpha1o + km1*f_alpha0o;
        // Real dP1_1 = dSL*P1_0 - kd*P1_1 - k1*f_alpha1i + km1*f_alpha0i;
        // Real dP1_2 = 2*dSL*P1_1 - kd*P1_2 - k1*P1_2 + km1*P2_2;
        // Real dP2_0 = -km1*f_alpha0o - k2*f_alpha2o + km2*P3_0 + k1*f_alpha1o;
        // Real dP2_1 = dSL*P2_0 - k1*f_alpha0i - k2*f_alpha2i + km2*P3_1 + k1*f_alpha1i;
        // Real dP2_2 = 2*dSL*P2_1 - km1*P2_2 - k2*P2_2 + km2*P3_2 + k1*P1_2;
        // Real dP3_0 = +k2*f_alpha2o - km2*P3_0 - k3*f_alpha3o;
        // Real dP3_1 = dSL*P3_0 + k2*f_alpha2i - km2*P3_1 - k3*f_alpha3i;
        // Real dP3_2 = 2*dSL*P3_1 + k2*P2_2 - km2*P3_2 - k3*P3_2;
        // Real dN =    - Jon + Joff;
        // Real dU_NR = k1sr*(1 + kforce*(sigmapas + sigmaact))*U_SR - k2sr*U_NR;

        Real P1_0 "0th moment state A1,";
        Real P1_1 "1st moment state A1,";
        Real P1_2 "2nd moment state A1,";
        Real P2_0 "0th moment state A2,";
        Real P2_1 "1st moment state A2,";
        Real P2_2 "2nd moment state A2,";
        Real P3_0 "0th moment state A3,";
        Real P3_1 "1st moment state A3,";
        Real P3_2 "2nd moment state A3,";
        Real N(start=1) "nonpermissive fraction";
        Real U_NR "U_NR represents the Non relaxed state";
        Real SL(nominal=1e-6, start=2.3) "sarcomere length, um";
      equation

        der(P1_0) = ka*P0*U_NR*N_overlap - kd*P1_0 - k1*f_alpha1o + km1*f_alpha0o;
        der(P1_1) = dSL*P1_0 - kd*P1_1 - k1*f_alpha1i + km1*f_alpha0i;
        der(P1_2) = 2*dSL*P1_1 - kd*P1_2 - k1*P1_2 + km1*P2_2;
        der(P2_0) = -km1*f_alpha0o - k2*f_alpha2o + km2*P3_0 + k1*f_alpha1o;
        der(P2_1) = dSL*P2_0 - k1*f_alpha0i - k2*f_alpha2i + km2*P3_1 + k1*f_alpha1i;
        der(P2_2) = 2*dSL*P2_1 - km1*P2_2 - k2*P2_2 + km2*P3_2 + k1*P1_2;
        der(P3_0) = +k2*f_alpha2o - km2*P3_0 - k3*f_alpha3o;
        der(P3_1) = dSL*P3_0 + k2*f_alpha2i - km2*P3_1 - k3*f_alpha3i;
        der(P3_2) = 2*dSL*P3_1 + k2*P2_2 - km2*P3_2 - k3*P3_2;
        der(N) = -Jon + Joff;
        der(U_NR) = k1sr*(1 + kforce*(sigmapas + sigmaact))*U_SR - k2sr*U_NR;
        der(SL) = dSL;

        Tm=(Vw*Kse*(SLo - SL)/(2*Am))*(1 + (z^2)/3 + (z^4)/5);
        // Tx and Ty are defined in the parent base class
        // Real Tx =  Tm*2*xm*ym/(xm^2 + ym^2);
        // Real Ty =  Tm*(-xm^2 + ym^2)/(xm^2 + ym^2);

        annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
              coordinateSystem(preserveAspectRatio=false)));
      end VentricleWallCalciumRat;
    end Obsolete;

  end Components;

  package tests

    model ADAN_test
      import ADAN_main;
      ADAN_main.Components.Subsystems.Systemic.ADAN86ArterialTree.arteries_ADAN86_dv
        arteries_ADAN86_dv
        annotation (Placement(transformation(extent={{-42,6},{-22,26}})));
      ADAN_main.Components.Subsystems.Heart.Heart_ADAN86 heart(redeclare
          ADAN_main.Components.Obsolete.Heart_ADAN_Heart Heart1)
        annotation (Placement(transformation(extent={{0,-40},{-20,-20}})));
      ADAN_main.Components.Subsystems.Pulmonary.Pulmonary_ADAN86
        pulmonary_circulation
        annotation (Placement(transformation(extent={{-20,-80},{0,-60}})));
      Modelica.Blocks.Sources.Constant thoracic_pressure(k=0)
        annotation (Placement(transformation(extent={{-34,64},{-14,84}})));
      Modelica.Blocks.Sources.Constant heart_frequency(k=1.2)
        annotation (Placement(transformation(extent={{80,-40},{60,-20}})));
      main_ADAN_86_Heart_cellml_converted.Parameters_cellml.Parameters_Systemic
        Parameters_Systemic1
        annotation (Placement(transformation(extent={{-100,78},{-80,98}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump(SolutionFlow=
            8.3333333333333e-5)
        annotation (Placement(transformation(extent={{-92,6},{-72,26}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(P=
            6666.11937075)
        annotation (Placement(transformation(extent={{-100,-24},{-80,-4}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump1(SolutionFlow=
           8.3333333333333e-5)
        annotation (Placement(transformation(extent={{-102,-80},{-82,-60}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(P=
            666.611937075)
        annotation (Placement(transformation(extent={{68,6},{48,26}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume2(P=
            666.611937075)
        annotation (Placement(transformation(extent={{60,-80},{40,-60}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump2(SolutionFlow=
           8.3333333333333e-5)
        annotation (Placement(transformation(extent={{40,-30},{20,-10}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump3(SolutionFlow=
           8.3333333333333e-5)
        annotation (Placement(transformation(extent={{40,-50},{20,-30}})));
    equation
      connect(thoracic_pressure.y, arteries_ADAN86_dv.thoracic_pressure)
        annotation (Line(points={{-13,74},{-10,74},{-10,8},{-42,8},{-42,6}},
                                                               color={0,140,72}));
      connect(thoracic_pressure.y, pulmonary_circulation.thoracic_pressure)
        annotation (Line(points={{-13,74},{-10,74},{-10,-80}},             color=
              {0,140,72}));
      connect(thoracic_pressure.y, heart.thoracic_pressure) annotation (Line(
            points={{-13,74},{-10,74},{-10,-40}},   color={0,140,72}));
      connect(heart_frequency.y, heart.frequency)
        annotation (Line(points={{59,-30},{0,-30}}, color={0,0,127}));
      connect(arteries_ADAN86_dv.port_b_inferior, veinInferior.port_a)
        annotation (Line(
          points={{-22,6},{-8,6},{-8,-4},{0,-4}},
          color={0,0,0},
          thickness=1));
      connect(arteries_ADAN86_dv.port_b_superior, veinSuperior.port_a)
        annotation (Line(
          points={{-22,26},{-8,26},{-8,36},{0,36}},
          color={0,0,0},
          thickness=1));
      connect(thoracic_pressure.y, veinInferior.thoracic_pressure) annotation (
          Line(points={{-13,74},{-10,74},{-10,-14},{-0.4,-14}},   color={0,140,72}));
      connect(thoracic_pressure.y, veinSuperior.thoracic_pressure) annotation (
          Line(points={{-13,74},{-10,74},{-10,26},{-0.4,26}},
            color={0,140,72}));
      connect(veinSuperior.port_b, veinInferior.port_b) annotation (Line(
          points={{20,36},{30,36},{30,-4},{20,-4}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedPump.q_out, arteries_ADAN86_dv.port_a) annotation (Line(
          points={{-72,16},{-42,16}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume.y, heart.sa) annotation (Line(
          points={{-80,-14},{-20,-14},{-20,-20}},
          color={0,0,0},
          thickness=1));
      connect(heart.pa, unlimitedVolume.y) annotation (Line(
          points={{-20,-40},{-80,-40},{-80,-14}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedPump1.q_out, pulmonary_circulation.port_a) annotation (
          Line(
          points={{-82,-70},{-20,-70}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume1.y, veinInferior.port_b) annotation (Line(
          points={{48,16},{30,16},{30,-4},{20,-4}},
          color={0,0,0},
          thickness=1));
      connect(pulmonary_circulation.port_b, unlimitedVolume2.y) annotation (
          Line(
          points={{0,-70},{40,-70}},
          color={0,0,0},
          thickness=1));
      connect(heart.sv, unlimitedPump2.q_out) annotation (Line(
          points={{0,-20},{20,-20}},
          color={0,0,0},
          thickness=1));
      connect(heart.pv, unlimitedPump3.q_out) annotation (Line(
          points={{0,-40},{20,-40}},
          color={0,0,0},
          thickness=1));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end ADAN_test;

    model modules "The BG modules are reimplemented correctly"
      import ADAN_main;
      import ADAN_main;
      import ADAN_main;
      import ADAN_main;
      import ADAN_main;
      import ADAN_main;
      import ADAN_main;
      import ADAN_main;
      import ADAN_main;
        inner parameter Real periferyModifier = 1.3;
      main_ADAN_86_Heart_vanilla_cellml_converted.BG_Modules_cellml.vv_type
                                ascending_aorta_A_module(
        v_out=ascending_aorta_B_module.v,
        l=Parameters_Systemic1.l_ascending_aorta_A,
        E=Parameters_Systemic1.E_ascending_aorta_A,
        r=Parameters_Systemic1.r_ascending_aorta_A,
        v_in=v_sas,
        t=t)
      annotation (Placement(transformation(extent={{-75,95},{-55,100}})));
      main_ADAN_86_Heart_vanilla_cellml_converted.BG_Modules_cellml.pv_type
                                ascending_aorta_B_module(
        u_in=ascending_aorta_A_module.u,
        v_out=aortic_arch_C2_module.v,
        l=Parameters_Systemic1.l_ascending_aorta_B,
        E=Parameters_Systemic1.E_ascending_aorta_B,
        r=Parameters_Systemic1.r_ascending_aorta_B,
        t=t)
      annotation (Placement(transformation(extent={{-50,95},{-30,100}})));

      main_ADAN_86_Heart_vanilla_cellml_converted.BG_Modules_cellml.pv_jII_type
                                    aortic_arch_C2_module(
        v_out_1=posterior_intercostal_T1_R98_module.v,
        v_out_2=posterior_intercostal_T1_L102_module.v,
        u_in=ascending_aorta_B_module.u,
        l=Parameters_Systemic1.l_aortic_arch_C2,
        E=Parameters_Systemic1.E_aortic_arch_C2,
        r=Parameters_Systemic1.r_aortic_arch_C2,
        t=t)
      annotation (Placement(transformation(extent={{-21,95},{-1,100}})));
      main_ADAN_86_Heart_vanilla_cellml_converted.BG_Modules_cellml.pp_BC_type
                                   posterior_intercostal_T1_R98_module(
        u_out=u_ivl,
        t=t,
        u_in=aortic_arch_C2_module.u,
        l=Parameters_Systemic1.l_posterior_intercostal_T1_R98,
        E=Parameters_Systemic1.E_posterior_intercostal_T1_R98,
        R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_R98,
        C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_R98,
        r=Parameters_Systemic1.r_posterior_intercostal_T1_R98)
      annotation (Placement(transformation(extent={{7,95},{27,100}})));
      main_ADAN_86_Heart_vanilla_cellml_converted.BG_Modules_cellml.pp_BC_type
                                   posterior_intercostal_T1_L102_module(
        u_out=u_ivl,
        t=t,
        u_in=aortic_arch_C2_module.u,
        l=Parameters_Systemic1.l_posterior_intercostal_T1_L102,
        E=Parameters_Systemic1.E_posterior_intercostal_T1_L102,
        R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_L102,
        C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_L102,
        r=Parameters_Systemic1.r_posterior_intercostal_T1_L102)
      annotation (Placement(transformation(extent={{8,81},{28,86}})));
      main_ADAN_86_Heart_vanilla_cellml_converted.Parameters_cellml.Parameters_Systemic
                                            Parameters_Systemic1
      annotation (Placement(transformation(extent={{-100,95},{-80,100}})));
      ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Ascending_aorta
        ascending_aorta_A(
        thoracic_pressure=thoracic_pressure,
        l=Parameters_Systemic1.l_ascending_aorta_A,
        E=Parameters_Systemic1.E_ascending_aorta_A,
        r=Parameters_Systemic1.r_ascending_aorta_A)
        annotation (Placement(transformation(extent={{-61,37},{-41,42}})));
      ADAN_main.Components.Obsolete.pv_type_thoracic ascending_aorta_B(
        thoracic_pressure=thoracic_pressure,
        l=Parameters_Systemic1.l_ascending_aorta_B,
        E=Parameters_Systemic1.E_ascending_aorta_B,
        r=Parameters_Systemic1.r_ascending_aorta_B)
        annotation (Placement(transformation(extent={{-36,37},{-16,42}})));
      ADAN_main.Components.Obsolete.pv_jII_type_thoracic aortic_arch_C2(
        thoracic_pressure=thoracic_pressure,
        l=Parameters_Systemic1.l_aortic_arch_C2,
        E=Parameters_Systemic1.E_aortic_arch_C2,
        r=Parameters_Systemic1.r_aortic_arch_C2)
        annotation (Placement(transformation(extent={{-1,37},{19,42}})));
      ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
        posterior_intercostal_T1_L102(
        p_out=u_ivl,
        l=Parameters_Systemic1.l_posterior_intercostal_T1_L102,
        E=Parameters_Systemic1.E_posterior_intercostal_T1_L102,
        R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_L102,
        C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_L102,
        r=Parameters_Systemic1.r_posterior_intercostal_T1_L102)
        annotation (Placement(transformation(extent={{38,27},{58,32}})));
      ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
        posterior_intercostal_T1_R98(
        p_out=u_ivl,
        l=Parameters_Systemic1.l_posterior_intercostal_T1_R98,
        E=Parameters_Systemic1.E_posterior_intercostal_T1_R98,
        R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_R98,
        C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_R98,
        r=Parameters_Systemic1.r_posterior_intercostal_T1_R98)
        annotation (Placement(transformation(extent={{39,55},{59,60}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump(SolutionFlow=
            v_sas)
        annotation (Placement(transformation(extent={{-100,30},{-80,50}})));
            parameter Real v_sas = 8.3e-5;
            Real t;
            Real u_ivl = 1000;
            Real thoracic_pressure = 0;
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume
                                                    unlimitedVolume(
          usePressureInput=true, P=13332.2387415)
        annotation (Placement(transformation(extent={{-80,-44},{-60,-24}})));
      ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
        orig(
        p_out=u_ivl,
        l=Parameters_Systemic1.l_posterior_intercostal_T1_L102,
        E=Parameters_Systemic1.E_posterior_intercostal_T1_L102,
        R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_L102,
        C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_L102,
        r=Parameters_Systemic1.r_posterior_intercostal_T1_L102)
        annotation (Placement(transformation(extent={{-20,-13},{0,-8}})));
      ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
        detail(
        p_out=u_ivl,
        l=Parameters_Systemic1.l_posterior_intercostal_T1_L102,
        E=Parameters_Systemic1.E_posterior_intercostal_T1_L102,
        R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_L102,
        C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_L102,
        r=Parameters_Systemic1.r_posterior_intercostal_T1_L102,
        simplification=ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Auxiliary.simplificationLevel.detailed)
        annotation (Placement(transformation(extent={{-20,-37},{0,-32}})));
      ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
        simpli(
        p_out=u_ivl,
        l=Parameters_Systemic1.l_posterior_intercostal_T1_L102,
        E=Parameters_Systemic1.E_posterior_intercostal_T1_L102,
        R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_L102,
        C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_L102,
        r=Parameters_Systemic1.r_posterior_intercostal_T1_L102,
        simplification=ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Auxiliary.simplificationLevel.simplified)
        annotation (Placement(transformation(extent={{-20,-61},{0,-56}})));
      Modelica.Blocks.Sources.Sine sine(
        amplitude=3300,
        f=10,
        offset=13300)
        annotation (Placement(transformation(extent={{-64,-8},{-84,12}})));
      ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
        deci(
        p_out=u_ivl,
        l=Parameters_Systemic1.l_posterior_intercostal_T1_L102,
        E=Parameters_Systemic1.E_posterior_intercostal_T1_L102,
        R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_L102,
        C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_L102,
        r=Parameters_Systemic1.r_posterior_intercostal_T1_L102,
        simplification=ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Auxiliary.simplificationLevel.decimated)
        annotation (Placement(transformation(extent={{-20,-81},{0,-76}})));
    equation
      t = time;
    //  v_sas = 1;
      connect(ascending_aorta_B.port_a,ascending_aorta_A.port_b) annotation (Line(points={{-36,
              39.5},{-41,39.5}},                                                                                         thickness=1));
      connect(ascending_aorta_B.port_b, aortic_arch_C2.port_a) annotation (Line(
          points={{-16,39.5},{-1,39.5}},
          color={0,0,0},
          thickness=1));
      connect(aortic_arch_C2.port_b, posterior_intercostal_T1_R98.port_a)
        annotation (Line(
          points={{19,39.5},{28,39.5},{28,57.5},{39,57.5}},
          color={0,0,0},
          thickness=1));
      connect(aortic_arch_C2.port_b, posterior_intercostal_T1_L102.port_a)
        annotation (Line(
          points={{19,39.5},{28,39.5},{28,29.5},{38,29.5}},
          color={0,0,0},
          thickness=1));
      connect(ascending_aorta_A.port_a, unlimitedPump.q_out) annotation (Line(
          points={{-61,39.5},{-70,39.5},{-70,40},{-80,40}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume.y, orig.port_a) annotation (Line(
          points={{-60,-34},{-40,-34},{-40,-10.5},{-20,-10.5}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume.y, detail.port_a) annotation (Line(
          points={{-60,-34},{-40,-34},{-40,-34.5},{-20,-34.5}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume.y, simpli.port_a) annotation (Line(
          points={{-60,-34},{-40,-34},{-40,-58.5},{-20,-58.5}},
          color={0,0,0},
          thickness=1));
      connect(sine.y, unlimitedVolume.pressure) annotation (Line(points={{-85,2},
              {-106,2},{-106,-34},{-80,-34}}, color={0,0,127}));
      connect(unlimitedVolume.y, deci.port_a) annotation (Line(
          points={{-60,-34},{-40,-34},{-40,-78.5},{-20,-78.5}},
          color={0,0,0},
          thickness=1));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end modules;

    model components
      Components.Obsolete.Systemic_con systemic_con
        annotation (Placement(transformation(extent={{-60,80},{-40,100}})));
      Components.Subsystems.Pulmonary.Pulmonary_ADAN_VR pulmonaryComponent
        annotation (Placement(transformation(extent={{-60,0},{-40,20}})));
      Modelica.Blocks.Sources.Constant thoracic_pressure(k=0)
        annotation (Placement(transformation(extent={{-100,-80},{-80,-60}})));
      Modelica.Blocks.Sources.Constant heart_frequency(k=1)
        annotation (Placement(transformation(extent={{-72,-34},{-64,-26}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump(SolutionFlow=
            v)
        annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(P=u_v)
        annotation (Placement(transformation(extent={{0,80},{-20,100}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump1(SolutionFlow=
           v) annotation (Placement(transformation(extent={{-100,0},{-80,20}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(P=u_v)
        annotation (Placement(transformation(extent={{0,0},{-20,20}})));

            parameter Physiolibrary.Types.Pressure u_a = 13300;
            parameter Physiolibrary.Types.Pressure u_v = 1000;
            parameter Physiolibrary.Types.VolumeFlowRate v =  8.3e-5;
            Real t;
      Components.Subsystems.Heart.Heart_ADAN_VR heart
        annotation (Placement(transformation(extent={{-60,-40},{-40,-20}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume2(P=u_a)
        annotation (Placement(transformation(extent={{0,-30},{-20,-10}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump2(SolutionFlow=
           v)
        annotation (Placement(transformation(extent={{-100,-30},{-80,-10}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump3(SolutionFlow=
           v)
        annotation (Placement(transformation(extent={{-100,-50},{-80,-30}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume3(P=u_a)
        annotation (Placement(transformation(extent={{0,-50},{-20,-30}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume4(P=u_v)
        annotation (Placement(transformation(extent={{0,40},{-20,60}})));
      Components.Obsolete.Systemic_eq systemic_eq(u_ra=u_v, v_aov=v)
        annotation (Placement(transformation(extent={{-80,40},{-30,60}})));
    equation
      t = time;

      connect(unlimitedPump.q_out, systemic_con.port_a) annotation (Line(
          points={{-80,90},{-70,90},{-70,86.6667},{-60,86.6667}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume.y, systemic_con.port_b) annotation (Line(
          points={{-20,90},{-30,90},{-30,86.6667},{-40,86.6667}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedPump3.q_out, heart.pv) annotation (Line(
          points={{-80,-40},{-60,-40}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedPump2.q_out, heart.sv) annotation (Line(
          points={{-80,-20},{-60,-20}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume2.y, heart.sa) annotation (Line(
          points={{-20,-20},{-40,-20}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume3.y, heart.pa) annotation (Line(
          points={{-20,-40},{-40,-40}},
          color={0,0,0},
          thickness=1));
      connect(thoracic_pressure.y, heart.thoracic_pressure) annotation (Line(
            points={{-79,-70},{-74,-70},{-74,-44},{-50,-44},{-50,-40}}, color={
              0,0,127}));
      connect(heart.frequency, heart_frequency.y)
        annotation (Line(points={{-60,-30},{-63.6,-30}}, color={0,0,127}));
      connect(pulmonaryComponent.q_in, unlimitedPump1.q_out) annotation (Line(
          points={{-60,10},{-80,10}},
          color={0,0,0},
          thickness=1));
      connect(pulmonaryComponent.q_out, unlimitedVolume1.y) annotation (Line(
          points={{-40,10},{-20,10}},
          color={0,0,0},
          thickness=1));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end components;

    model comparison
      main_ADAN_86_Heart_vanilla_cellml_converted.CardiovascularSystem
        cardiovascularSystem
        annotation (Placement(transformation(extent={{-60,0},{-40,20}})));
      ArterialTree.ADAN aDAN
        annotation (Placement(transformation(extent={{-20,0},{0,20}})));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end comparison;

    model testNewTissues
      import ADAN_main;
      inner parameter Real periferyModifier = 1.3;
      ADAN_main.Components.Subsystems.Systemic.ADAN86ArterialTree.Parameters_cellml.TerminalsParameters
        terminalsParameters
        annotation (Placement(transformation(extent={{-94,64},{-74,84}})));
      ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.arterial_terminator
        posterior_intercostal_T1_R98(
        RTA=terminalsParameters.RTA_posterior_intercostal_T1_R98,
        RTV=terminalsParameters.RTV_posterior_intercostal_T1_R98,
        CT=terminalsParameters.CT_posterior_intercostal_T1_R98,
        p_out=u_ivl,
        l=Parameters_Systemic1.l_posterior_intercostal_T1_R98,
        E=Parameters_Systemic1.E_posterior_intercostal_T1_R98,
        R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_R98,
        C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_R98,
        r=Parameters_Systemic1.r_posterior_intercostal_T1_R98)
        annotation (Placement(transformation(extent={{3,37},{23,42}})));

      ADAN_main.Components.Subsystems.Systemic.ADAN86ArterialTree.Parameters_cellml.Parameters_Systemic
        Parameters_Systemic1
        annotation (Placement(transformation(extent={{-60,64},{-40,84}})));
      ADAN_main.Components.Subsystems.Systemic.Vessel_modules.arterialTree.pp_BC_type
        posterior_intercostal_T1_R98_original(
        p_out=u_ivl,
        l=Parameters_Systemic1.l_posterior_intercostal_T1_R98,
        E=Parameters_Systemic1.E_posterior_intercostal_T1_R98,
        R_T=Parameters_Systemic1.R_T_posterior_intercostal_T1_R98,
        C_T=Parameters_Systemic1.C_T_posterior_intercostal_T1_R98,
        r=Parameters_Systemic1.r_posterior_intercostal_T1_R98)
        annotation (Placement(transformation(extent={{3,25},{23,30}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(
          usePressureInput=true)
        annotation (Placement(transformation(extent={{-54,24},{-34,44}})));
      Modelica.Blocks.Sources.Step step(
        height=5000,
        offset=10000,
        startTime=10)
        annotation (Placement(transformation(extent={{-92,26},{-72,46}})));
            parameter Real u_ivl = 100;
    equation
      connect(unlimitedVolume.y, posterior_intercostal_T1_R98.port_a) annotation (
          Line(
          points={{-34,34},{-16,34},{-16,39.5},{3,39.5}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume.y, posterior_intercostal_T1_R98_original.port_a)
        annotation (Line(
          points={{-34,34},{-16,34},{-16,27.5},{3,27.5}},
          color={0,0,0},
          thickness=1));
      connect(step.y, unlimitedVolume.pressure) annotation (Line(points={{-71,36},{-64,
              36},{-64,34},{-54,34}}, color={0,0,127}));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)),
        experiment(
          StopTime=200,
          Interval=0.01,
          Tolerance=1e-07,
          __Dymola_Algorithm="Dassl"));
    end testNewTissues;

    model arteriesSImplification
      import ADAN_main;
      import ADAN_main;
      import ADAN_main;
      import ADAN_main;
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(P=15154)
        annotation (Placement(transformation(extent={{-80,-10},{-60,10}})));
      ADAN_main.Components.Subsystems.Systemic.ADAN86ArterialTree.arteries_ADAN86_dv
        arteries_ADAN86_dv(redeclare
          ADAN_main.Components.Obsolete.pv_jII_type_baroreceptor
          aortic_arch_C46)
        annotation (Placement(transformation(extent={{-40,36},{-20,56}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(P(
            displayUnit="Pa") = 1000)
        annotation (Placement(transformation(extent={{40,60},{20,80}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume2(P(
            displayUnit="Pa") = 100)
        annotation (Placement(transformation(extent={{40,26},{20,46}})));
      Physiolibrary.Hydraulic.Sensors.FlowMeasure flowMeasure
        annotation (Placement(transformation(extent={{-10,80},{10,60}})));
      Physiolibrary.Hydraulic.Sensors.FlowMeasure flowMeasure1
        annotation (Placement(transformation(extent={{-6,46},{14,26}})));
      ADAN_main.Components.Subsystems.Systemic.ADAN86ArterialTree.arteries_simplified_dv
        arteries_ADAN86_dv1(
        redeclare ADAN_main.Components.Obsolete.pv_jII_type_baroreceptor
          aortic_arch_C46,
        redeclare ADAN_main.Components.Obsolete.pv_type_baroreceptor
          internal_carotid_R8_A,
        posterior_intercostal_T1_R98(RTCT(displayUnit="(Pa.s)/m3") = 1))
        annotation (Placement(transformation(extent={{-38,-50},{-18,-30}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume3(P(
            displayUnit="Pa") = 1000)
        annotation (Placement(transformation(extent={{42,-26},{22,-6}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume4(P(
            displayUnit="Pa") = 100)
        annotation (Placement(transformation(extent={{42,-60},{22,-40}})));
      Physiolibrary.Hydraulic.Sensors.FlowMeasure flowMeasure2
        annotation (Placement(transformation(extent={{-8,-6},{12,-26}})));
      Physiolibrary.Hydraulic.Sensors.FlowMeasure flowMeasure3
        annotation (Placement(transformation(extent={{-4,-40},{16,-60}})));
      Modelica.Blocks.Sources.Constant thoracic_pressure(k=0)
        annotation (Placement(transformation(extent={{-100,-60},{-80,-40}})));
    equation
      connect(arteries_ADAN86_dv.port_b_superior,flowMeasure. q_in) annotation (
          Line(
          points={{-20,56},{-16,56},{-16,70},{-10,70}},
          color={0,0,0},
          thickness=1));
      connect(flowMeasure.q_out, unlimitedVolume1.y) annotation (Line(
          points={{10,70},{20,70}},
          color={0,0,0},
          thickness=1));
      connect(arteries_ADAN86_dv.port_b_inferior,flowMeasure1. q_in) annotation (
          Line(
          points={{-20,36},{-6,36}},
          color={0,0,0},
          thickness=1));
      connect(flowMeasure1.q_out,unlimitedVolume2. y) annotation (Line(
          points={{14,36},{20,36}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume.y, arteries_ADAN86_dv.port_a) annotation (Line(
          points={{-60,0},{-50,0},{-50,46},{-40,46}},
          color={0,0,0},
          thickness=1));
      connect(arteries_ADAN86_dv1.port_b_superior, flowMeasure2.q_in)
        annotation (Line(
          points={{-18,-30},{-14,-30},{-14,-16},{-8,-16}},
          color={0,0,0},
          thickness=1));
      connect(flowMeasure2.q_out, unlimitedVolume3.y) annotation (Line(
          points={{12,-16},{22,-16}},
          color={0,0,0},
          thickness=1));
      connect(arteries_ADAN86_dv1.port_b_inferior, flowMeasure3.q_in)
        annotation (Line(
          points={{-18,-50},{-4,-50}},
          color={0,0,0},
          thickness=1));
      connect(flowMeasure3.q_out,unlimitedVolume4. y) annotation (Line(
          points={{16,-50},{22,-50}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume.y, arteries_ADAN86_dv1.port_a) annotation (Line(
          points={{-60,0},{-50,0},{-50,-40},{-38,-40}},
          color={0,0,0},
          thickness=1));
      connect(thoracic_pressure.y, arteries_ADAN86_dv.thoracic_pressure)
        annotation (Line(points={{-79,-50},{-40,-50},{-40,36}},color={0,140,72}));
      connect(arteries_ADAN86_dv1.thoracic_pressure_input, thoracic_pressure.y)
        annotation (Line(points={{-38,-50},{-79,-50}}, color={0,0,127}));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)),
        experiment(StopTime=20, Interval=0.01));
    end arteriesSImplification;

    model TestStarling
      TestStarlingTriSeg smith(redeclare
          Cardiovascular.Model.Smith2004.Parts.Heart heart)
        annotation (Placement(transformation(extent={{-80,40},{-60,60}})));
      TestStarlingTriSeg Meurs(redeclare Cardiovascular.Model.Meurs.Parts.Heart
          heart)
        annotation (Placement(transformation(extent={{-80,0},{-60,20}})));
      TestStarlingTriSeg TriSeg(redeclare
          Cardiovascular.Model.Complex.Components.Heart heart)
        annotation (Placement(transformation(extent={{-80,-40},{-60,-20}})));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end TestStarling;

    model TestStarlingTriSeg
        Physiolibrary.Hydraulic.Components.ElasticVesselElastance
                               pulmonaryArteries(
        ZeroPressureVolume=0,
        useExternalPressureInput=false,
        volume_start=3.904e-5,
        Elastance(displayUnit="Pa/m3") = 49195960.956135)
        annotation (Placement(transformation(extent={{60,24},{80,44}})));
      Physiolibrary.Hydraulic.Components.Resistor
               Rpul(Resistance(displayUnit="(mmHg.s)/ml") = 20691634.526808)
        annotation (Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=270,
            origin={86,18})));
    Physiolibrary.Hydraulic.Components.ElasticVesselElastance
                           pulmonaryVeins(
        ZeroPressureVolume=0,
        useExternalPressureInput=false,
        volume_start=0.0008269,
        Elastance(displayUnit="Pa/m3") = 973253.4281295)
        annotation (Placement(transformation(extent={{58,-10},{78,10}})));
      Modelica.Blocks.Sources.Constant            IntraThoracicPressure(k=0)
        annotation (Placement(transformation(extent={{34,14},{46,22}})),
          __Dymola_choicesAllMatching=true);
      Modelica.Blocks.Sources.Constant HR(k=1.2) annotation (Placement(
            transformation(extent={{-30,20},{-18,28}})),
          __Dymola_choicesAllMatching=true);
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(
          usePressureInput=false, P=533.28954966) annotation (Placement(
            transformation(
            extent={{10,-10},{-10,10}},
            rotation=180,
            origin={-84,0})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(
          usePressureInput=true, P=39996.7162245)
        annotation (Placement(transformation(extent={{-62,24},{-42,44}})));
      Modelica.Blocks.Sources.Ramp ramp(
        height(displayUnit="mmHg") = 3999.67,
        duration=200.0,
        offset=133,
        startTime=0)
        annotation (Placement(transformation(extent={{-94,24},{-74,44}})));
    Physiolibrary.Hydraulic.Components.ElasticVesselElastance
                           aorta(
        ZeroPressureVolume=0,
        volume_start=0.0001241,
        Elastance=92165766.41999) annotation (Placement(transformation(extent={{-40,-10},
                {-20,10}})));
      Physiolibrary.Hydraulic.Components.Resistor
               Rsys(Resistance(displayUnit="(mmHg.s)/ml") = 145054757.50752)
        annotation (Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=180,
            origin={-54,0})));
      Physiolibrary.Hydraulic.Components.Resistor
               Rpul1(Resistance(displayUnit="(mmHg.min)/l") = 7.99934)
        annotation (Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=180,
            origin={6,52})));
      replaceable Cardiovascular.Model.Complex.Components.Heart heart
        constrainedby Cardiovascular.Interfaces.Heart annotation (Placement(
            transformation(
            extent={{17,18},{-17,-18}},
            rotation=90,
            origin={9,16})));
      Physiolibrary.Hydraulic.Components.Resistor safeResistance(Resistance(
            displayUnit="(mmHg.min)/l") = 7.9993432449) annotation (Placement(
            transformation(
            extent={{-10,-10},{10,10}},
            rotation=180,
            origin={46,34})));
      Physiolibrary.Hydraulic.Components.Resistor safeResistance1(Resistance(
            displayUnit="(mmHg.min)/l") = 7.9993432449) annotation (Placement(
            transformation(
            extent={{-10,-10},{10,10}},
            rotation=180,
            origin={44,0})));
      Physiolibrary.Hydraulic.Components.Resistor safeResistance2(Resistance(
            displayUnit="(mmHg.min)/l") = 7.9993432449) annotation (Placement(
            transformation(
            extent={{-10,-10},{10,10}},
            rotation=180,
            origin={-12,-2})));
      Physiolibrary.Hydraulic.Components.Resistor safeResistance3(Resistance(
            displayUnit="(mmHg.min)/l") = 7.9993432449) annotation (Placement(
            transformation(
            extent={{-10,-10},{10,10}},
            rotation=180,
            origin={-22,34})));
      inner
        Components.Subsystems.Heart.Auxiliary.TriSeg_components.Environment.ComplexEnvironment
        settings(
        redeclare
          Components.Subsystems.Heart.Auxiliary.TriSeg_components.Environment.Conditions.Rest_NoAdapt
          condition,
        redeclare
          Components.Subsystems.Heart.Auxiliary.TriSeg_components.Environment.Supports.No
          supports,
        redeclare
          Components.Subsystems.Heart.Auxiliary.TriSeg_components.Environment.Initialization.PhysiologicalAdapted
          initialization,
        redeclare
          Components.Subsystems.Heart.Auxiliary.TriSeg_components.Environment.ModelConstants.Standard
          constants)
        annotation (Placement(transformation(extent={{-100,80},{-80,100}})));

    equation
      connect(pulmonaryArteries.q_in,Rpul. q_in) annotation (Line(
          points={{70,34},{86,34},{86,28}},
          color={0,0,0},
          thickness=1,
          smooth=Smooth.None));
      connect(Rpul.q_out,pulmonaryVeins. q_in) annotation (Line(
          points={{86,8},{86,2.22045e-16},{68,2.22045e-16}},
          color={0,0,0},
          thickness=1,
          smooth=Smooth.None));
      connect(ramp.y, unlimitedVolume1.pressure)
        annotation (Line(points={{-73,34},{-62,34}}, color={0,0,127}));
      connect(aorta.q_in,Rsys. q_in) annotation (Line(
          points={{-30,0},{-44,0},{-44,-1.9984e-15}},
          color={0,0,0},
          thickness=1,
          smooth=Smooth.None));
      connect(Rsys.q_out, unlimitedVolume.y) annotation (Line(
          points={{-64,0},{-74,0},{-74,-1.33227e-15}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume1.y, Rpul1.q_out) annotation (Line(
          points={{-42,34},{-34,34},{-34,52},{-4,52}},
          color={0,0,0},
          thickness=1));
      connect(Rpul1.q_in, pulmonaryVeins.q_in) annotation (Line(
          points={{16,52},{96,52},{96,0},{68,0}},
          color={0,0,0},
          thickness=1));
      connect(heart.rightHeartOutflow, safeResistance.q_out) annotation (Line(
          points={{12.6,33},{24.3,33},{24.3,34},{36,34}},
          color={0,0,0},
          thickness=1));
      connect(safeResistance.q_in, pulmonaryArteries.q_in) annotation (Line(
          points={{56,34},{70,33},{70,34}},
          color={0,0,0},
          thickness=1));
      connect(heart.leftHeartInflow, safeResistance1.q_out) annotation (Line(
          points={{12.6,-1},{12.6,7.77156e-16},{34,7.77156e-16}},
          color={0,0,0},
          thickness=1));
      connect(safeResistance1.q_in, pulmonaryVeins.q_in) annotation (Line(
          points={{54,-1.66533e-15},{68,0},{68,2.22045e-16}},
          color={0,0,0},
          thickness=1));
      connect(heart.leftHeartOutflow, safeResistance2.q_in) annotation (Line(
          points={{5.76,-1},{2,-1},{2,-2},{-2,-2}},
          color={0,0,0},
          thickness=1));
      connect(aorta.q_in, safeResistance2.q_out) annotation (Line(
          points={{-30,0},{-26,0},{-26,-2},{-22,-2}},
          color={0,0,0},
          thickness=1));
      connect(heart.rightHeartInflow, safeResistance3.q_in) annotation (Line(
          points={{5.4,32.66},{-6,32.66},{-6,34},{-12,34}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume1.y, safeResistance3.q_out) annotation (Line(
          points={{-42,34},{-32,34}},
          color={0,0,0},
          thickness=1));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end TestStarlingTriSeg;

    model testE
      Real E = (1 + (Escale*V/V0-1)*(tanh(V/V0-2)+1)/2);
      parameter Real Escale = 1;
      parameter Physiolibrary.Types.Volume V0 = 100e-6;
      Physiolibrary.Types.Volume V = abs(sine.y);

      Modelica.Blocks.Sources.Sine sine(
        amplitude=150e-6,
        f=1.2,
        offset=20e-6)
        annotation (Placement(transformation(extent={{-64,18},{-44,38}})));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end testE;

    model TestStarlingSmith
        Physiolibrary.Hydraulic.Components.ElasticVesselElastance
                               pulmonaryArteries(
        ZeroPressureVolume=0,
        useExternalPressureInput=false,
        volume_start=3.904e-5,
        Elastance(displayUnit="Pa/m3") = 49195960.956135)
        annotation (Placement(transformation(extent={{152,26},{172,46}})));
      Physiolibrary.Hydraulic.Components.Resistor
               Rpul(Resistance(displayUnit="(mmHg.s)/ml") = 20691634.526808)
        annotation (Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=270,
            origin={178,20})));
    Physiolibrary.Hydraulic.Components.ElasticVesselElastance
                           pulmonaryVeins(
        ZeroPressureVolume=0,
        useExternalPressureInput=false,
        volume_start=0.0008269,
        Elastance(displayUnit="Pa/m3") = 973253.4281295)
        annotation (Placement(transformation(extent={{150,-8},{170,12}})));
      Modelica.Blocks.Sources.Constant            IntraThoracicPressure(k=0.25)
        annotation (Placement(transformation(extent={{14,14},{26,22}})),
          __Dymola_choicesAllMatching=true);
      Modelica.Blocks.Sources.Constant HR(k=1.2) annotation (Placement(
            transformation(extent={{-20,14},{-8,22}})),
          __Dymola_choicesAllMatching=true);
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(
          usePressureInput=false, P=533.28954966) annotation (Placement(
            transformation(
            extent={{10,-10},{-10,10}},
            rotation=180,
            origin={-84,0})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(
          usePressureInput=true, P=39996.7162245)
        annotation (Placement(transformation(extent={{-62,24},{-42,44}})));
      Modelica.Blocks.Sources.Ramp ramp(
        height(displayUnit="mmHg") = 6666.12,
        duration=100.0,
        offset=133,
        startTime=0)
        annotation (Placement(transformation(extent={{-94,24},{-74,44}})));
    Physiolibrary.Hydraulic.Components.ElasticVesselElastance
                           aorta(
        ZeroPressureVolume=0,
        volume_start=0.0001241,
        Elastance=92165766.41999) annotation (Placement(transformation(extent={{-40,-10},
                {-20,10}})));
      Physiolibrary.Hydraulic.Components.Resistor
               Rsys(Resistance(displayUnit="(mmHg.s)/ml") = 145054757.50752)
        annotation (Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=180,
            origin={-54,0})));
      Physiolibrary.Hydraulic.Components.Resistor
               Rpul1(Resistance(displayUnit="(mmHg.min)/l") = 7.99934)
        annotation (Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=180,
            origin={6,52})));
      Physiolibrary.Hydraulic.Components.Resistor safeResistance(Resistance(
            displayUnit="(mmHg.min)/l") = 7.9993432449) annotation (Placement(
            transformation(
            extent={{-10,-10},{10,10}},
            rotation=180,
            origin={138,36})));
      Physiolibrary.Hydraulic.Components.Resistor safeResistance1(Resistance(
            displayUnit="(mmHg.min)/l") = 7.9993432449) annotation (Placement(
            transformation(
            extent={{-10,-10},{10,10}},
            rotation=180,
            origin={136,2})));
      Physiolibrary.Hydraulic.Components.Resistor safeResistance2(Resistance(
            displayUnit="(mmHg.min)/l") = 7.9993432449) annotation (Placement(
            transformation(
            extent={{-10,-10},{10,10}},
            rotation=180,
            origin={-12,-2})));
      Physiolibrary.Hydraulic.Components.Resistor safeResistance3(Resistance(
            displayUnit="(mmHg.min)/l") = 7.9993432449) annotation (Placement(
            transformation(
            extent={{-10,-10},{10,10}},
            rotation=180,
            origin={-22,34})));
      inner
        Components.Subsystems.Heart.Auxiliary.TriSeg_components.Environment.ComplexEnvironment
        settings(
        redeclare
          Components.Subsystems.Heart.Auxiliary.TriSeg_components.Environment.Conditions.Rest_NoAdapt
          condition,
        redeclare
          Components.Subsystems.Heart.Auxiliary.TriSeg_components.Environment.Supports.No
          supports,
        redeclare
          Components.Subsystems.Heart.Auxiliary.TriSeg_components.Environment.Initialization.PhysiologicalAdapted
          initialization,
        redeclare
          Components.Subsystems.Heart.Auxiliary.TriSeg_components.Environment.ModelConstants.Standard
          constants)
        annotation (Placement(transformation(extent={{-100,80},{-80,100}})));

      Physiolibrary.Hydraulic.Components.IdealValveResistance
                           aorticValve(Pknee=0, _Ron(displayUnit="(mmHg.s)/ml")=
             2399802.97347)
        annotation (Placement(transformation(extent={{22,-28},{2,-8}})));
      Physiolibrary.Hydraulic.Components.IdealValveResistance
                           tricuspidValve(Pknee=0, _Ron(displayUnit=
              "(mmHg.s)/ml") = 3159740.5817355)
        annotation (Placement(transformation(extent={{32,26},{52,46}})));
      Physiolibrary.Hydraulic.Components.Inertia
              Lav(I(displayUnit="mmHg.s2/ml") = 16250.665802014,
          volumeFlow_start(displayUnit="m3/s") = -1.4e-8) annotation (
          Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=180,
            origin={46,-18})));
      Physiolibrary.Hydraulic.Components.Inertia
              Lpv(I(displayUnit="mmHg.s2/ml") = 19822.372560862,
          volumeFlow_start(displayUnit="m3/s") = -1.9e-9)
        annotation (Placement(transformation(extent={{60,26},{80,46}})));
      Physiolibrary.Hydraulic.Components.IdealValveResistance
                           pulmonaryValve(Pknee=0, _Ron(displayUnit=
              "(mmHg.s)/ml") = 733273.1307825)
        annotation (Placement(transformation(extent={{90,26},{110,46}})));
      Physiolibrary.Hydraulic.Components.IdealValveResistance
                           mitralValve(Pknee=0, _Ron(displayUnit="(mmHg.s)/ml")=
             2106493.721157)
        annotation (Placement(transformation(extent={{82,-28},{62,-8}})));
      Physiolibrary.Hydraulic.Components.Inertia
              Ltc(I(displayUnit="mmHg.s2/ml") = 10678.18997523,
          volumeFlow_start(displayUnit="m3/s") = 0.0001372)
        annotation (Placement(transformation(extent={{6,26},{26,46}})));
      Physiolibrary.Hydraulic.Components.Inertia
              Lmt(I(displayUnit="mmHg.s2/ml") = 10261.557514558,
          volumeFlow_start(displayUnit="m3/s") = 0.0001141) annotation (
          Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=180,
            origin={100,-18})));
      Modelica.Blocks.Sources.Constant            IntraThoracicPressure1(k=0)
        annotation (Placement(transformation(extent={{86,14},{98,22}})),
          __Dymola_choicesAllMatching=true);
      Components.Subsystems.Heart.Auxiliary.Smith_VentricularInteraction_flat
        ventricularInteraction_flat(
        alphaE=0,
        lambdalv=33000,
        lambdaperi=30000,
        lambdas(displayUnit="1/m3") = 435000,
        lambdarv(displayUnit="1/m3") = 23000,
        Essept0(displayUnit="mmHg/ml") = 6499999676.0309,
        V0peri=0.0002,
        Pi0sept=148.00118226939,
        Pi0rv=28.757638965416,
        Pi0lv=16.038683206025,
        Pi0peri=66.701190423724,
        Esrv0=77993596.637775,
        Eslv0=383941811.27772,
        Escale=40.0,
        VS0lv(displayUnit="ml") = 8E-05,
        VS0rv(displayUnit="ml") = 8E-05)
        annotation (Placement(transformation(extent={{38,-10},{76,30}})));
      Modelica.Blocks.Sources.Constant            IntraThoracicPressure2(k=1.2)
        annotation (Placement(transformation(extent={{16,2},{28,10}})),
          __Dymola_choicesAllMatching=true);
    equation
      connect(pulmonaryArteries.q_in,Rpul. q_in) annotation (Line(
          points={{162,36},{178,36},{178,30}},
          color={0,0,0},
          thickness=1,
          smooth=Smooth.None));
      connect(Rpul.q_out,pulmonaryVeins. q_in) annotation (Line(
          points={{178,10},{178,2},{160,2}},
          color={0,0,0},
          thickness=1,
          smooth=Smooth.None));
      connect(ramp.y, unlimitedVolume1.pressure)
        annotation (Line(points={{-73,34},{-62,34}}, color={0,0,127}));
      connect(aorta.q_in,Rsys. q_in) annotation (Line(
          points={{-30,0},{-44,0},{-44,-1.9984e-15}},
          color={0,0,0},
          thickness=1,
          smooth=Smooth.None));
      connect(Rsys.q_out, unlimitedVolume.y) annotation (Line(
          points={{-64,0},{-74,0},{-74,-1.33227e-15}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume1.y, Rpul1.q_out) annotation (Line(
          points={{-42,34},{-34,34},{-34,52},{-4,52}},
          color={0,0,0},
          thickness=1));
      connect(Rpul1.q_in, pulmonaryVeins.q_in) annotation (Line(
          points={{16,52},{188,52},{188,2},{160,2}},
          color={0,0,0},
          thickness=1));
      connect(safeResistance.q_in, pulmonaryArteries.q_in) annotation (Line(
          points={{148,36},{162,35},{162,36}},
          color={0,0,0},
          thickness=1));
      connect(safeResistance1.q_in, pulmonaryVeins.q_in) annotation (Line(
          points={{146,2},{160,2}},
          color={0,0,0},
          thickness=1));
      connect(aorta.q_in, safeResistance2.q_out) annotation (Line(
          points={{-30,0},{-26,0},{-26,-2},{-22,-2}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume1.y, safeResistance3.q_out) annotation (Line(
          points={{-42,34},{-32,34}},
          color={0,0,0},
          thickness=1));
      connect(Lav.q_out,aorticValve. q_in) annotation (Line(
          points={{36,-18},{22,-18}},
          color={0,0,0},
          thickness=1,
          smooth=Smooth.None));
      connect(Ltc.q_out,tricuspidValve. q_in) annotation (Line(
          points={{26,36},{32,36}},
          color={0,0,0},
          thickness=1,
          smooth=Smooth.None));
      connect(Lpv.q_out,pulmonaryValve. q_in) annotation (Line(
          points={{80,36},{90,36}},
          color={0,0,0},
          thickness=1,
          smooth=Smooth.None));
      connect(mitralValve.q_in,Lmt. q_out) annotation (Line(
          points={{82,-18},{90,-18}},
          color={0,0,0},
          thickness=1,
          smooth=Smooth.None));
      connect(tricuspidValve.q_out,ventricularInteraction_flat. rvflow)
        annotation (Line(
          points={{52,36},{56.62,36},{56.62,30}},
          color={0,0,0},
          thickness=1,
          smooth=Smooth.None));
      connect(Lpv.q_in,ventricularInteraction_flat. rvflow) annotation (Line(
          points={{60,36},{56.62,36},{56.62,30}},
          color={0,0,0},
          thickness=1,
          smooth=Smooth.None));
      connect(ventricularInteraction_flat.lvflow,Lav. q_in) annotation (Line(
          points={{57,-10},{58,-10},{58,-18},{56,-18}},
          color={0,0,0},
          thickness=1,
          smooth=Smooth.None));
      connect(mitralValve.q_out,Lav. q_in) annotation (Line(
          points={{62,-18},{56,-18}},
          color={0,0,0},
          thickness=1,
          smooth=Smooth.None));
      connect(IntraThoracicPressure1.y, ventricularInteraction_flat.Pth)
        annotation (Line(
          points={{98.6,18},{114,18},{114,10},{72.58,10}},
          color={0,190,190},
          smooth=Smooth.None));
      connect(safeResistance3.q_in, Ltc.q_in) annotation (Line(
          points={{-12,34},{-4,34},{-4,36},{6,36}},
          color={0,0,0},
          thickness=1));
      connect(pulmonaryValve.q_out, safeResistance.q_out) annotation (Line(
          points={{110,36},{128,36}},
          color={0,0,0},
          thickness=1));
      connect(Lmt.q_in, safeResistance1.q_out) annotation (Line(
          points={{110,-18},{118,-18},{118,2},{126,2}},
          color={0,0,0},
          thickness=1));
      connect(aorticValve.q_out, safeResistance2.q_in) annotation (Line(
          points={{2,-18},{2,-2},{-2,-2}},
          color={0,0,0},
          thickness=1));
      connect(ventricularInteraction_flat.phi, IntraThoracicPressure.y)
        annotation (Line(points={{41.8,26},{34,26},{34,18},{26.6,18}}, color={0,
              0,127}));
      connect(ventricularInteraction_flat.HR, IntraThoracicPressure2.y)
        annotation (Line(points={{41.8,10},{36,10},{36,6},{28.6,6}}, color={0,0,
              127}));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end TestStarlingSmith;

    model testNonlinearVeins
      Components.Basic.ElasticVessel_nonLinear elasticVessel_nonLinear(
          Compliance(displayUnit="ml/mmHg") = 7.5006157584566e-7, Vmax(
            displayUnit="l") = 0.001)
        annotation (Placement(transformation(extent={{-18,2},{2,22}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump(SolutionFlow=
            8.3333333333333e-5)
        annotation (Placement(transformation(extent={{-80,2},{-60,22}})));
    equation
      connect(elasticVessel_nonLinear.q_in, unlimitedPump.q_out) annotation (
          Line(
          points={{-8,12},{-60,12}},
          color={0,0,0},
          thickness=1));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end testNonlinearVeins;

    model tilt_test
      model height_module
      extends ADAN_main.Components.Subsystems.Systemic.partialSystemic;
        //   inner parameter Physiolibrary.Types.Fraction venous_diameter_correction = 1;
        //   inner parameter Physiolibrary.Types.Fraction C_fact = 1;

        ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.pv_artery_leveled
          pv_test1_1(
          UseInertance=false,
          sinAlpha=1,
          l=0.5,
          r=0.01)
          annotation (Placement(transformation(extent={{-72,4},{-14,16}})));
      parameter Physiolibrary.Types.VolumeFlowRate m_flow(displayUnit="l/min")=3.3333333333333e-5;
      parameter Physiolibrary.Types.Pressure p = 0;
        Components.Interfaces.Pq_terminator_q_leveled pq_terminator_q_test1(
            level=1, v=-m_flow)
          annotation (Placement(transformation(extent={{-120,0},{-100,20}})));
        Components.Interfaces.Pq_terminator_p pq_terminator_p_test1(redeclare
            ADAN_main.Components.Interfaces.HydraulicPort_a_leveled port_a, u=p)
          annotation (Placement(transformation(extent={{100,0},{80,20}})));

        // inner parameter Modelica.SIunits.Angle Tilt = 0;
        // inner parameter Physiolibrary.Types.Pressure thoracic_pressure = 0;
        ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.pv_artery_leveled
          pv_test1_2(
          UseInertance=false,
          sinAlpha=1,
          l=0.25,
          r=0.01) annotation (Placement(transformation(extent={{0,4},{58,16}})));
        Components.Interfaces.Pq_terminator_q_leveled pq_terminator_q_test2(
            level=1, v=-m_flow) annotation (Placement(transformation(extent={{-120,
                  -40},{-100,-20}})));
        Components.Interfaces.Pq_terminator_p_leveled pq_terminator_p_test2(
            level=1.75, u=p)
          annotation (Placement(transformation(extent={{100,-40},{80,-20}})));
        ADAN_main.Components.Subsystems.Systemic.Vessel_modules.systemic_tissue_leveled
          tissue_test2(
          UseInertance=false,
          I=0,
          C=3.33e-08,
          Ra=958000000,
          Rv=180000000,
          zpv=2.57e-10) "Aka renal tissue"
          annotation (Placement(transformation(extent={{-60,-40},{40,-20}})));
        Components.Interfaces.Pq_terminator_q_leveled pq_terminator_q_test3(
            level=0, v=-m_flow) annotation (Placement(transformation(extent={{-120,
                  -80},{-100,-60}})));
        Components.Interfaces.Pq_terminator_p_leveled pq_terminator_p_test3(
            level=0, u=p)
          annotation (Placement(transformation(extent={{100,-80},{80,-60}})));
        ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.pv_artery_leveled
          pv_type_test3_1(
          UseInertance=false,
          sinAlpha=-1,
          l=0.5,
          r=0.01)
          annotation (Placement(transformation(extent={{-92,-74},{-56,-66}})));
        ADAN_main.Components.Subsystems.Systemic.Vessel_modules.systemic_tissue_leveled
          systemic_tissue_test3(
          UseInertance=false,
          I=0,
          C=3.33e-08,
          Ra=958000000,
          Rv=180000000,
          zpv(displayUnit="ml") = 0.000257) "Aka renal tissue"
          annotation (Placement(transformation(extent={{-40,-74},{0,-66}})));
        ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.vp_vein_leveled
          vp_type_test3_2(
          UseInertance=false,
          sinAlpha=1,
          l=0.5,
          r(displayUnit="mm") = 0.015)
          annotation (Placement(transformation(extent={{20,-74},{56,-66}})));
      inner Components.Settings settings1
        annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
      equation
        connect(pq_terminator_q_test1.port_a, pv_test1_1.port_a) annotation (
            Line(
            points={{-100,10},{-72,10}},
            color={0,0,0},
            thickness=1));
        connect(pv_test1_1.port_b, pv_test1_2.port_a) annotation (Line(
            points={{-14,10},{-1.77636e-15,10}},
            color={0,0,0},
            thickness=1));
        connect(pv_test1_2.port_b, pq_terminator_p_test1.port_a) annotation (
            Line(
            points={{58,10},{80,10}},
            color={0,0,0},
            thickness=1));
        connect(pq_terminator_q_test2.port_a, tissue_test2.port_a) annotation (
            Line(
            points={{-100,-30},{-60,-30}},
            color={0,0,0},
            thickness=1));
        connect(pq_terminator_p_test2.port_a, tissue_test2.port_b) annotation (
            Line(
            points={{80,-30},{40,-30}},
            color={0,0,0},
            thickness=1));
        connect(pq_terminator_q_test3.port_a, pv_type_test3_1.port_a)
          annotation (Line(
            points={{-100,-70},{-92,-70}},
            color={0,0,0},
            thickness=1));
        connect(pv_type_test3_1.port_b, systemic_tissue_test3.port_a)
          annotation (Line(
            points={{-56,-70},{-40,-70}},
            color={0,0,0},
            thickness=1));
        connect(systemic_tissue_test3.port_b, vp_type_test3_2.port_a)
          annotation (Line(
            points={{0,-70},{20,-70}},
            color={0,0,0},
            thickness=1));
        connect(pq_terminator_p_test3.port_a, vp_type_test3_2.port_b)
          annotation (Line(
            points={{80,-70},{56,-70}},
            color={0,0,0},
            thickness=1));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
      end height_module;
      height_module height_module1(
        systemic_tissue_test3(Ra(displayUnit="(mmHg.min)/l") = 7999343.2449, Rv(
              displayUnit="(mmHg.min)/l") = 7999343.2449),
        pv_type_test3_1(l=1),
        tissue_test2(
          Ra(displayUnit="(mmHg.min)/l") = 7999343.2449,
          Rv(displayUnit="(mmHg.min)/l") = 7999343.2449,
          add_length=0.33),
        UseTiltInput=true)
        annotation (Placement(transformation(extent={{-16,0},{4,20}})));
      Modelica.Blocks.Sources.Constant const(k=Modelica.Constants.pi/2)
        annotation (Placement(transformation(extent={{-54,-8},{-34,12}})));
    equation
      connect(const.y, height_module1.tilt_input)
        annotation (Line(points={{-33,2},{-2,2}}, color={0,0,127}));
    end tilt_test;

    model imp_comparison
      SystemicTree.Obsolete.CardiovascularSystem_7af cardiovascularSystem_7af
        annotation (Placement(transformation(extent={{-10,-10},{10,10}})));
      SystemicTree.Auxiliary.partialCVS cVS_7af
        annotation (Placement(transformation(extent={{-10,-42},{10,-22}})));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end imp_comparison;

    model Mynard_heart
      Components.Subsystems.Heart.Heart_ADAN_VR heartComponent(
        UseThoracic_PressureInput=true,
        HR=1,
        Heart1(q_lv(start=6e-5), q_rv(start=6e-5)))
        annotation (Placement(transformation(extent={{-20,-40},{0,-20}})));
      Physiolibrary.Hydraulic.Components.Resistor pulmo_arte(Resistance(
            displayUnit="(mmHg.min)/l") = 95992118.9388)
        annotation (Placement(transformation(extent={{36,-50},{56,-30}})));
      Physiolibrary.Hydraulic.Components.Resistor arteries(Resistance(
            displayUnit="(mmHg.min)/l") = 159986864.898)
        annotation (Placement(transformation(extent={{36,-30},{56,-10}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedPump pv(SolutionFlow=
            8.3333333333333e-5)
        annotation (Placement(transformation(extent={{-102,-56},{-82,-36}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedPump sv(SolutionFlow=
            8.3333333333333e-5)
        annotation (Placement(transformation(extent={{-100,-30},{-80,-10}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume pulmo(P=1333.22387415)
        annotation (Placement(transformation(extent={{88,-60},{68,-40}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume systemic(P=2666.4477483)
        annotation (Placement(transformation(extent={{88,-30},{68,-10}})));
      Modelica.Blocks.Sources.Ramp ramp(
        height=40*133,
        duration=1,
        offset=0,
        startTime=10)
        annotation (Placement(transformation(extent={{-40,-96},{-20,-76}})));
      Physiolibrary.Hydraulic.Components.Resistor syst_ven(Resistance(
            displayUnit="(mmHg.min)/l") = 7999343.2449)
        annotation (Placement(transformation(extent={{-60,-30},{-40,-10}})));
      Physiolibrary.Hydraulic.Components.Resistor pulm_ven(Resistance(
            displayUnit="(mmHg.min)/l") = 7999343.2449)
        annotation (Placement(transformation(extent={{-60,-56},{-40,-36}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel elasticVessel(Compliance(
            displayUnit="ml/mmHg") = 3.0002463033826e-7)
        annotation (Placement(transformation(extent={{-78,4},{-58,24}})));
      Components.Subsystems.Pulmonary.Pulmonary_ADAN_VR pulmonaryComponent(
          UseThoracic_PressureInput=true)
        annotation (Placement(transformation(extent={{-20,40},{0,60}})));
      Physiolibrary.Hydraulic.Components.Resistor pulmo_arte1(Resistance(
            displayUnit="(mmHg.min)/l") = 7999343.2449)
        annotation (Placement(transformation(extent={{22,40},{42,60}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume pulmo1(P=1333.22387415)
        annotation (Placement(transformation(extent={{80,40},{60,60}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedPump sv1(SolutionFlow=
            8.3333333333333e-5)
        annotation (Placement(transformation(extent={{-60,40},{-40,60}})));
      Physiolibrary.Hydraulic.Components.Resistor pulmo_arte2(Resistance(
            displayUnit="(mmHg.min)/l") = 7999343.2449)
        annotation (Placement(transformation(extent={{22,72},{42,92}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume pulmo2(P=1333.22387415)
        annotation (Placement(transformation(extent={{80,72},{60,92}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedPump sv2(SolutionFlow=
            8.3333333333333e-5)
        annotation (Placement(transformation(extent={{-60,72},{-40,92}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel elasticVessel1(
          Compliance(displayUnit="ml/mmHg") = 7.5006157584566e-7,
          useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-20,72},{0,92}})));
    equation
      connect(heartComponent.sa, arteries.q_in) annotation (Line(
          points={{0,-20},{36,-20}},
          color={0,0,0},
          thickness=1));
      connect(heartComponent.pa, pulmo_arte.q_in) annotation (Line(
          points={{0,-40},{36,-40}},
          color={0,0,0},
          thickness=1));
      connect(arteries.q_out, systemic.y) annotation (Line(
          points={{56,-20},{68,-20}},
          color={0,0,0},
          thickness=1));
      connect(pulmo_arte.q_out, pulmo.y) annotation (Line(
          points={{56,-40},{62,-40},{62,-50},{68,-50}},
          color={0,0,0},
          thickness=1));
      connect(heartComponent.thoracic_pressure_input, ramp.y) annotation (Line(
            points={{-10,-40},{-14,-40},{-14,-86},{-19,-86}}, color={0,0,127}));
      connect(syst_ven.q_out, heartComponent.sv) annotation (Line(
          points={{-40,-20},{-20,-20}},
          color={0,0,0},
          thickness=1));
      connect(pulm_ven.q_out, heartComponent.pv) annotation (Line(
          points={{-40,-46},{-26,-46},{-26,-40},{-20,-40}},
          color={0,0,0},
          thickness=1));
      connect(syst_ven.q_in, sv.q_out) annotation (Line(
          points={{-60,-20},{-80,-20}},
          color={0,0,0},
          thickness=1));
      connect(elasticVessel.q_in, pulm_ven.q_in) annotation (Line(
          points={{-68,14},{-64,14},{-64,-46},{-60,-46}},
          color={0,0,0},
          thickness=1));
      connect(pv.q_out, pulm_ven.q_in) annotation (Line(
          points={{-82,-46},{-60,-46}},
          color={0,0,0},
          thickness=1));
      connect(pulmo_arte1.q_out, pulmo1.y) annotation (Line(
          points={{42,50},{60,50}},
          color={0,0,0},
          thickness=1));
      connect(pulmo_arte1.q_in, pulmonaryComponent.q_out) annotation (Line(
          points={{22,50},{0,50}},
          color={0,0,0},
          thickness=1));
      connect(pulmonaryComponent.q_in, sv1.q_out) annotation (Line(
          points={{-20,50},{-40,50}},
          color={0,0,0},
          thickness=1));
      connect(ramp.y, pulmonaryComponent.thoracic_pressure_input) annotation (
          Line(points={{-19,-86},{-12,-86},{-12,42}}, color={0,0,127}));
      connect(pulmo_arte2.q_out, pulmo2.y) annotation (Line(
          points={{42,82},{60,82}},
          color={0,0,0},
          thickness=1));
      connect(sv2.q_out, elasticVessel1.q_in) annotation (Line(
          points={{-40,82},{-10,82}},
          color={0,0,0},
          thickness=1));
      connect(pulmo_arte2.q_in, elasticVessel1.q_in) annotation (Line(
          points={{22,82},{-10,82}},
          color={0,0,0},
          thickness=1));
      connect(pulmonaryComponent.thoracic_pressure_input, elasticVessel1.externalPressure)
        annotation (Line(points={{-12,42},{-8,42},{-8,90},{-2,90}}, color={0,0,
              127}));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end Mynard_heart;

    model testPVchars
      extends ADAN_main.Components.Subsystems.Systemic.partialSystemic;

    //   parameter Physiolibrary.Types.HydraulicCompliance totalCompliance=4.5003694550739e-07;
      parameter Physiolibrary.Types.Volume totalVolume=908e-6;
      parameter Physiolibrary.Types.Fraction thisVolumeFraction = superior_vena_cava_C88.compliant_vessel.V0/totalVolume;
    //   parameter Physiolibrary.Types.HydraulicCompliance targetCompliance = totalCompliance*thisVolumeFraction;
      Physiolibrary.Types.HydraulicCompliance thisCompliance = if noEvent( dP > 1e-6 or dP < -1e-6) then dV/dP else dV/1e-6;
    //   Physiolibrary.Types.HydraulicCompliance thisTotalCompliance = thisCompliance/thisVolumeFraction;
    //
       Real dP=der(superior_vena_cava_C88.compliant_vessel.p);
       Real dV = der(superior_vena_cava_C88.compliant_vessel.V);

    //  Physiolibrary.Types.Fraction phi_norm = phi_ramp.y "Normalized phi value to 1 by phi0 if UsePhi_input = true or by 0.25 otherwise";

      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(
          usePressureInput=true)
        annotation (Placement(transformation(extent={{-40,-10},{-20,10}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(
          usePressureInput=true)
        annotation (Placement(transformation(extent={{100,-10},{80,10}})));
      Modelica.Blocks.Sources.Trapezoid
                                   trapezoid(
        amplitude=5320.0 + 1330,
        rising=100.0,
        width=50.0,
        falling=100.0,
        period=2000.0,
        nperiod=1,
        offset=-1330,
        startTime=-10)
        annotation (Placement(transformation(extent={{-100,-40},{-80,-20}})));
      Components.Subsystems.Systemic.Vessel_modules.Obsolete.vp_vein_tDF
        superior_vena_cava_C88(
        UseOuter_thoracic_pressure=false,
        phi=phi_ramp.y,
        l=Parameters_Venous1.l_superior_vena_cava_C88,
        E=Parameters_Venous1.E_superior_vena_cava_C88,
        r=Parameters_Venous1.r_superior_vena_cava_C88,
        UseInertance=false)
        annotation (Placement(transformation(extent={{26,-3},{46,2}})));
      Components.Obsolete.AdanVenousRed._b580e.Parameters_Venous_cellml.Parameters_Venous
        Parameters_Venous1
        annotation (Placement(transformation(extent={{-69,-87},{-49,-82}})));
      Physiolibrary.Hydraulic.Components.Resistor resistor(Resistance(
            displayUnit="(mmHg.min)/l") = 79993400.0)
        annotation (Placement(transformation(extent={{-4,-10},{16,10}})));
      Physiolibrary.Hydraulic.Components.Resistor resistor1(Resistance(
            displayUnit="(mmHg.min)/l") = 79993400.0)
        annotation (Placement(transformation(extent={{52,-10},{72,10}})));
      Modelica.Blocks.Sources.Trapezoid
                                   phi_ramp(
        amplitude=0,
        rising=10,
        width=900,
        falling=1,
        period=2000,
        nperiod=1,
        offset=0.25,
        startTime=150.0)
        annotation (Placement(transformation(extent={{-100,64},{-80,84}})));
    equation
      connect(unlimitedVolume.pressure, trapezoid.y) annotation (Line(points={{
              -40,0},{-50,0},{-50,-30},{-79,-30}}, color={0,0,127}));
      connect(unlimitedVolume1.pressure, trapezoid.y) annotation (Line(points={
              {100,0},{100,-30},{-79,-30}}, color={0,0,127}));
      connect(unlimitedVolume.y, resistor.q_in) annotation (Line(
          points={{-20,0},{-16,0},{-16,-0.5},{-4,0}},
          color={0,0,0},
          thickness=1));
      connect(resistor.q_out, superior_vena_cava_C88.port_a) annotation (Line(
          points={{16,0},{21,0},{21,-0.5},{26,-0.5}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume1.y, resistor1.q_out) annotation (Line(
          points={{80,0},{76,0},{76,-0.5},{72,0}},
          color={0,0,0},
          thickness=1));
      connect(resistor1.q_in, superior_vena_cava_C88.port_b) annotation (Line(
          points={{52,0},{49,0},{49,-0.5},{46,-0.5}},
          color={0,0,0},
          thickness=1));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)),
        experiment(
          StopTime=300,
          Interval=0.01,
          Tolerance=1e-06,
          __Dymola_Algorithm="Cvode"));
    end testPVchars;

    model testCollapsiblePVChars

    //   parameter Real alphaC = 2.5;
    //   parameter Real alphaZPV = 2.5;
    //   inner Physiolibrary.Types.Fraction ZPV_effect = 1/ (1 + alphaZPV*(phi_norm-1));
    //   inner Physiolibrary.Types.Fraction C_effect = 1/(1 + alphaC*(phi_norm-1));
       inner Physiolibrary.Types.Fraction phi = phi_ramp.y;
        inner Physiolibrary.Types.Fraction Exercise = 0;
       inner Physiolibrary.Types.Pressure outer_pressure = 0;
    //   inner parameter Real gamma = 1/2;
    //   inner parameter Real alpha = 5;// = T_pass/(T_pass + T_act_max);

      inner parameter Physiolibrary.Types.Fraction venous_diameter_correction=1.5;
    //   inner parameter Physiolibrary.Types.Fraction C_fact=1;
      inner Modelica.Units.SI.Angle Tilt=0;

    //   inner parameter Physiolibrary.Types.Fraction cfactor=1;
      inner Physiolibrary.Types.Pressure thoracic_pressure = external_pressure.y;

      parameter Physiolibrary.Types.HydraulicCompliance totalCompliance=4.5003694550739e-07;
      parameter Physiolibrary.Types.Volume totalVolume=0.0004;
      parameter Physiolibrary.Types.Fraction thisVolumeFraction = superior_vena_cava_C88.V_min /totalVolume;
      parameter Physiolibrary.Types.HydraulicCompliance targetCompliance = totalCompliance*thisVolumeFraction;
      Physiolibrary.Types.HydraulicCompliance thisCompliance = if noEvent( dP > 1e-6 or dP < -1e-6) then dV/dP else dV/1e-6;
      Physiolibrary.Types.HydraulicCompliance thisTotalCompliance = thisCompliance/thisVolumeFraction;

       Real dP=der(superior_vena_cava_C88.p);
       Real dV = der(superior_vena_cava_C88.volume);

      Physiolibrary.Types.Fraction phi_norm = phi_ramp.y "Normalized phi value to 1 by phi0 if UsePhi_input = true or by 0.25 otherwise";

      Physiolibrary.Hydraulic.Sources.UnlimitedPump   unlimitedPump(
          useSolutionFlowInput=true,
          SolutionFlow(displayUnit="l/min") = 1.6666666666667e-05)
        annotation (Placement(transformation(extent={{-100,-10},{-80,10}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(
          usePressureInput=true)
        annotation (Placement(transformation(extent={{90,-10},{70,10}})));
      Modelica.Blocks.Sources.Trapezoid
                                   trapezoid(
        amplitude=5320.0,
        rising=1000.0,
        width=0.0,
        falling=1000.0,
        period=2000.0,
        nperiod=0,
        offset=0.0,
        startTime=0)
        annotation (Placement(transformation(extent={{-106,-40},{-86,-20}})));
      Components.Obsolete.AdanVenousRed._b580e.Parameters_Venous_cellml.Parameters_Venous
        Parameters_Venous1
        annotation (Placement(transformation(extent={{-69,-87},{-49,-82}})));
      Physiolibrary.Hydraulic.Components.Resistor resistor1(Resistance(
            displayUnit="(mmHg.min)/l") = 79993400)
        annotation (Placement(transformation(extent={{40,-10},{60,10}})));
      Modelica.Blocks.Sources.Trapezoid
                                   phi_ramp(
        amplitude=3,
        rising=1,
        width=900,
        falling=1,
        period=2000,
        nperiod=0,
        offset=0.25,
        startTime=0)
        annotation (Placement(transformation(extent={{-100,64},{-80,84}})));
      Modelica.Blocks.Sources.Trapezoid external_pressure(
        amplitude=10*5320.0,
        rising=100,
        width=20,
        falling=10,
        period=2000.0,
        nperiod=1,
        offset=-1000,
        startTime=0)
        annotation (Placement(transformation(extent={{8,52},{28,72}})));
      Components.Subsystems.Systemic.Vessel_modules.Vein superior_vena_cava_C88(
        UseOuter_thoracic_pressure=false,
        LimitBackflow=false,
        l=Parameters_Venous1.l_superior_vena_cava_C2,
        E=Parameters_Venous1.E_superior_vena_cava_C2,
        r=Parameters_Venous1.r_superior_vena_cava_C2)
        annotation (Placement(transformation(extent={{0,-2.5},{20,2.5}})));
      Modelica.Blocks.Sources.Trapezoid
                                   flow_ramp(
        amplitude=10e-3/60,
        rising=100,
        width=1,
        falling=1,
        period=2000,
        nperiod=0,
        offset=0,
        startTime=0)
        annotation (Placement(transformation(extent={{-128,16},{-108,36}})));
      Components.Subsystems.Systemic.Vessel_modules.Artery pv_artery
        annotation (Placement(transformation(extent={{0,18},{20,22}})));
      outer Components.Settings settings(
        eta_vc=1.574500e-01,
        tissues_eta_Ra=3.171620e+00,
        baro_tau_s=1.156200e+02,
        baro_xi_delta0=2.688000e-01,
        baro_g=6.062580e-01,
        tissues_chi_Ra=3.477600e+01,
        tissues_chi_C=3.437570e-01,
        heart_vntr_TR=3.809700e-01,
        heart_vntr_TR_maxAct=1.224000e-01,
        heart_vntr_D_A_maxAct=1.883250e+01,
        heart_vntr_D_A=1.974000e+00,
        syst_art_k_E=3.504230e-01,
        pulm_C_PV=1.987900e-07,
        tissues_eta_C=2.287800e-01,
        tissues_ZPV_nom=2.101240e-03,
        HR_max=2.907000e+00)
        annotation (Placement(transformation(extent={{-58,60},{-38,80}})));
      Components.Subsystems.Systemic.Vessel_modules.Vein
        brachiocephalic_vein_R90(
        volume(start=4.229372e-06, fixed=true),
        l=Parameters_Venous1.l_brachiocephalic_vein_R90,
        E=Parameters_Venous1.E_brachiocephalic_vein_R90,
        r=Parameters_Venous1.r_brachiocephalic_vein_R90)
        annotation (Placement(transformation(extent={{-1,-41},{19,-36}})));
      Components.Subsystems.Systemic.Vessel_modules.vp_vein_linear
        brachiocephalic_vein_linear(
        volume(fixed=false),
        l=Parameters_Venous1.l_brachiocephalic_vein_R90,
        E=Parameters_Venous1.E_brachiocephalic_vein_R90,
        r=Parameters_Venous1.r_brachiocephalic_vein_R90)
        annotation (Placement(transformation(extent={{1,-61},{21,-56}})));
    equation
      connect(unlimitedVolume1.y, resistor1.q_out) annotation (Line(
          points={{70,0},{60,0}},
          color={0,0,0},
          thickness=1));
      connect(resistor1.q_in, superior_vena_cava_C88.port_b) annotation (Line(
          points={{40,0},{20,0}},
          color={0,0,0},
          thickness=1));
      connect(external_pressure.y, unlimitedVolume1.pressure)
        annotation (Line(points={{29,62},{96,62},{96,0},{90,0}}, color={0,0,127}));
      connect(unlimitedPump.q_out, superior_vena_cava_C88.port_a) annotation (
          Line(
          points={{-80,0},{0,0}},
          color={0,0,0},
          thickness=1));
      connect(flow_ramp.y, unlimitedPump.solutionFlow) annotation (Line(
          points={{-107,26},{-90,26},{-90,7}},
          color={0,0,127},
          smooth=Smooth.Bezier));
      connect(pv_artery.port_a, unlimitedPump.q_out) annotation (Line(
          points={{0,20},{-80,20},{-80,0}},
          color={0,0,0},
          thickness=1));
      connect(pv_artery.port_b, resistor1.q_in) annotation (Line(
          points={{20,20},{40,20},{40,0}},
          color={0,0,0},
          thickness=1));
      connect(brachiocephalic_vein_R90.port_b, unlimitedVolume1.y) annotation (Line(
          points={{19,-38.5},{70,-38.5},{70,0}},
          color={0,0,0},
          thickness=1));
      connect(brachiocephalic_vein_R90.port_a, unlimitedPump.q_out) annotation (
          Line(
          points={{-1,-38.5},{-80,-38.5},{-80,0}},
          color={0,0,0},
          thickness=1));
      connect(brachiocephalic_vein_linear.port_b, unlimitedVolume1.y)
        annotation (Line(
          points={{21,-58.5},{70,-58.5},{70,0}},
          color={0,0,0},
          thickness=1));
      connect(brachiocephalic_vein_linear.port_a, unlimitedPump.q_out)
        annotation (Line(
          points={{1,-58.5},{-80,-58.5},{-80,0}},
          color={0,0,0},
          thickness=1));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)),
        experiment(
          StopTime=150,
          Interval=0.01,
          Tolerance=1e-06,
          __Dymola_Algorithm="Cvode"));
    end testCollapsiblePVChars;

    model testCollapsibleVeins

      parameter Real alphaC = 2.5;
      parameter Real alphaZPV = 2.5;
      inner Physiolibrary.Types.Fraction ZPV_effect = 1/ (1 + alphaZPV*(phi_norm-1));
      inner Physiolibrary.Types.Fraction C_effect = 1/(1 + alphaC*(phi_norm-1));
      inner parameter Real gamma = 1/2;
      inner parameter Real alpha = 5;// = T_pass/(T_pass + T_act_max);

      inner parameter Physiolibrary.Types.Fraction venous_diameter_correction=1.5;
      inner parameter Physiolibrary.Types.Fraction C_fact=1;
      inner Modelica.Units.SI.Angle Tilt=0;

      inner parameter Physiolibrary.Types.Fraction cfactor=1;
      inner Physiolibrary.Types.Pressure thoracic_pressure = external_pressure.y;

      parameter Physiolibrary.Types.HydraulicCompliance totalCompliance=4.5003694550739e-07;
      parameter Physiolibrary.Types.Volume totalVolume=0.0004;
      parameter Physiolibrary.Types.Fraction thisVolumeFraction = superior_vena_cava_C88.V0/totalVolume;
      parameter Physiolibrary.Types.HydraulicCompliance targetCompliance = totalCompliance*thisVolumeFraction;
      Physiolibrary.Types.HydraulicCompliance thisCompliance = if noEvent( dP > 1e-6 or dP < -1e-6) then dV/dP else dV/1e-6;
      Physiolibrary.Types.HydraulicCompliance thisTotalCompliance = thisCompliance/thisVolumeFraction;

      Real dP=der(superior_vena_cava_C88.p);
      Real dV = der(superior_vena_cava_C88.V);

      Physiolibrary.Types.Fraction phi_norm = phi_ramp.y "Normalized phi value to 1 by phi0 if UsePhi_input = true or by 0.25 otherwise";

      Physiolibrary.Hydraulic.Sources.UnlimitedPump   unlimitedPump(
          SolutionFlow(displayUnit="l/min") = 3.3333333333333e-05)
        annotation (Placement(transformation(extent={{-100,-10},{-80,10}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(
          usePressureInput=false)
        annotation (Placement(transformation(extent={{90,-10},{70,10}})));
      Modelica.Blocks.Sources.Trapezoid
                                   trapezoid(
        amplitude=5320.0,
        rising=1000.0,
        width=0.0,
        falling=1000.0,
        period=2000.0,
        nperiod=1,
        offset=20.0,
        startTime=0)
        annotation (Placement(transformation(extent={{-100,-40},{-80,-20}})));
      Components.Subsystems.Systemic.Vessel_modules.Vein superior_vena_cava_C88(
        phi_norm=phi_norm,
        l=Parameters_Venous1.l_superior_vena_cava_C88,
        E=Parameters_Venous1.E_superior_vena_cava_C88,
        r=Parameters_Venous1.r_superior_vena_cava_C88,
        UseInertance=false,
        tau(displayUnit="s") = 0.01)
        annotation (Placement(transformation(extent={{-60,-2.5},{-40,2.5}})));
      Components.Obsolete.AdanVenousRed._b580e.Parameters_Venous_cellml.Parameters_Venous
        Parameters_Venous1
        annotation (Placement(transformation(extent={{-69,-87},{-49,-82}})));
      Physiolibrary.Hydraulic.Components.Resistor resistor1(Resistance(
            displayUnit="(mmHg.min)/l") = 79993400)
        annotation (Placement(transformation(extent={{40,-10},{60,10}})));
      Modelica.Blocks.Sources.Trapezoid
                                   phi_ramp(
        amplitude=0,
        rising=10,
        width=900,
        falling=1,
        period=2000,
        nperiod=1,
        offset=1,
        startTime=0)
        annotation (Placement(transformation(extent={{-100,64},{-80,84}})));
      Modelica.Blocks.Sources.Trapezoid external_pressure(
        amplitude=5320.0,
        rising=1,
        width=20,
        falling=1,
        period=2000.0,
        nperiod=1,
        offset=0.0,
        startTime=20)
        annotation (Placement(transformation(extent={{8,52},{28,72}})));
      Components.Subsystems.Systemic.Vessel_modules.Vein superior_vena_cava_C2(
        UseOuter_thoracic_pressure=true,
        LimitBackflow=false,
        phi_norm=phi_norm,
        l=Parameters_Venous1.l_superior_vena_cava_C2,
        E=Parameters_Venous1.E_superior_vena_cava_C2,
        r=Parameters_Venous1.r_superior_vena_cava_C2)
        annotation (Placement(transformation(extent={{0,-2.5},{20,2.5}})));
      Components.Subsystems.Systemic.Vessel_modules.CollapsibleVesselSegment
        collapsibleVesselSegment(PR1LL=1, enabled=false)
        annotation (Placement(transformation(extent={{-32,-10},{-12,10}})));
    equation
      connect(unlimitedVolume1.y, resistor1.q_out) annotation (Line(
          points={{70,0},{60,0}},
          color={0,0,0},
          thickness=1));
      connect(resistor1.q_in, superior_vena_cava_C2.port_b) annotation (Line(
          points={{40,0},{20,0}},
          color={0,0,0},
          thickness=1));
      connect(external_pressure.y, unlimitedVolume1.pressure)
        annotation (Line(points={{29,62},{96,62},{96,0},{90,0}}, color={0,0,127}));
      connect(unlimitedPump.q_out, superior_vena_cava_C88.port_a) annotation (Line(
          points={{-80,0},{-60,0}},
          color={0,0,0},
          thickness=1));
      connect(superior_vena_cava_C2.port_a, collapsibleVesselSegment.q_out)
        annotation (Line(
          points={{0,0},{-12,0}},
          color={0,0,0},
          thickness=1));
      connect(collapsibleVesselSegment.q_in, superior_vena_cava_C88.port_b)
        annotation (Line(
          points={{-32,0},{-40,0}},
          color={0,0,0},
          thickness=1));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)),
        experiment(
          StopTime=60,
          Interval=0.01,
          Tolerance=1e-07,
          __Dymola_Algorithm="Dassl"));
    end testCollapsibleVeins;

    model aplhaGamma
            parameter Real p0 = 4*133, r = 5e-3, gamma = 0.5, phi_norm = 1;
            Real alpha = time;
        Real C_act_guess = p0*r*(gamma*(alpha-1)/(1+phi_norm/4*(alpha-1)));

      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)),
        experiment(
          StartTime=1,
          StopTime=20,
          __Dymola_Algorithm="Dassl"));
    end aplhaGamma;

    model Tisues_PVchars
      inner Components.Settings settings(tissues_eta_C(displayUnit="1") = -0.25,
          UseNonLinear_TissuesCompliance=true)
        annotation (Placement(transformation(extent={{-100,80},{-80,100}})));

      parameter Physiolibrary.Types.Pressure nominal_pressure=2666.4477483;

      Physiolibrary.Types.Pressure u_C(start = nominal_pressure, nominal = 1000, fixed = false);

      parameter Real k = 0.0003750308;
     //C / (V_max - V_n) "For Pstras non-linear PV characteristics";
      parameter Physiolibrary.Types.Volume V_max = V_n + (V_n - zpv)*settings.tissues_gamma
        " V_n is between zpv and V_max, parameterized by gamma. 1 means its in the center. For Pstras non-linear PV characteristics";
      parameter Physiolibrary.Types.Volume V_n = nominal_pressure*C + zpv
        "nominal volume calculated from the linear relationship. nominal volume for non-linear compliance parametrization";
    //   parameter Physiolibrary.Types.Volume V_us = V_max - (V_max - V_n)*exp(nominal_pressure * C / (V_max - V_n))
    //     "nonlinear Un-Stressed volume";
      parameter Physiolibrary.Types.Volume V_us = V_max - (V_max - V_n)*exp(nominal_pressure * k);

      Physiolibrary.Types.Volume V_us_phi=V_us*(1 + settings.tissues_eta_C*(phi
           - settings.phi0)) "Linearly dependent on phi";
      Physiolibrary.Types.Volume V_max_phi = V_max - (V_us - V_us_phi) "From Pstras";
    //   Physiolibrary.Types.Fraction phi_shift=(1 + settings.tissues_compliance_phi_shift
    //       *(phi - phi0)) "Nonlinear compliance unstressed volume affected by phi";
    Physiolibrary.Types.Volume volume( start = 0);

      // parametrization from celiac trunk
      parameter Physiolibrary.Types.HydraulicCompliance C = 3.69E-08 annotation(Dialog(tab="Tissue parametrization", group="Compliances"));
      parameter Physiolibrary.Types.Volume zpv = 280e-6;
      parameter Physiolibrary.Types.Fraction phi = 0.25;
      parameter Real eps = Modelica.Constants.eps;
      parameter Real eps0 = Modelica.Constants.epsilon_0;

    initial equation
    //  volume = nominal_pressure*C + zpv;
    equation
      der(volume) = 1e-6;
            u_C = 1/k*log((V_max_phi - V_us_phi)/max(1e-9, V_max_phi - volume)) "equation from Pstras 2017, 10.1093/imammb/dqw008, allegedly taken from Hardy & Collins 1982";

      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end Tisues_PVchars;

    model HR2Phi
      Components.Subsystems.Baroreflex.HeartRate_HRMinMax heartRate2_1(
        phi0=settings.phi0,
        HR_max=settings.HR_max,
        HR_nom=settings.HR_nominal)
        annotation (Placement(transformation(extent={{-60,40},{-40,60}})));
      replaceable Modelica.Blocks.Sources.Ramp Tilt_ramp(
        height=0.75,
        offset=0.25,
        startTime=0,
        duration=1)   constrainedby Modelica.Blocks.Sources.Ramp
        annotation (Placement(transformation(extent={{-100,20},{-80,40}})));
      Components.Subsystems.Baroreflex.HeartRate_HRMinMax HR_BC(
        phi0=settings.phi0,
        HR_max=settings.HR_max,
        HR_nom=settings.HR_nominal)
        annotation (Placement(transformation(extent={{12,-38},{32,-18}})));
      Modelica.Blocks.Math.InverseBlockConstraints inverseBlockConstraints
        annotation (Placement(transformation(extent={{50,-44},{-4,-12}})));
      Physiolibrary.Types.Constants.FrequencyConst frequency(k=2.5666666666667)
        annotation (Placement(transformation(extent={{72,-32},{64,-24}})));
      Components.Subsystems.Baroreflex.HeartRate_HRMinMax HR_MyBase(
        phi0=settings.phi0,
        HR_max=settings.HR_max,
        HR_nom=settings.HR_nominal)
        annotation (Placement(transformation(extent={{-40,-40},{-60,-20}})));

    Physiolibrary.Types.Fraction chi_phi "Get the exercise level for current heart rate";
    Real phi0 = 0.25;

            Components.Settings settings(
        initByPressure=false,
        heart_R_vlv(displayUnit="(Pa.s)/m3") = 133322.387415,
        heart_R_LA(displayUnit="(mmHg.s)/ml") = 3333059.685375,
        heart_vntr_TS_maxAct(displayUnit="s") = 0.034774043,
        heart_vntr_TR_maxAct(displayUnit="s") = 0.11722694,
        heart_vntr_Tact_maxAct=8.000000e-02,
        chi_phi=0.8835938,
        heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 1.082188e+04,
        heart_vntr_D_0_maxAct=0.0004215625,
        eta_vc=0.2201054,
        tissues_eta_Ra=1.245225,
        tissues_eta_C=0.5058013,
        tissues_chi_Ra=14.60206,
        tissues_chi_C=-0.32625,
        V_PV_init=0,
        heart_atr_D_A=55215000,
        heart_vntr_xi_Vw=0.9014874,
        heart_vntr_xi_AmRef=1.111598,
        heart_vntr_k_passive=3.725000e+01,
        heart_vntr_Lsref=1.900000e+00,
        heart_atr_D_0=14055120,
        heart_atr_TS=1.882500e-01,
        heart_atr_TR=2.631250e-01,
        heart_vntr_D_0=18.15655,
        heart_vntr_D_A=2846.905,
        heart_vntr_TS=8.825000e-02,
        heart_vntr_TR(displayUnit="s") = 2.975000e-01,
        heart_vntr_Tact=8.000000e-02,
        baro_fsn(displayUnit="Hz") = 0.0383,
        pulm_R=3628209,
        pulm_q_nom_maxq=0.0004958,
        syst_tissues_hydrostaticLevel_correction=1,
        HR_max(displayUnit="1/min") = 2.7333333333333,
        syst_TPR=128212500,
        syst_art_k_E=0.3973268,
        veins_gamma=0.365625,
        tissues_SV_nom=0.000695,
        pulm_C_PV=3.194206e-07,
        pulm_C_PA=5.3325e-08,
        heart_R_RA(displayUnit="(dyn.s)/cm5") = settings.heart_R_LA,
        tissues_eta_Rv=0,
        baro_tau_s(displayUnit="s") = 93,
        syst_TR_frac(displayUnit="1") = 4.695759e+00,
        syst_abd_P_th_ratio=0.8,
        heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
        heart_vntr_L0=1.6,
        pulm_P_PV_nom=1333.22387415,
        height=1.7132,
        tissues_CO_nom=0.000105,
        EvaluateFunctionalParams=true,
        HR_nominal=1.0666666666667,
        UseNonLinear_TissuesCompliance=true,
        baro_f1=3.379000e-03,
        baro_g=0.606258,
        baro_useAbsolutePressureTerm=false,
        baro_xi_delta0=2.688000e-01,
        pulm_R_exp=9.150000e-01,
        syst_art_UseVasoconstrictionEffect=true,
        tissues_UseStraighteningReaction2Phi=true,
        tissues_ZPV_nom=0.00210124,
        tissues_gamma=0.5,
        tissues_tau_R(displayUnit="s") = 0,
        veins_C_phi=0.09,
        veins_activation_tau=0)
        annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
    equation

      chi_phi*(1 - phi0) + phi0 = HR_BC.phi;

      connect(heartRate2_1.phi, Tilt_ramp.y) annotation (Line(points={{-60,50},
              {-70,50},{-70,30},{-79,30}}, color={0,0,127}));
      connect(inverseBlockConstraints.y2, HR_BC.phi)
        annotation (Line(points={{0.05,-28},{12,-28}},    color={0,0,127}));
      connect(HR_BC.HR, inverseBlockConstraints.u2)
        annotation (Line(points={{32.2,-28},{44.6,-28}},   color={0,0,127}));
      connect(inverseBlockConstraints.u1, frequency.y)
        annotation (Line(points={{52.7,-28},{63,-28}},  color={0,0,127}));
      connect(HR_MyBase.phi, inverseBlockConstraints.y1) annotation (Line(
            points={{-40,-30},{-22,-30},{-22,-28},{-5.35,-28}}, color={0,0,127}));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end HR2Phi;

    model TestBasicCircuit
      Components.Subsystems.Heart.Heart_Smith heart_Smith
        annotation (Placement(transformation(extent={{10,-10},{-10,10}})));
      Components.Subsystems.Pulmonary.PulmonaryTriSeg pulmonaryTriSeg
        annotation (Placement(transformation(extent={{-14,-50},{6,-30}})));
      Components.Subsystems.Systemic.Systemic_TriSeg systemic_TriSeg
        annotation (Placement(transformation(extent={{-34,32},{42,62}})));
    equation
      connect(heart_Smith.sa, systemic_TriSeg.port_a) annotation (Line(
          points={{-10,10},{-58,10},{-58,42},{-34,42}},
          color={0,0,0},
          thickness=1));
      connect(systemic_TriSeg.port_b, heart_Smith.sv) annotation (Line(
          points={{42,42},{70,42},{70,10},{10,10}},
          color={0,0,0},
          thickness=1));
      connect(heart_Smith.pa, pulmonaryTriSeg.port_a) annotation (Line(
          points={{-10,-10},{-26,-10},{-26,-40},{-14,-40}},
          color={0,0,0},
          thickness=1));
      connect(pulmonaryTriSeg.port_b, heart_Smith.pv) annotation (Line(
          points={{6,-40},{22,-40},{22,-10},{10,-10}},
          color={0,0,0},
          thickness=1));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end TestBasicCircuit;

    model TestTriSegMech_all
      Components.Subsystems.Heart.Heart_TriSegMechanics heart
        annotation (Placement(transformation(extent={{10,-10},{-10,10}})));
      Components.Subsystems.Pulmonary.PulmonaryTriSeg pulmonaryTriSeg(c_pa(
            volume_start=3.5e-05), c_pv(volume_start=6.5e-05))
        annotation (Placement(transformation(extent={{-8,-54},{12,-34}})));
      Components.Subsystems.Systemic.Systemic_TriSeg systemic_TriSeg(
        c_ao(volume_start=6e-05),
        c_sa(volume_start=0.0003),
        c_sv(volume_start=0.00134))
         annotation (Placement(transformation(extent={{-38,30},{38,60}})));

    Physiolibrary.Types.Volume volume = systemic_TriSeg.volume + pulmonaryTriSeg.volume + heart.volume;
    equation
      connect(heart.pa, pulmonaryTriSeg.port_a) annotation (Line(
          points={{-10,-10},{-20,-10},{-20,-44},{-8,-44}},
          color={0,0,0},
          thickness=1));
      connect(heart.pv, pulmonaryTriSeg.port_b) annotation (Line(
          points={{10,-10},{20,-10},{20,-44},{12,-44}},
          color={0,0,0},
          thickness=1));
      connect(heart.sa, systemic_TriSeg.port_a) annotation (Line(
          points={{-10,10},{-54,10},{-54,40},{-38,40}},
          color={0,0,0},
          thickness=1));
      connect(systemic_TriSeg.port_b, heart.sv) annotation (Line(
          points={{38,40},{60,40},{60,10},{10,10}},
          color={0,0,0},
          thickness=1));
      annotation (
        Icon(coordinateSystem(preserveAspectRatio=false)),
        Diagram(coordinateSystem(preserveAspectRatio=false)),
        experiment(
          StopTime=20,
          Tolerance=1e-06,
          __Dymola_Algorithm="Cvode"));
    end TestTriSegMech_all;

    model TestTriSegMech_Lumens
      Components.Subsystems.Heart.Heart_TriSegMechanics_Lumens heart(
        UseThoracic_PressureInput=true,
        HR=HR,
        ventricles(V_LV(start=0.00015), V_RV(start=0.00015)))
        annotation (Placement(transformation(extent={{10,-10},{-10,10}})));
      Components.Subsystems.Pulmonary.PulmonaryTriSeg pulmonaryTriSeg(
        UseThoracic_PressureInput=true,
        _HR=if adjust then HR*60 else 60,                                                    c_pa(
            volume_start=3.5e-05), c_pv(volume_start=6.5e-05))
        annotation (Placement(transformation(extent={{-8,-54},{12,-34}})));
      Components.Subsystems.Systemic.Systemic_TriSeg systemic_TriSeg(
        c_ao(volume_start=6e-05),
        c_sa(volume_start=0.0003),
        c_sv(volume_start=0.00134),
        _HR=if adjust then HR*60 else 60)
        annotation (Placement(transformation(extent={{-38,30},{38,60}})));
    Physiolibrary.Types.Volume volume = systemic_TriSeg.volume + pulmonaryTriSeg.volume + heart.volume;
      parameter Physiolibrary.Types.Frequency HR=_HR/60 "Default freq";
      parameter Real _HR = 60 "Freq in BPM";
      output Real _CO = heart.aorticValve.CO*60*1e6;
      output Real _BPs=heart.aorticValve.Pout_max/133.32;
      output Real _BPd=heart.aorticValve.Pout_min/133.32;
      output Real _BPp=heart.aorticValve.Pout_pulse/133.32;
      parameter Boolean adjust = false;
    Modelica.Blocks.Sources.Trapezoid           thoracic_pressure(
        amplitude=40*133,
        rising=2,
        width=15,
        falling=2,
        period=200,
        nperiod=1,
        offset=0,
        startTime=10)
        annotation (Placement(transformation(extent={{-100,-10},{-80,10}})));
      Components.Signals.ConditionalConnection condTP(disconnectedValue=0,
          disconnected=false)
                             annotation (Placement(transformation(extent={{-67,
                -5.3333},{-53,6.6667}})));
      inner Modelica.Mechanics.MultiBody.World world
        annotation (Placement(transformation(extent={{-100,80},{-80,100}})));

      Modelica.Units.SI.Radius rs=1/heart.ventricles.SEP_wall.Cm;
      Modelica.Units.SI.Position cs=heart.ventricles.SEP_wall.xm - rs;
    equation
      connect(heart.sa, systemic_TriSeg.port_a) annotation (Line(
          points={{-10,10},{-38,10},{-38,40}},
          color={0,0,0},
          thickness=1));
      connect(heart.sv, systemic_TriSeg.port_b) annotation (Line(
          points={{10,10},{38,10},{38,40}},
          color={0,0,0},
          thickness=1));
      connect(heart.pa, pulmonaryTriSeg.port_a) annotation (Line(
          points={{-10,-10},{-22,-10},{-22,-44},{-8,-44}},
          color={0,0,0},
          thickness=1));
      connect(pulmonaryTriSeg.port_b, heart.pv) annotation (Line(
          points={{12,-44},{24,-44},{24,-10},{10,-10}},
          color={0,0,0},
          thickness=1));
      connect(thoracic_pressure.y,condTP. u) annotation (Line(points={{-79,0},{
              -74,0},{-74,3e-05},{-68.4,3e-05}},color={0,0,127}));
      connect(condTP.y, heart.thoracic_pressure_input) annotation (Line(points=
              {{-52.3,3.33333e-05},{-18,3.33333e-05},{-18,-22},{0,-22},{0,-10}},
            color={0,0,127}));
      connect(condTP.y, pulmonaryTriSeg.thoracic_pressure) annotation (Line(
            points={{-52.3,3.33333e-05},{-40,3.33333e-05},{-40,-60},{2,-60},{2,
              -54}}, color={0,0,127}));
      annotation (
        Icon(coordinateSystem(preserveAspectRatio=false)),
        Diagram(coordinateSystem(preserveAspectRatio=false)),
        experiment(
          StopTime=50,
          Interval=0.01,
          Tolerance=1e-06,
          __Dymola_Algorithm="Cvode"));
    end TestTriSegMech_Lumens;

    model demo
      Components.Subsystems.Heart.Heart_ADAN86 heart_ADAN86_1
        annotation (Placement(transformation(extent={{-40,70},{-20,90}})));
      Components.Subsystems.Heart.Heart_ADAN_VR heart_ADAN_VR
        annotation (Placement(transformation(extent={{-40,40},{-20,60}})));
      Components.Subsystems.Heart.Heart_Smith heart_Smith
        annotation (Placement(transformation(extent={{-40,10},{-20,30}})));
      Components.Subsystems.Heart.Heart_SmithOlufsenMynard
        heartSmithOlufsenMynard
        annotation (Placement(transformation(extent={{-40,-18},{-20,2}})));
      Components.Subsystems.Heart.Heart_TriSegMechanics heart_TriSegMechanics
        annotation (Placement(transformation(extent={{-40,-48},{-20,-28}})));
      Components.Subsystems.Heart.Heart_TriSegMechanics_Lumens
        heart_TriSegMechanicsLumens
        annotation (Placement(transformation(extent={{-40,-78},{-20,-58}})));
      Components.Subsystems.Pulmonary.Pulmonary_ADAN86 pulmonary_ADAN86_1
        annotation (Placement(transformation(extent={{-88,60},{-68,80}})));
      Components.Subsystems.Pulmonary.Pulmonary_ADAN_VR pulmonary_ADAN_VR
        annotation (Placement(transformation(extent={{-88,20},{-68,40}})));
      Components.Subsystems.Pulmonary.Pulmonary_Smith pulmonary_Smith
        annotation (Placement(transformation(extent={{-88,-20},{-68,0}})));
      Components.Subsystems.Pulmonary.PulmonaryTriSeg pulmonaryTriSeg
        annotation (Placement(transformation(extent={{-88,-60},{-68,-40}})));
      Components.Subsystems.Systemic.SystemicAV systemicAV
        annotation (Placement(transformation(extent={{0,22},{76,52}})));
      Components.Subsystems.Systemic.Systemic_TriSeg systemic_TriSeg
        annotation (Placement(transformation(extent={{0,-20},{76,10}})));
      Components.Subsystems.Systemic.Postures.SystemicAV_Sit_Stand_chair
        systemicAV_Sit_Stand
        annotation (Placement(transformation(extent={{0,-66},{76,-36}})));
      Components.Subsystems.Systemic.ADAN86ArterialTree.arteries_ADAN86
        arteries_ADAN86_1
        annotation (Placement(transformation(extent={{30,70},{50,90}})));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end demo;

    model TestTriSeg
      Components.Subsystems.Heart.Heart_TriSeg                heart
        annotation (Placement(transformation(extent={{10,-10},{-10,10}})));
      Components.Subsystems.Pulmonary.PulmonaryTriSeg pulmonaryTriSeg(
        UseThoracic_PressureInput=true,
        _HR=if adjust then HR*60 else 60,                                                    c_pa(
            volume_start=3.5e-05), c_pv(volume_start=6.5e-05))
        annotation (Placement(transformation(extent={{-8,-54},{12,-34}})));
      Components.Subsystems.Systemic.Systemic_TriSeg systemic_TriSeg(
        c_ao(volume_start=6e-05),
        c_sa(volume_start=0.0003),
        c_sv(volume_start=0.00134),
        _HR=if adjust then HR*60 else 60)
        annotation (Placement(transformation(extent={{-38,30},{38,60}})));
    // Physiolibrary.Types.Volume volume = systemic_TriSeg.volume + pulmonaryTriSeg.volume + heart.volume;
      parameter Physiolibrary.Types.Frequency HR=_HR/60 "Default freq";
      parameter Real _HR = 60 "Freq in BPM";
    //   output Real _CO = heart.aorticValve.CO*60*1e6;
    //   output Real _BPs = heart.aorticValve.BPs/133.32;
    //   output Real _BPd = heart.aorticValve.BPd/133.32;
    //   output Real _BPp = heart.aorticValve.BPp/133.32;
      parameter Boolean adjust = true;
    Modelica.Blocks.Sources.Trapezoid           thoracic_pressure(
        amplitude=40*133,
        rising=20,
        width=20,
        falling=2,
        period=200,
        nperiod=1,
        offset=0,
        startTime=10)
        annotation (Placement(transformation(extent={{-100,-10},{-80,10}})));
      Components.Signals.ConditionalConnection condTP(disconnectedValue=0,
          disconnected=false)
                             annotation (Placement(transformation(extent={{-67,
                -5.3333},{-53,6.6667}})));
    equation
      connect(heart.sa, systemic_TriSeg.port_a) annotation (Line(
          points={{-10,10},{-38,10},{-38,40}},
          color={0,0,0},
          thickness=1));
      connect(heart.sv, systemic_TriSeg.port_b) annotation (Line(
          points={{10,10},{38,10},{38,40}},
          color={0,0,0},
          thickness=1));
      connect(heart.pa, pulmonaryTriSeg.port_a) annotation (Line(
          points={{-10,-10},{-22,-10},{-22,-44},{-8,-44}},
          color={0,0,0},
          thickness=1));
      connect(pulmonaryTriSeg.port_b, heart.pv) annotation (Line(
          points={{12,-44},{24,-44},{24,-10},{10,-10}},
          color={0,0,0},
          thickness=1));
      connect(thoracic_pressure.y,condTP. u) annotation (Line(points={{-79,0},{
              -74,0},{-74,3e-05},{-68.4,3e-05}},color={0,0,127}));
      connect(condTP.y, heart.thoracic_pressure_input) annotation (Line(points=
              {{-52.3,3.33333e-05},{-18,3.33333e-05},{-18,-22},{0,-22},{0,-10}},
            color={0,0,127}));
      connect(condTP.y, pulmonaryTriSeg.thoracic_pressure) annotation (Line(
            points={{-52.3,3.33333e-05},{-40,3.33333e-05},{-40,-60},{2,-60},{2,
              -54}}, color={0,0,127}));
      annotation (
        Icon(coordinateSystem(preserveAspectRatio=false)),
        Diagram(coordinateSystem(preserveAspectRatio=false)),
        experiment(
          StopTime=20,
          Interval=0.01,
          Tolerance=1e-05,
          __Dymola_Algorithm="Cvode"));
    end TestTriSeg;

    model TestRat
      Components.Subsystems.Heart.Heart_TriSegMechanics_Rat
        heart_TriSegMechanics_Rat(idealValve_deactivable1(_Gon(displayUnit="m3/(Pa.s)")=
               1), idealValve_deactivable(_Gon(displayUnit="m3/(Pa.s)") = 1))
                                     annotation (Placement(transformation(extent={{10,-10},{-10,10}})));
      Components.Subsystems.Pulmonary.PulmonaryTriSeg_Rat pulmonaryTriSeg_Rat
        annotation (Placement(transformation(extent={{-10,-60},{10,-40}})));
      Components.Subsystems.Systemic.Systemic_TriSeg_Rat systemic_TriSeg_Rat
        annotation (Placement(transformation(extent={{-44,30},{32,60}})));
        Physiolibrary.Types.Volume V_T = heart_TriSegMechanics_Rat.volume + pulmonaryTriSeg_Rat.volume + systemic_TriSeg_Rat.volume;
    equation
      connect(systemic_TriSeg_Rat.port_a, heart_TriSegMechanics_Rat.sa)
        annotation (Line(
          points={{-44,40},{-46,40},{-46,10},{-10,10}},
          color={0,0,0},
          thickness=1));
      connect(systemic_TriSeg_Rat.port_b, heart_TriSegMechanics_Rat.sv)
        annotation (Line(
          points={{32,40},{46,40},{46,10},{10,10}},
          color={0,0,0},
          thickness=1));
      connect(heart_TriSegMechanics_Rat.pv, pulmonaryTriSeg_Rat.port_b)
        annotation (Line(
          points={{10,-10},{30,-10},{30,-50},{10,-50}},
          color={0,0,0},
          thickness=1));
      connect(pulmonaryTriSeg_Rat.port_a, heart_TriSegMechanics_Rat.pa)
        annotation (Line(
          points={{-10,-50},{-32,-50},{-32,-10},{-10,-10}},
          color={0,0,0},
          thickness=1));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)),
        experiment(
          StopTime=3,
          __Dymola_NumberOfIntervals=1500,
          Tolerance=1e-09,
          __Dymola_Algorithm="Cvode"));
    end TestRat;

    model LumensPhiSensitivity
      extends
        SystemicTree.Identification.Results.Experiments.TriSeg_OptimizedBaseline(
        condHRPhi(disconnected=false),
        condSystemicPhi(disconnected=true),
        phi_fixed(
          rising=0,
          nperiod=1,
          startTime=5),
        heartComponent(UsePhiInput=true, ventricles(
            LV_wall(
              tauD=tauD,
              tauR=tauR,
              tauSC=tauSC),
            SEP_wall(
              tauD=tauD,
              tauR=tauR,
              tauSC=tauSC),
            RV_wall(
              tauD=tauD,
              tauR=tauR,
              tauSC=tauSC),
            calciumMechanics(tauR0=tauR))),
        condHeartPhi(disconnected=false));
      parameter Modelica.Units.SI.Time tauD=0.032
        "Factor scaling contraction decay time";
      parameter Modelica.Units.SI.Time tauR=0.048/2
        "Factor scaling contraction rise time";
      parameter Modelica.Units.SI.Time tauSC=0.425/2
        "Factor scaling duration of contraction";
    equation
      connect(heartComponent.phi, condHeartPhi.y) annotation (Line(points={{-16,-16},
              {60,-16},{60,-16},{43.4,-16}},    color={0,0,127}));
      annotation (experiment(
          StopTime=15,
          Interval=0.02,
          Tolerance=1e-05,
          __Dymola_Algorithm="Cvode"));
    end LumensPhiSensitivity;

    model testDrivingOttesen
      Components.Subsystems.Heart.Auxiliary.TriSegMechanics_components.Driving_Olufsen
        drivingOttesen(TR=0.2, TR_maxAct=0.1)
        annotation (Placement(transformation(extent={{-12,-10},{8,10}})));
      Modelica.Blocks.Sources.Ramp phi_ramp(
        height=0.75,
        duration=5.0,
        offset=0.25,
        startTime=5.0)
        annotation (Placement(transformation(extent={{-100,-10},{-80,10}})));
        inner Physiolibrary.Types.Fraction phi = phi_ramp.y;
      Components.Subsystems.Heart.Auxiliary.TriSegMechanics_components.Driving_Lumens
        drivingLumens
        annotation (Placement(transformation(extent={{-12,52},{8,72}})));
      Components.Subsystems.Heart.Auxiliary.TriSegMechanics_components.Driving_Calcium
        drivingFunctionCalcium
        annotation (Placement(transformation(extent={{-12,74},{8,94}})));
      Components.Subsystems.Baroreflex.HeartRate_HRMinMax heartRate2_1(phi0=
            0.0025)
        annotation (Placement(transformation(extent={{-60,-10},{-40,10}})));
    equation
      connect(drivingFunctionCalcium.frequency, drivingLumens.frequency)
        annotation (Line(points={{-11,84},{-26,84},{-26,62},{-11,62}}, color={0,
              0,127}));
      connect(phi_ramp.y, heartRate2_1.phi)
        annotation (Line(points={{-79,0},{-60,0}}, color={0,0,127}));
      connect(heartRate2_1.HR, drivingOttesen.frequency)
        annotation (Line(points={{-39.8,0},{-11,0}}, color={0,0,127}));
      connect(heartRate2_1.HR, drivingLumens.frequency) annotation (Line(points=
             {{-39.8,0},{-26,0},{-26,62},{-11,62}}, color={0,0,127}));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)),
        experiment(
          StopTime=15,
          Interval=0.001,
          Tolerance=1e-05,
          __Dymola_Algorithm="Dassl"));
    end testDrivingOttesen;

    model TestTriSegMechLumens_OttesenFriving
      extends TestTriSegMech_Lumens(heart(
          UseFrequencyInput=true,
          UsePhiInput=true,
          ventricles(redeclare
              Components.Subsystems.Heart.Auxiliary.TriSegMechanics_components.Driving_Olufsen
              calciumMechanics)), thoracic_pressure(nperiod=0));
      Modelica.Blocks.Sources.Ramp phi_ramp(
        height=0.25,
        duration=0,
        offset=0.25,
        startTime=10.0)
        annotation (Placement(transformation(extent={{-60,60},{-40,80}})));
      Components.Subsystems.Baroreflex.HeartRate_HRMinMax heartRate2_1(phi0=
            0.0025)
        annotation (Placement(transformation(extent={{66,-10},{46,10}})));
    equation
      connect(phi_ramp.y, heartRate2_1.phi) annotation (Line(points={{-39,70},{
              78,70},{78,0},{66,0}}, color={0,0,127}));
      connect(heart.frequency_input, heartRate2_1.HR)
        annotation (Line(points={{10,0},{45.8,0}}, color={0,0,127}));
      connect(heart.phi, heartRate2_1.phi) annotation (Line(points={{10,6},{44,
              6},{44,70},{78,70},{78,0},{66,0}}, color={0,0,127}));
    end TestTriSegMechLumens_OttesenFriving;

  package OMTests
    model CardiovascularSystem
        "A base model with manually added settings and steady state initialization"
      extends ADAN_main.SystemicTree.Identification.SteadyState.Baseline_init(
          useAutonomousPhi(y=true),  settings(
            EvaluateFunctionalParams=true,
            HR_max=2.907,
            UseNonLinear_TissuesCompliance=true,
            V_PV_init=7.4e-05,
            baro_f1=0.0031,
            baro_useAbsolutePressureTerm=false,
            eta_vc=0.15745,
            syst_art_k_E=0.350423,
            syst_TPR(displayUnit="(mmHg.min)/l") = 119430194.64636,
            syst_TR_frac=5.118955,
            syst_art_UseVasoconstrictionEffect=true,
            tissues_UseStraighteningReaction2Phi=true,
            tissues_ZPV_nom=0.00210124,
            tissues_eta_C=0.22878,
            tissues_eta_Ra=3.17162,
            tissues_gamma=0.5,
            tissues_tau_R(displayUnit="s") = 0,
            veins_activation_tau=0,
            baro_g =          6.062580e-01,
            baro_tau_s =       1.156200e+02,
            baro_xi_delta0 =              2.688000e-01,
            pulm_C_PV =          1.987900e-07,
            heart_vntr_xi_Vw =   0.90375,
            heart_vntr_xi_AmRef =   1.06,
            heart_vntr_D_A =            1.974,
            heart_vntr_TR( displayUnit="s") = 0.38,
            heart_vntr_TR_maxAct( displayUnit="s") = 0.1224,
            heart_vntr_D_A_maxAct =           18.8325,
            tissues_chi_Ra =           3.477600e+01));
      extends SystemicTree.Auxiliary.partialCVS_outputs(useAutonomousPhi(y=true));

      annotation (experiment(
          StopTime=60,
          Interval=0.02,
          Tolerance=1e-07,
          __Dymola_Algorithm="Cvode"));
    end CardiovascularSystem;

    model CVS_simplified "Base class for circulatory model"
      extends Physiolibrary.Icons.CardioVascular;
      replaceable Components.Subsystems.Systemic.Postures.SystemicAV_SupineTilt SystemicComponent(UseBaroreflexOutput = false, UseThoracic_PressureInput = false, UsePhi_Input = false, brachial_vein_L138(UseInertance = true)) annotation (
        __Dymola_choicesAllMatching = true,
        Placement(transformation(extent = {{-58, 18}, {18, 48}})));
      public
        replaceable Components.Subsystems.Heart.Heart_TriSegMechanics_Simple
          heartComponent(
          UseFrequencyInput=false,
          UseThoracic_PressureInput=false,
          UsePhiInput=false) constrainedby
          Components.Subsystems.Heart.partialHeart
          annotation (Placement(transformation(extent={{-16,-32},{-36,-12}})));
      replaceable Components.Subsystems.Pulmonary.PulmonaryTriSeg_NonLinear pulmonaryComponent(
          UseThoracic_PressureInput=false)                                                                                       constrainedby
          Components.Subsystems.Pulmonary.partialPulmonary                                                                                                                                      annotation (
         Placement(transformation(extent = {{-34, -62}, {-14, -42}})));

        inner Components.Settings settings(
          heart_vntr_TR_maxAct(displayUnit="s") = 0.1224,
          heart_vntr_TR(displayUnit="s") = 0.38,
          EvaluateFunctionalParams=true,
          HR_max=2.907,
          UseNonLinear_TissuesCompliance=true,
          V_PV_init=7.4e-05,
          baro_f1=0.0031,
          baro_useAbsolutePressureTerm=false,
          eta_vc=0.15745,
          heart_vntr_xi_AmRef=1.06,
          heart_vntr_xi_Vw=0.90375,
          heart_vntr_D_A_maxAct=18.8325,
          heart_vntr_D_A=1.974,
          syst_art_k_E=0.350423,
          syst_TPR(displayUnit="(mmHg.min)/l") = 119430194.64636,
          syst_TR_frac=5.118955,
          syst_art_UseVasoconstrictionEffect=true,
          tissues_UseStraighteningReaction2Phi=true,
          tissues_ZPV_nom=0.00210124,
          tissues_eta_C=0.22878,
          tissues_eta_Ra=3.17162,
          tissues_gamma=0.5,
          tissues_tau_R(displayUnit="s") = 0,
          veins_activation_tau=0,
          baro_g=6.062580e-01,
          baro_tau_s=1.156200e+02,
          baro_xi_delta0=2.688000e-01,
          pulm_C_PV=1.987900e-07,
          tissues_chi_Ra=3.477600e+01,
          initByPressure=false,
          tissues_CO_nom=0.000105)
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
    equation
      connect(SystemicComponent.port_b, heartComponent.sv) annotation (
        Line(points = {{18, 28}, {24, 28}, {24, -12}, {-16, -12}}, color = {0, 0, 0}, thickness = 1));
      connect(heartComponent.sa, SystemicComponent.port_a) annotation (
        Line(points = {{-36, -12}, {-64, -12}, {-64, 28}, {-58, 28}}, color = {0, 0, 0}, thickness = 1));
      connect(heartComponent.pv, pulmonaryComponent.port_b) annotation (
        Line(points = {{-16, -32}, {-8, -32}, {-8, -52}, {-14, -52}}, color = {0, 0, 0}, thickness = 1));
      connect(pulmonaryComponent.port_a, heartComponent.pa) annotation (
        Line(points = {{-34, -52}, {-42, -52}, {-42, -32}, {-36, -32}}, color = {0, 0, 0}, thickness = 1));
      annotation (
        Icon(coordinateSystem(preserveAspectRatio = false)),
        Diagram(coordinateSystem(preserveAspectRatio = false)),
        experiment(StopTime = 10, Interval = 0.02, Tolerance = 1e-06));
    end CVS_simplified;

    model systemic "Base class for circulatory model"
      extends Physiolibrary.Icons.CardioVascular;
      replaceable Components.Subsystems.Systemic.Postures.SystemicAV_SupineTilt SystemicComponent(UseBaroreflexOutput = false, UseThoracic_PressureInput = false, UsePhi_Input = false, brachial_vein_L138(UseInertance = true)) annotation (
        __Dymola_choicesAllMatching = true,
        Placement(transformation(extent = {{-58, 18}, {18, 48}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(P = 13332.2387415) annotation (
        Placement(transformation(extent = {{-96, 18}, {-76, 38}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(P = 266.64477483) annotation (
        Placement(transformation(extent = {{50, 18}, {30, 38}})));
        inner Components.Settings settings(
          heart_vntr_TR_maxAct(displayUnit="s") = 0.1224,
          heart_vntr_TR(displayUnit="s") = 0.38,
          EvaluateFunctionalParams=true,
          HR_max=2.907,
          UseNonLinear_TissuesCompliance=true,
          V_PV_init=7.4e-05,
          baro_f1=0.0031,
          baro_useAbsolutePressureTerm=false,
          eta_vc=0.15745,
          heart_vntr_xi_AmRef=1.06,
          heart_vntr_xi_Vw=0.90375,
          heart_vntr_D_A_maxAct=18.8325,
          heart_vntr_D_A=1.974,
          syst_art_k_E=0.350423,
          syst_TPR(displayUnit="(mmHg.min)/l") = 119430194.64636,
          syst_TR_frac=5.118955,
          syst_art_UseVasoconstrictionEffect=true,
          tissues_UseStraighteningReaction2Phi=true,
          tissues_ZPV_nom=0.00210124,
          tissues_eta_C=0.22878,
          tissues_eta_Ra=3.17162,
          tissues_gamma=0.5,
          tissues_tau_R(displayUnit="s") = 0,
          veins_activation_tau=0,
          baro_g=6.062580e-01,
          baro_tau_s=1.156200e+02,
          baro_xi_delta0=2.688000e-01,
          pulm_C_PV=1.987900e-07,
          tissues_chi_Ra=3.477600e+01,
          initByPressure=false,
          tissues_CO_nom=0.000105)
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
    equation
      connect(SystemicComponent.port_a, unlimitedVolume.y) annotation (
        Line(points = {{-58, 28}, {-76, 28}}, color = {0, 0, 0}, thickness = 1));
      connect(SystemicComponent.port_b, unlimitedVolume1.y) annotation (
        Line(points = {{18, 28}, {30, 28}}, color = {0, 0, 0}, thickness = 1));
      annotation (
        Icon(coordinateSystem(preserveAspectRatio = false)),
        Diagram(coordinateSystem(preserveAspectRatio = false)),
        experiment(StopTime = 10, Interval = 0.02, Tolerance = 1e-06));
    end systemic;

    model pulmonary "Base class for circulatory model"
      extends Physiolibrary.Icons.CardioVascular;
      replaceable Components.Subsystems.Pulmonary.PulmonaryTriSeg_NonLinear pulmonaryComponent(UseThoracic_PressureInput = false) constrainedby
          Components.Subsystems.Pulmonary.partialPulmonary                                                                                                                                       annotation (
         Placement(transformation(extent={{-10,-10},{10,10}})));

      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(P = 1333.22387415) annotation (
        Placement(transformation(extent={{-94,-10},{-74,10}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(P = 2666.4477483) annotation (
        Placement(transformation(extent={{90,-10},{70,10}})));
      Physiolibrary.Hydraulic.Components.Resistor resistor(Resistance(displayUnit="(mmHg.min)/l")=
             7999.3432449)                                                                            annotation (
        Placement(visible = true, transformation(origin={-42,0},     extent = {{-10, -10}, {10, 10}}, rotation = 0)));
      Physiolibrary.Hydraulic.Components.Resistor resistor1(Resistance(displayUnit="(Pa.s)/m3")=
             0.001)                                                                                   annotation (
        Placement(visible = true, transformation(origin={38,0},      extent = {{-10, -10}, {10, 10}}, rotation = 0)));
        inner Components.Settings settings(
          heart_vntr_TR_maxAct(displayUnit="s") = 0.1224,
          heart_vntr_TR(displayUnit="s") = 0.38,
          EvaluateFunctionalParams=true,
          HR_max=2.907,
          UseNonLinear_TissuesCompliance=true,
          V_PV_init=7.4e-05,
          baro_f1=0.0031,
          baro_useAbsolutePressureTerm=false,
          eta_vc=0.15745,
          heart_vntr_xi_AmRef=1.06,
          heart_vntr_xi_Vw=0.90375,
          heart_vntr_D_A_maxAct=18.8325,
          heart_vntr_D_A=1.974,
          syst_art_k_E=0.350423,
          syst_TPR(displayUnit="(mmHg.min)/l") = 119430194.64636,
          syst_TR_frac=5.118955,
          syst_art_UseVasoconstrictionEffect=true,
          tissues_UseStraighteningReaction2Phi=true,
          tissues_ZPV_nom=0.00210124,
          tissues_eta_C=0.22878,
          tissues_eta_Ra=3.17162,
          tissues_gamma=0.5,
          tissues_tau_R(displayUnit="s") = 0,
          veins_activation_tau=0,
          baro_g=6.062580e-01,
          baro_tau_s=1.156200e+02,
          baro_xi_delta0=2.688000e-01,
          pulm_C_PV=1.987900e-07,
          tissues_chi_Ra=3.477600e+01,
          initByPressure=false,
          tissues_CO_nom=0.000105)
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
    equation
      connect(unlimitedVolume.y, resistor.q_in) annotation (Line(
          points={{-74,0},{-52,0}},
          color={0,0,0},
          thickness=1));
      connect(resistor.q_out, pulmonaryComponent.port_a) annotation (Line(
          points={{-32,0},{-10,0}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedVolume1.y, resistor1.q_out) annotation (Line(
          points={{70,0},{48,0}},
          color={0,0,0},
          thickness=1));
      connect(resistor1.q_in, pulmonaryComponent.port_b) annotation (Line(
          points={{28,0},{10,0}},
          color={0,0,0},
          thickness=1));
      annotation (
        Icon(coordinateSystem(preserveAspectRatio = false)),
        Diagram(coordinateSystem(preserveAspectRatio = false)),
        experiment(StopTime = 10, Interval = 0.02, Tolerance = 1e-06));
    end pulmonary;

    model heart "Base class for circulatory model"
      extends Physiolibrary.Icons.CardioVascular;
      replaceable Components.Subsystems.Heart.Heart_TriSegMechanics_Simple heart(
          tricuspidValve(useChatteringProtection=false),
          pulmonaryValve(useChatteringProtection=true),
          mitralValve(useChatteringProtection=false),
          aorticValve(useChatteringProtection=true)) constrainedby
          Components.Subsystems.Pulmonary.partialPulmonary annotation (
             Placement(transformation(extent=
                  {{-10,-10},{10,10}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(P = 1333.22387415) annotation (
        Placement(transformation(extent={{-96,0},{-76,20}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(P=
              13332.2387415)                                                             annotation (
        Placement(transformation(extent={{94,8},{74,28}})));
      Physiolibrary.Hydraulic.Components.Resistor resistor(Resistance(
              displayUnit="(mmHg.min)/l") = 7999.3432449)                                             annotation (
        Placement(visible = true, transformation(origin={-44,10},    extent = {{-10, -10}, {10, 10}}, rotation = 0)));
      Physiolibrary.Hydraulic.Components.Resistor resistor1(Resistance(
              displayUnit="(Pa.s)/m3") = 0.001)                                                       annotation (
        Placement(visible = true, transformation(origin={42,18},     extent = {{-10, -10}, {10, 10}}, rotation = 0)));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume2(P=
              666.611937075)                                                             annotation (
        Placement(transformation(extent={{-98,-28},{-78,-8}})));
      Physiolibrary.Hydraulic.Components.Resistor resistor2(Resistance(
              displayUnit="(mmHg.min)/l") = 7999.3432449)                                             annotation (
        Placement(visible = true, transformation(origin={-46,-18},   extent = {{-10, -10}, {10, 10}}, rotation = 0)));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume3(P=
              2666.4477483)                                                              annotation (
        Placement(transformation(extent={{96,-32},{76,-12}})));
      Physiolibrary.Hydraulic.Components.Resistor resistor3(Resistance(
              displayUnit="(Pa.s)/m3") = 0.001)                                                       annotation (
        Placement(visible = true, transformation(origin={44,-22},    extent = {{-10, -10}, {10, 10}}, rotation = 0)));
        inner Components.Settings settings(
          heart_vntr_TR_maxAct(displayUnit="s") = 0.1224,
          heart_vntr_TR(displayUnit="s") = 0.38,
          EvaluateFunctionalParams=true,
          HR_max=2.907,
          UseNonLinear_TissuesCompliance=true,
          V_PV_init=7.4e-05,
          baro_f1=0.0031,
          baro_useAbsolutePressureTerm=false,
          eta_vc=0.15745,
          heart_vntr_xi_AmRef=1.06,
          heart_vntr_xi_Vw=0.90375,
          heart_vntr_D_A_maxAct=18.8325,
          heart_vntr_D_A=1.974,
          syst_art_k_E=0.350423,
          syst_TPR(displayUnit="(mmHg.min)/l") = 119430194.64636,
          syst_TR_frac=5.118955,
          syst_art_UseVasoconstrictionEffect=true,
          tissues_UseStraighteningReaction2Phi=true,
          tissues_ZPV_nom=0.00210124,
          tissues_eta_C=0.22878,
          tissues_eta_Ra=3.17162,
          tissues_gamma=0.5,
          tissues_tau_R(displayUnit="s") = 0,
          veins_activation_tau=0,
          baro_g=6.062580e-01,
          baro_tau_s=1.156200e+02,
          baro_xi_delta0=2.688000e-01,
          pulm_C_PV=1.987900e-07,
          tissues_chi_Ra=3.477600e+01,
          initByPressure=false,
          tissues_CO_nom=0.000105)
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
      replaceable
      Physiolibrary.Hydraulic.Components.ElasticVessel c_sa(
          volume_start(displayUnit="ml") = 3.5e-05,
          Compliance(displayUnit="ml/mmHg") = settings.pulm_C_PA,
          useExternalPressureInput=false)
        annotation (Placement(transformation(extent={{4,30},{24,50}})));
      replaceable
      Physiolibrary.Hydraulic.Components.ElasticVessel c_pa1(
          volume_start(displayUnit="ml") = 3.5e-05,
          Compliance(displayUnit="ml/mmHg") = settings.pulm_C_PA,
          useExternalPressureInput=false)
        annotation (Placement(transformation(extent={{18,-76},{38,-56}})));
    equation
        connect(unlimitedVolume.y, resistor.q_in) annotation (Line(
            points={{-76,10},{-54,10}},
            color={0,0,0},
            thickness=1));
        connect(unlimitedVolume1.y, resistor1.q_out) annotation (Line(
            points={{74,18},{52,18}},
            color={0,0,0},
            thickness=1));
        connect(heart.sv, resistor.q_out) annotation (Line(
            points={{-10,10},{-34,10}},
            color={0,0,0},
            thickness=1));
        connect(unlimitedVolume2.y, resistor2.q_in) annotation (Line(
            points={{-78,-18},{-56,-18}},
            color={0,0,0},
            thickness=1));
        connect(resistor2.q_out, heart.pv) annotation (Line(
            points={{-36,-18},{-24,-18},{-24,-10},{-10,-10}},
            color={0,0,0},
            thickness=1));
        connect(unlimitedVolume3.y, resistor3.q_out) annotation (Line(
            points={{76,-22},{54,-22}},
            color={0,0,0},
            thickness=1));
        connect(heart.sa, resistor1.q_in) annotation (Line(
            points={{10,10},{18,10},{18,18},{32,18}},
            color={0,0,0},
            thickness=1));
        connect(heart.pa, resistor3.q_in) annotation (Line(
            points={{10,-10},{24,-10},{24,-22},{34,-22}},
            color={0,0,0},
            thickness=1));
        connect(c_sa.q_in, resistor1.q_in) annotation (Line(
            points={{14,40},{16,40},{16,10},{18,10},{18,18},{32,18}},
            color={0,0,0},
            thickness=1));
        connect(c_pa1.q_in, resistor3.q_in) annotation (Line(
            points={{28,-66},{22,-66},{22,-10},{24,-10},{24,-22},{34,-22}},
            color={0,0,0},
            thickness=1));
      annotation (
        Icon(coordinateSystem(preserveAspectRatio = false)),
        Diagram(coordinateSystem(preserveAspectRatio = false)),
        experiment(
            StopTime=10,
            Interval=0.02,
            Tolerance=1e-05,
            __Dymola_Algorithm="Dassl"));
    end heart;

    model TestTriSegMechVentricles
      Components.Subsystems.Heart.Auxiliary.TriSegMechanics_components.Ventricles_Lumens
          ventricles(V_LV(start=l), V_RV(start=r))
          annotation (Placement(transformation(extent={{-10,-10},{10,10}})));
      Modelica.Blocks.Sources.Ramp ramp(
        height=0,
        duration=10,
        offset=1,
        startTime=0) annotation (Placement(transformation(extent={{-74,
                -16},{-54,4}})));
      Physiolibrary.Hydraulic.Components.Resistor resistor(Resistance(
            displayUnit="(mmHg.min)/l") = 159986864.898)
        annotation (Placement(transformation(extent={{40,10},{60,30}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(P=
            2666.4477483)
        annotation (Placement(transformation(extent={{90,10},{70,30}})));
      Physiolibrary.Hydraulic.Components.Resistor resistor1(Resistance(
            displayUnit="(mmHg.min)/l") = 159986864.898) annotation (
          Placement(transformation(extent={{40,-30},{60,-10}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(P=
            2666.4477483) annotation (Placement(transformation(extent={{
                90,-30},{70,-10}})));
      Modelica.Blocks.Sources.Ramp ramp1(
        height=0,
        duration=10,
        offset=0,
        startTime=0) annotation (Placement(transformation(extent={{-36,-52},{-16,-32}})));
        parameter Physiolibrary.Types.Volume r=0.0001;
        parameter Physiolibrary.Types.Volume l=0.0001;
      Modelica.Blocks.Sources.Ramp phi(
        height=0,
        duration=10,
        offset=0,
        startTime=0) annotation (Placement(transformation(extent={{-58,66},
                {-38,86}})));
        inner Components.Settings settings(
          heart_vntr_TR_maxAct(displayUnit="s") = 0.1224,
          heart_vntr_TR(displayUnit="s") = 0.38,
          EvaluateFunctionalParams=true,
          HR_max=2.907,
          UseNonLinear_TissuesCompliance=true,
          V_PV_init=7.4e-05,
          baro_f1=0.0031,
          baro_useAbsolutePressureTerm=false,
          eta_vc=0.15745,
          heart_vntr_xi_AmRef=1.06,
          heart_vntr_xi_Vw=0.90375,
          heart_vntr_D_A_maxAct=18.8325,
          heart_vntr_D_A=1.974,
          syst_art_k_E=0.350423,
          syst_TPR(displayUnit="(mmHg.min)/l") = 119430194.64636,
          syst_TR_frac=5.118955,
          syst_art_UseVasoconstrictionEffect=true,
          tissues_UseStraighteningReaction2Phi=true,
          tissues_ZPV_nom=0.00210124,
          tissues_eta_C=0.22878,
          tissues_eta_Ra=3.17162,
          tissues_gamma=0.5,
          tissues_tau_R(displayUnit="s") = 0,
          veins_activation_tau=0,
          baro_g=6.062580e-01,
          baro_tau_s=1.156200e+02,
          baro_xi_delta0=2.688000e-01,
          pulm_C_PV=1.987900e-07,
          tissues_chi_Ra=3.477600e+01,
          initByPressure=false,
          tissues_CO_nom=0.000105)
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
    equation
      connect(ramp.y, ventricles.frequency) annotation (Line(points={{-53,
              -6},{-32,-6},{-32,0},{-10,0}}, color={0,0,127}));
      connect(resistor.q_out, unlimitedVolume.y) annotation (Line(
          points={{60,20},{70,20}},
          color={0,0,0},
          thickness=1));
      connect(resistor1.q_out, unlimitedVolume1.y) annotation (Line(
          points={{60,-20},{70,-20}},
          color={0,0,0},
          thickness=1));
      connect(ramp1.y, ventricles.thoracic_pressure_input) annotation (Line(points={
              {-15,-42},{-8,-42},{-8,-40},{0,-40},{0,-10}}, color={0,0,127}));
      connect(ventricles.port_rv, resistor.q_in) annotation (Line(
          points={{8,4},{24,4},{24,20},{40,20}},
          color={0,0,0},
          thickness=1));
      connect(resistor1.q_in, ventricles.port_lv) annotation (Line(
          points={{40,-20},{26,-20},{26,-6},{8,-6}},
          color={0,0,0},
          thickness=1));
      connect(ventricles.phi_input, phi.y) annotation (Line(points={{0,10},
              {-18,10},{-18,76},{-37,76}}, color={0,0,127}));
      annotation (
        Icon(coordinateSystem(preserveAspectRatio=false)),
        Diagram(coordinateSystem(preserveAspectRatio=false)),
        experiment(Tolerance=1e-06, __Dymola_Algorithm="Dassl"));
    end TestTriSegMechVentricles;
  end OMTests;

    model simpleVenuosTest
      Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump(
          useSolutionFlowInput=true,
          SolutionFlow(displayUnit="m3/s")=
          3.3333333333333e-05)
        annotation (Placement(transformation(extent={{-80,-10},{-60,10}})));

      Physiolibrary.Hydraulic.Components.Resistor resistor(Resistance(
            displayUnit="(mmHg.min)/l") = 15998686489.8) annotation (Placement(
            transformation(
            extent={{-10,-10},{10,10}},
            rotation=90,
            origin={-14,24})));
      Physiolibrary.Hydraulic.Components.ElasticVessel elasticVessel(Compliance(
            displayUnit="m3/Pa") = 7.5006157584566e-11)
        annotation (Placement(transformation(extent={{-24,48},{-4,68}})));
      Physiolibrary.Hydraulic.Components.Resistor resistor1(Resistance=
            7999343244.9)
        annotation (Placement(transformation(extent={{20,-10},{40,10}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(P=
            666.611937075)
        annotation (Placement(transformation(extent={{80,-10},{60,10}})));
      Modelica.Blocks.Sources.Sine sine(
        amplitude=2e-5,
        f=1,
        offset=0.5e-5)
        annotation (Placement(transformation(extent={{-100,20},{-80,40}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel elasticVessel1(
        ZeroPressureVolume=0.002,
        CollapsingPressureVolume=0,
        Compliance(displayUnit="ml/mmHg") = 7.5006157584566e-12)
        annotation (Placement(transformation(extent={{-24,-26},{-4,-6}})));
    equation
      connect(unlimitedVolume.y, resistor1.q_out) annotation (Line(
          points={{60,0},{40,0}},
          color={0,0,0},
          thickness=1));
      connect(unlimitedPump.q_out, resistor.q_in) annotation (Line(
          points={{-60,0},{-14,0},{-14,14}},
          color={0,0,0},
          thickness=1));
      connect(resistor.q_out, elasticVessel.q_in) annotation (Line(
          points={{-14,34},{-14,58}},
          color={0,0,0},
          thickness=1));
      connect(resistor1.q_in, resistor.q_in) annotation (Line(
          points={{20,0},{-14,0},{-14,14}},
          color={0,0,0},
          thickness=1));
      connect(sine.y, unlimitedPump.solutionFlow)
        annotation (Line(points={{-79,30},{-70,30},{-70,7}}, color={0,0,127}));
      connect(elasticVessel1.q_in, resistor.q_in) annotation (Line(
          points={{-14,-16},{-14,14}},
          color={0,0,0},
          thickness=1));
      annotation (
        Icon(coordinateSystem(preserveAspectRatio=false)),
        Diagram(coordinateSystem(preserveAspectRatio=false)),
        experiment(
          StopTime=100,
          Interval=0.02,
          Tolerance=1e-06,
          __Dymola_Algorithm="Cvode"));
    end simpleVenuosTest;

    model testStepping
                  Components.Signals.Stepping  Exercise(
        startTime=40,
        interval=40,
        increment=0.1,
        maxVal=1)
        annotation (Placement(transformation(extent={{-86,42},{-66,62}})));

    Real s = time;
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end testStepping;
  end tests;

  package SimpleCirculation
    "Simplest valsalva, reimplemented from Dan Beard's Matlab code"
    package Valsalva
    model SimplestValsalva
      parameter Real alphaR = 1.5;
    parameter Real alphaC = 2.5;
    parameter Real phi = 0.25 " sympathetic tone";
    parameter Real ep = 1;
    parameter Real H = 1 " HR sec.^(-1)";

    // State variables
    Real theta( start = 0)
                          "beat counter ";
    Real V_ta(  start = 7)
                          "volume thoracic aorta (mL)                  ";
    Real V_sa(  start = 100)
                            "volume systemic arteries, outside of TC (mL)";
    Real V_sv(  start = 3000)
                             "volume systemic veins, outside of TC (mL)   ";
    Real V_tv(  start = 75)
                           "volume thoracic vena cava (mL)              ";
    Real V_LV(  start = 100)
                            "volume thoracic LV (mL)                     ";
    Real V_pa(  start = 100)
                            "volume pulmonary arteries (mL)              ";
    Real V_pv(  start = 100)
                            "volume pulmonary veins (mL)                 ";
    Real V_RV(  start = 100)
                            "volume right ventricle (mL)                 ";

    // element values
    parameter Real R_ta = (100-98)/83.3;
    parameter Real R_sa = (98-50)/83.3 * (1 + alphaR*(phi-0.25));
    parameter Real R_sv = (50-1)/83.3;
    parameter Real R_tv = 1/83.3;
    parameter Real R_pa = (18-1)/83.3;
    parameter Real R_pv = 1/83.3;
    parameter Real Rv = 0.001;
    parameter Real C_ta = 7/100;
    parameter Real C_sa = 100/98;
    parameter Real C_sv = 3000/50 / (1 + alphaC*(phi-0.25));
    parameter Real C_tv = 75/1;
    parameter Real C_pa = 100/18;
    parameter Real C_pv = 100/1;

    Real Pth;

    // Pressures
    Real P_ta = V_ta/C_ta + Pth;
    Real P_sa = V_sa/C_sa;
    Real P_sv = V_sv/C_sv;
    Real P_tv = V_tv/C_tv + Pth;
    //Real P_tv = 2.2;
    Real P_pa = V_pa/C_pa + Pth;
    Real P_pv = V_pv/C_pv + 1.05*Pth;

    Real P_LV = PVfunction(theta,V_LV,ep) + Pth;
    Real P_RV = PVfunction(theta,V_RV,0.3) + Pth;
    Real Fout_LV = max(0, (P_LV-P_ta)/Rv);
    Real Fin_RV =  max(0, (P_tv-P_RV)/R_tv);
    //Real Fin_RV =  max(0, (1-P_RV)/R_tv);
    Real Fout_RV = max(0, (P_RV-P_pa)/Rv);
    Real Fin_LV =  max(0, (P_pv-P_LV)/R_pv);

    equation
    // Thoracic pressure
    if time < 30 then
      Pth = 0;
    elseif time < 49 then
        Pth = 38*(1 - exp( -2*(time-30)));
    else
        Pth = 38*exp( -2*(time-49));
    end if;

    der(theta) = H;
    der(V_ta)  = Fout_LV - (P_ta-P_sa)/R_ta;
    der(V_sa)  = (P_ta-P_sa)/R_ta - (P_sa-P_sv)/R_sa;
    der(V_sv)  = (P_sa-P_sv)/R_sa - (P_sv-P_tv)/R_sv;
    der(V_tv)  = (P_sv-P_tv)/R_sv - Fin_RV;
    der(V_LV)  = Fin_LV - Fout_LV;
    der(V_pa)  = Fout_RV - (P_pa-P_pv)/R_pa;
    der(V_pv)  = (P_pa-P_pv)/R_pa - Fin_LV;
    der(V_RV)  = Fin_RV - Fout_RV;
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end SimplestValsalva;

    function PVfunction
      import Modelica.Constants.pi;
      input Real Theta,V_LV,ep;
      output Real P_LV;

      parameter Real Vd = 0 "% unstressed volume (ml)";
      Real   Emax = ep*2.6;
      parameter Real Emin = 0.008;
      parameter Real   T_Mf =  0.3 " time to max E";
      parameter Real   T_Rf =  0.15
                                   " relaxation time";

    //  constant Real pi = Modelica.Constants.pi;
      Real tTilde;
      Real E;
    algorithm
      tTilde := mod(Theta,1); // fraction of cardiac cycle

      if tTilde < T_Mf then
        E :=(Emax - Emin)*(1 - cos(pi*tTilde/T_Mf))/2 + Emin;
      elseif (tTilde >= T_Mf) and (tTilde < (T_Mf + T_Rf)) then
        E :=(Emax - Emin)*(cos(pi*(tTilde - T_Mf)/T_Rf) + 1)/2 + Emin;
      else
        //tTilde >= (T_Mf + T_Rf)
        E :=Emin;
      end if;
    //% plv = E*Vd*( Vlv/Vd - 1 );
    P_LV :=E*(V_LV - Vd);
    //% plv = E*Vd*( (Vlv/Vd-1) + 0.2*(Vlv/Vd-1)^2 );
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end PVfunction;

    model BeatDrive
      Modelica.Blocks.Interfaces.BooleanOutput
                            beat
                               annotation (Placement(transformation(extent={{-28,-120},
                {12,-80}}),           iconTransformation(extent={{80,-120},{120,
                -80}})));
      Modelica.Blocks.Interfaces.RealOutput
                            beatTime = time - t0
                               annotation (Placement(transformation(extent={{-52,-98},
                {-12,-58}}),          iconTransformation(extent={{80,80},{120,
                120}})));
      Physiolibrary.Types.RealIO.FrequencyInput
                            HR annotation (Placement(transformation(extent={{-70,-38},
                {-30,2}}),            iconTransformation(extent={{-120,-20},{
                -80,20}})));

    //Physiolibrary.Types.Time tr "total integrated rate";
    Physiolibrary.Types.Time t0 "time of the last revolution";
    Integer cnt;
    equation
      beat = time > pre(t0) + 1/HR;

      when beat then
        t0 = time;
        cnt = pre(cnt) + 1;
      end when;

      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end BeatDrive;

    model ComplianceDriver
      Modelica.Blocks.Interfaces.RealInput
                            beatTime
                               annotation (Placement(transformation(extent={{-120,-20},
                {-80,20}}),           iconTransformation(extent={{-120,-20},{-80,20}})));
      Physiolibrary.Types.RealIO.HydraulicComplianceOutput
                            compliance = 1/E
                               annotation (Placement(transformation(extent={{80,-20},
                {120,20}}),           iconTransformation(extent={{80,-20},{120,20}})));

      parameter Physiolibrary.Types.HydraulicElastance Emax(displayUnit="mmHg/ml")=346638207.279;
      parameter Physiolibrary.Types.HydraulicElastance Emin(displayUnit="mmHg/ml")=1066579.09932;
      parameter Real T_Mf =  0.3 " time to max E";
      parameter Real T_Rf =  0.15  " relaxation time";
       parameter Physiolibrary.Types.Fraction ep=1   "elastance ratio";
       parameter Physiolibrary.Types.Fraction alphaF "Phi Effect on contractility ";

      Physiolibrary.Types.HydraulicElastance E;

      Physiolibrary.Types.RealIO.FractionInput phi=f   if useVariableContractility annotation (Placement(
            transformation(extent={{-120,-60},{-80,-20}}),
                                                        iconTransformation(extent={{-120,
                -100},{-80,-60}})));
      parameter Boolean useVariableContractility = false;
      protected
      Physiolibrary.Types.Fraction f;
    equation
      if not useVariableContractility then
        f = 0.25;
      end if;

      if beatTime < T_Mf then
        E = (Emax*ep*(1 + alphaF*(f-0.25)) - Emin)*(1 - cos(Modelica.Constants.pi*beatTime/T_Mf))/2 + Emin;
      elseif (beatTime >= T_Mf) and (beatTime < (T_Mf + T_Rf)) then
        E = (Emax*ep*(1 + alphaF*(f-0.25)) - Emin)*(cos(Modelica.Constants.pi*(beatTime - T_Mf)/T_Rf) + 1)/2 + Emin;
      else
        E = Emin;
      end if;

      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end ComplianceDriver;

    model simplestVS
      BeatDrive beatDrive
        annotation (Placement(transformation(extent={{-100,-36},{-80,-16}})));
      Physiolibrary.Types.Constants.FrequencyConst HR(k=1)
        annotation (Placement(transformation(extent={{-124,-32},{-108,-18}})));
      ComplianceDriver complianceDriver(ep=1, alphaF=1)
        annotation (Placement(transformation(extent={{-60,-16},{-40,4}})));
      Physiolibrary.Hydraulic.Components.Resistor R_TA(Resistance(displayUnit="(mmHg.s)/ml")=
             3199737.29796)
        annotation (Placement(transformation(extent={{40,20},{60,40}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_TA(
        volume_start=7e-06,
        Compliance=5.2504310309196e-10,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{10,20},{30,40}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve(_Gon(displayUnit=
             "ml/(mmHg.s)") = 7.5006157584566e-06)
        annotation (Placement(transformation(extent={{-20,20},{0,40}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_SA(volume_start=0.0001,
          Compliance=7.6506280736257e-09)
        annotation (Placement(transformation(extent={{70,20},{90,40}})));
      replaceable
      Physiolibrary.Hydraulic.Components.ElasticVessel C_SV(volume_start=0.003,
          Compliance=4.5003694550739e-7) constrainedby
          Physiolibrary.SteadyStates.Interfaces.SteadyState
        annotation (Placement(transformation(extent={{100,-80},{120,-60}})));
      Physiolibrary.Hydraulic.Components.Resistor R_SA(Resistance(displayUnit="(mmHg.s)/ml")=
             76793695.15104) annotation (Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=0,
            origin={110,30})));
      Physiolibrary.Hydraulic.Components.Resistor R_SV(Resistance(displayUnit="(mmHg.s)/ml")=
             78393563.80002) annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={80,-70})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_TV(
        volume_start=7.5e-05,
        Compliance=9.0007389101479e-10,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{40,-80},{60,-60}})));
      Physiolibrary.Hydraulic.Components.Resistor R_TV(Resistance(displayUnit="(mmHg.s)/ml")=
             1599868.64898) annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={20,-70})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve1
        annotation (Placement(transformation(extent={{0,-80},{-20,-60}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_LV(
        volume_start=0.0001,
        useComplianceInput=true,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-40,20},{-20,0}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_RV(
        volume_start=0.0001,
        useComplianceInput=true,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-40,-60},{-20,-40}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve2
        annotation (Placement(transformation(extent={{-60,20},{-40,40}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve3(_Gon(
            displayUnit="ml/(mmHg.s)") = 7.5006157584566e-06)
        annotation (Placement(transformation(extent={{-40,-80},{-60,-60}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_PA(
        volume_start=0.0001,
        Compliance=4.1628417459434e-08,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-90,-80},{-70,-60}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_PV(
        volume_start=0.0001,
        Compliance(displayUnit="ml/mmHg") = 7.5006157584566e-07,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-118,20},{-98,40}})));
      Physiolibrary.Hydraulic.Components.Resistor R_PA(Resistance(displayUnit="(mmHg.s)/ml")=
             27197767.03266) annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={-110,-70})));
      Physiolibrary.Hydraulic.Components.Resistor R_PV(Resistance(displayUnit="(mmHg.s)/ml")=
             1599868.64898) annotation (Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=0,
            origin={-80,30})));
      ComplianceDriver complianceDriver1(ep=0.3, alphaF=1)
        annotation (Placement(transformation(extent={{-60,-44},{-40,-24}})));
      replaceable Modelica.Blocks.Sources.Trapezoid           ThoracicPressure(
        amplitude=40*133.32,
        rising=0.1,
        width=20,
        falling=0.1,
        period=100,
        startTime=20)
        constrainedby Modelica.Blocks.Interfaces.SO
        annotation (Placement(transformation(extent={{-140,62},{-124,76}})));
    equation
      connect(beatDrive.HR, HR.y) annotation (Line(points={{-100,-26},{-108,-26},{-108,
              -25},{-106,-25}}, color={0,0,127}));
      connect(beatDrive.beatTime, complianceDriver.beatTime) annotation (Line(
            points={{-80,-16},{-70,-16},{-70,-6},{-60,-6}}, color={0,0,127}));
      connect(idealValve.q_out, C_TA.q_in) annotation (Line(
          points={{0,30},{20,30}},
          color={0,0,0},
          thickness=1));
      connect(C_TA.q_in, R_TA.q_in) annotation (Line(
          points={{20,30},{40,30}},
          color={0,0,0},
          thickness=1));
      connect(R_TA.q_out, C_SA.q_in) annotation (Line(
          points={{60,30},{80,30}},
          color={0,0,0},
          thickness=1));
      connect(C_SA.q_in, R_SA.q_in) annotation (Line(
          points={{80,30},{100,30}},
          color={0,0,0},
          thickness=1));
      connect(C_SV.q_in, R_SA.q_out) annotation (Line(
          points={{110,-70},{140,-70},{140,30},{120,30}},
          color={0,0,0},
          thickness=1));
      connect(C_SV.q_in, R_SV.q_in) annotation (Line(
          points={{110,-70},{90,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_TV.q_in, R_TV.q_in) annotation (Line(
          points={{50,-70},{30,-70}},
          color={0,0,0},
          thickness=1));
      connect(R_SV.q_out, C_TV.q_in) annotation (Line(
          points={{70,-70},{50,-70}},
          color={0,0,0},
          thickness=1));
      connect(R_TV.q_out, idealValve1.q_in) annotation (Line(
          points={{10,-70},{0,-70}},
          color={0,0,0},
          thickness=1));
      connect(idealValve.q_in, C_LV.q_in) annotation (Line(
          points={{-20,30},{-26,30},{-26,10},{-30,10}},
          color={0,0,0},
          thickness=1));
      connect(idealValve1.q_out, C_RV.q_in) annotation (Line(
          points={{-20,-70},{-30,-70},{-30,-50}},
          color={0,0,0},
          thickness=1));
      connect(idealValve.q_in, idealValve2.q_out) annotation (Line(
          points={{-20,30},{-40,30}},
          color={0,0,0},
          thickness=1));
      connect(idealValve1.q_out, idealValve3.q_in) annotation (Line(
          points={{-20,-70},{-40,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PA.q_in, R_PA.q_in) annotation (Line(
          points={{-80,-70},{-100,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PV.q_in, R_PA.q_out) annotation (Line(
          points={{-108,30},{-128,30},{-128,-70},{-120,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PA.q_in, idealValve3.q_out) annotation (Line(
          points={{-80,-70},{-60,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PV.q_in, R_PV.q_in) annotation (Line(
          points={{-108,30},{-90,30}},
          color={0,0,0},
          thickness=1));
      connect(complianceDriver.compliance, C_LV.compliance)
        annotation (Line(points={{-40,-6},{-30,-6},{-30,2}}, color={0,0,127}));
      connect(beatDrive.beatTime, complianceDriver1.beatTime) annotation (Line(
            points={{-80,-16},{-70,-16},{-70,-34},{-60,-34}}, color={0,0,127}));
      connect(complianceDriver1.compliance, C_RV.compliance) annotation (Line(
            points={{-40,-34},{-30,-34},{-30,-42}}, color={0,0,127}));
      connect(C_PV.externalPressure, ThoracicPressure.y)
        annotation (Line(points={{-100,38},{-100,69},{-123.2,69}},
                                                       color={244,125,35}));
      connect(C_TA.externalPressure, ThoracicPressure.y) annotation (Line(points={{28,38},
              {28,42},{-123.2,42},{-123.2,69}}, color={244,125,35}));
      connect(C_PA.externalPressure, ThoracicPressure.y) annotation (Line(points={{-72,-62},
              {-72,42},{-123.2,42},{-123.2,69}},  color={244,125,35}));
      connect(C_LV.externalPressure, ThoracicPressure.y) annotation (Line(
            points={{-22,2},{-22,42},{-123.2,42},{-123.2,69}},
                                                           color={244,125,35}));
      connect(C_RV.externalPressure, ThoracicPressure.y) annotation (Line(
            points={{-22,-42},{-22,42},{-123.2,42},{-123.2,69}},
                                                             color={244,125,35}));
      connect(C_TV.externalPressure, ThoracicPressure.y) annotation (Line(points={{58,-62},
              {58,-40},{-22,-40},{-22,42},{-123.2,42},{-123.2,69}},  color={244,125,
              35}));
      connect(idealValve2.q_in, R_PV.q_out) annotation (Line(
          points={{-60,30},{-70,30}},
          color={0,0,0},
          thickness=1));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false, extent={{-100,-100},
                {120,100}})), Diagram(coordinateSystem(preserveAspectRatio=false,
              extent={{-100,-100},{120,100}})));
    end simplestVS;

    model advancedDVS
      BeatDrive beatDrive
        annotation (Placement(transformation(extent={{-100,2},{-80,-18}})));
      Physiolibrary.Types.Constants.FrequencyConst HR(k=1)
        annotation (Placement(transformation(extent={{0,-120},{16,-106}})));
      ComplianceDriver complianceDriver(
        ep(displayUnit="1") = 1,
        alphaF=2.5,
        useVariableContractility=true)
        annotation (Placement(transformation(extent={{-60,-16},{-40,4}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve(_Gon(displayUnit="ml/(mmHg.s)")=
             7.5006157584566e-06)
        annotation (Placement(transformation(extent={{-20,20},{0,40}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_SV(
        volume_start(displayUnit="l") = 0.0045,
        useV0Input=true,
        useComplianceInput=true,
        Compliance=4.5003694550739e-07)
        annotation (Placement(transformation(extent={{100,-80},{120,-60}})));
      Physiolibrary.Hydraulic.Components.Resistor R_SV(Resistance(displayUnit="(mmHg.s)/ml")=
             78393563.80002) annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={80,-70})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_TV(
        volume_start=7.5e-05,
        Compliance=5.6254618188424e-07,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{40,-80},{60,-60}})));
      Physiolibrary.Hydraulic.Components.Resistor R_TV(Resistance(displayUnit="(mmHg.s)/ml")=
             1599868.64898) annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={20,-70})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve1
        annotation (Placement(transformation(extent={{0,-80},{-20,-60}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_LV(
        volume_start=0.0001,
        useComplianceInput=true,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-40,20},{-20,0}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_RV(
        volume_start=0.0001,
        useComplianceInput=true,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-40,-60},{-20,-40}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve2
        annotation (Placement(transformation(extent={{-60,20},{-40,40}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve3(_Gon(displayUnit="ml/(mmHg.s)")=
             7.5006157584566e-06)
        annotation (Placement(transformation(extent={{-40,-80},{-60,-60}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_PA(
        volume_start=0.0001,
        Compliance=4.1628417459434e-08,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-90,-80},{-70,-60}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_PV(
        volume_start=0.0001,
        Compliance(displayUnit="ml/mmHg") = 7.5006157584566e-07,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-118,20},{-98,40}})));
      Physiolibrary.Hydraulic.Components.Resistor R_PA(Resistance(displayUnit="(mmHg.s)/ml")=
             27197767.03266) annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={-110,-70})));
      Physiolibrary.Hydraulic.Components.Resistor R_PV(Resistance(displayUnit="(mmHg.s)/ml")=
             1599868.64898) annotation (Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=0,
            origin={-80,30})));
      ComplianceDriver complianceDriver1(
        ep=0.3,
        alphaF=2.5,
        useVariableContractility=true)
        annotation (Placement(transformation(extent={{-60,-44},{-40,-24}})));
      Components.Basic.venousVariableCompliance VenousVariableCompliance(
        useVariableCompliance=true,
        alphaZPV=2.5,
        baseCompliance=4.5003694550739e-07) annotation (Placement(
            transformation(
            rotation=0,
            extent={{10,-9},{-10,9}},
            origin={120,-45})));
      ArterialTree.SmithExtended.arteries arteries1(arteries_ADAN86(
          aortic_arch_C46(baroreceptor(epsilon_start=0.9977, s_start=0.9312)),
          baroreflex(
            phi(start=0.251996),
            fiSN_start=0.251996,
            f1=0.015,
            g=0.3,
            resetAt=0.0),
          internal_carotid_R8_A(baroreceptor(epsilon_start=0.9989, s_start=0.97))))
        annotation (Placement(transformation(rotation=0, extent={{42,20},{62,40}})));
      Components.Basic.variable_arterial_resistance
        variable_arterial_resistance(useVariableResistance=true, alphaR=0.005)
        annotation (Placement(transformation(extent={{28,-2},{48,18}})));
      Modelica.Blocks.Logical.Switch switch1
        annotation (Placement(transformation(extent={{70,-116},{90,-96}})));
      Modelica.Blocks.Sources.BooleanExpression useClosedLoopHR(y=true)
        annotation (Placement(transformation(extent={{30,-118},{50,-98}})));
      Components.Signals.DataFit.ThoracicPressureFromData ThoracicPressure(
          readData(ExperimentNr=2)) annotation (Placement(transformation(extent=
               {{-130,80},{-110,100}})), __Dymola_choicesAllMatching=true);
      Components.Signals.pressure_envelope pressure_envelope
        annotation (Placement(transformation(extent={{-52,52},{-60,60}})));
      Components.Signals.pressure_envelope pressure_envelope_data
        annotation (Placement(transformation(extent={{-58,88},{-50,80}})));
    equation
      connect(beatDrive.beatTime, complianceDriver.beatTime) annotation (Line(
            points={{-80,-18},{-70,-18},{-70,-6},{-60,-6}}, color={0,0,127}));
      connect(C_SV.q_in, R_SV.q_in) annotation (Line(
          points={{110,-70},{90,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_TV.q_in, R_TV.q_in) annotation (Line(
          points={{50,-70},{30,-70}},
          color={0,0,0},
          thickness=1));
      connect(R_SV.q_out, C_TV.q_in) annotation (Line(
          points={{70,-70},{50,-70}},
          color={0,0,0},
          thickness=1));
      connect(R_TV.q_out, idealValve1.q_in) annotation (Line(
          points={{10,-70},{0,-70}},
          color={0,0,0},
          thickness=1));
      connect(idealValve.q_in, C_LV.q_in) annotation (Line(
          points={{-20,30},{-26,30},{-26,10},{-30,10}},
          color={0,0,0},
          thickness=1));
      connect(idealValve1.q_out, C_RV.q_in) annotation (Line(
          points={{-20,-70},{-30,-70},{-30,-50}},
          color={0,0,0},
          thickness=1));
      connect(idealValve.q_in, idealValve2.q_out) annotation (Line(
          points={{-20,30},{-40,30}},
          color={0,0,0},
          thickness=1));
      connect(idealValve1.q_out, idealValve3.q_in) annotation (Line(
          points={{-20,-70},{-40,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PA.q_in, R_PA.q_in) annotation (Line(
          points={{-80,-70},{-100,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PV.q_in, R_PA.q_out) annotation (Line(
          points={{-108,30},{-128,30},{-128,-70},{-120,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PA.q_in, idealValve3.q_out) annotation (Line(
          points={{-80,-70},{-60,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PV.q_in, R_PV.q_in) annotation (Line(
          points={{-108,30},{-90,30}},
          color={0,0,0},
          thickness=1));
      connect(complianceDriver.compliance, C_LV.compliance)
        annotation (Line(points={{-40,-6},{-30,-6},{-30,2}}, color={0,0,127}));
      connect(beatDrive.beatTime, complianceDriver1.beatTime) annotation (Line(
            points={{-80,-18},{-70,-18},{-70,-34},{-60,-34}}, color={0,0,127}));
      connect(complianceDriver1.compliance, C_RV.compliance)
        annotation (Line(points={{-40,-34},{-30,-34},{-30,-42}}, color={0,0,127}));
      connect(C_PV.externalPressure, ThoracicPressure.y)
        annotation (Line(points={{-100,38},{-100,90},{-109,90}},
                                                       color={244,125,35},
          thickness=0.5));
      connect(C_PA.externalPressure, ThoracicPressure.y) annotation (Line(points={{-72,-62},
              {-72,42},{-100,42},{-100,90},{-109,90}},
                                                  color={244,125,35},
          thickness=0.5));
      connect(C_LV.externalPressure, ThoracicPressure.y) annotation (Line(points={{-22,2},
              {-22,42},{-100,42},{-100,90},{-109,90}},
                                                color={244,125,35},
          thickness=0.5));
      connect(C_RV.externalPressure, ThoracicPressure.y) annotation (Line(points={{-22,-42},
              {-22,42},{-100,42},{-100,90},{-109,90}},
                                                  color={244,125,35},
          thickness=0.5));
      connect(C_TV.externalPressure, ThoracicPressure.y) annotation (Line(points={{58,-62},
              {58,-40},{-22,-40},{-22,42},{-100,42},{-100,90},{-109,90}},
                                                                     color={244,125,
              35},
          thickness=0.5));
      connect(idealValve2.q_in, R_PV.q_out) annotation (Line(
          points={{-60,30},{-70,30}},
          color={0,0,0},
          thickness=1));
      connect(variable_arterial_resistance.resistance_modifier,arteries1. resistance_modifier)
        annotation (Line(points={{48,8},{48,20},{49.3333,20}},
                     color={0,0,127}));
      connect(switch1.u1,arteries1.HR)        annotation (Line(points={{68,-98},
              {62.6667,-98},{62.6667,20}},color={0,0,127}));
      connect(useClosedLoopHR.y,switch1. u2) annotation (Line(points={{51,-108},
              {60,-108},{60,-106},{68,-106}}, color={255,0,255}));
      connect(arteries1.p,pressure_envelope. p) annotation (Line(points={{62,40},
              {62,54},{-52,54}},                    color={0,0,127}));
      connect(ThoracicPressure.beat, pressure_envelope_data.beat) annotation (
          Line(points={{-109,81},{-82.24,81},{-82.24,82},{-58,82}}, color={255,
              0,255}));
      connect(ThoracicPressure.aortic_pressure, pressure_envelope_data.p)
        annotation (Line(points={{-109,86},{-58,86}}, color={0,0,127}));
      connect(VenousVariableCompliance.compliance, C_SV.compliance)
        annotation (Line(points={{110,-45},{110,-62}}, color={0,0,127}));
      connect(VenousVariableCompliance.zpv, C_SV.zeroPressureVolume)
        annotation (Line(points={{110.545,-36.9},{102,-36.9},{102,-62}}, color=
              {0,0,127}));
      connect(variable_arterial_resistance.phi, arteries1.phi) annotation (Line(
          points={{28.6,8},{22,8},{22,36},{54,36},{54,40},{53,40}},
          color={238,46,47},
          thickness=0.5));
      connect(idealValve.q_out, arteries1.port_a) annotation (Line(
          points={{0,30},{42,30}},
          color={0,0,0},
          thickness=1));
      connect(C_SV.q_in, arteries1.q_out) annotation (Line(
          points={{110,-70},{140,-70},{140,30},{62,30}},
          color={0,0,0},
          thickness=1));
      connect(arteries1.thoracic_pressure, ThoracicPressure.y) annotation (Line(
          points={{42.3333,20},{-22,20},{-22,42},{-100,42},{-100,90},{-109,90}},
          color={244,125,35},
          thickness=0.5));

      connect(switch1.u3, HR.y) annotation (Line(points={{68,-114},{44,-114},{
              44,-113},{18,-113}}, color={0,0,127}));
      connect(switch1.y, beatDrive.HR) annotation (Line(points={{91,-106},{100,
              -106},{100,-126},{-110,-126},{-110,-8},{-100,-8}}, color={0,0,127}));
      connect(arteries1.phi, VenousVariableCompliance.phi) annotation (Line(
          points={{53,40},{54,40},{54,36},{130,36},{130,-45}},
          color={238,46,47},
          thickness=0.5));
      connect(beatDrive.beat, pressure_envelope.beat) annotation (Line(points={
              {-80,2},{-80,60},{-52,60},{-52,58}}, color={255,0,255}));
      connect(complianceDriver1.phi, arteries1.phi) annotation (Line(
          points={{-60,-42},{-52,-42},{-52,-14},{22,-14},{22,36},{54,36},{54,40},
              {53,40}},
          color={238,46,47},
          thickness=0.5));
      connect(complianceDriver.phi, arteries1.phi) annotation (Line(
          points={{-60,-14},{22,-14},{22,36},{54,36},{54,40},{53,40}},
          color={238,46,47},
          thickness=0.5));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false, extent={{-100,-100},
                {120,100}})), Diagram(coordinateSystem(preserveAspectRatio=false,
              extent={{-100,-100},{120,100}})));
    end advancedDVS;

    model simplestVSNonlin
      BeatDrive beatDrive
        annotation (Placement(transformation(extent={{-100,-36},{-80,-16}})));
      Physiolibrary.Types.Constants.FrequencyConst HR(k=1)
        annotation (Placement(transformation(extent={{-124,-32},{-108,-18}})));
      ComplianceDriver complianceDriver(ep=1, alphaF=1)
        annotation (Placement(transformation(extent={{-60,-16},{-40,4}})));
      Physiolibrary.Hydraulic.Components.Resistor R_TA(Resistance(displayUnit="(mmHg.s)/ml")=
             3199737.29796)
        annotation (Placement(transformation(extent={{40,20},{60,40}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_TA(
        volume_start=7e-06,
        Compliance=5.2504310309196e-10,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{10,20},{30,40}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve(_Gon(displayUnit=
             "ml/(mmHg.s)") = 7.5006157584566e-06)
        annotation (Placement(transformation(extent={{-20,20},{0,40}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_SA(volume_start=0.0001,
          Compliance=7.6506280736257e-09)
        annotation (Placement(transformation(extent={{70,20},{90,40}})));
      replaceable Components.Basic.ElasticVessel_nonLinear C_SV(
        volume_start=0.002,
        Compliance=4.5003694550739e-7,
        Vmax=0.004) constrainedby
          Physiolibrary.SteadyStates.Interfaces.SteadyState
        annotation (Placement(transformation(extent={{100,-80},{120,-60}})));
      Physiolibrary.Hydraulic.Components.Resistor R_SA(Resistance(displayUnit="(mmHg.s)/ml")=
             76793695.15104) annotation (Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=0,
            origin={110,30})));
      Physiolibrary.Hydraulic.Components.Resistor R_SV(Resistance(displayUnit="(mmHg.s)/ml")=
             78393563.80002) annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={80,-70})));
      Components.Basic.ElasticVessel_nonLinear C_TV(
        volume_start=7.5e-5,
        Compliance=9.0007389101479e-10,
        useExternalPressureInput=true,
        Vmax=0.0001)
        annotation (Placement(transformation(extent={{40,-80},{60,-60}})));
      Physiolibrary.Hydraulic.Components.Resistor R_TV(Resistance(displayUnit="(mmHg.s)/ml")=
             1599868.64898) annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={20,-70})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve1
        annotation (Placement(transformation(extent={{0,-80},{-20,-60}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_LV(
        volume_start=0.0001,
        useComplianceInput=true,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-40,20},{-20,0}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_RV(
        volume_start=0.0001,
        useComplianceInput=true,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-40,-60},{-20,-40}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve2
        annotation (Placement(transformation(extent={{-60,20},{-40,40}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve3(_Gon(
            displayUnit="ml/(mmHg.s)") = 7.5006157584566e-06)
        annotation (Placement(transformation(extent={{-40,-80},{-60,-60}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_PA(
        volume_start=0.0001,
        Compliance=4.1628417459434e-08,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-90,-80},{-70,-60}})));
      replaceable Components.Basic.ElasticVessel_nonLinear C_PV(
        volume_start=0.0001,
        Compliance(displayUnit="ml/mmHg") = 7.5006157584566e-7,
        useExternalPressureInput=true,
        Vmax=0.00015) constrainedby
          Physiolibrary.SteadyStates.Interfaces.SteadyState
                                                          annotation (Placement(
            transformation(extent={{-118,20},{-98,40}})),
          __Dymola_choicesAllMatching=true);
      Physiolibrary.Hydraulic.Components.Resistor R_PA(Resistance(displayUnit="(mmHg.s)/ml")=
             27197767.03266) annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={-110,-70})));
      Physiolibrary.Hydraulic.Components.Resistor R_PV(Resistance(displayUnit="(mmHg.s)/ml")=
             1599868.64898) annotation (Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=0,
            origin={-80,30})));
      ComplianceDriver complianceDriver1(ep=0.3, alphaF=1)
        annotation (Placement(transformation(extent={{-60,-44},{-40,-24}})));
      replaceable Components.Signals.DataFit.ThoracicPressureFromData
        ThoracicPressure(readData(ExperimentNr=2)) constrainedby
          Physiolibrary.Types.Constants.PressureConst
                                                    annotation (Placement(
            transformation(extent={{-132,62},{-116,76}})),
          __Dymola_choicesAllMatching=true);
    equation
      connect(beatDrive.HR, HR.y) annotation (Line(points={{-100,-26},{-108,-26},{-108,
              -25},{-106,-25}}, color={0,0,127}));
      connect(beatDrive.beatTime, complianceDriver.beatTime) annotation (Line(
            points={{-80,-16},{-70,-16},{-70,-6},{-60,-6}}, color={0,0,127}));
      connect(idealValve.q_out, C_TA.q_in) annotation (Line(
          points={{0,30},{20,30}},
          color={0,0,0},
          thickness=1));
      connect(C_TA.q_in, R_TA.q_in) annotation (Line(
          points={{20,30},{40,30}},
          color={0,0,0},
          thickness=1));
      connect(R_TA.q_out, C_SA.q_in) annotation (Line(
          points={{60,30},{80,30}},
          color={0,0,0},
          thickness=1));
      connect(C_SA.q_in, R_SA.q_in) annotation (Line(
          points={{80,30},{100,30}},
          color={0,0,0},
          thickness=1));
      connect(C_SV.q_in, R_SA.q_out) annotation (Line(
          points={{110,-70},{140,-70},{140,30},{120,30}},
          color={0,0,0},
          thickness=1));
      connect(C_SV.q_in, R_SV.q_in) annotation (Line(
          points={{110,-70},{90,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_TV.q_in, R_TV.q_in) annotation (Line(
          points={{50,-70},{30,-70}},
          color={0,0,0},
          thickness=1));
      connect(R_SV.q_out, C_TV.q_in) annotation (Line(
          points={{70,-70},{50,-70}},
          color={0,0,0},
          thickness=1));
      connect(R_TV.q_out, idealValve1.q_in) annotation (Line(
          points={{10,-70},{0,-70}},
          color={0,0,0},
          thickness=1));
      connect(idealValve.q_in, C_LV.q_in) annotation (Line(
          points={{-20,30},{-26,30},{-26,10},{-30,10}},
          color={0,0,0},
          thickness=1));
      connect(idealValve1.q_out, C_RV.q_in) annotation (Line(
          points={{-20,-70},{-30,-70},{-30,-50}},
          color={0,0,0},
          thickness=1));
      connect(idealValve.q_in, idealValve2.q_out) annotation (Line(
          points={{-20,30},{-40,30}},
          color={0,0,0},
          thickness=1));
      connect(idealValve1.q_out, idealValve3.q_in) annotation (Line(
          points={{-20,-70},{-40,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PA.q_in, R_PA.q_in) annotation (Line(
          points={{-80,-70},{-100,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PV.q_in, R_PA.q_out) annotation (Line(
          points={{-108,30},{-128,30},{-128,-70},{-120,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PA.q_in, idealValve3.q_out) annotation (Line(
          points={{-80,-70},{-60,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PV.q_in, R_PV.q_in) annotation (Line(
          points={{-108,30},{-90,30}},
          color={0,0,0},
          thickness=1));
      connect(complianceDriver.compliance, C_LV.compliance)
        annotation (Line(points={{-40,-6},{-30,-6},{-30,2}}, color={0,0,127}));
      connect(beatDrive.beatTime, complianceDriver1.beatTime) annotation (Line(
            points={{-80,-16},{-70,-16},{-70,-34},{-60,-34}}, color={0,0,127}));
      connect(complianceDriver1.compliance, C_RV.compliance) annotation (Line(
            points={{-40,-34},{-30,-34},{-30,-42}}, color={0,0,127}));
      connect(C_PV.externalPressure, ThoracicPressure.y)
        annotation (Line(points={{-100,38},{-100,69},{-115.2,69}},
                                                       color={244,125,35}));
      connect(C_TA.externalPressure, ThoracicPressure.y) annotation (Line(points={{28,38},
              {28,42},{-115.2,42},{-115.2,69}}, color={244,125,35}));
      connect(C_PA.externalPressure, ThoracicPressure.y) annotation (Line(points={{-72,-62},
              {-72,42},{-115.2,42},{-115.2,69}},  color={244,125,35}));
      connect(C_LV.externalPressure, ThoracicPressure.y) annotation (Line(
            points={{-22,2},{-22,42},{-115.2,42},{-115.2,69}},
                                                           color={244,125,35}));
      connect(C_RV.externalPressure, ThoracicPressure.y) annotation (Line(
            points={{-22,-42},{-22,42},{-115.2,42},{-115.2,69}},
                                                             color={244,125,35}));
      connect(C_TV.externalPressure, ThoracicPressure.y) annotation (Line(points={{58,-62},
              {58,-40},{-22,-40},{-22,42},{-115.2,42},{-115.2,69}},  color={244,125,
              35}));
      connect(idealValve2.q_in, R_PV.q_out) annotation (Line(
          points={{-60,30},{-70,30}},
          color={0,0,0},
          thickness=1));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false, extent={{-100,-100},
                {120,100}})), Diagram(coordinateSystem(preserveAspectRatio=false,
              extent={{-100,-100},{120,100}})));
    end simplestVSNonlin;

    model simplestVS_control
      BeatDrive beatDrive
        annotation (Placement(transformation(extent={{-100,-36},{-80,-16}})));
      Physiolibrary.Types.Constants.FrequencyConst HR(k=1)
        annotation (Placement(transformation(extent={{-152,-20},{-138,-8}})));
      ComplianceDriver complianceDriver(ep=1, alphaF=1)
        annotation (Placement(transformation(extent={{-60,-16},{-40,4}})));
      Physiolibrary.Hydraulic.Components.Resistor R_TA(Resistance(displayUnit="(mmHg.s)/ml")=
             3199737.29796)
        annotation (Placement(transformation(extent={{40,20},{60,40}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_TA(
        volume_start=7e-06,
        Compliance=5.2504310309196e-10,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{10,20},{30,40}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve(_Gon(displayUnit=
             "ml/(mmHg.s)") = 7.5006157584566e-06)
        annotation (Placement(transformation(extent={{-20,20},{0,40}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_SA(
        useComplianceInput=true,
        Compliance(displayUnit="m3/Pa") = 7.6506280736257e-9,
        useV0Input=true,
        volume_start=0.0004,
        ZeroPressureVolume=0.0003)
        annotation (Placement(transformation(extent={{70,20},{90,40}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve1
        annotation (Placement(transformation(extent={{0,-80},{-20,-60}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_LV(
        volume_start=0.0001,
        useComplianceInput=true,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-40,20},{-20,0}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_RV(
        volume_start=0.0001,
        useComplianceInput=true,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-40,-60},{-20,-40}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve2
        annotation (Placement(transformation(extent={{-60,20},{-40,40}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve3(_Gon(
            displayUnit="ml/(mmHg.s)") = 7.5006157584566e-06)
        annotation (Placement(transformation(extent={{-40,-80},{-60,-60}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_PA(
        volume_start=0.0001,
        Compliance=4.1628417459434e-08,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-90,-80},{-70,-60}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_PV(
        useExternalPressureInput=true,
        useComplianceInput=true,
        Compliance(displayUnit="ml/mmHg") = 7.5006157584566e-7,
        volume_start=0.0004,
        useV0Input=true,
        ZeroPressureVolume=0.0003)
        annotation (Placement(transformation(extent={{-118,20},{-98,40}})));
      Physiolibrary.Hydraulic.Components.Resistor R_PA(useConductanceInput=true,
          Resistance(displayUnit="(Pa.s)/m3") = 27197767.03266)
                             annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={-110,-70})));
      Physiolibrary.Hydraulic.Components.Resistor R_PV(Resistance(displayUnit="(mmHg.s)/ml")=
             1599868.64898) annotation (Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=0,
            origin={-80,30})));
      ComplianceDriver complianceDriver1(ep=0.3, alphaF=1)
        annotation (Placement(transformation(extent={{-60,-44},{-40,-24}})));
      Modelica.Blocks.Sources.Trapezoid           ThoracicPressure(
        amplitude=-36*133,
        rising=1,
        width=20,
        falling=1,
        period=100,
        nperiod=1,
        startTime=140)
        annotation (Placement(transformation(extent={{-150,38},{-134,52}})),
          __Dymola_choicesAllMatching=true);
      Components.Signals.Volume2Distention volume2Distention(v0=0.0004, l(
            displayUnit="cm"))
        annotation (Placement(transformation(extent={{100,40},{120,60}})));
      Components.Subsystems.Baroreflex.Baroreflex baroreflex(resetAt=0, f1=
            0.0077)
        annotation (Placement(transformation(extent={{160,40},{180,60}})));
      Components.Subsystems.Baroreflex.Baroreceptor baroreceptor(
        tau_s=3.0,
        delta0=0.28,
        epsilon_start=1.0,
        s_start=0.92)
        annotation (Placement(transformation(extent={{128,40},{148,60}})));
      replaceable
      Physiolibrary.Hydraulic.Components.ElasticVessel C_SV(
        useV0Input=true,
        useComplianceInput=true,
        Compliance(displayUnit="ml/mmHg") = 4.5003694550739e-7,
        volume_start=0.0033,
        ZeroPressureVolume=0.0003)       constrainedby
          Physiolibrary.Hydraulic.Components.ElasticVessel
        annotation (Placement(transformation(extent={{118,-80},{138,-60}})));
      Physiolibrary.Hydraulic.Components.Resistor R_SA(useConductanceInput=true,
          Resistance(displayUnit="(Pa.s)/m3") = 76793695.15104)
                             annotation (Placement(transformation(
            extent={{-10,10},{10,-10}},
            rotation=0,
            origin={110,30})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_TV(
        volume_start=7.5e-05,
        Compliance=9.0007389101479e-10,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{40,-80},{60,-60}})));
      Physiolibrary.Hydraulic.Components.Resistor R_TV(Resistance(displayUnit="(mmHg.s)/ml")=
             1599868.64898) annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={20,-70})));
      Physiolibrary.Hydraulic.Components.Resistor R_SV(useConductanceInput=true,
          Resistance(displayUnit="(Pa.s)/m3") = 78393563.80002)
                             annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={80,-70})));
      Physiolibrary.Types.Constants.HydraulicComplianceConst C_SA_C0(k(displayUnit="ml/mmHg")=
             7.6506280736257e-9)
        annotation (Placement(transformation(extent={{34,74},{48,86}})));
      Physiolibrary.Types.Constants.VolumeConst C_SA_V0(k(displayUnit="ml") = 0.0003)
        annotation (Placement(transformation(extent={{34,54},{48,66}})));
      Physiolibrary.Types.Constants.HydraulicConductanceConst R_SA_G0(k(displayUnit=
             "ml/(mmHg.min)") = 1.3021902358432e-8)
        annotation (Placement(transformation(extent={{62,-6},{76,6}})));
      inner Physiolibrary.Types.Fraction phi_norm=baroreflex.phi/0.25;
      Components.Signals.PhiEffect phiEffect
        annotation (Placement(transformation(extent={{88,-6},{100,6}})));
      Components.Signals.PhiEffect phiEffect1
        annotation (Placement(transformation(extent={{56,54},{68,66}})));
      Components.Signals.PhiEffect phiEffect2(factor=0.0)
        annotation (Placement(transformation(extent={{56,74},{68,86}})));
      Physiolibrary.Types.Constants.HydraulicConductanceConst R_SV_G(k(displayUnit="ml/(mmHg.s)")=
             1.2756149249076e-8)
        annotation (Placement(transformation(extent={{40,-26},{54,-14}})));
      Components.Signals.PhiEffect phiEffect3
        annotation (Placement(transformation(extent={{64,-26},{76,-14}})));
      Physiolibrary.Types.Constants.HydraulicComplianceConst C_SV_C0(k(displayUnit="ml/mmHg")=
             4.5003694550739e-7)
        annotation (Placement(transformation(extent={{86,-32},{100,-20}})));
      Physiolibrary.Types.Constants.VolumeConst C_SV_V0(k(displayUnit="ml") = 0.0003)
        annotation (Placement(transformation(extent={{86,-52},{100,-40}})));
      Components.Signals.PhiEffect phiEffect4
        annotation (Placement(transformation(extent={{108,-52},{120,-40}})));
      Components.Signals.PhiEffect phiEffect5
        annotation (Placement(transformation(extent={{108,-32},{120,-20}})));
      Physiolibrary.Types.Constants.HydraulicComplianceConst C_PV_C0(k(displayUnit="ml/mmHg")=
             7.5006157584566e-7)
        annotation (Placement(transformation(extent={{-154,82},{-140,94}})));
      Physiolibrary.Types.Constants.VolumeConst C_PV_V0(k(displayUnit="ml") = 0.0003)
        annotation (Placement(transformation(extent={{-154,62},{-140,74}})));
      Components.Signals.PhiEffect phiEffect6
        annotation (Placement(transformation(extent={{-132,62},{-120,74}})));
      Components.Signals.PhiEffect phiEffect7
        annotation (Placement(transformation(extent={{-132,82},{-120,94}})));
      Physiolibrary.Types.Constants.HydraulicConductanceConst R_PV_G0(k(displayUnit=
             "ml/(mmHg.s)") = 3.676772430616e-8)
        annotation (Placement(transformation(extent={{-148,-58},{-134,-46}})));
      Components.Signals.PhiEffect phiEffect8
        annotation (Placement(transformation(extent={{-124,-58},{-112,-46}})));
      Modelica.Blocks.Logical.Switch switch1
        annotation (Placement(transformation(extent={{-122,-32},{-110,-20}})));
      Modelica.Blocks.Sources.BooleanConstant useConstantHR_bool
        annotation (Placement(transformation(extent={{-174,-32},{-162,-20}})));
    equation
      connect(beatDrive.beatTime, complianceDriver.beatTime) annotation (Line(
            points={{-80,-16},{-70,-16},{-70,-6},{-60,-6}}, color={0,0,127}));
      connect(idealValve.q_out, C_TA.q_in) annotation (Line(
          points={{0,30},{20,30}},
          color={0,0,0},
          thickness=1));
      connect(C_TA.q_in, R_TA.q_in) annotation (Line(
          points={{20,30},{40,30}},
          color={0,0,0},
          thickness=1));
      connect(R_TA.q_out, C_SA.q_in) annotation (Line(
          points={{60,30},{80,30}},
          color={0,0,0},
          thickness=1));
      connect(idealValve.q_in, C_LV.q_in) annotation (Line(
          points={{-20,30},{-26,30},{-26,10},{-30,10}},
          color={0,0,0},
          thickness=1));
      connect(idealValve1.q_out, C_RV.q_in) annotation (Line(
          points={{-20,-70},{-30,-70},{-30,-50}},
          color={0,0,0},
          thickness=1));
      connect(idealValve.q_in, idealValve2.q_out) annotation (Line(
          points={{-20,30},{-40,30}},
          color={0,0,0},
          thickness=1));
      connect(idealValve1.q_out, idealValve3.q_in) annotation (Line(
          points={{-20,-70},{-40,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PA.q_in, R_PA.q_in) annotation (Line(
          points={{-80,-70},{-100,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PV.q_in, R_PA.q_out) annotation (Line(
          points={{-108,30},{-128,30},{-128,-70},{-120,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PA.q_in, idealValve3.q_out) annotation (Line(
          points={{-80,-70},{-60,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PV.q_in, R_PV.q_in) annotation (Line(
          points={{-108,30},{-90,30}},
          color={0,0,0},
          thickness=1));
      connect(complianceDriver.compliance, C_LV.compliance)
        annotation (Line(points={{-40,-6},{-30,-6},{-30,2}}, color={0,0,127}));
      connect(beatDrive.beatTime, complianceDriver1.beatTime) annotation (Line(
            points={{-80,-16},{-70,-16},{-70,-34},{-60,-34}}, color={0,0,127}));
      connect(complianceDriver1.compliance, C_RV.compliance) annotation (Line(
            points={{-40,-34},{-30,-34},{-30,-42}}, color={0,0,127}));
      connect(C_TA.externalPressure, ThoracicPressure.y) annotation (Line(points={{28,38},
              {28,42},{-133.2,42},{-133.2,45}}, color={244,125,35}));
      connect(C_PA.externalPressure, ThoracicPressure.y) annotation (Line(points={{-72,-62},
              {-72,42},{-133.2,42},{-133.2,45}},  color={244,125,35}));
      connect(C_LV.externalPressure, ThoracicPressure.y) annotation (Line(
            points={{-22,2},{-22,42},{-133.2,42},{-133.2,45}},
                                                           color={244,125,35}));
      connect(C_RV.externalPressure, ThoracicPressure.y) annotation (Line(
            points={{-22,-42},{-22,42},{-133.2,42},{-133.2,45}},
                                                             color={244,125,35}));
      connect(idealValve2.q_in, R_PV.q_out) annotation (Line(
          points={{-60,30},{-70,30}},
          color={0,0,0},
          thickness=1));
      connect(C_SA.volume, volume2Distention.volume) annotation (Line(points={{86,20},
              {96,20},{96,50},{100,50}}, color={0,0,127}));
      connect(volume2Distention.dr, baroreceptor.d)
        annotation (Line(points={{120,50},{128,50}}, color={0,0,127}));
      connect(baroreceptor.fbr, baroreflex.aortic_BR) annotation (Line(points={{148,
              50},{154,50},{154,60},{160,60}}, color={0,0,127}));
      connect(baroreceptor.fbr, baroreflex.carotid_BR) annotation (Line(points={{148,
              50},{154,50},{154,40},{160,40}}, color={0,0,127}));
      connect(C_PV.externalPressure, ThoracicPressure.y) annotation (Line(points={{-100,
              38},{-100,42},{-133.2,42},{-133.2,45}}, color={244,125,35}));
      connect(C_SV.q_in,R_SA. q_out) annotation (Line(
          points={{128,-70},{140,-70},{140,30},{120,30}},
          color={0,0,0},
          thickness=1));
      connect(C_SV.q_in,R_SV. q_in) annotation (Line(
          points={{128,-70},{90,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_TV.q_in,R_TV. q_in) annotation (Line(
          points={{50,-70},{30,-70}},
          color={0,0,0},
          thickness=1));
      connect(R_SV.q_out,C_TV. q_in) annotation (Line(
          points={{70,-70},{50,-70}},
          color={0,0,0},
          thickness=1));
      connect(R_TV.q_out, idealValve1.q_in) annotation (Line(
          points={{10,-70},{0,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_TV.externalPressure, ThoracicPressure.y) annotation (Line(points={{58,-62},
              {58,-40},{-22,-40},{-22,42},{-133.2,42},{-133.2,45}},  color={244,125,
              35}));
      connect(C_SA.q_in, R_SA.q_in) annotation (Line(
          points={{80,30},{100,30}},
          color={0,0,0},
          thickness=1));
      connect(R_SA_G0.y, phiEffect.u)
        annotation (Line(points={{77.75,0},{88,0}}, color={0,0,127}));
      connect(phiEffect.y, R_SA.cond)
        annotation (Line(points={{100.12,0},{110,0},{110,24}}, color={0,0,127}));
      connect(C_SA_V0.y, phiEffect1.u)
        annotation (Line(points={{49.75,60},{56,60}}, color={0,0,127}));
      connect(phiEffect1.y, C_SA.zeroPressureVolume)
        annotation (Line(points={{68.12,60},{72,60},{72,38}}, color={0,0,127}));
      connect(C_SA_C0.y, phiEffect2.u)
        annotation (Line(points={{49.75,80},{56,80}}, color={0,0,127}));
      connect(phiEffect2.y, C_SA.compliance)
        annotation (Line(points={{68.12,80},{80,80},{80,38}}, color={0,0,127}));
      connect(R_SV.cond, phiEffect3.y)
        annotation (Line(points={{80,-64},{80,-20},{76.12,-20}}, color={0,0,127}));
      connect(phiEffect3.u, R_SV_G.y)
        annotation (Line(points={{64,-20},{55.75,-20}}, color={0,0,127}));
      connect(C_SV_V0.y, phiEffect4.u)
        annotation (Line(points={{101.75,-46},{108,-46}}, color={0,0,127}));
      connect(C_SV_C0.y, phiEffect5.u)
        annotation (Line(points={{101.75,-26},{108,-26}}, color={0,0,127}));
      connect(C_SV.zeroPressureVolume, phiEffect4.y) annotation (Line(points={{120,-62},
              {120,-54},{120,-46},{120.12,-46}}, color={0,0,127}));
      connect(phiEffect5.y, C_SV.compliance) annotation (Line(points={{120.12,-26},{
              128,-26},{128,-62}}, color={0,0,127}));
      connect(C_PV_V0.y, phiEffect6.u)
        annotation (Line(points={{-138.25,68},{-132,68}}, color={0,0,127}));
      connect(C_PV_C0.y, phiEffect7.u)
        annotation (Line(points={{-138.25,88},{-132,88}}, color={0,0,127}));
      connect(phiEffect6.y, C_PV.zeroPressureVolume) annotation (Line(points={{-119.88,
              68},{-116,68},{-116,38}}, color={0,0,127}));
      connect(phiEffect7.y, C_PV.compliance) annotation (Line(points={{-119.88,88},{
              -108,88},{-108,38}}, color={0,0,127}));
      connect(phiEffect8.u, R_PV_G0.y)
        annotation (Line(points={{-124,-52},{-132.25,-52}}, color={0,0,127}));
      connect(phiEffect8.y, R_PA.cond) annotation (Line(points={{-111.88,-52},{-110,
              -52},{-110,-64}}, color={0,0,127}));
      connect(switch1.y, beatDrive.HR)
        annotation (Line(points={{-109.4,-26},{-100,-26}}, color={0,0,127}));
      connect(HR.y, switch1.u1) annotation (Line(points={{-136.25,-14},{-124,
              -14},{-124,-21.2},{-123.2,-21.2}}, color={0,0,127}));
      connect(switch1.u2, useConstantHR_bool.y) annotation (Line(points={{
              -123.2,-26},{-161.4,-26}}, color={255,0,255}));
      connect(baroreflex.HR, switch1.u3) annotation (Line(points={{180,40.2},{
              180,-98},{-152,-98},{-152,-30.8},{-123.2,-30.8}}, color={0,0,127}));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false, extent={{-100,-100},
                {120,100}})), Diagram(coordinateSystem(preserveAspectRatio=false,
              extent={{-100,-100},{120,100}})),
        experiment(
          StopTime=180,
          Interval=0.01,
          __Dymola_Algorithm="Dassl"));
    end simplestVS_control;

    model simplestVS_cerebral "This model demonstrates, that cerebral autoregulation would not have important effect on valsalva maneuver"
      extends simplestVS(redeclare Modelica.Blocks.Sources.Trapezoid
          ThoracicPressure(
          amplitude=5320,
          rising=1,
          width=20,
          falling=1,
          period=200,
          nperiod=1,
          offset=0,
          startTime=140));
      Physiolibrary.Hydraulic.Components.Pump pump(SolutionFlow(displayUnit=
              "ml/min") = 0)
                          annotation (Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=270,
            origin={60,-18})));
    equation
      connect(pump.q_in, R_TA.q_out) annotation (Line(
          points={{60,-8},{60,30}},
          color={0,0,0},
          thickness=1));
      connect(pump.q_out, R_SV.q_out) annotation (Line(
          points={{60,-28},{60,-70},{70,-70}},
          color={0,0,0},
          thickness=1));
    end simplestVS_cerebral;

    model simplestVS_control_Important
      extends simplestVS_control(
        phiEffect3(factor=0),
        phiEffect(factor=-1),
        phiEffect5(factor=-1),
        phiEffect4(factor=-1),
        useConstantHR_bool(k=false),
        ThoracicPressure(amplitude=-36.5*133));
      Components.Signals.pressure_envelope pressure_envelope
        annotation (Placement(transformation(extent={{-50,60},{-26,84}})));
      Physiolibrary.Hydraulic.Sensors.PressureMeasure pressureMeasure
        annotation (Placement(transformation(extent={{-2,66},{18,86}})));
    equation
      connect(C_TA.q_in, pressureMeasure.q_in) annotation (Line(
          points={{20,30},{12,30},{12,70},{4,70}},
          color={0,0,0},
          thickness=1));
      connect(pressureMeasure.pressure, pressure_envelope.p) annotation (Line(
            points={{14,72},{-18,72},{-18,66},{-50,66}}, color={0,0,127}));
      connect(pressure_envelope.beat, beatDrive.beat) annotation (Line(points={{-50,
              78},{-50,20.25},{-80,20.25},{-80,-36}}, color={255,0,255}));
      annotation (Icon(graphics={Rectangle(extent={{-76,82},{72,-68}},
                lineColor={28,108,200}), Rectangle(extent={{-18,16},{38,-46}},
                lineColor={28,108,200})}));
    end simplestVS_control_Important;

    model simplestVS_data_identification
      BeatDrive beatDrive
        annotation (Placement(transformation(extent={{-100,-36},{-80,-16}})));
      Physiolibrary.Types.Constants.FrequencyConst HR(k=1)
        annotation (Placement(transformation(extent={{-152,-20},{-138,-8}})));
      ComplianceDriver complianceDriver(ep=1, alphaF=1)
        annotation (Placement(transformation(extent={{-60,-16},{-40,4}})));
      Physiolibrary.Hydraulic.Components.Resistor R_TA(Resistance(displayUnit="(mmHg.s)/ml")=
             3199737.29796)
        annotation (Placement(transformation(extent={{40,20},{60,40}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_TA(
        volume_start=7e-06,
        Compliance=5.2504310309196e-10,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{10,20},{30,40}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve(_Gon(displayUnit=
             "ml/(mmHg.s)") = 7.5006157584566e-06)
        annotation (Placement(transformation(extent={{-20,20},{0,40}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_SA(
        useComplianceInput=true,
        Compliance(displayUnit="m3/Pa") = 7.6506280736257e-9,
        useV0Input=true,
        volume_start=0.0004,
        ZeroPressureVolume=0.0003)
        annotation (Placement(transformation(extent={{70,20},{90,40}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve1
        annotation (Placement(transformation(extent={{0,-80},{-20,-60}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_LV(
        volume_start=0.0001,
        useComplianceInput=true,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-40,20},{-20,0}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_RV(
        volume_start=0.0001,
        useComplianceInput=true,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-40,-60},{-20,-40}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve2
        annotation (Placement(transformation(extent={{-60,20},{-40,40}})));
      Physiolibrary.Hydraulic.Components.IdealValve idealValve3(_Gon(
            displayUnit="ml/(mmHg.s)") = 7.5006157584566e-06)
        annotation (Placement(transformation(extent={{-40,-80},{-60,-60}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_PA(
        volume_start=0.0001,
        Compliance=4.1628417459434e-08,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-90,-80},{-70,-60}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_PV(
        useExternalPressureInput=true,
        useComplianceInput=false,
        Compliance(displayUnit="ml/mmHg") = 7.5006157584566e-07,
        volume_start=0.0004,
        useV0Input=false,
        ZeroPressureVolume=0.0003)
        annotation (Placement(transformation(extent={{-118,20},{-98,40}})));
      Physiolibrary.Hydraulic.Components.Resistor R_PA(useConductanceInput=
            false,
          Resistance(displayUnit="(Pa.s)/m3") = 27197767.03266)
                             annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={-110,-70})));
      Physiolibrary.Hydraulic.Components.Resistor R_PV(Resistance(displayUnit="(mmHg.s)/ml")=
             1599868.64898) annotation (Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=0,
            origin={-80,30})));
      ComplianceDriver complianceDriver1(ep=0.3, alphaF=1)
        annotation (Placement(transformation(extent={{-60,-44},{-40,-24}})));
      Components.Signals.DataFit.ThoracicPressureFromData ThoracicPressure(
          readData(ExperimentNr=2)) annotation (Placement(transformation(extent=
               {{-164,34},{-148,48}})), __Dymola_choicesAllMatching=true);
      Components.Signals.Volume2Distention volume2Distention(v0=0.0004, l(
            displayUnit="cm"))
        annotation (Placement(transformation(extent={{100,40},{120,60}})));
      Components.Subsystems.Baroreflex.Baroreflex baroreflex(resetAt=0, f1=
            0.0077)
        annotation (Placement(transformation(extent={{160,40},{180,60}})));
      Components.Subsystems.Baroreflex.Baroreceptor baroreceptor(
        tau_s=3.0,
        delta0=0.28,
        epsilon_start=1.0,
        s_start=0.92)
        annotation (Placement(transformation(extent={{128,40},{148,60}})));
      replaceable
      Physiolibrary.Hydraulic.Components.ElasticVessel C_SV(
        useV0Input=true,
        useComplianceInput=true,
        Compliance(displayUnit="ml/mmHg") = 4.5003694550739e-7,
        volume_start=0.0033,
        ZeroPressureVolume=0.0003)       constrainedby
          Physiolibrary.Hydraulic.Components.ElasticVessel
        annotation (Placement(transformation(extent={{118,-80},{138,-60}})));
      Physiolibrary.Hydraulic.Components.Resistor R_SA(useConductanceInput=true,
          Resistance(displayUnit="(Pa.s)/m3") = 76793695.15104)
                             annotation (Placement(transformation(
            extent={{-10,10},{10,-10}},
            rotation=0,
            origin={110,30})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_TV(
        volume_start=7.5e-05,
        Compliance=9.0007389101479e-10,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{40,-80},{60,-60}})));
      Physiolibrary.Hydraulic.Components.Resistor R_TV(Resistance(displayUnit="(mmHg.s)/ml")=
             1599868.64898) annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={20,-70})));
      Physiolibrary.Hydraulic.Components.Resistor R_SV(useConductanceInput=true,
          Resistance(displayUnit="(Pa.s)/m3") = 78393563.80002)
                             annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={80,-70})));
      Physiolibrary.Types.Constants.HydraulicComplianceConst C_SA_C0(k(displayUnit="ml/mmHg")=
             7.6506280736257e-9)
        annotation (Placement(transformation(extent={{34,74},{48,86}})));
      Physiolibrary.Types.Constants.VolumeConst C_SA_V0(k(displayUnit="ml") = 0.0003)
        annotation (Placement(transformation(extent={{34,54},{48,66}})));
      Physiolibrary.Types.Constants.HydraulicConductanceConst R_SA_G0(k(displayUnit=
             "ml/(mmHg.min)") = 1.3021902358432e-8)
        annotation (Placement(transformation(extent={{62,-6},{76,6}})));
      inner Physiolibrary.Types.Fraction phi_norm=baroreflex.phi/0.25;
      Components.Signals.PhiEffect phiEffect(factor=-1)
        annotation (Placement(transformation(extent={{88,-6},{100,6}})));
      Components.Signals.PhiEffect phiEffect1
        annotation (Placement(transformation(extent={{56,54},{68,66}})));
      Components.Signals.PhiEffect phiEffect2(factor=0.0)
        annotation (Placement(transformation(extent={{56,74},{68,86}})));
      Physiolibrary.Types.Constants.HydraulicConductanceConst R_SV_G(k(displayUnit="ml/(mmHg.s)")=
             1.2756149249076e-8)
        annotation (Placement(transformation(extent={{40,-26},{54,-14}})));
      Components.Signals.PhiEffect phiEffect3
        annotation (Placement(transformation(extent={{64,-26},{76,-14}})));
      Physiolibrary.Types.Constants.HydraulicComplianceConst C_SV_C0(k(displayUnit="ml/mmHg")=
             4.5003694550739e-7)
        annotation (Placement(transformation(extent={{86,-32},{100,-20}})));
      Physiolibrary.Types.Constants.VolumeConst C_SV_V0(k(displayUnit="ml") = 0.0003)
        annotation (Placement(transformation(extent={{86,-52},{100,-40}})));
      Components.Signals.PhiEffect phiEffect4(factor=-1)
        annotation (Placement(transformation(extent={{108,-52},{120,-40}})));
      Components.Signals.PhiEffect phiEffect5(factor=-1)
        annotation (Placement(transformation(extent={{108,-32},{120,-20}})));
      Modelica.Blocks.Logical.Switch switch1
        annotation (Placement(transformation(extent={{-122,-32},{-110,-20}})));
      Modelica.Blocks.Sources.BooleanConstant useConstantHR_bool(k=false)
        annotation (Placement(transformation(extent={{-174,-32},{-162,-20}})));
      Physiolibrary.Hydraulic.Sensors.PressureMeasure pressureMeasure
        annotation (Placement(transformation(extent={{8,-20},{28,0}})));
      Components.Signals.pressure_envelope pressure_envelope_data(T(displayUnit=
             "s"))
        annotation (Placement(transformation(extent={{-142,26},{-134,18}})));
      Components.Signals.pressure_envelope pressure_envelope_model(T(
            displayUnit="s"))
        annotation (Placement(transformation(extent={{28,-30},{36,-38}})));
    equation
      connect(beatDrive.beatTime, complianceDriver.beatTime) annotation (Line(
            points={{-80,-16},{-70,-16},{-70,-6},{-60,-6}}, color={0,0,127}));
      connect(idealValve.q_out, C_TA.q_in) annotation (Line(
          points={{0,30},{20,30}},
          color={0,0,0},
          thickness=1));
      connect(C_TA.q_in, R_TA.q_in) annotation (Line(
          points={{20,30},{40,30}},
          color={0,0,0},
          thickness=1));
      connect(R_TA.q_out, C_SA.q_in) annotation (Line(
          points={{60,30},{80,30}},
          color={0,0,0},
          thickness=1));
      connect(idealValve.q_in, C_LV.q_in) annotation (Line(
          points={{-20,30},{-26,30},{-26,10},{-30,10}},
          color={0,0,0},
          thickness=1));
      connect(idealValve1.q_out, C_RV.q_in) annotation (Line(
          points={{-20,-70},{-30,-70},{-30,-50}},
          color={0,0,0},
          thickness=1));
      connect(idealValve.q_in, idealValve2.q_out) annotation (Line(
          points={{-20,30},{-40,30}},
          color={0,0,0},
          thickness=1));
      connect(idealValve1.q_out, idealValve3.q_in) annotation (Line(
          points={{-20,-70},{-40,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PA.q_in, R_PA.q_in) annotation (Line(
          points={{-80,-70},{-100,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PV.q_in, R_PA.q_out) annotation (Line(
          points={{-108,30},{-128,30},{-128,-70},{-120,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PA.q_in, idealValve3.q_out) annotation (Line(
          points={{-80,-70},{-60,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PV.q_in, R_PV.q_in) annotation (Line(
          points={{-108,30},{-90,30}},
          color={0,0,0},
          thickness=1));
      connect(complianceDriver.compliance, C_LV.compliance)
        annotation (Line(points={{-40,-6},{-30,-6},{-30,2}}, color={0,0,127}));
      connect(beatDrive.beatTime, complianceDriver1.beatTime) annotation (Line(
            points={{-80,-16},{-70,-16},{-70,-34},{-60,-34}}, color={0,0,127}));
      connect(complianceDriver1.compliance, C_RV.compliance) annotation (Line(
            points={{-40,-34},{-30,-34},{-30,-42}}, color={0,0,127}));
      connect(C_TA.externalPressure, ThoracicPressure.y) annotation (Line(points={{28,38},
              {28,42},{-147.2,42},{-147.2,41}}, color={244,125,35}));
      connect(C_PA.externalPressure, ThoracicPressure.y) annotation (Line(points={{-72,-62},
              {-72,42},{-147.2,42},{-147.2,41}},  color={244,125,35}));
      connect(C_LV.externalPressure, ThoracicPressure.y) annotation (Line(
            points={{-22,2},{-22,42},{-147.2,42},{-147.2,41}},
                                                           color={244,125,35}));
      connect(C_RV.externalPressure, ThoracicPressure.y) annotation (Line(
            points={{-22,-42},{-22,42},{-147.2,42},{-147.2,41}},
                                                             color={244,125,35}));
      connect(idealValve2.q_in, R_PV.q_out) annotation (Line(
          points={{-60,30},{-70,30}},
          color={0,0,0},
          thickness=1));
      connect(C_SA.volume, volume2Distention.volume) annotation (Line(points={{86,20},
              {96,20},{96,50},{100,50}}, color={0,0,127}));
      connect(volume2Distention.dr, baroreceptor.d)
        annotation (Line(points={{120,50},{128,50}}, color={0,0,127}));
      connect(baroreceptor.fbr, baroreflex.aortic_BR) annotation (Line(points={{148,
              50},{154,50},{154,60},{160,60}}, color={0,0,127}));
      connect(baroreceptor.fbr, baroreflex.carotid_BR) annotation (Line(points={{148,
              50},{154,50},{154,40},{160,40}}, color={0,0,127}));
      connect(C_PV.externalPressure, ThoracicPressure.y) annotation (Line(points={{-100,38},
              {-100,42},{-147.2,42},{-147.2,41}},     color={244,125,35}));
      connect(C_SV.q_in,R_SA. q_out) annotation (Line(
          points={{128,-70},{140,-70},{140,30},{120,30}},
          color={0,0,0},
          thickness=1));
      connect(C_SV.q_in,R_SV. q_in) annotation (Line(
          points={{128,-70},{90,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_TV.q_in,R_TV. q_in) annotation (Line(
          points={{50,-70},{30,-70}},
          color={0,0,0},
          thickness=1));
      connect(R_SV.q_out,C_TV. q_in) annotation (Line(
          points={{70,-70},{50,-70}},
          color={0,0,0},
          thickness=1));
      connect(R_TV.q_out, idealValve1.q_in) annotation (Line(
          points={{10,-70},{0,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_TV.externalPressure, ThoracicPressure.y) annotation (Line(points={{58,-62},
              {58,-40},{-22,-40},{-22,42},{-147.2,42},{-147.2,41}},  color={244,125,
              35}));
      connect(C_SA.q_in, R_SA.q_in) annotation (Line(
          points={{80,30},{100,30}},
          color={0,0,0},
          thickness=1));
      connect(R_SA_G0.y, phiEffect.u)
        annotation (Line(points={{77.75,0},{88,0}}, color={0,0,127}));
      connect(phiEffect.y, R_SA.cond)
        annotation (Line(points={{100.12,0},{110,0},{110,24}}, color={0,0,127}));
      connect(C_SA_V0.y, phiEffect1.u)
        annotation (Line(points={{49.75,60},{56,60}}, color={0,0,127}));
      connect(phiEffect1.y, C_SA.zeroPressureVolume)
        annotation (Line(points={{68.12,60},{72,60},{72,38}}, color={0,0,127}));
      connect(C_SA_C0.y, phiEffect2.u)
        annotation (Line(points={{49.75,80},{56,80}}, color={0,0,127}));
      connect(phiEffect2.y, C_SA.compliance)
        annotation (Line(points={{68.12,80},{80,80},{80,38}}, color={0,0,127}));
      connect(R_SV.cond, phiEffect3.y)
        annotation (Line(points={{80,-64},{80,-20},{76.12,-20}}, color={0,0,127}));
      connect(phiEffect3.u, R_SV_G.y)
        annotation (Line(points={{64,-20},{55.75,-20}}, color={0,0,127}));
      connect(C_SV_V0.y, phiEffect4.u)
        annotation (Line(points={{101.75,-46},{108,-46}}, color={0,0,127}));
      connect(C_SV_C0.y, phiEffect5.u)
        annotation (Line(points={{101.75,-26},{108,-26}}, color={0,0,127}));
      connect(C_SV.zeroPressureVolume, phiEffect4.y) annotation (Line(points={{120,-62},
              {120,-54},{120,-46},{120.12,-46}}, color={0,0,127}));
      connect(phiEffect5.y, C_SV.compliance) annotation (Line(points={{120.12,-26},{
              128,-26},{128,-62}}, color={0,0,127}));
      connect(switch1.y, beatDrive.HR)
        annotation (Line(points={{-109.4,-26},{-100,-26}}, color={0,0,127}));
      connect(HR.y, switch1.u1) annotation (Line(points={{-136.25,-14},{-124,
              -14},{-124,-21.2},{-123.2,-21.2}}, color={0,0,127}));
      connect(switch1.u2, useConstantHR_bool.y) annotation (Line(points={{-123.2,
              -26},{-161.4,-26}},        color={255,0,255}));
      connect(baroreflex.HR, switch1.u3) annotation (Line(points={{180,40.2},{
              180,-98},{-152,-98},{-152,-30.8},{-123.2,-30.8}}, color={0,0,127}));
      connect(C_TA.q_in, pressureMeasure.q_in) annotation (Line(
          points={{20,30},{20,-16},{14,-16}},
          color={0,0,0},
          thickness=1));
      connect(ThoracicPressure.aortic_pressure, pressure_envelope_data.p)
        annotation (Line(points={{-147.2,38.2},{-147.2,39.1},{-142,39.1},{-142,
              24}}, color={0,0,127}));
      connect(ThoracicPressure.beat, pressure_envelope_data.beat) annotation (
          Line(points={{-147.2,34.7},{-147.2,20},{-142,20}}, color={255,0,255}));
      connect(beatDrive.beat, pressure_envelope_model.beat)
        annotation (Line(points={{-80,-36},{28,-36}}, color={255,0,255}));
      connect(pressureMeasure.pressure, pressure_envelope_model.p) annotation (
          Line(points={{24,-14},{26,-14},{26,-32},{28,-32}}, color={0,0,127}));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false, extent={{-100,-100},
                {120,100}})), Diagram(coordinateSystem(preserveAspectRatio=false,
              extent={{-100,-100},{120,100}})),
        experiment(
          StopTime=80,
          Interval=0.01,
          __Dymola_Algorithm="Cvode"));
    end simplestVS_data_identification;

    package Experiments
      model baroreflex_fit
        extends ArterialTree.ADAN_venous(arteries_ADAN86(
            aortic_arch_C46(baroreceptor(epsilon_start=0.76, s_start=0.91)),
            internal_carotid_R8_A(baroreceptor(epsilon_start=0.4, s_start=0.95)),
            baroreflex(phi(start=0.4))));

      end baroreflex_fit;

      model HR_sensitivity
        extends ArterialTree.ADAN_venous(redeclare Modelica.Blocks.Sources.Ramp
            heart_frequency(
            duration=0,
            offset=1,
            startTime=30), arteries_ADAN86(
            aortic_arch_C46(baroreceptor(epsilon_start=0.76, s_start=0.91)),
            internal_carotid_R8_A(baroreceptor(epsilon_start=0.4, s_start=0.95)),
            baroreflex(phi(start=0.4))));

      end HR_sensitivity;

      model SmithHeart
        extends ArterialTree.ADAN_venous_thoracic( redeclare
            Components.Subsystems.Heart.Heart_Smith heart);
      end SmithHeart;

      model venous_thoracic_baroreflex
        extends ArterialTree.ADAN_venous_thoracic(
                                     arteries_ADAN86(
            aortic_arch_C46(baroreceptor(s_start=0.91,
                epsilon_start=0.74)),
            internal_carotid_R8_A(baroreceptor(s_start=0.95,
                epsilon_start=0.394)),
            baroreflex(fiSN_start=0.38)));
        annotation (experiment(
            StopTime=85,
            Interval=0.02,
            Tolerance=1e-07,
            __Dymola_Algorithm="Cvode"), __Dymola_experimentFlags(
            Advanced(GenerateVariableDependencies=false, OutputModelicaCode=false),
            Evaluate=false,
            OutputCPUtime=true,
            OutputFlatModelica=false));

      end venous_thoracic_baroreflex;

      model HemodynamicsSmith_shallow_HR
        import Physiolibrary.Hydraulic.Components.*;
        Physiolibrary.Types.Volume total_volume=arteries1.arteries_ADAN86.total_volume +
            venaCava.volume + ventricularInteraction_flat.Vlv +
            ventricularInteraction_flat.Vrv + pulmonaryArteries.volume +
            pulmonaryVeins.volume;

        ElasticVesselElastance venaCava(
          ZeroPressureVolume=0,
          volume_start=0.000252,
          Elastance(displayUnit="mmHg/ml") = 786602.0857485)
          annotation (Placement(transformation(extent={{-130,24},{-110,44}})));
        IdealValveResistance aorticValve(Pknee=0, _Ron(displayUnit=
                "(mmHg.s)/ml") = 2399802.97347)
          annotation (Placement(transformation(extent={{-68,-30},{-88,-10}})));
        IdealValveResistance tricuspidValve(Pknee=0, _Ron(displayUnit=
                "(mmHg.s)/ml") = 3159740.5817355)
          annotation (Placement(transformation(extent={{-62,24},{-42,44}})));
        Inertia Lav(I(displayUnit="mmHg.s2/ml") = 16250.665802014,
            volumeFlow_start(displayUnit="m3/s") = -1.4e-8) annotation (
            Placement(transformation(
              extent={{-10,-10},{10,10}},
              rotation=180,
              origin={-44,-20})));
        Inertia Lpv(I(displayUnit="mmHg.s2/ml") = 19822.372560862,
            volumeFlow_start(displayUnit="m3/s") = -1.9e-9)
          annotation (Placement(transformation(extent={{32,24},{52,44}})));
        IdealValveResistance pulmonaryValve(Pknee=0, _Ron(displayUnit=
                "(mmHg.s)/ml") = 733273.1307825)
          annotation (Placement(transformation(extent={{62,24},{82,44}})));
          ElasticVesselElastance pulmonaryArteries(
          ZeroPressureVolume=0,
          useExternalPressureInput=true,
          volume_start=3.904e-05,
          Elastance(displayUnit="Pa/m3") = 49195960.956135)
          annotation (Placement(transformation(extent={{102,24},{122,44}})));
        Resistor Rpul(Resistance(displayUnit="(mmHg.s)/ml") = 20691634.526808)
          annotation (Placement(transformation(
              extent={{-10,-10},{10,10}},
              rotation=270,
              origin={114,4})));
      ElasticVesselElastance pulmonaryVeins(
          ZeroPressureVolume=0,
          useExternalPressureInput=true,
          volume_start=0.0008269,
          Elastance(displayUnit="Pa/m3") = 973253.4281295)
          annotation (Placement(transformation(extent={{104,-30},{124,-10}})));
        IdealValveResistance mitralValve(Pknee=0, _Ron(displayUnit=
                "(mmHg.s)/ml") = 2106493.721157)
          annotation (Placement(transformation(extent={{52,-30},{32,-10}})));
        Inertia Ltc(I(displayUnit="mmHg.s2/ml") = 10678.18997523,
            volumeFlow_start(displayUnit="m3/s") = 0.0001372)
          annotation (Placement(transformation(extent={{-88,24},{-68,44}})));
        Inertia Lmt(I(displayUnit="mmHg.s2/ml") = 10261.557514558,
            volumeFlow_start(displayUnit="m3/s") = 0.0001141) annotation (
            Placement(transformation(
              extent={{-10,-10},{10,10}},
              rotation=180,
              origin={70,-20})));
        Modelica.Blocks.Sources.Step                 HR(
          height=1,
          offset=1,
          startTime=30)
          annotation (Placement(transformation(extent={{-114,-76},{-98,-62}})));
        replaceable
        Modelica.Blocks.Sources.Constant            IntraThoracicPressure(k=-533.28954966)
          constrainedby Modelica.Blocks.Interfaces.SO
          annotation (Placement(transformation(extent={{38,8},{50,20}})),
            __Dymola_choicesAllMatching=true);
        Components.Subsystems.Heart.Auxiliary.Smith_VentricularInteraction_flat
          ventricularInteraction_flat(
          lambdalv=33000,
          lambdaperi=30000,
          lambdas(displayUnit="1/m3") = 435000,
          lambdarv(displayUnit="1/m3") = 23000,
          Essept0(displayUnit="mmHg/ml") = 6499999676.0309,
          V0peri=0.0002,
          Pi0sept=148.00118226939,
          Pi0rv=28.757638965416,
          Pi0lv=16.038683206025,
          Pi0peri=66.701190423724,
          Esrv0=77993596.637775,
          Eslv0=383941811.27772)
          annotation (Placement(transformation(extent={{-18,-12},{20,28}})));
        Modelica.Blocks.Logical.Switch switch1
          annotation (Placement(transformation(extent={{-46,-70},{-26,-50}})));
        Modelica.Blocks.Sources.BooleanExpression useClosedLoopHR
          annotation (Placement(transformation(extent={{-86,-72},{-66,-52}})));
        ArterialTree.SmithExtended.arteries arteries1 annotation (Placement(
              transformation(rotation=0, extent={{-106,-30},{-126,-10}})));
        Components.Basic.variable_arterial_resistance
          variable_arterial_resistance(useVariableResistance=false, alphaR=5)
          annotation (Placement(transformation(extent={{-90,-52},{-110,-32}})));
        Components.Signals.pressure_envelope pressure_envelope
          annotation (Placement(transformation(extent={{-150,-10},{-158,-2}})));
      equation
        connect(arteries1.q_out,
                            venaCava.q_in) annotation (Line(
            points={{-126,-20},{-134,-20},{-134,34},{-120,34}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(pulmonaryValve.q_out, pulmonaryArteries.q_in) annotation (Line(
            points={{82,34},{112,34}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(pulmonaryArteries.q_in, Rpul.q_in) annotation (Line(
            points={{112,34},{114,34},{114,14}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Rpul.q_out, pulmonaryVeins.q_in) annotation (Line(
            points={{114,-6},{114,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(venaCava.q_in, Ltc.q_in) annotation (Line(
            points={{-120,34},{-88,34}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(pulmonaryVeins.q_in, Lmt.q_in) annotation (Line(
            points={{114,-20},{80,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Lav.q_out, aorticValve.q_in) annotation (Line(
            points={{-54,-20},{-68,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Ltc.q_out, tricuspidValve.q_in) annotation (Line(
            points={{-68,34},{-62,34}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Lpv.q_out, pulmonaryValve.q_in) annotation (Line(
            points={{52,34},{62,34}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(mitralValve.q_in, Lmt.q_out) annotation (Line(
            points={{52,-20},{60,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(tricuspidValve.q_out, ventricularInteraction_flat.rvflow)
          annotation (Line(
            points={{-42,34},{0.62,34},{0.62,28}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Lpv.q_in, ventricularInteraction_flat.rvflow) annotation (Line(
            points={{32,34},{0.62,34},{0.62,28}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(ventricularInteraction_flat.lvflow, Lav.q_in) annotation (Line(
            points={{1,-12},{2,-12},{2,-20},{-34,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(mitralValve.q_out, Lav.q_in) annotation (Line(
            points={{32,-20},{-34,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(IntraThoracicPressure.y, ventricularInteraction_flat.Pth)
          annotation (Line(
            points={{50.6,14},{58,14},{58,8},{16.58,8}},
            color={0,190,190},
            smooth=Smooth.None));
        connect(pulmonaryArteries.externalPressure, IntraThoracicPressure.y)
          annotation (Line(
            points={{120,42},{120,46},{86,46},{86,14},{50.6,14}},
            color={0,190,190},
            smooth=Smooth.None));
        connect(pulmonaryVeins.externalPressure, IntraThoracicPressure.y)
          annotation (Line(
            points={{122,-12},{122,14},{50.6,14}},
            color={0,190,190},
            smooth=Smooth.None));
        connect(aorticValve.q_out,arteries1.port_a)        annotation (Line(
            points={{-88,-20},{-106,-20}},
            color={0,0,0},
            thickness=1));
        connect(arteries1.thoracic_pressure,       ventricularInteraction_flat.Pth)
          annotation (Line(points={{-106.333,-30},{30,-30},{30,8},{16.58,8}},
                                                                          color={
                0,0,127}));
        connect(switch1.y, ventricularInteraction_flat.HR) annotation (Line(
              points={{-25,-60},{-18,-60},{-18,8},{-14.2,8}}, color={0,0,127}));
        connect(switch1.u3, HR.y) annotation (Line(points={{-48,-68},{-64,-68},{
                -64,-69},{-97.2,-69}},
                                     color={0,0,127}));
        connect(switch1.u1,arteries1.HR)        annotation (Line(points={{-48,-52},
                {-126.667,-52},{-126.667,-30}},
                                            color={0,0,127}));
        connect(useClosedLoopHR.y, switch1.u2) annotation (Line(points={{-65,-62},
                {-56,-62},{-56,-60},{-48,-60}}, color={255,0,255}));
        connect(arteries1.phi,       ventricularInteraction_flat.phi) annotation (
           Line(points={{-117,-10},{-100,-10},{-100,24},{-14.2,24}},
              color={0,0,127}));
        connect(arteries1.phi,variable_arterial_resistance. phi) annotation (
            Line(points={{-117,-10},{-100,-10},{-100,-36},{-88,-36},{-88,-42},{-90.6,-42}},
                                                                           color={0,0,
                127}));
        connect(variable_arterial_resistance.resistance_modifier, arteries1.resistance_modifier)
          annotation (Line(points={{-110,-42},{-114,-42},{-114,-34},{-113.333,
                -34},{-113.333,-30}},
                       color={0,0,127}));
        connect(ventricularInteraction_flat.beat, pressure_envelope.beat)
          annotation (Line(points={{-14.2,-4},{-150,-4}}, color={255,0,255}));
        connect(arteries1.p, pressure_envelope.p) annotation (Line(points={{-126,
                -10},{-138,-10},{-138,-8},{-150,-8}}, color={0,0,127}));
        annotation (
          Diagram(coordinateSystem(preserveAspectRatio=false, extent={{-160,-100},
                  {160,100}})),
          Icon(coordinateSystem(extent={{-160,-100},{160,100}})),
          Documentation(info="<html>
<p>Cardiovascular model implemented per description of Smith et al.</p>
<p>[12] B. W. Smith, J. G. Chase, R. I. Nokes, G. M. Shaw, G. Wake, Minimal Haemodynamic System Model Including Ventricular Interaction and Valve Dynamics., Medical Engineering &AMP; Physics 26 (2) (2004) 131&ndash;139. doi:10.1016/j.medengphy.2003.10.001.</p>
<p>[13] CellML implementation at URL:  http://models.cellml.org/exposure/9d046663ba5cac5c8a61ac146183614b/smith_chase_nokes_shaw_wake_2004.cellml/view</p>
</html>"),experiment(StopTime=50, __Dymola_NumberOfIntervals=1500));
      end HemodynamicsSmith_shallow_HR;

      model test_baro
        import Physiolibrary.Hydraulic.Components.*;
        import ADAN_main;
      //   Physiolibrary.Types.Volume total_volume=arteries_ADAN86.total_volume +
      //       venaCava.volume + ventricularInteraction_flat.Vlv +
      //       ventricularInteraction_flat.Vrv + pulmonaryArteries.volume +
      //       pulmonaryVeins.volume;

        inner Modelica.Units.SI.Angle Tilt=0;

        inner Physiolibrary.Types.Pressure thoracic_pressure = 0;

        ElasticVesselElastance venaCava(
          ZeroPressureVolume=0,
          volume_start=0.003,
          Elastance(displayUnit="mmHg/ml") = 2133158.19864)
          annotation (Placement(transformation(extent={{-130,24},{-110,44}})));
        IdealValveResistance aorticValve(Pknee=0, _Ron(displayUnit=
                "(mmHg.s)/ml") = 2399802.97347)
          annotation (Placement(transformation(extent={{-68,-30},{-88,-10}})));
        Resistor Rsys(Resistance(displayUnit="(mmHg.min)/l")=159987000.0)
          annotation (Placement(transformation(
              extent={{-10,-10},{10,10}},
              rotation=90,
              origin={-120,8})));
        IdealValveResistance tricuspidValve(Pknee=0, _Ron(displayUnit=
                "(mmHg.s)/ml") = 3159740.5817355)
          annotation (Placement(transformation(extent={{-62,24},{-42,44}})));
        Inertia Lav(I(displayUnit="mmHg.s2/ml") = 16250.665802014,
            volumeFlow_start(displayUnit="m3/s") = -1.4e-8) annotation (
            Placement(transformation(
              extent={{-10,-10},{10,10}},
              rotation=180,
              origin={-44,-20})));
        Inertia Lpv(I(displayUnit="mmHg.s2/ml") = 19822.372560862,
            volumeFlow_start(displayUnit="m3/s") = -1.9e-9)
          annotation (Placement(transformation(extent={{32,24},{52,44}})));
        IdealValveResistance mitralValve(Pknee=0, _Ron(displayUnit=
                "(mmHg.s)/ml") = 2106493.721157)
          annotation (Placement(transformation(extent={{52,-30},{32,-10}})));
        Physiolibrary.Types.Constants.FrequencyConst HR(k=1.2)
          annotation (Placement(transformation(extent={{-114,-76},{-98,-62}})));
        replaceable
        Modelica.Blocks.Sources.Trapezoid           IntraThoracicPressure(
          amplitude=0.0,
          width=15,
          period=100,
          offset=0.0,
          startTime=0)
          constrainedby Modelica.Blocks.Interfaces.SO
          annotation (Placement(transformation(extent={{38,12},{50,20}})),
            __Dymola_choicesAllMatching=true);
        ADAN_main.Components.Subsystems.Heart.Auxiliary.Smith_VentricularInteraction_flat
          ventricularInteraction_flat(
          lambdalv=33000,
          lambdaperi=30000,
          lambdas(displayUnit="1/m3") = 435000,
          lambdarv(displayUnit="1/m3") = 23000,
          Essept0(displayUnit="mmHg/ml") = 6499999676.0309,
          V0peri=0.0002,
          Pi0sept=148.00118226939,
          Pi0rv=28.757638965416,
          Pi0lv=16.038683206025,
          Pi0peri=66.701190423724,
          Esrv0=77993596.637775,
          Eslv0=383941811.27772)
          annotation (Placement(transformation(extent={{-18,-12},{20,28}})));
        Physiolibrary.Hydraulic.Components.ElasticVesselElastance arteries(
          ZeroPressureVolume=0,
          volume_start=0.0001,
          Elastance(displayUnit="mmHg/ml")=533290000.0)
          annotation (Placement(transformation(extent={{-138,-30},{-118,-10}})));
        Physiolibrary.Types.Constants.FractionConst  HR1(k(displayUnit="1")=
            0.25)
          annotation (Placement(transformation(extent={{-40,16},{-24,30}})));
        ADAN_main.Components.Obsolete.pv_type_thoracic aortic_arch_C46(
          UseDistentionOutput=true,
          l=Parameters_Systemic1.l_aortic_arch_C46,
          E=Parameters_Systemic1.E_aortic_arch_C46,
          r=Parameters_Systemic1.r_aortic_arch_C46)
          annotation (Placement(transformation(extent={{-95,-23},{-115,-18}})));
        ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Artery
          internal_carotid_R8_A(
          UseDistentionOutput=true,
          l=Parameters_Systemic1.l_internal_carotid_R8_A,
          E=Parameters_Systemic1.E_internal_carotid_R8_A*1.5,
          r=Parameters_Systemic1.r_internal_carotid_R8_A*1.5)
          annotation (Placement(transformation(extent={{-148,-5},{-128,0}})));
        ADAN_main.Components.Subsystems.Systemic.ADAN86ArterialTree.Parameters_cellml.Parameters_Systemic
          Parameters_Systemic1
          annotation (Placement(transformation(extent={{-158,-99},{-138,-94}})));
        Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(P=2666.4477483)
          annotation (Placement(transformation(extent={{108,20},{88,40}})));
        Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(P(
              displayUnit="mmHg")=2666.45)
          annotation (Placement(transformation(extent={{110,-30},{90,-10}})));
        ADAN_main.Components.Subsystems.Baroreflex.Baroreflex baroreflex(resetAt=
              0, fsn=0.042)
          annotation (Placement(transformation(extent={{-70,84},{-50,64}})));
        ADAN_main.Components.Subsystems.Baroreflex.Baroreceptor
          baroreceptor_aortic(
          tau_s(displayUnit="s") = 3,
          epsilon_start=0.76,
          s_start=0.91)
          annotation (Placement(transformation(extent={{-100,52},{-80,72}})));
        ADAN_main.Components.Subsystems.Baroreflex.Baroreceptor
          baroreceptor_carotid(
          tau_s(displayUnit="s") = 3,
          epsilon_start=0.4,
          s_start=0.95)
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
        Physiolibrary.Types.RealIO.FrequencyOutput HR2
                                                      annotation (Placement(
              transformation(extent={{-40,74},{-20,94}}), iconTransformation(extent={{54,166},
                  {74,186}})));
        Physiolibrary.Types.RealIO.FractionOutput  phi_baroreflex
                                                      annotation (Placement(
              transformation(extent={{-40,62},{-20,82}}), iconTransformation(extent={{-24,164},
                  {-4,184}})));
      equation
        connect(Rsys.q_out, venaCava.q_in) annotation (Line(
            points={{-120,18},{-120,34}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Lav.q_out, aorticValve.q_in) annotation (Line(
            points={{-54,-20},{-68,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(tricuspidValve.q_out, ventricularInteraction_flat.rvflow)
          annotation (Line(
            points={{-42,34},{0.62,34},{0.62,28}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Lpv.q_in, ventricularInteraction_flat.rvflow) annotation (Line(
            points={{32,34},{0.62,34},{0.62,28}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(ventricularInteraction_flat.lvflow, Lav.q_in) annotation (Line(
            points={{1,-12},{2,-12},{2,-20},{-34,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(mitralValve.q_out, Lav.q_in) annotation (Line(
            points={{32,-20},{-34,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(IntraThoracicPressure.y, ventricularInteraction_flat.Pth)
          annotation (Line(
            points={{50.6,16},{58,16},{58,8},{16.58,8}},
            color={0,190,190},
            smooth=Smooth.None));
        connect(HR1.y, ventricularInteraction_flat.phi) annotation (Line(points={{-22,
                23},{-20,23},{-20,24},{-14.2,24}}, color={0,0,127}));
        connect(HR.y, ventricularInteraction_flat.HR) annotation (Line(points={{-96,-69},
                {-62,-69},{-62,-68},{-26,-68},{-26,8},{-14.2,8}}, color={0,0,127}));
        connect(aorticValve.q_out, aortic_arch_C46.port_a) annotation (Line(
            points={{-88,-20},{-91.5,-20},{-91.5,-20.5},{-95,-20.5}},
            color={0,0,0},
            thickness=1));
        connect(aortic_arch_C46.port_b, arteries.q_in) annotation (Line(
            points={{-115,-20.5},{-135.5,-20.5},{-135.5,-20},{-128,-20}},
            color={0,0,0},
            thickness=1));
        connect(Rsys.q_in, internal_carotid_R8_A.port_b) annotation (Line(
            points={{-120,-2},{-120,-2.5},{-128,-2.5}},
            color={0,0,0},
            thickness=1));
        connect(internal_carotid_R8_A.port_a, arteries.q_in) annotation (Line(
            points={{-148,-2.5},{-150,-2.5},{-150,-2},{-154,-2},{-154,-20},{-128,
                -20}},
            color={0,0,0},
            thickness=1));
        connect(unlimitedVolume1.y, mitralValve.q_in) annotation (Line(
            points={{90,-20},{52,-20}},
            color={0,0,0},
            thickness=1));
        connect(unlimitedVolume.y, Lpv.q_out) annotation (Line(
            points={{88,30},{70,30},{70,34},{52,34}},
            color={0,0,0},
            thickness=1));
        connect(baroreflex.HR, HR2)
          annotation (Line(points={{-50,83.8},{-50,84},{-30,84}}, color={0,0,127}));
        connect(baroreflex.phi, phi_baroreflex) annotation (Line(points={{-49.8,
                74},{-38,74},{-38,72},{-30,72}}, color={0,0,127}));
        connect(baroreceptor_carotid.fbr,baroreflex. carotid_BR) annotation (
            Line(points={{-80,90},{-76,90},{-76,84},{-70,84}},         color={0,
                0,127}));
        connect(baroreceptor_aortic.fbr,baroreflex. aortic_BR) annotation (Line(
              points={{-80,62},{-76,62},{-76,64},{-70,64}},         color={0,0,
                127}));
        connect(baroreceptor_aortic.d, aortic_arch_C46.distentionFraction)
          annotation (Line(points={{-100,62},{-106,62},{-106,-15.5},{-105,-15.5}},
                                          color={0,0,127}));
        connect(baroreceptor_carotid.d, internal_carotid_R8_A.distentionFraction)
          annotation (Line(points={{-100,90},{-138,90},{-138,2.5}},
                            color={0,0,127}));
        connect(venaCava.q_in, tricuspidValve.q_in) annotation (Line(
            points={{-120,34},{-62,34}},
            color={0,0,0},
            thickness=1));
        annotation (
          Diagram(coordinateSystem(preserveAspectRatio=false, extent={{-160,-100},
                  {160,100}})),
          Icon(coordinateSystem(extent={{-160,-100},{160,100}})),
          Documentation(info="<html>
<p>Cardiovascular model implemented per description of Smith et al.</p>
<p>[12] B. W. Smith, J. G. Chase, R. I. Nokes, G. M. Shaw, G. Wake, Minimal Haemodynamic System Model Including Ventricular Interaction and Valve Dynamics., Medical Engineering &AMP; Physics 26 (2) (2004) 131&ndash;139. doi:10.1016/j.medengphy.2003.10.001.</p>
<p>[13] CellML implementation at URL:  http://models.cellml.org/exposure/9d046663ba5cac5c8a61ac146183614b/smith_chase_nokes_shaw_wake_2004.cellml/view</p>
</html>"),experiment(
            StopTime=250,
            Interval=0.01,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end test_baro;

      model simplestVS_components_Abdominal_Art
        extends simplestVS_components(C_SA(volume_start(displayUnit="m3")=
              0.0001/2, Compliance(displayUnit="m3/Pa") = 7.6506280736257e-09/2),
            C_TA(volume_start(displayUnit="m3") = 7e-06 + 0.0001/2, Compliance(
                displayUnit="m3/Pa") = 5.2504310309196e-10 +
              7.6506280736257e-09/2));
      end simplestVS_components_Abdominal_Art;

      model simplestVS_components_abd_ven
        extends simplestVS_components(C_SV(volume_start=0.0015, Compliance(
                displayUnit="m3/Pa") = 4.5003694550739e-07/2), C_TV(
              volume_start=7.5e-05, Compliance(displayUnit="m3/Pa")=
              9.0007389101479e-10 + 4.5003694550739e-07/2));
      end simplestVS_components_abd_ven;

      model simplestVS_components_abd_cav
        extends simplestVS_components(C_SA(volume_start(displayUnit="m3") = 0.0001/2,
              Compliance(displayUnit="m3/Pa") = 7.6506280736257e-09/2), C_TA(
              volume_start(displayUnit="m3") = 7e-06 + 0.0001/2, Compliance(
                displayUnit="m3/Pa") = 5.2504310309196e-10 + 7.6506280736257e-09/2),
                C_SV(volume_start=0.0015, Compliance(
                displayUnit="m3/Pa") = 4.5003694550739e-07/2), C_TV(
              volume_start=7.5e-05,
              Compliance(displayUnit="m3/Pa") = 9.0007389101479e-10 + 4.5003694550739e-07
              /2));
      end simplestVS_components_abd_cav;

      model simplestVS_components_TriSeg
        extends simplestVS_components(redeclare
            Components.Subsystems.Heart.Heart_TriSegMechanics_Simple
            heart_SimplestVS(UseThoracic_PressureInput=
                                                      true));
      end simplestVS_components_TriSeg;
    end Experiments;

    model simplestVS_components
      Physiolibrary.Hydraulic.Components.Resistor R_TA(Resistance(displayUnit="(mmHg.s)/ml")=
             3199737.29796)
        annotation (Placement(transformation(extent={{40,20},{60,40}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_SA(volume_start=0.0001,
          Compliance=7.6506280736257e-09)
        annotation (Placement(transformation(extent={{70,20},{90,40}})));
      replaceable
      Physiolibrary.Hydraulic.Components.ElasticVessel C_SV(volume_start=0.003,
          Compliance=4.5003694550739e-7) constrainedby
          Physiolibrary.SteadyStates.Interfaces.SteadyState
        annotation (Placement(transformation(extent={{100,-80},{120,-60}})));
      Physiolibrary.Hydraulic.Components.Resistor R_SA(Resistance(displayUnit="(mmHg.s)/ml")=
             76793695.15104) annotation (Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=0,
            origin={110,30})));
      Physiolibrary.Hydraulic.Components.Resistor R_SV(Resistance(displayUnit="(mmHg.s)/ml")=
             78393563.80002) annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={80,-70})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_TV(
        volume_start=7.5e-05,
        Compliance=9.0007389101479e-10,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{40,-80},{60,-60}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_PA(
        volume_start=0.0001,
        Compliance=4.1628417459434e-08,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-90,-80},{-70,-60}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_PV(
        volume_start=0.0001,
        Compliance(displayUnit="ml/mmHg") = 7.5006157584566e-07,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-118,20},{-98,40}})));
      Physiolibrary.Hydraulic.Components.Resistor R_PA(Resistance(displayUnit="(mmHg.s)/ml")=
             27197767.03266) annotation (Placement(transformation(
            extent={{10,-10},{-10,10}},
            rotation=0,
            origin={-110,-70})));
      replaceable Modelica.Blocks.Sources.Trapezoid           ThoracicPressure(
        amplitude=40*133.32,
        rising=0.1,
        width=20,
        falling=0.1,
        period=100,
        startTime=20)
        constrainedby Modelica.Blocks.Interfaces.SO
        annotation (Placement(transformation(extent={{-140,62},{-124,76}})));
      replaceable Components.Subsystems.Heart.Heart_SimplestVS heart_SimplestVS(
          UseThoracic_PressureInput=true) constrainedby
          Components.Subsystems.Heart.partialHeart
                                                 annotation (Placement(
            transformation(rotation=0, extent={{-30,-8},{-50,-28}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel C_TA(
        volume_start=7e-06,
        Compliance=5.2504310309196e-10,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{-4,20},{16,40}})));
    equation
      connect(R_TA.q_out, C_SA.q_in) annotation (Line(
          points={{60,30},{80,30}},
          color={0,0,0},
          thickness=1));
      connect(C_SA.q_in, R_SA.q_in) annotation (Line(
          points={{80,30},{100,30}},
          color={0,0,0},
          thickness=1));
      connect(C_SV.q_in, R_SA.q_out) annotation (Line(
          points={{110,-70},{140,-70},{140,30},{120,30}},
          color={0,0,0},
          thickness=1));
      connect(C_SV.q_in, R_SV.q_in) annotation (Line(
          points={{110,-70},{90,-70}},
          color={0,0,0},
          thickness=1));
      connect(R_SV.q_out, C_TV.q_in) annotation (Line(
          points={{70,-70},{50,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PA.q_in, R_PA.q_in) annotation (Line(
          points={{-80,-70},{-100,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PV.q_in, R_PA.q_out) annotation (Line(
          points={{-108,30},{-128,30},{-128,-70},{-120,-70}},
          color={0,0,0},
          thickness=1));
      connect(C_PV.externalPressure, ThoracicPressure.y)
        annotation (Line(points={{-100,38},{-100,69},{-123.2,69}},
                                                       color={244,125,35}));
      connect(C_PA.externalPressure, ThoracicPressure.y) annotation (Line(points={{-72,-62},
              {-72,42},{-123.2,42},{-123.2,69}},  color={244,125,35}));
      connect(C_TV.externalPressure, ThoracicPressure.y) annotation (Line(points={{58,-62},
              {58,-40},{-22,-40},{-22,42},{-123.2,42},{-123.2,69}},  color={244,125,
              35}));
      connect(heart_SimplestVS.thoracic_pressure_input, ThoracicPressure.y)
        annotation (Line(points={{-39.0909,-8},{-44,-8},{-44,42},{-123.2,42},{
              -123.2,69}}, color={0,0,127}));
      connect(heart_SimplestVS.pa, C_PA.q_in) annotation (Line(
          points={{-48.1818,-23.6},{-48.1818,-70},{-80,-70}},
          color={0,0,0},
          thickness=1));
      connect(heart_SimplestVS.pv, C_PV.q_in) annotation (Line(
          points={{-48.1818,-14.6},{-78.0909,-14.6},{-78.0909,30},{-108,30}},
          color={0,0,0},
          thickness=1));
      connect(heart_SimplestVS.sa, R_TA.q_in) annotation (Line(
          points={{-30,-14.6},{6,-14.6},{6,30},{40,30}},
          color={0,0,0},
          thickness=1));
      connect(heart_SimplestVS.sv, C_TV.q_in) annotation (Line(
          points={{-30,-23.6},{10,-23.6},{10,-70},{50,-70}},
          color={0,0,0},
          thickness=1));
      connect(heart_SimplestVS.sa, C_TA.q_in) annotation (Line(
          points={{-30,-14.6},{6,-14.6},{6,30}},
          color={0,0,0},
          thickness=1));
      connect(C_TA.externalPressure, ThoracicPressure.y) annotation (Line(
            points={{14,38},{14,42},{-123.2,42},{-123.2,69}}, color={0,0,127}));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false, extent={{-100,-100},
                {120,100}})), Diagram(coordinateSystem(preserveAspectRatio=false,
              extent={{-100,-100},{120,100}})),
        experiment(
          StopTime=60,
          Interval=0.02,
          Tolerance=1e-06,
          __Dymola_Algorithm="Cvode"));
    end simplestVS_components;

    end Valsalva;

    package Exercise
      model partialCVS
        extends Physiolibrary.Icons.CardioVascular;
        replaceable Components.Subsystems.Heart.Heart_TriSegMechanics heartComponent
          annotation (
            choicesAllMatching=true, Placement(transformation(extent={{8,-10},{-12,10}})));
        Components.Subsystems.Pulmonary.PulmonaryTriSeg pulmonaryComponent
          annotation (Placement(transformation(extent={{4,-58},{-16,-38}})));
        replaceable Components.Subsystems.Systemic.Systemic_TriSeg systemicComponent
          annotation (Placement(transformation(extent={{-42,42},{34,72}})));

        output Physiolibrary.Types.Pressure brachial_pressure=systemicComponent.c_ao.q_in.pressure;
      output Physiolibrary.Types.Pressure brachial_pressure_mean(start = 0);
      output Physiolibrary.Types.Pressure brachial_pressure_systolic(start = 0);
      Physiolibrary.Types.Pressure brachial_pressure_systolic_i(start = 0);
      output Physiolibrary.Types.Pressure brachial_pressure_diastolic(start = 0);
      Physiolibrary.Types.Pressure brachial_pressure_diastolic_i(start = 0);

      Real brachial_pressure_int
          "integration of pressure to find the true mean";
        output Physiolibrary.Types.Volume SV "Stroke volume"; // the formulation of SV = CO/heartComponent.sa_node.HR_true; was causing troubles to CO, keeping it pinned to zero all the time! (Dymola 2022)
        Physiolibrary.Types.Volume SV_i(displayUnit = "ml");
        parameter Physiolibrary.Types.Time tau = 1e-3
          "Integration costant for min-max calculations";
          output Physiolibrary.Types.Frequency HR = heartComponent.HR_true;
            output Physiolibrary.Types.VolumeFlowRate CO(displayUnit = "l/min");
            output Physiolibrary.Types.Volume V_LV = heartComponent.V_LV;
            output Physiolibrary.Types.Pressure renal_capillary = 20*133.322 "Fake value, just for ident";
        output Physiolibrary.Types.Pressure P_pa=pulmonaryComponent.c_pa.q_in.pressure;
        output Physiolibrary.Types.Pressure P_pv=pulmonaryComponent.c_pv.q_in.pressure;
            output Physiolibrary.Types.Pressure P_sv = heartComponent.sv.pressure;

        inner Components.Settings settings(
          initByPressure=false,
          veins_delayed_activation=false,
          baro_tau_s(displayUnit="s") = 93,
          heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 4.600005e+03,
          heart_vntr_D_0_maxAct=1.225000e-03,
          heart_vntr_TS_maxAct(displayUnit="s") = 1.047740e-01,
          heart_vntr_TR_maxAct(displayUnit="s") = 7.597690e-02,
          eta_vc=2.101054e-01,
          tissues_eta_Ra=3.145225e+00,
          tissues_eta_Rv=2.806250e+00,
          tissues_eta_C=5.708013e-01,
          tissues_chi_Ra(displayUnit="1") = 2.481250e+01,
          tissues_chi_Rv=1.384375e+01,
          tissues_chi_C=-3.125000e-02,
          V_PV_init=0,
          heart_R_LA(displayUnit="(mmHg.s)/ml") = 1.655068e+06,
          heart_R_vlv(displayUnit="(mmHg.s)/ml") = 7.723515e+05,
          heart_vntr_D_0=7.479470e+00,
          heart_vntr_D_A=1.298533e+03,
          heart_vntr_TS=3.246875e-01,
          heart_vntr_TR(displayUnit="s") = 4.031250e-01,
          heart_atr_D_0=2.651364e+07,
          heart_atr_D_A=7.621357e+07,
          syst_TPR=1.287333e+08,
          syst_TR_frac(displayUnit="1") = 5.227710e+00,
          pulm_C_PA=1.635189e-08,
          pulm_R(displayUnit="(Pa.s)/m3") = 1.019753e+07,
          heart_vntr_k_passive=5.000000e+00,
          heart_vntr_SLcollagen=2.087500e+00,
          heart_vntr_PConcollagen=2.642812e+01,
          heart_vntr_PExpcollagen=2.481250e+00,
          heart_atr_TS=0.08,
          baro_f1=3.5e-03,
          dummy=2,
          baro_fsn(displayUnit="1/min") = 0.0355333333,
          syst_art_k_E=0.4402957,
          HR_max=3.1666666666667,
          chi_phi=0.7,
          heart_R_RA(displayUnit="(dyn.s)/cm5") = settings.heart_R_LA,
          pulm_q_nom_maxq(displayUnit="l/min") = 0.00033333333333333,
          veins_UseNonLinearVeins=true,
          veins_linearE_rel=765,
          veins_linearV0_rel=0.793,
          veins_activation_tau=1,
          heart_vntr_Tact_maxAct=8.000000e-02,
          heart_vntr_Lsref=1.9,
          heart_atr_TR=2.631250e-01,
          heart_vntr_Tact=8.000000e-02,
          syst_tissues_hydrostaticLevel_correction=1,
          tissues_SV_nom=0.000695,
          pulm_C_PV=3.194206e-07,
          syst_abd_P_th_ratio=0.8,
          heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
          heart_vntr_L0=1.6,
          pulm_P_PV_nom=1333.22387415,
          height=1.7132,
          tissues_CO_nom=0.000105,
          EvaluateFunctionalParams=true,
          HR_nominal=1.0666666666667,
          UseNonLinear_TissuesCompliance=true,
          baro_g=0.606258,
          baro_useAbsolutePressureTerm=false,
          baro_xi_delta0=2.688000e-01,
          pulm_R_exp=9.150000e-01,
          syst_art_UseVasoconstrictionEffect=true,
          tissues_UseStraighteningReaction2Phi=true,
          tissues_ZPV_nom=0.00210124,
          tissues_gamma=0.5,
          tissues_tau_R(displayUnit="s") = 0,
          veins_C_phi=0.09)
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
        output Physiolibrary.Types.Volume volume_total=systemicComponent.volume +
            pulmonaryComponent.volume + heartComponent.volume;
            Real t0_last(start = -1);
      equation
        der(SV_i) = -heartComponent.sa.q;
        der(brachial_pressure_systolic_i)*tau = max(brachial_pressure  - brachial_pressure_systolic_i, 0);
        der(brachial_pressure_diastolic_i)*tau = min(brachial_pressure  - brachial_pressure_diastolic_i, 0);
        der(brachial_pressure_int) = brachial_pressure;

        when heartComponent.beat then
          SV = SV_i;
          reinit(SV_i, 0);
          CO = SV*HR;
        end when;

          when heartComponent.beat then
            t0_last = time;
          brachial_pressure_mean = brachial_pressure_int/(pre(t0_last) - time);
          reinit(brachial_pressure_int, 0);
          brachial_pressure_systolic = (brachial_pressure_systolic_i);
          brachial_pressure_diastolic = (brachial_pressure_diastolic_i);
          reinit(brachial_pressure_systolic_i, brachial_pressure_mean);
          reinit(brachial_pressure_diastolic_i,brachial_pressure_mean);
          end when;

        connect(heartComponent.sa, systemicComponent.port_a) annotation (Line(
            points={{-12,10},{-54,10},{-54,52},{-42,52}},
            color={0,0,0},
            thickness=1));
        connect(heartComponent.pv, pulmonaryComponent.port_b) annotation (Line(
            points={{-12,-10},{-28,-10},{-28,-48},{-16,-48}},
            color={0,0,0},
            thickness=1));
        connect(heartComponent.pa, pulmonaryComponent.port_a) annotation (Line(
            points={{8,-10},{20,-10},{20,-48},{4,-48}},
            color={0,0,0},
            thickness=1));
        connect(systemicComponent.port_b, heartComponent.sv) annotation (Line(
            points={{34,52},{46,52},{46,10},{8,10}},
            color={0,0,0},
            thickness=1));
        annotation (Icon(coordinateSystem(preserveAspectRatio=false), graphics={
                Text(
                extent={{-100,-100},{100,100}},
                textColor={0,0,0},
                textString="S")}),                                     Diagram(
              coordinateSystem(preserveAspectRatio=false)));
      end partialCVS;

      model SimpleExercise
        extends partialCVS(
          pulmonaryComponent(
            UsePhi_Input=true,
            deadVolume=0,
            c_pv(
              volume_start(displayUnit="m3") = 65e-6 + settings.V_PV_init,
              ZeroPressureVolume=0,
              Compliance=1.8751539396141e-07,
              useExternalPressureInput=false),
            c_pa(Compliance=4.0503325095665e-08),
            r_pa(useConductanceInput=true, Resistance=6666119.37075),
            R_pa_visc(enable=false),
            R_pv_visc(enable=false),
            proportionalFactor(scalingFactor=0.5, u0=0)),
          systemicComponent(
            UseExerciseInput=false,
            _C_Ao=0.65,
            _C_SA=1.65,
            _C_SV=1.4*250,
            _R_Ao=0.01,
            _R_SA=0.965,
            _R_tAo=0.0020,
            _R_tSA=0.05,
            c_sa(volume_start=0.0002),
            c_sv(volume_start=0.001175)),
          redeclare replaceable
            Components.Subsystems.Heart.Heart_TriSegMechanics_LumensExercise
            heartComponent(
            UseThoracic_PressureInput=false,
            class_name="L EX",
            ventricles(
              V_LV(start=0.00015),
              V_RV(start=0.00015),
              LV_wall(SL(start=2.2), sigma_act0=sigma_act0),
              SEP_wall(SL(start=2.2), sigma_act0=sigma_act0),
              RV_wall(SL(start=2.2), sigma_act0=sigma_act0),
              calciumMechanics(t0_delay=0.085, time0(start=-0.2))),
            resistor(enable=false),
            resistor1(enable=false),
            sa_node(
              t0_last(displayUnit="s", start=0),
              cardiac_cycle(start=0.2),
              time0(start=-0.2)),
            aorticValve(_Goff(displayUnit="m3/(Pa.s)"),
                calculateAdditionalMetrics=true),
            mitralValve(calculateAdditionalMetrics=true)) constrainedby
            Components.Subsystems.Heart.partialHeart);
        Components.Signals.ConditionalConnection
                                     condExercise
          annotation (Placement(transformation(extent={{-40,100},{-20,80}})),
            choicesAllMatching=true);
        replaceable
        Components.Subsystems.Baroreflex.HeartRate_simple heartRate_simple(H0(
              displayUnit="1/min") = 1.0666666666667,
            H1(displayUnit="1/min") = 1.9) constrainedby
          Components.Subsystems.Baroreflex.partialHeartRate
          annotation (Placement(transformation(extent={{28,-4},{20,4}})),
            choicesAllMatching=true);

      //   Physiolibrary.Types.Volume volume_total=pulmonaryTriSeg.volume +
      //       systemic_TriSeg.volume + heartComponent.volume;
        Components.Signals.ConditionalConnection condHR(
          disconnectedValue=0.25,
          disconnected=false,
          delayTransport_Enabled=false,
          delayTransport_Time=settings.Td_phi_syst,
          delayIntegral_Enabled=false,
          delayInt_Act=settings.Td_phi_syst,
          phi0=settings.phi0)
          annotation (Placement(transformation(extent={{50,4},{42,-4}})));
        parameter Real sigma_act0=7.5*96 "mmHg ";
        replaceable
        Components.Signals.Stepping  exercise(
          startTime=100,
          interval=10,
          increment(displayUnit="1") = 0.1,
          maxVal(displayUnit="1") = 1) constrainedby
          Modelica.Blocks.Interfaces.SignalSource
          annotation (Placement(transformation(extent={{-72,80},{-52,100}})),
            choicesAllMatching=true);
      equation
        connect(heartComponent.frequency_input, heartRate_simple.HR)
          annotation (Line(points={{8,0},{19.92,0}}, color={0,0,127}));
        connect(heartComponent.phi, condExercise.y) annotation (Line(points={{8,6},{60,6},
                {60,90},{-19,90}},        color={0,0,127}));
        connect(systemicComponent.phi_input, condExercise.y) annotation (Line(
              points={{0,44},{-8,44},{-8,90},{-19,90}}, color={0,0,127}));
        connect(pulmonaryComponent.phi_input, condExercise.y) annotation (Line(
              points={{-16,-56},{-8,-56},{-8,90},{-19,90}}, color={0,0,127}));
        connect(heartRate_simple.phi, condHR.y) annotation (Line(points={{28,0},{38.7,
                0},{38.7,0},{41.6,0}}, color={0,0,127}));
        connect(condHR.u, condExercise.y) annotation (Line(points={{50.8,0},{60,0},{60,90},
                {-19,90}}, color={0,0,127}));
        connect(condExercise.u, exercise.y)
          annotation (Line(points={{-42,90},{-51,90}}, color={0,0,127}));
        annotation (experiment(
            StopTime=20,
            __Dymola_NumberOfIntervals=5000,
            Tolerance=1e-08,
            __Dymola_Algorithm="Cvode"));
      end SimpleExercise;

      model SimpleExerciseEDPVR
        extends SimpleExercise(heartComponent(ventricles(
              redeclare model VentricleWall =
                  ADAN_main.Components.Subsystems.Heart.Auxiliary.TriSegMechanics_components.VentricleWall_LumensOriginalEDPVR,
              LV_wall(
                k_passive=settings.heart_vntr_k_passive,
                SLrest=settings.heart_vntr_SLrest,
                SLcollagen=settings.heart_vntr_SLcollagen,
                PConcollagen=settings.heart_vntr_PConcollagen,
                PExpcollagen=settings.heart_vntr_PExpcollagen),
              SEP_wall(
                k_passive=settings.heart_vntr_k_passive,
                SLrest=settings.heart_vntr_SLrest,
                SLcollagen=settings.heart_vntr_SLcollagen,
                PConcollagen=settings.heart_vntr_PConcollagen,
                PExpcollagen=settings.heart_vntr_PExpcollagen),
              RV_wall(
                k_passive=settings.heart_vntr_k_passive,
                SLrest=settings.heart_vntr_SLrest,
                SLcollagen=settings.heart_vntr_SLcollagen,
                PConcollagen=settings.heart_vntr_PConcollagen,
                PExpcollagen=settings.heart_vntr_PExpcollagen)),
            aorticValve(calculateAdditionalMetrics=true),
            mitralValve(calculateAdditionalMetrics=true)),        redeclare
            Modelica.Blocks.Sources.Step exercise(startTime=20));

        Modelica.Blocks.Sources.RealExpression realExpression(y=heartComponent.ventricles.V_LV)
          annotation (Placement(transformation(extent={{28,-106},{48,-86}})));
        Components.Subsystems.Heart.Data.EDPVRnorm
                       EDPVRnorm_V(
          V_m=0.00012,
          P_m=799.93432449,
          useVolumeInput=true)
          annotation (Placement(transformation(extent={{80,-100},{100,-80}})));
      equation
        connect(realExpression.y, EDPVRnorm_V.volume)
          annotation (Line(points={{49,-96},{80,-96}}, color={0,0,127}));
        annotation (experiment(
            StopTime=40,
            __Dymola_NumberOfIntervals=5000,
            Tolerance=1e-08,
            __Dymola_Algorithm="Cvode"));
      end SimpleExerciseEDPVR;

      model SimpleExercise_Olufsen
        extends SimpleExercise(
          redeclare Components.Subsystems.Heart.Heart_TriSegMechanicsSimple
            heartComponent(
            UseThoracic_PressureInput=false,
            aorticValve(calculateAdditionalMetrics=true),
            mitralValve(calculateAdditionalMetrics=true)),
          settings(phi0=0));

      end SimpleExercise_Olufsen;

      package Identification
        model SimpleExercise_ident
          extends SimpleExerciseEDPVR(
            pulmonaryComponent(proportionalFactor(scalingFactor=
                    pulmonaryR_factor)),
            systemicComponent(
              _C_Ao=0.65*settings.syst_art_k_E,
              _C_SA=1.65*settings.syst_art_k_E,
              inverseProportionalFactor1(scalingFactor=venoconstrictionFactor),
              inverseProportionalFactor2(scalingFactor=vasodilatationFactor)),
            condHR(
              UseAdditionalInput=true,
              phi0=0,
              phi_gain=0),
            redeclare Modelica.Blocks.Sources.Step exercise(height=settings.chi_phi,
                startTime=10),
            heartComponent(ventricles(
                LV_wall(
                  Vw=80*settings.heart_vntr_xi_Vw,
                  Amref=0.975*80*settings.heart_vntr_xi_AmRef,
                  inotropy_factor=inotropy_factor,
                  calcium_factor=calcium_factor),
                SEP_wall(
                  Vw=38*settings.heart_vntr_xi_Vw,
                  Amref=0.975*45*settings.heart_vntr_xi_AmRef,
                  inotropy_factor=inotropy_factor,
                  calcium_factor=calcium_factor),
                RV_wall(
                  Vw=28*settings.heart_vntr_xi_Vw,
                  Amref=1.12*100*settings.heart_vntr_xi_AmRef,
                  inotropy_factor=inotropy_factor,
                  calcium_factor=calcium_factor))),
            settings(
              phi0=0,
              HR_nominal=1.1666666666667,
              HR_max=1.85,
              heart_vntr_xi_Vw=(100/123),
              chi_phi=0.2),
            redeclare Components.Subsystems.Baroreflex.HeartRate_HRMinMax
              heartRate_simple(
              phi0=settings.phi0,
              HR_max=settings.HR_max,
              HR_nom=settings.HR_nominal));

          replaceable Modelica.Blocks.Sources.Step step(startTime=10) constrainedby
            Modelica.Blocks.Interfaces.SignalSource annotation (Placement(transformation(extent={{96,
                    -18},{76,2}})), choicesAllMatching=true);
          parameter Real inotropy_factor=2.5;
          parameter Real calcium_factor=5;
          parameter Real pulmonaryR_factor=0.5
            "Scaling multiplier of u, because y=yBase*(1 + scalingFactor*u_)";
          parameter Real venoconstrictionFactor=2
            "Scaling multiplier of u, because y=yBase/(1 + scalingFactor*u)";
          parameter Real vasodilatationFactor=2
            "Scaling multiplier of u, because y=yBase/(1 + scalingFactor*u)";

          parameter Physiolibrary.Types.Frequency HR_20w(displayUnit="1/min")=1.6;
          parameter Real PhiStep = (HR_20w - settings.HR_nominal) / (settings.HR_max - settings.HR_nominal);

        equation
          connect(step.y, condHR.u1) annotation (Line(points={{75,-8},{56,-8},{
                  56,-4},{50.8,-4}},
                                   color={0,0,127}));
          annotation (experiment(
              StopTime=20,
              Interval=0.02,
              Tolerance=1e-08,
              __Dymola_Algorithm="Cvode"));
        end SimpleExercise_ident;

        model SimpleCirculation_HFpEF7 "Resulting fit to HFpEF7, Generated by PostProcess/postprocess_optim.py optimized at Aug 16 22:25:29 CEST 2021
 with cost 2.314029 lowest at run 1292"
          extends
            ADAN_main.SimpleCirculation.Exercise.Identification.SimpleExercise_ident(
            pulmonaryComponent(c_pa(Compliance=2.964495e-08)),
            systemicComponent(_R_SA=1.099994e+00),
            settings(
              heart_R_LA=1655068,
              heart_R_RA(displayUnit="(mmHg.s)/ml") = 1655068,
              heart_vntr_xi_AmRef=0.86375,
              V_PV_init=0.0002079688,
              chi_phi=0.2,
              syst_art_k_E=0.728125),
            sigma_act0=8.686250e+02,
            inotropy_factor=2.500000e-01,
            pulmonaryR_factor=3.028124e+00,
            venoconstrictionFactor=7.332812e+00,
            vasodilatationFactor=1.717188e+00,
            heartComponent(mitralValve(calculateAdditionalMetrics=true)));

          annotation ();
        end SimpleCirculation_HFpEF7;

        model SimpleCirculation_HFpEF7_MaxEx
          extends SimpleCirculation_HFpEF7(condExercise(UseAdditionalInput=true, phi0=0),
              redeclare Components.Signals.ConditionalConnection step(
                UseAdditionalInput=true),
            settings(HR_max=1.85, chi_phi=PhiStep),
            exercise(startTime=15));
          Modelica.Blocks.Sources.Step exercise1(height=1 - settings.chi_phi,
              startTime=30)
            annotation (Placement(transformation(extent={{-80,50},{-60,70}})),
              choicesAllMatching=true);
          replaceable Modelica.Blocks.Sources.Step step1(height=1 - PhiStep,
              startTime=30)                                           constrainedby
            Modelica.Blocks.Sources.Step            annotation (Placement(transformation(extent={{78,18},
                    {98,38}})),     choicesAllMatching=true);
          replaceable Modelica.Blocks.Sources.Step step2(height=PhiStep,
              startTime=15)                                           constrainedby
            Modelica.Blocks.Sources.Step            annotation (Placement(transformation(extent={{76,-60},
                    {96,-40}})),    choicesAllMatching=true);

          parameter Physiolibrary.Types.Frequency HR_20w(displayUnit="1/min")=1.6;
          parameter Real PhiStep = (HR_20w - settings.HR_nominal) / (settings.HR_max - settings.HR_nominal);

        equation
          connect(condExercise.u1, exercise1.y)
            annotation (Line(points={{-42,80},{-42,60},{-59,60}}, color={0,0,127}));
          connect(step2.y, step.u) annotation (Line(points={{97,-50},{112,-50},{112,-8},
                  {98,-8}}, color={0,0,127}));
          connect(step1.y, step.u1) annotation (Line(points={{99,28},{120,28},{120,2},{98,
                  2}}, color={0,0,127}));
          annotation (experiment(
              StopTime=45,
              Interval=0.01,
              Tolerance=1e-08,
              __Dymola_Algorithm="Cvode"));
        end SimpleCirculation_HFpEF7_MaxEx;

        model SEO_ident
          extends SimpleExercise_Olufsen(
            pulmonaryComponent(proportionalFactor(scalingFactor=
                    pulmonaryR_factor)),
            systemicComponent(
              _C_Ao=0.65*settings.syst_art_k_E,
              _C_SA=1.65*settings.syst_art_k_E,
              inverseProportionalFactor1(scalingFactor=venoconstrictionFactor),
              inverseProportionalFactor2(scalingFactor=vasodilatationFactor)),
            condHR(
              UseAdditionalInput=true,
              phi0=0,
              phi_gain=0),
            redeclare replaceable Modelica.Blocks.Sources.Step exercise(height=
                  midExerciseLevel, startTime=15),
            settings(
              phi0=0,
              HR_nominal=1.1666666666667,
              HR_max=1.85,
              heart_R_LA=1655068,
              heart_R_RA=1241.4029122117,
              heart_vntr_xi_Vw=(100/123),
              chi_phi=0.4),
            redeclare Components.Subsystems.Baroreflex.HeartRate_HRMinMax
              heartRate_simple(
              phi0=settings.phi0,
              HR_max=settings.HR_max,
              HR_nom=settings.HR_nominal),
            condExercise(UseAdditionalInput=true, phi0=0));

          replaceable Components.Signals.ConditionalConnection step(
            startTime=0,
            UseAdditionalInput=true,
            phi0=0)                                                               constrainedby
            Modelica.Blocks.Interfaces.SignalSource annotation (Placement(transformation(extent={{96,
                    -18},{76,2}})), choicesAllMatching=true);
        //  parameter Real inotropy_factor=2.5;
        //  parameter Real calcium_factor=5;
          parameter Real pulmonaryR_factor=0.5
            "Scaling multiplier of u, because y=yBase*(1 + scalingFactor*u_)";
          parameter Real venoconstrictionFactor=2
            "Scaling multiplier of u, because y=yBase/(1 + scalingFactor*u)";
          parameter Real vasodilatationFactor=2
            "Scaling multiplier of u, because y=yBase/(1 + scalingFactor*u)";

          parameter Physiolibrary.Types.Frequency HR_20w(displayUnit="1/min")=1.6;
          parameter Real PhiStep = (HR_20w - settings.HR_nominal) / (settings.HR_max - settings.HR_nominal);

          Modelica.Blocks.Sources.Step exercise1(height=settings.chi_phi -
                midExerciseLevel, startTime=30)
            annotation (Placement(transformation(extent={{-84,48},{-64,68}})),
              choicesAllMatching=true);
          replaceable Modelica.Blocks.Sources.Step maxHR(height=1 - PhiStep,
              startTime=30) constrainedby
            Modelica.Blocks.Interfaces.SignalSource annotation (Placement(transformation(extent={{76,12},
                    {96,32}})),     choicesAllMatching=true);
          replaceable Modelica.Blocks.Sources.Step midHR(height=PhiStep,
              startTime=15)                                           constrainedby
            Modelica.Blocks.Sources.Step            annotation (Placement(transformation(extent={{76,-44},
                    {96,-24}})),    choicesAllMatching=true);

          parameter Real midExerciseLevel=0.2
            "Height of mid exercise level step";
        equation
          connect(step.y, condHR.u1) annotation (Line(points={{75,-8},{56,-8},{56,-4},{50.8,
                  -4}},            color={0,0,127}));
          connect(condExercise.u1,exercise1. y)
            annotation (Line(points={{-42,80},{-42,58},{-63,58}}, color={0,0,127}));
          connect(maxHR.y, step.u1) annotation (Line(points={{97,22},{106,22},{106,2},{98,
                  2}}, color={0,0,127}));
          connect(midHR.y, step.u) annotation (Line(points={{97,-34},{106,-34},{106,-8},
                  {98,-8}}, color={0,0,127}));
          annotation (experiment(
              StopTime=45,
              Interval=0.02,
              Tolerance=1e-08,
              __Dymola_Algorithm="Cvode"));
        end SEO_ident;

        model SEO_HFpEFIdent
          extends SEO_ident_norm_opt(
            midExerciseLevel=0.2,
            HR_20w=1.6,
            settings(HR_nominal=1.1666666666667, HR_max=1.85));
        end SEO_HFpEFIdent;

        model SEO_HFpEFIdent_opt "Generated by PostProcess/postprocess_optim.py optimized at Aug 30 23:02:46 CEST 2021
 with cost 5.260474 lowest at run 4845"
          extends SEO_HFpEFIdent(
            pulmonaryComponent(c_pa(Compliance=3.227861e-08)),
            systemicComponent(_R_SA=1.084116e+00),
            settings(
              heart_vntr_xi_AmRef=9.560941e-01,
              V_PV_init=2.031250e-05,
              chi_phi=2.500000e-01,
              pulm_R=1.007988e+07,
              heart_R_RA=4.626399e+02,
              syst_art_k_E=5.434207e-01,
              heart_vntr_D_0=7.914933e+01,
              heart_vntr_D_A=2.452439e+03,
              heart_vntr_TS=2.293750e-01,
              heart_vntr_TR=2.873438e-01,
              heart_vntr_D_A_maxAct=5.059380e+03,
              heart_vntr_TS_maxAct=1.152428e-01,
              heart_vntr_TR_maxAct=8.347690e-02),
            pulmonaryR_factor=1.093750e-02,
            venoconstrictionFactor=1.056720e+01,
            vasodilatationFactor=3.768750e+00);

          annotation (experiment(
              StopTime=60,
              __Dymola_NumberOfIntervals=5000,
              Tolerance=1e-08,
              __Dymola_Algorithm="Cvode"));
        end SEO_HFpEFIdent_opt;

        model SEO_ident_Norm
          extends SEO_ident(
            midExerciseLevel=0.7,
            HR_20w=2.55,
            settings(
              HR_nominal=1.0666666666667,
              HR_max=3.1666666666667,
              heart_R_AV(displayUnit="(mmHg.s)/ml") = settings.heart_R_vlv,
              heart_R_LA=1655068,
              heart_R_RA(displayUnit="(mmHg.s)/ml") = settings.heart_R_LA,
              heart_R_A_vis(displayUnit="(mmHg.s)/ml"),
              chi_phi=1));
          annotation (experiment(
              StopTime=45,
              __Dymola_NumberOfIntervals=5000,
              Tolerance=1e-08,
              __Dymola_Algorithm="Cvode"));
        end SEO_ident_Norm;

        model SEO_ident_norm_opt "Generated by PostProcess/postprocess_optim.py optimized at Aug 30 11:25:49 CEST 2021
 with cost 6.666571 lowest at run 232"
          extends SEO_ident_Norm(
            pulmonaryComponent(c_pa(Compliance=1.934298e-10)),
            systemicComponent(_R_SA=1.015000e+00),
            settings(
              heart_R_LA=1.600243e+06,
              syst_art_k_E=5.746707e-01,
              heart_vntr_D_0=1.655760e+01,
              heart_vntr_D_A=1.921970e+03,
              heart_vntr_TS=3.220313e-01,
              heart_vntr_TR=4.434375e-01,
              heart_vntr_D_A_maxAct=5.059380e+03,
              heart_vntr_TS_maxAct=6.555525e-02,
              heart_vntr_TR_maxAct=1.128519e-01,
              heart_atr_D_0=2.916500e+07,
              heart_atr_D_A=4.626403e+07,
              pulm_R=4.244419e+06,
              V_PV_init=1.473440e-04),
            pulmonaryR_factor=8.093750e-01,
            venoconstrictionFactor=3.887497e+00,
            vasodilatationFactor=1.856250e+00,
            exercise(startTime=30),
            exercise1(startTime=45),
            maxHR(startTime=45),
            midHR(startTime=30));

            Real HR_plot;

        equation
         if time > maxHR.startTime + 14 then
           HR_plot =  settings.HR_max;
         elseif time > maxHR.startTime - 1 then
           HR_plot =  HR_20w;
         elseif time > midHR.startTime - 1 then
           HR_plot = settings.HR_nominal;
         else
           HR_plot = 0;
         end if;

          annotation (experiment(
              StopTime=60,
              __Dymola_NumberOfIntervals=5000,
              Tolerance=1e-08,
              __Dymola_Algorithm="Cvode"));
        end SEO_ident_norm_opt;
      end Identification;

      package StepUp
        model SEO_stepUp
          extends Identification.SEO_ident_norm_opt(
            redeclare Components.Signals.Stepping exercise(
              startTime=30,
              interval=15,
              increment=0.1,
              maxVal=1.01),
            exercise1(height=0),
            condHR(UseAdditionalInput=false, phi_gain=1));
        end SEO_stepUp;

        model SEO_HFpEF_stepUp
          extends Identification.SEO_HFpEFIdent_opt(
            redeclare replaceable
                      Components.Signals.Stepping exercise(
              startTime=30,
              interval=15,
              increment=0.05,
              maxVal=0.5) constrainedby Modelica.Blocks.Interfaces.SignalSource,
            exercise1(height=0),
            condHR(UseAdditionalInput=false, phi_gain=1),
            settings(HR_max=3.9));
        end SEO_HFpEF_stepUp;

        model SEO_stepUp_Constnant
          extends SEO_stepUp(redeclare Modelica.Blocks.Sources.ContinuousClock
              exercise, condExercise(UseAdditionalInput=false, phi_gain=0.01));
        end SEO_stepUp_Constnant;
      end StepUp;

      model SimpleExercise_constantUp
        extends SimpleExercise(
          redeclare Modelica.Blocks.Sources.ContinuousClock exercise(startTime=
                10),
          condExercise(phi_gain=0.01),
          settings(phi0=0));
      end SimpleExercise_constantUp;

      model SimpleExercise_Olsen
        extends SimpleExercise(redeclare
            Components.Subsystems.Heart.Olsen.Heart_Olsen_base heartComponent(
            useAlternativeDur=true,
              UseThoracic_PressureInput=false,
            eta_smax=2.5),                      condExercise(disconnected=false),
          systemicComponent(_C_Ao=0.45, _C_SA=1.05),
          settings(phi0=0, V_PV_init=-0.0001),
          redeclare Components.Subsystems.Baroreflex.HeartRate_HRMinMax
            heartRate_simple(phi0=0, HR_max=3.3333333333333),
          exercise(startTime=20, interval=20));

      Physiolibrary.Types.Pressure P_LV = heartComponent.P_lvw;
      Physiolibrary.Types.Pressure P_RV = heartComponent.P_rvw;
      Physiolibrary.Types.Pressure P_LA = heartComponent.P_la;
      Physiolibrary.Types.Pressure P_RA = heartComponent.P_ra;
      Physiolibrary.Types.Volume V_RV = heartComponent.V_rv;
      Physiolibrary.Types.Volume V_LA = heartComponent.V_la;
      Physiolibrary.Types.Volume V_RA = heartComponent.V_ra;

      // Physiolibrary.Types.Volume totalVolume = systemic_TriSeg.volume + pulmonaryTriSeg.volume + V_LV + V_RV + V_RA + V_LA;
        Modelica.Units.SI.Time t_av_o "Time of av opening";
        Modelica.Units.SI.Duration t_av_d(start=0.1) "Duration of av opening";
        Modelica.Units.SI.Time t_mv_o "Time of mv opening";
        Modelica.Units.SI.Duration t_mv_d(start = 0.1) "Duration of av opening";

      Physiolibrary.Types.Fraction av_of = t_av_d*heartComponent.HR_true "Aortic valve open fraction";
      Physiolibrary.Types.Fraction mv_of = t_mv_d*heartComponent.HR_true "Mitral valve as fraction of open to cardiac cycle";
      Modelica.Units.SI.Duration cycle_length = 1/max(1e-3,HR) "Duration of cardiac cycle";
      Modelica.Units.SI.Duration diastolic_d = (1/heartComponent.HR_true-t_av_d) "Cardiologic diastole duration";
      Physiolibrary.Types.Fraction diastolic_f = diastolic_d*heartComponent.HR_true "Diastolic fraction";
      Modelica.Units.SI.Duration t_dur = 8.22*(1/HR*100)^(1/3)/100 "Acitvation duration as in Fridericia 1920 (Q-P waves difference)";
      Modelica.Units.SI.Duration t_sys_Bomba = (-1.079*(HR*60) + 361.1)/1000 "Systolic time fitted to Bombardini 2008";
      equation
        when heartComponent.Q_av > 0 then
          t_av_o = time;
        end when;
        when heartComponent.Q_mv > 0 then
          t_mv_o = time;
        end when;
        when heartComponent.Q_av < 0 then
          t_av_d = time -t_av_o;
        end when;
        when heartComponent.Q_mv < 0 then
          t_mv_d = time - t_mv_o;
        end when;

        annotation (experiment(
            StopTime=220,
            __Dymola_NumberOfIntervals=5000,
            Tolerance=1e-06,
            __Dymola_Algorithm="Dassl"));
      end SimpleExercise_Olsen;

      model SimpleExercise_Olsen2
        extends SimpleExercise_Olsen(heartComponent(
            L_la(displayUnit="Pa.s2/m3") = 13332.2,
            L_pve=133322,
            L_ra(displayUnit="Pa.s2/m3") = 13332.2,
            L_vc=133322,
            V_lainit=8e-05), systemicComponent(_R_SA=1.4965));
      end SimpleExercise_Olsen2;
    end Exercise;
  end SimpleCirculation;

  package ArterialTree "Adan86 reduced arterial tree"
    model ADAN
      import ADAN_main;
      ADAN_main.Components.Subsystems.Systemic.ADAN86ArterialTree.arteries_ADAN86_dv
        arteries_ADAN86_dv(redeclare
          ADAN_main.Components.Obsolete.pv_jII_type_baroreceptor
          aortic_arch_C46)
        annotation (Placement(transformation(extent={{-40,20},{-20,40}})));
      ADAN_main.Components.Subsystems.Heart.Heart_ADAN86 heart(redeclare
          ADAN_main.Components.Obsolete.Heart_ADAN_Heart Heart1)
        annotation (Placement(transformation(extent={{0,-40},{-20,-20}})));
      ADAN_main.Components.Subsystems.Pulmonary.Pulmonary_ADAN86
        pulmonary_circulation
        annotation (Placement(transformation(extent={{-20,-80},{0,-60}})));
      Modelica.Blocks.Sources.Constant thoracic_pressure(k=0)
        annotation (Placement(transformation(extent={{-98,-60},{-78,-40}})));
      Modelica.Blocks.Sources.Constant heart_frequency(k=1)
        annotation (Placement(transformation(extent={{80,-40},{60,-20}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump(
          useSolutionFlowInput=true)
        annotation (Placement(transformation(extent={{40,-30},{20,-10}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(P(
            displayUnit="Pa") = 1000)
        annotation (Placement(transformation(extent={{40,44},{20,64}})));
      Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume1(P(
            displayUnit="Pa") = 100)
        annotation (Placement(transformation(extent={{40,10},{20,30}})));
      Physiolibrary.Hydraulic.Sensors.FlowMeasure flowMeasure
        annotation (Placement(transformation(extent={{-10,64},{10,44}})));
      Physiolibrary.Hydraulic.Sensors.FlowMeasure flowMeasure1
        annotation (Placement(transformation(extent={{-6,30},{14,10}})));
      Modelica.Blocks.Math.Add add
        annotation (Placement(transformation(extent={{12,-6},{22,4}})));
      Physiolibrary.Hydraulic.Sensors.FlowMeasure flowMeasure2 annotation (
          Placement(transformation(
            extent={{-10,-10},{10,10}},
            rotation=90,
            origin={-60,2})));
      Modelica.Blocks.Continuous.Integrator integrator
        annotation (Placement(transformation(extent={{-78,-8},{-98,12}})));
    equation
      connect(heart.pa, pulmonary_circulation.port_a) annotation (Line(
          points={{-20,-40},{-30,-40},{-30,-70},{-20,-70}},
          color={0,0,0},
          thickness=1));
      connect(heart.pv, pulmonary_circulation.port_b) annotation (Line(
          points={{0,-40},{12,-40},{12,-70},{0,-70}},
          color={0,0,0},
          thickness=1));
      connect(thoracic_pressure.y, arteries_ADAN86_dv.thoracic_pressure)
        annotation (Line(points={{-77,-50},{-40,-50},{-40,20}},color={0,140,72}));
      connect(thoracic_pressure.y, pulmonary_circulation.thoracic_pressure)
        annotation (Line(points={{-77,-50},{-40,-50},{-40,-80},{-10,-80}}, color=
              {0,140,72}));
      connect(thoracic_pressure.y, heart.thoracic_pressure) annotation (Line(
            points={{-77,-50},{-10,-50},{-10,-40}}, color={0,140,72}));
      connect(heart_frequency.y, heart.frequency)
        annotation (Line(points={{59,-30},{0,-30}}, color={0,0,127}));
      connect(heart.sv, unlimitedPump.q_out) annotation (Line(
          points={{0,-20},{20,-20}},
          color={0,0,0},
          thickness=1));
      connect(arteries_ADAN86_dv.port_b_superior, flowMeasure.q_in) annotation (
          Line(
          points={{-20,40},{-16,40},{-16,54},{-10,54}},
          color={0,0,0},
          thickness=1));
      connect(flowMeasure.q_out, unlimitedVolume.y) annotation (Line(
          points={{10,54},{20,54}},
          color={0,0,0},
          thickness=1));
      connect(arteries_ADAN86_dv.port_b_inferior, flowMeasure1.q_in) annotation (
          Line(
          points={{-20,20},{-6,20}},
          color={0,0,0},
          thickness=1));
      connect(flowMeasure1.q_out, unlimitedVolume1.y) annotation (Line(
          points={{14,20},{20,20}},
          color={0,0,0},
          thickness=1));
      connect(flowMeasure1.volumeFlow, add.u1)
        annotation (Line(points={{4,8},{4,2},{11,2}}, color={0,0,127}));
      connect(unlimitedPump.solutionFlow, add.y)
        annotation (Line(points={{30,-13},{30,-1},{22.5,-1}}, color={0,0,127}));
      connect(add.u2, flowMeasure.volumeFlow)
        annotation (Line(points={{11,-4},{0,-4},{0,42}}, color={0,0,127}));
      connect(heart.sa, flowMeasure2.q_in) annotation (Line(
          points={{-20,-20},{-60,-20},{-60,-8}},
          color={0,0,0},
          thickness=1));
      connect(flowMeasure2.q_out, arteries_ADAN86_dv.port_a) annotation (Line(
          points={{-60,12},{-60,30},{-40,30}},
          color={0,0,0},
          thickness=1));
      connect(integrator.u, flowMeasure2.volumeFlow) annotation (Line(points={{-76,2},
              {-72,2}},                         color={0,0,127}));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)),
        experiment(
          StopTime=60,
          Interval=0.05,
          Tolerance=1e-06,
          __Dymola_Algorithm="Cvode"));
    end ADAN;

    model ADAN_venous
      import ADAN_main;
      ADAN_main.Components.Subsystems.Systemic.ADAN86ArterialTree.arteries_ADAN86_baroreflex
        arteries_ADAN86
        annotation (Placement(transformation(extent={{-76,20},{-56,40}})));
      ADAN_main.Components.Subsystems.Heart.Heart_ADAN86 heart(redeclare
          ADAN_main.Components.Obsolete.Heart_ADAN_Heart Heart1)
        annotation (Placement(transformation(extent={{0,-40},{-20,-20}})));
      ADAN_main.Components.Subsystems.Pulmonary.Pulmonary_ADAN86
        pulmonary_circulation
        annotation (Placement(transformation(extent={{-20,-80},{0,-60}})));
      Modelica.Blocks.Sources.Constant thoracic_pressure(k=0)
        annotation (Placement(transformation(extent={{-100,-60},{-80,-40}})));
      replaceable
      Modelica.Blocks.Sources.Constant heart_frequency(k=1) constrainedby
        Modelica.Blocks.Interfaces.SO
        annotation (Placement(transformation(extent={{80,-40},{60,-20}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel veins(volume_start=0.003,
          Compliance=2.250184727537e-6)
        annotation (Placement(transformation(extent={{-50,20},{-30,40}})));
      Physiolibrary.Hydraulic.Components.Conductor venousResistance(Conductance(
            displayUnit="l/(mmHg.min)") = 7.50062E-08)
        annotation (Placement(transformation(extent={{-20,20},{0,40}})));
    equation
      connect(heart.pa, pulmonary_circulation.port_a) annotation (Line(
          points={{-20,-40},{-30,-40},{-30,-70},{-20,-70}},
          color={0,0,0},
          thickness=1));
      connect(heart.pv, pulmonary_circulation.port_b) annotation (Line(
          points={{0,-40},{12,-40},{12,-70},{0,-70}},
          color={0,0,0},
          thickness=1));
      connect(heart.sa, arteries_ADAN86.port_a) annotation (Line(
          points={{-20,-20},{-94,-20},{-94,30},{-76,30}},
          color={0,0,0},
          thickness=1));
      connect(thoracic_pressure.y, arteries_ADAN86.thoracic_pressure) annotation (
          Line(points={{-79,-50},{-76.4,-50},{-76.4,20}}, color={0,140,72}));
      connect(thoracic_pressure.y, pulmonary_circulation.thoracic_pressure)
        annotation (Line(points={{-79,-50},{-40,-50},{-40,-80},{-10,-80}}, color=
              {0,140,72}));
      connect(thoracic_pressure.y, heart.thoracic_pressure) annotation (Line(
            points={{-79,-50},{-10,-50},{-10,-40}}, color={0,140,72}));
      connect(veins.q_in, venousResistance.q_in) annotation (Line(
          points={{-40,30},{-20,30}},
          color={0,0,0},
          thickness=1));
      connect(heart.sv, venousResistance.q_out) annotation (Line(
          points={{0,-20},{40,-20},{40,30},{0,30}},
          color={0,0,0},
          thickness=1));
      connect(arteries_ADAN86.port_b, veins.q_in) annotation (Line(
          points={{-56,30},{-40,30}},
          color={0,0,0},
          thickness=1));
      connect(heart.frequency, heart_frequency.y) annotation (Line(points={{0,-30},
              {30,-30},{30,-30},{59,-30}}, color={0,0,127}));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)));
    end ADAN_venous;

    model ADAN_venous_thoracic
      import ADAN_main;
      replaceable ADAN_main.Components.Subsystems.Heart.Heart_ADAN86 heart
        constrainedby ADAN_main.Components.Subsystems.Heart.partialHeart
        annotation (Placement(transformation(extent={{0,-40},{-20,-20}})),
          __Dymola_choicesAllMatching=true);
      ADAN_main.Components.Subsystems.Pulmonary.Pulmonary_ADAN86
        pulmonary_circulation
        annotation (Placement(transformation(extent={{-20,-80},{0,-60}})));
      Modelica.Blocks.Sources.Trapezoid thoracic_pressure(
        amplitude=5320,
        rising=1,
        width=18.0,
        falling=1,
        period=60,
        nperiod=1,
        offset=0,
        startTime=300)
        annotation (Placement(transformation(extent={{-100,-60},{-80,-40}})));
      Modelica.Blocks.Sources.Ramp     heart_frequency(
        height=0,
        duration=1,
        offset=1,
        startTime=5)
        annotation (Placement(transformation(extent={{80,-40},{60,-20}})));
      ADAN_main.Components.Subsystems.Systemic.ADAN86ArterialTree.arteries_ADAN86_baroreflex
        arteries_ADAN86(aortic_arch_C46(p_C(start=13332.2387415, displayUnit=
                "mmHg")), internal_carotid_R8_A(p_C(displayUnit="mmHg", start=
                13332.2387415)))
        annotation (Placement(transformation(extent={{-76,20},{-56,40}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel veins(volume_start=0.003,
          Compliance=0.003/venousPressure)
        annotation (Placement(transformation(extent={{-50,20},{-30,40}})));
      Physiolibrary.Hydraulic.Components.Resistor venousResistance(
        Resistance=totalVenousResistance*(1-thoracicResistance))
        annotation (Placement(transformation(extent={{-20,20},{0,40}})));
      Physiolibrary.Hydraulic.Components.ElasticVessel thoracicVeinsCompliance(
        volume_start=thoracicVolume,
        Compliance=thoracicVolume/thoracicVenousPressure,
        useExternalPressureInput=true)
        annotation (Placement(transformation(extent={{10,40},{30,20}})));
      Physiolibrary.Hydraulic.Components.Resistor thoracicVeinsResistance(
          Resistance= totalVenousResistance*thoracicResistance)
        annotation (Placement(transformation(extent={{40,20},{60,40}})));
        parameter Physiolibrary.Types.HydraulicResistance totalVenousResistance=13332000;
        parameter Physiolibrary.Types.Fraction thoracicResistance=0.02;
        parameter Physiolibrary.Types.Pressure venousPressure=1333.2;
        parameter Physiolibrary.Types.Pressure thoracicVenousPressure=133.32;
        parameter Physiolibrary.Types.Volume thoracicVolume=7.5e-5;
    equation
      connect(heart.pa, pulmonary_circulation.port_a) annotation (Line(
          points={{-20,-40},{-30,-40},{-30,-70},{-20,-70}},
          color={0,0,0},
          thickness=1));
      connect(heart.pv, pulmonary_circulation.port_b) annotation (Line(
          points={{0,-40},{12,-40},{12,-70},{0,-70}},
          color={0,0,0},
          thickness=1));
      connect(thoracic_pressure.y, pulmonary_circulation.thoracic_pressure)
        annotation (Line(points={{-79,-50},{-40,-50},{-40,-80},{-10,-80}}, color=
              {0,140,72}));
      connect(thoracic_pressure.y, heart.thoracic_pressure) annotation (Line(
            points={{-79,-50},{-10,-50},{-10,-40}}, color={0,140,72}));
      connect(heart_frequency.y, heart.frequency)
        annotation (Line(points={{59,-30},{0,-30}}, color={0,0,127}));
      connect(heart.sa,arteries_ADAN86. port_a) annotation (Line(
          points={{-20,-20},{-94,-20},{-94,30},{-76,30}},
          color={0,0,0},
          thickness=1));
      connect(thoracic_pressure.y,arteries_ADAN86. thoracic_pressure) annotation (
          Line(points={{-79,-50},{-76.4,-50},{-76.4,20}}, color={0,140,72}));
      connect(veins.q_in,venousResistance. q_in) annotation (Line(
          points={{-40,30},{-20,30}},
          color={0,0,0},
          thickness=1));
      connect(arteries_ADAN86.port_b,veins. q_in) annotation (Line(
          points={{-56,30},{-40,30}},
          color={0,0,0},
          thickness=1));
      connect(heart.sv, thoracicVeinsResistance.q_out) annotation (Line(
          points={{0,-20},{72,-20},{72,30},{60,30}},
          color={0,0,0},
          thickness=1));
      connect(thoracicVeinsResistance.q_in, venousResistance.q_out) annotation (
          Line(
          points={{40,30},{0,30}},
          color={0,0,0},
          thickness=1));
      connect(thoracicVeinsResistance.q_in, thoracicVeinsCompliance.q_in)
        annotation (Line(
          points={{40,30},{20,30}},
          color={0,0,0},
          thickness=1));
      connect(thoracic_pressure.y, thoracicVeinsCompliance.externalPressure)
        annotation (Line(points={{-79,-50},{-76,-50},{-76,2},{28,2},{28,22}},
            color={0,0,127}));
      annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
            coordinateSystem(preserveAspectRatio=false)),
        experiment(
          StopTime=85,
          Interval=0.02,
          Tolerance=1e-07,
          __Dymola_Algorithm="Cvode"));
    end ADAN_venous_thoracic;

    package SmithExtended "Extension of Smith simple circulation model with Adan86 arterial tree"

      model HemodynamicsSmithoBeard
        import Physiolibrary.Hydraulic.Components.*;
        import ADAN_main;
        import ADAN_main;
      //   Physiolibrary.Types.Volume total_volume=arteries_ADAN86.total_volume +
      //       venaCava.volume + ventricularInteraction_flat.Vlv +
      //       ventricularInteraction_flat.Vrv + pulmonaryArteries.volume +
      //       pulmonaryVeins.volume;

        ElasticVesselElastance venaCava(
          ZeroPressureVolume=0,
          volume_start=0.003,
          Elastance(displayUnit="mmHg/ml") = 2133158.19864)
          annotation (Placement(transformation(extent={{-130,24},{-110,44}})));
        IdealValveResistance aorticValve(Pknee=0, _Ron(displayUnit=
                "(mmHg.s)/ml") = 2399802.97347)
          annotation (Placement(transformation(extent={{-68,-30},{-88,-10}})));
        Resistor Rsys(Resistance(displayUnit="(mmHg.s)/ml") = 77100336.642095)
          annotation (Placement(transformation(
              extent={{-10,-10},{10,10}},
              rotation=90,
              origin={-120,8})));
        IdealValveResistance tricuspidValve(Pknee=0, _Ron(displayUnit=
                "(mmHg.s)/ml") = 3159740.5817355)
          annotation (Placement(transformation(extent={{-62,24},{-42,44}})));
        Inertia Lav(I(displayUnit="mmHg.s2/ml") = 16250.665802014,
            volumeFlow_start(displayUnit="m3/s") = -1.4e-8) annotation (
            Placement(transformation(
              extent={{-10,-10},{10,10}},
              rotation=180,
              origin={-44,-20})));
        Inertia Lpv(I(displayUnit="mmHg.s2/ml") = 19822.372560862,
            volumeFlow_start(displayUnit="m3/s") = -1.9e-9)
          annotation (Placement(transformation(extent={{32,24},{52,44}})));
        IdealValveResistance pulmonaryValve(Pknee=0, _Ron(displayUnit=
                "(mmHg.s)/ml") = 733273.1307825)
          annotation (Placement(transformation(extent={{62,24},{82,44}})));
          ElasticVesselElastance pulmonaryArteries(
          ZeroPressureVolume=0,
          useExternalPressureInput=true,
          volume_start=0.0001,
          Elastance(displayUnit="mmHg/ml") = 23998029.7347)
          annotation (Placement(transformation(extent={{102,24},{122,44}})));
        Resistor Rpul(Resistance(displayUnit="(mmHg.s)/ml") = 26664477.483)
          annotation (Placement(transformation(
              extent={{-10,-10},{10,10}},
              rotation=270,
              origin={114,4})));
      ElasticVesselElastance pulmonaryVeins(
          ZeroPressureVolume=0,
          useExternalPressureInput=true,
          volume_start=1e-05,
          Elastance(displayUnit="mmHg/ml") = 13332238.7415)
          annotation (Placement(transformation(extent={{104,-30},{124,-10}})));
        IdealValveResistance mitralValve(Pknee=0, _Ron(displayUnit=
                "(mmHg.s)/ml") = 2106493.721157)
          annotation (Placement(transformation(extent={{52,-30},{32,-10}})));
        Inertia Ltc(I(displayUnit="mmHg.s2/ml") = 10678.18997523,
            volumeFlow_start(displayUnit="m3/s") = 0.0001372)
          annotation (Placement(transformation(extent={{-88,24},{-68,44}})));
        Inertia Lmt(I(displayUnit="mmHg.s2/ml") = 10261.557514558,
            volumeFlow_start(displayUnit="m3/s") = 0.0001141) annotation (
            Placement(transformation(
              extent={{-10,-10},{10,10}},
              rotation=180,
              origin={70,-20})));
        Physiolibrary.Types.Constants.FrequencyConst HR(k=1.2)
          annotation (Placement(transformation(extent={{-114,-76},{-98,-62}})));
        replaceable
        Modelica.Blocks.Sources.Trapezoid           IntraThoracicPressure(
          amplitude=5000,
          width=15,
          period=100,
          offset=-533,
          startTime=15)
          constrainedby Modelica.Blocks.Interfaces.SO
          annotation (Placement(transformation(extent={{38,12},{50,20}})),
            __Dymola_choicesAllMatching=true);
        ADAN_main.Components.Subsystems.Heart.Auxiliary.Smith_VentricularInteraction_flat
          ventricularInteraction_flat(
          lambdalv=33000,
          lambdaperi=30000,
          lambdas(displayUnit="1/m3") = 435000,
          lambdarv(displayUnit="1/m3") = 23000,
          Essept0(displayUnit="mmHg/ml") = 6499999676.0309,
          V0peri=0.0002,
          Pi0sept=148.00118226939,
          Pi0rv=28.757638965416,
          Pi0lv=16.038683206025,
          Pi0peri=66.701190423724,
          Esrv0=77993596.637775,
          Eslv0=383941811.27772)
          annotation (Placement(transformation(extent={{-18,-12},{20,28}})));
        Physiolibrary.Hydraulic.Components.ElasticVesselElastance arteries(
          ZeroPressureVolume=0,
          volume_start=0.0001,
          Elastance(displayUnit="mmHg/ml") = 130655939.6667)
          annotation (Placement(transformation(extent={{-138,-30},{-118,-10}})));
        Physiolibrary.Types.Constants.FractionConst  HR1(k(displayUnit="1")=
            0.25)
          annotation (Placement(transformation(extent={{-40,16},{-24,30}})));
        ADAN_main.Components.Obsolete.pv_jII_type_baroreceptor aortic_arch_C46(
          thoracic_pressure=thoracic_pressure,
          l=Parameters_Systemic1.l_aortic_arch_C46,
          E=Parameters_Systemic1.E_aortic_arch_C46,
          r=Parameters_Systemic1.r_aortic_arch_C46)
          annotation (Placement(transformation(extent={{-95,-23},{-115,-18}})));
        ADAN_main.Components.Obsolete.pv_type_baroreceptor
          internal_carotid_R8_A(
          l=Parameters_Systemic1.l_internal_carotid_R8_A,
          E=Parameters_Systemic1.E_internal_carotid_R8_A,
          r=Parameters_Systemic1.r_internal_carotid_R8_A)
          annotation (Placement(transformation(extent={{-148,-5},{-128,0}})));
        ADAN_main.Components.Subsystems.Systemic.ADAN86ArterialTree.Parameters_cellml.Parameters_Systemic
          Parameters_Systemic1 annotation (Placement(transformation(extent={{-158,
                  -99},{-138,-94}})));
          Real thoracic_pressure = IntraThoracicPressure.y;
        ADAN_main.Components.Subsystems.Baroreflex.Baroreflex baroreflex(
          phi(start=0.251996),
          fiSN_start=0.251996,
          f1=0.015,
          g=0.3,
          resetAt=0.0)
          annotation (Placement(transformation(extent={{-90,82},{-70,62}})));
      equation
        connect(Rsys.q_out, venaCava.q_in) annotation (Line(
            points={{-120,18},{-120,34}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(pulmonaryValve.q_out, pulmonaryArteries.q_in) annotation (Line(
            points={{82,34},{112,34}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(pulmonaryArteries.q_in, Rpul.q_in) annotation (Line(
            points={{112,34},{114,34},{114,14}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Rpul.q_out, pulmonaryVeins.q_in) annotation (Line(
            points={{114,-6},{114,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(venaCava.q_in, Ltc.q_in) annotation (Line(
            points={{-120,34},{-88,34}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(pulmonaryVeins.q_in, Lmt.q_in) annotation (Line(
            points={{114,-20},{80,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Lav.q_out, aorticValve.q_in) annotation (Line(
            points={{-54,-20},{-68,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Ltc.q_out, tricuspidValve.q_in) annotation (Line(
            points={{-68,34},{-62,34}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Lpv.q_out, pulmonaryValve.q_in) annotation (Line(
            points={{52,34},{62,34}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(mitralValve.q_in, Lmt.q_out) annotation (Line(
            points={{52,-20},{60,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(tricuspidValve.q_out, ventricularInteraction_flat.rvflow)
          annotation (Line(
            points={{-42,34},{0.62,34},{0.62,28}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Lpv.q_in, ventricularInteraction_flat.rvflow) annotation (Line(
            points={{32,34},{0.62,34},{0.62,28}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(ventricularInteraction_flat.lvflow, Lav.q_in) annotation (Line(
            points={{1,-12},{2,-12},{2,-20},{-34,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(mitralValve.q_out, Lav.q_in) annotation (Line(
            points={{32,-20},{-34,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(IntraThoracicPressure.y, ventricularInteraction_flat.Pth)
          annotation (Line(
            points={{50.6,16},{58,16},{58,8},{16.58,8}},
            color={0,190,190},
            smooth=Smooth.None));
        connect(pulmonaryArteries.externalPressure, IntraThoracicPressure.y)
          annotation (Line(
            points={{120,42},{120,46},{86,46},{86,16},{50.6,16}},
            color={0,190,190},
            smooth=Smooth.None));
        connect(pulmonaryVeins.externalPressure, IntraThoracicPressure.y)
          annotation (Line(
            points={{122,-12},{122,16},{50.6,16}},
            color={0,190,190},
            smooth=Smooth.None));
        connect(HR1.y, ventricularInteraction_flat.phi) annotation (Line(points={{-22,
                23},{-20,23},{-20,24},{-14.2,24}}, color={0,0,127}));
        connect(HR.y, ventricularInteraction_flat.HR) annotation (Line(points={{-96,-69},
                {-62,-69},{-62,-68},{-26,-68},{-26,8},{-14.2,8}}, color={0,0,127}));
        connect(aorticValve.q_out, aortic_arch_C46.port_a) annotation (Line(
            points={{-88,-20},{-91.5,-20},{-91.5,-20.5},{-95,-20.5}},
            color={0,0,0},
            thickness=1));
        connect(aortic_arch_C46.port_b, arteries.q_in) annotation (Line(
            points={{-115,-20.5},{-135.5,-20.5},{-135.5,-20},{-128,-20}},
            color={0,0,0},
            thickness=1));
        connect(Rsys.q_in, internal_carotid_R8_A.port_b) annotation (Line(
            points={{-120,-2},{-120,-2.5},{-128,-2.5}},
            color={0,0,0},
            thickness=1));
        connect(internal_carotid_R8_A.port_a, arteries.q_in) annotation (Line(
            points={{-148,-2.5},{-150,-2.5},{-150,-2},{-154,-2},{-154,-20},{-128,
                -20}},
            color={0,0,0},
            thickness=1));
        connect(baroreflex.carotid_BR, internal_carotid_R8_A.y) annotation (Line(
              points={{-90,82},{-132,82},{-132,-5},{-129.8,-5}}, color={0,0,127}));
        connect(aortic_arch_C46.y,baroreflex. aortic_BR) annotation (Line(points={{-113.2,
                -23},{-107.3,-23},{-107.3,62},{-90,62}},         color={0,0,127}));
        annotation (
          Diagram(coordinateSystem(preserveAspectRatio=false, extent={{-160,-100},
                  {160,100}})),
          Icon(coordinateSystem(extent={{-160,-100},{160,100}})),
          Documentation(info="<html>
<p>Cardiovascular model implemented per description of Smith et al.</p>
<p>[12] B. W. Smith, J. G. Chase, R. I. Nokes, G. M. Shaw, G. Wake, Minimal Haemodynamic System Model Including Ventricular Interaction and Valve Dynamics., Medical Engineering &AMP; Physics 26 (2) (2004) 131&ndash;139. doi:10.1016/j.medengphy.2003.10.001.</p>
<p>[13] CellML implementation at URL:  http://models.cellml.org/exposure/9d046663ba5cac5c8a61ac146183614b/smith_chase_nokes_shaw_wake_2004.cellml/view</p>
</html>"),experiment(StopTime=50, __Dymola_NumberOfIntervals=1500));
      end HemodynamicsSmithoBeard;

      model HemodynamicsSmith_shallow
        import Physiolibrary.Hydraulic.Components.*;
        Physiolibrary.Types.Volume total_volume=arteries1.arteries_ADAN86.total_volume +
            venaCava.volume + ventricularInteraction_flat.Vlv +
            ventricularInteraction_flat.Vrv + pulmonaryArteries.volume +
            pulmonaryVeins.volume;

        ElasticVesselElastance venaCava(
          ZeroPressureVolume=0,
          volume_start=0.000252,
          Elastance(displayUnit="mmHg/ml") = 786602.0857485)
          annotation (Placement(transformation(extent={{-130,24},{-110,44}})));
        IdealValveResistance aorticValve(Pknee=0, _Ron(displayUnit=
                "(mmHg.s)/ml") = 2399802.97347)
          annotation (Placement(transformation(extent={{-68,-30},{-88,-10}})));
        IdealValveResistance tricuspidValve(Pknee=0, _Ron(displayUnit=
                "(mmHg.s)/ml") = 3159740.5817355)
          annotation (Placement(transformation(extent={{-62,24},{-42,44}})));
        Inertia Lav(I(displayUnit="mmHg.s2/ml") = 16250.665802014,
            volumeFlow_start(displayUnit="m3/s") = -1.4e-8) annotation (
            Placement(transformation(
              extent={{-10,-10},{10,10}},
              rotation=180,
              origin={-44,-20})));
        Inertia Lpv(I(displayUnit="mmHg.s2/ml") = 19822.372560862,
            volumeFlow_start(displayUnit="m3/s") = -1.9e-9)
          annotation (Placement(transformation(extent={{32,24},{52,44}})));
        IdealValveResistance pulmonaryValve(Pknee=0, _Ron(displayUnit=
                "(mmHg.s)/ml") = 733273.1307825)
          annotation (Placement(transformation(extent={{62,24},{82,44}})));
          ElasticVesselElastance pulmonaryArteries(
          ZeroPressureVolume=0,
          useExternalPressureInput=true,
          volume_start=3.904e-05,
          Elastance(displayUnit="Pa/m3") = 49195960.956135)
          annotation (Placement(transformation(extent={{102,24},{122,44}})));
        Resistor Rpul(Resistance(displayUnit="(mmHg.s)/ml") = 20691634.526808)
          annotation (Placement(transformation(
              extent={{-10,-10},{10,10}},
              rotation=270,
              origin={114,4})));
      ElasticVesselElastance pulmonaryVeins(
          ZeroPressureVolume=0,
          useExternalPressureInput=true,
          volume_start=0.0008269,
          Elastance(displayUnit="Pa/m3") = 973253.4281295)
          annotation (Placement(transformation(extent={{104,-30},{124,-10}})));
        IdealValveResistance mitralValve(Pknee=0, _Ron(displayUnit=
                "(mmHg.s)/ml") = 2106493.721157)
          annotation (Placement(transformation(extent={{52,-30},{32,-10}})));
        Inertia Ltc(I(displayUnit="mmHg.s2/ml") = 10678.18997523,
            volumeFlow_start(displayUnit="m3/s") = 0.0001372)
          annotation (Placement(transformation(extent={{-88,24},{-68,44}})));
        Inertia Lmt(I(displayUnit="mmHg.s2/ml") = 10261.557514558,
            volumeFlow_start(displayUnit="m3/s") = 0.0001141) annotation (
            Placement(transformation(
              extent={{-10,-10},{10,10}},
              rotation=180,
              origin={70,-20})));
        Physiolibrary.Types.Constants.FrequencyConst HR(k=1.2)
          annotation (Placement(transformation(extent={{-114,-76},{-98,-62}})));
        replaceable
        Modelica.Blocks.Sources.Constant            IntraThoracicPressure(k=-533.28954966)
          constrainedby Modelica.Blocks.Interfaces.SO
          annotation (Placement(transformation(extent={{38,8},{50,20}})),
            __Dymola_choicesAllMatching=true);
        Components.Subsystems.Heart.Auxiliary.Smith_VentricularInteraction_flat
          ventricularInteraction_flat(
          lambdalv=33000,
          lambdaperi=30000,
          lambdas(displayUnit="1/m3") = 435000,
          lambdarv(displayUnit="1/m3") = 23000,
          Essept0(displayUnit="mmHg/ml") = 6499999676.0309,
          V0peri=0.0002,
          Pi0sept=148.00118226939,
          Pi0rv=28.757638965416,
          Pi0lv=16.038683206025,
          Pi0peri=66.701190423724,
          Esrv0=77993596.637775,
          Eslv0=383941811.27772)
          annotation (Placement(transformation(extent={{-18,-12},{20,28}})));
        Modelica.Blocks.Logical.Switch switch1
          annotation (Placement(transformation(extent={{-46,-70},{-26,-50}})));
        Modelica.Blocks.Sources.BooleanExpression useClosedLoopHR
          annotation (Placement(transformation(extent={{-86,-72},{-66,-52}})));
        arteries arteries1 annotation (Placement(transformation(rotation=0, extent={{-106,
                  -30},{-126,-10}})));
        Components.Basic.variable_arterial_resistance
          variable_arterial_resistance(useVariableResistance=true, alphaR=5)
          annotation (Placement(transformation(extent={{-90,-52},{-110,-32}})));
        Components.Signals.pressure_envelope pressure_envelope
          annotation (Placement(transformation(extent={{-150,-10},{-158,-2}})));
      equation
        connect(arteries1.q_out,
                            venaCava.q_in) annotation (Line(
            points={{-126,-20},{-134,-20},{-134,34},{-120,34}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(pulmonaryValve.q_out, pulmonaryArteries.q_in) annotation (Line(
            points={{82,34},{112,34}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(pulmonaryArteries.q_in, Rpul.q_in) annotation (Line(
            points={{112,34},{114,34},{114,14}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Rpul.q_out, pulmonaryVeins.q_in) annotation (Line(
            points={{114,-6},{114,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(venaCava.q_in, Ltc.q_in) annotation (Line(
            points={{-120,34},{-88,34}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(pulmonaryVeins.q_in, Lmt.q_in) annotation (Line(
            points={{114,-20},{80,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Lav.q_out, aorticValve.q_in) annotation (Line(
            points={{-54,-20},{-68,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Ltc.q_out, tricuspidValve.q_in) annotation (Line(
            points={{-68,34},{-62,34}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Lpv.q_out, pulmonaryValve.q_in) annotation (Line(
            points={{52,34},{62,34}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(mitralValve.q_in, Lmt.q_out) annotation (Line(
            points={{52,-20},{60,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(tricuspidValve.q_out, ventricularInteraction_flat.rvflow)
          annotation (Line(
            points={{-42,34},{0.62,34},{0.62,28}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(Lpv.q_in, ventricularInteraction_flat.rvflow) annotation (Line(
            points={{32,34},{0.62,34},{0.62,28}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(ventricularInteraction_flat.lvflow, Lav.q_in) annotation (Line(
            points={{1,-12},{2,-12},{2,-20},{-34,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(mitralValve.q_out, Lav.q_in) annotation (Line(
            points={{32,-20},{-34,-20}},
            color={0,0,0},
            thickness=1,
            smooth=Smooth.None));
        connect(IntraThoracicPressure.y, ventricularInteraction_flat.Pth)
          annotation (Line(
            points={{50.6,14},{58,14},{58,8},{16.58,8}},
            color={0,190,190},
            smooth=Smooth.None));
        connect(pulmonaryArteries.externalPressure, IntraThoracicPressure.y)
          annotation (Line(
            points={{120,42},{120,46},{86,46},{86,14},{50.6,14}},
            color={0,190,190},
            smooth=Smooth.None));
        connect(pulmonaryVeins.externalPressure, IntraThoracicPressure.y)
          annotation (Line(
            points={{122,-12},{122,14},{50.6,14}},
            color={0,190,190},
            smooth=Smooth.None));
        connect(aorticValve.q_out,arteries1.port_a)        annotation (Line(
            points={{-88,-20},{-106,-20}},
            color={0,0,0},
            thickness=1));
        connect(arteries1.thoracic_pressure,       ventricularInteraction_flat.Pth)
          annotation (Line(points={{-106.333,-30},{30,-30},{30,8},{16.58,8}},
                                                                          color={
                0,0,127}));
        connect(switch1.y, ventricularInteraction_flat.HR) annotation (Line(
              points={{-25,-60},{-18,-60},{-18,8},{-14.2,8}}, color={0,0,127}));
        connect(switch1.u3, HR.y) annotation (Line(points={{-48,-68},{-64,-68},{
                -64,-69},{-96,-69}}, color={0,0,127}));
        connect(switch1.u1,arteries1.HR)        annotation (Line(points={{-48,-52},
                {-126.667,-52},{-126.667,-30}},
                                            color={0,0,127}));
        connect(useClosedLoopHR.y, switch1.u2) annotation (Line(points={{-65,-62},
                {-56,-62},{-56,-60},{-48,-60}}, color={255,0,255}));
        connect(arteries1.phi,       ventricularInteraction_flat.phi) annotation (
           Line(points={{-117,-10},{-100,-10},{-100,24},{-14.2,24}},
              color={0,0,127}));
        connect(arteries1.phi,variable_arterial_resistance. phi) annotation (
            Line(points={{-117,-10},{-100,-10},{-100,-36},{-88,-36},{-88,-42},{-90.6,-42}},
                                                                           color={0,0,
                127}));
        connect(variable_arterial_resistance.resistance_modifier, arteries1.resistance_modifier)
          annotation (Line(points={{-110,-42},{-114,-42},{-114,-34},{-113.333,
                -34},{-113.333,-30}},
                       color={0,0,127}));
        connect(ventricularInteraction_flat.beat, pressure_envelope.beat)
          annotation (Line(points={{-14.2,-4},{-150,-4}}, color={255,0,255}));
        connect(arteries1.p, pressure_envelope.p) annotation (Line(points={{-126,
                -10},{-138,-10},{-138,-8},{-150,-8}}, color={0,0,127}));
        annotation (
          Diagram(coordinateSystem(preserveAspectRatio=false, extent={{-160,-100},
                  {160,100}})),
          Icon(coordinateSystem(extent={{-160,-100},{160,100}})),
          Documentation(info="<html>
<p>Cardiovascular model implemented per description of Smith et al.</p>
<p>[12] B. W. Smith, J. G. Chase, R. I. Nokes, G. M. Shaw, G. Wake, Minimal Haemodynamic System Model Including Ventricular Interaction and Valve Dynamics., Medical Engineering &AMP; Physics 26 (2) (2004) 131&ndash;139. doi:10.1016/j.medengphy.2003.10.001.</p>
<p>[13] CellML implementation at URL:  http://models.cellml.org/exposure/9d046663ba5cac5c8a61ac146183614b/smith_chase_nokes_shaw_wake_2004.cellml/view</p>
</html>"),experiment(StopTime=50, __Dymola_NumberOfIntervals=1500));
      end HemodynamicsSmith_shallow;

      model Valsalva
        extends HemodynamicsSmith_shallow(
          venaCava(
            volume_start=1e-5,
            useComplianceInput=true,
            Elastance(displayUnit="mmHg/ml") = 7999343.2449),
          redeclare Modelica.Blocks.Sources.Trapezoid IntraThoracicPressure(
            amplitude=4520,
            rising=1,
            width=20,
            falling=1,
            period=100,
            nperiod=0,
            offset=-530,
            startTime=30),
          arteries1(arteries_ADAN86(
              aortic_arch_C46(baroreceptor(epsilon_start=1.004, s_start=0.9339)),
              internal_carotid_R8_A(baroreceptor(epsilon_start=1.0013, s_start=
                      0.9712)),
              baroreflex(
                phi(start=0.25),
                f1=0.015,
                g=0.3,
                resetAt=0.0))),
          useClosedLoopHR(y=true));

        Components.Basic.venousVariableCompliance VenousVariableCompliance(
            useVariableCompliance=false) annotation (Placement(transformation(
              rotation=0,
              extent={{7,-6.00002},{-7,6.00001}},
              origin={-107,48})));
      equation
        connect(VenousVariableCompliance.compliance, venaCava.compliance)
          annotation (Line(points={{-114,48},{-120,48},{-120,42}}, color={0,0,127}));
        connect(arteries1.phi, VenousVariableCompliance.phi) annotation (
            Line(points={{-117,-10},{-100,-10},{-100,48}},   color={0,0,127}));
        annotation (experiment(
            StopTime=100,
            Interval=0.005,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end Valsalva;

      model ValsalvaTPData
        extends HemodynamicsSmith_shallow(
          venaCava(
            volume_start=1e-5,
            useComplianceInput=true,
            Elastance(displayUnit="mmHg/ml") = 7999343.2449),
          redeclare Components.Signals.DataFit.ThoracicPressureFromData
            IntraThoracicPressure,
          arteries1(arteries_ADAN86(
              aortic_arch_C46(baroreceptor(epsilon_start=1.004, s_start=0.9339)),
              internal_carotid_R8_A(baroreceptor(epsilon_start=1.0013, s_start=
                      0.9712)),
              baroreflex(
                phi(start=0.25),
                f1=0.015,
                g=0.3,
                resetAt=0.0))),
          useClosedLoopHR(y=true));

        inner Modelica.Units.SI.Angle Tilt=0;
        Components.Basic.venousVariableCompliance VenousVariableCompliance(
            useVariableCompliance=false) annotation (Placement(transformation(
              rotation=0,
              extent={{7,-6.00002},{-7,6.00001}},
              origin={-107,48})));
        Components.Signals.pressure_envelope pressure_envelope_data
          annotation (Placement(transformation(extent={{64,10},{72,2}})));
      equation
        connect(VenousVariableCompliance.compliance, venaCava.compliance)
          annotation (Line(points={{-114,48},{-120,48},{-120,42}}, color={0,0,127}));
        connect(arteries1.phi, VenousVariableCompliance.phi) annotation (
            Line(points={{-117,-10},{-100,-10},{-100,48}},   color={0,0,127}));
        connect(pressure_envelope_data.p, IntraThoracicPressure.aortic_pressure)
          annotation (Line(points={{64,8},{54,8},{54,11.6},{50.6,11.6}}, color={0,0,127}));
        connect(IntraThoracicPressure.beat, pressure_envelope_data.beat)
          annotation (Line(points={{50.6,8.6},{50.6,3.14},{64,3.14},{64,4}},
              color={255,0,255}));
        annotation (experiment(
            StopTime=80,
            Interval=0.05,
            Tolerance=1e-06,
            __Dymola_Algorithm="Dassl"));
      end ValsalvaTPData;

      model ValsalvaCL
        extends ValsalvaTPData(
          arteries1(arteries_ADAN86(
              aortic_arch_C46(baroreceptor(epsilon_start=0.9977, s_start=0.9312)),
              baroreflex(phi(start=0.251996), fiSN_start=0.251996),
              internal_carotid_R8_A(baroreceptor(epsilon_start=0.9989, s_start=
                      0.97)))),
          VenousVariableCompliance(
            useVariableCompliance=true,
            alphaZPV=2.5,
            Tau(displayUnit="s") = 6),
          venaCava(
            volume_start=0.00101,
            useV0Input=true,
            ZeroPressureVolume=0.001),
          IntraThoracicPressure(readData(ExperimentNr=2)),
          ventricularInteraction_flat(
            Escale=1,
            VS0lv=0.001,
            VS0rv=0.001,
            alphaE=1),
          variable_arterial_resistance(
            useVariableResistance=true,
            alphaR=2.5,
            Tau(displayUnit="s") = 3),
          pulmonaryArteries(useComplianceInput=false));

        Physiolibrary.Hydraulic.Sensors.PressureMeasure pressureMeasure
          annotation (Placement(transformation(extent={{108,-60},{128,-40}})));
        Modelica.Blocks.Math.Add add(k1=-1)
          annotation (Placement(transformation(extent={{134,-36},{154,-16}})));
        Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(
            usePressureInput=true)
          annotation (Placement(transformation(extent={{154,-64},{134,-44}})));

      equation

        connect(VenousVariableCompliance.zpv, venaCava.zeroPressureVolume)
          annotation (Line(points={{-113.618,53.4},{-128,53.4},{-128,42}}, color=
                {0,0,127}));
        connect(pulmonaryVeins.q_in, pressureMeasure.q_in) annotation (Line(
            points={{114,-20},{114,-56}},
            color={0,0,0},
            thickness=1));
        connect(pressureMeasure.pressure, add.u2) annotation (Line(points={{124,
                -54},{128,-54},{128,-32},{132,-32}}, color={0,0,127}));
        connect(pulmonaryVeins.externalPressure, add.u1) annotation (Line(points=
                {{122,-12},{126,-12},{126,-20},{132,-20}}, color={0,0,127}));
        connect(add.y, unlimitedVolume.pressure) annotation (Line(points={{155,
                -26},{154,-26},{154,-54}}, color={0,0,127}));
        annotation (experiment(StopTime=80, Interval=0.05));
      end ValsalvaCL;

      model ValsalvaReparametrization
        extends ValsalvaCL(pulmonaryArteries(Elastance(displayUnit="mmHg/ml")),
            pulmonaryVeins(volume_start=8.2e-05, Elastance(displayUnit="mmHg/ml")=
                 9732534.281295));
      end ValsalvaReparametrization;

      model arteries
        import ADAN_main;
        import ADAN_main;
        ADAN_main.Components.Subsystems.Systemic.ADAN86ArterialTree.arteries_with_volumes
          arteries_ADAN86(redeclare
            ADAN_main.Components.Obsolete.pv_jII_type_baroreceptor
            aortic_arch_C46, redeclare
            ADAN_main.Components.Obsolete.pv_type_baroreceptor
            internal_carotid_R8_A)
          annotation (Placement(transformation(extent={{-10,-10},{10,10}})));
        Physiolibrary.Hydraulic.Components.Resistor Rsys(Resistance(displayUnit="(Pa.s)/m3")=
               9e6) annotation (Placement(transformation(
              extent={{-10,-10},{10,10}},
              rotation=0,
              origin={26,10})));
        Physiolibrary.Hydraulic.Interfaces.HydraulicPort_b q_out annotation (
            Placement(transformation(rotation=0, extent={{50,-10},{70,10}})));
        Physiolibrary.Types.RealIO.FrequencyOutput HR annotation (Placement(
              transformation(rotation=0, extent={{54,-70},{74,-50}}),
              iconTransformation(extent={{54,-70},{74,-50}})));
        Physiolibrary.Types.RealIO.FractionOutput phi annotation (Placement(
              transformation(rotation=0, extent={{-4,50},{16,70}})));
        Physiolibrary.Hydraulic.Interfaces.HydraulicPort_a port_a annotation (
            Placement(transformation(rotation=0, extent={{-70,-10},{-50,10}})));
        Physiolibrary.Types.RealIO.PressureInput thoracic_pressure annotation (
            Placement(transformation(rotation=0, extent={{-68,-70},{-48,-50}}),
              iconTransformation(extent={{-68,-70},{-48,-50}})));
        Physiolibrary.Types.RealIO.PressureInput resistance_modifier annotation (Placement(transformation(extent={{-26,-70},
                  {-6,-50}}),  iconTransformation(extent={{-26,-70},{-6,-50}})));
        Physiolibrary.Types.RealIO.PressureOutput p=arteries_ADAN86.aortic_arch_C46.p_in   "aortic pressure" annotation (
            Placement(transformation(rotation=0, extent={{50,50},{70,70}})));
      equation
        connect(arteries_ADAN86.port_b_superior, Rsys.q_in) annotation (Line(
            points={{10,10},{16,10}},
            color={0,0,0},
            thickness=1));
        connect(q_out, Rsys.q_out) annotation (Line(
            points={{60,0},{44,0},{44,10},{36,10}},
            color={0,0,0},
            thickness=1));
        connect(HR, arteries_ADAN86.HR) annotation (Line(points={{64,-60},{0,-60},{0,-10},
                {0.2,-10}}, color={0,0,127}));
        connect(phi, arteries_ADAN86.phi)
          annotation (Line(points={{6,60},{0,60},{0,10},{0.4,10}}, color={0,0,127}));
        connect(port_a, arteries_ADAN86.port_a) annotation (Line(
            points={{-60,0},{-10,0}},
            color={0,0,0},
            thickness=1));
        connect(q_out, arteries_ADAN86.port_b_inferior) annotation (Line(
            points={{60,0},{44,0},{44,-10},{10,-10}},
            color={0,0,0},
            thickness=1));
        connect(thoracic_pressure, arteries_ADAN86.thoracic_pressure_input)
          annotation (Line(points={{-58,-60},{-54,-60},{-54,-10},{-10,-10}},
              color={0,0,127}));
        connect(arteries_ADAN86.resistance_modifier, resistance_modifier) annotation (
           Line(points={{-4.8,-10},{-6,-10},{-6,-60},{-16,-60}}, color={0,0,127}));
        annotation (Diagram(coordinateSystem(extent={{-60,-60},{60,60}})), Icon(
              coordinateSystem(extent={{-60,-60},{60,60}})));
      end arteries;
    end SmithExtended;

  end ArterialTree;

  package SystemicTree

    model CardiovascularSystem "Base class for all use cases, including calibrated model in steadz state with all outputs. Intended to be an empty placeholder only for extending"
    //   extends ADAN_main.SystemicTree.Variations.Renals.Renals_HF_nobaro1_4_baro;
     // extends Auxiliary.partialCVS_optimized_ss;
     extends ADAN_main.SystemicTree.Identification.SteadyState.Baseline_renals_optim;

      annotation (experiment(
          StopTime=60,
          Interval=0.01,
          Tolerance=1e-06,
          __Dymola_Algorithm="Cvode"), __OpenModelica_simulationFlags(lv="LOG_STATS",
            s="cvode"));
    end CardiovascularSystem;

    package Auxiliary
      partial model partialCVS "Base class for circulatory model. Dont overuse parametrization here, as it gets overridden when redeclaring."
        extends Physiolibrary.Icons.CardioVascular;
        replaceable Components.Subsystems.Systemic.Postures.SystemicAV_SupineTilt
          SystemicComponent(
          UseThoracic_PressureInput=true,
          UsePhi_Input=true) constrainedby
          Components.Subsystems.Systemic.partialSystemic
                     annotation (
            __Dymola_choicesAllMatching=true, Placement(transformation(extent={{-58,18},
                  {18,48}})));

      public
        replaceable Components.Subsystems.Heart.Heart_TriSegMechanicsSimple
          heartComponent(
          UseFrequencyInput=true,
          UseThoracic_PressureInput=true,
          UsePhiInput=true,
          mitralValve(calculateAdditionalMetrics=true),
          aorticValve(calculateAdditionalMetrics=true),
          pericardium(V0=0.0004)) constrainedby
          Components.Subsystems.Heart.partialHeart
          annotation (Placement(transformation(extent={{-10,-32},{-30,-12}})));
        replaceable Components.Subsystems.Pulmonary.PulmonaryTriSeg_NonLinear pulmonaryComponent(
            UseThoracic_PressureInput=true)
        constrainedby Components.Subsystems.Pulmonary.partialPulmonary annotation (
            Placement(transformation(extent={{-10,-62},{-30,-42}})));
      Modelica.Blocks.Sources.Trapezoid phi_fixed(
          amplitude=0.75,
          rising=2,
          width=20,
          falling=2,
          period=200,
          nperiod=0,
          offset=0.25,
          startTime=20)
          "Phi for when the model is not using the autonomous feedback phi from baroreflex"
          annotation (Placement(transformation(extent={{-56,74},{-36,94}})));
        inner Components.Settings settings(heart_R_RA=settings.heart_R_LA)
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
        Components.Signals.ConditionalConnection condHRPhi(
          disconnectedValue=settings.phi0,
          delayIntegral_Enabled=false,
          delayInt_Act=settings.Td_phi_hr,
          phi0=settings.phi0) annotation (Placement(transformation(extent={{56,
                  -36.7408},{44,-26.0741}})));
        replaceable Components.Subsystems.Baroreflex.HeartRate_HRMinMax
                                                               heartRate(phi0=
              settings.phi0,
          HR_max=settings.HR_max,
          HR_nom=settings.HR_nominal)
          constrainedby Components.Subsystems.Baroreflex.partialHeartRate
          annotation (Placement(transformation(extent={{18,-38},{6,-26}})));
      replaceable
      Modelica.Blocks.Sources.Trapezoid thoracic_pressure_ramp(
            amplitude=40*133.32,
            rising=0.1,
            width=14.8,
            falling=0.1,
            period=60,
            nperiod=-1,
            startTime=20) constrainedby Modelica.Blocks.Interfaces.SO
          annotation (Placement(transformation(extent={{-100,-72},{-80,-52}})));
        Components.Signals.ConditionalConnection condTP_PC(
          disconnectedValue=0,
          disconnected=true,
          phi_gain=settings.pulm_tp_pleural_frac,
          const_offset=0) "Thoracic pressure effect on pericardium."
          annotation (Placement(transformation(extent={{-69,-61.3333},{-55,
                  -49.3333}})));
        Components.Signals.ConditionalConnection condSystemicPhi(
          disconnectedValue=0.25,
          disconnected=false,
          delayIntegral_Enabled=false,
          delayInt_Act=settings.Td_phi_syst,
          phi0=settings.phi0) annotation (Placement(transformation(extent={{56,
                  15.5556},{44,25.5556}})));
        Modelica.Blocks.Logical.Switch switch1
          annotation (Placement(transformation(extent={{16.25,87.75},{35.75,68.25}})));
        Modelica.Blocks.Sources.BooleanExpression useAutonomousPhi(y=true)
          annotation (Placement(transformation(extent={{-26,68},{-6,88}})));
        Components.Signals.ConditionalConnection condHeartPhi(
          disconnectedValue=0.25,
          disconnected=false,
          delayIntegral_Enabled=false,
          delayInt_Act=settings.Td_phi_heart,
          uMin=0.2,
          phi0=settings.phi0) annotation (Placement(transformation(extent={{56,
                  -20.7408},{44,-10.0741}})));
        Components.Signals.ConditionalConnection condTP_IP(
          disconnectedValue=0,
          disconnected=true,
          phi0=0,
          phi_gain=1,
          const_offset=0)
          "Thoracic pressure effect on intra-pleural circulatory (i.e. lung tissue only)"
          annotation (Placement(transformation(extent={{-69,-81.3333},{-55,
                  -69.3333}})));
        Components.Signals.ConditionalConnection condTP_EP1(
          disconnectedValue=0,
          disconnected=true,
          phi_gain=settings.pulm_tp_pleural_frac,
          const_offset=0) "Thoracic pressure effect on extra-pleural circulatory"
          annotation (Placement(transformation(extent={{-69,-43.3333},{-55,
                  -31.3333}})));
      //   parameter Real heart_vntr_Lsref=1.9 " Resting SL, micron ";
      //   parameter Real heart_vntr_L0=0.907 "micron";
      //   parameter Real heart_vntr_SLcollagen=2.25;
      //   parameter Real heart_vntr_SLrest=1.51 "microns";
      //   parameter Real baro_a=0.0651;
      //   parameter Real baro_b=0.2004;
      //   parameter Real baro_f0=300 "Base firing frequency";
      equation
        connect(SystemicComponent.port_b, heartComponent.sv) annotation (Line(
            points={{18,28},{20,28},{20,-12},{-10,-12}},
            color={0,0,0},
            thickness=1));
        connect(heartComponent.sa, SystemicComponent.port_a) annotation (Line(
            points={{-30,-12},{-60,-12},{-60,28},{-58,28}},
            color={0,0,0},
            thickness=1));
        connect(heartComponent.pv, pulmonaryComponent.port_b) annotation (Line(
            points={{-30,-32},{-40,-32},{-40,-52},{-30,-52}},
            color={0,0,0},
            thickness=1));
        connect(pulmonaryComponent.port_a, heartComponent.pa) annotation (Line(
            points={{-10,-52},{0,-52},{0,-32},{-10,-32}},
            color={0,0,0},
            thickness=1));
        connect(condHRPhi.y, heartRate.phi) annotation (Line(points={{43.4,
                -31.4075},{30,-31.4075},{30,-32},{18,-32}},
                                            color={0,0,127}));
        connect(heartRate.HR, heartComponent.frequency_input)
          annotation (Line(points={{5.88,-32},{2,-32},{2,-22},{-10,-22}},
                                                           color={0,0,127}));
        connect(thoracic_pressure_ramp.y,condTP_PC. u) annotation (Line(points={{-79,-62},
                {-74,-62},{-74,-55.3333},{-70.4,-55.3333}},
                                                  color={0,0,127}));
        connect(condTP_PC.y, heartComponent.thoracic_pressure_input) annotation (Line(
              points={{-54.3,-55.3333},{-20,-55.3333},{-20,-32}},
                                                        color={0,0,127}));
        connect(SystemicComponent.phi_input, condSystemicPhi.y) annotation (Line(
              points={{-16,20},{14,20},{14,20.5556},{43.4,20.5556}},
                                                           color={0,0,127}));
        connect(useAutonomousPhi.y,switch1. u2) annotation (Line(points={{-5,78},{14.3,
                78}},                    color={255,0,255}));
        connect(SystemicComponent.phi_baroreflex, switch1.u1) annotation (Line(points={{-27.4,
                45.4},{-27.4,46},{-26,46},{-26,70.2},{14.3,70.2}},        color={0,0,127}));
        connect(phi_fixed.y,switch1. u3) annotation (Line(points={{-35,84},{-32,84},{-32,
                90},{4,90},{4,86},{10,86},{10,85.8},{14.3,85.8}},
                                    color={0,0,127}));
        connect(condHeartPhi.y, heartComponent.phi) annotation (Line(points={{43.4,
                -15.4075},{16,-15.4075},{16,-16},{-10,-16}},
                                                      color={0,0,127}));
        connect(switch1.y, condHRPhi.u) annotation (Line(points={{36.725,78},{
                80,78},{80,-31.4075},{57.2,-31.4075}},
                                             color={0,0,127}));
        connect(switch1.y, condSystemicPhi.u) annotation (Line(points={{36.725,
                78},{80,78},{80,20.5556},{57.2,20.5556}},
                                                color={0,0,127}));
        connect(switch1.y, condHeartPhi.u) annotation (Line(points={{36.725,78},
                {80,78},{80,-15.4075},{57.2,-15.4075}},
                                              color={0,0,127}));
        connect(condTP_IP.y, pulmonaryComponent.thoracic_pressure) annotation (Line(
              points={{-54.3,-75.3333},{-40,-75.3333},{-40,-62},{-20,-62}},
                                                                  color={0,0,127}));
        connect(condTP_IP.u, thoracic_pressure_ramp.y) annotation (Line(points={{-70.4,
                -75.3333},{-74,-75.3333},{-74,-62},{-79,-62}}, color={0,0,127}));
        connect(condTP_EP1.y, SystemicComponent.thoracic_pressure_input)
          annotation (Line(points={{-54.3,-37.3333},{-46,-37.3333},{-46,20},{
                -34,20}},
              color={0,0,127}));
        connect(condTP_EP1.u, condTP_PC.u) annotation (Line(points={{-70.4,
                -37.3333},{-74,-37.3333},{-74,-55.3333},{-70.4,-55.3333}},
                                                  color={0,0,127}));
        annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
              coordinateSystem(preserveAspectRatio=false)),
          experiment(
            StopTime=60,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end partialCVS;

      partial model partialCVS_EDPVR
        "Base class for circulatory model. Dont overuse parametrization here, as it gets overridden when redeclaring. Based on EDPVR identification."
        extends Physiolibrary.Icons.CardioVascular;
        replaceable Components.Subsystems.Systemic.Postures.SystemicAV_SupineTilt
          SystemicComponent(UseThoracic_PressureInput=false,
          UsePhi_Input=true) constrainedby
          Components.Subsystems.Systemic.partialSystemic
                     annotation (
            __Dymola_choicesAllMatching=true, Placement(transformation(extent={{-58,18},
                  {18,48}})));

      public
        replaceable Components.Subsystems.Heart.Heart_TriSegMechanicsSimple
          heartComponent(
          UseFrequencyInput=true,
          UseThoracic_PressureInput=false,
          UsePhiInput=true,
          mitralValve(calculateAdditionalMetrics=true),
          aorticValve(calculateAdditionalMetrics=true),
          pericardium(V0=0.0004)) constrainedby
          Components.Subsystems.Heart.partialHeart
          annotation (Placement(transformation(extent={{-16,-32},{-36,-12}})));
        replaceable Components.Subsystems.Pulmonary.PulmonaryTriSeg_NonLinear pulmonaryComponent(
            UseThoracic_PressureInput=false)
        constrainedby Components.Subsystems.Pulmonary.partialPulmonary annotation (
            Placement(transformation(extent={{-14,-62},{-34,-42}})));
      Modelica.Blocks.Sources.Trapezoid phi_fixed(
          amplitude=0.75,
          rising=2,
          width=20,
          falling=2,
          period=200,
          nperiod=0,
          offset=0.25,
          startTime=20)
          "Phi for when the model is not using the autonomous feedback phi from baroreflex"
          annotation (Placement(transformation(extent={{-56,74},{-36,94}})));
        inner Components.Settings settings(heart_R_RA=settings.heart_R_LA)
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
        Components.Signals.ConditionalConnection condHRPhi(
          disconnectedValue=settings.phi0,
          delayTransport_Enabled=false,
          delayTransport_Time=settings.Td_phi_hr,
          delayIntegral_Enabled=false,
          delayInt_Act=settings.Td_phi_hr,
          phi0=settings.phi0) annotation (Placement(transformation(extent={{56,
                  -36.7408},{44,-26.0741}})));
        replaceable Components.Subsystems.Baroreflex.HeartRate_HRMinMax
                                                               heartRate(phi0=
              settings.phi0,
          HR_max=settings.HR_max,
          HR_nom=settings.HR_nominal)
          constrainedby Components.Subsystems.Baroreflex.partialHeartRate
          annotation (Placement(transformation(extent={{14,-36},{2,-24}})));
        Components.Signals.ConditionalConnection condSystemicPhi(
          disconnectedValue=0.25,
          disconnected=false,
          delayTransport_Enabled=false,
          delayTransport_Time=settings.Td_phi_syst,
          delayIntegral_Enabled=false,
          delayInt_Act=settings.Td_phi_syst,
          phi0=settings.phi0) annotation (Placement(transformation(extent={{56,
                  15.5556},{44,25.5556}})));
        Modelica.Blocks.Logical.Switch switch1
          annotation (Placement(transformation(extent={{16.25,87.75},{35.75,68.25}})));
        Modelica.Blocks.Sources.BooleanExpression useAutonomousPhi(y=true)
          annotation (Placement(transformation(extent={{-26,68},{-6,88}})));
        Components.Signals.ConditionalConnection condHeartPhi(
          disconnectedValue=0.25,
          disconnected=false,
          delayTransport_Enabled=false,
          delayTransport_Time=settings.Td_phi_heart,
          delayIntegral_Enabled=false,
          delayInt_Act=settings.Td_phi_heart,
          uMin=0.2,
          phi0=settings.phi0) annotation (Placement(transformation(extent={{56,
                  -20.7408},{44,-10.0741}})));
      //   parameter Real heart_vntr_Lsref=1.9 " Resting SL, micron ";
      //   parameter Real heart_vntr_L0=0.907 "micron";
      //   parameter Real heart_vntr_SLcollagen=2.25;
      //   parameter Real heart_vntr_SLrest=1.51 "microns";
      //   parameter Real baro_a=0.0651;
      //   parameter Real baro_b=0.2004;
      //   parameter Real baro_f0=300 "Base firing frequency";
      equation
        connect(SystemicComponent.port_b, heartComponent.sv) annotation (Line(
            points={{18,28},{24,28},{24,-12},{-16,-12}},
            color={0,0,0},
            thickness=1));
        connect(heartComponent.sa, SystemicComponent.port_a) annotation (Line(
            points={{-36,-12},{-64,-12},{-64,28},{-58,28}},
            color={0,0,0},
            thickness=1));
        connect(heartComponent.pv, pulmonaryComponent.port_b) annotation (Line(
            points={{-36,-32},{-42,-32},{-42,-52},{-34,-52}},
            color={0,0,0},
            thickness=1));
        connect(pulmonaryComponent.port_a, heartComponent.pa) annotation (Line(
            points={{-14,-52},{-8,-52},{-8,-32},{-16,-32}},
            color={0,0,0},
            thickness=1));
        connect(condHRPhi.y, heartRate.phi) annotation (Line(points={{43.4,
                -31.4075},{26,-31.4075},{26,-30},{14,-30}},
                                            color={0,0,127}));
        connect(heartRate.HR, heartComponent.frequency_input)
          annotation (Line(points={{1.88,-30},{-16,-30},{-16,-22}},
                                                           color={0,0,127}));
        connect(SystemicComponent.phi_input, condSystemicPhi.y) annotation (Line(
              points={{-16,20},{14,20},{14,20.5556},{43.4,20.5556}},
                                                           color={0,0,127}));
        connect(useAutonomousPhi.y,switch1. u2) annotation (Line(points={{-5,78},{14.3,
                78}},                    color={255,0,255}));
        connect(SystemicComponent.phi_baroreflex, switch1.u1) annotation (Line(points=
               {{-27.4,45.4},{-27.4,46},{-26,46},{-26,70.2},{14.3,70.2}}, color={0,0,127}));
        connect(phi_fixed.y,switch1. u3) annotation (Line(points={{-35,84},{-32,84},{-32,
                90},{4,90},{4,86},{10,86},{10,85.8},{14.3,85.8}},
                                    color={0,0,127}));
        connect(condHeartPhi.y, heartComponent.phi) annotation (Line(points={{43.4,
                -15.4075},{8,-15.4075},{8,-16},{-16,-16}},
                                                      color={0,0,127}));
        connect(switch1.y, condHRPhi.u) annotation (Line(points={{36.725,78},{
                80,78},{80,-31.4075},{57.2,-31.4075}},
                                             color={0,0,127}));
        connect(switch1.y, condSystemicPhi.u) annotation (Line(points={{36.725,
                78},{80,78},{80,20.5556},{57.2,20.5556}},
                                                color={0,0,127}));
        connect(switch1.y, condHeartPhi.u) annotation (Line(points={{36.725,78},
                {80,78},{80,-15.4075},{57.2,-15.4075}},
                                              color={0,0,127}));
        annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
              coordinateSystem(preserveAspectRatio=false)),
          experiment(
            StopTime=60,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end partialCVS_EDPVR;

      model partialCVS_optimized

        extends partialCVS_EDPVR(settings(
            heart_vntr_D_A_maxAct =          3.200005e+03,
            heart_vntr_D_0_maxAct =          1.005000e-03,
            heart_vntr_TS_maxAct =          1.647740e-01,
            heart_vntr_TR_maxAct =          6.597690e-02,
            eta_vc =          3.501054e-01,
            baro_f1 =          3.028125e-03,
            tissues_eta_Ra =          3.945225e+00,
            tissues_eta_Rv =          3.206250e+00,
            tissues_eta_C =          9.908013e-01,
            tissues_chi_Ra =          2.681250e+01,
            tissues_chi_Rv =          2.084375e+01,
            tissues_chi_C =          1.687500e-01,
            veins_delayed_activation=false,
            baro_tau_s(displayUnit="s") = 93,
            V_PV_init=0,
            heart_R_LA(displayUnit="(mmHg.s)/ml") = 1.655068e+06,
            heart_R_vlv(displayUnit="(mmHg.s)/ml") = 7.723515e+05,
            heart_vntr_D_0=7.479470e+00,
            heart_vntr_D_A=1.298533e+03,
            heart_vntr_TS=3.246875e-01,
            heart_vntr_TR(displayUnit="s") = 4.031250e-01,
            heart_atr_D_0=2.651364e+07,
            heart_atr_D_A=7.621357e+07,
            syst_TPR=1.287333e+08,
            syst_TR_frac(displayUnit="1") = 5.227710e+00,
            pulm_C_PA=1.635189e-08,
            pulm_R(displayUnit="(Pa.s)/m3") = 1.019753e+07,
            heart_vntr_k_passive=5.000000e+00,
            heart_vntr_SLcollagen=2.087500e+00,
            heart_vntr_PConcollagen=2.642812e+01,
            heart_vntr_PExpcollagen=2.481250e+00,
            heart_atr_TS=0.08,
            dummy=2,
            baro_fsn(displayUnit="1/min") = 0.0355333333,
            syst_art_k_E=0.4402957,
            HR_max=3.1666666666667,
            chi_phi=0.7,
            heart_R_RA(displayUnit="(dyn.s)/cm5") = settings.heart_R_LA,
            pulm_q_nom_maxq(displayUnit="l/min") = 0.00033333333333333,
            initByPressure=false,
            veins_UseNonLinearVeins=true,
            veins_linearE_rel=765,
            veins_linearV0_rel=0.793,
            veins_activation_tau=1,
            heart_vntr_Tact_maxAct=8.000000e-02,
            heart_vntr_Lsref=1.9,
            heart_atr_TR=2.631250e-01,
            heart_vntr_Tact=8.000000e-02,
            syst_tissues_hydrostaticLevel_correction=1,
            tissues_SV_nom=0.000695,
            pulm_C_PV=3.194206e-07,
            syst_abd_P_th_ratio=0.8,
            heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
            heart_vntr_L0=1.6,
            pulm_P_PV_nom=1333.22387415,
            height=1.7132,
            tissues_CO_nom=0.000105,
            EvaluateFunctionalParams=true,
            HR_nominal=1.0666666666667,
            UseNonLinear_TissuesCompliance=true,
            baro_g=0.606258,
            baro_useAbsolutePressureTerm=false,
            baro_xi_delta0=2.688000e-01,
            pulm_R_exp=9.150000e-01,
            syst_art_UseVasoconstrictionEffect=true,
            tissues_UseStraighteningReaction2Phi=true,
            tissues_ZPV_nom=0.00210124,
            tissues_gamma=0.5,
            tissues_tau_R(displayUnit="s") = 0,
            veins_C_phi=0.09),         useAutonomousPhi(y=true));
        annotation (__Dymola_Commands(file(ensureSimulated=true) = "\"EvaluateSimulation.mos\""
              "EvaluateUseCases"));
      end partialCVS_optimized;

      model partialCVS_optimized_ss
        "Steady state initialization from 2021-03-22 11:40:14.038774 at time 360.0"
        extends ADAN_main.SystemicTree.Auxiliary.partialCVS_outputs(
          heartComponent(
            aorticValve(
              _Ron(displayUnit="(Pa.s)/m3") = 7.971886e+05,
              open(start=false, fixed=true),
              BP_max(start=15047.65, fixed=true),
              BP_min(start=11532.416, fixed=true),
              CO_acc(start=9.141051e-05, fixed=true),
              calculateAdditionalMetrics=true),
            tricuspidValve(open(start=true, fixed=true)),
            pulmonaryValve(
              open(start=false, fixed=true),
              BP_max(start=0.0, fixed=true),
              BP_min(start=26600.0, fixed=true),
              CO_acc(start=0.0, fixed=true)),
            mitralValve(
              open(start=true, fixed=true),
              BP_max(start=1113.3982, fixed=true),
              BP_min(start=942.15027, fixed=true),
              CO_acc(start=5.9481652e-05, fixed=true)),
            ventricles(
              LV_wall(ym(start=3.3008697, fixed=true), SL(start=1.938651, fixed=true)),
              SEP_wall(SL(start=1.9807618, fixed=true)),
              RV_wall(SL(start=1.8905245, fixed=true)),
              V_LV(start=9.674789e-05, fixed=true),
              V_RV(start=8.8568e-05, fixed=true),
              currentWork_LV(start=1.3147972, fixed=true),
              currentWork_RV(start=0.23436068, fixed=true)),
            ra(volume(start=8.8254565e-06, fixed=true), currentWork(start=8.026772,
                  fixed=true)),
            la(volume(start=1.979809e-05, fixed=true), currentWork(start=0.35237855,
                  fixed=true)),
            sa_node(cardiac_cycle(start=0.884947, fixed=true)),
            valveInertia_Mitral(enabled=false, l=0.005),
            idealValve_deactivable(open(start=true, fixed=true)),
            idealValve_deactivable1(open(start=true, fixed=true)),
            valveInertia_aortic(enabled=true, l=0.02),
            valveInertia_pulmonary(enabled=false),
            resistor(enable=false),
            resistor1(enable=false)),
          useAutonomousPhi(y=true),
          SystemicComponent(
            ascending_aorta_A(
              q(start=3.8719095e-06, fixed=true),
              vol1(start=8.070678e-06, fixed=true),
              vol2(start=8.07108e-06, fixed=true)),
            ascending_aorta_B(q_in(start=7.752585e-06, fixed=true), volume(start=2.508757e-05,
                  fixed=true)),
            ascending_aorta_C(q_in(start=1.1892152e-05, fixed=true), volume(start=2.320838e-05,
                  fixed=true)),
            ascending_aorta_D(q_in(start=1.846028e-05, fixed=true), volume(start=2.119409e-05,
                  fixed=true)),
            aortic_arch_C2(q_in(start=2.4359766e-05, fixed=true), volume(start=1.9396348e-05,
                  fixed=true)),
            brachiocephalic_trunk_C4(q_in(start=1.0679327e-06, fixed=true), volume(
                  start=1.3168819e-05, fixed=true)),
            aortic_arch_C46(q_in(start=2.857476e-05, fixed=true), volume(start=1.1498663e-05,
                  fixed=true)),
            aortic_arch_C64(q_in(start=3.2763313e-05, fixed=true), volume(start=7.897691e-06,
                  fixed=true)),
            aortic_arch_C94(q_in(start=3.069236e-05, fixed=true), volume(start=4.346698e-05,
                  fixed=true)),
            thoracic_aorta_C96(q_in(start=4.0688137e-05, fixed=true), volume(start=7.816586e-06,
                  fixed=true)),
            thoracic_aorta_C100(q_in(start=4.239365e-05, fixed=true), volume(start=6.017454e-06,
                  fixed=true)),
            thoracic_aorta_C104(q_in(start=4.3655968e-05, fixed=true), volume(start=1.13574315e-05,
                  fixed=true)),
            thoracic_aorta_C108(q_in(start=4.5842833e-05, fixed=true), volume(start=3.7333957e-06,
                  fixed=true)),
            thoracic_aorta_C112(q_in(start=4.653811e-05, fixed=true), volume(start=6.229157e-05,
                  fixed=true)),
            abdominal_aorta_C114(q_in(start=4.659059e-05, fixed=true), volume(start=1.2874332e-06,
                  fixed=true)),
            abdominal_aorta_C136(q_in(start=3.4045326e-05, fixed=true), volume(start=5.4068755e-06,
                  fixed=true)),
            abdominal_aorta_C164(q_in(start=2.4611865e-05, fixed=true), volume(start=1.6050404e-06,
                  fixed=true)),
            abdominal_aorta_C176(q_in(start=1.3252353e-05, fixed=true), volume(start=4.3167847e-06,
                  fixed=true)),
            abdominal_aorta_C188(q_in(start=1.9290894e-06, fixed=true), volume(start=1.7281012e-05,
                  fixed=true)),
            abdominal_aorta_C192(q_in(start=1.2510534e-06, fixed=true), volume(start=1.07259175e-05,
                  fixed=true)),
            celiac_trunk_C116(volume(start=0.00034059316, fixed=true), phi_delayed(
                  start=0.25378594, fixed=true)),
            renal_L166(volume(start=0.00030766928, fixed=true), phi_delayed(start=0.25378594,
                  fixed=true)),
            renal_R178(volume(start=0.00030490823, fixed=true), phi_delayed(start=0.25378594,
                  fixed=true)),
            common_iliac_R216(q_in(start=3.993164e-07, fixed=true), volume(start=8.855931e-06,
                  fixed=true)),
            internal_iliac_T1_R218(volume(start=0.0001674349, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            external_iliac_R220(q_in(start=-5.6010044e-06, fixed=true), volume(start=4.9496953e-06,
                  fixed=true)),
            femoral_R222(q_in(start=-4.9161563e-06, fixed=true), volume(start=1.411402e-06,
                  fixed=true)),
            profundus_T2_R224(volume(start=0.00019209895, fixed=true), phi_delayed(
                  start=0.25378594, fixed=true)),
            femoral_R226(q_in(start=-1.1232905e-05, fixed=true), volume(start=1.13322685e-05,
                  fixed=true)),
            popliteal_R228(q_in(start=-2.0564273e-06, fixed=true), volume(start=3.474142e-06,
                  fixed=true)),
            anterior_tibial_T3_R230(volume(start=2.5363706e-05, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            popliteal_R232(q_in(start=3.2306946e-07, fixed=true), volume(start=1.7848711e-07,
                  fixed=true)),
            tibiofibular_trunk_R234(q_in(start=4.0966268e-07, fixed=true), volume(
                  start=7.257386e-07, fixed=true)),
            posterior_tibial_T4_R236(volume(start=2.7553777e-05, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            common_iliac_L194(q_in(start=4.9551284e-07, fixed=true), volume(start=8.468505e-06,
                  fixed=true)),
            internal_iliac_T1_L196(volume(start=0.00016743637, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            external_iliac_L198(q_in(start=-5.5039895e-06, fixed=true), volume(start=4.94945e-06,
                  fixed=true)),
            femoral_L200(q_in(start=-4.8239845e-06, fixed=true), volume(start=1.4113288e-06,
                  fixed=true)),
            profundus_T2_L202(volume(start=0.00019209972, fixed=true), phi_delayed(
                  start=0.25378594, fixed=true)),
            femoral_L204(q_in(start=-1.1141473e-05, fixed=true), volume(start=1.13314045e-05,
                  fixed=true)),
            popliteal_L206(q_in(start=-2.0313817e-06, fixed=true), volume(start=3.4738355e-06,
                  fixed=true)),
            anterior_tibial_T3_L208(volume(start=2.5363699e-05, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            popliteal_L210(q_in(start=3.2615267e-07, fixed=true), volume(start=1.7847813e-07,
                  fixed=true)),
            tibiofibular_trunk_L212(q_in(start=4.1212033e-07, fixed=true), volume(
                  start=7.2572374e-07, fixed=true)),
            posterior_tibial_T4_L214(volume(start=2.7553791e-05, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            subclavian_R28(q_in(start=4.2812662e-06, fixed=true), volume(start=2.0194673e-06,
                  fixed=true)),
            subclavian_R30(q_in(start=2.5490683e-06, fixed=true), volume(start=2.6515029e-06,
                  fixed=true)),
            axillary_R32(q_in(start=3.1488526e-06, fixed=true), volume(start=3.0477704e-06,
                  fixed=true)),
            brachial_R34(q_in(start=3.586867e-06, fixed=true), volume(start=4.4681537e-06,
                  fixed=true)),
            ulnar_T2_R36(q_in(start=1.9579106e-06, fixed=true), volume(start=2.3776016e-07,
                  fixed=true)),
            ulnar_T2_R42(volume(start=5.795162e-05, fixed=true), phi_delayed(start=0.25378594,
                  fixed=true)),
            radial_T1_R44(volume(start=4.7595116e-05, fixed=true), phi_delayed(start=0.25378594,
                  fixed=true)),
            subclavian_L66(q_in(start=4.1387966e-06, fixed=true), volume(start=4.8143684e-06,
                  fixed=true)),
            subclavian_L78(q_in(start=2.9756661e-06, fixed=true), volume(start=1.972952e-06,
                  fixed=true)),
            axillary_L80(q_in(start=3.3676852e-06, fixed=true), volume(start=3.0556064e-06,
                  fixed=true)),
            brachial_L82(q_in(start=3.699919e-06, fixed=true), volume(start=1.4879852e-06,
                  fixed=true)),
            ulnar_T2_L84(q_in(start=1.966288e-06, fixed=true), volume(start=2.3780191e-07,
                  fixed=true)),
            ulnar_T2_L90(volume(start=5.7928195e-05, fixed=true), phi_delayed(start=0.25378594,
                  fixed=true)),
            radial_T1_L92(volume(start=5.0452905e-05, fixed=true), phi_delayed(start=0.25378594,
                  fixed=true)),
            common_carotid_R6_A(q_in(start=2.987729e-07, fixed=true), volume(start=4.955184e-06,
                  fixed=true)),
            common_carotid_R6_B(q_in(start=1.9940771e-06, fixed=true), volume(start=4.2253982e-06,
                  fixed=true)),
            common_carotid_R6_C(q_in(start=3.4522282e-06, fixed=true), volume(start=3.1563536e-06,
                  fixed=true)),
            internal_carotid_R8_A(q_in(start=2.1149858e-06, fixed=true), volume(start=
                   1.25376e-06, fixed=true)),
            internal_carotid_R8_B(q_in(start=2.2972552e-06, fixed=true), volume(start=
                   7.9418646e-07, fixed=true)),
            internal_carotid_R8_C(volume(start=6.8532376e-05, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            external_carotid_T2_R26(volume(start=6.8797475e-05, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            common_carotid_L48_A(q_in(start=-1.1233657e-06, fixed=true), volume(start=
                   5.370309e-06, fixed=true)),
            common_carotid_L48_B(q_in(start=5.902771e-07, fixed=true), volume(start=4.707705e-06,
                  fixed=true)),
            common_carotid_L48_C(q_in(start=2.107219e-06, fixed=true), volume(start=4.172906e-06,
                  fixed=true)),
            common_carotid_L48_D(q_in(start=3.4548837e-06, fixed=true), volume(start=3.3755337e-06,
                  fixed=true)),
            internal_carotid_L50_A(q_in(start=2.1257392e-06, fixed=true), volume(
                  start=1.2528502e-06, fixed=true)),
            internal_carotid_L50_B(q_in(start=2.2963727e-06, fixed=true), volume(
                  start=7.936284e-07, fixed=true)),
            internal_carotid_L50_C(volume(start=6.8537345e-05, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            external_carotid_T2_L62(volume(start=6.87966e-05, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            vertebral_L2(volume(start=6.324332e-05, fixed=true), phi_delayed(start=0.25378594,
                  fixed=true)),
            vertebral_R272(volume(start=6.324797e-05, fixed=true), phi_delayed(start=0.25378594,
                  fixed=true)),
            superior_vena_cava_C2(volume(start=4.220106e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            superior_vena_cava_C88(volume(start=7.276236e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            inferior_vena_cava_C8(volume(start=6.3323146e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            hepatic_vein_T1_C10(volume(start=2.4832575e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            inferior_vena_cava_C12(volume(start=1.721682e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            inferior_vena_cava_C16(volume(start=1.356269e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            renal_vein_T1_R18(volume(start=3.9994206e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            inferior_vena_cava_C20(volume(start=9.463241e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            renal_vein_T1_L22(volume(start=3.535526e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            inferior_vena_cava_C24(volume(start=3.7881873e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            common_iliac_vein_L56(
              volume(start=9.335072e-06, fixed=true),
              open(start=true, fixed=true),
              compliant_vessel(A(start=0.06723232, fixed=false))),
            common_iliac_vein_R26(
              volume(start=8.577576e-06, fixed=true),
              open(start=true, fixed=true),
              compliant_vessel(A(start=0.06723232, fixed=false))),
            external_iliac_vein_R28(volume(start=1.2516608e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            internal_iliac_vein_T1_R30(volume(start=5.3659746e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            external_iliac_vein_R32(volume(start=1.4586541e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            femoral_vein_R34(volume(start=6.3428143e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            femoral_vein_R38(volume(start=5.0398216e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            profunda_femoris_vein_T2_R40(volume(start=1.4287033e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            femoral_vein_R42(volume(start=3.5915946e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            femoral_vein_R46(volume(start=1.978256e-06, fixed=true), compliant_vessel(
                  A(start=0.06723232, fixed=false))),
            popliteal_vein_R48(volume(start=8.087784e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            anterior_tibial_vein_T4_R50(volume(start=2.8893216e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            popliteal_vein_R52(volume(start=1.799751e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            posterior_tibial_vein_T6_R54(volume(start=3.7113025e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            external_iliac_vein_L58(volume(start=1.2536291e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            internal_iliac_vein_T1_L60(volume(start=5.521543e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            external_iliac_vein_L62(volume(start=1.4323126e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            femoral_vein_L64(volume(start=7.4169236e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            femoral_vein_L68(volume(start=5.040843e-06, fixed=true), compliant_vessel(
                  A(start=0.06723232, fixed=false))),
            profunda_femoris_vein_T2_L70(volume(start=1.4287143e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            femoral_vein_L72(volume(start=3.5916506e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            femoral_vein_L76(volume(start=1.9782692e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            popliteal_vein_L78(volume(start=8.087087e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            anterior_tibial_vein_T4_L80(volume(start=2.889313e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            popliteal_vein_L82(volume(start=1.7995998e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            posterior_tibial_vein_T6_L84(volume(start=3.7111809e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachiocephalic_vein_R90(
              volume(start=8.56433e-06, fixed=true),
              open(start=true, fixed=true),
              compliant_vessel(A(start=0.06723232, fixed=false))),
            brachiocephalic_vein_L124(
              volume(start=1.6076916e-05, fixed=true),
              open(start=true, fixed=true),
              compliant_vessel(A(start=0.06723232, fixed=false))),
            vertebral_vein_R92(volume(start=5.580061e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachiocephalic_vein_R94(volume(start=1.941929e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            subclavian_vein_R96(volume(start=9.445688e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            internal_jugular_vein_R122(volume(start=3.7437676e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            external_jugular_vein_R98(volume(start=2.7481374e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            subclavian_vein_R100(volume(start=3.8673534e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            axillary_vein_R102(volume(start=1.3634191e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_vein_R104(volume(start=2.9135247e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_vein_R114(volume(start=2.6622365e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_vein_R108(volume(start=4.070048e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            ulnar_vein_T7_R110(volume(start=3.7959562e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_vein_R118(volume(start=2.5970394e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            radial_vein_T3_R120(volume(start=2.5086317e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            vertebral_vein_L126(volume(start=5.2267933e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachiocephalic_vein_L128(volume(start=9.829428e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            subclavian_vein_L130(volume(start=8.413075e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            internal_jugular_vein_L156(volume(start=2.2799617e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            external_jugular_vein_L132(volume(start=2.7001201e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            subclavian_vein_L134(volume(start=3.7749803e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            axillary_vein_L136(volume(start=1.3812472e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_vein_L138(volume(start=2.922691e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_vein_L148(volume(start=2.6908028e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_vein_L142(volume(start=4.0825245e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            ulnar_vein_T7_L144(volume(start=3.8003539e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_vein_L152(volume(start=2.626265e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            radial_vein_T3_L154(volume(start=2.53239e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            mesenteric_artery(q_in(start=9.368483e-06, fixed=true), volume(start=6.631462e-06,
                  fixed=true)),
            splanchnic_tissue(volume(start=0.00024702842, fixed=true), phi_delayed(
                  start=0.25378594, fixed=true)),
            splanchnic_vein(volume(start=2.0766065e-05, fixed=true), compliant_vessel(
                  A(start=0.06723232, fixed=false))),
            coronary_arteries(q_in(start=3.040544e-06, fixed=true), volume(start=3.726891e-08,
                  fixed=true)),
            cardiac_tissue(volume(start=0.000112328176, fixed=true), phi_delayed(
                  start=0.25378594, fixed=true)),
            coronary_veins(volume(start=5.926006e-08, fixed=true), compliant_vessel(A(
                    start=0.06723232, fixed=false))),
            brachial_L82_HeartLevel(q_in(start=3.722948e-06, fixed=true), volume(
                  start=2.9958835e-06, fixed=true))),
          pulmonaryComponent(
            c_pa(volume(start=2.055306e-05, fixed=true)),
            c_pv(volume(start=0.000367088 + settings.V_PV_init, fixed=true)),
            R_pa_visc(enable=false),
            R_pv_visc(enable=false)),
          settings(initByPressure=false));

      // baroreflex_system(
      //         baroreflex(
      //           phi_mean(start=0.24970344, fixed=true),
      //           phi(start=0.24585241, fixed=true),
      //           f1_adj(start=0.0030635502, fixed=true)),
      //         baroreceptor_aortic(
      //           fbr_int(start=17.603256, fixed=true),
      //           epsilon(start=1.5282549, fixed=true),
      //           s(start=0.8055929, fixed=true)),
      //         baroreceptor_carotid(
      //           fbr_int(start=9.66313, fixed=true),
      //           epsilon(start=1.1712315, fixed=true),
      //           s(start=0.8933484, fixed=true))),
      end partialCVS_optimized_ss;

      model partialCVS_outputs "Add additional outputs to the base model. Avoid any modification to prevent conflicts during diamond inheritance."
        extends partialCVS_optimized;

      output Physiolibrary.Types.Pressure brachial_pressure=SystemicComponent.brachial_L82_HeartLevel.p_out_hs;

      output Physiolibrary.Types.Pressure brachial_pressure_mean(start = 0);
      output Physiolibrary.Types.Pressure brachial_pressure_systolic(start = 0);
      Physiolibrary.Types.Pressure brachial_pressure_systolic_i(start = 0);
      output Physiolibrary.Types.Pressure brachial_pressure_diastolic(start = 0);
      Physiolibrary.Types.Pressure brachial_pressure_diastolic_i(start = 0);

      Real brachial_pressure_int
          "integration of pressure to find the true mean";
        output Physiolibrary.Types.Pressure ascending_aorta = SystemicComponent.ascending_aorta_A.p1
          "PRessure in ascending aorta";
        output Physiolibrary.Types.Pressure renal_capillary=SystemicComponent.renal_L166.p_C;
        output Physiolibrary.Types.Pressure exercised_capillary = SystemicComponent.posterior_tibial_T4_L214.p_C;
        // output Physiolibrary.Types.VolumeFlowRate CO(displayUnit = "l/min") = heartComponent.aorticValve.CO;
        output Physiolibrary.Types.VolumeFlowRate CO(displayUnit = "l/min");
        output Physiolibrary.Types.Pressure carotid_pressure=SystemicComponent.common_carotid_L48_D.p_out_hs;
        output Physiolibrary.Types.Pressure femoral_pressure=SystemicComponent.femoral_L200.p_out_hs;
        output Physiolibrary.Types.Pressure P_LV = heartComponent.ventricles.P_LV
          "Pressure in left ventricle";
        output Physiolibrary.Types.Volume V_LV = heartComponent.ventricles.V_LV;
        output Physiolibrary.Types.Volume EDV;
        output Physiolibrary.Types.Volume ESV;
        output Physiolibrary.Types.Fraction phi_baro= switch1.u1;
        output Physiolibrary.Types.Volume SV "Stroke volume"; // the formulation of SV = CO/heartComponent.sa_node.HR_true; was causing troubles to CO, keeping it pinned to zero all the time! (Dymola 2022)
        Physiolibrary.Types.Volume SV_i(displayUnit = "ml");
        output Physiolibrary.Types.Volume SRV "Stroke volume of the right ventricle"; // the formulation of SV = CO/heartComponent.sa_node.HR_true; was causing troubles to CO, keeping it pinned to zero all the time! (Dymola 2022)
        Physiolibrary.Types.Volume SRV_i(displayUnit = "ml");
      output Physiolibrary.Types.Frequency HR = heartComponent.sa_node.HR_true;
        output Real cardiac_cycle = heartComponent.sa_node.cardiac_cycle
          "Cardiac cycle phase";

      Real CI = CO*1000*60/settings.BSA "Cardiac index l/min/m2";
      Physiolibrary.Types.Power CardiacPowerBrachial = brachial_pressure_mean*CO;
      // Physiolibrary.Types.PowerPerMass CardiacPowerIndex = brachial_pressure_mean*CO/settings.BSA;
        output Modelica.Units.SI.Time TEjection=heartComponent.aorticValve.Ts;
        output Modelica.Units.SI.Time TFilling=heartComponent.mitralValve.Ts;
        output Physiolibrary.Types.Pressure thoracic_pressure=SystemicComponent.P_th;
        output Physiolibrary.Types.Pressure P_pa = pulmonaryComponent.r_pa.q_in.pressure
          "Pressure in pulmonary arteries";
        output Physiolibrary.Types.Pressure P_pv = pulmonaryComponent.r_pa.q_out.pressure
          "Pressure in pulmonary veins";
        output Physiolibrary.Types.Pressure P_sv = SystemicComponent.port_b.pressure
          "Pressure in systemic vena cava";

        output Physiolibrary.Types.Volume totalVolume=SystemicComponent.total_volume +
            heartComponent.volume + pulmonaryComponent.volume
          "For debug purposes, should be constant (up to numerical precision)";
        Physiolibrary.Types.Volume stressedVolume=SystemicComponent.total_volume - SystemicComponent.zpv_arterial - SystemicComponent.zpv_peripheral - SystemicComponent.zpv_venous +
            heartComponent.volume + pulmonaryComponent.volume
          "For debug purposes, should be constant (up to numerical precision)";

        output Modelica.Units.SI.Length speedSegmentLength=SystemicComponent.common_carotid_L48_A.l
             + SystemicComponent.common_carotid_L48_B.l + SystemicComponent.common_carotid_L48_C.l
             + SystemicComponent.common_carotid_L48_D.l + SystemicComponent.aortic_arch_C64.l
             + SystemicComponent.aortic_arch_C94.l + SystemicComponent.thoracic_aorta_C96.l
             + SystemicComponent.thoracic_aorta_C100.l + SystemicComponent.thoracic_aorta_C104.l
             + SystemicComponent.thoracic_aorta_C108.l + SystemicComponent.thoracic_aorta_C112.l
             + SystemicComponent.abdominal_aorta_C114.l + SystemicComponent.abdominal_aorta_C136.l
             + SystemicComponent.abdominal_aorta_C164.l + SystemicComponent.abdominal_aorta_C176.l
             + SystemicComponent.abdominal_aorta_C188.l + SystemicComponent.abdominal_aorta_C192.l
             + SystemicComponent.common_iliac_R216.l + SystemicComponent.external_iliac_R220.l
             + SystemicComponent.femoral_R222.l
          "Distance between carotid_L48 and femoral_R222 for calculating pulse wave propagation speed";

        Modelica.Units.SI.Length aortic_length=SystemicComponent.ascending_aorta_A.l
             + SystemicComponent.ascending_aorta_B.l + SystemicComponent.ascending_aorta_C.l
             + SystemicComponent.ascending_aorta_D.l + SystemicComponent.aortic_arch_C2.l
             + SystemicComponent.aortic_arch_C46.l + SystemicComponent.aortic_arch_C64.l
             + SystemicComponent.aortic_arch_C94.l + SystemicComponent.thoracic_aorta_C96.l
             + SystemicComponent.thoracic_aorta_C100.l + SystemicComponent.thoracic_aorta_C104.l
             + SystemicComponent.thoracic_aorta_C108.l + SystemicComponent.thoracic_aorta_C112.l
             + SystemicComponent.abdominal_aorta_C114.l + SystemicComponent.abdominal_aorta_C136.l
             + SystemicComponent.abdominal_aorta_C164.l + SystemicComponent.abdominal_aorta_C176.l
             + SystemicComponent.abdominal_aorta_C188.l + SystemicComponent.abdominal_aorta_C192.l
          "Length of the whole aorta for comparison to body size";

      //     Modelica.SIunits.Weight weight(start = 70) "Body weight estimated from height and BMI";
        Modelica.Units.SI.Height height(start=1.7)
          "Body height, estimated from aortic length calculation. Have to eb manually set to settings due to computational procedure";
        Modelica.Units.SI.Length aortic_length_calc=1/100*(-67.2793 + 0.2487*
            settings.age + 0.5409*(height*100) + 0.3476*settings.BMI)
          "Zemtsovskaja, HT 2019 for male subjects";
        Modelica.Units.SI.Length aortic_length_calc2=1/1000*(-109.7 + 2.9*
            settings.age + 2.5*height*100)
          "Rezai, Blood Press Monit 2013, for male subjects";

        output Physiolibrary.Types.Pressure P_LA = heartComponent.mitralValve.q_in.pressure
          "Pressure in left atria";
        output Physiolibrary.Types.Volume V_la = heartComponent.la.volume
          "Left atrium volume output";
        output Physiolibrary.Types.VolumeFlowRate q_mv(displayUnit = "l/min") = heartComponent.mitralValve.volumeFlowRate
          "Flow in mitral valve";
        output Real SLo_max = max([heartComponent.ventricles.LV_wall.SLo, heartComponent.ventricles.RV_wall.SLo, heartComponent.ventricles.SEP_wall.SLo])
          "maximal Sarcomere length";
        output Real SLo_min = min([heartComponent.ventricles.LV_wall.SLo, heartComponent.ventricles.RV_wall.SLo, heartComponent.ventricles.SEP_wall.SLo])
          "Minimal Sarcomere length";
        output Physiolibrary.Types.Pressure ESP
          "Opening pressure of the mitral valve - end systolic pressure";
        output Physiolibrary.Types.Pressure EDP
          "Closing pressure of the mitral valve - end diastolic pressure";
          output Physiolibrary.Types.Fraction EF = (EDV-ESV)/max(1e-5, EDV);
        output Modelica.Units.SI.Power LVPwr = heartComponent.ventricles.power_LV;
        output Modelica.Units.SI.Power RVPwr = heartComponent.ventricles.power_RV;

      // Get pressures and volumes of all tissues to check the characteristics
      //   Physiolibrary.Types.Pressure tissuePressures[:] = {
      //     SystemicComponent.celiac_trunk_C116.p,
      //     SystemicComponent.renal_L166.p,
      //     SystemicComponent.renal_R178.p,
      //     SystemicComponent.internal_iliac_T1_R218.p,
      //     SystemicComponent.profundus_T2_R224.p,
      //     SystemicComponent.anterior_tibial_T3_R230.p,
      //     SystemicComponent.posterior_tibial_T4_R236.p,
      //     SystemicComponent.internal_iliac_T1_L196.p,
      //     SystemicComponent.profundus_T2_L202.p,
      //     SystemicComponent.anterior_tibial_T3_L208.p,
      //     SystemicComponent.posterior_tibial_T4_L214.p,
      //     SystemicComponent.ulnar_T2_R42.p,
      //     SystemicComponent.radial_T1_R44.p,
      //     SystemicComponent.ulnar_T2_L90.p,
      //     SystemicComponent.radial_T1_L92.p,
      //     SystemicComponent.internal_carotid_R8_C.p,
      //     SystemicComponent.external_carotid_T2_R26.p,
      //     SystemicComponent.internal_carotid_L50_C.p,
      //     SystemicComponent.external_carotid_T2_L62.p,
      //     SystemicComponent.vertebral_L2.p,
      //     SystemicComponent.vertebral_R272.p,
      //     SystemicComponent.splanchnic_tissue.p,
      //     SystemicComponent.cardiac_tissue.p};
      //
      //     Physiolibrary.Types.Fraction tissue_relVol[:] = {
      //     SystemicComponent.celiac_trunk_C116.volume/SystemicComponent.celiac_trunk_C116.V_n,
      //     SystemicComponent.renal_L166.volume/SystemicComponent.renal_L166.V_n,
      //     SystemicComponent.renal_R178.volume/SystemicComponent.renal_R178.V_n,
      //     SystemicComponent.internal_iliac_T1_R218.volume/SystemicComponent.internal_iliac_T1_R218.V_n,
      //     SystemicComponent.profundus_T2_R224.volume/SystemicComponent.profundus_T2_R224.V_n,
      //     SystemicComponent.anterior_tibial_T3_R230.volume/SystemicComponent.anterior_tibial_T3_R230.V_n,
      //     SystemicComponent.posterior_tibial_T4_R236.volume/SystemicComponent.posterior_tibial_T4_R236.V_n,
      //     SystemicComponent.internal_iliac_T1_L196.volume/SystemicComponent.internal_iliac_T1_L196.V_n,
      //     SystemicComponent.profundus_T2_L202.volume/SystemicComponent.profundus_T2_L202.V_n,
      //     SystemicComponent.anterior_tibial_T3_L208.volume/SystemicComponent.anterior_tibial_T3_L208.V_n,
      //     SystemicComponent.posterior_tibial_T4_L214.volume/SystemicComponent.posterior_tibial_T4_L214.V_n,
      //     SystemicComponent.ulnar_T2_R42.volume/SystemicComponent.ulnar_T2_R42.V_n,
      //     SystemicComponent.radial_T1_R44.volume/SystemicComponent.radial_T1_R44.V_n,
      //     SystemicComponent.ulnar_T2_L90.volume/SystemicComponent.ulnar_T2_L90.V_n,
      //     SystemicComponent.radial_T1_L92.volume/SystemicComponent.radial_T1_L92.V_n,
      //     SystemicComponent.internal_carotid_R8_C.volume/SystemicComponent.internal_carotid_R8_C.V_n,
      //     SystemicComponent.external_carotid_T2_R26.volume/SystemicComponent.external_carotid_T2_R26.V_n,
      //     SystemicComponent.internal_carotid_L50_C.volume/SystemicComponent.internal_carotid_L50_C.V_n,
      //     SystemicComponent.external_carotid_T2_L62.volume/SystemicComponent.external_carotid_T2_L62.V_n,
      //     SystemicComponent.vertebral_L2.volume/SystemicComponent.vertebral_L2.V_n,
      //     SystemicComponent.vertebral_R272.volume/SystemicComponent.vertebral_R272.V_n,
      //     SystemicComponent.splanchnic_tissue.volume/SystemicComponent.splanchnic_tissue.V_n,
      //     SystemicComponent.cardiac_tissue.volume/SystemicComponent.cardiac_tissue.V_n};
        parameter Physiolibrary.Types.Time tau = 1e-3
          "Integration costant for min-max calculations";

      Physiolibrary.Types.VolumeFlowRate totalBF=
      SystemicComponent.internal_carotid_R8_C.q_in +
      SystemicComponent.external_carotid_T2_R26.q_in +
      SystemicComponent.internal_carotid_L50_C.q_in +
      SystemicComponent.external_carotid_T2_L62.q_in +
      SystemicComponent.vertebral_L2.q_in +
      SystemicComponent.vertebral_R272.q_in +
      SystemicComponent.celiac_trunk_C116.q_in +
      SystemicComponent.internal_iliac_T1_R218.q_in*0.25 +
      SystemicComponent.internal_iliac_T1_L196.q_in*0.25 +
      SystemicComponent.splanchnic_tissue.q_in +
      SystemicComponent.renal_L166.q_in +
      SystemicComponent.renal_R178.q_in+
      SystemicComponent.cardiac_tissue.q_in +
      SystemicComponent.internal_iliac_T1_R218.q_in*0.75 +
      SystemicComponent.profundus_T2_R224.q_in +
      SystemicComponent.anterior_tibial_T3_R230.q_in +
      SystemicComponent.posterior_tibial_T4_R236.q_in +
      SystemicComponent.internal_iliac_T1_L196.q_in*0.75 +
      SystemicComponent.profundus_T2_L202.q_in +
      SystemicComponent.anterior_tibial_T3_L208.q_in +
      SystemicComponent.posterior_tibial_T4_L214.q_in +
      SystemicComponent.ulnar_T2_R42.q_in +
      SystemicComponent.radial_T1_R44.q_in +
      SystemicComponent.ulnar_T2_L90.q_in +
      SystemicComponent.radial_T1_L92.q_in;

      Physiolibrary.Types.Fraction qf_brain= (
      SystemicComponent.internal_carotid_R8_C.q_in +
      SystemicComponent.external_carotid_T2_R26.q_in +
      SystemicComponent.internal_carotid_L50_C.q_in +
      SystemicComponent.external_carotid_T2_L62.q_in +
      SystemicComponent.vertebral_L2.q_in +
      SystemicComponent.vertebral_R272.q_in) / max(totalBF, 1e-6);

      Physiolibrary.Types.Fraction qf_Digestive = (
      SystemicComponent.celiac_trunk_C116.q_in +
      SystemicComponent.internal_iliac_T1_R218.q_in*0.25 +
      SystemicComponent.internal_iliac_T1_L196.q_in*0.25 +
      SystemicComponent.splanchnic_tissue.q_in) / max(totalBF, 1e-6);

      Physiolibrary.Types.Fraction qf_kidneys =  (
      SystemicComponent.renal_L166.q_in +
      SystemicComponent.renal_R178.q_in) / max(totalBF, 1e-6);

      Physiolibrary.Types.Fraction qf_heart = (
      SystemicComponent.cardiac_tissue.q_in) / max(totalBF, 1e-6);

      Physiolibrary.Types.Fraction qf_Others = (
      SystemicComponent.internal_iliac_T1_R218.q_in*0.75 +
      SystemicComponent.profundus_T2_R224.q_in +
      SystemicComponent.anterior_tibial_T3_R230.q_in +
      SystemicComponent.posterior_tibial_T4_R236.q_in +
      SystemicComponent.internal_iliac_T1_L196.q_in*0.75 +
      SystemicComponent.profundus_T2_L202.q_in +
      SystemicComponent.anterior_tibial_T3_L208.q_in +
      SystemicComponent.posterior_tibial_T4_L214.q_in +
      SystemicComponent.ulnar_T2_R42.q_in +
      SystemicComponent.radial_T1_R44.q_in +
      SystemicComponent.ulnar_T2_L90.q_in +
      SystemicComponent.radial_T1_L92.q_in) / max(totalBF, 1e-6);

      // Physiolibrary.Types.Volume volMaxOVerflow = SystemicComponent.celiac_trunk_C116.linearOverflow
      //        + SystemicComponent.renal_L166.linearOverflow + SystemicComponent.renal_R178.linearOverflow + SystemicComponent.internal_iliac_T1_R218.linearOverflow
      //        + SystemicComponent.profundus_T2_R224.linearOverflow + SystemicComponent.anterior_tibial_T3_R230.linearOverflow
      //     + SystemicComponent.posterior_tibial_T4_R236.linearOverflow + SystemicComponent.internal_iliac_T1_L196.linearOverflow
      //        + SystemicComponent.profundus_T2_L202.linearOverflow + SystemicComponent.anterior_tibial_T3_L208.linearOverflow
      //     + SystemicComponent.posterior_tibial_T4_L214.linearOverflow + SystemicComponent.ulnar_T2_R42.linearOverflow
      //     + SystemicComponent.radial_T1_R44.linearOverflow + SystemicComponent.ulnar_T2_L90.linearOverflow + SystemicComponent.radial_T1_L92.linearOverflow
      //        + SystemicComponent.internal_carotid_R8_C.linearOverflow + SystemicComponent.external_carotid_T2_R26.linearOverflow
      //        + SystemicComponent.internal_carotid_L50_C.linearOverflow + SystemicComponent.external_carotid_T2_L62.linearOverflow
      //        + SystemicComponent.vertebral_L2.linearOverflow + SystemicComponent.vertebral_R272.linearOverflow + SystemicComponent.cardiac_tissue.linearOverflow
      //        + SystemicComponent.splanchnic_tissue.linearOverflow "Numerical imprecision";
      equation
        der(SV_i) = -heartComponent.sa.q;
        der(SRV_i) = -heartComponent.pa.q;
        der(brachial_pressure_systolic_i)*tau = max(brachial_pressure  - brachial_pressure_systolic_i, 0);
        der(brachial_pressure_diastolic_i)*tau = min(brachial_pressure  - brachial_pressure_diastolic_i, 0);

        when heartComponent.sa_node.beat then
          SV = SV_i;
          reinit(SV_i, 0);
          SRV = SRV_i;
          reinit(SRV_i, 0);
          CO = SV*HR;
        end when;

        when not heartComponent.aorticValve.open then
          ESP = heartComponent.mitralValve.q_out.pressure;
          ESV = V_LV;
      //     SV = EDV - ESV;
        end when;

        when not heartComponent.mitralValve.open then
          EDP = heartComponent.mitralValve.q_out.pressure;
          EDV = V_LV;
        end when;

        assert(abs(height - settings.height) < 0.01, "Please manually tune the height in settings so its in accordance with the one calculated from the aortic vessel length to a preceision of 1cm", AssertionLevel.warning);
      //   settings.BMI = weight/(height^2);
        // by putting these two "known" variables in equal, modelica can determine the appropriate height
        aortic_length = aortic_length_calc;

        der(brachial_pressure_int) = brachial_pressure;

        when heartComponent.sa_node.beat then
          brachial_pressure_mean = brachial_pressure_int/heartComponent.sa_node.t0_last;
          reinit(brachial_pressure_int, 0);
          brachial_pressure_systolic = (brachial_pressure_systolic_i);
          brachial_pressure_diastolic = (brachial_pressure_diastolic_i);
          reinit(brachial_pressure_systolic_i, brachial_pressure_mean);
          reinit(brachial_pressure_diastolic_i,brachial_pressure_mean);
        end when;

      end partialCVS_outputs;

      model partialCVSbaseline
        "Base class for all use cases, including calibrated model in steadz state with all outputs"
      //   extends ADAN_main.SystemicTree.Variations.Renals.Renals_HF_nobaro1_4_baro;
       // extends Auxiliary.partialCVS_optimized_ss;
       extends ADAN_main.SystemicTree.Variations.Renals.Renals_HF_nobaro_baro(
            heartComponent(aorticValve(_Ron(displayUnit="(Pa.s)/m3") = 797188.6),
              valveInertia_aortic(enabled=true, l=0.02)));

        annotation (experiment(
            StopTime=60,
            Interval=0.01,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"), __OpenModelica_simulationFlags(lv=
                "LOG_STATS", s="cvode"));
      end partialCVSbaseline;
    end Auxiliary;

    package Obsolete
      model CardiovascularSystem_leveled
        ADAN_main.Components.Obsolete.AdanVenousRed.environment environment1
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
        replaceable ADAN_main.Components.Obsolete.Systemic_eq Systemic1(
          redeclare model Systemic_artery_thoracic =
              ADAN_main.Components.Obsolete.pv_type_thoracic_leveled,
          redeclare model Systemic_artery =
              ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.pv_artery_leveled,
          redeclare model Systemic_vein =
              ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.vp_vein_leveled,
          redeclare model Systemic_tissue =
              ADAN_main.Components.Subsystems.Systemic.Vessel_modules.systemic_tissue_leveled,
          u_ra=Heart1.u_ra,
          v_aov=Heart1.v_aov,
          redeclare ADAN_main.Components.Obsolete.pv_type_thoracic_leveled
            ascending_aorta_A(sinAlpha=1),
          ascending_aorta_B(sinAlpha=1),
          ascending_aorta_C(sinAlpha=1),
          ascending_aorta_D(sinAlpha=1),
          aortic_arch_C2(sinAlpha=1),
          aortic_arch_C46(sinAlpha=1),
          aortic_arch_C64(sinAlpha=1),
          common_carotid_R6_A(sinAlpha=1),
          common_carotid_R6_B(sinAlpha=1),
          common_carotid_R6_C(sinAlpha=1),
          internal_carotid_R8_A(sinAlpha=1),
          internal_carotid_R8_B(sinAlpha=1),
          common_carotid_L48_A(sinAlpha=1),
          common_carotid_L48_B(sinAlpha=1),
          common_carotid_L48_C(sinAlpha=1),
          common_carotid_L48_D(sinAlpha=1),
          internal_carotid_L50_A(sinAlpha=1),
          internal_carotid_L50_B(sinAlpha=1),
          brachial_L82(sinAlpha=-1),
          ulnar_T2_L84(sinAlpha=-1),
          brachial_R34(sinAlpha=-1),
          ulnar_T2_R36(sinAlpha=-1),
          vertebral_vein_L126(sinAlpha=-1),
          brachial_vein_L138(sinAlpha=1),
          brachial_vein_L142(sinAlpha=1),
          ulnar_vein_T7_L144(sinAlpha=1),
          brachial_vein_L152(sinAlpha=1),
          radial_vein_T3_L154(sinAlpha=1),
          brachial_vein_R104(sinAlpha=1),
          brachial_vein_R114(sinAlpha=1),
          brachial_vein_R108(sinAlpha=1),
          ulnar_vein_T7_R110(sinAlpha=1),
          brachial_vein_R118(sinAlpha=1),
          radial_vein_T3_R120(sinAlpha=1),
          brachial_vein_L148(sinAlpha=1),
          superior_vena_cava_C2(sinAlpha=-1),
          superior_vena_cava_C88(sinAlpha=-1),
          brachiocephalic_vein_R90(sinAlpha=-1),
          brachiocephalic_vein_R94(sinAlpha=-1),
          brachiocephalic_vein_L128(sinAlpha=-1),
          brachiocephalic_vein_L124(sinAlpha=-1),
          internal_jugular_vein_R122(sinAlpha=-1),
          external_jugular_vein_R98(sinAlpha=-1),
          thoracic_aorta_C96(sinAlpha=-1),
          thoracic_aorta_C100(sinAlpha=-1),
          thoracic_aorta_C104(sinAlpha=-1),
          thoracic_aorta_C108(sinAlpha=-1),
          thoracic_aorta_C112(sinAlpha=-1),
          aortic_arch_C94(sinAlpha=-1),
          vertebral_vein_R92(sinAlpha=-1),
          internal_jugular_vein_L156(sinAlpha=-1),
          external_jugular_vein_L132(sinAlpha=-1),
          abdominal_aorta_C114(sinAlpha=-1),
          abdominal_aorta_C136(sinAlpha=-1),
          abdominal_aorta_C164(sinAlpha=-1),
          abdominal_aorta_C176(sinAlpha=-1),
          abdominal_aorta_C188(sinAlpha=-1),
          abdominal_aorta_C192(sinAlpha=-1),
          common_iliac_R216(sinAlpha=-1),
          external_iliac_R220(sinAlpha=-1),
          femoral_R222(sinAlpha=-1),
          common_iliac_L194(sinAlpha=-1),
          external_iliac_L198(sinAlpha=-1),
          femoral_L200(sinAlpha=-1),
          femoral_R226(sinAlpha=-1),
          popliteal_R228(sinAlpha=-1),
          popliteal_R232(sinAlpha=-1),
          tibiofibular_trunk_R234(sinAlpha=-1),
          femoral_L204(sinAlpha=-1),
          popliteal_L206(sinAlpha=-1),
          popliteal_L210(sinAlpha=-1),
          tibiofibular_trunk_L212(sinAlpha=-1),
          renal_vein_T1_L22(sinAlpha=1),
          internal_iliac_vein_T1_R30(sinAlpha=1),
          profunda_femoris_vein_T2_R40(sinAlpha=1),
          anterior_tibial_vein_T4_R50(sinAlpha=1),
          posterior_tibial_vein_T6_R54(sinAlpha=1),
          internal_iliac_vein_T1_L60(sinAlpha=1),
          profunda_femoris_vein_T2_L70(sinAlpha=1),
          anterior_tibial_vein_T4_L80(sinAlpha=1),
          posterior_tibial_vein_T6_L84(sinAlpha=1),
          external_iliac_vein_R32(sinAlpha=1),
          femoral_vein_R34(sinAlpha=1),
          femoral_vein_R38(sinAlpha=1),
          femoral_vein_R42(sinAlpha=1),
          femoral_vein_R46(sinAlpha=1),
          popliteal_vein_R48(sinAlpha=1),
          popliteal_vein_R52(sinAlpha=1),
          external_iliac_vein_L62(sinAlpha=1),
          femoral_vein_L64(sinAlpha=1),
          femoral_vein_L68(sinAlpha=1),
          femoral_vein_L72(sinAlpha=1),
          femoral_vein_L76(sinAlpha=1),
          popliteal_vein_L78(sinAlpha=1),
          popliteal_vein_L82(sinAlpha=1),
          inferior_vena_cava_C20(sinAlpha=1),
          inferior_vena_cava_C24(sinAlpha=1),
          common_iliac_vein_L56(sinAlpha=1),
          common_iliac_vein_R26(sinAlpha=1),
          external_iliac_vein_R28(sinAlpha=1),
          external_iliac_vein_L58(sinAlpha=1),
          inferior_vena_cava_C16(sinAlpha=1),
          inferior_vena_cava_C12(sinAlpha=1),
          inferior_vena_cava_C8(sinAlpha=1)) constrainedby
          ADAN_main.Components.Subsystems.Systemic.SystemicAV_base(u_ra=Heart1.u_ra,
            v_aov=Heart1.v_aov)
          annotation (Placement(transformation(extent={{-70,80},{-50,100}})));

        replaceable
          ADAN_main.Components.Subsystems.Pulmonary.Auxiliary.inset_Pulmonary_ADAN_VR_b580e
          Pulmonary1(
          u_la=Heart1.u_la,
          v_puv=Heart1.v_puv,
          t=environment1.time_)
          annotation (Placement(transformation(extent={{-40,80},{-20,100}})));
        replaceable ADAN_main.Components.Obsolete.Heart_b580e Heart1(
          v_sup_venacava=Systemic1.v_sup_venacava,
          v_inf_venacava=Systemic1.v_inf_venacava,
          u_root=Systemic1.u_root,
          u_pas=Pulmonary1.u_pas,
          v_pvn=Pulmonary1.v_pvn,
          t=environment1.time_)
          annotation (Placement(transformation(extent={{-10,80},{10,100}})));
        Modelica.Blocks.Sources.Sine sine(amplitude=533, f=0.2)
          annotation (Placement(transformation(extent={{-74,-82},{-54,-62}})));
        Modelica.Blocks.Sources.Constant const1(k=1)
          annotation (Placement(transformation(extent={{-100,20},{-80,40}})));
      equation

        connect(Systemic1.thoracic_pressure_input, sine.y) annotation (Line(points={{
                -63.6842,81.3333},{-50,81.3333},{-50,-72},{-53,-72}},
                                                             color={0,0,127}));
        annotation (experiment(
            StopTime=10,
            Interval=0.01,
            Tolerance=1e-07,
            __Dymola_Algorithm="Cvode"));
      end CardiovascularSystem_leveled;

      model CardiovascularSystem_7af
        ADAN_main.Components.Obsolete.AdanVenousRed.environment environment1
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
        replaceable ADAN_main.Components.Obsolete.Systemic_eq Systemic1(u_ra=
              Heart1.u_ra, v_aov=Heart1.v_aov) constrainedby
          ADAN_main.Components.Subsystems.Systemic.SystemicAV_base(u_ra=Heart1.u_ra,
            v_aov=Heart1.v_aov)
          annotation (Placement(transformation(extent={{-70,80},{-50,100}})));
        replaceable
          ADAN_main.Components.Subsystems.Pulmonary.Auxiliary.inset_Pulmonary_ADAN_VR_b580e
          Pulmonary1(
          u_pas(displayUnit="Pa"),
          u_la=Heart1.u_la,
          v_puv=Heart1.v_puv,
          t=environment1.time_)
          annotation (Placement(transformation(extent={{-40,80},{-20,100}})));
        replaceable Components.Subsystems.Heart.Auxiliary.HeartInputs Heart1(
          v_sup_venacava=Systemic1.pq_terminator_inf_vc.v,
          v_inf_venacava=Systemic1.pq_terminator_sup_vc.v,
          v_pvn=Pulmonary1.v_pvn,
          u_sas=Systemic1.u_root,
          u_par=Pulmonary1.u_pas,
          t=environment1.time_,
          thoracic_pressure=0,
          T=1/f,
          q_rv(displayUnit="ml")) constrainedby
          ADAN_main.Components.Obsolete.Heart_b580e(
          v_sup_venacava=Systemic1.pq_terminator_inf_vc.v,
          v_inf_venacava=Systemic1.pq_terminator_sup_vc.v,
          v_pvn=Pulmonary1.v_pvn,
          t=environment1.time_,
          q_rv(displayUnit="ml"))
          annotation (Placement(transformation(extent={{-10,80},{10,100}})));
        Modelica.Blocks.Sources.Sine sine(amplitude=0, f=0.2)
          annotation (Placement(transformation(extent={{-74,-82},{-54,-62}})));
        Modelica.Blocks.Sources.Constant const1(k=1)
          annotation (Placement(transformation(extent={{-100,20},{-80,40}})));
          Physiolibrary.Types.Volume total_volume = Systemic1.total_volume + Pulmonary1.total_stressed_volume + Heart1.total_volume;

      parameter Physiolibrary.Types.Frequency f = 1;
      equation

        connect(Systemic1.thoracic_pressure_input, sine.y) annotation (Line(points={{
                -63.6842,81.3333},{-50,81.3333},{-50,-72},{-53,-72}},   color={0,0,
                127}));
        annotation (experiment(
            StopTime=10,
            Interval=0.01,
            Tolerance=1e-07,
            __Dymola_Algorithm="Cvode"));
      end CardiovascularSystem_7af;

      model CardiovascularSystem_leveled_sitting
        extends CardiovascularSystem_leveled(Systemic1(
            femoral_R226(sinAlpha=0),
            femoral_L204(sinAlpha=0),
            femoral_R222(sinAlpha=0),
            femoral_L200(sinAlpha=0),
            femoral_vein_R42(sinAlpha=0),
            femoral_vein_R38(sinAlpha=0),
            femoral_vein_R46(sinAlpha=0),
            femoral_vein_R34(sinAlpha=0),
            femoral_vein_L76(sinAlpha=0),
            femoral_vein_L72(sinAlpha=0),
            femoral_vein_L68(sinAlpha=0),
            femoral_vein_L64(sinAlpha=0)));
      end CardiovascularSystem_leveled_sitting;

      model Lumped_simple
        Components.Subsystems.Heart.Heart_ADAN_VR heartComponent(
          UseThoracic_PressureInput=true,
          HR=1,
          Heart1(q_la(start=0.0004), q_ra(displayUnit="ml")))
          annotation (Placement(transformation(extent={{0,-22},{-20,-2}})));

        parameter Modelica.Units.SI.Length L_Systemic=3.28 "Sum of all lengths";
      parameter Physiolibrary.Types.Volume V_systemic=0.000216 "Sum of all ZPV";
      parameter Physiolibrary.Types.VolumeFlowRate CO=9.6666666666667e-05
                                                      "cardiac output";
      parameter Physiolibrary.Types.Pressure P_aortic=13332.2387415;
      parameter Physiolibrary.Types.Pressure P_tissues=2666.4477483;

      Real r_Systemic;

      Real Resistance_Systemic = dp_Systemic / CO;
      Real dp_Systemic = 100 - 80 " Need to be calculated numerically from tissues.inflow.pressure";

      Modelica.Blocks.Sources.Trapezoid           thoracic_pressure(
          amplitude=40*133,
          rising=2,
          width=20.0,
          falling=2,
          period=200,
          nperiod=1,
          offset=0,
          startTime=20)
          annotation (Placement(transformation(extent={{-80,-42},{-60,-22}})));
        Components.Subsystems.Systemic.Systemic_SimpleLumped
          systemic_SimpleLumped(UseThoracic_PressureInput=true)
          annotation (Placement(transformation(extent={{-20,40},{0,60}})));
        Components.Subsystems.Pulmonary.Pulmonary_ADAN_VR pulmonaryComponent(
            UseThoracic_PressureInput=true)
          annotation (Placement(transformation(extent={{-20,-60},{0,-40}})));
      equation

        V_systemic = L_Systemic*Modelica.Constants.pi * r_Systemic^2;

        connect(thoracic_pressure.y, heartComponent.thoracic_pressure_input)
          annotation (Line(points={{-59,-32},{-10,-32},{-10,-22}}, color={0,0,127}));
        connect(systemic_SimpleLumped.port_b, heartComponent.sv) annotation (Line(
            points={{-8.94737,46.6667},{48,46.6667},{48,-2},{0,-2}},
            color={0,0,0},
            thickness=1));
        connect(systemic_SimpleLumped.port_a, heartComponent.sa) annotation (Line(
            points={{-14.2105,46.6667},{-40,46.6667},{-40,-2},{-20,-2}},
            color={0,0,0},
            thickness=1));
        connect(heartComponent.pa, pulmonaryComponent.q_in) annotation (Line(
            points={{-20,-22},{-34,-22},{-34,-50},{-20,-50}},
            color={0,0,0},
            thickness=1));
        connect(pulmonaryComponent.q_out, heartComponent.pv) annotation (Line(
            points={{0,-50},{14,-50},{14,-22},{0,-22}},
            color={0,0,0},
            thickness=1));
        connect(thoracic_pressure.y, systemic_SimpleLumped.thoracic_pressure_input)
          annotation (Line(points={{-59,-32},{-36,-32},{-36,41.3333},{-13.6842,
                41.3333}},                                                 color=
                {0,0,127}));
        connect(thoracic_pressure.y, pulmonaryComponent.thoracic_pressure_input)
          annotation (Line(points={{-59,-32},{-36,-32},{-36,-58},{-12,-58}},
              color={0,0,127}));
        annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
              coordinateSystem(preserveAspectRatio=false)),
          experiment(
            StopTime=100,
            Interval=0.01,
            Tolerance=1e-05,
            __Dymola_Algorithm="Cvode"));
      end Lumped_simple;

      model CVS_7af_baro
        extends CVS_7af(
          phi_fixed(
            amplitude=0.74,
            rising=200,
            width=50,
            period=1000,
            startTime=50),
          redeclare Components.Subsystems.Pulmonary.Pulmonary_Smith
            pulmonaryComponent(UseThoracic_PressureInput=true),
          redeclare Components.Subsystems.Heart.Heart_Smith heartComponent(
              UseFrequencyInput=true, UseThoracic_PressureInput=
                                                               true),
          redeclare Components.Subsystems.Systemic.Systemic_simplest Systemic1(
            UseThoracic_PressureInput=true,
            UsePhi_Input=true,
            baroreflex(
              resetAt=-1,
              fsn=0.025,
              g=1.0),
            baroreceptor_aortic(epsilon_start=1.19, delta0=0.3),
            baroreceptor_carotid(epsilon_start=1.06, s_start=0.96),
            ascending_aorta_B(
              UseInertance=false,
              UseVasoconstrictionEffect=true,
              l(displayUnit="m") = 2.5),
            inferior_vena_cava_C8(
              l=2.5,
              r(displayUnit="mm") = 0.008,
              compliant_vessel(tau(displayUnit="d") = 604800))));
        annotation (experiment(
            StopTime=500,
            Interval=0.11,
            Tolerance=1e-05,
            __Dymola_Algorithm="Cvode"));
      end CVS_7af_baro;

      model CVS_7af_leveled_baro
        extends partialCVS_leveled(
          redeclare Components.Subsystems.Systemic.SystemicAV SystemicComponent(
              UseThoracic_PressureInput=false, UsePhi_Input=true),
          heartComponent(UseFrequencyInput=true),
          Tilt_ramp(startTime=50));
        Components.Signals.ConditionalConnection conditionalConnection1(
            disconnectedValue=1, disconnected=true)
          annotation (Placement(transformation(extent={{0,50},{12,56}})));
        Components.Signals.ConditionalConnection conditionalConnection(
            disconnectedValue=0.25, disconnected=true)
          annotation (Placement(transformation(extent={{8,4},{-4,10}})));
      equation
        connect(condHRPhi.u, SystemicComponent.HR) annotation (Line(points={{-6,
                54},{-19.6,54},{-19.6,45.6}}, color={0,0,127}));
        connect(condHRPhi.y, heartComponent.frequency_input) annotation (Line(
              points={{54.6,60},{52,60},{52,-22},{-16,-22}}, color={0,0,127}));
        connect(SystemicComponent.phi_input, condSystemicPhi.y) annotation (
            Line(points={{-16,20},{-10,20},{-10,4.00002},{-13.4,4.00002}},
              color={0,0,127}));
        connect(SystemicComponent.phi_baroreflex, condSystemicPhi.u)
          annotation (Line(points={{-27.4,45.4},{-27.4,28},{-27.2,28},{-27.2,
                4.00002}}, color={0,0,127}));
        annotation (experiment(
            StopTime=0.1,
            Tolerance=1e-05,
            __Dymola_Algorithm="Cvode"));
      end CVS_7af_leveled_baro;

      model CVS_7af_normal
        extends ADAN_main.SystemicTree.Obsolete.CVS_7af_normal_init(
            SystemicComponent(
            aortic_arch_C46(distentionBase=3e-6),
            internal_carotid_R8_A(distentionBase=1.5E-07),
            baroreflex(fsn=0.03),
            baroreceptor_aortic(epsilon_start=1.6, s_start=0.88),
            baroreceptor_carotid(epsilon_start=2.65, s_start=0.9)),
            thoracic_pressure_ramp(
            rising=1,
            width=15,
            falling=1));
      end CVS_7af_normal;

      model CVS_7af_normal_step_hr
        extends Obsolete.CVS_7af_normal(SystemicComponent(UsePhi_Input=true),
            heartComponent(UseFrequencyInput=true));
        Modelica.Blocks.Sources.Step step(
          height=0.5,
          offset=1,
          startTime=20000)
          annotation (Placement(transformation(extent={{58,-36},{38,-16}})));
        Modelica.Blocks.Sources.Step step1(
          height=0.25,
          offset=0.25,
          startTime=800)
          annotation (Placement(transformation(extent={{32,-2},{12,18}})));
      equation
        connect(heartComponent.frequency_input, step.y) annotation (Line(points={
                {-16,-22},{10,-22},{10,-26},{37,-26}}, color={0,0,127}));
        connect(step1.y, SystemicComponent.phi_input) annotation (Line(points={
                {11,8},{-2,8},{-2,20},{-16,20}}, color={0,0,127}));
      end CVS_7af_normal_step_hr;

      model CVS_7af_baro_simple
        extends CVS_7af(
          redeclare Components.Subsystems.Systemic.SystemicAV Systemic1(
            UseThoracic_PressureInput=true,
            UsePhi_Input=true,
            baroreflex(resetAt=-1),
            baroreceptor_aortic(epsilon_start=1.19),
            baroreceptor_carotid(epsilon_start=1.06, s_start=0.96),
            alphaC=0.5),
          pulmonaryComponent(UseThoracic_PressureInput=true),
          heartComponent(
            Heart1(q_lv(displayUnit="ml", start=0.0003), q_rv(displayUnit="ml",
                  start=0.0003)),
            UseFrequencyInput=true,
            UseThoracic_PressureInput=
                                     true));
        Components.Signals.ConditionalConnection conditionalConnection(
            disconnectedValue=0.25, disconnected=false)
          annotation (Placement(transformation(extent={{8,4},{-4,10}})));
        Components.Signals.ConditionalConnection conditionalConnection1(
            disconnectedValue=1, disconnected=false)
          annotation (Placement(transformation(extent={{0,50},{12,56}})));
      Modelica.Blocks.Sources.Trapezoid           thoracic_pressure(
          amplitude=-36.5*133,
          rising=1,
          width=18,
          falling=1,
          period=100,
          nperiod=1,
          offset=0,
          startTime=20)
          annotation (Placement(transformation(extent={{-98,-48},{-78,-28}})));
      equation
        connect(phi_fixed.y, Systemic1.thoracic_pressure_input) annotation (
            Line(points={{-49,4},{-54,4},{-54,20},{-34,20}}, color={0,0,127}));
        connect(pulmonaryComponent.thoracic_pressure_input, phi_fixed.y)
          annotation (Line(points={{-26,-60},{-62,-60},{-62,4},{-49,4}}, color=
                {0,0,127}));
        connect(Systemic1.phi_input, conditionalConnection.y) annotation (Line(
              points={{-16,20},{-10,20},{-10,6.66667},{-4.6,6.66667}},
                                                             color={0,0,127}));
        connect(Systemic1.phi_baroreflex, conditionalConnection.u) annotation (
            Line(points={{-27.4,45.4},{-27.4,28},{9.2,28},{9.2,6.66667}},
                                                                  color={0,0,127}));
        connect(phi_fixed.y, heartComponent.thoracic_pressure_input)
          annotation (Line(points={{-49,4},{-26,4},{-26,-32}}, color={0,0,127}));
        connect(conditionalConnection1.u, Systemic1.HR) annotation (Line(points={{-6,54},
                {-19.6,54},{-19.6,45.6}}, color={0,0,127}));
        connect(conditionalConnection1.y, heartComponent.frequency_input) annotation (
           Line(points={{12.6,52.6667},{52,52.6667},{52,-22},{-16,-22}},
                                                             color={0,0,127}));
        annotation (experiment(
            StopTime=80,
            Interval=0.01,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end CVS_7af_baro_simple;

      model base_fastBaro
        "Faster baroreflex allows to observe its steadystate even in short simulations"
        extends Baseline.Experiments.SmithOlufsenMynard_base(SystemicComponent(
              baroreflex_system(baroreceptor_carotid(tau_s(displayUnit="s") = 3),
                baroreceptor_aortic(tau_s(displayUnit="s") = 3))));

      end base_fastBaro;

      model base_denervatedBaseline
        extends Obsolete.base_fastBaro(SystemicComponent(systemicParameters(k_E=
                 0.558)), settings(tissues_Pa_nom(displayUnit="Pa") = 16766,
              tissues_Pv_nom(displayUnit="Pa") = 588));
        annotation (experiment(
            StopTime=30,
            Interval=0.01,
            __Dymola_Algorithm="Cvode"));
      end base_denervatedBaseline;

      model CVS_7af_init
        "Steady state initialization from 2019-08-08 11:43:49.858141 at time 14.0"
        extends ADAN_main.SystemicTree.Auxiliary.partialCVS(
          redeclare Components.Subsystems.Systemic.SystemicAV SystemicComponent(
            ascending_aorta_A(
              p_in(start=8151.84, fixed=true),
              q(start=1.8802598e-06, fixed=true),
              p2(start=8151.9097, fixed=true)),
            ascending_aorta_B(q_in(start=3.7603616e-06, fixed=true), p_C(start=
                    8151.984, fixed=true)),
            ascending_aorta_C(q_in(start=5.6563345e-06, fixed=true), p_C(start=
                    8152.2363, fixed=true)),
            ascending_aorta_D(q_in(start=8.74735e-06, fixed=true), p_C(start=
                    8152.6465, fixed=true)),
            aortic_arch_C2(q_in(start=1.1558994e-05, fixed=true), p_C(start=
                    8153.2246, fixed=true)),
            brachiocephalic_trunk_C4(q_in(start=2.771395e-07, fixed=true), p_C(
                  start=8152.1333, fixed=true)),
            aortic_arch_C46(q_in(start=1.3844441e-05, fixed=true), p_C(start=
                    8153.7695, fixed=true)),
            aortic_arch_C64(q_in(start=1.5571319e-05, fixed=true), p_C(start=
                    8154.2505, fixed=true)),
            aortic_arch_C94(q_in(start=1.5464802e-05, fixed=true), p_C(start=
                    8157.6523, fixed=true)),
            thoracic_aorta_C96(q_in(start=2.1088634e-05, fixed=true), p_C(start=
                   8158.8774, fixed=true)),
            thoracic_aorta_C100(q_in(start=2.2088123e-05, fixed=true), p_C(
                  start=8159.9194, fixed=true)),
            thoracic_aorta_C104(q_in(start=2.2854581e-05, fixed=true), p_C(
                  start=8162.114, fixed=true)),
            thoracic_aorta_C108(q_in(start=2.4290814e-05, fixed=true), p_C(
                  start=8162.9297, fixed=true)),
            thoracic_aorta_C112(q_in(start=2.4761232e-05, fixed=true), p_C(
                  start=8187.013, fixed=true)),
            abdominal_aorta_C114(q_in(start=3.2020544e-05, fixed=true), p_C(
                  start=8187.9243, fixed=true)),
            abdominal_aorta_C136(q_in(start=2.5664507e-05, fixed=true), p_C(
                  start=8191.5957, fixed=true)),
            abdominal_aorta_C164(q_in(start=2.2470538e-05, fixed=true), p_C(
                  start=8192.7295, fixed=true)),
            abdominal_aorta_C176(q_in(start=1.6771812e-05, fixed=true), p_C(
                  start=8195.701, fixed=true)),
            abdominal_aorta_C188(q_in(start=1.1422025e-05, fixed=true), p_C(
                  start=8209.317, fixed=true)),
            abdominal_aorta_C192(q_in(start=1.3243349e-05, fixed=true), p_C(
                  start=8221.669, fixed=true)),
            celiac_trunk_C116(volume(start=0.0003787983, fixed=true)),
            renal_L166(volume(start=0.0003421483, fixed=true)),
            renal_R178(volume(start=0.00033908073, fixed=true)),
            common_iliac_R216(q_in(start=7.148295e-06, fixed=true), p_C(start=
                    8235.269, fixed=true)),
            internal_iliac_T1_R218(volume(start=0.00018625149, fixed=true)),
            external_iliac_R220(q_in(start=4.6497507e-06, fixed=true), p_C(
                  start=8248.854, fixed=true)),
            femoral_R222(q_in(start=4.841518e-06, fixed=true), p_C(start=
                    8250.453, fixed=true)),
            profundus_T2_R224(volume(start=0.00021364218, fixed=true)),
            femoral_R226(q_in(start=1.1526016e-06, fixed=true), p_C(start=
                    8368.622, fixed=true)),
            popliteal_R228(q_in(start=1.0749467e-06, fixed=true), p_C(start=
                    8355.449, fixed=true)),
            anterior_tibial_T3_R230(volume(start=2.805413e-05, fixed=true)),
            popliteal_R232(q_in(start=5.523804e-07, fixed=true), p_C(start=
                    8354.007, fixed=true)),
            tibiofibular_trunk_R234(q_in(start=5.5102936e-07, fixed=true), p_C(
                  start=8347.77, fixed=true)),
            posterior_tibial_T4_R236(volume(start=3.0600488e-05, fixed=true)),
            common_iliac_L194(q_in(start=7.1550144e-06, fixed=true), p_C(start=
                    8234.746, fixed=true)),
            internal_iliac_T1_L196(volume(start=0.00018625309, fixed=true)),
            external_iliac_L198(q_in(start=4.6268547e-06, fixed=true), p_C(
                  start=8248.618, fixed=true)),
            femoral_L200(q_in(start=4.820831e-06, fixed=true), p_C(start=
                    8250.319, fixed=true)),
            profundus_T2_L202(volume(start=0.00021364387, fixed=true)),
            femoral_L204(q_in(start=1.1331143e-06, fixed=true), p_C(start=
                    8369.436, fixed=true)),
            popliteal_L206(q_in(start=1.0697106e-06, fixed=true), p_C(start=
                    8356.581, fixed=true)),
            anterior_tibial_T3_L208(volume(start=2.8054417e-05, fixed=true)),
            popliteal_L210(q_in(start=5.5169625e-07, fixed=true), p_C(start=
                    8355.146, fixed=true)),
            tibiofibular_trunk_L212(q_in(start=5.504735e-07, fixed=true), p_C(
                  start=8348.942, fixed=true)),
            posterior_tibial_T4_L214(volume(start=3.060082e-05, fixed=true)),
            subclavian_R28(q_in(start=1.3332196e-06, fixed=true), p_C(start=
                    8151.873, fixed=true)),
            subclavian_R30(q_in(start=3.7289692e-07, fixed=true), p_C(start=
                    8150.507, fixed=true)),
            axillary_R32(q_in(start=6.5914685e-07, fixed=true), p_C(start=
                    8119.2188, fixed=true)),
            brachial_R34(q_in(start=9.65363e-07, fixed=true), p_C(start=
                    7995.843, fixed=true)),
            ulnar_T2_R36(q_in(start=8.351823e-07, fixed=true), p_C(start=
                    7937.8193, fixed=true)),
            ulnar_T2_R42(volume(start=7.054027e-05, fixed=true)),
            radial_T1_R44(volume(start=6.0226634e-05, fixed=true)),
            subclavian_L66(q_in(start=1.1421407e-06, fixed=true), p_C(start=
                    8152.9756, fixed=true)),
            subclavian_L78(q_in(start=4.8682733e-07, fixed=true), p_C(start=
                    8150.9355, fixed=true)),
            axillary_L80(q_in(start=6.9171165e-07, fixed=true), p_C(start=
                    8121.2036, fixed=true)),
            brachial_L82(q_in(start=9.977726e-07, fixed=true), p_C(start=
                    7999.1826, fixed=true)),
            ulnar_T2_L84(q_in(start=8.3702014e-07, fixed=true), p_C(start=
                    7941.0137, fixed=true)),
            ulnar_T2_L90(volume(start=7.0507565e-05, fixed=true)),
            radial_T1_L92(volume(start=6.4021886e-05, fixed=true)),
            common_carotid_R6_A(q_in(start=5.75735e-07, fixed=true), p_C(start=
                    8151.49, fixed=true)),
            common_carotid_R6_B(q_in(start=1.3427285e-06, fixed=true), p_C(
                  start=8150.721, fixed=true)),
            common_carotid_R6_C(q_in(start=1.9910692e-06, fixed=true), p_C(
                  start=8149.073, fixed=true)),
            internal_carotid_R8_A(q_in(start=1.1692961e-06, fixed=true), p_C(
                  start=8139.29, fixed=true)),
            internal_carotid_R8_B(q_in(start=1.2484729e-06, fixed=true), p_C(
                  start=8111.9316, fixed=true)),
            internal_carotid_R8_C(volume(start=7.628304e-05, fixed=true)),
            external_carotid_T2_R26(volume(start=7.651009e-05, fixed=true)),
            common_carotid_L48_A(q_in(start=-2.143702e-07, fixed=true), p_C(
                  start=8153.006, fixed=true)),
            common_carotid_L48_B(q_in(start=6.0929955e-07, fixed=true), p_C(
                  start=8152.1963, fixed=true)),
            common_carotid_L48_C(q_in(start=1.327905e-06, fixed=true), p_C(
                  start=8151.1313, fixed=true)),
            common_carotid_L48_D(q_in(start=1.9613522e-06, fixed=true), p_C(
                  start=8149.125, fixed=true)),
            internal_carotid_L50_A(q_in(start=1.1698519e-06, fixed=true), p_C(
                  start=8139.359, fixed=true)),
            internal_carotid_L50_B(q_in(start=1.248808e-06, fixed=true), p_C(
                  start=8111.9985, fixed=true)),
            internal_carotid_L50_C(volume(start=7.627817e-05, fixed=true)),
            external_carotid_T2_L62(volume(start=7.6501026e-05, fixed=true)),
            vertebral_L2(volume(start=7.033867e-05, fixed=true)),
            vertebral_R272(volume(start=7.0349444e-05, fixed=true)),
            superior_vena_cava_C2(q_out(start=4.0139443e-07, fixed=true),
                volume(start=1.7400467e-05, fixed=true)),
            superior_vena_cava_C88(q_out(start=-5.11873e-07, fixed=true),
                volume(start=2.9867537e-05, fixed=true)),
            inferior_vena_cava_C8(q_out(start=3.3989083e-05, fixed=true),
                volume(start=2.6015636e-05, fixed=true)),
            hepatic_vein_T1_C10(q_out(start=1.2114477e-05, fixed=true), volume(
                  start=1.0302585e-05, fixed=true)),
            inferior_vena_cava_C12(q_out(start=2.1096157e-05, fixed=true),
                volume(start=7.012346e-05, fixed=true)),
            inferior_vena_cava_C16(q_out(start=2.0244937e-05, fixed=true),
                volume(start=5.5247394e-05, fixed=true)),
            renal_vein_T1_R18(q_out(start=8.980439e-06, fixed=true), volume(
                  start=1.6379157e-05, fixed=true)),
            inferior_vena_cava_C20(q_out(start=1.1685731e-05, fixed=true),
                volume(start=3.9893766e-06, fixed=true)),
            renal_vein_T1_L22(q_out(start=9.007815e-06, fixed=true), volume(
                  start=1.4487346e-05, fixed=true)),
            inferior_vena_cava_C24(q_out(start=2.5942134e-06, fixed=true),
                volume(start=0.00015124439, fixed=true)),
            common_iliac_vein_L56(q_out(start=1.913073e-06, fixed=true), volume(
                  start=3.775999e-05, fixed=true)),
            common_iliac_vein_R26(q_out(start=1.8956033e-06, fixed=true),
                volume(start=3.4712153e-05, fixed=true)),
            external_iliac_vein_R28(q_out(start=2.9923035e-06, fixed=true),
                volume(start=5.124793e-06, fixed=true)),
            internal_iliac_vein_T1_R30(q_out(start=3.7505615e-06, fixed=true),
                volume(start=2.1666403e-05, fixed=true)),
            external_iliac_vein_R32(q_out(start=1.7404858e-07, fixed=true),
                volume(start=5.861464e-05, fixed=true)),
            femoral_vein_R34(q_out(start=1.3691707e-06, fixed=true), volume(
                  start=2.606894e-06, fixed=true)),
            femoral_vein_R38(q_out(start=2.212782e-06, fixed=true), volume(
                  start=2.0223493e-05, fixed=true)),
            profunda_femoris_vein_T2_R40(q_out(start=4.687715e-06, fixed=true),
                volume(start=5.6122604e-05, fixed=true)),
            femoral_vein_R42(q_out(start=-1.3348354e-06, fixed=true), volume(
                  start=0.000140775, fixed=true)),
            femoral_vein_R46(q_out(start=-2.8857053e-07, fixed=true), volume(
                  start=7.854291e-06, fixed=true)),
            popliteal_vein_R48(q_out(start=5.4619795e-07, fixed=true), volume(
                  start=3.2047952e-05, fixed=true)),
            anterior_tibial_vein_T4_R50(q_out(start=7.5491045e-07, fixed=true),
                volume(start=9.703342e-06, fixed=true)),
            popliteal_vein_R52(q_out(start=3.0993323e-07, fixed=true), volume(
                  start=7.095468e-06, fixed=true)),
            posterior_tibial_vein_T6_R54(q_out(start=8.671942e-07, fixed=true),
                volume(start=1.4004686e-05, fixed=true)),
            external_iliac_vein_L58(q_out(start=3.0164279e-06, fixed=true),
                volume(start=5.1291336e-06, fixed=true)),
            internal_iliac_vein_T1_L60(q_out(start=3.7480381e-06, fixed=true),
                volume(start=2.2283297e-05, fixed=true)),
            external_iliac_vein_L62(q_out(start=2.0983738e-07, fixed=true),
                volume(start=5.7553556e-05, fixed=true)),
            femoral_vein_L64(q_out(start=1.395349e-06, fixed=true), volume(
                  start=3.0336037e-06, fixed=true)),
            femoral_vein_L68(q_out(start=2.3025193e-06, fixed=true), volume(
                  start=2.022297e-05, fixed=true)),
            profunda_femoris_vein_T2_L70(q_out(start=4.709852e-06, fixed=true),
                volume(start=5.6124372e-05, fixed=true)),
            femoral_vein_L72(q_out(start=-1.2770064e-06, fixed=true), volume(
                  start=0.00014078102, fixed=true)),
            femoral_vein_L76(q_out(start=-2.450701e-07, fixed=true), volume(
                  start=7.853793e-06, fixed=true)),
            popliteal_vein_L78(q_out(start=5.7679836e-07, fixed=true), volume(
                  start=3.204946e-05, fixed=true)),
            anterior_tibial_vein_T4_L80(q_out(start=7.562597e-07, fixed=true),
                volume(start=9.70386e-06, fixed=true)),
            popliteal_vein_L82(q_out(start=3.2587926e-07, fixed=true), volume(
                  start=7.0955316e-06, fixed=true)),
            posterior_tibial_vein_T6_L84(q_out(start=8.706844e-07, fixed=true),
                volume(start=1.40056845e-05, fixed=true)),
            brachiocephalic_vein_R90(q_out(start=7.093807e-07, fixed=true),
                volume(start=3.5087454e-05, fixed=true)),
            brachiocephalic_vein_L124(q_out(start=-1.7055681e-06, fixed=true),
                volume(start=6.546598e-05, fixed=true)),
            vertebral_vein_R92(q_out(start=4.075558e-07, fixed=true), volume(
                  start=2.214197e-05, fixed=true)),
            brachiocephalic_vein_R94(q_out(start=3.1707663e-07, fixed=true),
                volume(start=8.081231e-06, fixed=true)),
            subclavian_vein_R96(q_out(start=-7.4763585e-07, fixed=true), volume(
                  start=4.0182103e-06, fixed=true)),
            internal_jugular_vein_R122(q_out(start=9.2450057e-07, fixed=true),
                volume(start=0.00015087804, fixed=true)),
            external_jugular_vein_R98(q_out(start=5.803802e-07, fixed=true),
                volume(start=1.0833897e-05, fixed=true)),
            subclavian_vein_R100(q_out(start=-1.7162856e-06, fixed=true),
                volume(start=1.589144e-05, fixed=true)),
            axillary_vein_R102(q_out(start=-1.342287e-06, fixed=true), volume(
                  start=5.5426073e-05, fixed=true)),
            brachial_vein_R104(q_out(start=-1.07157476e-07, fixed=true), volume(
                  start=1.09285975e-05, fixed=true)),
            brachial_vein_R114(q_out(start=-3.327617e-07, fixed=true), volume(
                  start=9.745989e-06, fixed=true)),
            brachial_vein_R108(q_out(start=7.354226e-07, fixed=true), volume(
                  start=1.5348357e-06, fixed=true)),
            ulnar_vein_T7_R110(q_out(start=1.3355308e-06, fixed=true), volume(
                  start=5.8779437e-06, fixed=true)),
            brachial_vein_R118(q_out(start=4.3680592e-07, fixed=true), volume(
                  start=9.644052e-07, fixed=true)),
            radial_vein_T3_R120(q_out(start=8.441293e-07, fixed=true), volume(
                  start=4.576075e-06, fixed=true)),
            vertebral_vein_L126(q_out(start=2.913536e-07, fixed=true), volume(
                  start=2.0691434e-05, fixed=true)),
            brachiocephalic_vein_L128(q_out(start=-1.4236309e-06, fixed=true),
                volume(start=4.1612193e-06, fixed=true)),
            subclavian_vein_L130(q_out(start=-1.7430876e-06, fixed=true),
                volume(start=3.582172e-06, fixed=true)),
            internal_jugular_vein_L156(q_out(start=3.361258e-07, fixed=true),
                volume(start=9.234849e-05, fixed=true)),
            external_jugular_vein_L132(q_out(start=4.892665e-07, fixed=true),
                volume(start=1.0609512e-05, fixed=true)),
            subclavian_vein_L134(q_out(start=-2.2368567e-06, fixed=true),
                volume(start=1.5478257e-05, fixed=true)),
            axillary_vein_L136(q_out(start=-1.482217e-06, fixed=true), volume(
                  start=5.604122e-05, fixed=true)),
            brachial_vein_L138(q_out(start=-4.798729e-08, fixed=true), volume(
                  start=1.0922659e-05, fixed=true)),
            brachial_vein_L148(q_out(start=-2.5770828e-07, fixed=true), volume(
                  start=9.750443e-06, fixed=true)),
            brachial_vein_L142(q_out(start=7.5233913e-07, fixed=true), volume(
                  start=1.5293716e-06, fixed=true)),
            ulnar_vein_T7_L144(q_out(start=1.3393222e-06, fixed=true), volume(
                  start=5.8723376e-06, fixed=true)),
            brachial_vein_L152(q_out(start=4.6773556e-07, fixed=true), volume(
                  start=9.615096e-07, fixed=true)),
            radial_vein_T3_L154(q_out(start=8.735766e-07, fixed=true), volume(
                  start=4.664636e-06, fixed=true)),
            mesenteric_artery(q_in(start=3.8074968e-06, fixed=true), p_C(start=
                    8179.5225, fixed=true)),
            coronary_arteries(q_in(start=1.4562362e-06, fixed=true), p_C(start=
                    7125.755, fixed=true)),
            cardiac_tissue(volume(start=0.00012449868, fixed=true)),
            coronary_veins(q_out(start=3.4024154e-06, fixed=true), volume(start=
                   1.056987e-06, fixed=true)),
            splanchnic_tissue(
                             volume(start=0.00027476434, fixed=true)),
            splanchnic_vein(
                           q_out(start=9.3441986e-07, fixed=true), volume(start=
                   8.59443e-05, fixed=true))),
          heartComponent(Heart1(
              mt(start=0.0, fixed=true),
              mta(start=0.15, fixed=true),
              q_lv(start=0.00013872937, fixed=true),
              q_rv(start=0.00015648652, fixed=true),
              q_la(start=7.585753e-05, fixed=true),
              q_ra(start=5.983621e-05, fixed=true))),
          pulmonaryComponent(pulmonary(
              u_pas(start=4124.156, fixed=true),
              u_pat(start=4123.835, fixed=true),
              u_par(start=4103.8496, fixed=true),
              u_pcp(start=3851.6196, fixed=true),
              u_pvn(start=1354.9792, fixed=true),
              v_pas(start=1.2992238e-06, fixed=true),
              v_pat(start=2.8688926e-05, fixed=true))));
        annotation (experiment(
            StopTime=600,
            Interval=0.01,
            Tolerance=1e-07,
            __Dymola_Algorithm="Cvode"));
      end CVS_7af_init;

      model CVS_7af_normal_init
        "Steady state initialization from 2019-08-13 12:34:33.642260 at time 79.05"
        extends ADAN_main.SystemicTree.Auxiliary.partialCVS(
          redeclare Components.Subsystems.Systemic.SystemicAV SystemicComponent(
            ascending_aorta_A(
              p_in(start=9432.151, fixed=true),
              q(start=1.8017048e-06, fixed=true),
              p2(start=9432.244, fixed=true)),
            ascending_aorta_B(q_in(start=3.6033227e-06, fixed=true), p_C(start=
                    9432.343, fixed=true)),
            ascending_aorta_C(q_in(start=5.2706323e-06, fixed=true), p_C(start=
                    9432.706, fixed=true)),
            ascending_aorta_D(q_in(start=8.233179e-06, fixed=true), p_C(start=
                    9433.283, fixed=true)),
            aortic_arch_C2(q_in(start=1.0928612e-05, fixed=true), p_C(start=
                    9434.087, fixed=true)),
            brachiocephalic_trunk_C4(q_in(start=5.8911587e-07, fixed=true), p_C(
                  start=9430.74, fixed=true)),
            aortic_arch_C46(q_in(start=1.2796993e-05, fixed=true), p_C(start=
                    9434.934, fixed=true)),
            aortic_arch_C64(q_in(start=1.4314413e-05, fixed=true), p_C(start=
                    9435.699, fixed=true)),
            aortic_arch_C94(q_in(start=1.4059624e-05, fixed=true), p_C(start=
                    9441.433, fixed=true)),
            thoracic_aorta_C96(q_in(start=1.9475665e-05, fixed=true), p_C(start=
                   9443.409, fixed=true)),
            thoracic_aorta_C100(q_in(start=2.0439405e-05, fixed=true), p_C(
                  start=9445.079, fixed=true)),
            thoracic_aorta_C104(q_in(start=2.1179227e-05, fixed=true), p_C(
                  start=9448.585, fixed=true)),
            thoracic_aorta_C108(q_in(start=2.2568647e-05, fixed=true), p_C(
                  start=9449.878, fixed=true)),
            thoracic_aorta_C112(q_in(start=2.3024118e-05, fixed=true), p_C(
                  start=9488.889, fixed=true)),
            abdominal_aorta_C114(q_in(start=3.0249475e-05, fixed=true), p_C(
                  start=9490.263, fixed=true)),
            abdominal_aorta_C136(q_in(start=2.3796749e-05, fixed=true), p_C(
                  start=9496.101, fixed=true)),
            abdominal_aorta_C164(q_in(start=2.052412e-05, fixed=true), p_C(
                  start=9497.942, fixed=true)),
            abdominal_aorta_C176(q_in(start=1.4739439e-05, fixed=true), p_C(
                  start=9503.034, fixed=true)),
            abdominal_aorta_C188(q_in(start=9.309378e-06, fixed=true), p_C(
                  start=9527.798, fixed=true)),
            abdominal_aorta_C192(q_in(start=1.1229201e-05, fixed=true), p_C(
                  start=9550.284, fixed=true)),
            celiac_trunk_C116(volume(start=0.0003713039, fixed=true)),
            renal_L166(volume(start=0.00033540695, fixed=true)),
            renal_R178(volume(start=0.0003324002, fixed=true)),
            common_iliac_R216(q_in(start=6.186815e-06, fixed=true), p_C(start=
                    9582.617, fixed=true)),
            internal_iliac_T1_R218(volume(start=0.00018261415, fixed=true)),
            external_iliac_R220(q_in(start=3.7776965e-06, fixed=true), p_C(
                  start=9636.737, fixed=true)),
            femoral_R222(q_in(start=4.064971e-06, fixed=true), p_C(start=
                    9650.642, fixed=true)),
            profundus_T2_R224(volume(start=0.00020951408, fixed=true)),
            femoral_R226(q_in(start=3.29448e-07, fixed=true), p_C(start=9913.15,
                  fixed=true)),
            popliteal_R228(q_in(start=8.846554e-07, fixed=true), p_C(start=
                    9926.723, fixed=true)),
            anterior_tibial_T3_R230(volume(start=2.7535329e-05, fixed=true)),
            popliteal_R232(q_in(start=5.423283e-07, fixed=true), p_C(start=
                    9925.695, fixed=true)),
            tibiofibular_trunk_R234(q_in(start=5.4664804e-07, fixed=true), p_C(
                  start=9921.007, fixed=true)),
            posterior_tibial_T4_R236(volume(start=3.0013412e-05, fixed=true)),
            common_iliac_L194(q_in(start=6.2074255e-06, fixed=true), p_C(start=
                    9581.166, fixed=true)),
            internal_iliac_T1_L196(volume(start=0.00018261588, fixed=true)),
            external_iliac_L198(q_in(start=3.7607097e-06, fixed=true), p_C(
                  start=9634.61, fixed=true)),
            femoral_L200(q_in(start=4.049258e-06, fixed=true), p_C(start=
                    9648.325, fixed=true)),
            profundus_T2_L202(volume(start=0.00020951548, fixed=true)),
            femoral_L204(q_in(start=3.1557664e-07, fixed=true), p_C(start=
                    9908.502, fixed=true)),
            popliteal_L206(q_in(start=8.802813e-07, fixed=true), p_C(start=
                    9921.868, fixed=true)),
            anterior_tibial_T3_L208(volume(start=2.7535592e-05, fixed=true)),
            popliteal_L210(q_in(start=5.414393e-07, fixed=true), p_C(start=
                    9920.843, fixed=true)),
            tibiofibular_trunk_L212(q_in(start=5.458468e-07, fixed=true), p_C(
                  start=9916.165, fixed=true)),
            posterior_tibial_T4_L214(volume(start=3.00137e-05, fixed=true)),
            subclavian_R28(q_in(start=1.4500527e-06, fixed=true), p_C(start=
                    9429.786, fixed=true)),
            subclavian_R30(q_in(start=4.6271776e-07, fixed=true), p_C(start=
                    9425.628, fixed=true)),
            axillary_R32(q_in(start=7.3439946e-07, fixed=true), p_C(start=
                    9375.635, fixed=true)),
            brachial_R34(q_in(start=1.0167113e-06, fixed=true), p_C(start=
                    9216.479, fixed=true)),
            ulnar_T2_R36(q_in(start=8.585643e-07, fixed=true), p_C(start=
                    9154.645, fixed=true)),
            ulnar_T2_R42(volume(start=7.0582035e-05, fixed=true)),
            radial_T1_R44(volume(start=6.27316e-05, fixed=true)),
            subclavian_L66(q_in(start=1.248775e-06, fixed=true), p_C(start=
                    9431.318, fixed=true)),
            subclavian_L78(q_in(start=5.527797e-07, fixed=true), p_C(start=
                    9425.495, fixed=true)),
            axillary_L80(q_in(start=7.4720805e-07, fixed=true), p_C(start=
                    9376.797, fixed=true)),
            brachial_L82(q_in(start=1.0313215e-06, fixed=true), p_C(start=
                    9219.486, fixed=true)),
            ulnar_T2_L84(q_in(start=8.593585e-07, fixed=true), p_C(start=
                    9157.686, fixed=true)),
            ulnar_T2_L90(volume(start=7.05545e-05, fixed=true)),
            radial_T1_L92(volume(start=6.6954475e-05, fixed=true)),
            common_carotid_R6_A(q_in(start=6.9934885e-07, fixed=true), p_C(
                  start=9429.043, fixed=true)),
            common_carotid_R6_B(q_in(start=1.4325639e-06, fixed=true), p_C(
                  start=9427.343, fixed=true)),
            common_carotid_R6_C(q_in(start=2.0523375e-06, fixed=true), p_C(
                  start=9424.806, fixed=true)),
            internal_carotid_R8_A(q_in(start=1.1918341e-06, fixed=true), p_C(
                  start=9413.713, fixed=true)),
            internal_carotid_R8_B(q_in(start=1.2675836e-06, fixed=true), p_C(
                  start=9384.456, fixed=true)),
            internal_carotid_R8_C(volume(start=7.479189e-05, fixed=true)),
            external_carotid_T2_R26(volume(start=7.500285e-05, fixed=true)),
            common_carotid_L48_A(q_in(start=-6.628598e-08, fixed=true), p_C(
                  start=9432.67, fixed=true)),
            common_carotid_L48_B(q_in(start=7.2383096e-07, fixed=true), p_C(
                  start=9430.495, fixed=true)),
            common_carotid_L48_C(q_in(start=1.413256e-06, fixed=true), p_C(
                  start=9428.246, fixed=true)),
            common_carotid_L48_D(q_in(start=2.0211596e-06, fixed=true), p_C(
                  start=9425.186, fixed=true)),
            internal_carotid_L50_A(q_in(start=1.1917137e-06, fixed=true), p_C(
                  start=9414.124, fixed=true)),
            internal_carotid_L50_B(q_in(start=1.2675783e-06, fixed=true), p_C(
                  start=9384.892, fixed=true)),
            internal_carotid_L50_C(volume(start=7.4791395e-05, fixed=true)),
            external_carotid_T2_L62(volume(start=7.499614e-05, fixed=true)),
            vertebral_L2(volume(start=6.895568e-05, fixed=true)),
            vertebral_R272(volume(start=6.896402e-05, fixed=true)),
            superior_vena_cava_C2(q_out(start=3.6519446e-05, fixed=true),
                volume(start=1.6666916e-05, fixed=true)),
            superior_vena_cava_C88(q_out(start=3.4667268e-05, fixed=true),
                volume(start=2.8663075e-05, fixed=true)),
            inferior_vena_cava_C8(q_out(start=7.216703e-05, fixed=true), volume(
                  start=2.4953839e-05, fixed=true)),
            hepatic_vein_T1_C10(q_out(start=1.2799785e-05, fixed=true), volume(
                  start=9.837904e-06, fixed=true)),
            inferior_vena_cava_C12(q_out(start=5.7593348e-05, fixed=true),
                volume(start=6.7568864e-05, fixed=true)),
            inferior_vena_cava_C16(q_out(start=4.1606512e-05, fixed=true),
                volume(start=5.316168e-05, fixed=true)),
            renal_vein_T1_R18(q_out(start=1.06307725e-05, fixed=true), volume(
                  start=1.5739792e-05, fixed=true)),
            inferior_vena_cava_C20(q_out(start=2.988862e-05, fixed=true),
                volume(start=3.791128e-06, fixed=true)),
            renal_vein_T1_L22(q_out(start=1.0696087e-05, fixed=true), volume(
                  start=1.3920869e-05, fixed=true)),
            inferior_vena_cava_C24(q_out(start=1.7772032e-05, fixed=true),
                volume(start=0.00014779942, fixed=true)),
            common_iliac_vein_L56(q_out(start=8.543848e-06, fixed=true), volume(
                  start=3.633934e-05, fixed=true)),
            common_iliac_vein_R26(q_out(start=8.722043e-06, fixed=true), volume(
                  start=3.340817e-05, fixed=true)),
            external_iliac_vein_R28(q_out(start=8.543017e-06, fixed=true),
                volume(start=4.9466457e-06, fixed=true)),
            internal_iliac_vein_T1_R30(q_out(start=4.951301e-06, fixed=true),
                volume(start=2.0880017e-05, fixed=true)),
            external_iliac_vein_R32(q_out(start=3.2320868e-06, fixed=true),
                volume(start=5.6477198e-05, fixed=true)),
            femoral_vein_R34(q_out(start=3.4388368e-06, fixed=true), volume(
                  start=2.5251745e-06, fixed=true)),
            femoral_vein_R38(q_out(start=3.2448822e-06, fixed=true), volume(
                  start=1.9503608e-05, fixed=true)),
            profunda_femoris_vein_T2_R40(q_out(start=4.6559876e-06, fixed=true),
                volume(start=5.4047057e-05, fixed=true)),
            femoral_vein_R42(q_out(start=-1.1130196e-06, fixed=true), volume(
                  start=0.00013761691, fixed=true)),
            femoral_vein_R46(q_out(start=-5.140719e-07, fixed=true), volume(
                  start=7.6044225e-06, fixed=true)),
            popliteal_vein_R48(q_out(start=4.4018527e-08, fixed=true), volume(
                  start=3.0856816e-05, fixed=true)),
            anterior_tibial_vein_T4_R50(q_out(start=6.379441e-07, fixed=true),
                volume(start=9.252236e-06, fixed=true)),
            popliteal_vein_R52(q_out(start=2.7023646e-08, fixed=true), volume(
                  start=6.8677523e-06, fixed=true)),
            posterior_tibial_vein_T6_R54(q_out(start=6.399754e-07, fixed=true),
                volume(start=1.3448557e-05, fixed=true)),
            external_iliac_vein_L58(q_out(start=8.393019e-06, fixed=true),
                volume(start=4.952e-06, fixed=true)),
            internal_iliac_vein_T1_L60(q_out(start=4.9141813e-06, fixed=true),
                volume(start=2.1473894e-05, fixed=true)),
            external_iliac_vein_L62(q_out(start=3.1465206e-06, fixed=true),
                volume(start=5.5449156e-05, fixed=true)),
            femoral_vein_L64(q_out(start=3.3660658e-06, fixed=true), volume(
                  start=2.9402636e-06, fixed=true)),
            femoral_vein_L68(q_out(start=3.2485116e-06, fixed=true), volume(
                  start=1.950327e-05, fixed=true)),
            profunda_femoris_vein_T2_L70(q_out(start=4.6539813e-06, fixed=true),
                volume(start=5.404827e-05, fixed=true)),
            femoral_vein_L72(q_out(start=-1.0943824e-06, fixed=true), volume(
                  start=0.00013762311, fixed=true)),
            femoral_vein_L76(q_out(start=-4.9616864e-07, fixed=true), volume(
                  start=7.603652e-06, fixed=true)),
            popliteal_vein_L78(q_out(start=6.274523e-08, fixed=true), volume(
                  start=3.0857664e-05, fixed=true)),
            anterior_tibial_vein_T4_L80(q_out(start=6.395211e-07, fixed=true),
                volume(start=9.252644e-06, fixed=true)),
            popliteal_vein_L82(q_out(start=3.7421422e-08, fixed=true), volume(
                  start=6.8673257e-06, fixed=true)),
            posterior_tibial_vein_T6_L84(q_out(start=6.44393e-07, fixed=true),
                volume(start=1.3449279e-05, fixed=true)),
            brachiocephalic_vein_R90(q_out(start=1.7694296e-05, fixed=true),
                volume(start=3.3694872e-05, fixed=true)),
            brachiocephalic_vein_L124(q_out(start=1.526268e-05, fixed=true),
                volume(start=6.3067084e-05, fixed=true)),
            vertebral_vein_R92(q_out(start=2.2046977e-06, fixed=true), volume(
                  start=2.1320542e-05, fixed=true)),
            brachiocephalic_vein_R94(q_out(start=1.3910658e-05, fixed=true),
                volume(start=7.720086e-06, fixed=true)),
            subclavian_vein_R96(q_out(start=8.063601e-06, fixed=true), volume(
                  start=3.79637e-06, fixed=true)),
            internal_jugular_vein_R122(q_out(start=4.1341805e-06, fixed=true),
                volume(start=0.00014651944, fixed=true)),
            external_jugular_vein_R98(q_out(start=2.344994e-06, fixed=true),
                volume(start=1.0449324e-05, fixed=true)),
            subclavian_vein_R100(q_out(start=3.8744106e-06, fixed=true), volume(
                  start=1.5257209e-05, fixed=true)),
            axillary_vein_R102(q_out(start=2.3877894e-06, fixed=true), volume(
                  start=5.3343752e-05, fixed=true)),
            brachial_vein_R104(q_out(start=7.6234585e-07, fixed=true), volume(
                  start=1.0582357e-05, fixed=true)),
            brachial_vein_R114(q_out(start=5.0466053e-07, fixed=true), volume(
                  start=9.4847555e-06, fixed=true)),
            brachial_vein_R108(q_out(start=1.1972451e-06, fixed=true), volume(
                  start=1.501453e-06, fixed=true)),
            ulnar_vein_T7_R110(q_out(start=1.3592793e-06, fixed=true), volume(
                  start=5.852776e-06, fixed=true)),
            brachial_vein_R118(q_out(start=9.5298486e-07, fixed=true), volume(
                  start=9.467853e-07, fixed=true)),
            radial_vein_T3_R120(q_out(start=9.927978e-07, fixed=true), volume(
                  start=5.0166336e-06, fixed=true)),
            vertebral_vein_L126(q_out(start=1.9593772e-06, fixed=true), volume(
                  start=1.9938567e-05, fixed=true)),
            brachiocephalic_vein_L128(q_out(start=1.20154655e-05, fixed=true),
                volume(start=3.9517995e-06, fixed=true)),
            subclavian_vein_L130(q_out(start=6.870467e-06, fixed=true), volume(
                  start=3.393079e-06, fixed=true)),
            internal_jugular_vein_L156(q_out(start=3.5104272e-06, fixed=true),
                volume(start=8.903109e-05, fixed=true)),
            external_jugular_vein_L132(q_out(start=2.0748741e-06, fixed=true),
                volume(start=1.0243824e-05, fixed=true)),
            subclavian_vein_L134(q_out(start=3.1464783e-06, fixed=true), volume(
                  start=1.4879149e-05, fixed=true)),
            axillary_vein_L136(q_out(start=1.93058e-06, fixed=true), volume(
                  start=5.3957174e-05, fixed=true)),
            brachial_vein_L138(q_out(start=6.45256e-07, fixed=true), volume(
                  start=1.0577513e-05, fixed=true)),
            brachial_vein_L148(q_out(start=4.531095e-07, fixed=true), volume(
                  start=9.495577e-06, fixed=true)),
            brachial_vein_L142(q_out(start=1.1322845e-06, fixed=true), volume(
                  start=1.4978949e-06, fixed=true)),
            ulnar_vein_T7_L144(q_out(start=1.3597121e-06, fixed=true), volume(
                  start=5.847769e-06, fixed=true)),
            brachial_vein_L152(q_out(start=9.405895e-07, fixed=true), volume(
                  start=9.463207e-07, fixed=true)),
            radial_vein_T3_L154(q_out(start=1.0367514e-06, fixed=true), volume(
                  start=5.1592915e-06, fixed=true)),
            mesenteric_artery(q_in(start=3.8884828e-06, fixed=true), p_C(start=
                    9481.713, fixed=true)),
            coronary_arteries(q_in(start=1.5450876e-06, fixed=true), p_C(start=
                    8345.853, fixed=true)),
            cardiac_tissue(volume(start=0.0001224221, fixed=true)),
            coronary_veins(q_out(start=3.5532923e-06, fixed=true), volume(start=
                   9.415388e-07, fixed=true)),
            redeclare
              Components.Subsystems.Systemic.Parametrization.SystemicTissueParameters_Calculated
              tissueParameters(arterioles_pressure=15998.7),
            baroreceptor_aortic(Ts=3.0, epsilon_start=1.25),
            baroreceptor_carotid(
              Ts=3.0,
              epsilon_start=1.075,
              s_start=0.96),
            baroreflex(
              resetAt=0.0,
              fiSN_start=0.2525,
              fsn=0.0215),
            splanchnic_tissue(
                             volume(start=0.00026938305, fixed=true)),
            splanchnic_vein(
                           q_out(start=1.4603502e-05, fixed=true), volume(start=
                   8.267976e-05, fixed=true))),
          heartComponent(Heart1(
              mt(start=0.05, fixed=true),
              mta(start=0.2, fixed=true),
              q_lv(start=0.00013877999, fixed=true),
              q_rv(start=0.0001466447, fixed=true),
              q_la(start=9.209094e-05, fixed=true),
              q_ra(start=6.0079725e-05, fixed=true))),
          pulmonaryComponent(pulmonary(
              u_pas(start=3871.5508, fixed=true),
              u_pat(start=3871.314, fixed=true),
              u_par(start=3863.3025, fixed=true),
              u_pcp(start=3634.0552, fixed=true),
              u_pvn(start=1266.1965, fixed=true),
              v_pas(start=1.0003076e-06, fixed=true),
              v_pat(start=2.2090626e-05, fixed=true))));
      end CVS_7af_normal_init;

      package Experiments

        model simple_phi_base
          extends CVS_7af(
            phi_fixed(
              amplitude=0.74,
              rising=200,
              width=50,
              period=1000,
              startTime=50),
            redeclare Components.Subsystems.Pulmonary.Pulmonary_Smith
              pulmonaryComponent(UseThoracic_PressureInput=true),
            redeclare Components.Subsystems.Heart.Heart_Smith heartComponent(
                UseFrequencyInput=true, UseThoracic_PressureInput=
                                                                 true),
            redeclare Components.Subsystems.Systemic.Systemic_simplest
              Systemic1(
              UseThoracic_PressureInput=true,
              UsePhi_Input=true,
              baroreflex(
                resetAt=-1,
                fsn=0.025,
                g=1.0),
              baroreceptor_aortic(epsilon_start=1.19, delta0=0.3),
              baroreceptor_carotid(epsilon_start=1.06, s_start=0.96),
              ascending_aorta_B(
                UseInertance=false,
                UseVasoconstrictionEffect=false,
                l(displayUnit="m") = 2.5),
              inferior_vena_cava_C8(
                l=2.5,
                r(displayUnit="mm") = 0.008,
                compliant_vessel(tau(displayUnit="d") = 604800))),
            settings(tissues_ZPV_nom=0.0027, tissues_SV_nom=0.0004));
        equation
          connect(phi_fixed.y, condSystemicPhi.u) annotation (Line(points={{-49,
                  4},{-38,4},{-38,4.00002},{-27.2,4.00002}}, color={0,0,127}));
          connect(phi_fixed.y, condHRPhi.u) annotation (Line(points={{-49,4},{-38,
                  4},{-38,60},{40.8,60}}, color={0,0,127}));
          annotation (experiment(
              StopTime=400,
              Interval=0.11,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end simple_phi_base;

        model simple_hemorrhage
          extends CVS_7af(
            phi_fixed(
              amplitude=0.74,
              rising=200,
              width=50,
              period=1000,
              startTime=50),
            redeclare Components.Subsystems.Pulmonary.Pulmonary_Smith
              pulmonaryComponent(UseThoracic_PressureInput=true),
            redeclare Components.Subsystems.Heart.Heart_Smith heartComponent(
                UseFrequencyInput=true, UseThoracic_PressureInput=
                                                                 true),
            redeclare Components.Subsystems.Systemic.Systemic_simplest
              Systemic1(
              alphaZPV=0,
              C_fact=0,
              cfactor=0,
              gamma=0.5,
              Ra_factor=1,
              UseThoracic_PressureInput=true,
              UsePhi_Input=true,
              baroreflex(
                resetAt=-1,
                fsn=0.025,
                g=1.0),
              baroreceptor_aortic(epsilon_start=1.19, delta0=0.3),
              baroreceptor_carotid(epsilon_start=1.06, s_start=0.96),
              alphaC=0,
              ascending_aorta_B(
                UseInertance=false,
                UseVasoconstrictionEffect=true,
                l(displayUnit="m") = 2.5,
                R_vc=0.25),
              inferior_vena_cava_C8(
                l=2.5,
                r(displayUnit="mm") = 0.008,
                compliant_vessel(useViscoElasticDelay=true, tau(displayUnit="d")=
                       604800))));
          Physiolibrary.Hydraulic.Sources.UnlimitedOutflowPump
            unlimitedOutflowPump(useSolutionFlowInput=true, SolutionFlow(
                displayUnit="m3/s") = 1.6666666666667e-05)
            annotation (Placement(transformation(extent={{80,18},{100,38}})));
          Modelica.Blocks.Sources.Trapezoid trapezoid(
            amplitude=1.6666666666667e-05,
            rising=1,
            width=179,
            falling=1,
            period=1000,
            startTime=100)
            annotation (Placement(transformation(extent={{56,72},{76,92}})));
        equation
          connect(unlimitedOutflowPump.q_in, Systemic1.port_b) annotation (Line(
              points={{80,28},{18,28}},
              color={0,0,0},
              thickness=1));
          connect(trapezoid.y, unlimitedOutflowPump.solutionFlow)
            annotation (Line(points={{77,82},{90,82},{90,35}}, color={0,0,127}));
          connect(condHRPhi.u, Systemic1.phi_baroreflex) annotation (Line(
                points={{40.8,60},{8,60},{8,58},{-27.4,58},{-27.4,45.4}}, color=
                 {0,0,127}));
          connect(Systemic1.phi_baroreflex, condSystemicPhi.u) annotation (Line(
                points={{-27.4,45.4},{-27.4,24.7},{-27.2,24.7},{-27.2,4.00002}},
                color={0,0,127}));
          annotation (experiment(
              StopTime=400,
              Interval=0.11,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end simple_hemorrhage;

        model phi_HR
          extends simple_phi_base;
          annotation (experiment(
              StopTime=500,
              Interval=0.02,
              __Dymola_Algorithm="Cvode"));
        end phi_HR;

        model phi_venousTone
          extends simple_phi_base(Systemic1(inferior_vena_cava_C8(
                  compliant_vessel(tau(displayUnit="s") = 3))));
        end phi_venousTone;

        model phi_artRes
          extends simple_phi_base(Systemic1(Ra_factor=1));
        end phi_artRes;

        model phi_artComp
          extends simple_phi_base(Systemic1(redeclare model Systemic_artery =
                  Components.Subsystems.Systemic.Vessel_modules.Artery (R_vc=
                      0.25)));
        end phi_artComp;

        model phi_smithContract
          extends simple_phi_base(
            condHRPhi(disconnected=false),
            phi_fixed(rising=600, width=200),
            heartComponent(UsePhiInput=true),
            settings(
              heart_alphaE=1,
              UseNonLinear_TissuesCompliance=true,
              tissues_UseStraighteningReaction2Phi=true,
              tissues_eta_C=0.6,
              syst_art_UseVasoconstrictionEffect=false,
              veins_UseNonLinearVeins =     true));
        equation
          connect(heartComponent.phi, phi_fixed.y) annotation (Line(points={{-16,
                  -16},{-8,-16},{-8,-6},{-28,-6},{-28,4},{-49,4}}, color={0,0,
                  127}));
        end phi_smithContract;

        model tree_phi_base
          extends Auxiliary.partialCVS(
            SystemicComponent(UseThoracic_PressureInput=true, UsePhi_Input=true),
            condSystemicPhi(disconnected=true),
            phi_fixed(
              amplitude=0.74,
              rising=200,
              width=50,
              period=1000,
              startTime=50),
            redeclare Components.Subsystems.Pulmonary.Pulmonary_Smith
              pulmonaryComponent(UseThoracic_PressureInput=true),
            redeclare replaceable
              Components.Subsystems.Heart.Heart_SmithOlufsen heartComponent(
                UseFrequencyInput=true, UseThoracic_PressureInput=
                                                                 true),
            settings(
              UseNonLinear_TissuesCompliance=false,
              veins_UsePhiEffect=false,
              tissues_Pa_nom=13332.2387415,
              tissues_eta_Ra=0,
              veins_UseNonLinearVeins =     true));

        equation
          connect(phi_fixed.y, condSystemicPhi.u) annotation (Line(points={{-49,
                  4},{-38,4},{-38,4.00002},{-27.2,4.00002}}, color={0,0,127}));
          connect(phi_fixed.y, condHRPhi.u) annotation (Line(points={{-49,4},{-38,
                  4},{-38,60},{40.8,60}}, color={0,0,127}));
          annotation (experiment(
              StopTime=500,
              Interval=0.11,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end tree_phi_base;

        model tree_HR
          extends tree_phi_base(condHRPhi(disconnected=false));
        end tree_HR;

      model tree_venousTone
          extends tree_phi_base(
            condSystemicPhi(disconnected=false),
            VenousToneEffect=true,
            settings(veins_UsePhiEffect=true));
      end tree_venousTone;

      model tree_artRes
          extends tree_phi_base(
            SystemicComponent(Ra_factor=1),
            condSystemicPhi(disconnected=false),
            settings(syst_art_UseVasoconstrictionEffect=true));
      end tree_artRes;

      model tree_artComp
          parameter Physiolibrary.Types.Fraction vasoconstrictionResistanceEffect=
             0.25;
          extends tree_phi_base(
            SystemicComponent(
              UseArterialConstrictionEffect=true,
              ascending_aorta_B(R_vc=vasoconstrictionResistanceEffect),
              ascending_aorta_C(R_vc=vasoconstrictionResistanceEffect),
              ascending_aorta_D(R_vc=vasoconstrictionResistanceEffect),
              aortic_arch_C2(R_vc=vasoconstrictionResistanceEffect),
              brachiocephalic_trunk_C4(R_vc=vasoconstrictionResistanceEffect),
              aortic_arch_C46(R_vc=vasoconstrictionResistanceEffect),
              aortic_arch_C64(R_vc=vasoconstrictionResistanceEffect),
              aortic_arch_C94(R_vc=vasoconstrictionResistanceEffect),
              thoracic_aorta_C96(R_vc=vasoconstrictionResistanceEffect),
              thoracic_aorta_C100(R_vc=vasoconstrictionResistanceEffect),
              thoracic_aorta_C104(R_vc=vasoconstrictionResistanceEffect),
              thoracic_aorta_C108(R_vc=vasoconstrictionResistanceEffect),
              thoracic_aorta_C112(R_vc=vasoconstrictionResistanceEffect),
              abdominal_aorta_C136(R_vc=vasoconstrictionResistanceEffect),
              abdominal_aorta_C164(R_vc=vasoconstrictionResistanceEffect),
              abdominal_aorta_C176(R_vc=vasoconstrictionResistanceEffect),
              abdominal_aorta_C188(R_vc=vasoconstrictionResistanceEffect),
              abdominal_aorta_C192(R_vc=vasoconstrictionResistanceEffect),
              common_iliac_R216(R_vc=vasoconstrictionResistanceEffect),
              external_iliac_R220(R_vc=vasoconstrictionResistanceEffect),
              femoral_R222(R_vc=vasoconstrictionResistanceEffect),
              femoral_R226(R_vc=vasoconstrictionResistanceEffect),
              popliteal_R228(R_vc=vasoconstrictionResistanceEffect),
              popliteal_R232(R_vc=vasoconstrictionResistanceEffect),
              tibiofibular_trunk_R234(R_vc=vasoconstrictionResistanceEffect),
              common_iliac_L194(R_vc=vasoconstrictionResistanceEffect),
              external_iliac_L198(R_vc=vasoconstrictionResistanceEffect),
              femoral_L200(R_vc=vasoconstrictionResistanceEffect),
              femoral_L204(R_vc=vasoconstrictionResistanceEffect),
              popliteal_L206(R_vc=vasoconstrictionResistanceEffect),
              popliteal_L210(R_vc=vasoconstrictionResistanceEffect),
              tibiofibular_trunk_L212(R_vc=vasoconstrictionResistanceEffect),
              subclavian_R28(R_vc=vasoconstrictionResistanceEffect),
              subclavian_R30(R_vc=vasoconstrictionResistanceEffect),
              axillary_R32(R_vc=vasoconstrictionResistanceEffect),
              brachial_R34(R_vc=vasoconstrictionResistanceEffect),
              ulnar_T2_R36(R_vc=vasoconstrictionResistanceEffect),
              subclavian_L66(R_vc=vasoconstrictionResistanceEffect),
              subclavian_L78(R_vc=vasoconstrictionResistanceEffect),
              axillary_L80(R_vc=vasoconstrictionResistanceEffect),
              brachial_L82(R_vc=vasoconstrictionResistanceEffect),
              ulnar_T2_L84(R_vc=vasoconstrictionResistanceEffect),
              common_carotid_R6_A(R_vc=vasoconstrictionResistanceEffect),
              common_carotid_R6_B(R_vc=vasoconstrictionResistanceEffect),
              common_carotid_R6_C(R_vc=vasoconstrictionResistanceEffect),
              internal_carotid_R8_A(R_vc=vasoconstrictionResistanceEffect),
              internal_carotid_R8_B(R_vc=vasoconstrictionResistanceEffect),
              common_carotid_L48_A(R_vc=vasoconstrictionResistanceEffect),
              common_carotid_L48_B(R_vc=vasoconstrictionResistanceEffect),
              common_carotid_L48_C(R_vc=vasoconstrictionResistanceEffect),
              common_carotid_L48_D(R_vc=vasoconstrictionResistanceEffect),
              internal_carotid_L50_A(R_vc=vasoconstrictionResistanceEffect),
              internal_carotid_L50_B(R_vc=vasoconstrictionResistanceEffect),
              mesenteric_artery(R_vc=vasoconstrictionResistanceEffect),
              coronary_arteries(R_vc=vasoconstrictionResistanceEffect),
              abdominal_aorta_C114(R_vc=vasoconstrictionResistanceEffect)),
            condSystemicPhi(disconnected=false),
            settings(tissues_eta_Ra=1));
      end tree_artComp;

        model tree_nonlinTiss
          extends tree_phi_base(
            SystemicComponent(
              celiac_trunk_C116(UseNonLinearCompliance=true, gamma=gamma),
              renal_L166(UseNonLinearCompliance=true, gamma=gamma),
              renal_R178(UseNonLinearCompliance=true, gamma=gamma),
              internal_iliac_T1_R218(UseNonLinearCompliance=true, gamma=gamma),
              profundus_T2_R224(UseNonLinearCompliance=true, gamma=gamma),
              anterior_tibial_T3_R230(UseNonLinearCompliance=true, gamma=gamma),
              posterior_tibial_T4_R236(UseNonLinearCompliance=true, gamma=gamma),
              internal_iliac_T1_L196(UseNonLinearCompliance=true, gamma=gamma),
              profundus_T2_L202(UseNonLinearCompliance=true, gamma=gamma),
              anterior_tibial_T3_L208(UseNonLinearCompliance=true, gamma=gamma),
              posterior_tibial_T4_L214(UseNonLinearCompliance=true, gamma=gamma),
              ulnar_T2_R42(UseNonLinearCompliance=true, gamma=gamma),
              radial_T1_R44(UseNonLinearCompliance=true, gamma=gamma),
              ulnar_T2_L90(UseNonLinearCompliance=true, gamma=gamma),
              radial_T1_L92(UseNonLinearCompliance=true, gamma=gamma),
              internal_carotid_R8_C(UseNonLinearCompliance=true, gamma=gamma),
              external_carotid_T2_R26(UseNonLinearCompliance=true, gamma=gamma),
              internal_carotid_L50_C(UseNonLinearCompliance=true, gamma=gamma),
              external_carotid_T2_L62(UseNonLinearCompliance=true, gamma=gamma),
              vertebral_L2(UseNonLinearCompliance=true, gamma=gamma),
              vertebral_R272(UseNonLinearCompliance=true, gamma=gamma),
              cardiac_tissue(UseNonLinearCompliance=true, gamma=gamma),
              splanchnic_tissue(
                               UseNonLinearCompliance=true, gamma=gamma)),
            condSystemicPhi(disconnected=false),
            settings(UseNonLinear_TissuesCompliance=true));

          parameter Physiolibrary.Types.Fraction gamma=1
            "affecting Vmax and therefore nonlinearity of the tissues compliance";
        end tree_nonlinTiss;

        model tree_phi_tissuesCompliance
          extends tree_phi_base(condSystemicPhi(disconnected=false), settings(
                UseNonLinear_TissuesCompliance=true, tissues_eta_C=1));
          annotation (experiment(
              StopTime=500,
              Interval=0.02,
              __Dymola_Algorithm="Cvode"));
        end tree_phi_tissuesCompliance;

        model tree_phi_tissuesComplianceAlternative
          extends tree_phi_base(condSystemicPhi(disconnected=false), settings(
              UseNonLinear_TissuesCompliance=true,
              tissues_UseStraighteningReaction2Phi=true,
              tissues_eta_C=1));
          annotation (experiment(
              StopTime=500,
              Interval=0.02,
              __Dymola_Algorithm="Cvode"));
        end tree_phi_tissuesComplianceAlternative;

        model tree_phi_tissuesComplianceAlternative_Valsalva
          extends tree_phi_tissuesComplianceAlternative(condTP_PC(disconnected=
                  false), thoracic_pressure_ramp(
              rising=1,
              width=18,
              falling=1,
              period=80,
              nperiod=2,
              startTime=260));
        end tree_phi_tissuesComplianceAlternative_Valsalva;

        model tree_phi_tissuesComplianceAlternative_veins_Valsalva
          extends tree_phi_tissuesComplianceAlternative(
            condTP_PC(disconnected=false),
            thoracic_pressure_ramp(
              rising=1,
              width=18,
              falling=1,
              period=80,
              nperiod=2,
              startTime=260),
            settings(veins_UsePhiEffect=true));
        end tree_phi_tissuesComplianceAlternative_veins_Valsalva;

        model tree_phi_tissuesCompliance_Valsalva
          extends tree_phi_tissuesCompliance(condTP_PC(disconnected=false),
              thoracic_pressure_ramp(
              rising=1,
              width=18,
              falling=1,
              period=80,
              nperiod=2,
              startTime=260));
          annotation (experiment(
              StopTime=400,
              Interval=0.06,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end tree_phi_tissuesCompliance_Valsalva;

        model tree_autonomic_base
          extends Auxiliary.partialCVS(
            condTP_PC(disconnected=true),
            SystemicComponent(UseThoracic_PressureInput=true, UsePhi_Input=true),
            condHRPhi(disconnected=true),
            condSystemicPhi(disconnected=true),
            phi_fixed(
              amplitude=0.74,
              rising=200,
              width=50,
              period=1000,
              startTime=50),
            redeclare Components.Subsystems.Pulmonary.Pulmonary_Smith
              pulmonaryComponent(UseThoracic_PressureInput=true),
            redeclare Components.Subsystems.Heart.Heart_Smith heartComponent(
                UseFrequencyInput=true, UseThoracic_PressureInput=
                                                                 true),
            settings(
              UseNonLinear_TissuesCompliance=true,
              veins_UsePhiEffect=false,
              tissues_eta_Ra=0,
              veins_UseNonLinearVeins =     true));

        equation
          connect(SystemicComponent.phi_baroreflex, condSystemicPhi.u)
            annotation (Line(points={{-27.4,45.4},{-36,45.4},{-36,4.00002},{-27.2,
                  4.00002}}, color={0,0,127}));
          connect(SystemicComponent.phi_baroreflex, condHRPhi.u) annotation (
              Line(points={{-27.4,45.4},{-27.4,60},{40.8,60}}, color={0,0,127}));
          annotation (experiment(
              StopTime=200,
              Interval=0.02,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end tree_autonomic_base;

        model tree_auto_nonlinTiss_valsalva
          extends tree_autonomic_base(condTP_PC(disconnected=false));
          annotation (experiment(
              StopTime=80,
              Interval=0.02,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end tree_auto_nonlinTiss_valsalva;

        model tree_auto_hemorrhage
          extends tree_autonomic_base(
            condHRPhi(disconnected=false),
            condSystemicPhi(disconnected=false),
            phi_fixed(
              amplitude=0.74,
              rising=200,
              width=50,
              period=1000,
              startTime=50),
            redeclare Components.Subsystems.Pulmonary.Pulmonary_Smith
              pulmonaryComponent(UseThoracic_PressureInput=true),
            redeclare Components.Subsystems.Heart.Heart_Smith heartComponent(
                UseFrequencyInput=true, UseThoracic_PressureInput=
                                                                 true));

          Physiolibrary.Hydraulic.Sources.UnlimitedOutflowPump
            unlimitedOutflowPump(useSolutionFlowInput=true, SolutionFlow(
                displayUnit="m3/s") = 1.6666666666667e-05)
            annotation (Placement(transformation(extent={{80,18},{100,38}})));
          Modelica.Blocks.Sources.Trapezoid trapezoid(
            amplitude=1.6666666666667e-05,
            rising=1,
            width=179,
            falling=1,
            period=1000,
            startTime=100)
            annotation (Placement(transformation(extent={{56,72},{76,92}})));
        equation
          connect(unlimitedOutflowPump.q_in, SystemicComponent.port_b)
            annotation (Line(
              points={{80,28},{18,28}},
              color={0,0,0},
              thickness=1));
          connect(trapezoid.y, unlimitedOutflowPump.solutionFlow)
            annotation (Line(points={{77,82},{90,82},{90,35}}, color={0,0,127}));
          annotation (experiment(
              StopTime=500,
              Interval=0.11,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end tree_auto_hemorrhage;

        model tree_auto_allRegulations
          extends tree_autonomic_base(settings(
              tissues_UseStraighteningReaction2Phi=true,
              veins_UsePhiEffect=true,
              eta_vc=
                   0.2,
              tissues_eta_Ra=
                        0.2,
              tissues_tau_R( displayUnit="s") = 1e-3,
              tissues_eta_C =             1,
              syst_art_UseVasoconstrictionEffect=true));
          annotation (experiment(
              StopTime=300,
              Interval=0.02,
              __Dymola_Algorithm="Cvode"));
        end tree_auto_allRegulations;

        model tree_auto_valsalva_all
          extends tree_autonomic_base(condTP_PC(disconnected=false), settings(
              tissues_UseStraighteningReaction2Phi=true,
              veins_UsePhiEffect=true,
              eta_vc=0.2,
              tissues_eta_Ra=0.2,
              tissues_eta_C=1,
              syst_art_UseVasoconstrictionEffect=true));
          annotation (experiment(
              StopTime=80,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end tree_auto_valsalva_all;

        model heartRig_base
          parameter Boolean VenousToneEffect = false;

          Components.Signals.ConditionalConnection condHR(disconnectedValue=0.25,
              disconnected=true) annotation (Placement(transformation(extent={{34,
                    55.2592},{46,65.9259}})));
        Modelica.Blocks.Sources.Trapezoid           thoracic_pressure(
            amplitude=40*133,
            rising=2,
            width=20,
            falling=2,
            period=200,
            nperiod=1,
            offset=0,
            startTime=40)
            annotation (Placement(transformation(extent={{-110,-50},{-90,-30}})));
          Components.Signals.ConditionalConnection condTP(disconnectedValue=0,
              disconnected=true) annotation (Placement(transformation(extent={{-77,
                    -45.3333},{-63,-33.3333}})));
          Components.Subsystems.Baroreflex.partialHeartRate heartRate
            annotation (Placement(transformation(extent={{8,-28},{-4,-16}})));
          replaceable Components.Subsystems.Heart.Heart_ADAN_VR heartComponent(
            HR=1,
            UseFrequencyInput=true,
            UseThoracic_PressureInput=true) constrainedby
            Components.Subsystems.Heart.partialHeart(UseFrequencyInput=true,
              UseThoracic_PressureInput=true) annotation (Placement(
                transformation(extent={{-12,-32},{-32,-12}})));
          replaceable Components.Subsystems.Pulmonary.Pulmonary_ADAN_VR
            pulmonaryComponent(UseThoracic_PressureInput=true) constrainedby
            Components.Subsystems.Pulmonary.partialPulmonary
            annotation (Placement(transformation(extent={{-30,-62},{-10,-42}})));
        Modelica.Blocks.Sources.Trapezoid phi(
            amplitude=0.74,
            rising=200,
            width=50,
            period=1000,
            startTime=50,
            falling=2,
            nperiod=1,
            offset=0.25)
            annotation (Placement(transformation(extent={{-100,50},{-80,70}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume SystemicVeins(
              usePressureInput=true, P=533.28954966)
            annotation (Placement(transformation(extent={{20,0},{0,20}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume SystemicTissues(P=
                533.28954966)
            annotation (Placement(transformation(extent={{-120,-20},{-100,0}})));
        Modelica.Blocks.Sources.Trapezoid venousPressure(
            amplitude=133*20,
            rising=200,
            width=50,
            period=1000,
            startTime=50,
            falling=2,
            nperiod=1,
            offset=4*133)
            annotation (Placement(transformation(extent={{-60,20},{-40,40}})));
          Components.Signals.ConditionalConnection condHR1(disconnectedValue=4*
                133, disconnected=false) annotation (Placement(transformation(
                  extent={{-18,25.2592},{-6,35.9259}})));
        Physiolibrary.Hydraulic.Components.ElasticVesselElastance
                               aorta(
            ZeroPressureVolume=0,
            volume_start=0.0001241,
            Elastance=92165766.41999) annotation (Placement(transformation(extent={{-52,-20},
                    {-32,0}})));
          Physiolibrary.Hydraulic.Components.Resistor
                   Rsys(Resistance(displayUnit="(mmHg.s)/ml") = 145054757.50752)
            annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=180,
                origin={-70,-10})));
        equation
          connect(thoracic_pressure.y, condTP.u) annotation (Line(points={{-89,-40},
                  {-84,-40},{-84,-40},{-78.4,-40}}, color={0,0,127}));
          connect(condTP.y, heartComponent.thoracic_pressure_input) annotation (
              Line(points={{-62.3,-40},{-22,-40},{-22,-32}}, color={0,0,127}));
          connect(condTP.y, pulmonaryComponent.thoracic_pressure) annotation (Line(
                points={{-62.3,-40},{-54,-40},{-54,-62},{-20,-62}}, color={0,0,127}));
          connect(heartRate.HR, heartComponent.frequency_input)
            annotation (Line(points={{-4.12,-22},{-12,-22}}, color={0,0,127}));
          connect(condHR.y, heartRate.phi) annotation (Line(points={{46.6,60},{60,
                  60},{60,-22},{8,-22}}, color={0,0,127}));
          connect(heartComponent.pv,pulmonaryComponent. port_b) annotation (Line(
              points={{-12,-32},{10,-32},{10,-52},{-10,-52}},
              color={0,0,0},
              thickness=1));
          connect(pulmonaryComponent.port_a,heartComponent. pa) annotation (Line(
              points={{-30,-52},{-48,-52},{-48,-32},{-32,-32}},
              color={0,0,0},
              thickness=1));
          connect(condHR.u, phi.y) annotation (Line(points={{32.8,60},{-24,60},{
                  -24,60},{-79,60}}, color={0,0,127}));
          connect(heartComponent.sv, SystemicVeins.y) annotation (Line(
              points={{-12,-12},{-6,-12},{-6,10},{0,10}},
              color={0,0,0},
              thickness=1));
          connect(venousPressure.y, condHR1.u) annotation (Line(points={{-39,30},
                  {-30,30},{-30,30},{-19.2,30}}, color={0,0,127}));
          connect(condHR1.y, SystemicVeins.pressure) annotation (Line(points={{-5.4,30},
                  {30,30},{30,10},{20,10}},          color={0,0,127}));
          connect(SystemicTissues.y, Rsys.q_out) annotation (Line(
              points={{-100,-10},{-80,-10}},
              color={0,0,0},
              thickness=1));
          connect(Rsys.q_in, aorta.q_in) annotation (Line(
              points={{-60,-10},{-42,-10}},
              color={0,0,0},
              thickness=1));
          connect(aorta.q_in, heartComponent.sa) annotation (Line(
              points={{-42,-10},{-38,-10},{-38,-12},{-32,-12}},
              color={0,0,0},
              thickness=1));
          annotation (experiment(
              StopTime=500,
              Interval=0.06,
              Tolerance=1e-07,
              __Dymola_Algorithm="Dassl"));
        end heartRig_base;

        model heartRig_smith
          extends heartRig_base(redeclare
              Components.Subsystems.Pulmonary.Pulmonary_Smith pulmonaryComponent,
              venousPressure(
              rising=50,
              width=49,
              falling=1,
              offset=9*133,
              startTime=100));
          annotation (experiment(
              StopTime=300,
              Interval=0.06,
              Tolerance=1e-06,
              __Dymola_Algorithm="Dassl"));
        end heartRig_smith;

        model heartRig_smithOlufsen_phi
          extends heartRig_base(
            redeclare Components.Subsystems.Heart.Heart_SmithOlufsen
              heartComponent(
              UseFrequencyInput=true,
              UsePhiInput=true,
              UseThoracic_PressureInput=
                                       true),
            redeclare Components.Subsystems.Pulmonary.Pulmonary_Smith
              pulmonaryComponent,
            venousPressure(
              rising=50,
              width=49,
              falling=1,
              offset=9*133,
              startTime=100),
            condHR1(disconnected=true, disconnectedValue=8*133),
            condHR(disconnected=false),
            phi(amplitude=0.9, offset=0.1));
          Components.Signals.ConditionalConnection condHR2(disconnectedValue=0.25,
              disconnected=false) annotation (Placement(transformation(extent={{
                    34,37.2592},{46,47.9259}})));
          inner Components.Settings settings(heart_alphaE=1, heart_gammaE=0.02)
            annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
        equation
          connect(condHR2.u, phi.y) annotation (Line(points={{32.8,42},{6,42},{6,
                  60},{-79,60}}, color={0,0,127}));
          connect(condHR2.y, heartComponent.phi) annotation (Line(points={{46.6,42},
                  {50,42},{50,-16},{-12,-16}},     color={0,0,127}));
          annotation (experiment(
              StopTime=300,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end heartRig_smithOlufsen_phi;

        model heartRig_smith_phi
          extends heartRig_base(
            redeclare Components.Subsystems.Pulmonary.Pulmonary_Smith
              pulmonaryComponent,
            venousPressure(
              rising=50,
              width=49,
              falling=1,
              offset=9*133,
              startTime=100),
            condHR1(disconnected=true, disconnectedValue=8*133),
            condHR(disconnected=false),
            phi(amplitude=0.9, offset=0.1));
          Components.Signals.ConditionalConnection condHR2(disconnectedValue=0.25,
              disconnected=false) annotation (Placement(transformation(extent={{
                    34,37.2592},{46,47.9259}})));
          inner Components.Settings settings(heart_alphaE=1, heart_gammaE=0.02)
            annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
        equation
          connect(condHR2.u, phi.y) annotation (Line(points={{32.8,42},{6,42},{6,
                  60},{-79,60}}, color={0,0,127}));
          connect(condHR2.y, heartComponent.phi) annotation (Line(points={{46.6,42},
                  {50,42},{50,-16},{-12,-16}},     color={0,0,127}));
          annotation (experiment(
              StopTime=300,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end heartRig_smith_phi;

        model heartRig_base2
          parameter Boolean VenousToneEffect = false;

          Components.Signals.ConditionalConnection condHR(disconnectedValue=0.25,
              disconnected=true) annotation (Placement(transformation(extent={{34,
                    55.2592},{46,65.9259}})));
        Modelica.Blocks.Sources.Trapezoid           thoracic_pressure(
            amplitude=40*133,
            rising=2,
            width=20,
            falling=2,
            period=200,
            nperiod=1,
            offset=0,
            startTime=40)
            annotation (Placement(transformation(extent={{-110,-50},{-90,-30}})));
          Components.Signals.ConditionalConnection condTP(disconnectedValue=0,
              disconnected=true) annotation (Placement(transformation(extent={{-77,
                    -45.3333},{-63,-33.3333}})));
          Components.Subsystems.Baroreflex.partialHeartRate heartRate
            annotation (Placement(transformation(extent={{8,-28},{-4,-16}})));
          replaceable Components.Subsystems.Heart.Heart_SmithOlufsen
            heartComponent(
            HR=1,
            UseFrequencyInput=true,
            UseThoracic_PressureInput=true) constrainedby
            Components.Subsystems.Heart.partialHeart(UseFrequencyInput=true,
              UseThoracic_PressureInput=true) annotation (Placement(
                transformation(extent={{-12,-32},{-32,-12}})));
          replaceable Components.Subsystems.Pulmonary.Pulmonary_Smith
            pulmonaryComponent(UseThoracic_PressureInput=true) constrainedby
            Components.Subsystems.Pulmonary.partialPulmonary
            annotation (Placement(transformation(extent={{-30,-62},{-10,-42}})));
        Modelica.Blocks.Sources.Trapezoid phi(
            amplitude=0.74,
            rising=200,
            width=50,
            period=1000,
            startTime=50,
            falling=2,
            nperiod=1,
            offset=0.25)
            annotation (Placement(transformation(extent={{-100,50},{-80,70}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume SystemicVeins(
              usePressureInput=true, P=533.28954966)
            annotation (Placement(transformation(extent={{20,0},{0,20}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume SystemicTissues(P=
                13332.2387415)
            annotation (Placement(transformation(extent={{-120,-20},{-100,0}})));
        Modelica.Blocks.Sources.Trapezoid venousPressure(
            amplitude=133*30,
            rising=200,
            width=50,
            period=1000,
            startTime=50,
            falling=2,
            nperiod=1,
            offset=-15*133)
            annotation (Placement(transformation(extent={{-60,20},{-40,40}})));
          Components.Signals.ConditionalConnection condHR1(disconnectedValue=4*
                133, disconnected=false) annotation (Placement(transformation(
                  extent={{-18,25.2592},{-6,35.9259}})));
        Physiolibrary.Hydraulic.Components.ElasticVesselElastance
                               aorta(
            ZeroPressureVolume=0,
            volume_start=0.0001241,
            Elastance=92165766.41999) annotation (Placement(transformation(extent={{-52,-20},
                    {-32,0}})));
          Physiolibrary.Hydraulic.Components.Resistor
                   Rsys(Resistance(displayUnit="(mmHg.min)/l") = 7.9993432449)
            annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=180,
                origin={-70,-10})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume pulmonaryVeins(
              usePressureInput=true, P=533.28954966)
            annotation (Placement(transformation(extent={{84,-42},{64,-22}})));
          Physiolibrary.Hydraulic.Components.Resistor
                   Rsys1(Resistance(displayUnit="(mmHg.min)/l") = 7999343.2449)
            annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=180,
                origin={28,-52})));
        equation
          connect(thoracic_pressure.y, condTP.u) annotation (Line(points={{-89,-40},
                  {-84,-40},{-84,-40},{-78.4,-40}}, color={0,0,127}));
          connect(condTP.y, heartComponent.thoracic_pressure_input) annotation (
              Line(points={{-62.3,-40},{-22,-40},{-22,-32}}, color={0,0,127}));
          connect(condTP.y, pulmonaryComponent.thoracic_pressure) annotation (Line(
                points={{-62.3,-40},{-54,-40},{-54,-62},{-20,-62}}, color={0,0,127}));
          connect(heartRate.HR, heartComponent.frequency_input)
            annotation (Line(points={{-4.12,-22},{-12,-22}}, color={0,0,127}));
          connect(condHR.y, heartRate.phi) annotation (Line(points={{46.6,60},{60,
                  60},{60,-22},{8,-22}}, color={0,0,127}));
          connect(pulmonaryComponent.port_a,heartComponent. pa) annotation (Line(
              points={{-30,-52},{-48,-52},{-48,-32},{-32,-32}},
              color={0,0,0},
              thickness=1));
          connect(condHR.u, phi.y) annotation (Line(points={{32.8,60},{-24,60},{
                  -24,60},{-79,60}}, color={0,0,127}));
          connect(heartComponent.sv, SystemicVeins.y) annotation (Line(
              points={{-12,-12},{-6,-12},{-6,10},{0,10}},
              color={0,0,0},
              thickness=1));
          connect(venousPressure.y, condHR1.u) annotation (Line(points={{-39,30},
                  {-30,30},{-30,30},{-19.2,30}}, color={0,0,127}));
          connect(condHR1.y, SystemicVeins.pressure) annotation (Line(points={{-5.4,30},
                  {30,30},{30,10},{20,10}},          color={0,0,127}));
          connect(SystemicTissues.y, Rsys.q_out) annotation (Line(
              points={{-100,-10},{-80,-10}},
              color={0,0,0},
              thickness=1));
          connect(Rsys.q_in, aorta.q_in) annotation (Line(
              points={{-60,-10},{-42,-10}},
              color={0,0,0},
              thickness=1));
          connect(aorta.q_in, heartComponent.sa) annotation (Line(
              points={{-42,-10},{-38,-10},{-38,-12},{-32,-12}},
              color={0,0,0},
              thickness=1));
          connect(pulmonaryVeins.y, heartComponent.pv) annotation (Line(
              points={{64,-32},{-12,-32}},
              color={0,0,0},
              thickness=1));
          connect(pulmonaryVeins.pressure, SystemicVeins.pressure) annotation (
              Line(points={{84,-32},{84,10},{20,10}}, color={0,0,127}));
          connect(pulmonaryComponent.port_b, Rsys1.q_out) annotation (Line(
              points={{-10,-52},{18,-52}},
              color={0,0,0},
              thickness=1));
          connect(Rsys1.q_in, pulmonaryVeins.y) annotation (Line(
              points={{38,-52},{52,-52},{52,-32},{64,-32}},
              color={0,0,0},
              thickness=1));
          annotation (experiment(
              StopTime=300,
              Interval=0.02,
              Tolerance=1e-07,
              __Dymola_Algorithm="Dassl"));
        end heartRig_base2;

        model heartRig_base2_mynards
          extends heartRig_base2(redeclare
              Components.Subsystems.Heart.Heart_SmithOlufsenMynard
              heartComponent);
        end heartRig_base2_mynards;

        model heartRig_base2TriSeg
          parameter Boolean VenousToneEffect = false;

          Components.Signals.ConditionalConnection condHR(disconnectedValue=0.25,
              disconnected=true) annotation (Placement(transformation(extent={{34,
                    55.2592},{46,65.9259}})));
        Modelica.Blocks.Sources.Trapezoid           thoracic_pressure(
            amplitude=40*133,
            rising=2,
            width=20,
            falling=2,
            period=200,
            nperiod=1,
            offset=0,
            startTime=40)
            annotation (Placement(transformation(extent={{-110,-50},{-90,-30}})));
          Components.Signals.ConditionalConnection condTP(disconnectedValue=0,
              disconnected=true) annotation (Placement(transformation(extent={{-77,
                    -45.3333},{-63,-33.3333}})));
          Components.Subsystems.Baroreflex.partialHeartRate heartRate
            annotation (Placement(transformation(extent={{8,-28},{-4,-16}})));
          replaceable Components.Subsystems.Pulmonary.Pulmonary_Smith
            pulmonaryComponent(UseThoracic_PressureInput=true) constrainedby
            Components.Subsystems.Pulmonary.partialPulmonary
            annotation (Placement(transformation(extent={{-30,-62},{-10,-42}})));
        Modelica.Blocks.Sources.Trapezoid phi(
            amplitude=0.74,
            rising=200,
            width=50,
            period=1000,
            startTime=50,
            falling=2,
            nperiod=1,
            offset=0.25)
            annotation (Placement(transformation(extent={{-100,50},{-80,70}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume SystemicVeins(
              usePressureInput=true, P=533.28954966)
            annotation (Placement(transformation(extent={{20,0},{0,20}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume SystemicTissues(P=13332.2387415)
            annotation (Placement(transformation(extent={{-120,-20},{-100,0}})));
        Modelica.Blocks.Sources.Trapezoid venousPressure(
            amplitude=133*30,
            rising=200,
            width=50,
            period=1000,
            startTime=50,
            falling=2,
            nperiod=1,
            offset=-15*133)
            annotation (Placement(transformation(extent={{-60,20},{-40,40}})));
          Components.Signals.ConditionalConnection condHR1(disconnectedValue=4*
                133, disconnected=false) annotation (Placement(transformation(
                  extent={{-18,25.2592},{-6,35.9259}})));
        Physiolibrary.Hydraulic.Components.ElasticVesselElastance
                               aorta(
            ZeroPressureVolume=0,
            volume_start=0.0001241,
            Elastance=92165766.41999) annotation (Placement(transformation(extent={{-52,-20},
                    {-32,0}})));
          Physiolibrary.Hydraulic.Components.Resistor
                   Rsys(Resistance(displayUnit="(mmHg.min)/l") = 7.9993432449)
            annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=180,
                origin={-70,-10})));
          Physiolibrary.Hydraulic.Sources.UnlimitedVolume pulmonaryVeins(
              usePressureInput=true, P=533.28954966)
            annotation (Placement(transformation(extent={{84,-42},{64,-22}})));
          Physiolibrary.Hydraulic.Components.Resistor
                   Rsys1(Resistance(displayUnit="(mmHg.min)/l") = 7999343.2449)
            annotation (Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=180,
                origin={28,-52})));
          Cardiovascular.Model.Complex.Components.Heart heart
            annotation (Placement(transformation(extent={{-10,-12},{-30,-32}})));
          inner
            Components.Subsystems.Heart.Auxiliary.TriSeg_components.Environment.ComplexEnvironment
            settings(condition(heartBeat(displayUnit="1/min") = 1.25))
            annotation (Placement(transformation(extent={{-100,80},{-80,100}})));

                       Physiolibrary.Types.Volume SV_LV;
            Physiolibrary.Types.VolumeFlowRate CO_LV=SV_LV/
                settings.HeartRate "CO using SV x HR";
            Physiolibrary.Types.Volume CO_beat;
           //     Physiolibrary.Types.VolumeFlowRate CO_LV2 "CO using integration-reset";
          Physiolibrary.Types.Volume ESV_LV_m;
             Physiolibrary.Types.Volume ESV_LV;
          Physiolibrary.Types.Volume EDV_LV_m;
             Physiolibrary.Types.Volume EDV_LV;
             parameter Physiolibrary.Types.Time tau = 1e-3 "integration time for claculation ESV and EDV";
        equation
          der(CO_beat) = - heart.leftHeartOutflow.q;
           if heart.heart.ventricles.VLV > EDV_LV_m then
             der(EDV_LV_m)*tau = heart.heart.ventricles.VLV - EDV_LV_m;
           else
             der(EDV_LV_m) = 0;
           end if;

           if heart.heart.ventricles.VLV < ESV_LV_m then
             der(ESV_LV_m)*tau = heart.heart.ventricles.VLV - ESV_LV_m;
           else
             der(ESV_LV_m) = 0;
           end if;

          when heart.heart.ventricles.LW.beat then
             EDV_LV = EDV_LV_m;
            ESV_LV = ESV_LV_m;
             reinit(EDV_LV_m, 0);
             reinit(ESV_LV_m, 1e-3);

             reinit(CO_beat, 0);

            SV_LV = EDV_LV - ESV_LV;
          end when;

          connect(thoracic_pressure.y, condTP.u) annotation (Line(points={{-89,-40},
                  {-84,-40},{-84,-40},{-78.4,-40}}, color={0,0,127}));
          connect(condTP.y, pulmonaryComponent.thoracic_pressure) annotation (Line(
                points={{-62.3,-40},{-54,-40},{-54,-62},{-20,-62}}, color={0,0,127}));
          connect(condHR.y, heartRate.phi) annotation (Line(points={{46.6,60},{60,
                  60},{60,-22},{8,-22}}, color={0,0,127}));
          connect(condHR.u, phi.y) annotation (Line(points={{32.8,60},{-24,60},{
                  -24,60},{-79,60}}, color={0,0,127}));
          connect(venousPressure.y, condHR1.u) annotation (Line(points={{-39,30},
                  {-30,30},{-30,30},{-19.2,30}}, color={0,0,127}));
          connect(condHR1.y, SystemicVeins.pressure) annotation (Line(points={{-5.4,30},
                  {30,30},{30,10},{20,10}},          color={0,0,127}));
          connect(SystemicTissues.y, Rsys.q_out) annotation (Line(
              points={{-100,-10},{-80,-10}},
              color={0,0,0},
              thickness=1));
          connect(Rsys.q_in, aorta.q_in) annotation (Line(
              points={{-60,-10},{-42,-10}},
              color={0,0,0},
              thickness=1));
          connect(pulmonaryVeins.pressure, SystemicVeins.pressure)
            annotation (Line(points={{84,-32},{84,10},{20,10}}, color={0,0,127}));
          connect(pulmonaryComponent.port_b, Rsys1.q_out) annotation (Line(
              points={{-10,-52},{18,-52}},
              color={0,0,0},
              thickness=1));
          connect(Rsys1.q_in, pulmonaryVeins.y) annotation (Line(
              points={{38,-52},{52,-52},{52,-32},{64,-32}},
              color={0,0,0},
              thickness=1));
          connect(heart.rightHeartInflow, SystemicVeins.y) annotation (Line(
              points={{-10.2,-20},{-6,-20},{-6,10},{0,10}},
              color={0,0,0},
              thickness=1));
          connect(heart.rightHeartOutflow, pulmonaryComponent.port_a) annotation (Line(
              points={{-10,-24},{-10,-40},{-30,-40},{-30,-52}},
              color={0,0,0},
              thickness=1));
          connect(heart.leftHeartInflow, pulmonaryVeins.y) annotation (Line(
              points={{-30,-24},{-30,-32},{64,-32}},
              color={0,0,0},
              thickness=1));
          connect(heart.leftHeartOutflow, aorta.q_in) annotation (Line(
              points={{-30,-20.2},{-30,-10},{-42,-10}},
              color={0,0,0},
              thickness=1));
          annotation (experiment(
              StopTime=300,
              Interval=0.02,
              Tolerance=1e-07,
              __Dymola_Algorithm="Sdirk34hw"));
        end heartRig_base2TriSeg;

        model tree_tilt_base
          extends partialCVS_leveled(
            condSystemicPhi(disconnected=true),
            redeclare replaceable
              Components.Subsystems.Pulmonary.Pulmonary_Smith
              pulmonaryComponent(UseThoracic_PressureInput=true),
            redeclare replaceable Components.Subsystems.Heart.Heart_Smith
              heartComponent(UseFrequencyInput=true, UseThoracic_PressureInput=
                  true),
            settings(
              UseNonLinear_TissuesCompliance=true,
              tissues_UseStraighteningReaction2Phi=true,
              tissues_eta_C=1,
              syst_art_UseVasoconstrictionEffect=true,
              veins_UseNonLinearVeins =     true),
            Tilt_ramp(height=(Modelica.Constants.pi/2)/90*80, startTime=100));
        equation
          connect(SystemicComponent.phi_baroreflex, condSystemicPhi.u)
            annotation (Line(points={{-27.4,45.4},{-38,45.4},{-38,4.00002},{-27.2,
                  4.00002}}, color={0,0,127}));
          connect(SystemicComponent.phi_baroreflex, condHRPhi.u) annotation (
              Line(points={{-27.4,45.4},{-18,45.4},{-18,60},{40.8,60}}, color={
                  0,0,127}));
          annotation (experiment(
              StopTime=500,
              Interval=0.02,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end tree_tilt_base;

        model tree_tilt_all
          extends tree_tilt_base(
            condHRPhi(disconnected=false),
            condSystemicPhi(disconnected=false),
            settings(heart_alphaE=1));
          annotation (experiment(
              StopTime=120,
              Interval=0.02,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end tree_tilt_all;

        model tree_tilt_all_Matsushima
          extends tree_tilt_base(
            condHRPhi(disconnected=false),
            condSystemicPhi(disconnected=false),
            Tilt_ramp(height=(Modelica.Constants.pi/2)/90*60, duration=4),
            settings(syst_art_UseVasoconstrictionEffect=true));
          annotation (experiment(
              StopTime=500,
              Interval=0.04,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end tree_tilt_all_Matsushima;

        model tree_tilt_all_valsalva
          extends tree_tilt_base(
            condTP_PC(disconnected=false),
            condHRPhi(disconnected=false),
            condSystemicPhi(disconnected=false),
            thoracic_pressure_ramp(
              rising=1,
              width=18,
              falling=1,
              period=300,
              nperiod=-1,
              startTime=150));
          annotation (experiment(
              StopTime=400,
              Interval=0.06,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end tree_tilt_all_valsalva;

        model tree_Exercise
          extends tree_phi_base(
            SystemicComponent(
              UseOuter_PressureInput=true,
              UseExerciseInput=true,
              anterior_tibial_T3_R230(UseExercise=true),
              posterior_tibial_T4_R236(UseExercise=true),
              posterior_tibial_T4_L214(UseExercise=true),
              anterior_tibial_T3_L208(UseExercise=true),
              profundus_T2_R224(UseExercise=true),
              profundus_T2_L202(UseExercise=true),
              profunda_femoris_vein_T2_R40(
                UseOuter_external_pressure=false,
                LimitBackflow=false,
                G_off(displayUnit="ml/(mmHg.min)") = 1.2501026264094e-10,
                Pknee(displayUnit="Pa") = 10),
              anterior_tibial_vein_T4_R50(
                UseOuter_external_pressure=false,
                LimitBackflow=false,
                G_off(displayUnit="ml/(mmHg.min)") = 1.2501026264094e-10,
                Pknee(displayUnit="Pa") = 10),
              posterior_tibial_vein_T6_R54(
                UseOuter_external_pressure=false,
                LimitBackflow=false,
                G_off(displayUnit="ml/(mmHg.min)") = 1.2501026264094e-10,
                Pknee(displayUnit="Pa") = 10),
              posterior_tibial_vein_T6_L84(
                UseOuter_external_pressure=false,
                LimitBackflow=false,
                G_off(displayUnit="ml/(mmHg.min)") = 1.2501026264094e-10,
                Pknee(displayUnit="Pa") = 10),
              anterior_tibial_vein_T4_L80(
                UseOuter_external_pressure=false,
                LimitBackflow=false,
                G_off(displayUnit="ml/(mmHg.min)") = 1.2501026264094e-10,
                Pknee(displayUnit="Pa") = 10),
              profunda_femoris_vein_T2_L70(
                UseOuter_external_pressure=false,
                LimitBackflow=false,
                G_off(displayUnit="ml/(mmHg.min)") = 1.2501026264094e-10,
                Pknee(displayUnit="Pa") = 10),
              popliteal_vein_R52(UseOuter_external_pressure=false,
                  LimitBackflow=false),
              popliteal_vein_L82(UseOuter_external_pressure=false,
                  LimitBackflow=false),
              popliteal_vein_L78(UseOuter_external_pressure=false,
                  LimitBackflow=false),
              popliteal_vein_R48(UseOuter_external_pressure=false,
                  LimitBackflow=false),
              radial_T1_R44(UseExercise=false, exercise_ratio=0.4),
              ulnar_T2_R42(UseExercise=false, exercise_ratio=0.4),
              ulnar_T2_L90(UseExercise=false, exercise_ratio=0.4),
              radial_T1_L92(UseExercise=false, exercise_ratio=0.4),
              cardiac_tissue(UseExercise=true),
              internal_iliac_T1_R218(UseExercise=false, exercise_ratio=0.4),
              internal_iliac_T1_L196(UseExercise=false, exercise_ratio=0.4)),
            condHRPhi(disconnected=false),
            condSystemicPhi(disconnected=false),
            phi_fixed(amplitude=0.75),
            settings(
              heart_alphaE(displayUnit="1") = 1,
              UseNonLinear_TissuesCompliance=true,
              tissues_UseStraighteningReaction2Phi=true,
              veins_UsePhiEffect=true,
              eta_vc=1,
              tissues_Pa_nom(displayUnit="mmHg"),
              tissues_Pv_nom=1066.57909932,
              tissues_eta_Ra=0.1,
              tissues_eta_Rv=settings.tissues_eta_Ra,
              tissues_tau_R(displayUnit="s") = 1e-3,
              tissues_eta_C=0.6,
              veins_chi_pump=0.2,
              syst_art_UseVasoconstrictionEffect=true,
              tissues_chi_Ra(
                            displayUnit="%") = 10,
              tissues_chi_C=
                           1),
            heartComponent(UsePhiInput=true));
        Modelica.Blocks.Sources.Trapezoid Exercfise(
            amplitude=1,
            rising=200,
            width=20,
            falling=2,
            period=500,
            nperiod=1,
            offset=0,
            startTime=40)
            annotation (Placement(transformation(extent={{-100,50},{-80,70}})));
        Modelica.Blocks.Sources.Trapezoid LegMuscleContractions(
            amplitude=80000,
            rising=0.15,
            width=0.1,
            falling=0.15,
            period=1,
            nperiod=-1,
            offset=0,
            startTime=40)
            annotation (Placement(transformation(extent={{-100,24},{-80,44}})));
        equation
          connect(Exercfise.y, SystemicComponent.exercise_input) annotation (
              Line(points={{-79,60},{-28,60},{-28,36}}, color={0,0,127}));
          connect(LegMuscleContractions.y, SystemicComponent.Outer_pressure_input)
            annotation (Line(points={{-79,34},{-28,34},{-28,20}}, color={0,0,
                  127}));
          connect(condSystemicPhi.y, heartComponent.phi) annotation (Line(
                points={{-13.4,4.00002},{-4,4.00002},{-4,-16},{-16,-16}}, color=
                 {0,0,127}));
          annotation (experiment(
              StopTime=300,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end tree_Exercise;

        model tree_ExercisePlusArms
          extends tree_phi_base(
            SystemicComponent(
              UseOuter_PressureInput=true,
              UseExerciseInput=true,
              anterior_tibial_T3_R230(UseExercise=true),
              posterior_tibial_T4_R236(UseExercise=true),
              posterior_tibial_T4_L214(UseExercise=true),
              anterior_tibial_T3_L208(UseExercise=true),
              profundus_T2_R224(UseExercise=true),
              profundus_T2_L202(UseExercise=true),
              profunda_femoris_vein_T2_R40(
                UseOuter_external_pressure=false,
                LimitBackflow=false,
                G_off(displayUnit="ml/(mmHg.min)") = 1.2501026264094e-10,
                Pknee(displayUnit="Pa") = 10),
              anterior_tibial_vein_T4_R50(
                UseOuter_external_pressure=false,
                LimitBackflow=false,
                G_off(displayUnit="ml/(mmHg.min)") = 1.2501026264094e-10,
                Pknee(displayUnit="Pa") = 10),
              posterior_tibial_vein_T6_R54(
                UseOuter_external_pressure=false,
                LimitBackflow=false,
                G_off(displayUnit="ml/(mmHg.min)") = 1.2501026264094e-10,
                Pknee(displayUnit="Pa") = 10),
              posterior_tibial_vein_T6_L84(
                UseOuter_external_pressure=false,
                LimitBackflow=false,
                G_off(displayUnit="ml/(mmHg.min)") = 1.2501026264094e-10,
                Pknee(displayUnit="Pa") = 10),
              anterior_tibial_vein_T4_L80(
                UseOuter_external_pressure=false,
                LimitBackflow=false,
                G_off(displayUnit="ml/(mmHg.min)") = 1.2501026264094e-10,
                Pknee(displayUnit="Pa") = 10),
              profunda_femoris_vein_T2_L70(
                UseOuter_external_pressure=false,
                LimitBackflow=false,
                G_off(displayUnit="ml/(mmHg.min)") = 1.2501026264094e-10,
                Pknee(displayUnit="Pa") = 10),
              popliteal_vein_R52(UseOuter_external_pressure=false,
                  LimitBackflow=false),
              popliteal_vein_L82(UseOuter_external_pressure=false,
                  LimitBackflow=false),
              popliteal_vein_L78(UseOuter_external_pressure=false,
                  LimitBackflow=false),
              popliteal_vein_R48(UseOuter_external_pressure=false,
                  LimitBackflow=false),
              radial_T1_R44(UseExercise=true, exercise_ratio=0.4),
              ulnar_T2_R42(UseExercise=true, exercise_ratio=0.4),
              ulnar_T2_L90(UseExercise=true, exercise_ratio=0.4),
              radial_T1_L92(UseExercise=true, exercise_ratio=0.4),
              cardiac_tissue(UseExercise=true),
              internal_iliac_T1_R218(UseExercise=true, exercise_ratio=0.4),
              internal_iliac_T1_L196(UseExercise=true, exercise_ratio=0.4)),
            condHRPhi(disconnected=false),
            condSystemicPhi(disconnected=false),
            phi_fixed(amplitude=0.75),
            settings(
              heart_alphaE(displayUnit="1") = 1,
              UseNonLinear_TissuesCompliance=true,
              tissues_UseStraighteningReaction2Phi=true,
              veins_UsePhiEffect=true,
              eta_vc=0,
              tissues_Pa_nom(displayUnit="mmHg"),
              tissues_Pv_nom=1066.57909932,
              tissues_eta_Ra=0.1,
              tissues_eta_Rv=settings.tissues_eta_Ra,
              tissues_tau_R(displayUnit="s") = 1e-3,
              tissues_eta_C=0.6,
              veins_chi_pump=0.2,
              syst_art_UseVasoconstrictionEffect=false,
              tissues_chi_Ra(
                            displayUnit="%") = 10,
              tissues_chi_C=
                           1),
            heartComponent(UsePhiInput=true));
        Modelica.Blocks.Sources.Trapezoid Exercfise(
            amplitude=1,
            rising=200,
            width=20,
            falling=2,
            period=500,
            nperiod=1,
            offset=0,
            startTime=40)
            annotation (Placement(transformation(extent={{-100,50},{-80,70}})));
        Modelica.Blocks.Sources.Trapezoid LegMuscleContractions(
            amplitude=80000,
            rising=0.15,
            width=0.1,
            falling=0.15,
            period=1,
            nperiod=-1,
            offset=0,
            startTime=40)
            annotation (Placement(transformation(extent={{-100,24},{-80,44}})));
        equation
          connect(Exercfise.y, SystemicComponent.exercise_input) annotation (
              Line(points={{-79,60},{-28,60},{-28,36}}, color={0,0,127}));
          connect(LegMuscleContractions.y, SystemicComponent.Outer_pressure_input)
            annotation (Line(points={{-79,34},{-28,34},{-28,20}}, color={0,0,
                  127}));
          connect(condSystemicPhi.y, heartComponent.phi) annotation (Line(
                points={{-13.4,4.00002},{-4,4.00002},{-4,-16},{-16,-16}}, color=
                 {0,0,127}));
          annotation (experiment(
              StopTime=300,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end tree_ExercisePlusArms;

        model tree_auto_allRegulations_Exercise_compliance
          extends tree_autonomic_base(
            SystemicComponent(
              UseExerciseInput=true,
              anterior_tibial_T3_R230(UseExercise=true),
              posterior_tibial_T4_R236(UseExercise=true),
              posterior_tibial_T4_L214(UseExercise=true),
              anterior_tibial_T3_L208(UseExercise=true),
              profundus_T2_R224(UseExercise=true),
              profundus_T2_L202(UseExercise=true)),
            condHRPhi(disconnected=false),
            condSystemicPhi(disconnected=false),
            settings(
              exercise_factor_on_arterial_compliance=1,
              tissues_UseStraighteningReaction2Phi=true,
              veins_UsePhiEffect=true,
              eta_vc=0.2,
              tissues_eta_Ra=0.2,
              tissues_tau_R(displayUnit="s") = 1e-3,
              tissues_eta_C=1,
              syst_art_UseVasoconstrictionEffect=true,
              tissues_chi_Ra(
                            displayUnit="1") = 10));
        Modelica.Blocks.Sources.Trapezoid Exercfise(
            amplitude=1,
            rising=200,
            width=20,
            falling=2,
            period=500,
            nperiod=1,
            offset=0,
            startTime=5)
            annotation (Placement(transformation(extent={{-98,36},{-78,56}})));
        equation
          connect(Exercfise.y, SystemicComponent.exercise_input) annotation (
              Line(points={{-77,46},{-28,46},{-28,36}}, color={0,0,127}));
          annotation (experiment(
              StopTime=300,
              Interval=0.02,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end tree_auto_allRegulations_Exercise_compliance;

        model tree_ExercisePlusArms_venousPump
          extends tree_ExercisePlusArms(SystemicComponent(
              profundus_T2_R224(LimitBackflow=true),
              anterior_tibial_T3_R230(LimitBackflow=true),
              posterior_tibial_T4_R236(LimitBackflow=true),
              posterior_tibial_T4_L214(LimitBackflow=true),
              anterior_tibial_T3_L208(LimitBackflow=true),
              profundus_T2_L202(LimitBackflow=true),
              profunda_femoris_vein_T2_R40(UseOuter_external_pressure=true),
              femoral_vein_R42(UseOuter_external_pressure=true),
              femoral_vein_R46(UseOuter_external_pressure=true),
              popliteal_vein_R48(UseOuter_external_pressure=true),
              anterior_tibial_vein_T4_R50(UseOuter_external_pressure=true),
              popliteal_vein_R52(UseOuter_external_pressure=true),
              posterior_tibial_vein_T6_R54(UseOuter_external_pressure=true),
              profunda_femoris_vein_T2_L70(UseOuter_external_pressure=true),
              femoral_vein_L72(UseOuter_external_pressure=true),
              femoral_vein_L76(UseOuter_external_pressure=true),
              popliteal_vein_L78(UseOuter_external_pressure=true),
              anterior_tibial_vein_T4_L80(UseOuter_external_pressure=true),
              popliteal_vein_L82(UseOuter_external_pressure=true),
              posterior_tibial_vein_T6_L84(UseOuter_external_pressure=true),
              femoral_vein_R38(UseOuter_external_pressure=true),
              femoral_vein_L68(UseOuter_external_pressure=true)));
          annotation (experiment(
              StopTime=300,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end tree_ExercisePlusArms_venousPump;

        model tree_ExercisePlusArms_contMuscPump
          extends tree_ExercisePlusArms(SystemicComponent(
              profundus_T2_R224(UseMuscleVenousPump=true),
              anterior_tibial_T3_R230(UseMuscleVenousPump=true),
              posterior_tibial_T4_R236(UseMuscleVenousPump=true),
              posterior_tibial_T4_L214(UseMuscleVenousPump=true),
              anterior_tibial_T3_L208(UseMuscleVenousPump=true),
              profundus_T2_L202(UseMuscleVenousPump=true)));
        end tree_ExercisePlusArms_contMuscPump;

        model tree_exercise_mynardValves
          extends tree_Exercise(
            SystemicComponent(
              superior_vena_cava_C88(disableVenoconstriction=true),
              superior_vena_cava_C2(r(displayUnit="cm") = 0.04,
                  disableVenoconstriction=true),
              inferior_vena_cava_C8(r(displayUnit="cm") = 0.04,
                  disableVenoconstriction=true),
              inferior_vena_cava_C12(r(displayUnit="cm") = 0.04,
                  disableVenoconstriction=true),
              hepatic_vein_T1_C10(disableVenoconstriction=true),
              coronary_veins(disableVenoconstriction=true)),
            phi_fixed(rising=20),
            redeclare Components.Subsystems.Heart.Heart_SmithOlufsenMynard
              heartComponent(UseFrequencyInput=true, UseThoracic_PressureInput=
                  true),
            Exercfise(rising=20),
            settings(
              hidePulmonary=false,
              hideLevel0=true,
              hideLevel1=true,
              EvaluateFunctionalParams=true,
              eta_vc=0.2));
          Physiolibrary.Types.Volume venaCavaVolume=SystemicComponent.superior_vena_cava_C88.volume
               + SystemicComponent.superior_vena_cava_C2.volume +
              SystemicComponent.inferior_vena_cava_C8.volume +
              SystemicComponent.inferior_vena_cava_C12.volume +
              SystemicComponent.hepatic_vein_T1_C10.volume + SystemicComponent.coronary_veins.volume;
          annotation (experiment(
              StopTime=100,
              Interval=0.02,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end tree_exercise_mynardValves;

        model LumensCardiacSensitivity
          extends base_TriSeg_OptimizedBaseline_init(
            condHRPhi(disconnected=true),
            condSystemicPhi(disconnected=true),
            phi_fixed(
              amplitude=0.25,
              width=40,
              nperiod=1,
              startTime=2),
            heartComponent(UsePhiInput=true, ventricles(calciumMechanics(
                    phi_effect_Ca=1))));
        equation
          connect(condHeartPhi.y, heartComponent.phi) annotation (Line(points={{
                  54.6,42},{60,42},{60,-16},{-16,-16}}, color={0,0,127}));
          annotation (experiment(
              StopTime=60,
              Interval=0.02,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end LumensCardiacSensitivity;
      end Experiments;

      package ss_init

        model base_TriSeg_OptimizedBaseline_init
          "Steady state initialization from 2020-03-27 12:16:26.252618 at time 29.0"
          extends
            ADAN_main.SystemicTree.Identification.Results.Experiments.TriSeg_OptimizedBaseline(
            SystemicComponent(
              ascending_aorta_B(volume(start=2.6326392e-05, fixed=true)),
              ascending_aorta_C(volume(start=2.4346662e-05, fixed=true)),
              ascending_aorta_D(volume(start=2.2224018e-05, fixed=true)),
              aortic_arch_C2(volume(start=2.0328409e-05, fixed=true)),
              brachiocephalic_trunk_C4(volume(start=1.3770536e-05, fixed=true)),
              aortic_arch_C46(volume(start=1.20447785e-05, fixed=true)),
              aortic_arch_C64(volume(start=8.268879e-06, fixed=true)),
              aortic_arch_C94(volume(start=4.5379737e-05, fixed=true)),
              thoracic_aorta_C96(volume(start=8.150358e-06, fixed=true)),
              thoracic_aorta_C100(volume(start=6.2697413e-06, fixed=true)),
              thoracic_aorta_C104(volume(start=1.1815965e-05, fixed=true)),
              thoracic_aorta_C108(volume(start=3.8819e-06, fixed=true)),
              thoracic_aorta_C112(volume(start=6.374687e-05, fixed=true)),
              abdominal_aorta_C114(volume(start=1.3167983e-06, fixed=true)),
              abdominal_aorta_C136(volume(start=5.526656e-06, fixed=true)),
              abdominal_aorta_C164(volume(start=1.6403096e-06, fixed=true)),
              abdominal_aorta_C176(volume(start=4.4102344e-06, fixed=true)),
              abdominal_aorta_C188(volume(start=1.763763e-05, fixed=true)),
              abdominal_aorta_C192(volume(start=1.0960435e-05, fixed=true)),
              celiac_trunk_C116(volume(start=0.00038408977, fixed=true)),
              renal_L166(volume(start=0.00034695197, fixed=true)),
              renal_R178(volume(start=0.00034383446, fixed=true)),
              common_iliac_R216(volume(start=9.071584e-06, fixed=true)),
              internal_iliac_T1_R218(volume(start=0.00018883863, fixed=true)),
              external_iliac_R220(volume(start=5.0599756e-06, fixed=true)),
              femoral_R222(volume(start=1.4475659e-06, fixed=true)),
              profundus_T2_R224(volume(start=0.00021656428, fixed=true)),
              femoral_R226(volume(start=1.2139422e-05, fixed=true)),
              popliteal_R228(volume(start=3.7248851e-06, fixed=true)),
              anterior_tibial_T3_R230(volume(start=2.8546108e-05, fixed=true)),
              popliteal_R232(volume(start=1.8498424e-07, fixed=true)),
              tibiofibular_trunk_R234(volume(start=7.5205287e-07, fixed=true)),
              posterior_tibial_T4_R236(volume(start=3.102373e-05, fixed=true)),
              common_iliac_L194(volume(start=8.675427e-06, fixed=true)),
              internal_iliac_T1_L196(volume(start=0.00018884182, fixed=true)),
              external_iliac_L198(volume(start=5.060348e-06, fixed=true)),
              femoral_L200(volume(start=1.4476796e-06, fixed=true)),
              profundus_T2_L202(volume(start=0.00021656726, fixed=true)),
              femoral_L204(volume(start=1.214088e-05, fixed=true)),
              popliteal_L206(volume(start=3.7253087e-06, fixed=true)),
              anterior_tibial_T3_L208(volume(start=2.854649e-05, fixed=true)),
              popliteal_L210(volume(start=1.8499603e-07, fixed=true)),
              tibiofibular_trunk_L212(volume(start=7.5212375e-07, fixed=true)),
              posterior_tibial_T4_L214(volume(start=3.102418e-05, fixed=true)),
              subclavian_R28(volume(start=2.1047947e-06, fixed=true)),
              subclavian_R30(volume(start=2.7539336e-06, fixed=true)),
              axillary_R32(volume(start=3.150143e-06, fixed=true)),
              brachial_R34(volume(start=4.602824e-06, fixed=true)),
              ulnar_T2_R36(volume(start=2.4088425e-07, fixed=true)),
              ulnar_T2_R42(volume(start=6.525386e-05, fixed=true)),
              radial_T1_R44(volume(start=5.3592048e-05, fixed=true)),
              subclavian_L66(volume(start=5.0014137e-06, fixed=true)),
              subclavian_L78(volume(start=2.0415364e-06, fixed=true)),
              axillary_L80(volume(start=3.1477873e-06, fixed=true)),
              brachial_L82(volume(start=8.458302e-07, fixed=true)),
              ulnar_T2_L84(volume(start=2.4049487e-07, fixed=true)),
              ulnar_T2_L90(volume(start=6.52187e-05, fixed=true)),
              radial_T1_L92(volume(start=5.680153e-05, fixed=true)),
              common_carotid_R6_A(volume(start=5.2524124e-06, fixed=true)),
              common_carotid_R6_B(volume(start=4.4793546e-06, fixed=true)),
              common_carotid_R6_C(volume(start=3.3431238e-06, fixed=true)),
              internal_carotid_R8_A(volume(start=1.2795067e-06, fixed=true)),
              internal_carotid_R8_B(volume(start=8.088412e-07, fixed=true)),
              internal_carotid_R8_C(volume(start=7.732921e-05, fixed=true)),
              external_carotid_T2_R26(volume(start=7.762714e-05, fixed=true)),
              common_carotid_L48_A(volume(start=5.6898316e-06, fixed=true)),
              common_carotid_L48_B(volume(start=4.998037e-06, fixed=true)),
              common_carotid_L48_C(volume(start=4.436596e-06, fixed=true)),
              common_carotid_L48_D(volume(start=3.5895166e-06, fixed=true)),
              internal_carotid_L50_A(volume(start=1.2811386e-06, fixed=true)),
              internal_carotid_L50_B(volume(start=8.098635e-07, fixed=true)),
              internal_carotid_L50_C(volume(start=7.7326295e-05, fixed=true)),
              external_carotid_T2_L62(volume(start=7.761811e-05, fixed=true)),
              vertebral_L2(volume(start=7.135769e-05, fixed=true)),
              vertebral_R272(volume(start=7.137093e-05, fixed=true)),
              superior_vena_cava_C2(volume(start=2.114537e-06, fixed=true)),
              superior_vena_cava_C88(volume(start=3.6438926e-06, fixed=true)),
              inferior_vena_cava_C8(volume(start=3.171404e-06, fixed=true)),
              hepatic_vein_T1_C10(volume(start=1.24343e-06, fixed=true)),
              inferior_vena_cava_C12(volume(start=8.605271e-06, fixed=true)),
              inferior_vena_cava_C16(volume(start=6.76749e-06, fixed=true)),
              renal_vein_T1_R18(volume(start=1.9940815e-06, fixed=true)),
              inferior_vena_cava_C20(volume(start=4.7214826e-07, fixed=true)),
              renal_vein_T1_L22(volume(start=1.7619622e-06, fixed=true)),
              inferior_vena_cava_C24(volume(start=1.8833736e-05, fixed=true)),
              common_iliac_vein_L56(volume(start=4.6223354e-06, fixed=true)),
              common_iliac_vein_R26(volume(start=4.2486085e-06, fixed=true)),
              external_iliac_vein_R28(volume(start=6.196559e-07, fixed=true)),
              internal_iliac_vein_T1_R30(volume(start=2.6506475e-06, fixed=true)),
              external_iliac_vein_R32(volume(start=7.189577e-06, fixed=true)),
              femoral_vein_R34(volume(start=3.125428e-07, fixed=true)),
              femoral_vein_R38(volume(start=2.4778387e-06, fixed=true)),
              profunda_femoris_vein_T2_R40(volume(start=6.863652e-06, fixed=
                      true)),
              femoral_vein_R42(volume(start=1.7528952e-05, fixed=true)),
              femoral_vein_R46(volume(start=9.653868e-07, fixed=true)),
              popliteal_vein_R48(volume(start=3.9294414e-06, fixed=true)),
              anterior_tibial_vein_T4_R50(volume(start=1.1221388e-06, fixed=
                      true)),
              popliteal_vein_R52(volume(start=8.7411064e-07, fixed=true)),
              posterior_tibial_vein_T6_R54(volume(start=1.6894195e-06, fixed=
                      true)),
              external_iliac_vein_L58(volume(start=6.2043574e-07, fixed=true)),
              internal_iliac_vein_T1_L60(volume(start=2.726427e-06, fixed=true)),
              external_iliac_vein_L62(volume(start=7.0585957e-06, fixed=true)),
              femoral_vein_L64(volume(start=3.653944e-07, fixed=true)),
              femoral_vein_L68(volume(start=2.4779206e-06, fixed=true)),
              profunda_femoris_vein_T2_L70(volume(start=6.86385e-06, fixed=true)),
              femoral_vein_L72(volume(start=1.7529532e-05, fixed=true)),
              femoral_vein_L76(volume(start=9.654127e-07, fixed=true)),
              popliteal_vein_L78(volume(start=3.9295714e-06, fixed=true)),
              anterior_tibial_vein_T4_L80(volume(start=1.122186e-06, fixed=true)),
              popliteal_vein_L82(volume(start=8.74145e-07, fixed=true)),
              posterior_tibial_vein_T6_L84(volume(start=1.689484e-06, fixed=
                      true)),
              brachiocephalic_vein_R90(volume(start=4.2845304e-06, fixed=true)),
              brachiocephalic_vein_L124(volume(start=8.029972e-06, fixed=true)),
              vertebral_vein_R92(volume(start=2.6947148e-06, fixed=true)),
              brachiocephalic_vein_R94(volume(start=9.713119e-07, fixed=true)),
              subclavian_vein_R96(volume(start=4.7229508e-07, fixed=true)),
              internal_jugular_vein_R122(volume(start=1.8668e-05, fixed=true)),
              external_jugular_vein_R98(volume(start=1.3103192e-06, fixed=true)),
              subclavian_vein_R100(volume(start=1.9317124e-06, fixed=true)),
              axillary_vein_R102(volume(start=6.7892247e-06, fixed=true)),
              brachial_vein_R104(volume(start=1.3315795e-06, fixed=true)),
              brachial_vein_R114(volume(start=1.1969793e-06, fixed=true)),
              brachial_vein_R108(volume(start=1.8395977e-07, fixed=true)),
              ulnar_vein_T7_R110(volume(start=1.5359386e-06, fixed=true)),
              brachial_vein_R118(volume(start=1.15658494e-07, fixed=true)),
              radial_vein_T3_R120(volume(start=9.720794e-07, fixed=true)),
              vertebral_vein_L126(volume(start=2.5198954e-06, fixed=true)),
              brachiocephalic_vein_L128(volume(start=4.9089516e-07, fixed=true)),
              subclavian_vein_L130(volume(start=4.2003302e-07, fixed=true)),
              internal_jugular_vein_L156(volume(start=1.13328215e-05, fixed=
                      true)),
              external_jugular_vein_L132(volume(start=1.2848983e-06, fixed=true)),
              subclavian_vein_L134(volume(start=1.882759e-06, fixed=true)),
              axillary_vein_L136(volume(start=6.866911e-06, fixed=true)),
              brachial_vein_L138(volume(start=1.3316616e-06, fixed=true)),
              brachial_vein_L148(volume(start=1.1990958e-06, fixed=true)),
              brachial_vein_L142(volume(start=1.8397137e-07, fixed=true)),
              ulnar_vein_T7_L144(volume(start=1.53582e-06, fixed=true)),
              brachial_vein_L152(volume(start=1.1588178e-07, fixed=true)),
              radial_vein_T3_L154(volume(start=9.797902e-07, fixed=true)),
              mesenteric_artery(volume(start=6.350237e-06, fixed=true)),
              coronary_arteries(volume(start=3.6607467e-08, fixed=true)),
              cardiac_tissue(volume(start=0.00012594431, fixed=true)),
              coronary_veins(volume(start=2.3909552e-08, fixed=true)),
              brachial_L82_HeartLevel(volume(start=3.7550694e-06, fixed=true)),
              baroreflex_system(baroreceptor_aortic(
                  tau_s=6.0,
                  delta0=0.4965,
                  epsilon_start=1.6,
                  s_start=0.9), baroreceptor_carotid(
                  tau_s=6.0,
                  delta0=0.4965,
                  epsilon_start=1.2,
                  s_start=0.9)),
              splanchnic_tissue(
                               volume(start=0.00027855102, fixed=true)),
              splanchnic_vein(
                             volume(start=1.0443861e-05, fixed=true))),
            phi_fixed(amplitude=0.25, nperiod=1),
            heartComponent(
              ventricles(V_LV(start=0.00017003783, fixed=true), V_RV(start=
                      0.0001816245, fixed=true)),
              ra(volume(start=9.471479e-06, fixed=true)),
              la(volume(start=3.347985e-05, fixed=true))),
            pulmonaryComponent(c_pa(volume(start=9.333335e-05, fixed=true)),
                c_pv(volume(start=0.0021523584, fixed=true))),
            settings(initByPressure=false));

          annotation (experiment(
              StopTime=30,
              Interval=0.02,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end base_TriSeg_OptimizedBaseline_init;
      end ss_init;

      model base_TriSeg_OptimizedBaseline_init
        "Steady state initialization from 2020-03-30 16:14:59.259663 at time 300.0"
        extends
          ADAN_main.SystemicTree.Identification.Results.Experiments.TriSeg_OptimizedBaseline(
          SystemicComponent(
            baroreflex_system(
              baroreflex(
                phi(start=0.25242782, fixed=true),
                phi_mean(start=0.24990731, fixed=true),
                f1=0.00418),
              baroreceptor_aortic(epsilon(start=1.6187029, fixed=true), s(start=
                     0.92078173, fixed=true)),
              baroreceptor_carotid(epsilon(start=1.2045674, fixed=true), s(
                    start=0.928572, fixed=true))),
            ascending_aorta_A(
              q(start=5.839419e-06, fixed=true),
              vol1(start=8.836174e-06, fixed=true),
              vol2(start=8.836006e-06, fixed=true)),
            ascending_aorta_B(q_in(start=1.1682793e-05, fixed=true), volume(
                  start=2.6326175e-05, fixed=true)),
            ascending_aorta_C(q_in(start=1.9255353e-05, fixed=true), volume(
                  start=2.4346462e-05, fixed=true)),
            ascending_aorta_D(q_in(start=2.8777024e-05, fixed=true), volume(
                  start=2.2223836e-05, fixed=true)),
            aortic_arch_C2(q_in(start=3.7342073e-05, fixed=true), volume(start=
                    2.0328243e-05, fixed=true)),
            brachiocephalic_trunk_C4(q_in(start=-4.6478813e-06, fixed=true),
                volume(start=1.3770431e-05, fixed=true)),
            aortic_arch_C46(q_in(start=4.9675884e-05, fixed=true), volume(start=
                   1.204468e-05, fixed=true)),
            aortic_arch_C64(q_in(start=5.923267e-05, fixed=true), volume(start=
                    8.268812e-06, fixed=true)),
            aortic_arch_C94(q_in(start=6.015504e-05, fixed=true), volume(start=
                    4.5379373e-05, fixed=true)),
            thoracic_aorta_C96(q_in(start=7.457035e-05, fixed=true), volume(
                  start=8.150293e-06, fixed=true)),
            thoracic_aorta_C100(q_in(start=7.7020246e-05, fixed=true), volume(
                  start=6.2696918e-06, fixed=true)),
            thoracic_aorta_C104(q_in(start=7.8826786e-05, fixed=true), volume(
                  start=1.1815871e-05, fixed=true)),
            thoracic_aorta_C108(q_in(start=8.1928454e-05, fixed=true), volume(
                  start=3.8818694e-06, fixed=true)),
            thoracic_aorta_C112(q_in(start=8.291072e-05, fixed=true), volume(
                  start=6.3746396e-05, fixed=true)),
            abdominal_aorta_C114(q_in(start=8.106238e-05, fixed=true), volume(
                  start=1.3167886e-06, fixed=true)),
            abdominal_aorta_C136(q_in(start=6.968905e-05, fixed=true), volume(
                  start=5.526616e-06, fixed=true)),
            abdominal_aorta_C164(q_in(start=6.0967322e-05, fixed=true), volume(
                  start=1.6402977e-06, fixed=true)),
            abdominal_aorta_C176(q_in(start=5.063662e-05, fixed=true), volume(
                  start=4.4102026e-06, fixed=true)),
            abdominal_aorta_C188(q_in(start=4.0141455e-05, fixed=true), volume(
                  start=1.7637505e-05, fixed=true)),
            abdominal_aorta_C192(q_in(start=3.7191407e-05, fixed=true), volume(
                  start=1.096036e-05, fixed=true)),
            celiac_trunk_C116(volume(start=0.00038408526, fixed=true), Ra_phi(
                  start=806147460.0, fixed=true)),
            renal_L166(volume(start=0.00034694799, fixed=true), Ra_phi(start=
                    892520400.0, fixed=true)),
            renal_R178(volume(start=0.00034383047, fixed=true), Ra_phi(start=
                    900561100.0, fixed=true)),
            common_iliac_R216(q_in(start=1.7510723e-05, fixed=true), volume(
                  start=9.071526e-06, fixed=true)),
            internal_iliac_T1_R218(volume(start=0.0001888362, fixed=true),
                Ra_phi(start=1638725900.0, fixed=true)),
            external_iliac_R220(q_in(start=9.648119e-06, fixed=true), volume(
                  start=5.0599556e-06, fixed=true)),
            femoral_R222(q_in(start=8.889571e-06, fixed=true), volume(start=
                    1.4475602e-06, fixed=true)),
            profundus_T2_R224(volume(start=0.00021656118, fixed=true), Ra_phi(
                  start=1428032600.0, fixed=true)),
            femoral_R226(q_in(start=2.2290076e-06, fixed=true), volume(start=
                    1.2139374e-05, fixed=true)),
            popliteal_R228(q_in(start=1.8943311e-06, fixed=true), volume(start=
                    3.7248712e-06, fixed=true)),
            anterior_tibial_T3_R230(volume(start=2.8548282e-05, fixed=true),
                Ra_phi(start=11106920000.0, fixed=true)),
            popliteal_R232(q_in(start=9.839043e-07, fixed=true), volume(start=
                    1.8498386e-07, fixed=true)),
            tibiofibular_trunk_R234(q_in(start=9.823952e-07, fixed=true),
                volume(start=7.520513e-07, fixed=true)),
            posterior_tibial_T4_R236(volume(start=3.1023515e-05, fixed=true),
                Ra_phi(start=9996229000.0, fixed=true)),
            common_iliac_L194(q_in(start=1.7328166e-05, fixed=true), volume(
                  start=8.675371e-06, fixed=true)),
            internal_iliac_T1_L196(volume(start=0.00018883939, fixed=true),
                Ra_phi(start=1638725900.0, fixed=true)),
            external_iliac_L198(q_in(start=9.606166e-06, fixed=true), volume(
                  start=5.060328e-06, fixed=true)),
            femoral_L200(q_in(start=8.862123e-06, fixed=true), volume(start=
                    1.4476739e-06, fixed=true)),
            profundus_T2_L202(volume(start=0.00021656416, fixed=true), Ra_phi(
                  start=1428032600.0, fixed=true)),
            femoral_L204(q_in(start=2.2043087e-06, fixed=true), volume(start=
                    1.2140833e-05, fixed=true)),
            popliteal_L206(q_in(start=1.8895955e-06, fixed=true), volume(start=
                    3.7252948e-06, fixed=true)),
            anterior_tibial_T3_L208(volume(start=2.8548666e-05, fixed=true),
                Ra_phi(start=11106920000.0, fixed=true)),
            popliteal_L210(q_in(start=9.836535e-07, fixed=true), volume(start=
                    1.8499564e-07, fixed=true)),
            tibiofibular_trunk_L212(q_in(start=9.822827e-07, fixed=true),
                volume(start=7.521222e-07, fixed=true)),
            posterior_tibial_T4_L214(volume(start=3.1023963e-05, fixed=true),
                Ra_phi(start=9996229000.0, fixed=true)),
            subclavian_R28(q_in(start=2.5809757e-06, fixed=true), volume(start=
                    2.1047795e-06, fixed=true)),
            subclavian_R30(q_in(start=1.1997369e-06, fixed=true), volume(start=
                    2.7539152e-06, fixed=true)),
            axillary_R32(q_in(start=2.0882708e-06, fixed=true), volume(start=
                    3.1501254e-06, fixed=true)),
            brachial_R34(q_in(start=2.8440086e-06, fixed=true), volume(start=
                    4.602804e-06, fixed=true)),
            ulnar_T2_R36(q_in(start=1.83023e-06, fixed=true), volume(start=
                    2.4088365e-07, fixed=true)),
            ulnar_T2_R42(volume(start=6.525415e-05, fixed=true), Ra_phi(start=
                    4760108500.0, fixed=true)),
            radial_T1_R44(volume(start=5.3595897e-05, fixed=true), Ra_phi(start=
                   5880134000.0, fixed=true)),
            subclavian_L66(q_in(start=2.086007e-06, fixed=true), volume(start=
                    5.001379e-06, fixed=true)),
            subclavian_L78(q_in(start=1.5389485e-06, fixed=true), volume(start=
                    2.0415234e-06, fixed=true)),
            axillary_L80(q_in(start=2.11903e-06, fixed=true), volume(start=
                    3.1477703e-06, fixed=true)),
            brachial_L82(q_in(start=3.2700698e-06, fixed=true), volume(start=
                    8.458266e-07, fixed=true)),
            ulnar_T2_L84(q_in(start=1.8115464e-06, fixed=true), volume(start=
                    2.404943e-07, fixed=true)),
            ulnar_T2_L90(volume(start=6.521887e-05, fixed=true), Ra_phi(start=
                    4760108500.0, fixed=true)),
            radial_T1_L92(volume(start=5.680603e-05, fixed=true), Ra_phi(start=
                    5553460000.0, fixed=true)),
            common_carotid_R6_A(q_in(start=-2.08054e-06, fixed=true), volume(
                  start=5.252363e-06, fixed=true)),
            common_carotid_R6_B(q_in(start=4.1617628e-07, fixed=true), volume(
                  start=4.479313e-06, fixed=true)),
            common_carotid_R6_C(q_in(start=2.5717097e-06, fixed=true), volume(
                  start=3.343093e-06, fixed=true)),
            internal_carotid_R8_A(q_in(start=1.8679876e-06, fixed=true), volume(
                  start=1.2795015e-06, fixed=true)),
            internal_carotid_R8_B(q_in(start=2.1367866e-06, fixed=true), volume(
                  start=8.088382e-07, fixed=true)),
            internal_carotid_R8_C(volume(start=7.7327946e-05, fixed=true),
                Ra_phi(start=3998491400.0, fixed=true)),
            external_carotid_T2_R26(volume(start=7.7626726e-05, fixed=true),
                Ra_phi(start=3998491400.0, fixed=true)),
            common_carotid_L48_A(q_in(start=-5.0922313e-06, fixed=true), volume(
                  start=5.6897784e-06, fixed=true)),
            common_carotid_L48_B(q_in(start=-2.4462863e-06, fixed=true), volume(
                  start=4.9979903e-06, fixed=true)),
            common_carotid_L48_C(q_in(start=1.8725304e-08, fixed=true), volume(
                  start=4.4365547e-06, fixed=true)),
            common_carotid_L48_D(q_in(start=2.2919346e-06, fixed=true), volume(
                  start=3.5894836e-06, fixed=true)),
            internal_carotid_L50_A(q_in(start=1.8402595e-06, fixed=true),
                volume(start=1.2811333e-06, fixed=true)),
            internal_carotid_L50_B(q_in(start=2.1343728e-06, fixed=true),
                volume(start=8.0986047e-07, fixed=true)),
            internal_carotid_L50_C(volume(start=7.7325014e-05, fixed=true),
                Ra_phi(start=3998491400.0, fixed=true)),
            external_carotid_T2_L62(volume(start=7.7617675e-05, fixed=true),
                Ra_phi(start=3998491400.0, fixed=true)),
            vertebral_L2(volume(start=7.135711e-05, fixed=true), Ra_phi(start=
                    4346186000.0, fixed=true)),
            vertebral_R272(volume(start=7.137038e-05, fixed=true), Ra_phi(start=
                   4346186000.0, fixed=true)),
            superior_vena_cava_C2(volume(start=2.114537e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            superior_vena_cava_C88(volume(start=3.6438926e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            inferior_vena_cava_C8(volume(start=3.171404e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            hepatic_vein_T1_C10(volume(start=1.24343e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            inferior_vena_cava_C12(volume(start=8.605271e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            inferior_vena_cava_C16(volume(start=6.76749e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            renal_vein_T1_R18(volume(start=1.9940815e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            inferior_vena_cava_C20(volume(start=4.7214826e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            renal_vein_T1_L22(volume(start=1.7619622e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            inferior_vena_cava_C24(volume(start=1.8833736e-05, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            common_iliac_vein_L56(volume(start=4.622335e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            common_iliac_vein_R26(volume(start=4.2486085e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            external_iliac_vein_R28(volume(start=6.196559e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            internal_iliac_vein_T1_R30(volume(start=2.6506473e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            external_iliac_vein_R32(volume(start=7.189577e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            femoral_vein_R34(volume(start=3.1254277e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            femoral_vein_R38(volume(start=2.4778385e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            profunda_femoris_vein_T2_R40(volume(start=6.863649e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            femoral_vein_R42(volume(start=1.7528952e-05, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            femoral_vein_R46(volume(start=9.653868e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            popliteal_vein_R48(volume(start=3.9294423e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            anterior_tibial_vein_T4_R50(volume(start=1.1222011e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            popliteal_vein_R52(volume(start=8.7411075e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            posterior_tibial_vein_T6_R54(volume(start=1.6894182e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            external_iliac_vein_L58(volume(start=6.2043574e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            internal_iliac_vein_T1_L60(volume(start=2.726427e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            external_iliac_vein_L62(volume(start=7.058595e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            femoral_vein_L64(volume(start=3.6539438e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            femoral_vein_L68(volume(start=2.4779206e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            profunda_femoris_vein_T2_L70(volume(start=6.8638474e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            femoral_vein_L72(volume(start=1.7529532e-05, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            femoral_vein_L76(volume(start=9.654127e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            popliteal_vein_L78(volume(start=3.9295724e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            anterior_tibial_vein_T4_L80(volume(start=1.1222484e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            popliteal_vein_L82(volume(start=8.7414514e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            posterior_tibial_vein_T6_L84(volume(start=1.6894827e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            brachiocephalic_vein_R90(volume(start=4.2845304e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            brachiocephalic_vein_L124(volume(start=8.029972e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            vertebral_vein_R92(volume(start=2.6947143e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            brachiocephalic_vein_R94(volume(start=9.713119e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            subclavian_vein_R96(volume(start=4.722951e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            internal_jugular_vein_R122(volume(start=1.8668003e-05, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            external_jugular_vein_R98(volume(start=1.310319e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            subclavian_vein_R100(volume(start=1.9317124e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            axillary_vein_R102(volume(start=6.7892256e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            brachial_vein_R104(volume(start=1.3315803e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            brachial_vein_R114(volume(start=1.1969923e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            brachial_vein_R108(volume(start=1.8395991e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            ulnar_vein_T7_R110(volume(start=1.5359415e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            brachial_vein_R118(volume(start=1.1565989e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            radial_vein_T3_R120(volume(start=9.721292e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            vertebral_vein_L126(volume(start=2.5198947e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            brachiocephalic_vein_L128(volume(start=4.9089516e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            subclavian_vein_L130(volume(start=4.2003302e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            internal_jugular_vein_L156(volume(start=1.13328215e-05, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            external_jugular_vein_L132(volume(start=1.284898e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            subclavian_vein_L134(volume(start=1.8827591e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            axillary_vein_L136(volume(start=6.8669115e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            brachial_vein_L138(volume(start=1.3316622e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            brachial_vein_L148(volume(start=1.1991111e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            brachial_vein_L142(volume(start=1.8397145e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            ulnar_vein_T7_L144(volume(start=1.5358218e-06, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            brachial_vein_L152(volume(start=1.1588341e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            radial_vein_T3_L154(volume(start=9.798491e-07, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            mesenteric_artery(q_in(start=8.406497e-06, fixed=true), volume(
                  start=6.3502157e-06, fixed=true)),
            coronary_arteries(q_in(start=2.8273123e-06, fixed=true), volume(
                  start=3.660767e-08, fixed=true)),
            cardiac_tissue(volume(start=0.0001259706, fixed=true), Ra_phi(start=
                   2499057200.0, fixed=true)),
            coronary_veins(volume(start=2.3916774e-08, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true))),
            brachial_L82_HeartLevel(q_in(start=2.8019003e-06, fixed=true),
                volume(start=3.7550526e-06, fixed=true)),
            splanchnic_tissue(
                             volume(start=0.00027854717, fixed=true), Ra_phi(
                  start=1110692100.0, fixed=true)),
            splanchnic_vein(
                           volume(start=1.0443861e-05, fixed=true),
                compliant_vessel(A(start=0.25, fixed=true)))),
          heartComponent(
            ventricles(
              LV_wall(
                ym(start=3.721515, fixed=true),
                SL(start=2.1559181, fixed=true),
                C(start=0.020000003, fixed=true)),
              SEP_wall(SL(start=2.161576, fixed=true), C(start=0.020000003,
                    fixed=true)),
              RV_wall(SL(start=2.2086704, fixed=true), C(start=0.020000003,
                    fixed=true)),
              calciumMechanics(cardiac_cycle(start=1.0, fixed=true)),
              V_LV(start=0.00017003628, fixed=true),
              V_RV(start=0.00018162443, fixed=true)),
            ra(volume(start=9.471555e-06, fixed=true)),
            la(volume(start=3.3479624e-05, fixed=true))),
          pulmonaryComponent(c_pa(volume(start=9.333298e-05, fixed=true)), c_pv(
                volume(start=0.0021523575, fixed=true))),
          settings(initByPressure=false));
        annotation (experiment(
            StopTime=60,
            Interval=0.01,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end base_TriSeg_OptimizedBaseline_init;

      model base_denervated
        extends base_brachialOutput(
          SystemicComponent(baroreflex_system(
              baroreceptor_carotid(tau_s(displayUnit="s") = 3),
              baroreceptor_aortic(tau_s(displayUnit="s") = 3),
              Parameters_Systemic1(k_E=0.558))),
          condSystemicPhi(disconnected=true),
          phi_fixed(
            amplitude=0.33 - 0.25,
            nperiod=1,
            startTime=10),
          settings(tissues_Pa_nom(displayUnit="Pa") = 16766, tissues_Pv_nom(
                displayUnit="Pa") = 588),
          Tilt_ramp(
            height=70*Modelica.Constants.pi/180,
            duration=3,
            startTime=10),
          condHeartPhi(disconnected=true),
          heartRate(HR_max=3.25));

        annotation (experiment(
            StopTime=30,
            Interval=0.02,
            __Dymola_Algorithm="Cvode"));
      end base_denervated;

      model base_brachialOutput
        "Tilt base, just with convenient brachial and mean brachial output"
        extends Tilt.Experiments.base;

        output Physiolibrary.Types.Pressure brachial_pressure=SystemicComponent.brachial_L82_HeartLevel.p_C;

      output Physiolibrary.Types.Pressure brachial_pressure_mean(start = 0);
      Real brachial_pressure_int "integration of pressure to find the true mean";
        output Physiolibrary.Types.Pressure renal_capillary=SystemicComponent.renal_L166.p_C;
      equation
        der(brachial_pressure_int) = brachial_pressure;

        when heartComponent.smithOttesen_VentricularInteraction_flat_.systolicContraction then
          brachial_pressure_mean = pre(brachial_pressure_int)/pre(heartComponent.smithOttesen_VentricularInteraction_flat_.tm);
          reinit(brachial_pressure_int, 0);
        end when;

      end base_brachialOutput;

      model TiltWithExercise
        extends Identification.SingleModelRun.passive_tilt(
          SystemicComponent(
            UseExerciseInput=true,
            ulnar_T2_R42(UseExercise=true),
            radial_T1_R44(UseExercise=true),
            vertebral_R272(UseExercise=true),
            ulnar_T2_L90(UseExercise=true),
            radial_T1_L92(UseExercise=true),
            vertebral_L2(UseExercise=true),
            cardiac_tissue(UseExercise=true),
            internal_iliac_T1_R218(UseExercise=true),
            profundus_T2_R224(UseExercise=true),
            anterior_tibial_T3_R230(UseExercise=true),
            posterior_tibial_T4_R236(UseExercise=true),
            posterior_tibial_T4_L214(UseExercise=true),
            anterior_tibial_T3_L208(UseExercise=true),
            profundus_T2_L202(UseExercise=true),
            internal_iliac_T1_L196(UseEgexercise=true)),
          condHRPhi(disconnected=false),
          phi_fixed(amplitude=0.75),
          settings(exercise_factor_on_arterial_compliance=0, tissues_chi_Ra=
                                                                           4),
          useAutonomousPhi(y=false),
          condHeartPhi(disconnected=false),
          heartComponent(ventricles(
              LV_wall(tauSC=tauSC),
              SEP_wall(tauSC=tauSC),
              RV_wall(tauSC=tauSC))),
          Tilt_ramp(startTime=200));

        replaceable Modelica.Blocks.Sources.Ramp Exercise(
          startTime=10,
          height=1,
          duration=1) constrainedby Modelica.Blocks.Sources.Ramp
          annotation (Placement(transformation(extent={{-76,52},{-56,72}})));
        Physiolibrary.Hydraulic.Sources.UnlimitedVolume unlimitedVolume(P=
              11999.01486735)
          annotation (Placement(transformation(extent={{-162,-10},{-142,10}})));
        Physiolibrary.Hydraulic.Components.Resistor resistor(Resistance(
              displayUnit="(Pa.s)/m3") = 7999.3432449)
          annotation (Placement(transformation(extent={{-120,-10},{-100,10}})));
        parameter Modelica.Units.SI.Time tauSC=0.225;
      equation
        connect(Exercise.y, SystemicComponent.exercise_input) annotation (Line(
              points={{-55,62},{-34,62},{-34,36},{-28,36}}, color={0,0,127}));
        connect(unlimitedVolume.y, resistor.q_in) annotation (Line(
            points={{-142,0},{-120,0}},
            color={0,0,0},
            thickness=1));
        annotation (experiment(
            StopTime=180,
            Interval=0.02,
            Tolerance=1e-05,
            __Dymola_Algorithm="Cvode"));
      end TiltWithExercise;

      model CVS_7af "Base class for circulatory model"
        extends Physiolibrary.Icons.CardioVascular;
        replaceable Components.Subsystems.Systemic.Systemic_SimpleLumped
                                                              Systemic1(
          UseThoracic_PressureInput=true,
          UsePhi_Input=true) constrainedby
          Components.Subsystems.Systemic.partialSystemic annotation (Placement(
              transformation(extent={{-58,18},{18,48}})),
            __Dymola_choicesAllMatching=true);

      public
        replaceable Components.Subsystems.Heart.Heart_TriSegMechanics_Simple
          heartComponent(
          UseFrequencyInput=true,
          UseThoracic_PressureInput=true,
          HR=1) constrainedby Components.Subsystems.Heart.partialHeart
          annotation (Placement(transformation(extent={{-16,-32},{-36,-12}})));
        replaceable Components.Subsystems.Pulmonary.Pulmonary_ADAN_VR
          pulmonaryComponent(UseThoracic_PressureInput=true, pulmonary(
            u_pas(start=3871.5508),
            u_pat(start=3871.314),
            u_par(start=3863.3025),
            u_pcp(start=3634.0552),
            u_pvn(start=1266.1965),
            v_pas(start=1.0003076e-06),
            v_pat(start=2.2090626e-05))) constrainedby
          Components.Subsystems.Pulmonary.partialPulmonary annotation (
            Placement(transformation(extent={{-34,-62},{-14,-42}})));
      Modelica.Blocks.Sources.Trapezoid phi_fixed(
          amplitude=0.75,
          rising=2,
          width=20,
          falling=2,
          period=200,
          nperiod=0,
          offset=0.25,
          startTime=20)
          "Phi for when the model is not using the autonomous feedback phi from baroreflex"
          annotation (Placement(transformation(extent={{-70,70},{-50,90}})));
        inner Components.Settings settings(tissues_CO_nom=0.000105)
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
        Components.Signals.ConditionalConnection condHRPhi(
          disconnectedValue=0.25,
          disconnected=true,
          phi0=settings.phi0) annotation (Placement(transformation(extent={{56,-28.7408},
                  {44,-18.0741}})));
        replaceable Components.Subsystems.Baroreflex.HeartRate_HRMinMax
                                                               heartRate(phi0=
              settings.phi0,
          HR_max=settings.HR_max,
          HR_nom=settings.HR_nominal)
          constrainedby Components.Subsystems.Baroreflex.partialHeartRate
          annotation (Placement(transformation(extent={{38,-30},{26,-18}})));
      replaceable
      Modelica.Blocks.Sources.Trapezoid thoracic_pressure_ramp(
          amplitude=40*133,
          rising=1,
          width=14,
          falling=1,
          period=200,
          nperiod=1,
          offset=0,
          startTime=40) constrainedby Modelica.Blocks.Interfaces.SO
          annotation (Placement(transformation(extent={{-100,-50},{-80,-30}})));
        Components.Signals.ConditionalConnection condTP(disconnectedValue=0,
            disconnected=true) annotation (Placement(transformation(extent={{-69,-45.3333},
                  {-55,-33.3333}})));
        Components.Signals.ConditionalConnection condSystemicPhi(
          disconnectedValue=0.25,
          disconnected=false,
          phi0=settings.phi0)
          annotation (Placement(transformation(extent={{56,15.5556},{44,25.5556}})));
      equation
        connect(Systemic1.port_b, heartComponent.sv) annotation (Line(
            points={{18,28},{24,28},{24,-12},{-16,-12}},
            color={0,0,0},
            thickness=1));
        connect(heartComponent.sa, Systemic1.port_a) annotation (Line(
            points={{-36,-12},{-64,-12},{-64,28},{-58,28}},
            color={0,0,0},
            thickness=1));
        connect(heartComponent.pv, pulmonaryComponent.port_b) annotation (Line(
            points={{-16,-32},{-8,-32},{-8,-52},{-14,-52}},
            color={0,0,0},
            thickness=1));
        connect(pulmonaryComponent.port_a, heartComponent.pa) annotation (Line(
            points={{-34,-52},{-42,-52},{-42,-32},{-36,-32}},
            color={0,0,0},
            thickness=1));
        connect(condHRPhi.y, heartRate.phi) annotation (Line(points={{43.4,-24},
                {40,-24},{40,-24},{38,-24}},
                                    color={0,0,127}));
        connect(heartRate.HR, heartComponent.frequency_input)
          annotation (Line(points={{25.88,-24},{20,-24},{20,-22},{-16,-22}},
                                                           color={0,0,127}));
        connect(thoracic_pressure_ramp.y, condTP.u) annotation (Line(points={{-79,-40},
                {-74,-40},{-74,-40},{-70.4,-40}}, color={0,0,127}));
        connect(condTP.y, Systemic1.thoracic_pressure_input) annotation (Line(
              points={{-54.3,-40},{-46,-40},{-46,20},{-34,20}}, color={0,0,127}));
        connect(condTP.y, heartComponent.thoracic_pressure_input) annotation (
            Line(points={{-54.3,-40},{-26,-40},{-26,-32}}, color={0,0,127}));
        connect(condTP.y, pulmonaryComponent.thoracic_pressure) annotation (Line(
              points={{-54.3,-40},{-46,-40},{-46,-62},{-24,-62}}, color={0,0,127}));
        connect(Systemic1.phi_input, condSystemicPhi.y) annotation (Line(points={{-16,20},
                {14,20},{14,20},{43.4,20}},     color={0,0,127}));
        annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
              coordinateSystem(preserveAspectRatio=false)),
          experiment(
            StopTime=60,
            Interval=0.02,
            Tolerance=1e-05,
            __Dymola_Algorithm="Cvode"));
      end CVS_7af;

      model partialCVS_leveled "Base model for systemic tilting"
        extends Auxiliary.partialCVS(redeclare
            Components.Subsystems.Systemic.Postures.SystemicAV_SupineTilt
            SystemicComponent(UseTiltInput=true), heartComponent(
              UseFrequencyInput=true, UsePhiInput=false));

        replaceable Modelica.Blocks.Sources.Ramp Tilt_ramp(
          height=Modelica.Constants.pi/2,
          startTime=0,
          duration=1)   constrainedby Modelica.Blocks.Interfaces.SO
          annotation (Placement(transformation(extent={{-100,22},{-80,42}})));
      equation
        connect(Tilt_ramp.y, SystemicComponent.tilt_input) annotation (Line(
              points={{-79,32},{-22,32},{-22,20}}, color={0,0,127}));
      end partialCVS_leveled;

      model nominals
        parameter Physiolibrary.Types.HydraulicResistance TPR=119990148.6735;
        parameter Physiolibrary.Types.Fraction TR_frac=5.33333 "Ra to Rv ratio";
        parameter Physiolibrary.Types.Pressure Pt=2666.4477483;
        parameter Physiolibrary.Types.VolumeFlowRate CO=0.000105;
        parameter Physiolibrary.Types.Pressure Pa=TR_frac*(Pt - Pv) + Pt;
        parameter Physiolibrary.Types.Pressure Pv = (Pt * (1+ TR_frac) - TPR*CO)/(1+TR_frac);

      parameter Boolean b = Pv > 200;

      Real v;
      Real c(start = 1, fixed = b);
      equation
        v*c = 3;
        der(v) = 1;
        annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
              coordinateSystem(preserveAspectRatio=false)));
      end nominals;

      model OlufsenTriSeg_base "Simplified heart model"
        extends Identification.Results.Experiments.TriSeg_OptimizedBaseline(
          SystemicComponent(UseExerciseInput=false),
          condHRPhi(
            disconnected=false,
            delayIntegral_Enabled=
                         true,
            delayInt_Act=
                      settings.baro_hr_delay),
          phi_fixed(
            amplitude=0,
            offset=0.25,
            startTime=0),
          condHeartPhi(disconnected=false),
          redeclare Components.Subsystems.Heart.Heart_TriSegMechanics_Simple
            heartComponent(
            UseFrequencyInput=true,
            UsePhiInput=true,
            aorticValve(calculateAdditionalMetrics=settings.EvaluateFunctionalParams),
            mitralValve(calculateAdditionalMetrics=settings.EvaluateFunctionalParams),
            UseThoracic_PressureInput=
                                     true),
          settings(
            V_PV_init=7.4e-05,
            tissues_gamma=0.5,
            EvaluateFunctionalParams=true,
            baro_useAbsolutePressureTerm=false,
            baro_f1=0.0031,
            veins_activation_tau=0,
            eta_vc=0.25,
            tissues_tau_R=0,
            baro_tau_s=300,
            syst_art_UseVasoconstrictionEffect=true,
            tissues_chi_Ra=
                          40),
          pulmonaryComponent(deadVolume=0.002, c_pv(CollapsingPressureVolume=
                  pulmonaryComponent.deadVolume, MinimalCollapsingPressure=-13332.2387415)),
          useAutonomousPhi(y=true));

      //    useAutonomousPhi(y=true),

        output Modelica.Units.SI.Time TEjection=heartComponent.aorticValve.Ts;
        output Modelica.Units.SI.Time TFilling=heartComponent.mitralValve.Ts;
        output Physiolibrary.Types.Pressure thoracic_pressure=SystemicComponent.P_th;
        output Physiolibrary.Types.Pressure P_pa = pulmonaryComponent.r_pa.q_in.pressure "Pressure in pulmonary arteries";
        output Physiolibrary.Types.Pressure P_pv = pulmonaryComponent.r_pa.q_out.pressure "Pressure in pulmonary veins";

        annotation (experiment(
            StopTime=1800,
            Interval=0.04,
            Tolerance=1e-07,
            __Dymola_Algorithm="Cvode"));
      end OlufsenTriSeg_base;

      model TriSeg_base
        extends Auxiliary.partialCVS(
          condTP_PC(disconnected=true),
          condHRPhi(disconnected=false),
          phi_fixed(nperiod=0),
          thoracic_pressure_ramp(startTime=20),
          redeclare replaceable
            Components.Subsystems.Heart.Heart_TriSegMechanics_Lumens
            heartComponent(
            UseFrequencyInput=true,
            UsePhiInput=true,
            UseThoracic_PressureInput=
                                     true),
          redeclare replaceable Components.Subsystems.Pulmonary.PulmonaryTriSeg
            pulmonaryComponent(UseThoracic_PressureInput=true),
          heartRate(HR_nom(displayUnit="1/min")),
          settings(
            heart_alphaE=0.2,
            UseNonLinear_TissuesCompliance=true,
            tissues_UseStraighteningReaction2Phi=true,
            veins_activation_tau=0.1,
            hideLevel0=false,
            hideLevel1=false,
            eta_vc=0.2,
            tissues_eta_C=0.2,
            syst_art_UseVasoconstrictionEffect=true,
            heart_vntr_xi_AmRef=0.95,
            tissues_chi_C=
                         0.2));
            //UseNonLinear_VenousCompliance=true,

        output Physiolibrary.Types.Pressure brachial_pressure=SystemicComponent.brachial_L82_HeartLevel.p_C;

      output Physiolibrary.Types.Pressure brachial_pressure_mean(start = 0);
      Real brachial_pressure_int "integration of pressure to find the true mean";
        output Physiolibrary.Types.Pressure renal_capillary=SystemicComponent.renal_L166.p_C;
      output Physiolibrary.Types.VolumeFlowRate CO = heartComponent.aorticValve.CO;
        output Physiolibrary.Types.Pressure carotid_pressure=SystemicComponent.common_carotid_L48_D.p_C;
        output Physiolibrary.Types.Pressure femoral_pressure=SystemicComponent.femoral_L200.p_C;
      output Physiolibrary.Types.Volume V_LV = heartComponent.ventricles.V_LV;
        output Physiolibrary.Types.Fraction phi_baro=SystemicComponent.phi_baroreflex;
      output Physiolibrary.Types.Volume SV = CO/heartRate.HR;
      output Physiolibrary.Types.Frequency HR = heartRate.HR;
      Real CI = CO*1000*60/settings.BSA "Cardiac index l/min/m2";
      Physiolibrary.Types.Power CardiacPowerBrachial = brachial_pressure_mean*CO;
      Physiolibrary.Types.PowerPerMass CardiacPowerIndex = brachial_pressure_mean*CO/settings.BSA;
      //   parameter Real Vw_factor=1;
      //   parameter Real Amref_factor=0.95;
      //   parameter Physiolibrary.Types.HydraulicResistance TPR=119990148.6735;
      //   parameter Physiolibrary.Types.Fraction TR_frac=5.33333 "Ra to Rv ratio";
      //   parameter Physiolibrary.Types.Pressure Pt=2666.4477483;
      //   parameter Physiolibrary.Types.VolumeFlowRate CO_nom=0.000105;
      //   parameter Physiolibrary.Types.Pressure Pa=TR_frac*(Pt - Pv) + Pt;
      //   parameter Physiolibrary.Types.Pressure Pv = (Pt * (1+ TR_frac) - TPR*CO_nom)/(1+TR_frac);
      //
      //   parameter Physiolibrary.Types.Volume V_PV_init=0.0021398;
      equation

        der(brachial_pressure_int) = brachial_pressure;

        when heartComponent.ventricles.cardiac_cycle < 0.1 then
          brachial_pressure_mean = brachial_pressure_int*pre(heartComponent.ventricles.calciumMechanics.frequency);
          reinit(brachial_pressure_int, 0);
        end when;

        annotation (experiment(
            StopTime=30,
            Interval=0.01,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"),
                    experiment(
            StopTime=60,
            Interval=0.02,
            Tolerance=1e-05,
            __Dymola_Algorithm="Cvode"));
      end TriSeg_base;

      model CardiovascularSystem_old
        "A base model with manually added settings and steady state initialization"
        extends ADAN_main.SystemicTree.Identification.SteadyState.Baseline_init(
            useAutonomousPhi(y=true),  settings(
            HR_nominal=1.0666666666667,
              EvaluateFunctionalParams=true,
            HR_max=2.907,
              UseNonLinear_TissuesCompliance=true,
              baro_f1=0.0031,
              baro_useAbsolutePressureTerm=false,
            eta_vc=0.15745,
              syst_art_UseVasoconstrictionEffect=true,
              tissues_UseStraighteningReaction2Phi=true,
            tissues_ZPV_nom=0.00210124,
            tissues_eta_C=0.22878,
            tissues_eta_Ra=3.17162,
            tissues_gamma=0.5,
              tissues_tau_R(displayUnit="s") = 0,
              veins_activation_tau=0,
            baro_g=0.606258,
            baro_tau_s=115.62,
              baro_xi_delta0 =              2.688000e-01,
            pulm_C_PV=1.9879e-07,
            syst_TPR=130465900,
            syst_TR_frac=5.21529,
            V_PV_init=-0.0012975,
            syst_art_k_E=0.4226095,
            heart_vntr_xi_Vw=0.8908231,
            heart_vntr_xi_AmRef=0.9118,
            pulm_R(displayUnit="(dyn.s)/cm5") = 15145850,
            pulm_C_PA(displayUnit="ml/mmHg") = 3.800549e-08,
            heart_R_LA(displayUnit="(dyn.s)/cm5") = 3766520,
            heart_R_RA(displayUnit="(dyn.s)/cm5") = 3766520,
            baro_fsn(displayUnit="Hz") = 0.03272,
            heart_atr_D_A=16803550,
            heart_atr_D_0 =     0.5902815,
            heart_vntr_D_0= 0.01393399,
            heart_vntr_D_A =        1.5298,
              heart_vntr_TR( displayUnit="s") = 0.38,
              heart_vntr_TR_maxAct( displayUnit="s") = 0.1224,
            heart_vntr_D_A_maxAct =           18.8325,
            tissues_chi_Ra=
                          34.776),
               pulmonaryComponent(deadVolume=0.002, r_pa(
              R_nom_fixed=settings.pulm_R,
              Q_nom=settings.pulm_CO_target,
              useNonlinearResistance=true,
              useNominalParametrization=true,
              Q_nom_maxQ=settings.pulm_R/2)),
          heartComponent(aorticValve(calculateAdditionalMetrics=true)));

        annotation (experiment(
            StopTime=60,
            Interval=0.02,
            Tolerance=1e-07,
            __Dymola_Algorithm="Cvode"));
      end CardiovascularSystem_old;

      model CombinedModels_FMUs_optimizedParams
        "Parametrized as result of #1 optimization"
        extends Identification.CombinedModel.CombinedModels_FMUs(settings(
            baro_g=5.562000e-01,
            pulm_C_PV=1.930000e-07,
            HR_max=3.060000e+00,
            eta_vc=1.675000e-01,
            syst_art_k_E=3.688680e-01,
            tissues_ZPV_nom=2.188800e-03,
            tissues_eta_Ra=3.410320e+00,
            tissues_eta_C=2.460000e-01,
            baro_tau_s=1.230000e+02,
            baro_xi_delta0=2.800000e-01,
            heart_vntr_D_A =        1.880000e+00,
            heart_vntr_TR= 3.735000e-01,
            heart_vntr_TR_maxAct= 1.224000e-01,
            heart_vntr_D_A_maxAct =           2.025000e+01,
            tissues_chi_Ra=
                          3.220000e+01,
            tissues_chi_C=
                         3.862500e-01));
        annotation (__Dymola_Commands(file(ensureSimulated=false)=
              "\"Scripts/Dymola/ExportAndImportFMUs.mos\"" "Refresh FMUs"));
      end CombinedModels_FMUs_optimizedParams;

      model CombinedModels_FMUs_optimizedParams2
        "Parametrized as result of #2 optimization"
        extends Identification.CombinedModel.CombinedModels_FMUs(settings(
            baro_g=6.062580e-01,
            pulm_C_PV=1.987900e-07,
            HR_max=2.907000e+00,
            eta_vc=1.574500e-01,
            syst_art_k_E=3.504230e-01,
            tissues_ZPV_nom=2.101240e-03,
            tissues_eta_Ra=3.171620e+00,
            tissues_eta_C=2.287800e-01,
            baro_tau_s=1.156200e+02,
            baro_xi_delta0=2.688000e-01,
            heart_vntr_D_A =        1.974000e+00,
            heart_vntr_TR= 3.809700e-01,
            heart_vntr_TR_maxAct= 1.224000e-01,
            heart_vntr_D_A_maxAct =           1.883250e+01,
            tissues_chi_Ra=
                          3.477600e+01,
            tissues_chi_C=
                         3.437570e-01));
        annotation (__Dymola_Commands(file(ensureSimulated=false)=
              "\"Scripts/Dymola/ExportAndImportFMUs.mos\"" "Refresh FMUs"));
      end CombinedModels_FMUs_optimizedParams2;

      model CombinedModels_FMUs_optimizedParams2_lienarVeins
        "Parametrized as result of #2 optimization with linaear veins"

        Components.Settings settings(
          syst_TR_frac(displayUnit="%") = 5.118955,
          syst_TPR(displayUnit="(mmHg.min)/l") = 119490152,
          HR_max=2.907,
          eta_vc=0.15745,
          tissues_eta_Ra=3.17162,
          UseNonLinear_TissuesCompliance=true,
          V_PV_init=7.4e-05,
          syst_art_UseVasoconstrictionEffect=true,
          baro_tau_s=115.62,
          baro_xi_delta0=2.688000e-01,
          baro_f1=0.0031,
          baro_g=0.606258,
          baro_useAbsolutePressureTerm=false,
          tissues_chi_Ra=34.776,
          exercise_factor_on_arterial_compliance=0,
          tissues_chi_C=0.343757,
          heart_vntr_TR=3.809700e-01,
          heart_vntr_TR_maxAct=0.1224,
          heart_vntr_xi_AmRef=1.06,
          heart_vntr_xi_Vw=0.90375,
          heart_vntr_D_A_maxAct=18.8325,
          heart_vntr_D_A=1.974,
          initByPressure=false,
          syst_art_k_E=0.350423,
          pulm_C_PV=1.9879e-07,
          tissues_eta_C=0.22878,
          tissues_UseStraighteningReaction2Phi=true,
          tissues_gamma=0.5,
          tissues_ZPV_nom=0.00210124,
          veins_activation_tau=0.1)
          annotation (Placement(transformation(extent={{-100,80},{-80,100}})));

        replaceable
          ADAN_0main_SystemicTree_Variants_OlufsenTriSeg_0opt_0LinearVeins_0init_fmu_black_box
          baseline(
          settings(
            phi0=settings.phi0,
            weight=settings.weight,
            age=settings.age,
            HR_nominal=settings.HR_nominal,
            HR_max=settings.HR_max,
            V_PV_init=settings.V_PV_init,
            heart_R_vlv=settings.heart_R_vlv,
            heart_R_LA=settings.heart_R_LA,
            heart_R_RA=settings.heart_R_RA,
            heart_alphaE=settings.heart_alphaE,
            heart_gammaE=settings.heart_gammaE,
            heart_drive_offset=settings.heart_vntr_D_0,
            heart_drive_offset_maxAct=settings.heart_vntr_D_0_maxAct,
            heart_drive_k_TS=settings.heart_vntr_TS,
            heart_drive_k_TS_maxAct=settings.heart_vntr_TS_maxAct,
            heart_drive_k_TR=settings.heart_vntr_TR,
            heart_drive_k_TR_maxAct=settings.heart_vntr_TR_maxAct,
            heart_drive_drive=settings.heart_drive_drive,
            heart_atr_Tact=settings.heart_atr_Tact,
            heart_atr_Emin=settings.heart_atr_Emin,
            heart_atr_Emax=settings.heart_atr_Emax,
            heart_atr_sigma_a=settings.heart_atr_sigma_a,
            heart_vntr_Vw_factor=settings.heart_vntr_xi_Vw,
            heart_vntr_AmRef_factor=settings.heart_vntr_xi_AmRef,
            heart_vntr_sigma_act_factor=settings.heart_vntr_D_A,
            heart_vntr_sigma_actMaxAct_factor=settings.heart_vntr_D_A_maxAct,
            heart_vntr_k_passive_factor=settings.heart_vntr_k_passive,
            thoracic_pressure_ratio=settings.syst_abd_P_th_ratio,
            hydrostaticLevel_correction=settings.syst_tissues_hydrostaticLevel_correction,
            TPR=settings.syst_TPR,
            TR_frac=settings.syst_TR_frac,
            k_E=settings.syst_art_k_E,
            exercise_factor_on_arterial_compliance=settings.exercise_factor_on_arterial_compliance,
            R_vc=settings.eta_vc,
            tissues_nominal_pressure=settings.tissues_P_nom,
            tissues_nominal_zpv=settings.tissues_ZPV_nom,
            tissues_nominal_stressed_volume=settings.tissues_SV_nom,
            tissues_nominal_cardiac_output=settings.tissues_CO_nom,
            Ra_factor=settings.tissues_eta_Ra,
            dummy=settings.dummy,
            baro_hr_delay=settings.baro_hr_delay,
            tissuesCompliance_PhiEffect=settings.tissues_eta_C,
            exercise_factor_on_tissue_compliance=settings.tissues_chi_C,
            tissues_gamma=settings.tissues_gamma,
            exercise_factor=settings.tissues_chi_Ra,
            exercise_venous_pumping_factor=settings.veins_chi_pump,
            veins_UsePhiEffect=settings.veins_UsePhiEffect,
            veins_gamma=settings.veins_gamma,
            veins_alpha=settings.veins_alpha,
            baro_d0=settings.baro_d0,
            baro_Ts=settings.baro_tau_s,
            baro_delta0_factor=settings.baro_xi_delta0,
            baro_delta0_aor=settings.baro_delta0_aor,
            baro_delta0_car=settings.baro_delta0_car,
            baro_g=settings.baro_g,
            baro_fsn=settings.baro_fsn,
            baro_f1=settings.baro_f1,
            pulm_CO_target=settings.pulm_CO_target,
            pulm_C_PV=settings.pulm_C_PV,
            pulm_C_PA=settings.pulm_C_PA,
            pulm_R_PA=settings.pulm_R,
            veins_C_phi=settings.veins_C_phi,
            veins_ZPV_phi=settings.veins_ZPV_phi,
            experimental_zpv_factor=settings.experimental_zpv_factor,
            experimental_C_factor=settings.experimental_C_factor),
          fmi_StopTime=60,
          fmi_NumberOfSteps=steps)
          annotation (Placement(transformation(extent={{-80,40},{-60,60}})));

        ADAN_0main_SystemicTree_Variants_OlufsenTriseg_0opt_0LinearVeins_0init_0tiltable_fmu_black_box
          tilt(
          settings(
            phi0=settings.phi0,
            weight=settings.weight,
            age=settings.age,
            HR_nominal=settings.HR_nominal,
            HR_max=settings.HR_max,
            V_PV_init=settings.V_PV_init,
            heart_R_vlv=settings.heart_R_vlv,
            heart_R_LA=settings.heart_R_LA,
            heart_R_RA=settings.heart_R_RA,
            heart_alphaE=settings.heart_alphaE,
            heart_gammaE=settings.heart_gammaE,
            heart_drive_offset=settings.heart_vntr_D_0,
            heart_drive_offset_maxAct=settings.heart_vntr_D_0_maxAct,
            heart_drive_k_TS=settings.heart_vntr_TS,
            heart_drive_k_TS_maxAct=settings.heart_vntr_TS_maxAct,
            heart_drive_k_TR=settings.heart_vntr_TR,
            heart_drive_k_TR_maxAct=settings.heart_vntr_TR_maxAct,
            heart_drive_drive=settings.heart_drive_drive,
            heart_atr_Tact=settings.heart_atr_Tact,
            heart_atr_Emin=settings.heart_atr_Emin,
            heart_atr_Emax=settings.heart_atr_Emax,
            heart_atr_sigma_a=settings.heart_atr_sigma_a,
            heart_vntr_Vw_factor=settings.heart_vntr_xi_Vw,
            heart_vntr_AmRef_factor=settings.heart_vntr_xi_AmRef,
            heart_vntr_sigma_act_factor=settings.heart_vntr_D_A,
            heart_vntr_sigma_actMaxAct_factor=settings.heart_vntr_D_A_maxAct,
            heart_vntr_k_passive_factor=settings.heart_vntr_k_passive,
            thoracic_pressure_ratio=settings.syst_abd_P_th_ratio,
            hydrostaticLevel_correction=settings.syst_tissues_hydrostaticLevel_correction,
            TPR=settings.syst_TPR,
            TR_frac=settings.syst_TR_frac,
            k_E=settings.syst_art_k_E,
            exercise_factor_on_arterial_compliance=settings.exercise_factor_on_arterial_compliance,
            R_vc=settings.eta_vc,
            tissues_nominal_pressure=settings.tissues_P_nom,
            tissues_nominal_zpv=settings.tissues_ZPV_nom,
            tissues_nominal_stressed_volume=settings.tissues_SV_nom,
            tissues_nominal_cardiac_output=settings.tissues_CO_nom,
            Ra_factor=settings.tissues_eta_Ra,
            dummy=settings.dummy,
            baro_hr_delay=settings.baro_hr_delay,
            tissuesCompliance_PhiEffect=settings.tissues_eta_C,
            exercise_factor_on_tissue_compliance=settings.tissues_chi_C,
            tissues_gamma=settings.tissues_gamma,
            exercise_factor=settings.tissues_chi_Ra,
            exercise_venous_pumping_factor=settings.veins_chi_pump,
            veins_UsePhiEffect=settings.veins_UsePhiEffect,
            veins_gamma=settings.veins_gamma,
            veins_alpha=settings.veins_alpha,
            baro_d0=settings.baro_d0,
            baro_Ts=settings.baro_tau_s,
            baro_delta0_factor=settings.baro_xi_delta0,
            baro_delta0_aor=settings.baro_delta0_aor,
            baro_delta0_car=settings.baro_delta0_car,
            baro_g=settings.baro_g,
            baro_fsn=settings.baro_fsn,
            baro_f1=settings.baro_f1,
            pulm_CO_target=settings.pulm_CO_target,
            pulm_C_PV=settings.pulm_C_PV,
            pulm_C_PA=settings.pulm_C_PA,
            pulm_R_PA=settings.pulm_R,
            veins_C_phi=settings.veins_C_phi,
            veins_ZPV_phi=settings.veins_ZPV_phi,
            experimental_zpv_factor=settings.experimental_zpv_factor,
            experimental_C_factor=settings.experimental_C_factor),
          fmi_StopTime=60,
          fmi_NumberOfSteps=steps)
          annotation (Placement(transformation(extent={{-20,40},{0,60}})));

        ADAN_0main_SystemicTree_Variants_OlufsenTriseg_0opt_0LinearVeins_0init_0Exercise_fmu_black_box
          exercise(
          settings(
            phi0=settings.phi0,
            weight=settings.weight,
            age=settings.age,
            HR_nominal=settings.HR_nominal,
            HR_max=settings.HR_max,
            V_PV_init=settings.V_PV_init,
            heart_R_vlv=settings.heart_R_vlv,
            heart_R_LA=settings.heart_R_LA,
            heart_R_RA=settings.heart_R_RA,
            heart_alphaE=settings.heart_alphaE,
            heart_gammaE=settings.heart_gammaE,
            heart_drive_offset=settings.heart_vntr_D_0,
            heart_drive_offset_maxAct=settings.heart_vntr_D_0_maxAct,
            heart_drive_k_TS=settings.heart_vntr_TS,
            heart_drive_k_TS_maxAct=settings.heart_vntr_TS_maxAct,
            heart_drive_k_TR=settings.heart_vntr_TR,
            heart_drive_k_TR_maxAct=settings.heart_vntr_TR_maxAct,
            heart_drive_drive=settings.heart_drive_drive,
            heart_atr_Tact=settings.heart_atr_Tact,
            heart_atr_Emin=settings.heart_atr_Emin,
            heart_atr_Emax=settings.heart_atr_Emax,
            heart_atr_sigma_a=settings.heart_atr_sigma_a,
            heart_vntr_Vw_factor=settings.heart_vntr_xi_Vw,
            heart_vntr_AmRef_factor=settings.heart_vntr_xi_AmRef,
            heart_vntr_sigma_act_factor=settings.heart_vntr_D_A,
            heart_vntr_sigma_actMaxAct_factor=settings.heart_vntr_D_A_maxAct,
            heart_vntr_k_passive_factor=settings.heart_vntr_k_passive,
            thoracic_pressure_ratio=settings.syst_abd_P_th_ratio,
            hydrostaticLevel_correction=settings.syst_tissues_hydrostaticLevel_correction,
            TPR=settings.syst_TPR,
            TR_frac=settings.syst_TR_frac,
            k_E=settings.syst_art_k_E,
            exercise_factor_on_arterial_compliance=settings.exercise_factor_on_arterial_compliance,
            R_vc=settings.eta_vc,
            tissues_nominal_pressure=settings.tissues_P_nom,
            tissues_nominal_zpv=settings.tissues_ZPV_nom,
            tissues_nominal_stressed_volume=settings.tissues_SV_nom,
            tissues_nominal_cardiac_output=settings.tissues_CO_nom,
            Ra_factor=settings.tissues_eta_Ra,
            dummy=settings.dummy,
            baro_hr_delay=settings.baro_hr_delay,
            tissuesCompliance_PhiEffect=settings.tissues_eta_C,
            exercise_factor_on_tissue_compliance=settings.tissues_chi_C,
            tissues_gamma=settings.tissues_gamma,
            exercise_factor=settings.tissues_chi_Ra,
            exercise_venous_pumping_factor=settings.veins_chi_pump,
            veins_UsePhiEffect=settings.veins_UsePhiEffect,
            veins_gamma=settings.veins_gamma,
            veins_alpha=settings.veins_alpha,
            baro_d0=settings.baro_d0,
            baro_Ts=settings.baro_tau_s,
            baro_delta0_factor=settings.baro_xi_delta0,
            baro_delta0_aor=settings.baro_delta0_aor,
            baro_delta0_car=settings.baro_delta0_car,
            baro_g=settings.baro_g,
            baro_fsn=settings.baro_fsn,
            baro_f1=settings.baro_f1,
            pulm_CO_target=settings.pulm_CO_target,
            pulm_C_PV=settings.pulm_C_PV,
            pulm_C_PA=settings.pulm_C_PA,
            pulm_R_PA=settings.pulm_R,
            veins_C_phi=settings.veins_C_phi,
            veins_ZPV_phi=settings.veins_ZPV_phi,
            experimental_zpv_factor=settings.experimental_zpv_factor,
            experimental_C_factor=settings.experimental_C_factor),
          fmi_StopTime=60,
          fmi_NumberOfSteps=steps)
          annotation (Placement(transformation(extent={{40,40},{60,60}})));

        ADAN_0main_SystemicTree_Variants_OlufsenTriseg_0opt_0LinearVeins_0init_0valsalva_fmu_black_box
          valsalva(
          settings(
            phi0=settings.phi0,
            weight=settings.weight,
            age=settings.age,
            HR_nominal=settings.HR_nominal,
            HR_max=settings.HR_max,
            V_PV_init=settings.V_PV_init,
            heart_R_vlv=settings.heart_R_vlv,
            heart_R_LA=settings.heart_R_LA,
            heart_R_RA=settings.heart_R_RA,
            heart_alphaE=settings.heart_alphaE,
            heart_gammaE=settings.heart_gammaE,
            heart_drive_offset=settings.heart_vntr_D_0,
            heart_drive_offset_maxAct=settings.heart_vntr_D_0_maxAct,
            heart_drive_k_TS=settings.heart_vntr_TS,
            heart_drive_k_TS_maxAct=settings.heart_vntr_TS_maxAct,
            heart_drive_k_TR=settings.heart_vntr_TR,
            heart_drive_k_TR_maxAct=settings.heart_vntr_TR_maxAct,
            heart_drive_drive=settings.heart_drive_drive,
            heart_atr_Tact=settings.heart_atr_Tact,
            heart_atr_Emin=settings.heart_atr_Emin,
            heart_atr_Emax=settings.heart_atr_Emax,
            heart_atr_sigma_a=settings.heart_atr_sigma_a,
            heart_vntr_Vw_factor=settings.heart_vntr_xi_Vw,
            heart_vntr_AmRef_factor=settings.heart_vntr_xi_AmRef,
            heart_vntr_sigma_act_factor=settings.heart_vntr_D_A,
            heart_vntr_sigma_actMaxAct_factor=settings.heart_vntr_D_A_maxAct,
            heart_vntr_k_passive_factor=settings.heart_vntr_k_passive,
            thoracic_pressure_ratio=settings.syst_abd_P_th_ratio,
            hydrostaticLevel_correction=settings.syst_tissues_hydrostaticLevel_correction,
            TPR=settings.syst_TPR,
            TR_frac=settings.syst_TR_frac,
            k_E=settings.syst_art_k_E,
            exercise_factor_on_arterial_compliance=settings.exercise_factor_on_arterial_compliance,
            R_vc=settings.eta_vc,
            tissues_nominal_pressure=settings.tissues_P_nom,
            tissues_nominal_zpv=settings.tissues_ZPV_nom,
            tissues_nominal_stressed_volume=settings.tissues_SV_nom,
            tissues_nominal_cardiac_output=settings.tissues_CO_nom,
            Ra_factor=settings.tissues_eta_Ra,
            dummy=settings.dummy,
            baro_hr_delay=settings.baro_hr_delay,
            tissuesCompliance_PhiEffect=settings.tissues_eta_C,
            exercise_factor_on_tissue_compliance=settings.tissues_chi_C,
            tissues_gamma=settings.tissues_gamma,
            exercise_factor=settings.tissues_chi_Ra,
            exercise_venous_pumping_factor=settings.veins_chi_pump,
            veins_UsePhiEffect=settings.veins_UsePhiEffect,
            veins_gamma=settings.veins_gamma,
            veins_alpha=settings.veins_alpha,
            baro_d0=settings.baro_d0,
            baro_Ts=settings.baro_tau_s,
            baro_delta0_factor=settings.baro_xi_delta0,
            baro_delta0_aor=settings.baro_delta0_aor,
            baro_delta0_car=settings.baro_delta0_car,
            baro_g=settings.baro_g,
            baro_fsn=settings.baro_fsn,
            baro_f1=settings.baro_f1,
            pulm_CO_target=settings.pulm_CO_target,
            pulm_C_PV=settings.pulm_C_PV,
            pulm_C_PA=settings.pulm_C_PA,
            pulm_R_PA=settings.pulm_R,
            veins_C_phi=settings.veins_C_phi,
            veins_ZPV_phi=settings.veins_ZPV_phi,
            experimental_zpv_factor=settings.experimental_zpv_factor,
            experimental_C_factor=settings.experimental_C_factor),
          fmi_StopTime=60,
          fmi_NumberOfSteps=steps)
          annotation (Placement(transformation(extent={{-80,-20},{-60,0}})));

        parameter Real steps=endTime/stepInterval;
        parameter Real endTime=60;
        parameter Real stepInterval = 0.04;

        annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
              coordinateSystem(preserveAspectRatio=false), graphics={
              Text(
                extent={{-90,24},{-52,36}},
                lineColor={28,108,200},
                textString="Baseline"),
              Text(
                extent={{-30,24},{8,36}},
                lineColor={28,108,200},
                textString="Tilt 60deg"),
              Text(
                extent={{-88,-36},{-50,-24}},
                lineColor={28,108,200},
                textString="Valsalva supine"),
              Text(
                extent={{-28,-36},{10,-24}},
                lineColor={28,108,200},
                textString="Valsalva sitting"),
              Text(
                extent={{32,24},{70,36}},
                lineColor={28,108,200},
                textString="Exercise")}),
          experiment(
            StopTime=60,
            Interval=0.04,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end CombinedModels_FMUs_optimizedParams2_lienarVeins;

      model partialCVS_optimizedBaseline
        "Archiving baseline optimization result"
        extends Auxiliary.partialCVS_outputs(
          useAutonomousPhi(y=true),
          settings(
            HR_nominal=1.0666666666667,
            EvaluateFunctionalParams=true,
            HR_max=2.907,
            UseNonLinear_TissuesCompliance=true,
            baro_f1=0.0031,
            baro_useAbsolutePressureTerm=false,
            eta_vc=0.15745,
            syst_art_UseVasoconstrictionEffect=true,
            tissues_UseStraighteningReaction2Phi=true,
            tissues_ZPV_nom=0.00210124,
            tissues_eta_C=0.22878,
            tissues_eta_Ra=3.17162,
            tissues_gamma=0.5,
            tissues_tau_R(displayUnit="s") = 0,
            veins_activation_tau=0,
            baro_g=0.606258,
            baro_tau_s=115.62,
            baro_xi_delta0=2.688000e-01,
            pulm_C_PV=1.9879e-07,
            syst_TPR=130465900,
            syst_TR_frac=5.21529,
            V_PV_init=-0.0012975,
            syst_art_k_E=0.4226095,
            heart_vntr_xi_Vw=0.8908231,
            heart_vntr_xi_AmRef=0.9118,
            pulm_R(displayUnit="(dyn.s)/cm5") = 15145850,
            pulm_C_PA(displayUnit="ml/mmHg") = 3.800549e-08,
            heart_R_LA(displayUnit="(dyn.s)/cm5") = 3766520,
            heart_R_RA(displayUnit="(dyn.s)/cm5") = 3766520,
            baro_fsn(displayUnit="Hz") = 0.03272,
            heart_atr_D_A=16803550,
            heart_atr_D_0 =     0.5902815,
            heart_vntr_D_0= 0.01393399,
            heart_vntr_D_A =        1.5298,
            heart_vntr_TR( displayUnit="s") = 0.38,
            heart_vntr_TR_maxAct( displayUnit="s") = 0.1224,
            heart_vntr_D_A_maxAct =           18.8325,
            tissues_chi_Ra=
                          34.776),
          pulmonaryComponent(deadVolume=0.002, r_pa(
              R_nom_fixed=settings.pulm_R,
              Q_nom=settings.pulm_CO_target,
              useNonlinearResistance=true,
              useNominalParametrization=true,
              Q_nom_maxQ=settings.pulm_R/2)));
      end partialCVS_optimizedBaseline;

      model partialCVS_optimizedCombined "Combined ptimization result optimized at Sep 20 23:43:08 CEST 2020
 with cost 0.720089 lowest at run 1068"
        extends Auxiliary.partialCVS_outputs(useAutonomousPhi(y=true), settings(
            height=1.7132,
            tissues_CO_nom=0.000105,
            EvaluateFunctionalParams=true,
            HR_max=2.907,
            HR_nominal=1.0666666666667,
            UseNonLinear_TissuesCompliance=true,
            baro_f1=3.379000e-03,
            baro_fsn=0.0320656,
            baro_g=0.606258,
            baro_tau_s=98.37,
            baro_useAbsolutePressureTerm=false,
            baro_xi_delta0=2.688000e-01,
            chi_phi=1.185,
            eta_vc=0.1267,
            heart_R_LA(displayUnit="(dyn.s)/cm5") = 3766520,
            heart_R_RA(displayUnit="(dyn.s)/cm5") = 3766520,
            heart_vntr_xi_AmRef=0.9118,
            heart_vntr_xi_Vw=0.8908231,
            pulm_C_PA=3.819551e-08,
            pulm_C_PV=1.968021e-07,
            pulm_R=14388560,
            pulm_R_exp=9.150000e-01,
            syst_TPR=130465900,
            syst_TR_frac=5.21529,
            syst_abd_P_th_ratio=0.832,
            syst_art_UseVasoconstrictionEffect=true,
            syst_art_k_E=0.4226095,
            tissues_UseStraighteningReaction2Phi=true,
            tissues_ZPV_nom=0.00210124,
            tissues_eta_C=0.2676726,
            tissues_eta_Ra=3.393633,
            tissues_gamma=0.5,
            tissues_tau_R(displayUnit="s") = 0,
            veins_C_phi=0.09,
            veins_activation_tau=0,
            heart_atr_D_A=16803550,
            heart_atr_D_0=0.5902815,
            heart_vntr_D_0_maxAct=0.0005765625,
            heart_vntr_D_0=0.01393399,
            heart_vntr_D_A=1.5298,
            heart_vntr_TR(displayUnit="s") = 0.38,
            heart_vntr_D_A_maxAct=16.00763,
            tissues_chi_Ra=
                          29.376,
            tissues_chi_C=
                         -0.12));
      end partialCVS_optimizedCombined;

      partial model partialCVS_ss
        "Steady state initialization from 2020-09-14 10:44:32.920763 at time 179.92"

        extends Obsolete.partialCVS_optimizedCombined(
              SystemicComponent(
              baroreflex_system(
                baroreflex(phi_mean(start = 0.24930115, fixed = true), phi(start = 0.25175378, fixed = true)),
                baroreceptor_aortic(fbr_int(start = 18.098284, fixed = true), epsilon(start = 1.5408921, fixed = true), s(start = 0.80313325, fixed = true)),
                baroreceptor_carotid(fbr_int(start = 9.969681, fixed = true), epsilon(start = 1.1758231, fixed = true), s(start = 0.8915902, fixed = true))),
              ascending_aorta_A(q(start = 4.7891126e-06, fixed = true), vol1(start = 7.741325e-06, fixed = true), vol2(start = 7.740929e-06, fixed = true)),
              ascending_aorta_B(q_in(start = 9.5865125e-06, fixed = true), volume(start = 2.4455125e-05, fixed = true)),
              ascending_aorta_C(q_in(start = 1.5405387e-05, fixed = true), volume(start = 2.2619479e-05, fixed = true)),
              ascending_aorta_D(q_in(start = 2.3242754e-05, fixed = true), volume(start = 2.0650332e-05, fixed = true)),
              aortic_arch_C2(q_in(start = 3.0315494e-05, fixed = true), volume(start = 1.8890645e-05, fixed = true)),
              brachiocephalic_trunk_C4(q_in(start = -2.751741e-06, fixed = true), volume(start = 1.2878123e-05, fixed = true)),
              aortic_arch_C46(q_in(start = 3.944277e-05, fixed = true), volume(start = 1.1193709e-05, fixed = true)),
              aortic_arch_C64(q_in(start = 4.6177294e-05, fixed = true), volume(start = 7.684528e-06, fixed = true)),
              aortic_arch_C94(q_in(start = 4.6339173e-05, fixed = true), volume(start = 4.21373e-05, fixed = true)),
              thoracic_aorta_C96(q_in(start = 5.886148e-05, fixed = true), volume(start = 7.570479e-06, fixed = true)),
              thoracic_aorta_C100(q_in(start = 6.1021252e-05, fixed = true), volume(start = 5.8224477e-06, fixed = true)),
              thoracic_aorta_C104(q_in(start = 6.26352e-05, fixed = true), volume(start = 1.0967433e-05, fixed = true)),
              thoracic_aorta_C108(q_in(start = 6.549362e-05, fixed = true), volume(start = 3.6027632e-06, fixed = true)),
              thoracic_aorta_C112(q_in(start = 6.641022e-05, fixed = true), volume(start = 5.8809717e-05, fixed = true)),
              abdominal_aorta_C114(q_in(start = 7.069e-05, fixed = true), volume(start = 1.2160663e-06, fixed = true)),
              abdominal_aorta_C136(q_in(start = 6.039267e-05, fixed = true), volume(start = 5.10137e-06, fixed = true)),
              abdominal_aorta_C164(q_in(start = 5.334334e-05, fixed = true), volume(start = 1.514121e-06, fixed = true)),
              abdominal_aorta_C176(q_in(start = 4.406575e-05, fixed = true), volume(start = 4.069545e-06, fixed = true)),
              abdominal_aorta_C188(q_in(start = 3.495255e-05, fixed = true), volume(start = 1.6246277e-05, fixed = true)),
              abdominal_aorta_C192(q_in(start = 3.4464385e-05, fixed = true), volume(start = 1.0094919e-05, fixed = true)),
              celiac_trunk_C116(volume(start = 0.00035894633, fixed = true)),
              renal_L166(volume(start = 0.00032424013, fixed = true)),
              renal_R178(volume(start = 0.0003213272, fixed = true)),
              common_iliac_R216(q_in(start = 1.6922218e-05, fixed = true), volume(start = 8.394215e-06, fixed = true)),
              internal_iliac_T1_R218(volume(start = 0.00017648032, fixed = true)),
              external_iliac_R220(q_in(start = 1.0942256e-05, fixed = true), volume(start = 4.840243e-06, fixed = true)),
              femoral_R222(q_in(start = 1.0466925e-05, fixed = true), volume(start = 1.3855271e-06, fixed = true)),
              profundus_T2_R224(volume(start = 0.00020239198, fixed = true)),
              femoral_R226(q_in(start = 4.5208994e-06, fixed = true), volume(start = 1.16122155e-05, fixed = true)),
              popliteal_R228(q_in(start = 2.4283165e-06, fixed = true), volume(start = 3.5710325e-06, fixed = true)),
              anterior_tibial_T3_R230(volume(start = 2.6648477e-05, fixed = true)),
              popliteal_R232(q_in(start = 9.795816e-07, fixed = true), volume(start = 1.8123525e-07, fixed = true)),
              tibiofibular_trunk_R234(q_in(start = 9.604763e-07, fixed = true), volume(start = 7.368587e-07, fixed = true)),
              posterior_tibial_T4_R236(volume(start = 2.8990882e-05, fixed = true)),
              common_iliac_L194(q_in(start = 1.6825268e-05, fixed = true), volume(start = 8.029576e-06, fixed = true)),
              internal_iliac_T1_L196(volume(start = 0.0001764832, fixed = true)),
              external_iliac_L198(q_in(start = 1.0910256e-05, fixed = true), volume(start = 4.840974e-06, fixed = true)),
              femoral_L200(q_in(start = 1.0444083e-05, fixed = true), volume(start = 1.3857408e-06, fixed = true)),
              profundus_T2_L202(volume(start = 0.00020239464, fixed = true)),
              femoral_L204(q_in(start = 4.4969865e-06, fixed = true), volume(start = 1.1614383e-05, fixed = true)),
              popliteal_L206(q_in(start = 2.4235317e-06, fixed = true), volume(start = 3.571652e-06, fixed = true)),
              anterior_tibial_T3_L208(volume(start = 2.6648788e-05, fixed = true)),
              popliteal_L210(q_in(start = 9.795235e-07, fixed = true), volume(start = 1.8125257e-07, fixed = true)),
              tibiofibular_trunk_L212(q_in(start = 9.605702e-07, fixed = true), volume(start = 7.369516e-07, fixed = true)),
              posterior_tibial_T4_L214(volume(start = 2.8991275e-05, fixed = true)),
              subclavian_R28(q_in(start = 2.801184e-06, fixed = true), volume(start = 1.9780064e-06, fixed = true)),
              subclavian_R30(q_in(start = 1.4107255e-06, fixed = true), volume(start = 2.6014345e-06, fixed = true)),
              axillary_R32(q_in(start = 2.1425049e-06, fixed = true), volume(start = 2.9935559e-06, fixed = true)),
              brachial_R34(q_in(start = 2.7424371e-06, fixed = true), volume(start = 4.371171e-06, fixed = true)),
              ulnar_T2_R36(q_in(start = 1.7076428e-06, fixed = true), volume(start = 2.349348e-07, fixed = true)),
              ulnar_T2_R42(volume(start = 6.0989736e-05, fixed = true)),
              radial_T1_R44(volume(start = 5.0063023e-05, fixed = true)),
              subclavian_L66(q_in(start = 2.3535786e-06, fixed = true), volume(start = 4.704757e-06, fixed = true)),
              subclavian_L78(q_in(start = 1.6464196e-06, fixed = true), volume(start = 1.9308882e-06, fixed = true)),
              axillary_L80(q_in(start = 2.116359e-06, fixed = true), volume(start = 2.9886035e-06, fixed = true)),
              brachial_L82(q_in(start = 3.0593862e-06, fixed = true), volume(start = 8.3166725e-07, fixed = true)),
              ulnar_T2_L84(q_in(start = 1.6932565e-06, fixed = true), volume(start = 2.3472343e-07, fixed = true)),
              ulnar_T2_L90(volume(start = 6.096195e-05, fixed = true)),
              radial_T1_L92(volume(start = 5.3059044e-05, fixed = true)),
              common_carotid_R6_A(q_in(start = -1.2669333e-06, fixed = true), volume(start = 4.8281845e-06, fixed = true)),
              common_carotid_R6_B(q_in(start = 8.2757936e-07, fixed = true), volume(start = 4.1240546e-06, fixed = true)),
              common_carotid_R6_C(q_in(start = 2.6473351e-06, fixed = true), volume(start = 3.085043e-06, fixed = true)),
              internal_carotid_R8_A(q_in(start = 1.8176981e-06, fixed = true), volume(start = 1.2422475e-06, fixed = true)),
              internal_carotid_R8_B(q_in(start = 2.0452617e-06, fixed = true), volume(start = 7.8761275e-07, fixed = true)),
              internal_carotid_R8_C(volume(start = 7.226639e-05, fixed = true)),
              external_carotid_T2_R26(volume(start = 7.25409e-05, fixed = true)),
              common_carotid_L48_A(q_in(start = -3.0178282e-06, fixed = true), volume(start = 5.2247765e-06, fixed = true)),
              common_carotid_L48_B(q_in(start = -9.118605e-07, fixed = true), volume(start = 4.59612e-06, fixed = true)),
              common_carotid_L48_C(q_in(start = 9.799176e-07, fixed = true), volume(start = 4.0847412e-06, fixed = true)),
              common_carotid_L48_D(q_in(start = 2.678458e-06, fixed = true), volume(start = 3.3103743e-06, fixed = true)),
              internal_carotid_L50_A(q_in(start = 1.8520627e-06, fixed = true), volume(start = 1.2431815e-06, fixed = true)),
              internal_carotid_L50_B(q_in(start = 2.0649109e-06, fixed = true), volume(start = 7.881731e-07, fixed = true)),
              internal_carotid_L50_C(volume(start = 7.22633e-05, fixed = true)),
              external_carotid_T2_L62(volume(start = 7.2532275e-05, fixed = true)),
              vertebral_L2(volume(start = 6.668325e-05, fixed = true)),
              vertebral_R272(volume(start = 6.6695255e-05, fixed = true)),
              superior_vena_cava_C2(volume(start = 2.1616434e-06, fixed = true)),
              superior_vena_cava_C88(volume(start = 3.7250738e-06, fixed = true)),
              inferior_vena_cava_C8(volume(start = 3.2420462e-06, fixed = true)),
              hepatic_vein_T1_C10(volume(start = 1.2711224e-06, fixed = true)),
              inferior_vena_cava_C12(volume(start = 8.796935e-06, fixed = true)),
              inferior_vena_cava_C16(volume(start = 6.918212e-06, fixed = true)),
              renal_vein_T1_R18(volume(start = 2.0384666e-06, fixed = true)),
              inferior_vena_cava_C20(volume(start = 4.826637e-07, fixed = true)),
              renal_vein_T1_L22(volume(start = 1.8011691e-06, fixed = true)),
              inferior_vena_cava_C24(volume(start = 1.9253397e-05, fixed = true)),
              common_iliac_vein_L56(volume(start = 4.725373e-06, fixed = true)),
              common_iliac_vein_R26(volume(start = 4.343311e-06, fixed = true)),
              external_iliac_vein_R28(volume(start = 6.334687e-07, fixed = true)),
              internal_iliac_vein_T1_R30(volume(start = 2.7096576e-06, fixed = true)),
              external_iliac_vein_R32(volume(start = 7.3500237e-06, fixed = true)),
              femoral_vein_R34(volume(start = 3.1951808e-07, fixed = true)),
              femoral_vein_R38(volume(start = 2.533166e-06, fixed = true)),
              profunda_femoris_vein_T2_R40(volume(start = 7.0154774e-06, fixed = true)),
              femoral_vein_R42(volume(start = 1.7922623e-05, fixed = true)),
              femoral_vein_R46(volume(start = 9.870693e-07, fixed = true)),
              popliteal_vein_R48(volume(start = 4.0179275e-06, fixed = true)),
              anterior_tibial_vein_T4_R50(volume(start = 1.1430095e-06, fixed = true)),
              popliteal_vein_R52(volume(start = 8.937971e-07, fixed = true)),
              posterior_tibial_vein_T6_R54(volume(start = 1.7275721e-06, fixed = true)),
              external_iliac_vein_L58(volume(start = 6.3426654e-07, fixed = true)),
              internal_iliac_vein_T1_L60(volume(start = 2.7871251e-06, fixed = true)),
              external_iliac_vein_L62(volume(start = 7.216123e-06, fixed = true)),
              femoral_vein_L64(volume(start = 3.7354954e-07, fixed = true)),
              femoral_vein_L68(volume(start = 2.533252e-06, fixed = true)),
              profunda_femoris_vein_T2_L70(volume(start = 7.0156875e-06, fixed = true)),
              femoral_vein_L72(volume(start = 1.7923236e-05, fixed = true)),
              femoral_vein_L76(volume(start = 9.870969e-07, fixed = true)),
              popliteal_vein_L78(volume(start = 4.0180653e-06, fixed = true)),
              anterior_tibial_vein_T4_L80(volume(start = 1.1430578e-06, fixed = true)),
              popliteal_vein_L82(volume(start = 8.938334e-07, fixed = true)),
              posterior_tibial_vein_T6_L84(volume(start = 1.7276424e-06, fixed = true)),
              brachiocephalic_vein_R90(volume(start = 4.3799923e-06, fixed = true)),
              brachiocephalic_vein_L124(volume(start = 8.208929e-06, fixed = true)),
              vertebral_vein_R92(volume(start = 2.75401e-06, fixed = true)),
              brachiocephalic_vein_R94(volume(start = 9.929537e-07, fixed = true)),
              subclavian_vein_R96(volume(start = 4.8281834e-07, fixed = true)),
              internal_jugular_vein_R122(volume(start = 1.9084135e-05, fixed = true)),
              external_jugular_vein_R98(volume(start = 1.3387258e-06, fixed = true)),
              subclavian_vein_R100(volume(start = 1.9747608e-06, fixed = true)),
              axillary_vein_R102(volume(start = 6.9405933e-06, fixed = true)),
              brachial_vein_R104(volume(start = 1.3609908e-06, fixed = true)),
              brachial_vein_R114(volume(start = 1.22317e-06, fixed = true)),
              brachial_vein_R108(volume(start = 1.8800257e-07, fixed = true)),
              ulnar_vein_T7_R110(volume(start = 1.5671646e-06, fixed = true)),
              brachial_vein_R118(volume(start = 1.1817549e-07, fixed = true)),
              radial_vein_T3_R120(volume(start = 9.889869e-07, fixed = true)),
              vertebral_vein_L126(volume(start = 2.5753711e-06, fixed = true)),
              brachiocephalic_vein_L128(volume(start = 5.018355e-07, fixed = true)),
              subclavian_vein_L130(volume(start = 4.2939462e-07, fixed = true)),
              internal_jugular_vein_L156(volume(start = 1.1585479e-05, fixed = true)),
              external_jugular_vein_L132(volume(start = 1.3127751e-06, fixed = true)),
              subclavian_vein_L134(volume(start = 1.924739e-06, fixed = true)),
              axillary_vein_L136(volume(start = 7.0202304e-06, fixed = true)),
              brachial_vein_L138(q_out(start = 2.2906886e-06, fixed = true), volume(start = 1.3534399e-06, fixed = true)),
              brachial_vein_L148(volume(start = 1.2252591e-06, fixed = true)),
              brachial_vein_L142(volume(start = 1.8700365e-07, fixed = true)),
              ulnar_vein_T7_L144(volume(start = 1.563212e-06, fixed = true)),
              brachial_vein_L152(volume(start = 1.1839537e-07, fixed = true)),
              radial_vein_T3_L154(volume(start = 9.96403e-07, fixed = true)),
              mesenteric_artery(q_in(start = 7.315994e-06, fixed = true), volume(start = 6.354152e-06, fixed = true)),
              splanchnic_tissue(volume(start = 0.0002603238, fixed = true)),
              splanchnic_vein(volume(start = 1.0594096e-05, fixed = true)),
              coronary_arteries(q_in(start = 2.7237734e-06, fixed = true), volume(start = 3.6808633e-08, fixed = true)),
              cardiac_tissue(volume(start = 0.0001177309, fixed = true)),
              coronary_veins(volume(start = 2.386533e-08, fixed = true)),
              brachial_L82_HeartLevel(q_in(start = 2.655711e-06, fixed = true), volume(start = 3.5419416e-06, fixed = true))),
            heartComponent(
              tricuspidValve(open(start = true, fixed = true)),
              pulmonaryValve(open(start = false, fixed = true)),
              mitralValve(open(start = true, fixed = true), BP_max(start = 0.0, fixed = true), BP_min(start = 39996.0, fixed = true), CO_acc(start = 0.0, fixed = true)),
              aorticValve(open(start = false, fixed = true), BP_max(start = 15132.825, fixed = true), BP_min(start = 11252.298, fixed = true), CO_acc(start = 8.998715e-05, fixed = true)),
              ventricles(
                LV_wall(ym(start = 3.4414701, fixed = true), SL(start = 2.153967, fixed = true)),
                SEP_wall(SL(start = 2.1844857, fixed = true)),
                RV_wall(SL(start = 2.1489136, fixed = true)),
                V_LV(start = 0.00012848654, fixed = true), V_RV(start = 0.00012449617, fixed = true)),
              ra(volume(start = 1.3404624e-05, fixed = true), currentWork(start = 0.3296081, fixed = true)),
              la(volume(start = 5.76426e-05, fixed = true), currentWork(start = 0.08366831, fixed = true))),
            pulmonaryComponent(
              c_pa(volume(start = 4.78778e-05, fixed = true)),
              c_pv(volume(start = settings.pulm_V_PV_start, fixed = true))),
          settings(initByPressure=false));

        annotation (experiment(
            StopTime=60,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));

      end partialCVS_ss;

      partial model partialCVS_ss_noHeart
        "Steady state initialization from 2020-09-14 10:44:32.920763 at time 179.92 Heart is not initialized to allow for a redaclarations"

        extends Obsolete.partialCVS_optimizedCombined(
              SystemicComponent(
              baroreflex_system(
                baroreflex(phi_mean(start = 0.24930115, fixed = true), phi(start = 0.25175378, fixed = true)),
                baroreceptor_aortic(fbr_int(start = 18.098284, fixed = true), epsilon(start = 1.5408921, fixed = true), s(start = 0.80313325, fixed = true)),
                baroreceptor_carotid(fbr_int(start = 9.969681, fixed = true), epsilon(start = 1.1758231, fixed = true), s(start = 0.8915902, fixed = true))),
              ascending_aorta_A(q(start = 4.7891126e-06, fixed = true), vol1(start = 7.741325e-06, fixed = true), vol2(start = 7.740929e-06, fixed = true)),
              ascending_aorta_B(q_in(start = 9.5865125e-06, fixed = true), volume(start = 2.4455125e-05, fixed = true)),
              ascending_aorta_C(q_in(start = 1.5405387e-05, fixed = true), volume(start = 2.2619479e-05, fixed = true)),
              ascending_aorta_D(q_in(start = 2.3242754e-05, fixed = true), volume(start = 2.0650332e-05, fixed = true)),
              aortic_arch_C2(q_in(start = 3.0315494e-05, fixed = true), volume(start = 1.8890645e-05, fixed = true)),
              brachiocephalic_trunk_C4(q_in(start = -2.751741e-06, fixed = true), volume(start = 1.2878123e-05, fixed = true)),
              aortic_arch_C46(q_in(start = 3.944277e-05, fixed = true), volume(start = 1.1193709e-05, fixed = true)),
              aortic_arch_C64(q_in(start = 4.6177294e-05, fixed = true), volume(start = 7.684528e-06, fixed = true)),
              aortic_arch_C94(q_in(start = 4.6339173e-05, fixed = true), volume(start = 4.21373e-05, fixed = true)),
              thoracic_aorta_C96(q_in(start = 5.886148e-05, fixed = true), volume(start = 7.570479e-06, fixed = true)),
              thoracic_aorta_C100(q_in(start = 6.1021252e-05, fixed = true), volume(start = 5.8224477e-06, fixed = true)),
              thoracic_aorta_C104(q_in(start = 6.26352e-05, fixed = true), volume(start = 1.0967433e-05, fixed = true)),
              thoracic_aorta_C108(q_in(start = 6.549362e-05, fixed = true), volume(start = 3.6027632e-06, fixed = true)),
              thoracic_aorta_C112(q_in(start = 6.641022e-05, fixed = true), volume(start = 5.8809717e-05, fixed = true)),
              abdominal_aorta_C114(q_in(start = 7.069e-05, fixed = true), volume(start = 1.2160663e-06, fixed = true)),
              abdominal_aorta_C136(q_in(start = 6.039267e-05, fixed = true), volume(start = 5.10137e-06, fixed = true)),
              abdominal_aorta_C164(q_in(start = 5.334334e-05, fixed = true), volume(start = 1.514121e-06, fixed = true)),
              abdominal_aorta_C176(q_in(start = 4.406575e-05, fixed = true), volume(start = 4.069545e-06, fixed = true)),
              abdominal_aorta_C188(q_in(start = 3.495255e-05, fixed = true), volume(start = 1.6246277e-05, fixed = true)),
              abdominal_aorta_C192(q_in(start = 3.4464385e-05, fixed = true), volume(start = 1.0094919e-05, fixed = true)),
              celiac_trunk_C116(volume(start = 0.00035894633, fixed = true)),
              renal_L166(volume(start = 0.00032424013, fixed = true)),
              renal_R178(volume(start = 0.0003213272, fixed = true)),
              common_iliac_R216(q_in(start = 1.6922218e-05, fixed = true), volume(start = 8.394215e-06, fixed = true)),
              internal_iliac_T1_R218(volume(start = 0.00017648032, fixed = true)),
              external_iliac_R220(q_in(start = 1.0942256e-05, fixed = true), volume(start = 4.840243e-06, fixed = true)),
              femoral_R222(q_in(start = 1.0466925e-05, fixed = true), volume(start = 1.3855271e-06, fixed = true)),
              profundus_T2_R224(volume(start = 0.00020239198, fixed = true)),
              femoral_R226(q_in(start = 4.5208994e-06, fixed = true), volume(start = 1.16122155e-05, fixed = true)),
              popliteal_R228(q_in(start = 2.4283165e-06, fixed = true), volume(start = 3.5710325e-06, fixed = true)),
              anterior_tibial_T3_R230(volume(start = 2.6648477e-05, fixed = true)),
              popliteal_R232(q_in(start = 9.795816e-07, fixed = true), volume(start = 1.8123525e-07, fixed = true)),
              tibiofibular_trunk_R234(q_in(start = 9.604763e-07, fixed = true), volume(start = 7.368587e-07, fixed = true)),
              posterior_tibial_T4_R236(volume(start = 2.8990882e-05, fixed = true)),
              common_iliac_L194(q_in(start = 1.6825268e-05, fixed = true), volume(start = 8.029576e-06, fixed = true)),
              internal_iliac_T1_L196(volume(start = 0.0001764832, fixed = true)),
              external_iliac_L198(q_in(start = 1.0910256e-05, fixed = true), volume(start = 4.840974e-06, fixed = true)),
              femoral_L200(q_in(start = 1.0444083e-05, fixed = true), volume(start = 1.3857408e-06, fixed = true)),
              profundus_T2_L202(volume(start = 0.00020239464, fixed = true)),
              femoral_L204(q_in(start = 4.4969865e-06, fixed = true), volume(start = 1.1614383e-05, fixed = true)),
              popliteal_L206(q_in(start = 2.4235317e-06, fixed = true), volume(start = 3.571652e-06, fixed = true)),
              anterior_tibial_T3_L208(volume(start = 2.6648788e-05, fixed = true)),
              popliteal_L210(q_in(start = 9.795235e-07, fixed = true), volume(start = 1.8125257e-07, fixed = true)),
              tibiofibular_trunk_L212(q_in(start = 9.605702e-07, fixed = true), volume(start = 7.369516e-07, fixed = true)),
              posterior_tibial_T4_L214(volume(start = 2.8991275e-05, fixed = true)),
              subclavian_R28(q_in(start = 2.801184e-06, fixed = true), volume(start = 1.9780064e-06, fixed = true)),
              subclavian_R30(q_in(start = 1.4107255e-06, fixed = true), volume(start = 2.6014345e-06, fixed = true)),
              axillary_R32(q_in(start = 2.1425049e-06, fixed = true), volume(start = 2.9935559e-06, fixed = true)),
              brachial_R34(q_in(start = 2.7424371e-06, fixed = true), volume(start = 4.371171e-06, fixed = true)),
              ulnar_T2_R36(q_in(start = 1.7076428e-06, fixed = true), volume(start = 2.349348e-07, fixed = true)),
              ulnar_T2_R42(volume(start = 6.0989736e-05, fixed = true)),
              radial_T1_R44(volume(start = 5.0063023e-05, fixed = true)),
              subclavian_L66(q_in(start = 2.3535786e-06, fixed = true), volume(start = 4.704757e-06, fixed = true)),
              subclavian_L78(q_in(start = 1.6464196e-06, fixed = true), volume(start = 1.9308882e-06, fixed = true)),
              axillary_L80(q_in(start = 2.116359e-06, fixed = true), volume(start = 2.9886035e-06, fixed = true)),
              brachial_L82(q_in(start = 3.0593862e-06, fixed = true), volume(start = 8.3166725e-07, fixed = true)),
              ulnar_T2_L84(q_in(start = 1.6932565e-06, fixed = true), volume(start = 2.3472343e-07, fixed = true)),
              ulnar_T2_L90(volume(start = 6.096195e-05, fixed = true)),
              radial_T1_L92(volume(start = 5.3059044e-05, fixed = true)),
              common_carotid_R6_A(q_in(start = -1.2669333e-06, fixed = true), volume(start = 4.8281845e-06, fixed = true)),
              common_carotid_R6_B(q_in(start = 8.2757936e-07, fixed = true), volume(start = 4.1240546e-06, fixed = true)),
              common_carotid_R6_C(q_in(start = 2.6473351e-06, fixed = true), volume(start = 3.085043e-06, fixed = true)),
              internal_carotid_R8_A(q_in(start = 1.8176981e-06, fixed = true), volume(start = 1.2422475e-06, fixed = true)),
              internal_carotid_R8_B(q_in(start = 2.0452617e-06, fixed = true), volume(start = 7.8761275e-07, fixed = true)),
              internal_carotid_R8_C(volume(start = 7.226639e-05, fixed = true)),
              external_carotid_T2_R26(volume(start = 7.25409e-05, fixed = true)),
              common_carotid_L48_A(q_in(start = -3.0178282e-06, fixed = true), volume(start = 5.2247765e-06, fixed = true)),
              common_carotid_L48_B(q_in(start = -9.118605e-07, fixed = true), volume(start = 4.59612e-06, fixed = true)),
              common_carotid_L48_C(q_in(start = 9.799176e-07, fixed = true), volume(start = 4.0847412e-06, fixed = true)),
              common_carotid_L48_D(q_in(start = 2.678458e-06, fixed = true), volume(start = 3.3103743e-06, fixed = true)),
              internal_carotid_L50_A(q_in(start = 1.8520627e-06, fixed = true), volume(start = 1.2431815e-06, fixed = true)),
              internal_carotid_L50_B(q_in(start = 2.0649109e-06, fixed = true), volume(start = 7.881731e-07, fixed = true)),
              internal_carotid_L50_C(volume(start = 7.22633e-05, fixed = true)),
              external_carotid_T2_L62(volume(start = 7.2532275e-05, fixed = true)),
              vertebral_L2(volume(start = 6.668325e-05, fixed = true)),
              vertebral_R272(volume(start = 6.6695255e-05, fixed = true)),
              superior_vena_cava_C2(volume(start = 2.1616434e-06, fixed = true)),
              superior_vena_cava_C88(volume(start = 3.7250738e-06, fixed = true)),
              inferior_vena_cava_C8(volume(start = 3.2420462e-06, fixed = true)),
              hepatic_vein_T1_C10(volume(start = 1.2711224e-06, fixed = true)),
              inferior_vena_cava_C12(volume(start = 8.796935e-06, fixed = true)),
              inferior_vena_cava_C16(volume(start = 6.918212e-06, fixed = true)),
              renal_vein_T1_R18(volume(start = 2.0384666e-06, fixed = true)),
              inferior_vena_cava_C20(volume(start = 4.826637e-07, fixed = true)),
              renal_vein_T1_L22(volume(start = 1.8011691e-06, fixed = true)),
              inferior_vena_cava_C24(volume(start = 1.9253397e-05, fixed = true)),
              common_iliac_vein_L56(volume(start = 4.725373e-06, fixed = true)),
              common_iliac_vein_R26(volume(start = 4.343311e-06, fixed = true)),
              external_iliac_vein_R28(volume(start = 6.334687e-07, fixed = true)),
              internal_iliac_vein_T1_R30(volume(start = 2.7096576e-06, fixed = true)),
              external_iliac_vein_R32(volume(start = 7.3500237e-06, fixed = true)),
              femoral_vein_R34(volume(start = 3.1951808e-07, fixed = true)),
              femoral_vein_R38(volume(start = 2.533166e-06, fixed = true)),
              profunda_femoris_vein_T2_R40(volume(start = 7.0154774e-06, fixed = true)),
              femoral_vein_R42(volume(start = 1.7922623e-05, fixed = true)),
              femoral_vein_R46(volume(start = 9.870693e-07, fixed = true)),
              popliteal_vein_R48(volume(start = 4.0179275e-06, fixed = true)),
              anterior_tibial_vein_T4_R50(volume(start = 1.1430095e-06, fixed = true)),
              popliteal_vein_R52(volume(start = 8.937971e-07, fixed = true)),
              posterior_tibial_vein_T6_R54(volume(start = 1.7275721e-06, fixed = true)),
              external_iliac_vein_L58(volume(start = 6.3426654e-07, fixed = true)),
              internal_iliac_vein_T1_L60(volume(start = 2.7871251e-06, fixed = true)),
              external_iliac_vein_L62(volume(start = 7.216123e-06, fixed = true)),
              femoral_vein_L64(volume(start = 3.7354954e-07, fixed = true)),
              femoral_vein_L68(volume(start = 2.533252e-06, fixed = true)),
              profunda_femoris_vein_T2_L70(volume(start = 7.0156875e-06, fixed = true)),
              femoral_vein_L72(volume(start = 1.7923236e-05, fixed = true)),
              femoral_vein_L76(volume(start = 9.870969e-07, fixed = true)),
              popliteal_vein_L78(volume(start = 4.0180653e-06, fixed = true)),
              anterior_tibial_vein_T4_L80(volume(start = 1.1430578e-06, fixed = true)),
              popliteal_vein_L82(volume(start = 8.938334e-07, fixed = true)),
              posterior_tibial_vein_T6_L84(volume(start = 1.7276424e-06, fixed = true)),
              brachiocephalic_vein_R90(volume(start = 4.3799923e-06, fixed = true)),
              brachiocephalic_vein_L124(volume(start = 8.208929e-06, fixed = true)),
              vertebral_vein_R92(volume(start = 2.75401e-06, fixed = true)),
              brachiocephalic_vein_R94(volume(start = 9.929537e-07, fixed = true)),
              subclavian_vein_R96(volume(start = 4.8281834e-07, fixed = true)),
              internal_jugular_vein_R122(volume(start = 1.9084135e-05, fixed = true)),
              external_jugular_vein_R98(volume(start = 1.3387258e-06, fixed = true)),
              subclavian_vein_R100(volume(start = 1.9747608e-06, fixed = true)),
              axillary_vein_R102(volume(start = 6.9405933e-06, fixed = true)),
              brachial_vein_R104(volume(start = 1.3609908e-06, fixed = true)),
              brachial_vein_R114(volume(start = 1.22317e-06, fixed = true)),
              brachial_vein_R108(volume(start = 1.8800257e-07, fixed = true)),
              ulnar_vein_T7_R110(volume(start = 1.5671646e-06, fixed = true)),
              brachial_vein_R118(volume(start = 1.1817549e-07, fixed = true)),
              radial_vein_T3_R120(volume(start = 9.889869e-07, fixed = true)),
              vertebral_vein_L126(volume(start = 2.5753711e-06, fixed = true)),
              brachiocephalic_vein_L128(volume(start = 5.018355e-07, fixed = true)),
              subclavian_vein_L130(volume(start = 4.2939462e-07, fixed = true)),
              internal_jugular_vein_L156(volume(start = 1.1585479e-05, fixed = true)),
              external_jugular_vein_L132(volume(start = 1.3127751e-06, fixed = true)),
              subclavian_vein_L134(volume(start = 1.924739e-06, fixed = true)),
              axillary_vein_L136(volume(start = 7.0202304e-06, fixed = true)),
              brachial_vein_L138(q_out(start = 2.2906886e-06, fixed = true), volume(start = 1.3534399e-06, fixed = true)),
              brachial_vein_L148(volume(start = 1.2252591e-06, fixed = true)),
              brachial_vein_L142(volume(start = 1.8700365e-07, fixed = true)),
              ulnar_vein_T7_L144(volume(start = 1.563212e-06, fixed = true)),
              brachial_vein_L152(volume(start = 1.1839537e-07, fixed = true)),
              radial_vein_T3_L154(volume(start = 9.96403e-07, fixed = true)),
              mesenteric_artery(q_in(start = 7.315994e-06, fixed = true), volume(start = 6.354152e-06, fixed = true)),
              splanchnic_tissue(volume(start = 0.0002603238, fixed = true)),
              splanchnic_vein(volume(start = 1.0594096e-05, fixed = true)),
              coronary_arteries(q_in(start = 2.7237734e-06, fixed = true), volume(start = 3.6808633e-08, fixed = true)),
              cardiac_tissue(volume(start = 0.0001177309, fixed = true)),
              coronary_veins(volume(start = 2.386533e-08, fixed = true)),
              brachial_L82_HeartLevel(q_in(start = 2.655711e-06, fixed = true), volume(start = 3.5419416e-06, fixed = true))),
            pulmonaryComponent(
              c_pa(volume(start = 4.78778e-05, fixed = true)),
              c_pv(volume(start = 0.000200931 + settings.V_PV_init - (-1297.5e-6), fixed = true))),
          settings(initByPressure=false));

        annotation (experiment(
            StopTime=60,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));

      end partialCVS_ss_noHeart;

      model CardiovascularSystem__
        extends Identification.Results.CVS_optimized_exercise(heartComponent(
              pericardium(
              enabled=true,
              V0=0.0008,
              s=10)), settings(
            heart_atr_TS =     8.200000e-02,
            heart_atr_TR =     4.100000e-01,
            heart_vntr_TR= 4.100000e-01));
      //   OptimizedValsalva( settings(
      //       V_PV_init=5e-05,
      //       heart_R_vlv(displayUnit="(dyn.s)/cm5") = 500000,
      //       heart_drive_Tact=0.2,
      //       heart_vntr_L0=1.9954,
      //       syst_abd_P_th_ratio=0.8,
      //       heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
      //       baro_fsn=0.03625));
        annotation (__Dymola_Commands(file(ensureSimulated=true)=
              "\"EvaluateSimulation.mos\"" "EvaluateUseCases"));
      end CardiovascularSystem__;

      model CardiovascularSystem___
        "Steady state initialization from 2020-11-23 13:49:26.350015 at time 600.0"
        extends ADAN_main.SystemicTree.CardiovascularSystem(
          SystemicComponent(
            baroreflex_system(
              baroreflex(phi(start=0.24962138, fixed=true)),
              baroreceptor_aortic(epsilon(start=1.5598048, fixed=true), s(start=0.795665,
                    fixed=true)),
              baroreceptor_carotid(epsilon(start=1.1826321, fixed=true), s(start=0.8711004,
                    fixed=true))),
            ascending_aorta_A(
              q(start=5.096383e-07, fixed=true),
              vol1(start=8.3702025e-06, fixed=true),
              vol2(start=8.370249e-06, fixed=true)),
            ascending_aorta_B(q_in(start=1.0427162e-06, fixed=true), volume(start=2.5582556e-05,
                  fixed=true)),
            ascending_aorta_C(q_in(start=-6.7039997e-07, fixed=true), volume(start=2.3662586e-05,
                  fixed=true)),
            ascending_aorta_D(q_in(start=4.574512e-07, fixed=true), volume(start=2.1604135e-05,
                  fixed=true)),
            aortic_arch_C2(q_in(start=1.5700347e-06, fixed=true), volume(start=1.9766223e-05,
                  fixed=true)),
            brachiocephalic_trunk_C4(q_in(start=1.3447491e-05, fixed=true), volume(
                  start=1.3398853e-05, fixed=true)),
            aortic_arch_C46(q_in(start=-1.0752923e-05, fixed=true), volume(start=1.17152895e-05,
                  fixed=true)),
            aortic_arch_C64(q_in(start=-1.4183497e-05, fixed=true), volume(start=8.045033e-06,
                  fixed=true)),
            aortic_arch_C94(q_in(start=-1.6687964e-05, fixed=true), volume(start=4.4231372e-05,
                  fixed=true)),
            thoracic_aorta_C96(q_in(start=-1.0259821e-05, fixed=true), volume(start=
                   7.950331e-06, fixed=true)),
            thoracic_aorta_C100(q_in(start=-8.955623e-06, fixed=true), volume(start=
                   6.118662e-06, fixed=true)),
            thoracic_aorta_C104(q_in(start=-7.852833e-06, fixed=true), volume(start=
                   1.1541785e-05, fixed=true)),
            thoracic_aorta_C108(q_in(start=-5.3873705e-06, fixed=true), volume(
                  start=3.7931586e-06, fixed=true)),
            thoracic_aorta_C112(q_in(start=-4.533449e-06, fixed=true), volume(start=
                   6.291038e-05, fixed=true)),
            abdominal_aorta_C114(q_in(start=3.1991196e-05, fixed=true), volume(
                  start=1.3000217e-06, fixed=true)),
            abdominal_aorta_C136(q_in(start=2.1336231e-05, fixed=true), volume(
                  start=5.4587945e-06, fixed=true)),
            abdominal_aorta_C164(q_in(start=1.8389239e-05, fixed=true), volume(
                  start=1.6203643e-06, fixed=true)),
            abdominal_aorta_C176(q_in(start=9.079364e-06, fixed=true), volume(start=
                   4.3573536e-06, fixed=true)),
            abdominal_aorta_C188(q_in(start=1.607014e-06, fixed=true), volume(start=
                   1.7429804e-05, fixed=true)),
            abdominal_aorta_C192(q_in(start=1.385435e-05, fixed=true), volume(start=
                   1.0817526e-05, fixed=true)),
            celiac_trunk_C116(volume(start=0.0003495871, fixed=true)),
            renal_L166(volume(start=0.0003157856, fixed=true)),
            renal_R178(volume(start=0.0003129548, fixed=true)),
            common_iliac_R216(q_in(start=1.0661294e-05, fixed=true), volume(start=8.9285195e-06,
                  fixed=true)),
            internal_iliac_T1_R218(volume(start=0.0001718559, fixed=true)),
            external_iliac_R220(q_in(start=1.1180778e-05, fixed=true), volume(start=
                   4.964422e-06, fixed=true)),
            femoral_R222(q_in(start=1.2625635e-05, fixed=true), volume(start=1.414312e-06,
                  fixed=true)),
            profundus_T2_R224(volume(start=0.00019708108, fixed=true)),
            femoral_R226(q_in(start=7.010349e-06, fixed=true), volume(start=1.1184124e-05,
                  fixed=true)),
            popliteal_R228(q_in(start=2.9054333e-06, fixed=true), volume(start=3.4152145e-06,
                  fixed=true)),
            anterior_tibial_T3_R230(volume(start=2.584224e-05, fixed=true)),
            popliteal_R232(q_in(start=8.702218e-07, fixed=true), volume(start=1.7680615e-07,
                  fixed=true)),
            tibiofibular_trunk_R234(q_in(start=8.2883747e-07, fixed=true), volume(
                  start=7.1877525e-07, fixed=true)),
            posterior_tibial_T4_R236(volume(start=2.8210985e-05, fixed=true)),
            common_iliac_L194(q_in(start=1.0999283e-05, fixed=true), volume(start=8.537277e-06,
                  fixed=true)),
            internal_iliac_T1_L196(volume(start=0.00017185642, fixed=true)),
            external_iliac_L198(q_in(start=1.1203093e-05, fixed=true), volume(start=
                   4.964159e-06, fixed=true)),
            femoral_L200(q_in(start=1.2632557e-05, fixed=true), volume(start=1.4142721e-06,
                  fixed=true)),
            profundus_T2_L202(volume(start=0.00019708106, fixed=true)),
            femoral_L204(q_in(start=7.0133337e-06, fixed=true), volume(start=1.1188111e-05,
                  fixed=true)),
            popliteal_L206(q_in(start=2.9078678e-06, fixed=true), volume(start=3.4166114e-06,
                  fixed=true)),
            anterior_tibial_T3_L208(volume(start=2.5842208e-05, fixed=true)),
            popliteal_L210(q_in(start=8.718211e-07, fixed=true), volume(start=1.7684559e-07,
                  fixed=true)),
            tibiofibular_trunk_L212(q_in(start=8.3045535e-07, fixed=true), volume(
                  start=7.18958e-07, fixed=true)),
            posterior_tibial_T4_L214(volume(start=2.8210949e-05, fixed=true)),
            subclavian_R28(q_in(start=4.271897e-06, fixed=true), volume(start=2.0520185e-06,
                  fixed=true)),
            subclavian_R30(q_in(start=2.0205034e-06, fixed=true), volume(start=2.68887e-06,
                  fixed=true)),
            axillary_R32(q_in(start=1.8288374e-06, fixed=true), volume(start=3.0770302e-06,
                  fixed=true)),
            brachial_R34(q_in(start=1.8092687e-06, fixed=true), volume(start=4.5185766e-06,
                  fixed=true)),
            ulnar_T2_R36(q_in(start=1.7689975e-06, fixed=true), volume(start=2.3929368e-07,
                  fixed=true)),
            ulnar_T2_R42(volume(start=5.9250335e-05, fixed=true)),
            radial_T1_R44(volume(start=4.8539438e-05, fixed=true)),
            subclavian_L66(q_in(start=3.1296383e-06, fixed=true), volume(start=4.888362e-06,
                  fixed=true)),
            subclavian_L78(q_in(start=1.3889597e-06, fixed=true), volume(start=1.9995466e-06,
                  fixed=true)),
            axillary_L80(q_in(start=1.5670606e-06, fixed=true), volume(start=3.0887784e-06,
                  fixed=true)),
            brachial_L82(q_in(start=2.905e-06, fixed=true), volume(start=1.5039618e-06,
                  fixed=true)),
            ulnar_T2_L84(q_in(start=1.7754468e-06, fixed=true), volume(start=2.392604e-07,
                  fixed=true)),
            ulnar_T2_L90(volume(start=5.9239585e-05, fixed=true)),
            radial_T1_L92(volume(start=5.1443665e-05, fixed=true)),
            common_carotid_R6_A(q_in(start=8.283258e-06, fixed=true), volume(start=5.0611097e-06,
                  fixed=true)),
            common_carotid_R6_B(q_in(start=7.2725124e-06, fixed=true), volume(start=
                   4.31281e-06, fixed=true)),
            common_carotid_R6_C(q_in(start=6.0208326e-06, fixed=true), volume(start=
                   3.218645e-06, fixed=true)),
            internal_carotid_R8_A(q_in(start=2.6182513e-06, fixed=true), volume(
                  start=1.2636762e-06, fixed=true)),
            internal_carotid_R8_B(q_in(start=2.4083083e-06, fixed=true), volume(
                  start=7.9966156e-07, fixed=true)),
            internal_carotid_R8_C(volume(start=7.032963e-05, fixed=true)),
            external_carotid_T2_R26(volume(start=7.056206e-05, fixed=true)),
            common_carotid_L48_A(q_in(start=4.2274914e-06, fixed=true), volume(
                  start=5.4877987e-06, fixed=true)),
            common_carotid_L48_B(q_in(start=4.481708e-06, fixed=true), volume(start=
                   4.809124e-06, fixed=true)),
            common_carotid_L48_C(q_in(start=4.57543e-06, fixed=true), volume(start=4.261125e-06,
                  fixed=true)),
            common_carotid_L48_D(q_in(start=4.57786e-06, fixed=true), volume(start=3.4449263e-06,
                  fixed=true)),
            internal_carotid_L50_A(q_in(start=2.2705024e-06, fixed=true), volume(
                  start=1.2634985e-06, fixed=true)),
            internal_carotid_L50_B(q_in(start=2.2633103e-06, fixed=true), volume(
                  start=7.997225e-07, fixed=true)),
            internal_carotid_L50_C(volume(start=7.034495e-05, fixed=true)),
            external_carotid_T2_L62(volume(start=7.0572016e-05, fixed=true)),
            vertebral_L2(volume(start=6.489078e-05, fixed=true)),
            vertebral_R272(volume(start=6.488539e-05, fixed=true)),
            superior_vena_cava_C2(volume(start=1.5285261e-06, fixed=true)),
            superior_vena_cava_C88(volume(start=2.6340488e-06, fixed=true)),
            inferior_vena_cava_C8(volume(start=2.2924942e-06, fixed=true)),
            hepatic_vein_T1_C10(volume(start=8.988274e-07, fixed=true)),
            inferior_vena_cava_C12(volume(start=6.2204394e-06, fixed=true)),
            inferior_vena_cava_C16(volume(start=4.891974e-06, fixed=true)),
            renal_vein_T1_R18(volume(start=1.4414306e-06, fixed=true)),
            inferior_vena_cava_C20(volume(start=3.4129897e-07, fixed=true)),
            renal_vein_T1_L22(volume(start=1.2736336e-06, fixed=true)),
            inferior_vena_cava_C24(volume(start=1.3614427e-05, fixed=true)),
            common_iliac_vein_L56(volume(start=3.3414105e-06, fixed=true)),
            common_iliac_vein_R26(volume(start=3.0712456e-06, fixed=true)),
            external_iliac_vein_R28(volume(start=4.479391e-07, fixed=true)),
            internal_iliac_vein_T1_R30(volume(start=1.9160545e-06, fixed=true)),
            external_iliac_vein_R32(volume(start=5.197387e-06, fixed=true)),
            femoral_vein_R34(volume(start=2.2593937e-07, fixed=true)),
            femoral_vein_R38(volume(start=1.791271e-06, fixed=true)),
            profunda_femoris_vein_T2_R40(volume(start=4.960825e-06, fixed=true)),
            femoral_vein_R42(volume(start=1.2673798e-05, fixed=true)),
            femoral_vein_R46(volume(start=6.979961e-07, fixed=true)),
            popliteal_vein_R48(volume(start=2.841262e-06, fixed=true)),
            anterior_tibial_vein_T4_R50(volume(start=8.0918807e-07, fixed=true)),
            popliteal_vein_R52(volume(start=6.320447e-07, fixed=true)),
            posterior_tibial_vein_T6_R54(volume(start=1.2212781e-06, fixed=true)),
            external_iliac_vein_L58(volume(start=4.4850339e-07, fixed=true)),
            internal_iliac_vein_T1_L60(volume(start=1.970834e-06, fixed=true)),
            external_iliac_vein_L62(volume(start=5.102703e-06, fixed=true)),
            femoral_vein_L64(volume(start=2.6414645e-07, fixed=true)),
            femoral_vein_L68(volume(start=1.7913321e-06, fixed=true)),
            profunda_femoris_vein_T2_L70(volume(start=4.9609725e-06, fixed=true)),
            femoral_vein_L72(volume(start=1.2674232e-05, fixed=true)),
            femoral_vein_L76(volume(start=6.980156e-07, fixed=true)),
            popliteal_vein_L78(volume(start=2.8413592e-06, fixed=true)),
            anterior_tibial_vein_T4_L80(volume(start=8.092147e-07, fixed=true)),
            popliteal_vein_L82(volume(start=6.320702e-07, fixed=true)),
            posterior_tibial_vein_T6_L84(volume(start=1.2213247e-06, fixed=true)),
            brachiocephalic_vein_R90(volume(start=3.097152e-06, fixed=true)),
            brachiocephalic_vein_L124(volume(start=5.804642e-06, fixed=true)),
            vertebral_vein_R92(volume(start=1.9473712e-06, fixed=true)),
            brachiocephalic_vein_R94(volume(start=7.0213116e-07, fixed=true)),
            subclavian_vein_R96(volume(start=3.4140749e-07, fixed=true)),
            internal_jugular_vein_R122(volume(start=1.3494696e-05, fixed=true)),
            external_jugular_vein_R98(volume(start=9.4658355e-07, fixed=true)),
            subclavian_vein_R100(volume(start=1.396381e-06, fixed=true)),
            axillary_vein_R102(volume(start=4.9077917e-06, fixed=true)),
            brachial_vein_R104(volume(start=9.621125e-07, fixed=true)),
            brachial_vein_R114(volume(start=8.6467435e-07, fixed=true)),
            brachial_vein_R108(volume(start=1.3289709e-07, fixed=true)),
            ulnar_vein_T7_R110(volume(start=1.1070294e-06, fixed=true)),
            brachial_vein_R118(volume(start=8.35369e-08, fixed=true)),
            radial_vein_T3_R120(volume(start=6.978863e-07, fixed=true)),
            vertebral_vein_L126(volume(start=1.8210663e-06, fixed=true)),
            brachiocephalic_vein_L128(volume(start=3.5485448e-07, fixed=true)),
            subclavian_vein_L130(volume(start=3.0363046e-07, fixed=true)),
            internal_jugular_vein_L156(volume(start=8.192278e-06, fixed=true)),
            external_jugular_vein_L132(volume(start=9.282445e-07, fixed=true)),
            subclavian_vein_L134(volume(start=1.3610052e-06, fixed=true)),
            axillary_vein_L136(volume(start=4.964048e-06, fixed=true)),
            brachial_vein_L138(q_out(start=2.2182896e-06, fixed=true), volume(start=
                   9.39306e-07, fixed=true)),
            brachial_vein_L148(volume(start=8.6616654e-07, fixed=true)),
            brachial_vein_L142(volume(start=1.2977138e-07, fixed=true)),
            ulnar_vein_T7_L144(volume(start=1.0835757e-06, fixed=true)),
            brachial_vein_L152(volume(start=8.369392e-08, fixed=true)),
            radial_vein_T3_L154(volume(start=7.031121e-07, fixed=true)),
            mesenteric_artery(q_in(start=6.2375116e-06, fixed=true), volume(start=6.4770484e-06,
                  fixed=true)),
            splanchnic_tissue(volume(start=0.00025355857, fixed=true)),
            splanchnic_vein(volume(start=7.4912427e-06, fixed=true)),
            coronary_arteries(q_in(start=2.8705824e-06, fixed=true), volume(start=3.689468e-08,
                  fixed=true)),
            cardiac_tissue(volume(start=0.00011395401, fixed=true)),
            coronary_veins(volume(start=1.6779332e-08, fixed=true)),
            brachial_L82_HeartLevel(q_in(start=2.1089854e-06, fixed=true), volume(
                  start=3.0267345e-06, fixed=true))),
          heartComponent(
            tricuspidValve(open(start=true, fixed=true)),
            pulmonaryValve(open(start=false, fixed=true)),
            mitralValve(open(start=true, fixed=true)),
            aorticValve(open(start=false, fixed=true)),
            ventricles(
              LV_wall(ym(start=3.3109133, fixed=true), SL(start=1.8709707, fixed=true)),
              SEP_wall(SL(start=1.8909374, fixed=true)),
              RV_wall(SL(start=1.8759251, fixed=true)),
              V_LV(start=0.00010694267, fixed=true),
              V_RV(start=0.00011006005, fixed=true)),
            ra(volume(start=9.615412e-06, fixed=true)),
            la(volume(start=4.2960393e-05, fixed=true)),
            sa_node(cardiac_cycle(start=0.81212664, fixed=true))),
          pulmonaryComponent(c_pa(volume(start=5.8381265e-05, fixed=true)), c_pv(
                volume(start=0.0003305495, fixed=true))));

      end CardiovascularSystem___;

      model CardiovascularSystem_RenalsPInt
        "Using interstitial pressure from simple lymfatics"
        extends CardiovascularSystem(
        SystemicComponent(
         redeclare ADAN_main.Components.Subsystems.Systemic.Organs.Renal.Renal_P_Int_i renal_L166(
         P_int = simplestLymphatic.p_int,
         volume(start = 0.00001, fixed = true))));

         //    redeclare ADAN_main.Components.Subsystems.Systemic.Organs.Renal.Renal renal_R178(volume(start = 0.00001, fixed = true))

         Real eGFR = SystemicComponent.renal_L166.GFR_surf*2;
         Real eGFR_m "Mean total GFR scaled to BSA";
         parameter Real tau_gfr = 3;

      equation
        der(eGFR_m)*tau_gfr = eGFR - eGFR_m;
      end CardiovascularSystem_RenalsPInt;

      model OlufsenTriSeg_optimized "Generated by PostProcess/postprocess_optim.py optimized at Mar 20 17:13:45 CET 2021
 with cost 0.039284 lowest at run 720"
        extends ADAN_main.SystemicTree.Auxiliary.partialCVS_optimized(settings(
            V_PV_init=6.1875e-05,
            heart_R_LA=4139729,
            heart_vntr_D_0=12.91385,
            heart_vntr_D_A=1571.971,
            heart_atr_D_0=15407920,
            heart_atr_D_A=113536000,
            syst_TPR=124846900,
            syst_TR_frac=5.012728e+00,
            baro_tau_s=10,
            baro_fsn=0.0372,
            pulm_C_PA=4.799251e-08,
            pulm_R=5841980,
            veins_UseNonLinearVeins=true,
            veins_linearE_rel=765,
            veins_linearV0_rel=0.793,
            veins_delayed_activation=true,
            veins_activation_tau=1), useAutonomousPhi(y=true));
      end OlufsenTriSeg_optimized;

      model partialCVS_EDPVR_squished
        extends ADAN_main.SystemicTree.Auxiliary.partialCVS_EDPVR(
          settings(
            veins_delayed_activation=false,
            baro_tau_s(displayUnit="s") = 93,
            heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 4.600005e+03,
            heart_vntr_D_0_maxAct=1.225000e-03,
            heart_vntr_TS_maxAct(displayUnit="s") = 1.047740e-01,
            heart_vntr_TR_maxAct(displayUnit="s") = 7.597690e-02,
            eta_vc=2.101054e-01,
            tissues_eta_Ra=3.145225e+00,
            tissues_eta_Rv=2.806250e+00,
            tissues_eta_C=5.708013e-01,
            tissues_chi_Ra(displayUnit="1") = 2.481250e+01,
            tissues_chi_Rv=1.384375e+01,
            tissues_chi_C=-3.125000e-02,
            V_PV_init=0,
            heart_R_LA(displayUnit="(mmHg.s)/ml") = 1.655068e+06,
            heart_R_vlv(displayUnit="(mmHg.s)/ml") = 7.723515e+05,
            heart_vntr_D_0=7.479470e+00,
            heart_vntr_D_A=1.298533e+03,
            heart_vntr_TS=3.246875e-01,
            heart_vntr_TR(displayUnit="s") = 4.031250e-01,
            heart_atr_D_0=2.651364e+07,
            heart_atr_D_A=7.621357e+07,
            syst_TPR=1.287333e+08,
            syst_TR_frac(displayUnit="1") = 5.227710e+00,
            pulm_C_PA=1.635189e-08,
            pulm_R(displayUnit="(Pa.s)/m3") = 1.019753e+07,
            heart_vntr_k_passive=5.000000e+00,
            heart_vntr_SLcollagen=2.087500e+00,
            heart_vntr_PConcollagen=2.642812e+01,
            heart_vntr_PExpcollagen=2.481250e+00,
            heart_atr_TS=0.08,
            baro_f1=3.5e-03,
            dummy=2,
            baro_fsn(displayUnit="1/min") = 0.0355333333,
            syst_art_k_E=0.4402957,
            HR_max=3.1666666666667,
            chi_phi=0.7,
            heart_R_RA(displayUnit="(dyn.s)/cm5") = settings.heart_R_LA,
            pulm_q_nom_maxq(displayUnit="l/min") = 0.00033333333333333,
            initByPressure=false,
            veins_UseNonLinearVeins=true,
            veins_linearE_rel=765,
            veins_linearV0_rel=0.793,
            veins_activation_tau=1,
            heart_vntr_Tact_maxAct=8.000000e-02,
            heart_vntr_Lsref=1.9,
            heart_atr_TR=2.631250e-01,
            heart_vntr_Tact=8.000000e-02,
            syst_tissues_hydrostaticLevel_correction=1,
            tissues_SV_nom=0.000695,
            pulm_C_PV=3.194206e-07,
            syst_abd_P_th_ratio=0.8,
            heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
            heart_vntr_L0=1.6,
            pulm_P_PV_nom=1333.22387415,
            height=1.7132,
            tissues_CO_nom=0.000105,
            EvaluateFunctionalParams=true,
            HR_nominal=1.0666666666667,
            UseNonLinear_TissuesCompliance=true,
            baro_g=0.606258,
            baro_useAbsolutePressureTerm=false,
            baro_xi_delta0=2.688000e-01,
            pulm_R_exp=9.150000e-01,
            syst_art_UseVasoconstrictionEffect=true,
            tissues_UseStraighteningReaction2Phi=true,
            tissues_ZPV_nom=0.00210124,
            tissues_gamma=0.5,
            tissues_tau_R(displayUnit="s") = 0,
            veins_C_phi=0.09),
          heartComponent(
            aorticValve(
              _Ron(displayUnit="(Pa.s)/m3") = 7.971886e+05,
              open(start=false, fixed=true),
              BP_max(start=15047.65, fixed=true),
              BP_min(start=11532.416, fixed=true),
              CO_acc(start=9.141051e-05, fixed=true),
              calculateAdditionalMetrics=true),
            tricuspidValve(open(start=true, fixed=true)),
            pulmonaryValve(
              open(start=false, fixed=true),
              BP_max(start=0.0, fixed=true),
              BP_min(start=26600.0, fixed=true),
              CO_acc(start=0.0, fixed=true)),
            mitralValve(
              open(start=true, fixed=true),
              BP_max(start=1113.3982, fixed=true),
              BP_min(start=942.15027, fixed=true),
              CO_acc(start=5.9481652e-05, fixed=true)),
            ventricles(
              LV_wall(ym(start=3.3008697, fixed=true), SL(start=1.938651, fixed=
                     true)),
              SEP_wall(SL(start=1.9807618, fixed=true)),
              RV_wall(SL(start=1.8905245, fixed=true)),
              V_LV(start=9.674789e-05, fixed=true),
              V_RV(start=8.8568e-05, fixed=true),
              currentWork_LV(start=1.3147972, fixed=true),
              currentWork_RV(start=0.23436068, fixed=true)),
            ra(volume(start=8.8254565e-06, fixed=true), currentWork(start=
                    8.026772, fixed=true)),
            la(volume(start=1.979809e-05, fixed=true), currentWork(start=
                    0.35237855, fixed=true)),
            sa_node(cardiac_cycle(start=0.884947, fixed=true)),
            valveInertia_Mitral(enabled=false, l=0.005),
            idealValve_deactivable(open(start=true, fixed=true)),
            idealValve_deactivable1(open(start=true, fixed=true)),
            valveInertia_aortic(enabled=true, l=0.02),
            valveInertia_pulmonary(enabled=false),
            resistor(enable=false),
            resistor1(enable=false)),
          useAutonomousPhi(y=true),
          SystemicComponent(
            baroreflex_system(
              baroreflex(
                phi_mean(start=0.24970344, fixed=true),
                phi(start=0.24585241, fixed=true),
                f1_adj(start=0.0030635502, fixed=true)),
              baroreceptor_aortic(
                fbr_int(start=17.603256, fixed=true),
                epsilon(start=1.5282549, fixed=true),
                s(start=0.8055929, fixed=true)),
              baroreceptor_carotid(
                fbr_int(start=9.66313, fixed=true),
                epsilon(start=1.1712315, fixed=true),
                s(start=0.8933484, fixed=true))),
            ascending_aorta_A(
              q(start=3.8719095e-06, fixed=true),
              vol1(start=8.070678e-06, fixed=true),
              vol2(start=8.07108e-06, fixed=true)),
            ascending_aorta_B(q_in(start=7.752585e-06, fixed=true), volume(
                  start=2.508757e-05, fixed=true)),
            ascending_aorta_C(q_in(start=1.1892152e-05, fixed=true), volume(
                  start=2.320838e-05, fixed=true)),
            ascending_aorta_D(q_in(start=1.846028e-05, fixed=true), volume(
                  start=2.119409e-05, fixed=true)),
            aortic_arch_C2(q_in(start=2.4359766e-05, fixed=true), volume(start=
                    1.9396348e-05, fixed=true)),
            brachiocephalic_trunk_C4(q_in(start=1.0679327e-06, fixed=true),
                volume(start=1.3168819e-05, fixed=true)),
            aortic_arch_C46(q_in(start=2.857476e-05, fixed=true), volume(start=
                    1.1498663e-05, fixed=true)),
            aortic_arch_C64(q_in(start=3.2763313e-05, fixed=true), volume(start=
                   7.897691e-06, fixed=true)),
            aortic_arch_C94(q_in(start=3.069236e-05, fixed=true), volume(start=
                    4.346698e-05, fixed=true)),
            thoracic_aorta_C96(q_in(start=4.0688137e-05, fixed=true), volume(
                  start=7.816586e-06, fixed=true)),
            thoracic_aorta_C100(q_in(start=4.239365e-05, fixed=true), volume(
                  start=6.017454e-06, fixed=true)),
            thoracic_aorta_C104(q_in(start=4.3655968e-05, fixed=true), volume(
                  start=1.13574315e-05, fixed=true)),
            thoracic_aorta_C108(q_in(start=4.5842833e-05, fixed=true), volume(
                  start=3.7333957e-06, fixed=true)),
            thoracic_aorta_C112(q_in(start=4.653811e-05, fixed=true), volume(
                  start=6.229157e-05, fixed=true)),
            abdominal_aorta_C114(q_in(start=4.659059e-05, fixed=true), volume(
                  start=1.2874332e-06, fixed=true)),
            abdominal_aorta_C136(q_in(start=3.4045326e-05, fixed=true), volume(
                  start=5.4068755e-06, fixed=true)),
            abdominal_aorta_C164(q_in(start=2.4611865e-05, fixed=true), volume(
                  start=1.6050404e-06, fixed=true)),
            abdominal_aorta_C176(q_in(start=1.3252353e-05, fixed=true), volume(
                  start=4.3167847e-06, fixed=true)),
            abdominal_aorta_C188(q_in(start=1.9290894e-06, fixed=true), volume(
                  start=1.7281012e-05, fixed=true)),
            abdominal_aorta_C192(q_in(start=1.2510534e-06, fixed=true), volume(
                  start=1.07259175e-05, fixed=true)),
            celiac_trunk_C116(volume(start=0.00034059316, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            renal_L166(volume(start=0.00030766928, fixed=true), phi_delayed(
                  start=0.25378594, fixed=true)),
            renal_R178(volume(start=0.00030490823, fixed=true), phi_delayed(
                  start=0.25378594, fixed=true)),
            common_iliac_R216(q_in(start=3.993164e-07, fixed=true), volume(
                  start=8.855931e-06, fixed=true)),
            internal_iliac_T1_R218(volume(start=0.0001674349, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            external_iliac_R220(q_in(start=-5.6010044e-06, fixed=true), volume(
                  start=4.9496953e-06, fixed=true)),
            femoral_R222(q_in(start=-4.9161563e-06, fixed=true), volume(start=
                    1.411402e-06, fixed=true)),
            profundus_T2_R224(volume(start=0.00019209895, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            femoral_R226(q_in(start=-1.1232905e-05, fixed=true), volume(start=
                    1.13322685e-05, fixed=true)),
            popliteal_R228(q_in(start=-2.0564273e-06, fixed=true), volume(start=
                   3.474142e-06, fixed=true)),
            anterior_tibial_T3_R230(volume(start=2.5363706e-05, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            popliteal_R232(q_in(start=3.2306946e-07, fixed=true), volume(start=
                    1.7848711e-07, fixed=true)),
            tibiofibular_trunk_R234(q_in(start=4.0966268e-07, fixed=true),
                volume(start=7.257386e-07, fixed=true)),
            posterior_tibial_T4_R236(volume(start=2.7553777e-05, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            common_iliac_L194(q_in(start=4.9551284e-07, fixed=true), volume(
                  start=8.468505e-06, fixed=true)),
            internal_iliac_T1_L196(volume(start=0.00016743637, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            external_iliac_L198(q_in(start=-5.5039895e-06, fixed=true), volume(
                  start=4.94945e-06, fixed=true)),
            femoral_L200(q_in(start=-4.8239845e-06, fixed=true), volume(start=
                    1.4113288e-06, fixed=true)),
            profundus_T2_L202(volume(start=0.00019209972, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            femoral_L204(q_in(start=-1.1141473e-05, fixed=true), volume(start=
                    1.13314045e-05, fixed=true)),
            popliteal_L206(q_in(start=-2.0313817e-06, fixed=true), volume(start=
                   3.4738355e-06, fixed=true)),
            anterior_tibial_T3_L208(volume(start=2.5363699e-05, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            popliteal_L210(q_in(start=3.2615267e-07, fixed=true), volume(start=
                    1.7847813e-07, fixed=true)),
            tibiofibular_trunk_L212(q_in(start=4.1212033e-07, fixed=true),
                volume(start=7.2572374e-07, fixed=true)),
            posterior_tibial_T4_L214(volume(start=2.7553791e-05, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            subclavian_R28(q_in(start=4.2812662e-06, fixed=true), volume(start=
                    2.0194673e-06, fixed=true)),
            subclavian_R30(q_in(start=2.5490683e-06, fixed=true), volume(start=
                    2.6515029e-06, fixed=true)),
            axillary_R32(q_in(start=3.1488526e-06, fixed=true), volume(start=
                    3.0477704e-06, fixed=true)),
            brachial_R34(q_in(start=3.586867e-06, fixed=true), volume(start=
                    4.4681537e-06, fixed=true)),
            ulnar_T2_R36(q_in(start=1.9579106e-06, fixed=true), volume(start=
                    2.3776016e-07, fixed=true)),
            ulnar_T2_R42(volume(start=5.795162e-05, fixed=true), phi_delayed(
                  start=0.25378594, fixed=true)),
            radial_T1_R44(volume(start=4.7595116e-05, fixed=true), phi_delayed(
                  start=0.25378594, fixed=true)),
            subclavian_L66(q_in(start=4.1387966e-06, fixed=true), volume(start=
                    4.8143684e-06, fixed=true)),
            subclavian_L78(q_in(start=2.9756661e-06, fixed=true), volume(start=
                    1.972952e-06, fixed=true)),
            axillary_L80(q_in(start=3.3676852e-06, fixed=true), volume(start=
                    3.0556064e-06, fixed=true)),
            brachial_L82(q_in(start=3.699919e-06, fixed=true), volume(start=
                    1.4879852e-06, fixed=true)),
            ulnar_T2_L84(q_in(start=1.966288e-06, fixed=true), volume(start=
                    2.3780191e-07, fixed=true)),
            ulnar_T2_L90(volume(start=5.7928195e-05, fixed=true), phi_delayed(
                  start=0.25378594, fixed=true)),
            radial_T1_L92(volume(start=5.0452905e-05, fixed=true), phi_delayed(
                  start=0.25378594, fixed=true)),
            common_carotid_R6_A(q_in(start=2.987729e-07, fixed=true), volume(
                  start=4.955184e-06, fixed=true)),
            common_carotid_R6_B(q_in(start=1.9940771e-06, fixed=true), volume(
                  start=4.2253982e-06, fixed=true)),
            common_carotid_R6_C(q_in(start=3.4522282e-06, fixed=true), volume(
                  start=3.1563536e-06, fixed=true)),
            internal_carotid_R8_A(q_in(start=2.1149858e-06, fixed=true), volume(
                  start=1.25376e-06, fixed=true)),
            internal_carotid_R8_B(q_in(start=2.2972552e-06, fixed=true), volume(
                  start=7.9418646e-07, fixed=true)),
            internal_carotid_R8_C(volume(start=6.8532376e-05, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            external_carotid_T2_R26(volume(start=6.8797475e-05, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            common_carotid_L48_A(q_in(start=-1.1233657e-06, fixed=true), volume(
                  start=5.370309e-06, fixed=true)),
            common_carotid_L48_B(q_in(start=5.902771e-07, fixed=true), volume(
                  start=4.707705e-06, fixed=true)),
            common_carotid_L48_C(q_in(start=2.107219e-06, fixed=true), volume(
                  start=4.172906e-06, fixed=true)),
            common_carotid_L48_D(q_in(start=3.4548837e-06, fixed=true), volume(
                  start=3.3755337e-06, fixed=true)),
            internal_carotid_L50_A(q_in(start=2.1257392e-06, fixed=true),
                volume(start=1.2528502e-06, fixed=true)),
            internal_carotid_L50_B(q_in(start=2.2963727e-06, fixed=true),
                volume(start=7.936284e-07, fixed=true)),
            internal_carotid_L50_C(volume(start=6.8537345e-05, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            external_carotid_T2_L62(volume(start=6.87966e-05, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            vertebral_L2(volume(start=6.324332e-05, fixed=true), phi_delayed(
                  start=0.25378594, fixed=true)),
            vertebral_R272(volume(start=6.324797e-05, fixed=true), phi_delayed(
                  start=0.25378594, fixed=true)),
            superior_vena_cava_C2(volume(start=4.220106e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            superior_vena_cava_C88(volume(start=7.276236e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            inferior_vena_cava_C8(volume(start=6.3323146e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            hepatic_vein_T1_C10(volume(start=2.4832575e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            inferior_vena_cava_C12(volume(start=1.721682e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            inferior_vena_cava_C16(volume(start=1.356269e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            renal_vein_T1_R18(volume(start=3.9994206e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            inferior_vena_cava_C20(volume(start=9.463241e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            renal_vein_T1_L22(volume(start=3.535526e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            inferior_vena_cava_C24(volume(start=3.7881873e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            common_iliac_vein_L56(
              volume(start=9.335072e-06, fixed=true),
              open(start=true, fixed=true),
              compliant_vessel(A(start=0.06723232, fixed=false))),
            common_iliac_vein_R26(
              volume(start=8.577576e-06, fixed=true),
              open(start=true, fixed=true),
              compliant_vessel(A(start=0.06723232, fixed=false))),
            external_iliac_vein_R28(volume(start=1.2516608e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            internal_iliac_vein_T1_R30(volume(start=5.3659746e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            external_iliac_vein_R32(volume(start=1.4586541e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            femoral_vein_R34(volume(start=6.3428143e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            femoral_vein_R38(volume(start=5.0398216e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            profunda_femoris_vein_T2_R40(volume(start=1.4287033e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            femoral_vein_R42(volume(start=3.5915946e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            femoral_vein_R46(volume(start=1.978256e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            popliteal_vein_R48(volume(start=8.087784e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            anterior_tibial_vein_T4_R50(volume(start=2.8893216e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            popliteal_vein_R52(volume(start=1.799751e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            posterior_tibial_vein_T6_R54(volume(start=3.7113025e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            external_iliac_vein_L58(volume(start=1.2536291e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            internal_iliac_vein_T1_L60(volume(start=5.521543e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            external_iliac_vein_L62(volume(start=1.4323126e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            femoral_vein_L64(volume(start=7.4169236e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            femoral_vein_L68(volume(start=5.040843e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            profunda_femoris_vein_T2_L70(volume(start=1.4287143e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            femoral_vein_L72(volume(start=3.5916506e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            femoral_vein_L76(volume(start=1.9782692e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            popliteal_vein_L78(volume(start=8.087087e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            anterior_tibial_vein_T4_L80(volume(start=2.889313e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            popliteal_vein_L82(volume(start=1.7995998e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            posterior_tibial_vein_T6_L84(volume(start=3.7111809e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachiocephalic_vein_R90(
              volume(start=8.56433e-06, fixed=true),
              open(start=true, fixed=true),
              compliant_vessel(A(start=0.06723232, fixed=false))),
            brachiocephalic_vein_L124(
              volume(start=1.6076916e-05, fixed=true),
              open(start=true, fixed=true),
              compliant_vessel(A(start=0.06723232, fixed=false))),
            vertebral_vein_R92(volume(start=5.580061e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachiocephalic_vein_R94(volume(start=1.941929e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            subclavian_vein_R96(volume(start=9.445688e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            internal_jugular_vein_R122(volume(start=3.7437676e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            external_jugular_vein_R98(volume(start=2.7481374e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            subclavian_vein_R100(volume(start=3.8673534e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            axillary_vein_R102(volume(start=1.3634191e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_vein_R104(volume(start=2.9135247e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_vein_R114(volume(start=2.6622365e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_vein_R108(volume(start=4.070048e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            ulnar_vein_T7_R110(volume(start=3.7959562e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_vein_R118(volume(start=2.5970394e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            radial_vein_T3_R120(volume(start=2.5086317e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            vertebral_vein_L126(volume(start=5.2267933e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachiocephalic_vein_L128(volume(start=9.829428e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            subclavian_vein_L130(volume(start=8.413075e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            internal_jugular_vein_L156(volume(start=2.2799617e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            external_jugular_vein_L132(volume(start=2.7001201e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            subclavian_vein_L134(volume(start=3.7749803e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            axillary_vein_L136(volume(start=1.3812472e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_vein_L138(volume(start=2.922691e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_vein_L148(volume(start=2.6908028e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_vein_L142(volume(start=4.0825245e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            ulnar_vein_T7_L144(volume(start=3.8003539e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_vein_L152(volume(start=2.626265e-07, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            radial_vein_T3_L154(volume(start=2.53239e-06, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            mesenteric_artery(q_in(start=9.368483e-06, fixed=true), volume(
                  start=6.631462e-06, fixed=true)),
            splanchnic_tissue(volume(start=0.00024702842, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            splanchnic_vein(volume(start=2.0766065e-05, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            coronary_arteries(q_in(start=3.040544e-06, fixed=true), volume(
                  start=3.726891e-08, fixed=true)),
            cardiac_tissue(volume(start=0.000112328176, fixed=true),
                phi_delayed(start=0.25378594, fixed=true)),
            coronary_veins(volume(start=5.926006e-08, fixed=true),
                compliant_vessel(A(start=0.06723232, fixed=false))),
            brachial_L82_HeartLevel(q_in(start=3.722948e-06, fixed=true),
                volume(start=2.9958835e-06, fixed=true))),
          pulmonaryComponent(
            c_pa(volume(start=2.055306e-05, fixed=true)),
            c_pv(volume(start=0.000367088 + settings.V_PV_init, fixed=true)),
            R_pa_visc(enable=false),
            R_pv_visc(enable=false)));

        import ADAN_main;
        output Physiolibrary.Types.Pressure brachial_pressure=SystemicComponent.brachial_L82_HeartLevel.p_out_hs;
        output Physiolibrary.Types.Pressure brachial_pressure_mean(start=0);
        output Physiolibrary.Types.Pressure brachial_pressure_systolic(start=0);
        Physiolibrary.Types.Pressure brachial_pressure_systolic_i(start=0);
        output Physiolibrary.Types.Pressure brachial_pressure_diastolic(start=0);
        Physiolibrary.Types.Pressure brachial_pressure_diastolic_i(start=0);
        Real brachial_pressure_int "integration of pressure to find the true mean";
        output Physiolibrary.Types.Pressure ascending_aorta=SystemicComponent.ascending_aorta_A.p1
          "PRessure in ascending aorta";
        output Physiolibrary.Types.Pressure renal_capillary=SystemicComponent.renal_L166.p_C;
        output Physiolibrary.Types.Pressure exercised_capillary=SystemicComponent.posterior_tibial_T4_L214.p_C;
        output Physiolibrary.Types.VolumeFlowRate CO(displayUnit="l/min");
        output Physiolibrary.Types.Pressure carotid_pressure=SystemicComponent.common_carotid_L48_D.p_out_hs;
        output Physiolibrary.Types.Pressure femoral_pressure=SystemicComponent.femoral_L200.p_out_hs;
        output Physiolibrary.Types.Pressure P_LV=heartComponent.ventricles.P_LV
          "Pressure in left ventricle";
        output Physiolibrary.Types.Volume V_LV=heartComponent.ventricles.V_LV;
        output Physiolibrary.Types.Volume EDV;
        output Physiolibrary.Types.Volume ESV;
        output Physiolibrary.Types.Fraction phi_baro=switch1.u1;
        output Physiolibrary.Types.Volume SV "Stroke volume";
        Physiolibrary.Types.Volume SV_i(displayUnit="ml");
        output Physiolibrary.Types.Frequency HR=heartComponent.sa_node.HR_true;
        output Real cardiac_cycle=heartComponent.sa_node.cardiac_cycle
          "Cardiac cycle phase";
        Real CI=CO*1000*60/settings.BSA "Cardiac index l/min/m2";
        Physiolibrary.Types.Power CardiacPowerBrachial=brachial_pressure_mean*CO;
        output Modelica.Units.SI.Time TEjection=heartComponent.aorticValve.Ts;
        output Modelica.Units.SI.Time TFilling=heartComponent.mitralValve.Ts;
        output Physiolibrary.Types.Pressure thoracic_pressure=SystemicComponent.P_th;
        output Physiolibrary.Types.Pressure P_pa=pulmonaryComponent.r_pa.q_in.pressure
          "Pressure in pulmonary arteries";
        output Physiolibrary.Types.Pressure P_pv=pulmonaryComponent.r_pa.q_out.pressure
          "Pressure in pulmonary veins";
        output Physiolibrary.Types.Pressure P_sv=SystemicComponent.port_b.pressure
          "Pressure in systemic vena cava";
        Physiolibrary.Types.Volume totalVolume=SystemicComponent.total_volume +
            heartComponent.volume + pulmonaryComponent.volume
          "For debug purposes, should be constant (up to numerical precision)";
        output Modelica.Units.SI.Length speedSegmentLength=SystemicComponent.common_carotid_L48_A.l
             + SystemicComponent.common_carotid_L48_B.l + SystemicComponent.common_carotid_L48_C.l
             + SystemicComponent.common_carotid_L48_D.l + SystemicComponent.aortic_arch_C64.l
             + SystemicComponent.aortic_arch_C94.l + SystemicComponent.thoracic_aorta_C96.l
             + SystemicComponent.thoracic_aorta_C100.l + SystemicComponent.thoracic_aorta_C104.l
             + SystemicComponent.thoracic_aorta_C108.l + SystemicComponent.thoracic_aorta_C112.l
             + SystemicComponent.abdominal_aorta_C114.l + SystemicComponent.abdominal_aorta_C136.l
             + SystemicComponent.abdominal_aorta_C164.l + SystemicComponent.abdominal_aorta_C176.l
             + SystemicComponent.abdominal_aorta_C188.l + SystemicComponent.abdominal_aorta_C192.l
             + SystemicComponent.common_iliac_R216.l + SystemicComponent.external_iliac_R220.l
             + SystemicComponent.femoral_R222.l
          "Distance between carotid_L48 and femoral_R222 for calculating pulse wave propagation speed";
        Modelica.Units.SI.Length aortic_length=SystemicComponent.ascending_aorta_A.l +
            SystemicComponent.ascending_aorta_B.l + SystemicComponent.ascending_aorta_C.l
             + SystemicComponent.ascending_aorta_D.l + SystemicComponent.aortic_arch_C2.l
             + SystemicComponent.aortic_arch_C46.l + SystemicComponent.aortic_arch_C64.l
             + SystemicComponent.aortic_arch_C94.l + SystemicComponent.thoracic_aorta_C96.l
             + SystemicComponent.thoracic_aorta_C100.l + SystemicComponent.thoracic_aorta_C104.l
             + SystemicComponent.thoracic_aorta_C108.l + SystemicComponent.thoracic_aorta_C112.l
             + SystemicComponent.abdominal_aorta_C114.l + SystemicComponent.abdominal_aorta_C136.l
             + SystemicComponent.abdominal_aorta_C164.l + SystemicComponent.abdominal_aorta_C176.l
             + SystemicComponent.abdominal_aorta_C188.l + SystemicComponent.abdominal_aorta_C192.l
          "Length of the whole aorta for comparison to body size";
        Modelica.Units.SI.Height height(start=1.7)
          "Body height, estimated from aortic length calculation. Have to eb manually set to settings due to computational procedure";
        Modelica.Units.SI.Length aortic_length_calc=1/100*(-67.2793 + 0.2487*settings.age
             + 0.5409*(height*100) + 0.3476*settings.BMI)
          "Zemtsovskaja, HT 2019 for male subjects";
        Modelica.Units.SI.Length aortic_length_calc2=1/1000*(-109.7 + 2.9*settings.age
             + 2.5*height*100) "Rezai, Blood Press Monit 2013, for male subjects";
        output Physiolibrary.Types.Pressure P_LA=heartComponent.mitralValve.q_in.pressure
          "Pressure in left atria";
        output Physiolibrary.Types.Volume V_la=heartComponent.la.volume
          "Left atrium volume output";
        output Physiolibrary.Types.VolumeFlowRate q_mv(displayUnit="l/min")=
          heartComponent.mitralValve.volumeFlowRate "Flow in mitral valve";
        output Real SLo_max=max([heartComponent.ventricles.LV_wall.SLo,heartComponent.ventricles.RV_wall.SLo,
            heartComponent.ventricles.SEP_wall.SLo]) "maximal Sarcomere length";
        output Real SLo_min=min([heartComponent.ventricles.LV_wall.SLo,heartComponent.ventricles.RV_wall.SLo,
            heartComponent.ventricles.SEP_wall.SLo]) "Minimal Sarcomere length";
        output Physiolibrary.Types.Pressure ESP
          "Opening pressure of the mitral valve - end systolic pressure";
        output Physiolibrary.Types.Pressure EDP
          "Closing pressure of the mitral valve - end diastolic pressure";
        parameter Physiolibrary.Types.Time tau=1e-3
          "Integration costant for min-max calculations";
        Physiolibrary.Types.VolumeFlowRate totalBF=SystemicComponent.internal_carotid_R8_C.q_in
             + SystemicComponent.external_carotid_T2_R26.q_in + SystemicComponent.internal_carotid_L50_C.q_in
             + SystemicComponent.external_carotid_T2_L62.q_in + SystemicComponent.vertebral_L2.q_in
             + SystemicComponent.vertebral_R272.q_in + SystemicComponent.celiac_trunk_C116.q_in
             + SystemicComponent.internal_iliac_T1_R218.q_in*0.25 + SystemicComponent.internal_iliac_T1_L196.q_in
            *0.25 + SystemicComponent.splanchnic_tissue.q_in + SystemicComponent.renal_L166.q_in
             + SystemicComponent.renal_R178.q_in + SystemicComponent.cardiac_tissue.q_in
             + SystemicComponent.internal_iliac_T1_R218.q_in*0.75 + SystemicComponent.profundus_T2_R224.q_in
             + SystemicComponent.anterior_tibial_T3_R230.q_in + SystemicComponent.posterior_tibial_T4_R236.q_in
             + SystemicComponent.internal_iliac_T1_L196.q_in*0.75 + SystemicComponent.profundus_T2_L202.q_in
             + SystemicComponent.anterior_tibial_T3_L208.q_in + SystemicComponent.posterior_tibial_T4_L214.q_in
             + SystemicComponent.ulnar_T2_R42.q_in + SystemicComponent.radial_T1_R44.q_in
             + SystemicComponent.ulnar_T2_L90.q_in + SystemicComponent.radial_T1_L92.q_in;
        Physiolibrary.Types.Fraction qf_brain=(SystemicComponent.internal_carotid_R8_C.q_in
             + SystemicComponent.external_carotid_T2_R26.q_in + SystemicComponent.internal_carotid_L50_C.q_in
             + SystemicComponent.external_carotid_T2_L62.q_in + SystemicComponent.vertebral_L2.q_in
             + SystemicComponent.vertebral_R272.q_in)/max(totalBF, 1e-6);
        Physiolibrary.Types.Fraction qf_Digestive=(SystemicComponent.celiac_trunk_C116.q_in
             + SystemicComponent.internal_iliac_T1_R218.q_in*0.25 + SystemicComponent.internal_iliac_T1_L196.q_in
            *0.25 + SystemicComponent.splanchnic_tissue.q_in)/max(totalBF, 1e-6);
        Physiolibrary.Types.Fraction qf_kidneys=(SystemicComponent.renal_L166.q_in +
            SystemicComponent.renal_R178.q_in)/max(totalBF, 1e-6);
        Physiolibrary.Types.Fraction qf_heart=(SystemicComponent.cardiac_tissue.q_in)/
            max(totalBF, 1e-6);
        Physiolibrary.Types.Fraction qf_Others=(SystemicComponent.internal_iliac_T1_R218.q_in
            *0.75 + SystemicComponent.profundus_T2_R224.q_in + SystemicComponent.anterior_tibial_T3_R230.q_in
             + SystemicComponent.posterior_tibial_T4_R236.q_in + SystemicComponent.internal_iliac_T1_L196.q_in
            *0.75 + SystemicComponent.profundus_T2_L202.q_in + SystemicComponent.anterior_tibial_T3_L208.q_in
             + SystemicComponent.posterior_tibial_T4_L214.q_in + SystemicComponent.ulnar_T2_R42.q_in
             + SystemicComponent.radial_T1_R44.q_in + SystemicComponent.ulnar_T2_L90.q_in
             + SystemicComponent.radial_T1_L92.q_in)/max(totalBF, 1e-6);
      equation
        der(SV_i) = -heartComponent.sa.q;
        der(brachial_pressure_systolic_i)*tau = max(brachial_pressure -
          brachial_pressure_systolic_i, 0);
        der(brachial_pressure_diastolic_i)*tau = min(brachial_pressure -
          brachial_pressure_diastolic_i, 0);
        when heartComponent.sa_node.beat then
          SV = SV_i;
          reinit(SV_i, 0);
          CO = SV*HR;
        end when;
        when not heartComponent.aorticValve.open then
          ESP = heartComponent.mitralValve.q_out.pressure;
          ESV = V_LV;
        end when;
        when not heartComponent.mitralValve.open then
          EDP = heartComponent.mitralValve.q_out.pressure;
          EDV = V_LV;
        end when;
        assert(
          abs(height - settings.height) < 0.01,
          "Please manually tune the height in settings so its in accordance with the one calculated from the aortic vessel length to a preceision of 1cm",
          AssertionLevel.warning);
        aortic_length = aortic_length_calc;
        der(brachial_pressure_int) = brachial_pressure;
        when heartComponent.sa_node.beat then
          brachial_pressure_mean = brachial_pressure_int/heartComponent.sa_node.t0_last;
          reinit(brachial_pressure_int, 0);
          brachial_pressure_systolic = (brachial_pressure_systolic_i);
          brachial_pressure_diastolic = (brachial_pressure_diastolic_i);
          reinit(brachial_pressure_systolic_i, brachial_pressure_mean);
          reinit(brachial_pressure_diastolic_i, brachial_pressure_mean);
        end when;
        annotation (experiment(
            StopTime=60,
            Interval=0.01,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"), __OpenModelica_simulationFlags(lv="LOG_STATS",
              s="cvode"));
      end partialCVS_EDPVR_squished;
    end Obsolete;

    package Identification "Pacakge contains models prepared for identification runs, model parametriyed to identification results and steadz state initialization"

      package SingleModelRun
        model TestRun
          extends Auxiliary.partialCVS(
            redeclare Components.Subsystems.Systemic.Systemic_simplest
              SystemicComponent(
              UseBaroreflexOutput=true,
              UseThoracic_PressureInput=true,
              UsePhi_Input=true,
              baroreflex_system(
                baroreflex(
                  resetAt=-1,
                  fsn=0.025,
                  g=1.0),
                baroreceptor_aortic(epsilon_start=1.19, delta0=0.3),
                baroreceptor_carotid(epsilon_start=1.06, s_start=0.96)),
              inferior_vena_cava_C8(
                l=2.5,
                r(displayUnit="mm") = 0.008,
                compliant_vessel(tau(displayUnit="d") = 604800))),
            phi_fixed(
              amplitude=0.74,
              rising=200,
              width=50,
              period=1000,
              startTime=50),
            redeclare Components.Subsystems.Pulmonary.Pulmonary_Smith
              pulmonaryComponent(UseThoracic_PressureInput=true),
            redeclare Components.Subsystems.Heart.Heart_Smith heartComponent(
                UseFrequencyInput=true, UseThoracic_PressureInput=
                                                                 true),
            settings(
              heart_alphaE=3,
              UseNonLinear_TissuesCompliance=true,
              tissues_UseStraighteningReaction2Phi=true,
              tissues_ZPV_nom=0.0027,
              tissues_SV_nom=0.0004,
              tissues_eta_Rv=1,
              tissues_eta_C=1));
          output Physiolibrary.Types.Pressure Pa=SystemicComponent.ascending_aorta_B.p_C;
        equation
          connect(SystemicComponent.phi_baroreflex, condHRPhi.u) annotation (
              Line(points={{-27.4,45.4},{7.3,45.4},{7.3,60},{40.8,60}}, color={
                  0,0,127}));
          connect(SystemicComponent.phi_baroreflex, condSystemicPhi.u)
            annotation (Line(points={{-27.4,45.4},{-27.4,24.7},{-27.2,24.7},{-27.2,
                  4.00002}}, color={0,0,127}));
          annotation (experiment(
              StopTime=400,
              Interval=0.03,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end TestRun;

        model OptimizeBaseline
          extends Auxiliary.partialCVS_optimized_ss(useAutonomousPhi(y=true),
            settings(
              HR_max=3.1666666666667,
              chi_phi=0.7,
              heart_R_RA=settings.heart_R_LA,
              heart_vntr_D_0=12.91385,
              heart_vntr_D_A=1571.971,
              heart_vntr_TS=8.825000e-02,
              heart_vntr_TR=2.975000e-01,
              heart_atr_D_0=15407920,
              heart_atr_D_A=113536000,
              syst_TPR=124846900,
              syst_TR_frac=5.012728e+00,
              syst_art_k_E=0.3973268,
              pulm_R(displayUnit="(Pa.s)/m3") = 5841980,
              pulm_q_nom_maxq(displayUnit="l/min") = 0.00033333333333333),
            heartComponent(resistor(enable=false), resistor1(enable=false)),
            pulmonaryComponent(R_pa_visc(enable=false), R_pv_visc(enable=false)));
        end OptimizeBaseline;

        model passive_tilt "optimized passive tilt"
          extends Tilt.Experiments.OptimizedBaseline_tiltable(
            SystemicComponent(baroreflex_system(baroreceptor_aortic(tau_s=6.0),
                  baroreceptor_carotid(tau_s=6.0))),
            phi_fixed(
              amplitude=0.3739 - 0.25,
              rising=1,
              width=360,
              period=360,
              startTime=0),
            Tilt_ramp(startTime=0),
            settings(
              tissues_gamma=0.5,
              eta_vc=0.5,
              tissues_eta_Ra=4.2625,
              tissues_eta_C=0.2),
            heartRate(HR_max=3.1666666666667),
            heartComponent(ventricles(redeclare
                  Components.Subsystems.Heart.Auxiliary.TriSegMechanics_components.Driving_Olufsen
                  calciumMechanics(TR_maxAct(displayUnit="s"), drive_coeff=
                      1.515625))),
            useAutonomousPhi(y=true));
          annotation (experiment(
              StopTime=180,
              Interval=0.02,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end passive_tilt;

        model maxExercise "Aimed to ahve max CO"
          extends
            ADAN_main.SystemicTree.Exercise.Experiments.base_Exercise_SimpleCa_maxSV(
            sigma_factor(displayUnit="1") = 38.625,
            heartComponent(ventricles(calciumMechanics(k_TS=0.165, k_TR_min(
                      displayUnit="s") = 0.08))),
            settings(tissues_chi_Ra( displayUnit="1") = 13.625));
          annotation (experiment(
              StopTime=15,
              Interval=0.01,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode"));
        end maxExercise;

        model base_TriSeg_SA "for sensitivity analysis"
          extends Obsolete.TriSeg_base(heartComponent(ventricles(LV_wall(
                  Lsref=heart_vntr_Lsref,
                  vmax=vmax,
                  LSEiso=LSEiso,
                  SLrest=heart_vntr_SLrest,
                  SLcollagen=heart_vntr_SLcollagen,
                  PConcollagen=PConcollagen,
                  PExpcollagen=PExpcollagen,
                  L0=heart_vntr_L0))));
          parameter Real Lsref = Lsref_frac*1.9 " Resting SL, micron ";
          parameter Real vmax = vmax_frac*7 "micron/sec";
          parameter Real LSEiso = LSEiso_frac*0.04 "micron";
          parameter Real SLrest = SLrest_frac*1.51 "microns";
          parameter Real SLcollagen = SLcollagen_frac*2.25;
          parameter Real PConcollagen = PConcollagen_frac*0.01;
          parameter Real PExpcollagen = PExpcollagen_frac*70;
          parameter Real L0 = L0_frac*0.907 "micron";

        parameter Physiolibrary.Types.Fraction Lsref_frac = 1;
        parameter Physiolibrary.Types.Fraction vmax_frac = 1;
        parameter Physiolibrary.Types.Fraction LSEiso_frac = 1;
        parameter Physiolibrary.Types.Fraction SLrest_frac = 1;
        parameter Physiolibrary.Types.Fraction SLcollagen_frac = 1;
        parameter Physiolibrary.Types.Fraction PConcollagen_frac = 1;
        parameter Physiolibrary.Types.Fraction PExpcollagen_frac = 1;
        parameter Physiolibrary.Types.Fraction L0_frac = 1;

          annotation (experiment(
              StopTime=30,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end base_TriSeg_SA;

        model ReoptimizeBaseline1 "Reoptimize as of 2020-09-08"
          extends Obsolete.CardiovascularSystem_old(
                                       useAutonomousPhi(y=false), pulmonaryComponent(
                r_pa(R_nom_fixed=settings.pulm_R, Q_nom=settings.pulm_CO_target)));

        //   Physiolibrary.Types.Pressure P_pa = pulmonaryComponent.c_pa.q_in.pressure "Pulmonary arterial pressure output";
        //   Physiolibrary.Types.Pressure P_pv = pulmonaryComponent.c_pv.q_in.pressure "Pulmonary venous pressure (pulmonary wedge pressure) output";
          annotation (experiment(
              StopTime=60,
              Interval=0.01,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end ReoptimizeBaseline1;

        model ReoptimizeBaseline2 "Next iteration of the optimization"
          extends Results.OlufsenTriSeg_optimized1(pulmonaryComponent(
                deadVolume=0.002), heartComponent(aorticValve(
                  calculateAdditionalMetrics=true)));
        end ReoptimizeBaseline2;

        model ReoptimizeBaseline3 "Third round of optimization, now with nonlinear pulmonary resistance"
          extends Results.OlufsenTriSeg_optimized2(settings(heart_R_LA(
                  displayUnit="(mmHg.min)/l") = 4999589.5280625, heart_R_RA(
                  displayUnit="(mmHg.min)/l") = 4999589.5280625),
          pulmonaryComponent(r_pa(
                useNonlinearResistance=true,
                useNominalParametrization=true,
                Q_nom_maxQ=settings.pulm_R/2)));
        end ReoptimizeBaseline3;

        model CVS_fastBaro
          extends CardiovascularSystem(settings(baro_tau_s(displayUnit="s")=
                10));
          annotation (experiment(
              StopTime=60,
              Interval=0.01,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_fastBaro;

        model optimizeBaseline6
          extends Obsolete.partialCVS_ss;
        end optimizeBaseline6;

        model CVS_baseline "Generated by PostProcess/postprocess_optim.py optimized at Oct 31 12:36:27 CET 2020
 with cost 0.068118 lowest at run 2417 and merged with older optims"
          extends Obsolete.partialCVS_ss(
            settings(
                heart_R_vlv=350000,
                heart_R_LA=6031000,
                heart_atr_D_A=58625000,
                syst_TPR=130375000,
                syst_TR_frac(displayUnit="1") = 4.533259,
                pulm_C_PA=3.9875e-08,
                pulm_R=6813356,
                pulm_q_nom_maxq=0.0009916,
                syst_abd_P_th_ratio=0.8,
              heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
          V_PV_init=5e-05,
              tissues_eta_Ra =          2.545225e+00,
              tissues_eta_C =          3.421191e-01,
              eta_vc =          1.289172e-01,
              veins_gamma =          7.343750e-01,
           heart_vntr_L0 = 1.6,
           syst_art_k_E = 4.173268e-01,
              heart_vntr_xi_AmRef = 9.180500e-01,
              pulm_C_PV = 3.234639e-07,
              pulm_P_PV_nom=1333.22387415,
                 heart_vntr_Lsref=1.900000e+00,
              heart_atr_D_0 =       1.311515e+07,
                heart_vntr_D_0_maxAct =           2.953125e-04,
                heart_vntr_D_0= 17.67188,
                heart_vntr_D_A= 1821.718,
              heart_vntr_Tact =  1.000000e-01,
              heart_vntr_D_A_maxAct =           9.585000e+03),
                                                 useAutonomousPhi(y=false),
            pulmonaryComponent(r_pa(useNonlinearResistance=false)));

              // heart_drive_TS_maxAct =          1.223990e-01,
              // heart_drive_TR_maxAct =          1.106879e-01,

          annotation (experiment(
              StopTime=30,
              Interval=0.01,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_baseline;

        model CVS_valsalva_optim
          "Prolonged steady state to optim baseline and valsalva at once"
          extends Valsalva.CVS_valsalva(condHeartPhi(uMin=settings.phi0),
              settings(
              heart_R_RA=settings.heart_R_LA,
              tissues_eta_Rv=0,
              heart_vntr_TS_maxAct(displayUnit="s"),
              heart_vntr_TR_maxAct(displayUnit="s"),
              heart_vntr_Tact=0.15,
              heart_vntr_Tact_maxAct=settings.heart_vntr_Tact*settings.HR_nominal
                  /settings.HR_max));
          annotation (experiment(
              StopTime=90,
              Interval=0.01,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_valsalva_optim;

        model AdjustPVloop "Ventricular PV loop adjustement test"
          extends Baseline.CVS_baseline(useAutonomousPhi(y=false),
              heartComponent(calciumMechanics(
                usePhiInput=false,
                TS=settings.heart_atr_TS,
                TS_maxAct=settings.heart_atr_TS,
                TR=settings.heart_atr_TR,
                TR_maxAct=settings.heart_atr_TR)));
          annotation (experiment(
              StopTime=30,
              Interval=0.01,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end AdjustPVloop;

        model ReoptimizeBaseline4
          extends CardiovascularSystem(settings(
              heart_vntr_xi_Vw=1,
              heart_vntr_xi_AmRef=1,
            heart_vntr_PConcollagen=20.0,
            heart_vntr_PExpcollagen=2.9,
            heart_vntr_SLcollagen=2.1,
            heart_vntr_k_passive=10.0),
           useAutonomousPhi(y=false));

              // syst_TPR=a,
              // syst_TR_frac=a,
              // pulm_C_PA=a,
              // pulm_R=a
              //       V_PV_init=a,
              // heart_R_LA=a,
              // heart_vntr_D_0=a,
              // heart_vntr_D_A=a,
              // heart_atr_D_0=a,
              // heart_atr_D_A=a,

        end ReoptimizeBaseline4;

        model CVS_baseline_reoptim "Just another otpim round"
          import ADAN_main;
          extends
            ADAN_main.SystemicTree.Identification.SteadyState.OlufsenTriSeg_optimized2_init(
            heartComponent(valveInertia_Mitral(enabled=false)),
            settings(heart_vntr_TS=0.1, heart_atr_TS=0.08),
            useAutonomousPhi(y=false));
        //   (settings(heart_I_A(displayUnit="Pa.s2/m3"),
        //                                         baro_tau_s(displayUnit="s") = 30),
        //       useAutonomousPhi(y=false));
          annotation (experiment(
              StopTime=10,
              Interval=0.01,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"),
            __OpenModelica_simulationFlags(lv = "LOG_STATS", s = "cvode"));
        end CVS_baseline_reoptim;

        model CVS_reoptimizeBaseline7
          extends Results.CVS_EDPVR(useAutonomousPhi(y=false));
        end CVS_reoptimizeBaseline7;

        model HFpEf7 "Identification of HFpEF patient n. 7"
          extends Exercise.CVS_exercise(settings(
              height=1.7,
              weight=80,
              age=65,
              HR_nominal=1.1666666666667,
              HR_max=1.6,
              heart_vntr_xi_Vw(displayUnit="1") = 100/123),
            Exercise(startTime=20),
            phi_fixed(
              amplitude=settings.chi_phi*(1 - settings.phi0),
              offset=settings.phi0,
                      startTime=20),
            condHRPhi(UseAdditionalInput=true, phi_gain=0));
        Modelica.Blocks.Sources.Ramp      phi_fixed1(
            height=1 - settings.phi0,
            duration=1,
            offset=settings.phi0,
            startTime=20)
            "Phi for when the model is not using the autonomous feedback phi from baroreflex"
            annotation (Placement(transformation(extent={{106,-34},{86,-14}})));
        equation
          connect(phi_fixed1.y, condHRPhi.u1) annotation (Line(points={{85,-24},
                  {74,-24},{74,-26.6667},{57.32,-26.6667}}, color={0,0,127}));
          annotation (experiment(
              StopTime=40,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end HFpEf7;

        model HFpEf5 "Identification of HFpEF patient n. 5"
          extends Exercise.CVS_exercise(settings(
              height=1.7,
              weight=80,
              age=54,
              HR_nominal=0.9,
              HR_max=1.0666666666667,
              heart_vntr_xi_Vw(displayUnit="1") = 105/123,
              pulm_C_PA=1.635198e-09,
              heart_vntr_xi_AmRef=0.834375,
              syst_TPR=417980300,
              syst_TR_frac =          5.975109e+00,
              heart_vntr_D_A =          1.430413e+03,
              syst_art_k_E=0.997614,
              V_PV_init=0.0001974999,
              chi_phi=0.254375,
              heart_R_vlv=95217.63,
              heart_R_LA=1489561),
            Exercise(startTime=20),
            phi_fixed(
              amplitude=settings.chi_phi*(1 - settings.phi0),
              offset=settings.phi0,
                      startTime=20),
            condHRPhi(UseAdditionalInput=true, phi_gain=0),
            heartComponent(aorticValve(_Goff=Goff)));

        Modelica.Blocks.Sources.Ramp      phi_fixed1(
            height=1 - settings.phi0,
            duration=1,
            offset=settings.phi0,
            startTime=20)
            "Phi for when the model is not using the autonomous feedback phi from baroreflex"
            annotation (Placement(transformation(extent={{106,-34},{86,-14}})));

          Physiolibrary.Types.Volume CO_backflow_acc;
        Physiolibrary.Types.Volume CO_backflow;
        Physiolibrary.Types.Fraction regurgitation_frac = min(1, CO_backflow/max(SV + CO_backflow, 1e-6)) "Shall be around 20%";
          parameter Physiolibrary.Types.HydraulicConductance Goff(displayUnit=
                "l/(mmHg.min)")=2.50021E-09
            "Backward state-off conductance (closed valve conductance)";
        equation
            // integrate only negative backflow
            der(CO_backflow_acc) = max(heartComponent.aorticValve.q_out.q, 0);

          when heartComponent.aorticValve.cc < heartComponent.aorticValve.epsTime then
            reinit(CO_backflow_acc, 0);
            CO_backflow = CO_backflow_acc;
          end when;

          connect(phi_fixed1.y, condHRPhi.u1) annotation (Line(points={{85,-24},{74,-24},
                  {74,-26.6667},{57.32,-26.6667}}, color={0,0,127}));
          annotation (experiment(
              StopTime=40,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end HFpEf5;

        model CVS_baseline_nobaro
          extends CardiovascularSystem(useAutonomousPhi(y=false));
        end CVS_baseline_nobaro;
      end SingleModelRun;

      package Results
        package Experiments
          model OlufsenTriSeg_optimized_steadyState
            extends
              ADAN_main.SystemicTree.Identification.SteadyState.OlufsenTriSeg_optimized_steadyState_init(
              condTP_PC(disconnected=false),
              SystemicComponent(baroreflex_system(baroreceptor_carotid(d0=1.2),
                    baroreceptor_aortic(d0=1.6))),
              settings(baro_useAbsolutePressureTerm=true, baro_tau_s(
                    displayUnit="s") = 300));

            annotation (experiment(
                StopTime=1600,
                Interval=0.04,
                Tolerance=1e-06,
                __Dymola_Algorithm="Cvode"));
          end OlufsenTriSeg_optimized_steadyState;

        model OlufsenTriSeg_optimized
            "Generated by PostProcess/postprocess_optim.py at 2020-07-02 12:26:25.749501 with cost 0.075148 lowest at run 306"
          extends Obsolete.OlufsenTriSeg_base(settings(
                baro_g=6.062580e-01,
                pulm_C_PV=1.987900e-07,
                HR_max=2.907000e+00,
                eta_vc=1.574500e-01,
                syst_art_k_E=3.504230e-01,
                tissues_ZPV_nom=2.101240e-03,
                tissues_eta_Ra=3.171620e+00,
                tissues_eta_C=2.287800e-01,
                baro_tau_s=1.156200e+02,
                baro_xi_delta0=2.688000e-01,
                heart_vntr_D_A =            1.974000e+00,
                heart_vntr_TR= 3.809700e-01,
                heart_vntr_TR_maxAct= 1.224000e-01,
                heart_vntr_D_A_maxAct =           1.883250e+01,
                tissues_chi_Ra=
                              3.477600e+01));

            Physiolibrary.Types.Volume totalVolume=SystemicComponent.total_volume
                 + heartComponent.volume + pulmonaryComponent.volume;
          annotation (experiment(
              Interval=0.02,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode"));
        end OlufsenTriSeg_optimized;

          model TriSeg_OptimizedBaseline "Optimized for resting condition"
            extends Obsolete.TriSeg_base(settings(
                V_PV_init(displayUnit="ml") = -164.55e-6,
                baro_f1=0.00418,
                syst_TPR(displayUnit="(mmHg.min)/l") = 119490152,
                syst_TR_frac(displayUnit="%") = 5.118955,
                syst_art_k_E(displayUnit="1") = 0.358125,
                heart_vntr_xi_Vw =   0.90375,
                heart_vntr_xi_AmRef =   1.06));
            annotation (experiment(
                StopTime=30,
                Interval=0.02,
                Tolerance=1e-06,
                __Dymola_Algorithm="Cvode"));
          end TriSeg_OptimizedBaseline;

          model CVS_baseline "Manual tuning after optimization"
            extends
              ADAN_main.SystemicTree.Identification.Results.OlufsenTriSeg_optimized(
                heartComponent(calciumMechanics(
                  D_0=1.311515e+07,
                  D_A(displayUnit="Pa/m3") = 58625000,
                  TS=0.14,
                  TR=0.38)), useAutonomousPhi(y=false));
            annotation (experiment(
                StopTime=60,
                Interval=0.01,
                Tolerance=1e-06,
                __Dymola_Algorithm="Cvode"));
          end CVS_baseline;

          model LHF
            extends CVS_valsalva_PP2(heartComponent(ventricles(LV_wall(
                      contractilityFraction=0.5), SEP_wall(
                      contractilityFraction=0.5))), settings(
                V_PV_init=0,
                heart_vntr_D_A(displayUnit="Pa/m3"),
                heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 6000));
            annotation (experiment(
                StopTime=40,
                Interval=0.02,
                Tolerance=1e-06,
                __Dymola_Algorithm="Cvode"));
          end LHF;

          model LHF_Vw
            extends CVS_valsalva_PP2(heartComponent(ventricles(LV_wall(Vw=
                        heartComponent.ventricles.settings.heart_vntr_xi_Vw*89/
                        2), SEP_wall(Vw=heartComponent.ventricles.settings.heart_vntr_xi_Vw
                        *34/2))));
          end LHF_Vw;

          model RHF
            extends CVS_valsalva_PP2(heartComponent(ventricles(RV_wall(
                      contractilityFraction=0.5), SEP_wall(
                      contractilityFraction=0.5))), settings(
                V_PV_init=0,
                heart_vntr_D_A(displayUnit="Pa/m3"),
                heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 6000));
            annotation (experiment(
                StopTime=40,
                Interval=0.02,
                Tolerance=1e-06,
                __Dymola_Algorithm="Cvode"));
          end RHF;

          model CHF
            extends LHF(settings(V_PV_init=0.002));
          end CHF;

          model CHF_FT "congestive heart failure with impaired ventilation"
            extends CHF(pulmonaryComponent(r_pa(R_nom_fixed=R_nom_frac*settings.pulm_R)));
            parameter Physiolibrary.Types.Fraction R_nom_frac=2.5
              "Fraction of pulmnary resistance";
          end CHF_FT;

          model CVS_valsalva_PP2_VV "with venous valves"
            extends CVS_valsalva_PP2(SystemicComponent(
                abdominal_aorta_C176(LimitBackflow=false),
                common_iliac_vein_R26(LimitBackflow=true),
                common_iliac_vein_L56(LimitBackflow=true),
                brachiocephalic_vein_R90(LimitBackflow=true),
                brachiocephalic_vein_L124(LimitBackflow=true),
                common_carotid_R6_A(LimitBackflow=false),
                brachiocephalic_trunk_C4(LimitBackflow=false),
                subclavian_R28(LimitBackflow=false),
                superior_vena_cava_C88(LimitBackflow=true),
                inferior_vena_cava_C24(LimitBackflow=true),
                abdominal_aorta_C188(LimitBackflow=false),
                common_carotid_L48_A(LimitBackflow=false),
                subclavian_L66(LimitBackflow=false),
                aortic_arch_C64(LimitBackflow=false)));
            annotation (experiment(
                StopTime=90,
                Interval=0.02,
                Tolerance=1e-07,
                __Dymola_Algorithm="Cvode"));
          end CVS_valsalva_PP2_VV;

          model HFpEF
            extends CVS_valsalva_PP2(heartComponent(ventricles(SEP_wall(k_passive=150),
                    LV_wall(k_passive=150))));
          end HFpEF;

          model HF
            extends CVS_valsalva_PP2(heartComponent(ventricles(LV_wall(
                      k_passive=50, contractilityFraction=0.1))));
          end HF;
        end Experiments;

        model OlufsenTriSeg_optimized1
         "Generated by PostProcess/postprocess_optim.py optimized at May 05 14:47:06 CEST 2021
 with cost 0.292641 lowest at run 3428"
          extends
            ADAN_main.SystemicTree.Identification.SingleModelRun.OptimizeBaseline(  settings(
              V_PV_init=-1.875e-05,
              heart_R_LA=5491134,
              heart_vntr_D_0 =          8.398225e+00,
              heart_vntr_D_A =          1.423533e+03,
              heart_atr_D_0=10789530,
              heart_atr_D_A=94193450,
              syst_TPR=127130700,
              syst_TR_frac =          6.360572e+00,
              baro_tau_s=10,
              baro_fsn=0.0356,
              pulm_C_PA=2.000814e-08,
              pulm_R =          9.158935e+06,
              heart_vntr_TS =          3.452533e-01,
              heart_vntr_TR =          1.218750e-01,
              syst_art_k_E=0.4402957), useAutonomousPhi(y=false));

          annotation (experiment(
              StopTime=20,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end OlufsenTriSeg_optimized1;

        model OlufsenTriSeg_optimized2 "Generated by PostProcess/postprocess_optim.py optimized at May 13 18:26:50 CEST 2021
 with cost 0.108058 lowest at run 2931"
          extends ADAN_main.SystemicTree.Experiments.CVS_SATejection(settings(
              V_PV_init=3.125e-06,
              heart_vntr_D_0 =          1.034822e+01,
              heart_R_LA=3293446,
              heart_vntr_D_A =          1.296970e+03,
              heart_vntr_TS =          4.421283e-01,
              heart_vntr_TR =          1.812500e-01,
              heart_atr_D_0=26311610,
              heart_atr_D_A=87274250,
              syst_TPR=128693300,
              syst_TR_frac =          4.997329e+00,
              baro_tau_s=10,
              pulm_C_PA=1.463314e-08,
              pulm_R =          9.986631e+06), heartComponent(aorticValve(
              _Ron =                            1.765130e+05)),
            useAutonomousPhi(y=if time > 20 then true else false));

        end OlufsenTriSeg_optimized2;

      model OlufsenTriSeg_optimized3 "Generated by PostProcess/postprocess_optim.py optimized at Sep 10 22:37:00 CEST 2020
 with cost 0.000023 lowest at run 1381"
        extends SingleModelRun.ReoptimizeBaseline3(
          settings(
            syst_TPR=132562500,
            syst_TR_frac=4.801875,
            V_PV_init=-0.001315,
            syst_art_k_E=0.43125,
            heart_vntr_xi_Vw=0.965,
            heart_vntr_xi_AmRef=0.87125,
            pulm_R=7940000,
            pulm_C_PA=3.84375e-08,
            heart_atr_D_A=27762500,
            heart_atr_D_0 =     0.396875,
            heart_vntr_D_0= 0.0116125,
            heart_vntr_D_A =        1.2525),
                                     pulmonaryComponent(r_pa(useNonlinearResistance=false,
                  useNominalParametrization=false)));
        annotation (experiment(
              StopTime=120,
              Interval=0.01,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
      end OlufsenTriSeg_optimized3;

      model OlufsenTriSeg_optimized4 "Generated by PostProcess/postprocess_optim.py optimized at Sep 12 12:44:25 CEST 2020
 with cost 0.007875 lowest at run 1142"
        extends SingleModelRun.ReoptimizeBaseline3(
          settings(
            syst_TPR = 1.296478e+08,
            syst_TR_frac = 5.306350e+00,
            V_PV_init = -1.284520e-03,
            syst_art_k_E = 4.165002e-01,
            heart_vntr_xi_Vw = 1.013795e+00,
            heart_vntr_xi_AmRef = 9.700000e-01,
            pulm_R = 1.310741e+07,
            pulm_C_PA = 2.737500e-08,
            heart_R_LA = 3.768090e+06,
            heart_R_RA = 3.768090e+06,
            heart_atr_D_A = 1.614730e+07,
            heart_atr_D_0 =       9.509065e-01,
            heart_vntr_D_0 =  1.524918e-02,
            heart_vntr_D_A =          1.483175e+00));

      equation

        annotation (experiment(
            StopTime=40,
            Interval=0.01,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end OlufsenTriSeg_optimized4;

        model experiment
          extends OlufsenTriSeg_optimized3(
            SystemicComponent(UseBaroreflexOutput=true),
            settings(heart_R_LA(displayUnit="(Pa.s)/m3") = 1999835.811225,
                  heart_R_vlv(displayUnit="(Pa.s)/m3"),
              heart_R_LA(displayUnit="(mmHg.min)/l") = 5000000),
            heartComponent(
              tricuspidValve(useChatteringProtection=false),
              pulmonaryValve(useChatteringProtection=false),
              mitralValve(useChatteringProtection=false),
              aorticValve(useChatteringProtection=false)));
          annotation (experiment(
              Interval=0.0001,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode"));
        end experiment;

      model OlufsenTriSeg_optimized5 "Generated by PostProcess/postprocess_optim.py optimized at Sep 13 13:38:32 CEST 2020
 with cost 0.000259 lowest at run 3185"
        extends SingleModelRun.ReoptimizeBaseline3(
          settings(
              heart_R_RA=3766520,
              syst_TPR=130465900,
              syst_TR_frac=5.21529,
              V_PV_init=-0.0012975,
              syst_art_k_E=0.4226095,
              heart_vntr_xi_Vw=0.8908231,
              heart_vntr_xi_AmRef=0.9118,
              pulm_R=15145850,
              pulm_C_PA=3.800549e-08,
              heart_R_LA=3766520,
              heart_atr_D_A=16803550,
              heart_atr_D_0 =     0.5902815,
              heart_vntr_D_0= 0.01393399,
              heart_vntr_D_A =        1.5298));
          annotation (experiment(
              StopTime=40,
              Interval=0.01,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode"));
      end OlufsenTriSeg_optimized5;

        model bleh_optimized "Generated by PostProcess/postprocess_optim.py optimized at Oct 21 23:15:31 CEST 2020
 with cost 0.004059 lowest at run 1418"
        extends Obsolete.partialCVS_ss(
            settings(
              pulm_P_PV_nom=1333.22387415,
              V_PV_init=-1.500000e-05,
              heart_R_vlv=1.999835e+05,
              heart_R_LA=2.848432e+06,
              heart_vntr_xi_AmRef=9.180500e-01,
              heart_vntr_Lsref=1.900000e+00,
              heart_vntr_L0=9.977000e-01,
              syst_TPR=1.304659e+08,
              syst_TR_frac=5.215290e+00,
              syst_art_k_E=4.226095e-01,
              veins_gamma=7.343750e-01,
              pulm_C_PV=4.500367e-07,
              pulm_C_PA=3.127252e-08,
              pulm_R=8.723066e+06,
              pulm_q_nom_maxq=3.750000e-04,
              heart_atr_D_0(      displayUnit="1") = 0.5902815*16803550,
              heart_vntr_D_0= 2.875000e+01,
              heart_vntr_D_A= 1.412500e+03,
              heart_vntr_D_A_maxAct( displayUnit="Pa/m3") = 16*7.5*120));

        end bleh_optimized;

        model baseline_optimized6 "Generated by PostProcess/postprocess_optim.py optimized at Oct 22 17:31:49 CEST 2020
 with cost 0.000425 lowest at run 1381"
          extends bleh_optimized(
            settings(
              baro_fsn(displayUnit="Hz") = 0.03687544,
              heart_atr_D_A = 1.795879e+07,
              V_PV_init=-1.5e-05,
              heart_R_vlv = 1.349889e+05,
              heart_R_LA = 3.293500e+06,
              heart_vntr_xi_AmRef = 9.180500e-01,
              heart_vntr_L0 = 9.977000e-01,
              syst_TPR = 1.296505e+08,
              syst_TR_frac = 5.215290e+00,
              syst_art_k_E = 4.173268e-01,
              pulm_C_PV = 3.234639e-07,
              pulm_C_PA = 2.599528e-08,
              pulm_R = 8.832106e+06,
              pulm_q_nom_maxq=0.0002742187,
              heart_atr_D_0 =       9.794839e+06,
              heart_vntr_D_0 =  2.659375e+01,
              heart_vntr_D_A =  1.377187e+03));
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end baseline_optimized6;

        model OptimizedValsalva "Generated by PostProcess/postprocess_optim.py optimized at Oct 23 14:12:52 CEST 2020
 with cost 2.074983 lowest at run 456"

          extends baseline_optimized6(
            settings(
              V_PV_init =          6.250000e-06,
              tissues_eta_Ra =          2.545225e+00,
              tissues_eta_C =          3.421191e-01,
              eta_vc =          1.289172e-01,
              veins_gamma =          7.343750e-01,
              heart_vntr_D_0_maxAct =           2.953125e-04,
              heart_vntr_TS_maxAct =           1.223990e-01,
              heart_vntr_TR_maxAct =           1.106879e-01,
              heart_vntr_D_A_maxAct =           9.585000e+03));

          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));
        end OptimizedValsalva;

      model OlufsenTriSeg_optimized "Generated by PostProcess/postprocess_optim.py optimized at Oct 31 12:36:27 CET 2020
 with cost 0.068118 lowest at run 2417"
        extends ADAN_main.SystemicTree.Baseline.CVS_baseline(
          settings(
              heart_R_vlv=350000,
              heart_R_LA=6031000,
              heart_atr_D_A=58625000,
              syst_TPR=130375000,
              syst_TR_frac(displayUnit="1") = 4.533259,
              baro_tau_s=20,
              baro_fsn=0.03655,
              pulm_C_PA=3.9875e-08,
              pulm_R=6813356,
              pulm_q_nom_maxq=0.0009916,
            heart_atr_D_0 =       1.311515e+07,
              heart_vntr_D_0= 17.67188,
              heart_vntr_D_A= 1821.718,
            heart_vntr_Tact =  1.000000e-01),
                                          useAutonomousPhi(y=true));
      end OlufsenTriSeg_optimized;

        model CVS_baseline_optimized "Generated by PostProcess/postprocess_optim.py optimized at Nov 04 22:01:14 CET 2020
 with cost 0.033419 lowest at run 1245"
          extends SingleModelRun.CVS_baseline(
            settings(
              heart_R_vlv=6250,
              heart_R_LA=4856000,
              heart_atr_D_A=51125000,
              syst_TPR=130750000,
              syst_TR_frac = 4.695759e+00,
              baro_tau_s(displayUnit="s") = 10,
              baro_fsn(displayUnit="Hz") = 0.037,
              pulm_C_PA=3.95e-08,
              pulm_R=9613356,
              V_PV_init=1.058791e-22,
              heart_vntr_k_passive = 1.775000e+01,
              heart_vntr_xi_Vw=0.8033231,
              heart_vntr_xi_AmRef=1.0843,
              heart_atr_D_0 =     11240150,
              heart_vntr_D_0= 13.54688,
              heart_vntr_D_A= 2709.218,
              heart_vntr_Tact =  7.500000e-02));

        end CVS_baseline_optimized;

        model CVS_baseline_optimizedEDP "Generated by PostProcess/postprocess_optim.py optimized at Nov 06 16:01:35 CET 2020
 with cost 0.259507 lowest at run 2218"
          extends SingleModelRun.CVS_baseline(
            settings(
              heart_R_vlv=6250,
              heart_R_LA=1652875,
              heart_atr_D_A=100000000,
              syst_TPR=129875000,
              syst_TR_frac =          5.527009e+00,
              baro_tau_s(displayUnit="s"),
              baro_fsn(displayUnit="Hz") = 0.0358,
              pulm_C_PA=4e-08,
              pulm_R=9488356,
              V_PV_init=3.53125e-05,
              heart_vntr_k_passive =          1.000000e+00,
              heart_vntr_xi_Vw=0.8389481,
              heart_vntr_xi_AmRef=0.8593,
              heart_atr_D_0 =     14990150,
              heart_vntr_D_0= 37.67188,
              heart_vntr_D_A= 1293.593,
              heart_vntr_Tact =           5.000000e-02),
                                           useAutonomousPhi(y=true));
        end CVS_baseline_optimizedEDP;

        model CVS_valsalva_optim  "Generated by PostProcess/postprocess_optim.py optimized at Nov 10 12:19:59 CET 2020
 with cost 10.651676 lowest at run 153"
          extends
            ADAN_main.SystemicTree.Identification.SingleModelRun.CVS_valsalva_optim(
            settings(
              V_PV_init =          0.000000e+00,
              tissues_eta_Ra =          2.036180e+00,
              tissues_eta_C =          5.131786e-01,
              eta_vc =          1.675924e-01,
              veins_gamma =          4.039061e-01,
              pulm_C_PA =          5.925000e-08,
              pulm_C_PV =          4.528495e-07,
              heart_vntr_TR_maxAct =           1.189895e-01,
              heart_vntr_D_A_maxAct =           8.866125e+03));
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));

        end CVS_valsalva_optim;

        model CVS_valsalva_optimPP "Optimized for baseline and valsalva simplified objectives to pulse pressure and HR. Generated by PostProcess/postprocess_optim.py optimized at Nov 10 23:08:47 CET 2020
 with cost 0.891728 lowest at run 972"
          extends
            ADAN_main.SystemicTree.Identification.SingleModelRun.CVS_valsalva_optim(
              settings(
              V_PV_init=1.505469e-22,
              heart_R_vlv=8.183594e+03,
              heart_R_LA=5.538875e+06,
              heart_atr_D_A=4.537345e+07,
              heart_vntr_xi_Vw=6.426586e-01,
              heart_vntr_xi_AmRef=1.094465e+00,
              heart_vntr_k_passive=1.975000e+01,
              eta_vc=1.055510e-01,
              tissues_eta_Ra=2.445225e+00,
              tissues_eta_C=4.421191e-01,
              veins_gamma=3.843750e-01,
              pulm_C_PV=2.759552e-07,
              pulm_C_PA=4.147500e-08,
              pulm_R=9.613356e+06,
              heart_atr_D_0=1.124015e+07,
              heart_vntr_D_0=1.422422e+01,
              heart_vntr_D_A=3.090203e+03,
              heart_vntr_TS=1.190000e-01,
              heart_vntr_TR=3.990000e-01,
              heart_vntr_TR_maxAct=1.082666e-01,
              heart_vntr_D_A_maxAct=1.422773e+04));
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));

        end CVS_valsalva_optimPP;

        model CVS_valsalva_PP2 "Generated by PostProcess/postprocess_optim.py optimized at Nov 12 20:32:42 CET 2020
 with cost 1.911274 lowest at run 1305"
          extends
            ADAN_main.SystemicTree.Identification.SteadyState.CVS_baseline_ss_init(
            condHeartPhi(uMin=settings.phi0),
            settings(
              V_PV_init =          1.375000e-04,
              heart_R_vlv =          3.427735e+03,
              heart_R_LA =          6.540425e+06,
              heart_atr_D_A =          4.601250e+07,
              heart_vntr_xi_Vw =          9.639875e-01,
              heart_vntr_xi_AmRef =          1.033473e+00,
              heart_vntr_k_passive =          2.475000e+01,
              eta_vc =          1.474491e-01,
              tissues_eta_Ra =          2.445225e+00,
              tissues_eta_C =          4.421191e-01,
              veins_gamma =          3.156250e-01,
              pulm_C_PV =          3.194206e-07,
              pulm_C_PA =          5.332500e-08,
              pulm_R =          8.652020e+06,
              heart_R_RA=settings.heart_R_LA,
                     tissues_eta_Rv=0,
              heart_atr_D_0 =                1.517421e+07,
              heart_vntr_D_0 =           1.071050e+01,
              heart_vntr_D_A =           2.125043e+03,
              heart_vntr_TS =           1.120000e-01,
              heart_vntr_TR =           3.800000e-01,
              heart_vntr_Tact= 0.15,
              heart_vntr_D_A_maxAct =           1.374849e+04),
            SystemicComponent(
              brachiocephalic_vein_R90(LimitBackflow=true),
              brachiocephalic_vein_L124(LimitBackflow=true),
              common_iliac_vein_R26(LimitBackflow=true),
              common_iliac_vein_L56(LimitBackflow=true)));
        //      heart_drive_TR_maxAct =          1.221026e-01,
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));

        end CVS_valsalva_PP2;

        model CVS_optimized_BVT
          "Optimized for baseline, VM and tilt. Generated by PostProcess/postprocess_optim.py optimized at Nov 14 22:22:51 CET 2020
 with cost 0.919921 lowest at run 641"
          extends
            ADAN_main.SystemicTree.Identification.Results.CVS_valsalva_PP2(      settings(
              syst_tissues_hydrostaticLevel_correction=0.8,
              HR_max=2.707,
              V_PV_init=3.75e-05,
              heart_R_LA=6213404,
              heart_R_vlv=1627.735,
              heart_atr_D_A=36810000,
              heart_vntr_k_passive =          3.475000e+01,
              heart_vntr_xi_Vw=0.9639875,
              pulm_R=7256414,
              syst_TPR=128212500,
              syst_art_k_E=0.3973268,
              tissues_eta_C=0.3758013,
              tissues_eta_Ra=2.445225,
              veins_gamma=0.365625,
              tissues_SV_nom=0.000695,
              heart_atr_D_0 =     18209050,
              heart_vntr_D_0= 11.78155,
              heart_vntr_D_A= 1487.53,
              heart_vntr_TS =           8.200000e-02,
              heart_vntr_TR =           4.100000e-01,
                heart_vntr_D_A_maxAct( displayUnit="Pa/m3") = 7000),
                                        condHeartPhi(uMin=0.2));
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false)));

        end CVS_optimized_BVT;

        model CVS_optimized_exercise "Generated by PostProcess/postprocess_optim.py optimized at Nov 16 12:35:32 CET 2020
 with cost 0.143862 lowest at run 91"
          extends SteadyState.CVS_optimized_BVT_init(
            settings(
              chi_phi =          9.210938e-01,
              pulm_R =          3.628209e+06,
              pulm_q_nom_maxq =          4.958000e-04,
              tissues_chi_Ra =         1.468800e+01,
              tissues_chi_C =         -1.800000e-01), pulmonaryComponent(r_pa(
                  useNonlinearResistance=true)));
        end CVS_optimized_exercise;

        model tset
          extends CVS_optimized_exercise(
            SystemicComponent(
              ulnar_T2_L90(UseExercise=false),
              radial_T1_L92(UseExercise=false),
              vertebral_L2(UseExercise=false),
              ulnar_T2_R42(UseExercise=false),
              radial_T1_R44(UseExercise=false),
              internal_carotid_R8_C(UseExercise=false),
              external_carotid_T2_R26(UseExercise=false),
              vertebral_R272(UseExercise=false),
              UseExerciseInput=true,
              cardiac_tissue(UseExercise=true),
              internal_iliac_T1_R218(UseExercise=true),
              profundus_T2_R224(UseExercise=true),
              anterior_tibial_T3_R230(UseExercise=true),
              posterior_tibial_T4_R236(UseExercise=true),
              posterior_tibial_T4_L214(UseExercise=true),
              anterior_tibial_T3_L208(UseExercise=true),
              profundus_T2_L202(UseExercise=true),
              internal_iliac_T1_L196(UseExercise=true)),
            condHRPhi(disconnected=false),
            phi_fixed(
              amplitude=settings.chi_phi - settings.phi0,
              rising(displayUnit="s") = 1,
              width(displayUnit="s") = 100,
              falling(displayUnit="s") = 0,
              period(displayUnit="s") = 60,
              nperiod=-1,
              offset=settings.phi0,
              startTime=10),
            condHeartPhi(disconnected=false),
            settings(chi_phi=0.9),
            useAutonomousPhi(y=false));
          replaceable Modelica.Blocks.Sources.Ramp Exercise(
            offset=0,
            startTime=10,
            height=1,
            duration=1) constrainedby Modelica.Blocks.Interfaces.SO
            annotation (Placement(transformation(extent={{-100,52},{-80,72}})));
          output Modelica.Units.SI.Time TEjection=heartComponent.aorticValve.Ts;
          output Modelica.Units.SI.Time TFilling=heartComponent.mitralValve.Ts;
        equation
          connect(Exercise.y, SystemicComponent.exercise_input) annotation (
              Line(points={{-79,62},{-34,62},{-34,36},{-28,36}}, color={0,0,127}));
          annotation (experiment(
              StopTime=90,
              Interval=0.005,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end tset;

        model AdjustPVloop_optim "Generated by PostProcess/postprocess_optim.py optimized at Nov 21 23:12:53 CET 2020
 with cost 0.018744 lowest at run 3995"
          extends Auxiliary.partialCVS_optimized_ss(
            settings(
              V_PV_init =          0,
              heart_R_vlv =          2.044023e+04,
              heart_R_LA =          3.044654e+06,
              heart_atr_D_A =          5.521500e+07,
              heart_vntr_xi_Vw =          9.014874e-01,
              heart_vntr_xi_AmRef =          1.111598e+00,
              heart_vntr_k_passive =          3.725000e+01,
              heart_vntr_Lsref =          1.900000e+00,
              heart_atr_D_0 =                1.405512e+07,
              heart_atr_TS =                1.882500e-01,
              heart_atr_TR =                2.631250e-01,
              heart_vntr_D_0 =           1.815655e+01,
              heart_vntr_D_A =           2.846905e+03,
              heart_vntr_TS =           8.825000e-02,
              heart_vntr_TR =           2.975000e-01,
              heart_vntr_Tact =           8.000000e-02));
        end AdjustPVloop_optim;

        model CVS_fb_i_optEffectors "Generated by PostProcess/postprocess_optim.py optimized at Nov 26 23:23:27 CET 2020
 with cost 1.296159 lowest at run 761"
          extends SteadyState.CVS_baseline_fastBaro_init(
            settings(
              chi_phi =          8.835938e-01,
              heart_vntr_D_A_maxAct =          1.082188e+04,
              heart_vntr_D_0_maxAct =          4.215625e-04,
              heart_vntr_TS_maxAct =          7.477408e-02,
              heart_vntr_TR_maxAct =          9.597688e-02,
              eta_vc =          2.201054e-01,
              tissues_eta_Ra =          1.245225e+00,
              tissues_eta_C =          5.058013e-01,
              tissues_chi_Ra =         1.460206e+01,
              tissues_chi_C =         -3.262500e-01));

        end CVS_fb_i_optEffectors;

        model OlufsenTriSeg_optimized6 "Generated by PostProcess/postprocess_optim.py optimized at Jun 10 19:07:04 CEST 2021
 with cost 0.043966 lowest at run 2590"
          extends ADAN_main.SystemicTree.Identification.SingleModelRun.CVS_baseline_reoptim(settings(
              V_PV_init =          -1.000000e-04,
              heart_R_LA =          1.992534e+06,
              heart_R_vlv =          8.006779e+05,
              heart_vntr_D_0 =          7.479470e+00,
              heart_vntr_D_A =          1.301658e+03,
              heart_vntr_TS =          3.390625e-01,
              heart_vntr_TR =          3.731250e-01,
              heart_atr_D_0 =          2.866584e+07,
              heart_atr_D_A =          6.237524e+07,
              syst_TPR =          1.291340e+08,
              syst_TR_frac =          6.072944e+00,
              pulm_C_PA =          1.435189e-08,
              pulm_R =          9.796150e+06), heartComponent(aorticValve(
              _Ron =                            6.988798e+05)),
            useAutonomousPhi(y=true));

          annotation (experiment(
              StopTime=600,
              Interval=0.04,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end OlufsenTriSeg_optimized6;

        model Combined_optimized "Generated by PostProcess/postprocess_optim.py optimized at Jun 14 23:17:37 CEST 2021
  with cost 68.059672 lowest at run 157 for CombinedModels_FMUs_ExceptBaseline"
          extends
            ADAN_main.SystemicTree.Identification.SteadyState.OlufsenTriSeg_optimized3_init(      settings(
              heart_vntr_D_A_maxAct =          7.396880e+03,
              heart_vntr_D_0_maxAct =          1.049063e-03,
              heart_vntr_TS_maxAct =          3.477405e-02,
              heart_vntr_TR_maxAct =          1.459769e-01,
              eta_vc =          1.651054e-01,
              tissues_eta_Ra =          1.145225e+00,
              tissues_eta_Rv =          4.625000e-01,
              tissues_eta_C =          4.608013e-01,
              tissues_chi_Ra =         5.000000e+01,
              tissues_chi_C =         4.575000e-01));

          annotation ();
        end Combined_optimized;

        model CVS_EDPVR "Generated by PostProcess/postprocess_optim.py optimized at Jun 17 12:35:28 CEST 2021
 with cost 7335.543945 lowest at run 777"
          extends ADAN_main.SystemicTree.Identification.Results.Combined_optimized(settings(
              heart_vntr_k_passive=5.000000e+00,
              heart_vntr_SLcollagen=2.087500e+00,
              heart_vntr_PConcollagen=2.642812e+01,
              heart_vntr_PExpcollagen=2.481250e+00));
        end CVS_EDPVR;

        model CVS_reoptimizeBaseline7_result "Generated by PostProcess/postprocess_optim.py optimized at Jun 17 20:43:31 CEST 2021
 with cost 0.226810 lowest at run 435"
          extends SingleModelRun.CVS_reoptimizeBaseline7(
            settings(
              V_PV_init=0,
              heart_R_LA =          1.655068e+06,
              heart_R_vlv =          7.723515e+05,
              heart_vntr_D_0 =          7.479470e+00,
              heart_vntr_D_A =          1.298533e+03,
              heart_vntr_TS =          3.246875e-01,
              heart_vntr_TR =          4.031250e-01,
              heart_atr_D_0 =          2.651364e+07,
              heart_atr_D_A =          7.621357e+07,
              syst_TPR =          1.287333e+08,
              syst_TR_frac =          5.227710e+00,
              baro_tau_s=10,
              pulm_C_PA =          1.635189e-08,
              pulm_R =          1.019753e+07),
            heartComponent(aorticValve(
              _Ron =                            7.971886e+05)),
            useAutonomousPhi(y=true));

          annotation (experiment(
              StopTime=20,
              Interval=0.01,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_reoptimizeBaseline7_result;

        model CVS_reoptimizeBaseline7_Comb_result "Generated by PostProcess/postprocess_optim.py optimized at Jun 18 16:01:25 CEST 2021
 with cost 51.959256 lowest at run 544"
          extends CVS_reoptimizeBaseline7_result(settings(
              heart_vntr_D_A_maxAct =          4.600005e+03,
              heart_vntr_D_0_maxAct =          1.225000e-03,
              heart_vntr_TS_maxAct =          1.047740e-01,
              heart_vntr_TR_maxAct =          7.597690e-02,
              eta_vc =          2.101054e-01,
              tissues_eta_Ra =          3.145225e+00,
              tissues_eta_Rv =          2.806250e+00,
              tissues_eta_C =          5.708013e-01,
              tissues_chi_Ra =          2.481250e+01,
              tissues_chi_Rv =          1.384375e+01,
              tissues_chi_C =          -3.125000e-02));

        end CVS_reoptimizeBaseline7_Comb_result;

        model HFpEF7_run1 "Generated by PostProcess/postprocess_optim.py optimized at Jul 30 01:07:50 CEST 2021
 with cost 5.173987 lowest at run 1123"
          extends ADAN_main.SystemicTree.Identification.SingleModelRun.HFpEf7(settings(
              pulm_C_PA =          1.635198e-09,
              heart_vntr_xi_AmRef =          8.356250e-01,
              syst_TPR =          4.202330e+08,
              syst_TR_frac =          5.958773e+00,
              heart_vntr_D_A =          1.430413e+03,
              syst_art_k_E =          1.002017e+00,
              V_PV_init =          1.987499e-04,
              chi_phi =          2.550000e-01,
              heart_R_vlv =          9.521763e+04));

          annotation ();
        end HFpEF7_run1;

        model HFpEF7_run2 "Generated by PostProcess/postprocess_optim.py optimized at Aug 02 18:45:39 CEST 2021
 with cost 4.731281 lowest at run 385"
          extends ADAN_main.SystemicTree.Identification.SingleModelRun.HFpEf7(settings(
              pulm_C_PA =          1.635198e-09,
              heart_vntr_xi_AmRef =          8.343750e-01,
              syst_TPR =          4.179803e+08,
              syst_TR_frac =          5.975109e+00,
              heart_vntr_D_A =          1.430413e+03,
              syst_art_k_E =          9.976140e-01,
              V_PV_init =          1.974999e-04,
              chi_phi =          2.543750e-01,
              heart_R_vlv =          9.521763e+04,
              heart_R_LA =          1.489561e+06));

          annotation (experiment(
              StopTime=40,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end HFpEF7_run2;

        model SimpleExercise_ident_optimized "Generated by PostProcess/postprocess_optim.py optimized at Dec 10 14:38:22 CET 2021
 with cost 0.046760 lowest at run 2578"
          extends ADAN_main.SystemicTree.Auxiliary.partialCVSbaseline( settings(
              V_PV_init=0,
              heart_R_AV(displayUnit="(mmHg.min)/l") = 2269376,
              heart_R_LA(displayUnit="(mmHg.min)/l") = 628658,
              heart_R_vlv(displayUnit="(mmHg.min)/l") = 718206.6,
              heart_vntr_D_0 =          1.231875e+01,
              heart_vntr_D_A =          7.985938e+02,
              heart_vntr_TS =          3.284375e-01,
              heart_vntr_TR =          3.131250e-01,
              heart_atr_D_0=31099160,
              heart_atr_D_A=93356270,
              syst_TPR=127631500,
              syst_TR_frac =          3.270902e+00,
              baro_fsn(displayUnit="Hz") = settings.baro_f1*10.23 - 0.00043,
              baro_f1=0.003625,
              pulm_C_PA=2.439877e-08,
              pulm_R =          9.340364e+06,
              syst_art_k_E=0.4935769),               heartComponent(aorticValve(_Ron(
                    displayUnit="(Pa.s)/m3") = settings.heart_R_AV)),
            useAutonomousPhi(y=true));

        end SimpleExercise_ident_optimized;
      end Results;

      package SteadyState "Contains steady state initialization"
        partial model Baseline_init
          "Steady state initialization from 2020-06-18 16:51:11.852451 at time 1599.0342"

          extends Auxiliary.partialCVS_outputs(
                SystemicComponent(
                baroreflex_system(
                baroreflex(phi(start=0.2572703, fixed=true), phi_mean(start=
                        0.25178778, fixed=true)),
                baroreceptor_aortic(
                  fbr_int(start=20.884357, fixed=true),
                  epsilon(start=1.6186143, fixed=true),
                  s(start=0.7874531, fixed=true)),
                baroreceptor_carotid(
                  fbr_int(start=12.521449, fixed=true),
                  epsilon(start=1.2044563, fixed=true),
                  s(start=0.87255114, fixed=true))),
              ascending_aorta_A(
                q(start=4.8636994e-06, fixed=true),
                vol1(start=8.486643e-06, fixed=true),
                vol2(start=8.487123e-06, fixed=true)),
              ascending_aorta_B(volume(start=2.5651789e-05, fixed=true)),
              ascending_aorta_C(volume(start=2.3728871e-05, fixed=true)),
              ascending_aorta_D(volume(start=2.1668076e-05, fixed=true)),
              aortic_arch_C2(volume(start=1.9829246e-05, fixed=true)),
              brachiocephalic_trunk_C4(volume(start=1.3439195e-05, fixed=true)),
              aortic_arch_C46(volume(start=1.1754529e-05, fixed=true)),
              aortic_arch_C64(volume(start=8.073146e-06, fixed=true)),
              aortic_arch_C94(volume(start=4.4437267e-05, fixed=true)),
              thoracic_aorta_C96(volume(start=7.989899e-06, fixed=true)),
              thoracic_aorta_C100(volume(start=6.1512296e-06, fixed=true)),
              thoracic_aorta_C104(volume(start=1.1611724e-05, fixed=true)),
              thoracic_aorta_C108(volume(start=3.8171206e-06, fixed=true)),
              thoracic_aorta_C112(volume(start=6.382146e-05, fixed=true)),
              abdominal_aorta_C114(volume(start=1.3187687e-06, fixed=true)),
              abdominal_aorta_C136(volume(start=5.5430423e-06, fixed=true)),
              abdominal_aorta_C164(volume(start=1.6458406e-06, fixed=true)),
              abdominal_aorta_C176(volume(start=4.4301096e-06, fixed=true)),
              abdominal_aorta_C188(volume(start=1.780948e-05, fixed=true)),
              abdominal_aorta_C192(volume(start=1.1099031e-05, fixed=true)),
              celiac_trunk_C116(volume(start=0.0003708804, fixed=true)),
              renal_L166(volume(start=0.00033502583, fixed=true)),
              renal_R178(volume(start=0.00033201746, fixed=true)),
              common_iliac_R216(volume(start=9.2076625e-06, fixed=true)),
              internal_iliac_T1_R218(volume(start=0.00018236261, fixed=true)),
              external_iliac_R220(volume(start=5.103041e-06, fixed=true)),
              femoral_R222(volume(start=1.4587395e-06, fixed=true)),
              profundus_T2_R224(volume(start=0.00020914365, fixed=true)),
              femoral_R226(volume(start=1.211242e-05, fixed=true)),
              popliteal_R228(volume(start=3.712141e-06, fixed=true)),
              anterior_tibial_T3_R230(volume(start=2.7569035e-05, fixed=true)),
              popliteal_R232(volume(start=1.8462224e-07, fixed=true)),
              tibiofibular_trunk_R234(volume(start=7.505815e-07, fixed=true)),
              posterior_tibial_T4_R236(volume(start=2.9969031e-05, fixed=true)),
              common_iliac_L194(volume(start=8.803155e-06, fixed=true)),
              internal_iliac_T1_L196(volume(start=0.00018236559, fixed=true)),
              external_iliac_L198(volume(start=5.102595e-06, fixed=true)),
              femoral_L200(volume(start=1.4586249e-06, fixed=true)),
              profundus_T2_L202(volume(start=0.00020914653, fixed=true)),
              femoral_L204(volume(start=1.2112503e-05, fixed=true)),
              popliteal_L206(volume(start=3.712197e-06, fixed=true)),
              anterior_tibial_T3_L208(volume(start=2.7569402e-05, fixed=true)),
              popliteal_L210(volume(start=1.846236e-07, fixed=true)),
              tibiofibular_trunk_L212(volume(start=7.5061035e-07, fixed=true)),
              posterior_tibial_T4_L214(volume(start=2.99695e-05, fixed=true)),
              subclavian_R28(volume(start=2.057214e-06, fixed=true)),
              subclavian_R30(volume(start=2.6961873e-06, fixed=true)),
              axillary_R32(volume(start=3.0978467e-06, fixed=true)),
              brachial_R34(volume(start=4.5573524e-06, fixed=true)),
              ulnar_T2_R36(volume(start=2.3959424e-07, fixed=true)),
              ulnar_T2_R42(volume(start=6.303102e-05, fixed=true)),
              radial_T1_R44(volume(start=5.1765324e-05, fixed=true)),
              subclavian_L66(volume(start=4.8977213e-06, fixed=true)),
              subclavian_L78(volume(start=2.0026007e-06, fixed=true)),
              axillary_L80(volume(start=3.0978065e-06, fixed=true)),
              brachial_L82(volume(start=8.374877e-07, fixed=true)),
              ulnar_T2_L84(volume(start=2.3920632e-07, fixed=true)),
              ulnar_T2_L90(volume(start=6.29952e-05, fixed=true)),
              radial_T1_L92(volume(start=5.486282e-05, fixed=true)),
              common_carotid_R6_A(volume(start=5.093154e-06, fixed=true)),
              common_carotid_R6_B(volume(start=4.3428304e-06, fixed=true)),
              common_carotid_R6_C(volume(start=3.2424443e-06, fixed=true)),
              internal_carotid_R8_A(volume(start=1.2626405e-06, fixed=true)),
              internal_carotid_R8_B(volume(start=7.9897427e-07, fixed=true)),
              internal_carotid_R8_C(volume(start=7.465449e-05, fixed=true)),
              external_carotid_T2_R26(volume(start=7.4952e-05, fixed=true)),
              common_carotid_L48_A(volume(start=5.51679e-06, fixed=true)),
              common_carotid_L48_B(volume(start=4.8359498e-06, fixed=true)),
              common_carotid_L48_C(volume(start=4.2864444e-06, fixed=true)),
              common_carotid_L48_D(volume(start=3.4662353e-06, fixed=true)),
              internal_carotid_L50_A(volume(start=1.2615557e-06, fixed=true)),
              internal_carotid_L50_B(volume(start=7.9833035e-07, fixed=true)),
              internal_carotid_L50_C(volume(start=7.4653006e-05, fixed=true)),
              external_carotid_T2_L62(volume(start=7.494429e-05, fixed=true)),
              vertebral_L2(volume(start=6.889704e-05, fixed=true)),
              vertebral_R272(volume(start=6.890947e-05, fixed=true)),
              superior_vena_cava_C2(volume(start=2.0875075e-06, fixed=true)),
              superior_vena_cava_C88(volume(start=3.597201e-06, fixed=true)),
              inferior_vena_cava_C8(volume(start=3.1307832e-06, fixed=true)),
              hepatic_vein_T1_C10(volume(start=1.2275017e-06, fixed=true)),
              inferior_vena_cava_C12(volume(start=8.494004e-06, fixed=true)),
              inferior_vena_cava_C16(volume(start=6.67927e-06, fixed=true)),
              renal_vein_T1_R18(volume(start=1.96807e-06, fixed=true)),
              inferior_vena_cava_C20(volume(start=4.6599015e-07, fixed=true)),
              renal_vein_T1_L22(volume(start=1.7389613e-06, fixed=true)),
              inferior_vena_cava_C24(volume(start=1.8583023e-05, fixed=true)),
              common_iliac_vein_L56(volume(start=4.5593533e-06, fixed=true)),
              common_iliac_vein_R26(volume(start=4.190835e-06, fixed=true)),
              external_iliac_vein_R28(volume(start=6.112059e-07, fixed=true)),
              internal_iliac_vein_T1_R30(volume(start=2.6143782e-06, fixed=true)),
              external_iliac_vein_R32(volume(start=7.088575e-06, fixed=true)),
              femoral_vein_R34(volume(start=3.0814348e-07, fixed=true)),
              femoral_vein_R38(volume(start=2.4424287e-06, fixed=true)),
              profunda_femoris_vein_T2_R40(volume(start=6.7587735e-06, fixed=
                      true)),
              femoral_vein_R42(volume(start=1.7259254e-05, fixed=true)),
              femoral_vein_R46(volume(start=9.50517e-07, fixed=true)),
              popliteal_vein_R48(volume(start=3.8663393e-06, fixed=true)),
              anterior_tibial_vein_T4_R50(volume(start=1.0955602e-06, fixed=
                      true)),
              popliteal_vein_R52(volume(start=8.6003234e-07, fixed=true)),
              posterior_tibial_vein_T6_R54(volume(start=1.6515086e-06, fixed=
                      true)),
              external_iliac_vein_L58(volume(start=6.1195806e-07, fixed=true)),
              internal_iliac_vein_T1_L60(volume(start=2.689039e-06, fixed=true)),
              external_iliac_vein_L62(volume(start=6.9593e-06, fixed=true)),
              femoral_vein_L64(volume(start=3.602426e-07, fixed=true)),
              femoral_vein_L68(volume(start=2.442452e-06, fixed=true)),
              profunda_femoris_vein_T2_L70(volume(start=6.758814e-06, fixed=
                      true)),
              femoral_vein_L72(volume(start=1.725943e-05, fixed=true)),
              femoral_vein_L76(volume(start=9.505208e-07, fixed=true)),
              popliteal_vein_L78(volume(start=3.866381e-06, fixed=true)),
              anterior_tibial_vein_T4_L80(volume(start=1.0956015e-06, fixed=
                      true)),
              popliteal_vein_L82(volume(start=8.60047e-07, fixed=true)),
              posterior_tibial_vein_T6_L84(volume(start=1.6515473e-06, fixed=
                      true)),
              brachiocephalic_vein_R90(volume(start=4.229372e-06, fixed=true)),
              brachiocephalic_vein_L124(volume(start=7.92589e-06, fixed=true)),
              vertebral_vein_R92(volume(start=2.6555442e-06, fixed=true)),
              brachiocephalic_vein_R94(volume(start=9.587964e-07, fixed=true)),
              subclavian_vein_R96(volume(start=4.662005e-07, fixed=true)),
              internal_jugular_vein_R122(volume(start=1.84241e-05, fixed=true)),
              external_jugular_vein_R98(volume(start=1.2918364e-06, fixed=true)),
              subclavian_vein_R100(volume(start=1.9066546e-06, fixed=true)),
              axillary_vein_R102(volume(start=6.6998086e-06, fixed=true)),
              brachial_vein_R104(volume(start=1.3067267e-06, fixed=true)),
              brachial_vein_R114(volume(start=1.1744931e-06, fixed=true)),
              brachial_vein_R108(volume(start=1.8046204e-07, fixed=true)),
              ulnar_vein_T7_R110(volume(start=1.5004769e-06, fixed=true)),
              brachial_vein_R118(volume(start=1.13466605e-07, fixed=true)),
              radial_vein_T3_R120(volume(start=9.488648e-07, fixed=true)),
              vertebral_vein_L126(volume(start=2.4835522e-06, fixed=true)),
              brachiocephalic_vein_L128(volume(start=4.8452915e-07, fixed=true)),
              subclavian_vein_L130(volume(start=4.145789e-07, fixed=true)),
              internal_jugular_vein_L156(volume(start=1.1182993e-05, fixed=true)),
              external_jugular_vein_L132(volume(start=1.2667307e-06, fixed=true)),
              subclavian_vein_L134(volume(start=1.8581874e-06, fixed=true)),
              axillary_vein_L136(volume(start=6.7759074e-06, fixed=true)),
              brachial_vein_L138(volume(start=1.3067234e-06, fixed=true)),
              brachial_vein_L148(volume(start=1.1765305e-06, fixed=true)),
              brachial_vein_L142(volume(start=1.804621e-07, fixed=true)),
              ulnar_vein_T7_L144(volume(start=1.500295e-06, fixed=true)),
              brachial_vein_L152(volume(start=1.1368223e-07, fixed=true)),
              radial_vein_T3_L154(volume(start=9.564093e-07, fixed=true)),
              mesenteric_artery(volume(start=6.4146498e-06, fixed=true)),
              coronary_arteries(volume(start=3.6568196e-08, fixed=true)),
              cardiac_tissue(volume(start=0.00012163581, fixed=true)),
              coronary_veins(volume(start=2.3587129e-08, fixed=true)),
              brachial_L82_HeartLevel(volume(start=3.716202e-06, fixed=true)),
              splanchnic_tissue(
                               volume(start=0.0002689703, fixed=true)),
              splanchnic_vein(
                             volume(start=1.0308225e-05, fixed=true))),
              heartComponent(
              mitralValve(
                BP_max(start=0.0, fixed=true),
                BP_min(start=39996.0, fixed=true),
                CO_acc(start=0.0, fixed=true)),
              aorticValve(
                BP_max(start=0.0, fixed=true),
                BP_min(start=39996.0, fixed=true),
                CO_acc(start=0.0, fixed=true)),
                ventricles(
                LV_wall(ym(start=3.9639785, fixed=true), SL(start=2.256391,
                      fixed=true)),
                SEP_wall(SL(start=2.1946723, fixed=true)),
                RV_wall(SL(start=2.3319578, fixed=true)),
                calciumMechanics(cardiac_cycle(start=0.0, fixed=false)),
                V_LV(start=0.00019087098, fixed=true),
                V_RV(start=0.00023394954, fixed=true)),
              ra(volume(start=2.2689272e-05, fixed=true)),
              la(volume(start=4.9317445e-05, fixed=true))),
            pulmonaryComponent(c_pa(volume(start=9.3587405e-05, fixed=true)),
                c_pv(volume(start=1165.9813e-6 + pulmonaryComponent.deadVolume + settings.V_PV_init, fixed=true))),
            settings(initByPressure=false));

          annotation (experiment(
              StopTime=60,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));

        end Baseline_init;

        model TriSeg_OptimizedBaseline_init
          "Steady state initialization from 2020-03-30 16:14:59.259663 at time 300.0 but without heart to allow different hearts"
          extends
            ADAN_main.SystemicTree.Identification.Results.Experiments.TriSeg_OptimizedBaseline(
            SystemicComponent(
              baroreflex_system(
                baroreflex(phi(start=0.25242782, fixed=true), phi_mean(start=
                        0.24990731, fixed=true)),
                baroreceptor_aortic(epsilon(start=1.6187029, fixed=true), s(
                      start=0.92078173, fixed=true)),
                baroreceptor_carotid(epsilon(start=1.2045674, fixed=true), s(
                      start=0.928572, fixed=true))),
              ascending_aorta_A(
                q(start=5.839419e-06, fixed=true),
                vol1(start=8.836174e-06, fixed=true),
                vol2(start=8.836006e-06, fixed=true)),
              ascending_aorta_B(q_in(start=1.1682793e-05, fixed=true), volume(
                    start=2.6326175e-05, fixed=true)),
              ascending_aorta_C(q_in(start=1.9255353e-05, fixed=true), volume(
                    start=2.4346462e-05, fixed=true)),
              ascending_aorta_D(q_in(start=2.8777024e-05, fixed=true), volume(
                    start=2.2223836e-05, fixed=true)),
              aortic_arch_C2(q_in(start=3.7342073e-05, fixed=true), volume(
                    start=2.0328243e-05, fixed=true)),
              brachiocephalic_trunk_C4(q_in(start=-4.6478813e-06, fixed=true),
                  volume(start=1.3770431e-05, fixed=true)),
              aortic_arch_C46(q_in(start=4.9675884e-05, fixed=true), volume(
                    start=1.204468e-05, fixed=true)),
              aortic_arch_C64(q_in(start=5.923267e-05, fixed=true), volume(
                    start=8.268812e-06, fixed=true)),
              aortic_arch_C94(q_in(start=6.015504e-05, fixed=true), volume(
                    start=4.5379373e-05, fixed=true)),
              thoracic_aorta_C96(q_in(start=7.457035e-05, fixed=true), volume(
                    start=8.150293e-06, fixed=true)),
              thoracic_aorta_C100(q_in(start=7.7020246e-05, fixed=true), volume(
                    start=6.2696918e-06, fixed=true)),
              thoracic_aorta_C104(q_in(start=7.8826786e-05, fixed=true), volume(
                    start=1.1815871e-05, fixed=true)),
              thoracic_aorta_C108(q_in(start=8.1928454e-05, fixed=true), volume(
                    start=3.8818694e-06, fixed=true)),
              thoracic_aorta_C112(q_in(start=8.291072e-05, fixed=true), volume(
                    start=6.3746396e-05, fixed=true)),
              abdominal_aorta_C114(q_in(start=8.106238e-05, fixed=true), volume(
                    start=1.3167886e-06, fixed=true)),
              abdominal_aorta_C136(q_in(start=6.968905e-05, fixed=true), volume(
                    start=5.526616e-06, fixed=true)),
              abdominal_aorta_C164(q_in(start=6.0967322e-05, fixed=true),
                  volume(start=1.6402977e-06, fixed=true)),
              abdominal_aorta_C176(q_in(start=5.063662e-05, fixed=true), volume(
                    start=4.4102026e-06, fixed=true)),
              abdominal_aorta_C188(q_in(start=4.0141455e-05, fixed=true),
                  volume(start=1.7637505e-05, fixed=true)),
              abdominal_aorta_C192(q_in(start=3.7191407e-05, fixed=true),
                  volume(start=1.096036e-05, fixed=true)),
              celiac_trunk_C116(volume(start=0.00038408526, fixed=true), Ra_phi(
                    start=806147460.0, fixed=true)),
              renal_L166(volume(start=0.00034694799, fixed=true), Ra_phi(start=
                      892520400.0, fixed=true)),
              renal_R178(volume(start=0.00034383047, fixed=true), Ra_phi(start=
                      900561100.0, fixed=true)),
              common_iliac_R216(q_in(start=1.7510723e-05, fixed=true), volume(
                    start=9.071526e-06, fixed=true)),
              internal_iliac_T1_R218(volume(start=0.0001888362, fixed=true),
                  Ra_phi(start=1638725900.0, fixed=true)),
              external_iliac_R220(q_in(start=9.648119e-06, fixed=true), volume(
                    start=5.0599556e-06, fixed=true)),
              femoral_R222(q_in(start=8.889571e-06, fixed=true), volume(start=
                      1.4475602e-06, fixed=true)),
              profundus_T2_R224(volume(start=0.00021656118, fixed=true), Ra_phi(
                    start=1428032600.0, fixed=true)),
              femoral_R226(q_in(start=2.2290076e-06, fixed=true), volume(start=
                      1.2139374e-05, fixed=true)),
              popliteal_R228(q_in(start=1.8943311e-06, fixed=true), volume(
                    start=3.7248712e-06, fixed=true)),
              anterior_tibial_T3_R230(volume(start=2.8548282e-05, fixed=true),
                  Ra_phi(start=11106920000.0, fixed=true)),
              popliteal_R232(q_in(start=9.839043e-07, fixed=true), volume(start=
                     1.8498386e-07, fixed=true)),
              tibiofibular_trunk_R234(q_in(start=9.823952e-07, fixed=true),
                  volume(start=7.520513e-07, fixed=true)),
              posterior_tibial_T4_R236(volume(start=3.1023515e-05, fixed=true),
                  Ra_phi(start=9996229000.0, fixed=true)),
              common_iliac_L194(q_in(start=1.7328166e-05, fixed=true), volume(
                    start=8.675371e-06, fixed=true)),
              internal_iliac_T1_L196(volume(start=0.00018883939, fixed=true),
                  Ra_phi(start=1638725900.0, fixed=true)),
              external_iliac_L198(q_in(start=9.606166e-06, fixed=true), volume(
                    start=5.060328e-06, fixed=true)),
              femoral_L200(q_in(start=8.862123e-06, fixed=true), volume(start=
                      1.4476739e-06, fixed=true)),
              profundus_T2_L202(volume(start=0.00021656416, fixed=true), Ra_phi(
                    start=1428032600.0, fixed=true)),
              femoral_L204(q_in(start=2.2043087e-06, fixed=true), volume(start=
                      1.2140833e-05, fixed=true)),
              popliteal_L206(q_in(start=1.8895955e-06, fixed=true), volume(
                    start=3.7252948e-06, fixed=true)),
              anterior_tibial_T3_L208(volume(start=2.8548666e-05, fixed=true),
                  Ra_phi(start=11106920000.0, fixed=true)),
              popliteal_L210(q_in(start=9.836535e-07, fixed=true), volume(start=
                     1.8499564e-07, fixed=true)),
              tibiofibular_trunk_L212(q_in(start=9.822827e-07, fixed=true),
                  volume(start=7.521222e-07, fixed=true)),
              posterior_tibial_T4_L214(volume(start=3.1023963e-05, fixed=true),
                  Ra_phi(start=9996229000.0, fixed=true)),
              subclavian_R28(q_in(start=2.5809757e-06, fixed=true), volume(
                    start=2.1047795e-06, fixed=true)),
              subclavian_R30(q_in(start=1.1997369e-06, fixed=true), volume(
                    start=2.7539152e-06, fixed=true)),
              axillary_R32(q_in(start=2.0882708e-06, fixed=true), volume(start=
                      3.1501254e-06, fixed=true)),
              brachial_R34(q_in(start=2.8440086e-06, fixed=true), volume(start=
                      4.602804e-06, fixed=true)),
              ulnar_T2_R36(q_in(start=1.83023e-06, fixed=true), volume(start=
                      2.4088365e-07, fixed=true)),
              ulnar_T2_R42(volume(start=6.525415e-05, fixed=true), Ra_phi(start=
                     4760108500.0, fixed=true)),
              radial_T1_R44(volume(start=5.3595897e-05, fixed=true), Ra_phi(
                    start=5880134000.0, fixed=true)),
              subclavian_L66(q_in(start=2.086007e-06, fixed=true), volume(start=
                     5.001379e-06, fixed=true)),
              subclavian_L78(q_in(start=1.5389485e-06, fixed=true), volume(
                    start=2.0415234e-06, fixed=true)),
              axillary_L80(q_in(start=2.11903e-06, fixed=true), volume(start=
                      3.1477703e-06, fixed=true)),
              brachial_L82(q_in(start=3.2700698e-06, fixed=true), volume(start=
                      8.458266e-07, fixed=true)),
              ulnar_T2_L84(q_in(start=1.8115464e-06, fixed=true), volume(start=
                      2.404943e-07, fixed=true)),
              ulnar_T2_L90(volume(start=6.521887e-05, fixed=true), Ra_phi(start=
                     4760108500.0, fixed=true)),
              radial_T1_L92(volume(start=5.680603e-05, fixed=true), Ra_phi(
                    start=5553460000.0, fixed=true)),
              common_carotid_R6_A(q_in(start=-2.08054e-06, fixed=true), volume(
                    start=5.252363e-06, fixed=true)),
              common_carotid_R6_B(q_in(start=4.1617628e-07, fixed=true), volume(
                    start=4.479313e-06, fixed=true)),
              common_carotid_R6_C(q_in(start=2.5717097e-06, fixed=true), volume(
                    start=3.343093e-06, fixed=true)),
              internal_carotid_R8_A(q_in(start=1.8679876e-06, fixed=true),
                  volume(start=1.2795015e-06, fixed=true)),
              internal_carotid_R8_B(q_in(start=2.1367866e-06, fixed=true),
                  volume(start=8.088382e-07, fixed=true)),
              internal_carotid_R8_C(volume(start=7.7327946e-05, fixed=true),
                  Ra_phi(start=3998491400.0, fixed=true)),
              external_carotid_T2_R26(volume(start=7.7626726e-05, fixed=true),
                  Ra_phi(start=3998491400.0, fixed=true)),
              common_carotid_L48_A(q_in(start=-5.0922313e-06, fixed=true),
                  volume(start=5.6897784e-06, fixed=true)),
              common_carotid_L48_B(q_in(start=-2.4462863e-06, fixed=true),
                  volume(start=4.9979903e-06, fixed=true)),
              common_carotid_L48_C(q_in(start=1.8725304e-08, fixed=true),
                  volume(start=4.4365547e-06, fixed=true)),
              common_carotid_L48_D(q_in(start=2.2919346e-06, fixed=true),
                  volume(start=3.5894836e-06, fixed=true)),
              internal_carotid_L50_A(q_in(start=1.8402595e-06, fixed=true),
                  volume(start=1.2811333e-06, fixed=true)),
              internal_carotid_L50_B(q_in(start=2.1343728e-06, fixed=true),
                  volume(start=8.0986047e-07, fixed=true)),
              internal_carotid_L50_C(volume(start=7.7325014e-05, fixed=true),
                  Ra_phi(start=3998491400.0, fixed=true)),
              external_carotid_T2_L62(volume(start=7.7617675e-05, fixed=true),
                  Ra_phi(start=3998491400.0, fixed=true)),
              vertebral_L2(volume(start=7.135711e-05, fixed=true), Ra_phi(start=
                     4346186000.0, fixed=true)),
              vertebral_R272(volume(start=7.137038e-05, fixed=true), Ra_phi(
                    start=4346186000.0, fixed=true)),
              superior_vena_cava_C2(volume(start=2.114537e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              superior_vena_cava_C88(volume(start=3.6438926e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              inferior_vena_cava_C8(volume(start=3.171404e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              hepatic_vein_T1_C10(volume(start=1.24343e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              inferior_vena_cava_C12(volume(start=8.605271e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              inferior_vena_cava_C16(volume(start=6.76749e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              renal_vein_T1_R18(volume(start=1.9940815e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              inferior_vena_cava_C20(volume(start=4.7214826e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              renal_vein_T1_L22(volume(start=1.7619622e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              inferior_vena_cava_C24(volume(start=1.8833736e-05, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              common_iliac_vein_L56(volume(start=4.622335e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              common_iliac_vein_R26(volume(start=4.2486085e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              external_iliac_vein_R28(volume(start=6.196559e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              internal_iliac_vein_T1_R30(volume(start=2.6506473e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              external_iliac_vein_R32(volume(start=7.189577e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              femoral_vein_R34(volume(start=3.1254277e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              femoral_vein_R38(volume(start=2.4778385e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              profunda_femoris_vein_T2_R40(volume(start=6.863649e-06, fixed=
                      true), compliant_vessel(A(start=0.25, fixed=true))),
              femoral_vein_R42(volume(start=1.7528952e-05, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              femoral_vein_R46(volume(start=9.653868e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              popliteal_vein_R48(volume(start=3.9294423e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              anterior_tibial_vein_T4_R50(volume(start=1.1222011e-06, fixed=
                      true), compliant_vessel(A(start=0.25, fixed=true))),
              popliteal_vein_R52(volume(start=8.7411075e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              posterior_tibial_vein_T6_R54(volume(start=1.6894182e-06, fixed=
                      true), compliant_vessel(A(start=0.25, fixed=true))),
              external_iliac_vein_L58(volume(start=6.2043574e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              internal_iliac_vein_T1_L60(volume(start=2.726427e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              external_iliac_vein_L62(volume(start=7.058595e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              femoral_vein_L64(volume(start=3.6539438e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              femoral_vein_L68(volume(start=2.4779206e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              profunda_femoris_vein_T2_L70(volume(start=6.8638474e-06, fixed=
                      true), compliant_vessel(A(start=0.25, fixed=true))),
              femoral_vein_L72(volume(start=1.7529532e-05, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              femoral_vein_L76(volume(start=9.654127e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              popliteal_vein_L78(volume(start=3.9295724e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              anterior_tibial_vein_T4_L80(volume(start=1.1222484e-06, fixed=
                      true), compliant_vessel(A(start=0.25, fixed=true))),
              popliteal_vein_L82(volume(start=8.7414514e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              posterior_tibial_vein_T6_L84(volume(start=1.6894827e-06, fixed=
                      true), compliant_vessel(A(start=0.25, fixed=true))),
              brachiocephalic_vein_R90(volume(start=4.2845304e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              brachiocephalic_vein_L124(volume(start=8.029972e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              vertebral_vein_R92(volume(start=2.6947143e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              brachiocephalic_vein_R94(volume(start=9.713119e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              subclavian_vein_R96(volume(start=4.722951e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              internal_jugular_vein_R122(volume(start=1.8668003e-05, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              external_jugular_vein_R98(volume(start=1.310319e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              subclavian_vein_R100(volume(start=1.9317124e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              axillary_vein_R102(volume(start=6.7892256e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              brachial_vein_R104(volume(start=1.3315803e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              brachial_vein_R114(volume(start=1.1969923e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              brachial_vein_R108(volume(start=1.8395991e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              ulnar_vein_T7_R110(volume(start=1.5359415e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              brachial_vein_R118(volume(start=1.1565989e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              radial_vein_T3_R120(volume(start=9.721292e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              vertebral_vein_L126(volume(start=2.5198947e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              brachiocephalic_vein_L128(volume(start=4.9089516e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              subclavian_vein_L130(volume(start=4.2003302e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              internal_jugular_vein_L156(volume(start=1.13328215e-05, fixed=
                      true), compliant_vessel(A(start=0.25, fixed=true))),
              external_jugular_vein_L132(volume(start=1.284898e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              subclavian_vein_L134(volume(start=1.8827591e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              axillary_vein_L136(volume(start=6.8669115e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              brachial_vein_L138(volume(start=1.3316622e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              brachial_vein_L148(volume(start=1.1991111e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              brachial_vein_L142(volume(start=1.8397145e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              ulnar_vein_T7_L144(volume(start=1.5358218e-06, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              brachial_vein_L152(volume(start=1.1588341e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              radial_vein_T3_L154(volume(start=9.798491e-07, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              mesenteric_artery(q_in(start=8.406497e-06, fixed=true), volume(
                    start=6.3502157e-06, fixed=true)),
              coronary_arteries(q_in(start=2.8273123e-06, fixed=true), volume(
                    start=3.660767e-08, fixed=true)),
              cardiac_tissue(volume(start=0.0001259706, fixed=true), Ra_phi(
                    start=2499057200.0, fixed=true)),
              coronary_veins(volume(start=2.3916774e-08, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true))),
              brachial_L82_HeartLevel(q_in(start=2.8019003e-06, fixed=true),
                  volume(start=3.7550526e-06, fixed=true)),
              splanchnic_tissue(
                               volume(start=0.00027854717, fixed=true), Ra_phi(
                    start=1110692100.0, fixed=true)),
              splanchnic_vein(
                             volume(start=1.0443861e-05, fixed=true),
                  compliant_vessel(A(start=0.25, fixed=true)))),
            heartComponent(
              ventricles(
                LV_wall(ym(start=3.721515, fixed=true)),
                calciumMechanics(cardiac_cycle(start=1.0, fixed=true)),
                V_LV(start=0.00017003628, fixed=true),
                V_RV(start=0.00018162443, fixed=true)),
              ra(volume(start=9.471555e-06, fixed=true)),
              la(volume(start=3.3479624e-05, fixed=true))),
            pulmonaryComponent(c_pa(volume(start=9.333298e-05, fixed=true)),
                c_pv(volume(start=0.0021523575, fixed=true))),
            settings(initByPressure=false));
          annotation (experiment(
              StopTime=20,
              Interval=0.01,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end TriSeg_OptimizedBaseline_init;

        model OlufsenTriSeg_optimized_steadyState_init
          "Steady state initialization from 2020-06-18 16:51:11.852451 at time 1599.0342"
          extends Results.Experiments.OlufsenTriSeg_optimized(
            SystemicComponent(
              baroreflex_system(
                baroreflex(phi(start=0.2572703, fixed=true), phi_mean(start=
                        0.25178778, fixed=true)),
                baroreceptor_aortic(
                  fbr_int(start=20.884357, fixed=true),
                  epsilon(start=1.6186143, fixed=true),
                  s(start=0.7874531, fixed=true)),
                baroreceptor_carotid(
                  fbr_int(start=12.521449, fixed=true),
                  epsilon(start=1.2044563, fixed=true),
                  s(start=0.87255114, fixed=true))),
              ascending_aorta_A(
                q(start=4.8636994e-06, fixed=true),
                vol1(start=8.486643e-06, fixed=true),
                vol2(start=8.487123e-06, fixed=true)),
              ascending_aorta_B(volume(start=2.5651789e-05, fixed=true)),
              ascending_aorta_C(volume(start=2.3728871e-05, fixed=true)),
              ascending_aorta_D(volume(start=2.1668076e-05, fixed=true)),
              aortic_arch_C2(volume(start=1.9829246e-05, fixed=true)),
              brachiocephalic_trunk_C4(volume(start=1.3439195e-05, fixed=true)),
              aortic_arch_C46(volume(start=1.1754529e-05, fixed=true)),
              aortic_arch_C64(volume(start=8.073146e-06, fixed=true)),
              aortic_arch_C94(volume(start=4.4437267e-05, fixed=true)),
              thoracic_aorta_C96(volume(start=7.989899e-06, fixed=true)),
              thoracic_aorta_C100(volume(start=6.1512296e-06, fixed=true)),
              thoracic_aorta_C104(volume(start=1.1611724e-05, fixed=true)),
              thoracic_aorta_C108(volume(start=3.8171206e-06, fixed=true)),
              thoracic_aorta_C112(volume(start=6.382146e-05, fixed=true)),
              abdominal_aorta_C114(volume(start=1.3187687e-06, fixed=true)),
              abdominal_aorta_C136(volume(start=5.5430423e-06, fixed=true)),
              abdominal_aorta_C164(volume(start=1.6458406e-06, fixed=true)),
              abdominal_aorta_C176(volume(start=4.4301096e-06, fixed=true)),
              abdominal_aorta_C188(volume(start=1.780948e-05, fixed=true)),
              abdominal_aorta_C192(volume(start=1.1099031e-05, fixed=true)),
              celiac_trunk_C116(volume(start=0.0003708804, fixed=true)),
              renal_L166(volume(start=0.00033502583, fixed=true)),
              renal_R178(volume(start=0.00033201746, fixed=true)),
              common_iliac_R216(volume(start=9.2076625e-06, fixed=true)),
              internal_iliac_T1_R218(volume(start=0.00018236261, fixed=true)),
              external_iliac_R220(volume(start=5.103041e-06, fixed=true)),
              femoral_R222(volume(start=1.4587395e-06, fixed=true)),
              profundus_T2_R224(volume(start=0.00020914365, fixed=true)),
              femoral_R226(volume(start=1.211242e-05, fixed=true)),
              popliteal_R228(volume(start=3.712141e-06, fixed=true)),
              anterior_tibial_T3_R230(volume(start=2.7569035e-05, fixed=true)),
              popliteal_R232(volume(start=1.8462224e-07, fixed=true)),
              tibiofibular_trunk_R234(volume(start=7.505815e-07, fixed=true)),
              posterior_tibial_T4_R236(volume(start=2.9969031e-05, fixed=true)),
              common_iliac_L194(volume(start=8.803155e-06, fixed=true)),
              internal_iliac_T1_L196(volume(start=0.00018236559, fixed=true)),
              external_iliac_L198(volume(start=5.102595e-06, fixed=true)),
              femoral_L200(volume(start=1.4586249e-06, fixed=true)),
              profundus_T2_L202(volume(start=0.00020914653, fixed=true)),
              femoral_L204(volume(start=1.2112503e-05, fixed=true)),
              popliteal_L206(volume(start=3.712197e-06, fixed=true)),
              anterior_tibial_T3_L208(volume(start=2.7569402e-05, fixed=true)),
              popliteal_L210(volume(start=1.846236e-07, fixed=true)),
              tibiofibular_trunk_L212(volume(start=7.5061035e-07, fixed=true)),
              posterior_tibial_T4_L214(volume(start=2.99695e-05, fixed=true)),
              subclavian_R28(volume(start=2.057214e-06, fixed=true)),
              subclavian_R30(volume(start=2.6961873e-06, fixed=true)),
              axillary_R32(volume(start=3.0978467e-06, fixed=true)),
              brachial_R34(volume(start=4.5573524e-06, fixed=true)),
              ulnar_T2_R36(volume(start=2.3959424e-07, fixed=true)),
              ulnar_T2_R42(volume(start=6.303102e-05, fixed=true)),
              radial_T1_R44(volume(start=5.1765324e-05, fixed=true)),
              subclavian_L66(volume(start=4.8977213e-06, fixed=true)),
              subclavian_L78(volume(start=2.0026007e-06, fixed=true)),
              axillary_L80(volume(start=3.0978065e-06, fixed=true)),
              brachial_L82(volume(start=8.374877e-07, fixed=true)),
              ulnar_T2_L84(volume(start=2.3920632e-07, fixed=true)),
              ulnar_T2_L90(volume(start=6.29952e-05, fixed=true)),
              radial_T1_L92(volume(start=5.486282e-05, fixed=true)),
              common_carotid_R6_A(volume(start=5.093154e-06, fixed=true)),
              common_carotid_R6_B(volume(start=4.3428304e-06, fixed=true)),
              common_carotid_R6_C(volume(start=3.2424443e-06, fixed=true)),
              internal_carotid_R8_A(volume(start=1.2626405e-06, fixed=true)),
              internal_carotid_R8_B(volume(start=7.9897427e-07, fixed=true)),
              internal_carotid_R8_C(volume(start=7.465449e-05, fixed=true)),
              external_carotid_T2_R26(volume(start=7.4952e-05, fixed=true)),
              common_carotid_L48_A(volume(start=5.51679e-06, fixed=true)),
              common_carotid_L48_B(volume(start=4.8359498e-06, fixed=true)),
              common_carotid_L48_C(volume(start=4.2864444e-06, fixed=true)),
              common_carotid_L48_D(volume(start=3.4662353e-06, fixed=true)),
              internal_carotid_L50_A(volume(start=1.2615557e-06, fixed=true)),
              internal_carotid_L50_B(volume(start=7.9833035e-07, fixed=true)),
              internal_carotid_L50_C(volume(start=7.4653006e-05, fixed=true)),
              external_carotid_T2_L62(volume(start=7.494429e-05, fixed=true)),
              vertebral_L2(volume(start=6.889704e-05, fixed=true)),
              vertebral_R272(volume(start=6.890947e-05, fixed=true)),
              superior_vena_cava_C2(volume(start=2.0875075e-06, fixed=true)),
              superior_vena_cava_C88(volume(start=3.597201e-06, fixed=true)),
              inferior_vena_cava_C8(volume(start=3.1307832e-06, fixed=true)),
              hepatic_vein_T1_C10(volume(start=1.2275017e-06, fixed=true)),
              inferior_vena_cava_C12(volume(start=8.494004e-06, fixed=true)),
              inferior_vena_cava_C16(volume(start=6.67927e-06, fixed=true)),
              renal_vein_T1_R18(volume(start=1.96807e-06, fixed=true)),
              inferior_vena_cava_C20(volume(start=4.6599015e-07, fixed=true)),
              renal_vein_T1_L22(volume(start=1.7389613e-06, fixed=true)),
              inferior_vena_cava_C24(volume(start=1.8583023e-05, fixed=true)),
              common_iliac_vein_L56(volume(start=4.5593533e-06, fixed=true)),
              common_iliac_vein_R26(volume(start=4.190835e-06, fixed=true)),
              external_iliac_vein_R28(volume(start=6.112059e-07, fixed=true)),
              internal_iliac_vein_T1_R30(volume(start=2.6143782e-06, fixed=true)),
              external_iliac_vein_R32(volume(start=7.088575e-06, fixed=true)),
              femoral_vein_R34(volume(start=3.0814348e-07, fixed=true)),
              femoral_vein_R38(volume(start=2.4424287e-06, fixed=true)),
              profunda_femoris_vein_T2_R40(volume(start=6.7587735e-06, fixed=
                      true)),
              femoral_vein_R42(volume(start=1.7259254e-05, fixed=true)),
              femoral_vein_R46(volume(start=9.50517e-07, fixed=true)),
              popliteal_vein_R48(volume(start=3.8663393e-06, fixed=true)),
              anterior_tibial_vein_T4_R50(volume(start=1.0955602e-06, fixed=
                      true)),
              popliteal_vein_R52(volume(start=8.6003234e-07, fixed=true)),
              posterior_tibial_vein_T6_R54(volume(start=1.6515086e-06, fixed=
                      true)),
              external_iliac_vein_L58(volume(start=6.1195806e-07, fixed=true)),
              internal_iliac_vein_T1_L60(volume(start=2.689039e-06, fixed=true)),
              external_iliac_vein_L62(volume(start=6.9593e-06, fixed=true)),
              femoral_vein_L64(volume(start=3.602426e-07, fixed=true)),
              femoral_vein_L68(volume(start=2.442452e-06, fixed=true)),
              profunda_femoris_vein_T2_L70(volume(start=6.758814e-06, fixed=
                      true)),
              femoral_vein_L72(volume(start=1.725943e-05, fixed=true)),
              femoral_vein_L76(volume(start=9.505208e-07, fixed=true)),
              popliteal_vein_L78(volume(start=3.866381e-06, fixed=true)),
              anterior_tibial_vein_T4_L80(volume(start=1.0956015e-06, fixed=
                      true)),
              popliteal_vein_L82(volume(start=8.60047e-07, fixed=true)),
              posterior_tibial_vein_T6_L84(volume(start=1.6515473e-06, fixed=
                      true)),
              brachiocephalic_vein_R90(volume(start=4.229372e-06, fixed=true)),
              brachiocephalic_vein_L124(volume(start=7.92589e-06, fixed=true)),
              vertebral_vein_R92(volume(start=2.6555442e-06, fixed=true)),
              brachiocephalic_vein_R94(volume(start=9.587964e-07, fixed=true)),
              subclavian_vein_R96(volume(start=4.662005e-07, fixed=true)),
              internal_jugular_vein_R122(volume(start=1.84241e-05, fixed=true)),
              external_jugular_vein_R98(volume(start=1.2918364e-06, fixed=true)),
              subclavian_vein_R100(volume(start=1.9066546e-06, fixed=true)),
              axillary_vein_R102(volume(start=6.6998086e-06, fixed=true)),
              brachial_vein_R104(volume(start=1.3067267e-06, fixed=true)),
              brachial_vein_R114(volume(start=1.1744931e-06, fixed=true)),
              brachial_vein_R108(volume(start=1.8046204e-07, fixed=true)),
              ulnar_vein_T7_R110(volume(start=1.5004769e-06, fixed=true)),
              brachial_vein_R118(volume(start=1.13466605e-07, fixed=true)),
              radial_vein_T3_R120(volume(start=9.488648e-07, fixed=true)),
              vertebral_vein_L126(volume(start=2.4835522e-06, fixed=true)),
              brachiocephalic_vein_L128(volume(start=4.8452915e-07, fixed=true)),
              subclavian_vein_L130(volume(start=4.145789e-07, fixed=true)),
              internal_jugular_vein_L156(volume(start=1.1182993e-05, fixed=true)),
              external_jugular_vein_L132(volume(start=1.2667307e-06, fixed=true)),
              subclavian_vein_L134(volume(start=1.8581874e-06, fixed=true)),
              axillary_vein_L136(volume(start=6.7759074e-06, fixed=true)),
              brachial_vein_L138(volume(start=1.3067234e-06, fixed=true)),
              brachial_vein_L148(volume(start=1.1765305e-06, fixed=true)),
              brachial_vein_L142(volume(start=1.804621e-07, fixed=true)),
              ulnar_vein_T7_L144(volume(start=1.500295e-06, fixed=true)),
              brachial_vein_L152(volume(start=1.1368223e-07, fixed=true)),
              radial_vein_T3_L154(volume(start=9.564093e-07, fixed=true)),
              mesenteric_artery(volume(start=6.4146498e-06, fixed=true)),
              coronary_arteries(volume(start=3.6568196e-08, fixed=true)),
              cardiac_tissue(volume(start=0.00012163581, fixed=true)),
              coronary_veins(volume(start=2.3587129e-08, fixed=true)),
              brachial_L82_HeartLevel(volume(start=3.716202e-06, fixed=true)),
              splanchnic_tissue(
                               volume(start=0.0002689703, fixed=true)),
              splanchnic_vein(
                             volume(start=1.0308225e-05, fixed=true))),
            heartComponent(
              mitralValve(
                BP_max(start=0.0, fixed=true),
                BP_min(start=39996.0, fixed=true),
                CO_acc(start=0.0, fixed=true)),
              aorticValve(
                BP_max(start=0.0, fixed=true),
                BP_min(start=39996.0, fixed=true),
                CO_acc(start=0.0, fixed=true)),
              ventricles(
                LV_wall(ym(start=3.9639785, fixed=true), SL(start=2.256391,
                      fixed=true)),
                SEP_wall(SL(start=2.1946723, fixed=true)),
                RV_wall(SL(start=2.3319578, fixed=true)),
                calciumMechanics(cardiac_cycle(start=0.0, fixed=false)),
                V_LV(start=0.00019087098, fixed=true),
                V_RV(start=0.00023394954, fixed=true)),
              ra(volume(start=2.2689272e-05, fixed=true)),
              la(volume(start=4.9317445e-05, fixed=true))),
            pulmonaryComponent(c_pa(volume(start=9.3587405e-05, fixed=true)),
                c_pv(volume(start=0.0021659813, fixed=true))),
            settings(initByPressure=false));

          annotation (experiment(
              StopTime=10,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end OlufsenTriSeg_optimized_steadyState_init;

        model Optimized_ss_baro
          extends Results.OlufsenTriSeg_optimized5(settings(baro_tau_s(displayUnit="s")=
                   10, baro_fsn(displayUnit="Hz") = 0.03272), useAutonomousPhi(
                y=true));
          annotation (experiment(
              StopTime=40,
              Interval=0.01,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end Optimized_ss_baro;

      model Optimized_ss_baro_init "Steady state initialization from 2020-09-14 10:44:32.920763 at time 179.92"
          extends
            ADAN_main.SystemicTree.Identification.Results.OlufsenTriSeg_optimized5(
            SystemicComponent(
              baroreflex_system(
                baroreflex(phi_mean(start=0.24930115, fixed=true), phi(start=
                        0.25175378, fixed=true)),
                baroreceptor_aortic(
                  fbr_int(start=18.098284, fixed=true),
                  epsilon(start=1.5408921, fixed=true),
                  s(start=0.80313325, fixed=true)),
                baroreceptor_carotid(
                  fbr_int(start=9.969681, fixed=true),
                  epsilon(start=1.1758231, fixed=true),
                  s(start=0.8915902, fixed=true))),
              ascending_aorta_A(
                q(start=4.7891126e-06, fixed=true),
                vol1(start=7.741325e-06, fixed=true),
                vol2(start=7.740929e-06, fixed=true)),
              ascending_aorta_B(q_in(start=9.5865125e-06, fixed=true), volume(
                    start=2.4455125e-05, fixed=true)),
              ascending_aorta_C(q_in(start=1.5405387e-05, fixed=true), volume(
                    start=2.2619479e-05, fixed=true)),
              ascending_aorta_D(q_in(start=2.3242754e-05, fixed=true), volume(
                    start=2.0650332e-05, fixed=true)),
              aortic_arch_C2(q_in(start=3.0315494e-05, fixed=true), volume(
                    start=1.8890645e-05, fixed=true)),
              brachiocephalic_trunk_C4(q_in(start=-2.751741e-06, fixed=true),
                  volume(start=1.2878123e-05, fixed=true)),
              aortic_arch_C46(q_in(start=3.944277e-05, fixed=true), volume(
                    start=1.1193709e-05, fixed=true)),
              aortic_arch_C64(q_in(start=4.6177294e-05, fixed=true), volume(
                    start=7.684528e-06, fixed=true)),
              aortic_arch_C94(q_in(start=4.6339173e-05, fixed=true), volume(
                    start=4.21373e-05, fixed=true)),
              thoracic_aorta_C96(q_in(start=5.886148e-05, fixed=true), volume(
                    start=7.570479e-06, fixed=true)),
              thoracic_aorta_C100(q_in(start=6.1021252e-05, fixed=true), volume(
                    start=5.8224477e-06, fixed=true)),
              thoracic_aorta_C104(q_in(start=6.26352e-05, fixed=true), volume(
                    start=1.0967433e-05, fixed=true)),
              thoracic_aorta_C108(q_in(start=6.549362e-05, fixed=true), volume(
                    start=3.6027632e-06, fixed=true)),
              thoracic_aorta_C112(q_in(start=6.641022e-05, fixed=true), volume(
                    start=5.8809717e-05, fixed=true)),
              abdominal_aorta_C114(q_in(start=7.069e-05, fixed=true), volume(
                    start=1.2160663e-06, fixed=true)),
              abdominal_aorta_C136(q_in(start=6.039267e-05, fixed=true), volume(
                    start=5.10137e-06, fixed=true)),
              abdominal_aorta_C164(q_in(start=5.334334e-05, fixed=true), volume(
                    start=1.514121e-06, fixed=true)),
              abdominal_aorta_C176(q_in(start=4.406575e-05, fixed=true), volume(
                    start=4.069545e-06, fixed=true)),
              abdominal_aorta_C188(q_in(start=3.495255e-05, fixed=true), volume(
                    start=1.6246277e-05, fixed=true)),
              abdominal_aorta_C192(q_in(start=3.4464385e-05, fixed=true),
                  volume(start=1.0094919e-05, fixed=true)),
              celiac_trunk_C116(volume(start=0.00035894633, fixed=true)),
              renal_L166(volume(start=0.00032424013, fixed=true)),
              renal_R178(volume(start=0.0003213272, fixed=true)),
              common_iliac_R216(q_in(start=1.6922218e-05, fixed=true), volume(
                    start=8.394215e-06, fixed=true)),
              internal_iliac_T1_R218(volume(start=0.00017648032, fixed=true)),
              external_iliac_R220(q_in(start=1.0942256e-05, fixed=true), volume(
                    start=4.840243e-06, fixed=true)),
              femoral_R222(q_in(start=1.0466925e-05, fixed=true), volume(start=
                      1.3855271e-06, fixed=true)),
              profundus_T2_R224(volume(start=0.00020239198, fixed=true)),
              femoral_R226(q_in(start=4.5208994e-06, fixed=true), volume(start=
                      1.16122155e-05, fixed=true)),
              popliteal_R228(q_in(start=2.4283165e-06, fixed=true), volume(
                    start=3.5710325e-06, fixed=true)),
              anterior_tibial_T3_R230(volume(start=2.6648477e-05, fixed=true)),
              popliteal_R232(q_in(start=9.795816e-07, fixed=true), volume(start=
                     1.8123525e-07, fixed=true)),
              tibiofibular_trunk_R234(q_in(start=9.604763e-07, fixed=true),
                  volume(start=7.368587e-07, fixed=true)),
              posterior_tibial_T4_R236(volume(start=2.8990882e-05, fixed=true)),
              common_iliac_L194(q_in(start=1.6825268e-05, fixed=true), volume(
                    start=8.029576e-06, fixed=true)),
              internal_iliac_T1_L196(volume(start=0.0001764832, fixed=true)),
              external_iliac_L198(q_in(start=1.0910256e-05, fixed=true), volume(
                    start=4.840974e-06, fixed=true)),
              femoral_L200(q_in(start=1.0444083e-05, fixed=true), volume(start=
                      1.3857408e-06, fixed=true)),
              profundus_T2_L202(volume(start=0.00020239464, fixed=true)),
              femoral_L204(q_in(start=4.4969865e-06, fixed=true), volume(start=
                      1.1614383e-05, fixed=true)),
              popliteal_L206(q_in(start=2.4235317e-06, fixed=true), volume(
                    start=3.571652e-06, fixed=true)),
              anterior_tibial_T3_L208(volume(start=2.6648788e-05, fixed=true)),
              popliteal_L210(q_in(start=9.795235e-07, fixed=true), volume(start=
                     1.8125257e-07, fixed=true)),
              tibiofibular_trunk_L212(q_in(start=9.605702e-07, fixed=true),
                  volume(start=7.369516e-07, fixed=true)),
              posterior_tibial_T4_L214(volume(start=2.8991275e-05, fixed=true)),
              subclavian_R28(q_in(start=2.801184e-06, fixed=true), volume(start=
                     1.9780064e-06, fixed=true)),
              subclavian_R30(q_in(start=1.4107255e-06, fixed=true), volume(
                    start=2.6014345e-06, fixed=true)),
              axillary_R32(q_in(start=2.1425049e-06, fixed=true), volume(start=
                      2.9935559e-06, fixed=true)),
              brachial_R34(q_in(start=2.7424371e-06, fixed=true), volume(start=
                      4.371171e-06, fixed=true)),
              ulnar_T2_R36(q_in(start=1.7076428e-06, fixed=true), volume(start=
                      2.349348e-07, fixed=true)),
              ulnar_T2_R42(volume(start=6.0989736e-05, fixed=true)),
              radial_T1_R44(volume(start=5.0063023e-05, fixed=true)),
              subclavian_L66(q_in(start=2.3535786e-06, fixed=true), volume(
                    start=4.704757e-06, fixed=true)),
              subclavian_L78(q_in(start=1.6464196e-06, fixed=true), volume(
                    start=1.9308882e-06, fixed=true)),
              axillary_L80(q_in(start=2.116359e-06, fixed=true), volume(start=
                      2.9886035e-06, fixed=true)),
              brachial_L82(q_in(start=3.0593862e-06, fixed=true), volume(start=
                      8.3166725e-07, fixed=true)),
              ulnar_T2_L84(q_in(start=1.6932565e-06, fixed=true), volume(start=
                      2.3472343e-07, fixed=true)),
              ulnar_T2_L90(volume(start=6.096195e-05, fixed=true)),
              radial_T1_L92(volume(start=5.3059044e-05, fixed=true)),
              common_carotid_R6_A(q_in(start=-1.2669333e-06, fixed=true),
                  volume(start=4.8281845e-06, fixed=true)),
              common_carotid_R6_B(q_in(start=8.2757936e-07, fixed=true), volume(
                    start=4.1240546e-06, fixed=true)),
              common_carotid_R6_C(q_in(start=2.6473351e-06, fixed=true), volume(
                    start=3.085043e-06, fixed=true)),
              internal_carotid_R8_A(q_in(start=1.8176981e-06, fixed=true),
                  volume(start=1.2422475e-06, fixed=true)),
              internal_carotid_R8_B(q_in(start=2.0452617e-06, fixed=true),
                  volume(start=7.8761275e-07, fixed=true)),
              internal_carotid_R8_C(volume(start=7.226639e-05, fixed=true)),
              external_carotid_T2_R26(volume(start=7.25409e-05, fixed=true)),
              common_carotid_L48_A(q_in(start=-3.0178282e-06, fixed=true),
                  volume(start=5.2247765e-06, fixed=true)),
              common_carotid_L48_B(q_in(start=-9.118605e-07, fixed=true),
                  volume(start=4.59612e-06, fixed=true)),
              common_carotid_L48_C(q_in(start=9.799176e-07, fixed=true), volume(
                    start=4.0847412e-06, fixed=true)),
              common_carotid_L48_D(q_in(start=2.678458e-06, fixed=true), volume(
                    start=3.3103743e-06, fixed=true)),
              internal_carotid_L50_A(q_in(start=1.8520627e-06, fixed=true),
                  volume(start=1.2431815e-06, fixed=true)),
              internal_carotid_L50_B(q_in(start=2.0649109e-06, fixed=true),
                  volume(start=7.881731e-07, fixed=true)),
              internal_carotid_L50_C(volume(start=7.22633e-05, fixed=true)),
              external_carotid_T2_L62(volume(start=7.2532275e-05, fixed=true)),
              vertebral_L2(volume(start=6.668325e-05, fixed=true)),
              vertebral_R272(volume(start=6.6695255e-05, fixed=true)),
              superior_vena_cava_C2(volume(start=2.1616434e-06, fixed=true)),
              superior_vena_cava_C88(volume(start=3.7250738e-06, fixed=true)),
              inferior_vena_cava_C8(volume(start=3.2420462e-06, fixed=true)),
              hepatic_vein_T1_C10(volume(start=1.2711224e-06, fixed=true)),
              inferior_vena_cava_C12(volume(start=8.796935e-06, fixed=true)),
              inferior_vena_cava_C16(volume(start=6.918212e-06, fixed=true)),
              renal_vein_T1_R18(volume(start=2.0384666e-06, fixed=true)),
              inferior_vena_cava_C20(volume(start=4.826637e-07, fixed=true)),
              renal_vein_T1_L22(volume(start=1.8011691e-06, fixed=true)),
              inferior_vena_cava_C24(volume(start=1.9253397e-05, fixed=true)),
              common_iliac_vein_L56(volume(start=4.725373e-06, fixed=true)),
              common_iliac_vein_R26(volume(start=4.343311e-06, fixed=true)),
              external_iliac_vein_R28(volume(start=6.334687e-07, fixed=true)),
              internal_iliac_vein_T1_R30(volume(start=2.7096576e-06, fixed=true)),
              external_iliac_vein_R32(volume(start=7.3500237e-06, fixed=true)),
              femoral_vein_R34(volume(start=3.1951808e-07, fixed=true)),
              femoral_vein_R38(volume(start=2.533166e-06, fixed=true)),
              profunda_femoris_vein_T2_R40(volume(start=7.0154774e-06, fixed=
                      true)),
              femoral_vein_R42(volume(start=1.7922623e-05, fixed=true)),
              femoral_vein_R46(volume(start=9.870693e-07, fixed=true)),
              popliteal_vein_R48(volume(start=4.0179275e-06, fixed=true)),
              anterior_tibial_vein_T4_R50(volume(start=1.1430095e-06, fixed=
                      true)),
              popliteal_vein_R52(volume(start=8.937971e-07, fixed=true)),
              posterior_tibial_vein_T6_R54(volume(start=1.7275721e-06, fixed=
                      true)),
              external_iliac_vein_L58(volume(start=6.3426654e-07, fixed=true)),
              internal_iliac_vein_T1_L60(volume(start=2.7871251e-06, fixed=true)),
              external_iliac_vein_L62(volume(start=7.216123e-06, fixed=true)),
              femoral_vein_L64(volume(start=3.7354954e-07, fixed=true)),
              femoral_vein_L68(volume(start=2.533252e-06, fixed=true)),
              profunda_femoris_vein_T2_L70(volume(start=7.0156875e-06, fixed=
                      true)),
              femoral_vein_L72(volume(start=1.7923236e-05, fixed=true)),
              femoral_vein_L76(volume(start=9.870969e-07, fixed=true)),
              popliteal_vein_L78(volume(start=4.0180653e-06, fixed=true)),
              anterior_tibial_vein_T4_L80(volume(start=1.1430578e-06, fixed=
                      true)),
              popliteal_vein_L82(volume(start=8.938334e-07, fixed=true)),
              posterior_tibial_vein_T6_L84(volume(start=1.7276424e-06, fixed=
                      true)),
              brachiocephalic_vein_R90(volume(start=4.3799923e-06, fixed=true)),
              brachiocephalic_vein_L124(volume(start=8.208929e-06, fixed=true)),
              vertebral_vein_R92(volume(start=2.75401e-06, fixed=true)),
              brachiocephalic_vein_R94(volume(start=9.929537e-07, fixed=true)),
              subclavian_vein_R96(volume(start=4.8281834e-07, fixed=true)),
              internal_jugular_vein_R122(volume(start=1.9084135e-05, fixed=true)),
              external_jugular_vein_R98(volume(start=1.3387258e-06, fixed=true)),
              subclavian_vein_R100(volume(start=1.9747608e-06, fixed=true)),
              axillary_vein_R102(volume(start=6.9405933e-06, fixed=true)),
              brachial_vein_R104(volume(start=1.3609908e-06, fixed=true)),
              brachial_vein_R114(volume(start=1.22317e-06, fixed=true)),
              brachial_vein_R108(volume(start=1.8800257e-07, fixed=true)),
              ulnar_vein_T7_R110(volume(start=1.5671646e-06, fixed=true)),
              brachial_vein_R118(volume(start=1.1817549e-07, fixed=true)),
              radial_vein_T3_R120(volume(start=9.889869e-07, fixed=true)),
              vertebral_vein_L126(volume(start=2.5753711e-06, fixed=true)),
              brachiocephalic_vein_L128(volume(start=5.018355e-07, fixed=true)),
              subclavian_vein_L130(volume(start=4.2939462e-07, fixed=true)),
              internal_jugular_vein_L156(volume(start=1.1585479e-05, fixed=true)),
              external_jugular_vein_L132(volume(start=1.3127751e-06, fixed=true)),
              subclavian_vein_L134(volume(start=1.924739e-06, fixed=true)),
              axillary_vein_L136(volume(start=7.0202304e-06, fixed=true)),
              brachial_vein_L138(q_out(start=2.2906886e-06, fixed=true), volume(
                    start=1.3534399e-06, fixed=true)),
              brachial_vein_L148(volume(start=1.2252591e-06, fixed=true)),
              brachial_vein_L142(volume(start=1.8700365e-07, fixed=true)),
              ulnar_vein_T7_L144(volume(start=1.563212e-06, fixed=true)),
              brachial_vein_L152(volume(start=1.1839537e-07, fixed=true)),
              radial_vein_T3_L154(volume(start=9.96403e-07, fixed=true)),
              mesenteric_artery(q_in(start=7.315994e-06, fixed=true), volume(
                    start=6.354152e-06, fixed=true)),
              splanchnic_tissue(volume(start=0.0002603238, fixed=true)),
              splanchnic_vein(volume(start=1.0594096e-05, fixed=true)),
              coronary_arteries(q_in(start=2.7237734e-06, fixed=true), volume(
                    start=3.6808633e-08, fixed=true)),
              cardiac_tissue(volume(start=0.0001177309, fixed=true)),
              coronary_veins(volume(start=2.386533e-08, fixed=true)),
              brachial_L82_HeartLevel(q_in(start=2.655711e-06, fixed=true),
                  volume(start=3.5419416e-06, fixed=true))),
            heartComponent(
              tricuspidValve(open(start=true, fixed=true)),
              pulmonaryValve(open(start=false, fixed=true)),
              mitralValve(
                open(start=true, fixed=true),
                BP_max(start=0.0, fixed=true),
                BP_min(start=39996.0, fixed=true),
                CO_acc(start=0.0, fixed=true)),
              aorticValve(
                open(start=false, fixed=true),
                BP_max(start=15132.825, fixed=true),
                BP_min(start=11252.298, fixed=true),
                CO_acc(start=8.998715e-05, fixed=true)),
              ventricles(
                LV_wall(ym(start=3.4414701, fixed=true), SL(start=2.153967,
                      fixed=true)),
                SEP_wall(SL(start=2.1844857, fixed=true)),
                RV_wall(SL(start=2.1489136, fixed=true)),
                calciumMechanics(cardiac_cycle(start=0.91466665, fixed=true)),
                V_LV(start=0.00012848654, fixed=true),
                V_RV(start=0.00012449617, fixed=true)),
              ra(volume(start=1.3404624e-05, fixed=true), currentWork(start=
                      0.3296081, fixed=true)),
              la(volume(start=5.76426e-05, fixed=true), currentWork(start=
                      0.08366831, fixed=true)),
              calciumMechanics(initializeCardiac_cycle=false, cardiac_cycle(
                    start=0.91466665 - settings.heart_vntr_Tact - 1, fixed=true))),
            pulmonaryComponent(c_pa(volume(start=4.78778e-05, fixed=true)),
                c_pv(volume(start=0.002200931, fixed=true))),
            useAutonomousPhi(y=false),
            settings(baro_fsn(displayUnit="Hz") = 0.03272));

          annotation (experiment(
              StopTime=60,
              Interval=0.005,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
      end Optimized_ss_baro_init;

        model CVS_baseline_ss_init "Steady state initialization from 2020-11-06 14:06:11.848452 at time 345.0"
          extends Results.CVS_baseline_optimized(
              SystemicComponent(
                baroreflex_system(
                  baroreflex(phi(start = 0.25327575, fixed = true)),
                  baroreceptor_aortic(epsilon(start = 1.5422276, fixed = true), s(start = 0.8008634, fixed = true)),
                  baroreceptor_carotid(epsilon(start = 1.1762826, fixed = true), s(start = 0.88136935, fixed = true))),
                ascending_aorta_A(q(start = 5.445341e-06, fixed = true), vol1(start = 7.648785e-06, fixed = true), vol2(start = 7.648524e-06, fixed = true)),
                ascending_aorta_B(q_in(start = 1.0895296e-05, fixed = true), volume(start = 2.4290614e-05, fixed = true)),
                ascending_aorta_C(q_in(start = 1.7959255e-05, fixed = true), volume(start = 2.2468663e-05, fixed = true)),
                ascending_aorta_D(q_in(start = 2.683753e-05, fixed = true), volume(start = 2.0514392e-05, fixed = true)),
                aortic_arch_C2(q_in(start = 3.4821212e-05, fixed = true), volume(start = 1.8768318e-05, fixed = true)),
                brachiocephalic_trunk_C4(q_in(start = -4.324368e-06, fixed = true), volume(start = 1.27915555e-05, fixed = true)),
                aortic_arch_C46(q_in(start = 4.630655e-05, fixed = true), volume(start = 1.1122718e-05, fixed = true)),
                aortic_arch_C64(q_in(start = 5.5204222e-05, fixed = true), volume(start = 7.636667e-06, fixed = true)),
                aortic_arch_C94(q_in(start = 5.5937613e-05, fixed = true), volume(start = 4.190603e-05, fixed = true)),
                thoracic_aorta_C96(q_in(start = 6.9370595e-05, fixed = true), volume(start = 7.531e-06, fixed = true)),
                thoracic_aorta_C100(q_in(start = 7.1653456e-05, fixed = true), volume(start = 5.7932148e-06, fixed = true)),
                thoracic_aorta_C104(q_in(start = 7.333672e-05, fixed = true), volume(start = 1.091673e-05, fixed = true)),
                thoracic_aorta_C108(q_in(start = 7.622616e-05, fixed = true), volume(start = 3.5866376e-06, fixed = true)),
                thoracic_aorta_C112(q_in(start = 7.714113e-05, fixed = true), volume(start = 5.8802067e-05, fixed = true)),
                abdominal_aorta_C114(q_in(start = 7.53794e-05, fixed = true), volume(start = 1.2160152e-06, fixed = true)),
                abdominal_aorta_C136(q_in(start = 6.5111155e-05, fixed = true), volume(start = 5.103121e-06, fixed = true)),
                abdominal_aorta_C164(q_in(start = 5.718842e-05, fixed = true), volume(start = 1.5148112e-06, fixed = true)),
                abdominal_aorta_C176(q_in(start = 4.7865833e-05, fixed = true), volume(start = 4.0727205e-06, fixed = true)),
                abdominal_aorta_C188(q_in(start = 3.8387418e-05, fixed = true), volume(start = 1.6284557e-05, fixed = true)),
                abdominal_aorta_C192(q_in(start = 3.5583296e-05, fixed = true), volume(start = 1.0128738e-05, fixed = true)),
                celiac_trunk_C116(volume(start = 0.00036419043, fixed = true)),
                renal_L166(volume(start = 0.00032897046, fixed = true)),
                renal_R178(volume(start = 0.00032601636, fixed = true)),
                common_iliac_R216(q_in(start = 1.6755057e-05, fixed = true), volume(start = 8.430696e-06, fixed = true)),
                internal_iliac_T1_R218(volume(start = 0.00017905574, fixed = true)),
                external_iliac_R220(q_in(start = 9.549678e-06, fixed = true), volume(start = 4.856568e-06, fixed = true)),
                femoral_R222(q_in(start = 8.785737e-06, fixed = true), volume(start = 1.3903633e-06, fixed = true)),
                profundus_T2_R224(volume(start = 0.00020533384, fixed = true)),
                femoral_R226(q_in(start = 2.7660503e-06, fixed = true), volume(start = 1.1677956e-05, fixed = true)),
                popliteal_R228(q_in(start = 1.9256595e-06, fixed = true), volume(start = 3.5919643e-06, fixed = true)),
                anterior_tibial_T3_R230(volume(start = 2.6943366e-05, fixed = true)),
                popliteal_R232(q_in(start = 9.208217e-07, fixed = true), volume(start = 1.8183e-07, fixed = true)),
                tibiofibular_trunk_R234(q_in(start = 9.1449164e-07, fixed = true), volume(start = 7.392855e-07, fixed = true)),
                posterior_tibial_T4_R236(volume(start = 2.9396075e-05, fixed = true)),
                common_iliac_L194(q_in(start = 1.658174e-05, fixed = true), volume(start = 8.0637565e-06, fixed = true)),
                internal_iliac_T1_L196(volume(start = 0.0001790584, fixed = true)),
                external_iliac_L198(q_in(start = 9.510748e-06, fixed = true), volume(start = 4.857029e-06, fixed = true)),
                femoral_L200(q_in(start = 8.76077e-06, fixed = true), volume(start = 1.3905017e-06, fixed = true)),
                profundus_T2_L202(volume(start = 0.00020533637, fixed = true)),
                femoral_L204(q_in(start = 2.743054e-06, fixed = true), volume(start = 1.1679599e-05, fixed = true)),
                popliteal_L206(q_in(start = 1.9215468e-06, fixed = true), volume(start = 3.5924415e-06, fixed = true)),
                anterior_tibial_T3_L208(volume(start = 2.6943666e-05, fixed = true)),
                popliteal_L210(q_in(start = 9.207287e-07, fixed = true), volume(start = 1.8184329e-07, fixed = true)),
                tibiofibular_trunk_L212(q_in(start = 9.145262e-07, fixed = true), volume(start = 7.393621e-07, fixed = true)),
                posterior_tibial_T4_L214(volume(start = 2.9396451e-05, fixed = true)),
                subclavian_R28(q_in(start = 2.4338133e-06, fixed = true), volume(start = 1.9656031e-06, fixed = true)),
                subclavian_R30(q_in(start = 1.1831937e-06, fixed = true), volume(start = 2.5866043e-06, fixed = true)),
                axillary_R32(q_in(start = 2.002631e-06, fixed = true), volume(start = 2.9819612e-06, fixed = true)),
                brachial_R34(q_in(start = 2.6782795e-06, fixed = true), volume(start = 4.369168e-06, fixed = true)),
                ulnar_T2_R36(q_in(start = 1.6771833e-06, fixed = true), volume(start = 2.3488121e-07, fixed = true)),
                ulnar_T2_R42(volume(start = 6.1776926e-05, fixed = true)),
                radial_T1_R44(volume(start = 5.0627445e-05, fixed = true)),
                subclavian_L66(q_in(start = 2.068737e-06, fixed = true), volume(start = 4.6804244e-06, fixed = true)),
                subclavian_L78(q_in(start = 1.5834436e-06, fixed = true), volume(start = 1.9221336e-06, fixed = true)),
                axillary_L80(q_in(start = 2.1094909e-06, fixed = true), volume(start = 2.9789962e-06, fixed = true)),
                brachial_L82(q_in(start = 2.9631678e-06, fixed = true), volume(start = 1.4495494e-06, fixed = true)),
                ulnar_T2_L84(q_in(start = 1.6578846e-06, fixed = true), volume(start = 2.3444255e-07, fixed = true)),
                ulnar_T2_L90(volume(start = 6.175079e-05, fixed = true)),
                radial_T1_L92(volume(start = 5.3647593e-05, fixed = true)),
                common_carotid_R6_A(q_in(start = -1.9794613e-06, fixed = true), volume(start = 4.7843128e-06, fixed = true)),
                common_carotid_R6_B(q_in(start = 3.3376645e-07, fixed = true), volume(start = 4.0849113e-06, fixed = true)),
                common_carotid_R6_C(q_in(start = 2.3279797e-06, fixed = true), volume(start = 3.0554488e-06, fixed = true)),
                internal_carotid_R8_A(q_in(start = 1.7025819e-06, fixed = true), volume(start = 1.2372088e-06, fixed = true)),
                internal_carotid_R8_B(q_in(start = 1.9508743e-06, fixed = true), volume(start = 7.84647e-07, fixed = true)),
                internal_carotid_R8_C(volume(start = 7.333004e-05, fixed = true)),
                external_carotid_T2_R26(volume(start = 7.35789e-05, fixed = true)),
                common_carotid_L48_A(q_in(start = -4.7388367e-06, fixed = true), volume(start = 5.18444e-06, fixed = true)),
                common_carotid_L48_B(q_in(start = -2.2837808e-06, fixed = true), volume(start = 4.5598495e-06, fixed = true)),
                common_carotid_L48_C(q_in(start = -4.9191677e-09, fixed = true), volume(start = 4.052186e-06, fixed = true)),
                common_carotid_L48_D(q_in(start = 2.0903324e-06, fixed = true), volume(start = 3.2842534e-06, fixed = true)),
                internal_carotid_L50_A(q_in(start = 1.6851103e-06, fixed = true), volume(start = 1.2391273e-06, fixed = true)),
                internal_carotid_L50_B(q_in(start = 1.9548927e-06, fixed = true), volume(start = 7.8584156e-07, fixed = true)),
                internal_carotid_L50_C(volume(start = 7.332704e-05, fixed = true)),
                external_carotid_T2_L62(volume(start = 7.357107e-05, fixed = true)),
                vertebral_L2(volume(start = 6.764558e-05, fixed = true)),
                vertebral_R272(volume(start = 6.7656896e-05, fixed = true)),
                superior_vena_cava_C2(volume(start = 3.1367952e-06, fixed = true)),
                superior_vena_cava_C88(volume(start = 5.405554e-06, fixed = true)),
                inferior_vena_cava_C8(volume(start = 4.7046096e-06, fixed = true)),
                hepatic_vein_T1_C10(volume(start = 1.844555e-06, fixed = true)),
                inferior_vena_cava_C12(volume(start = 1.2765787e-05, fixed = true)),
                inferior_vena_cava_C16(volume(start = 1.0039694e-05, fixed = true)),
                renal_vein_T1_R18(volume(start = 2.9582168e-06, fixed = true)),
                inferior_vena_cava_C20(volume(start = 7.0044166e-07, fixed = true)),
                renal_vein_T1_L22(volume(start = 2.6138537e-06, fixed = true)),
                inferior_vena_cava_C24(volume(start = 2.7942313e-05, fixed = true)),
                common_iliac_vein_L56(volume(start = 6.8584077e-06, fixed = true)),
                common_iliac_vein_R26(volume(start = 6.303842e-06, fixed = true)),
                external_iliac_vein_R28(volume(start = 9.19419e-07, fixed = true)),
                internal_iliac_vein_T1_R30(volume(start = 3.932828e-06, fixed = true)),
                external_iliac_vein_R32(volume(start = 1.06689295e-05, fixed = true)),
                femoral_vein_R34(volume(start = 4.6379972e-07, fixed = true)),
                femoral_vein_R38(volume(start = 3.6772365e-06, fixed = true)),
                profunda_femoris_vein_T2_R40(volume(start = 1.0185863e-05, fixed = true)),
                femoral_vein_R42(volume(start = 2.6024554e-05, fixed = true)),
                femoral_vein_R46(volume(start = 1.4332813e-06, fixed = true)),
                popliteal_vein_R48(volume(start = 5.8353403e-06, fixed = true)),
                anterior_tibial_vein_T4_R50(volume(start = 1.6654279e-06, fixed = true)),
                popliteal_vein_R52(volume(start = 1.2981034e-06, fixed = true)),
                posterior_tibial_vein_T6_R54(volume(start = 2.5144518e-06, fixed = true)),
                external_iliac_vein_L58(volume(start = 9.2058303e-07, fixed = true)),
                internal_iliac_vein_T1_L60(volume(start = 4.045294e-06, fixed = true)),
                external_iliac_vein_L62(volume(start = 1.0474613e-05, fixed = true)),
                femoral_vein_L64(volume(start = 5.4223267e-07, fixed = true)),
                femoral_vein_L68(volume(start = 3.677382e-06, fixed = true)),
                profunda_femoris_vein_T2_L70(volume(start = 1.0186225e-05, fixed = true)),
                femoral_vein_L72(volume(start = 2.6025591e-05, fixed = true)),
                femoral_vein_L76(volume(start = 1.4333295e-06, fixed = true)),
                popliteal_vein_L78(volume(start = 5.8355736e-06, fixed = true)),
                anterior_tibial_vein_T4_L80(volume(start = 1.6655034e-06, fixed = true)),
                popliteal_vein_L82(volume(start = 1.2981633e-06, fixed = true)),
                posterior_tibial_vein_T6_L84(volume(start = 2.514569e-06, fixed = true)),
                brachiocephalic_vein_R90(volume(start = 6.356013e-06, fixed = true)),
                brachiocephalic_vein_L124(volume(start = 1.1912631e-05, fixed = true)),
                vertebral_vein_R92(volume(start = 3.997774e-06, fixed = true)),
                brachiocephalic_vein_R94(volume(start = 1.4409258e-06, fixed = true)),
                subclavian_vein_R96(volume(start = 7.006456e-07, fixed = true)),
                internal_jugular_vein_R122(volume(start = 2.7695101e-05, fixed = true)),
                external_jugular_vein_R98(volume(start = 1.9430108e-06, fixed = true)),
                subclavian_vein_R100(volume(start = 2.8657396e-06, fixed = true)),
                axillary_vein_R102(volume(start = 1.0072598e-05, fixed = true)),
                brachial_vein_R104(volume(start = 1.9786053e-06, fixed = true)),
                brachial_vein_R114(volume(start = 1.7783171e-06, fixed = true)),
                brachial_vein_R108(volume(start = 2.7334855e-07, fixed = true)),
                ulnar_vein_T7_R110(volume(start = 2.2815032e-06, fixed = true)),
                brachial_vein_R118(volume(start = 1.7181992e-07, fixed = true)),
                radial_vein_T3_R120(volume(start = 1.4399552e-06, fixed = true)),
                vertebral_vein_L126(volume(start = 3.7383736e-06, fixed = true)),
                brachiocephalic_vein_L128(volume(start = 7.2825463e-07, fixed = true)),
                subclavian_vein_L130(volume(start = 6.2313273e-07, fixed = true)),
                internal_jugular_vein_L156(volume(start = 1.6813596e-05, fixed = true)),
                external_jugular_vein_L132(volume(start = 1.905372e-06, fixed = true)),
                subclavian_vein_L134(volume(start = 2.793215e-06, fixed = true)),
                axillary_vein_L136(volume(start = 1.018852e-05, fixed = true)),
                brachial_vein_L138(q_out(start = 2.5719962e-06, fixed = true), volume(start = 1.971188e-06, fixed = true)),
                brachial_vein_L148(volume(start = 1.7813707e-06, fixed = true)),
                brachial_vein_L142(volume(start = 2.724211e-07, fixed = true)),
                ulnar_vein_T7_L144(volume(start = 2.28363e-06, fixed = true)),
                brachial_vein_L152(volume(start = 1.7214073e-07, fixed = true)),
                radial_vein_T3_L154(volume(start = 1.4506028e-06, fixed = true)),
                mesenteric_artery(q_in(start = 7.6237916e-06, fixed = true), volume(start = 6.3351467e-06, fixed = true)),
                splanchnic_tissue(volume(start = 0.0002641342, fixed = true)),
                splanchnic_vein(volume(start = 1.5373922e-05, fixed = true)),
                coronary_arteries(q_in(start = 2.635184e-06, fixed = true), volume(start = 3.6680778e-08, fixed = true)),
                cardiac_tissue(volume(start = 0.00011882453, fixed = true)),
                coronary_veins(volume(start = 3.4474805e-08, fixed = true)),
                brachial_L82_HeartLevel(q_in(start = 2.6724679e-06, fixed = true), volume(start = 2.9181713e-06, fixed = true))),
              heartComponent(
                tricuspidValve(open(start = true, fixed = true)),
                pulmonaryValve(open(start = false, fixed = true)),
                mitralValve(open(start = true, fixed = true)),
                aorticValve(open(start = false, fixed = true)),
                ventricles(
                  LV_wall(ym(start = 3.4145021, fixed = true), SL(start = 1.9386572, fixed = true)),
                  SEP_wall(SL(start = 1.9665219, fixed = true)),
                  RV_wall(SL(start = 1.9909936, fixed = true)), V_LV(start = 0.00012304554, fixed = true), V_RV(start = 0.00013538454, fixed = true)),
                ra(volume(start = 7.224623e-06, fixed = true)),
                la(volume(start = 3.0712676e-05, fixed = true)),
                sa_node(cardiac_cycle(start = 0.0, fixed = true))),
              pulmonaryComponent(
                c_pa(volume(start = 5.0932773e-05, fixed = true)),
                c_pv(volume(start = 0.00030508605 + settings.V_PV_init, fixed = true))),
            useAutonomousPhi(y=true),
            settings(baro_tau_s=93));

        end CVS_baseline_ss_init;

        model CVS_optimized_BVT_init "Steady state initialization from 2020-11-16 10:09:22.041229 at time 345.0. Resets the V_PV_init"
          extends Results.CVS_optimized_BVT(
                                      settings(V_PV_init = 0),
              SystemicComponent(
                baroreflex_system(
                  baroreflex(phi(start = 0.25141633, fixed = true)),
                  baroreceptor_aortic(epsilon(start = 1.5771632, fixed = true), s(start = 0.79908144, fixed = true)),
                  baroreceptor_carotid(epsilon(start = 1.1890945, fixed = true), s(start = 0.8825294, fixed = true))),
                ascending_aorta_A(q(start = 2.0773978e-06, fixed = true), vol1(start = 8.6253085e-06, fixed = true), vol2(start = 8.624841e-06, fixed = true)),
                ascending_aorta_B(q_in(start = 4.1758744e-06, fixed = true), volume(start = 2.6023381e-05, fixed = true)),
                ascending_aorta_C(q_in(start = 5.269761e-06, fixed = true), volume(start = 2.406562e-05, fixed = true)),
                ascending_aorta_D(q_in(start = 8.945505e-06, fixed = true), volume(start = 2.1965858e-05, fixed = true)),
                aortic_arch_C2(q_in(start = 1.2348741e-05, fixed = true), volume(start = 2.0089738e-05, fixed = true)),
                brachiocephalic_trunk_C4(q_in(start = 4.246631e-06, fixed = true), volume(start = 1.3650782e-05, fixed = true)),
                aortic_arch_C46(q_in(start = 1.1278529e-05, fixed = true), volume(start = 1.1901002e-05, fixed = true)),
                aortic_arch_C64(q_in(start = 1.0646503e-05, fixed = true), volume(start = 8.1687185e-06, fixed = true)),
                aortic_arch_C94(q_in(start = 8.745989e-06, fixed = true), volume(start = 4.4768087e-05, fixed = true)),
                thoracic_aorta_C96(q_in(start = 1.7310622e-05, fixed = true), volume(start = 8.038242e-06, fixed = true)),
                thoracic_aorta_C100(q_in(start = 1.8906583e-05, fixed = true), volume(start = 6.1813025e-06, fixed = true)),
                thoracic_aorta_C104(q_in(start = 2.0177973e-05, fixed = true), volume(start = 1.1640515e-05, fixed = true)),
                thoracic_aorta_C108(q_in(start = 2.2747181e-05, fixed = true), volume(start = 3.82331e-06, fixed = true)),
                thoracic_aorta_C112(q_in(start = 2.3610834e-05, fixed = true), volume(start = 6.226822e-05, fixed = true)),
                abdominal_aorta_C114(q_in(start = 4.8263617e-05, fixed = true), volume(start = 1.2865324e-06, fixed = true)),
                abdominal_aorta_C136(q_in(start = 3.809417e-05, fixed = true), volume(start = 5.3952444e-06, fixed = true)),
                abdominal_aorta_C164(q_in(start = 3.3990316e-05, fixed = true), volume(start = 1.6009942e-06, fixed = true)),
                abdominal_aorta_C176(q_in(start = 2.5041747e-05, fixed = true), volume(start = 4.301375e-06, fixed = true)),
                abdominal_aorta_C188(q_in(start = 1.7331999e-05, fixed = true), volume(start = 1.7137598e-05, fixed = true)),
                abdominal_aorta_C192(q_in(start = 2.4898784e-05, fixed = true), volume(start = 1.0624145e-05, fixed = true)),
                celiac_trunk_C116(volume(start = 0.0003596436, fixed = true)),
                renal_L166(volume(start = 0.00032486074, fixed = true)),
                renal_R178(volume(start = 0.00032195094, fixed = true)),
                common_iliac_R216(q_in(start = 1.4696609e-05, fixed = true), volume(start = 8.781537e-06, fixed = true)),
                internal_iliac_T1_R218(volume(start = 0.00017686632, fixed = true)),
                external_iliac_R220(q_in(start = 1.3104036e-05, fixed = true), volume(start = 4.951972e-06, fixed = true)),
                femoral_R222(q_in(start = 1.3779109e-05, fixed = true), volume(start = 1.4151602e-06, fixed = true)),
                profundus_T2_R224(volume(start = 0.00020285576, fixed = true)),
                femoral_R226(q_in(start = 8.191639e-06, fixed = true), volume(start = 1.1640187e-05, fixed = true)),
                popliteal_R228(q_in(start = 3.4194416e-06, fixed = true), volume(start = 3.5682272e-06, fixed = true)),
                anterior_tibial_T3_R230(volume(start = 2.645611e-05, fixed = true)),
                popliteal_R232(q_in(start = 1.0447119e-06, fixed = true), volume(start = 1.811517e-07, fixed = true)),
                tibiofibular_trunk_R234(q_in(start = 9.972824e-07, fixed = true), volume(start = 7.3646237e-07, fixed = true)),
                posterior_tibial_T4_R236(volume(start = 2.901747e-05, fixed = true)),
                common_iliac_L194(q_in(start = 1.487446e-05, fixed = true), volume(start = 8.39996e-06, fixed = true)),
                internal_iliac_T1_L196(volume(start = 0.00017686786, fixed = true)),
                external_iliac_L198(q_in(start = 1.3098375e-05, fixed = true), volume(start = 4.9529235e-06, fixed = true)),
                femoral_L200(q_in(start = 1.3764339e-05, fixed = true), volume(start = 1.415438e-06, fixed = true)),
                profundus_T2_L202(volume(start = 0.0002028571, fixed = true)),
                femoral_L204(q_in(start = 8.168822e-06, fixed = true), volume(start = 1.1643351e-05, fixed = true)),
                popliteal_L206(q_in(start = 3.4131745e-06, fixed = true), volume(start = 3.569162e-06, fixed = true)),
                anterior_tibial_T3_L208(volume(start = 2.6456266e-05, fixed = true)),
                popliteal_L210(q_in(start = 1.0447103e-06, fixed = true), volume(start = 1.8117798e-07, fixed = true)),
                tibiofibular_trunk_L212(q_in(start = 9.974855e-07, fixed = true), volume(start = 7.3659163e-07, fixed = true)),
                posterior_tibial_T4_L214(volume(start = 2.9017674e-05, fixed = true)),
                subclavian_R28(q_in(start = 3.7512302e-06, fixed = true), volume(start = 2.0885693e-06, fixed = true)),
                subclavian_R30(q_in(start = 1.9169483e-06, fixed = true), volume(start = 2.7346468e-06, fixed = true)),
                axillary_R32(q_in(start = 2.228749e-06, fixed = true), volume(start = 3.1214147e-06, fixed = true)),
                brachial_R34(q_in(start = 2.5179645e-06, fixed = true), volume(start = 4.5284573e-06, fixed = true)),
                ulnar_T2_R36(q_in(start = 1.7290812e-06, fixed = true), volume(start = 2.3957432e-07, fixed = true)),
                ulnar_T2_R42(volume(start = 6.0967966e-05, fixed = true)),
                radial_T1_R44(volume(start = 4.9787774e-05, fixed = true)),
                subclavian_L66(q_in(start = 3.2440903e-06, fixed = true), volume(start = 4.9522605e-06, fixed = true)),
                subclavian_L78(q_in(start = 1.8198926e-06, fixed = true), volume(start = 2.0224759e-06, fixed = true)),
                axillary_L80(q_in(start = 2.0663758e-06, fixed = true), volume(start = 3.1106185e-06, fixed = true)),
                brachial_L82(q_in(start = 2.9521848e-06, fixed = true), volume(start = 1.5066267e-06, fixed = true)),
                ulnar_T2_L84(q_in(start = 1.7206509e-06, fixed = true), volume(start = 2.3950136e-07, fixed = true)),
                ulnar_T2_L90(volume(start = 6.0950453e-05, fixed = true)),
                radial_T1_L92(volume(start = 5.274635e-05, fixed = true)),
                common_carotid_R6_A(q_in(start = 2.393593e-06, fixed = true), volume(start = 5.1959996e-06, fixed = true)),
                common_carotid_R6_B(q_in(start = 3.2582202e-06, fixed = true), volume(start = 4.4380226e-06, fixed = true)),
                common_carotid_R6_C(q_in(start = 3.970804e-06, fixed = true), volume(start = 3.3161166e-06, fixed = true)),
                internal_carotid_R8_A(q_in(start = 2.1756264e-06, fixed = true), volume(start = 1.2808837e-06, fixed = true)),
                internal_carotid_R8_B(q_in(start = 2.2560944e-06, fixed = true), volume(start = 8.1019033e-07, fixed = true)),
                internal_carotid_R8_C(volume(start = 7.242572e-05, fixed = true)),
                external_carotid_T2_R26(volume(start = 7.2600706e-05, fixed = true)),
                common_carotid_L48_A(q_in(start = 2.5487693e-06, fixed = true), volume(start = 5.6051376e-06, fixed = true)),
                common_carotid_L48_B(q_in(start = 3.3738513e-06, fixed = true), volume(start = 4.9238924e-06, fixed = true)),
                common_carotid_L48_C(q_in(start = 3.9238816e-06, fixed = true), volume(start = 4.3706223e-06, fixed = true)),
                common_carotid_L48_D(q_in(start = 4.2924457e-06, fixed = true), volume(start = 3.5364594e-06, fixed = true)),
                internal_carotid_L50_A(q_in(start = 2.2370116e-06, fixed = true), volume(start = 1.278231e-06, fixed = true)),
                internal_carotid_L50_B(q_in(start = 2.2663032e-06, fixed = true), volume(start = 8.085156e-07, fixed = true)),
                internal_carotid_L50_C(volume(start = 7.242365e-05, fixed = true)),
                external_carotid_T2_L62(volume(start = 7.259522e-05, fixed = true)),
                vertebral_L2(volume(start = 6.676078e-05, fixed = true)),
                vertebral_R272(volume(start = 6.676779e-05, fixed = true)),
                superior_vena_cava_C2(volume(start = 1.7612157e-06, fixed = true)),
                superior_vena_cava_C88(volume(start = 3.0350627e-06, fixed = true)),
                inferior_vena_cava_C8(volume(start = 2.6415153e-06, fixed = true)),
                hepatic_vein_T1_C10(volume(start = 1.0356758e-06, fixed = true)),
                inferior_vena_cava_C12(volume(start = 7.1677937e-06, fixed = true)),
                inferior_vena_cava_C16(volume(start = 5.637226e-06, fixed = true)),
                renal_vein_T1_R18(volume(start = 1.6610563e-06, fixed = true)),
                inferior_vena_cava_C20(volume(start = 3.93294e-07, fixed = true)),
                renal_vein_T1_L22(volume(start = 1.4677117e-06, fixed = true)),
                inferior_vena_cava_C24(volume(start = 1.5689764e-05, fixed = true)),
                common_iliac_vein_L56(volume(start = 3.8511544e-06, fixed = true)),
                common_iliac_vein_R26(volume(start = 3.5397443e-06, fixed = true)),
                external_iliac_vein_R28(volume(start = 5.162761e-07, fixed = true)),
                internal_iliac_vein_T1_R30(volume(start = 2.2084917e-06, fixed = true)),
                external_iliac_vein_R32(volume(start = 5.9909885e-06, fixed = true)),
                femoral_vein_R34(volume(start = 2.604408e-07, fixed = true)),
                femoral_vein_R38(volume(start = 2.0649386e-06, fixed = true)),
                profunda_femoris_vein_T2_R40(volume(start = 5.722615e-06, fixed = true)),
                femoral_vein_R42(volume(start = 1.4613575e-05, fixed = true)),
                femoral_vein_R46(volume(start = 8.0483176e-07, fixed = true)),
                popliteal_vein_R48(volume(start = 3.2768994e-06, fixed = true)),
                anterior_tibial_vein_T4_R50(volume(start = 9.545574e-07, fixed = true)),
                popliteal_vein_R52(volume(start = 7.289699e-07, fixed = true)),
                posterior_tibial_vein_T6_R54(volume(start = 1.4154313e-06, fixed = true)),
                external_iliac_vein_L58(volume(start = 5.169309e-07, fixed = true)),
                internal_iliac_vein_T1_L60(volume(start = 2.2716558e-06, fixed = true)),
                external_iliac_vein_L62(volume(start = 5.881885e-06, fixed = true)),
                femoral_vein_L64(volume(start = 3.0448456e-07, fixed = true)),
                femoral_vein_L68(volume(start = 2.0650252e-06, fixed = true)),
                profunda_femoris_vein_T2_L70(volume(start = 5.7228312e-06, fixed = true)),
                femoral_vein_L72(volume(start = 1.4614191e-05, fixed = true)),
                femoral_vein_L76(volume(start = 8.0486063e-07, fixed = true)),
                popliteal_vein_L78(volume(start = 3.2770379e-06, fixed = true)),
                anterior_tibial_vein_T4_L80(volume(start = 9.546052e-07, fixed = true)),
                popliteal_vein_L82(volume(start = 7.290052e-07, fixed = true)),
                posterior_tibial_vein_T6_L84(volume(start = 1.4154995e-06, fixed = true)),
                brachiocephalic_vein_R90(volume(start = 3.5687347e-06, fixed = true)),
                brachiocephalic_vein_L124(volume(start = 6.6886914e-06, fixed = true)),
                vertebral_vein_R92(volume(start = 2.2461004e-06, fixed = true)),
                brachiocephalic_vein_R94(volume(start = 8.0904266e-07, fixed = true)),
                subclavian_vein_R96(volume(start = 3.933956e-07, fixed = true)),
                internal_jugular_vein_R122(volume(start = 1.5550131e-05, fixed = true)),
                external_jugular_vein_R98(volume(start = 1.092163e-06, fixed = true)),
                subclavian_vein_R100(volume(start = 1.6090522e-06, fixed = true)),
                axillary_vein_R102(volume(start = 5.6556682e-06, fixed = true)),
                brachial_vein_R104(volume(start = 1.1136142e-06, fixed = true)),
                brachial_vein_R114(volume(start = 1.0016098e-06, fixed = true)),
                brachial_vein_R108(volume(start = 1.539094e-07, fixed = true)),
                ulnar_vein_T7_R110(volume(start = 1.2925922e-06, fixed = true)),
                brachial_vein_R118(volume(start = 9.6810275e-08, fixed = true)),
                radial_vein_T3_R120(volume(start = 8.249294e-07, fixed = true)),
                vertebral_vein_L126(volume(start = 2.1003025e-06, fixed = true)),
                brachiocephalic_vein_L128(volume(start = 4.0889992e-07, fixed = true)),
                subclavian_vein_L130(volume(start = 3.4987704e-07, fixed = true)),
                internal_jugular_vein_L156(volume(start = 9.440625e-06, fixed = true)),
                external_jugular_vein_L132(volume(start = 1.070993e-06, fixed = true)),
                subclavian_vein_L134(volume(start = 1.5683447e-06, fixed = true)),
                axillary_vein_L136(volume(start = 5.7208094e-06, fixed = true)),
                brachial_vein_L138(q_out(start = 2.4863045e-06, fixed = true), volume(start = 1.1129905e-06, fixed = true)),
                brachial_vein_L148(volume(start = 1.0035685e-06, fixed = true)),
                brachial_vein_L142(volume(start = 1.5387603e-07, fixed = true)),
                ulnar_vein_T7_L144(volume(start = 1.2978114e-06, fixed = true)),
                brachial_vein_L152(volume(start = 9.701666e-08, fixed = true)),
                radial_vein_T3_L154(volume(start = 8.3250654e-07, fixed = true)),
                mesenteric_artery(q_in(start = 6.286997e-06, fixed = true), volume(start = 6.431055e-06, fixed = true)),
                splanchnic_tissue(volume(start = 0.0002609008, fixed = true)),
                splanchnic_vein(volume(start = 8.632407e-06, fixed = true)),
                coronary_arteries(q_in(start = 2.8464565e-06, fixed = true), volume(start = 3.7086824e-08, fixed = true)),
                cardiac_tissue(volume(start = 0.000116915646, fixed = true)),
                coronary_veins(volume(start = 2.0417211e-08, fixed = true)),
                brachial_L82_HeartLevel(q_in(start = 2.4621268e-06, fixed = true), volume(start = 3.034536e-06, fixed = true))),
              heartComponent(
                tricuspidValve(open(start = true, fixed = true)),
                pulmonaryValve(open(start = false, fixed = true)),
                mitralValve(open(start = true, fixed = true)),
                aorticValve(open(start = false, fixed = true)),
                ventricles(
                  LV_wall(ym(start = 3.5156689, fixed = true), SL(start = 2.0658917, fixed = true)),
                  SEP_wall(SL(start = 2.0986855, fixed = true)),
                  RV_wall(SL(start = 2.0593424, fixed = true)), V_LV(start = 0.00013542686, fixed = true), V_RV(start = 0.00013149776, fixed = true)),
                ra(volume(start = 8.519468e-06, fixed = true)),
                la(volume(start = 3.8869373e-05, fixed = true)),
                sa_node(cardiac_cycle(start = 0.97716993, fixed = true))),
              pulmonaryComponent(
                c_pa(volume(start = 9.330388e-05, fixed = true)),
                c_pv(volume(start = 0.00045163467 + settings.V_PV_init,  fixed = true))));
        end CVS_optimized_BVT_init;

        model mergeTest
          extends CVS_optimized_BVT_init(
            settings(
              V_PV_init=-0.0003125,
              heart_R_vlv=20440.23,
              heart_R_LA=3044654,
              heart_atr_D_A=55215000,
              heart_vntr_xi_Vw=0.9014874,
              heart_vntr_xi_AmRef=1.111598,
              heart_vntr_k_passive=3.725000e+01,
              heart_vntr_Lsref=1.900000e+00,
              chi_phi=0.9210938,
              baro_fsn=0.0383,
              pulm_R=3628209,
              pulm_q_nom_maxq=0.0004958,
              heart_atr_D_0=14055120,
              heart_atr_TS=1.882500e-01,
              heart_atr_TR=2.631250e-01,
              heart_vntr_D_0=18.15655,
              heart_vntr_D_A=2846.905,
              heart_vntr_TS=8.825000e-02,
              heart_vntr_TR=2.975000e-01,
              heart_vntr_Tact=8.000000e-02,
              tissues_chi_Ra=
                            14.688,
              tissues_chi_C=
                           -0.18),
            useAutonomousPhi(y=true),
            heartComponent(calciumMechanics(
                usePhiInput=false,
                TS=settings.heart_atr_TS,
                TS_maxAct=settings.heart_atr_TS,
                TR=settings.heart_atr_TR,
                TR_maxAct=settings.heart_atr_TR), pericardium(
                enabled=true,
                V0=0.0008,
                s=10)),
            pulmonaryComponent(r_pa(useNonlinearResistance=true)));
          annotation (experiment(
              StopTime=30,
              Interval=0.01,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end mergeTest;

        model CVS_baseline_fastBaro_init "Steady state initialization from 2020-11-26 20:21:51.384973 at time 599.88"
          extends Identification.Results.AdjustPVloop_optim(
              SystemicComponent(
                baroreflex_system(
                  baroreflex(phi(start = 0.25674924, fixed = true)),
                  baroreceptor_aortic(epsilon(start = 1.5530832, fixed = true), s(start = 0.80067515, fixed = true)),
                  baroreceptor_carotid(epsilon(start = 1.1802006, fixed = true), s(start = 0.8740537, fixed = true))),
                ascending_aorta_A(q(start = 5.238356e-06, fixed = true), vol1(start = 7.869863e-06, fixed = true), vol2(start = 7.869491e-06, fixed = true)),
                ascending_aorta_B(q_in(start = 1.0480721e-05, fixed = true), volume(start = 2.4644087e-05, fixed = true)),
                ascending_aorta_C(q_in(start = 1.7377888e-05, fixed = true), volume(start = 2.2793965e-05, fixed = true)),
                ascending_aorta_D(q_in(start = 2.6055804e-05, fixed = true), volume(start = 2.0809415e-05, fixed = true)),
                aortic_arch_C2(q_in(start = 3.385809e-05, fixed = true), volume(start = 1.9036119e-05, fixed = true)),
                brachiocephalic_trunk_C4(q_in(start = -4.0518994e-06, fixed = true), volume(start = 1.2959389e-05, fixed = true)),
                aortic_arch_C46(q_in(start = 4.4906774e-05, fixed = true), volume(start = 1.1280376e-05, fixed = true)),
                aortic_arch_C64(q_in(start = 5.3487584e-05, fixed = true), volume(start = 7.7443065e-06, fixed = true)),
                aortic_arch_C94(q_in(start = 5.406914e-05, fixed = true), volume(start = 4.2478296e-05, fixed = true)),
                thoracic_aorta_C96(q_in(start = 6.72108e-05, fixed = true), volume(start = 7.631959e-06, fixed = true)),
                thoracic_aorta_C100(q_in(start = 6.944493e-05, fixed = true), volume(start = 5.870152e-06, fixed = true)),
                thoracic_aorta_C104(q_in(start = 7.109278e-05, fixed = true), volume(start = 1.1058997e-05, fixed = true)),
                thoracic_aorta_C108(q_in(start = 7.3923424e-05, fixed = true), volume(start = 3.6330086e-06, fixed = true)),
                thoracic_aorta_C112(q_in(start = 7.482002e-05, fixed = true), volume(start = 5.9403235e-05, fixed = true)),
                abdominal_aorta_C114(q_in(start = 7.3239564e-05, fixed = true), volume(start = 1.2282215e-06, fixed = true)),
                abdominal_aorta_C136(q_in(start = 6.325583e-05, fixed = true), volume(start = 5.153277e-06, fixed = true)),
                abdominal_aorta_C164(q_in(start = 5.5602937e-05, fixed = true), volume(start = 1.5295808e-06, fixed = true)),
                abdominal_aorta_C176(q_in(start = 4.6545607e-05, fixed = true), volume(start = 4.1117264e-06, fixed = true)),
                abdominal_aorta_C188(q_in(start = 3.734582e-05, fixed = true), volume(start = 1.6427552e-05, fixed = true)),
                abdominal_aorta_C192(q_in(start = 3.4643086e-05, fixed = true), volume(start = 1.0212353e-05, fixed = true)),
                celiac_trunk_C116(volume(start = 0.0003482427, fixed = true)),
                renal_L166(volume(start = 0.00031456648, fixed = true)),
                renal_R178(volume(start = 0.00031174353, fixed = true)),
                common_iliac_R216(q_in(start = 1.6320022e-05, fixed = true), volume(start = 8.49252e-06, fixed = true)),
                internal_iliac_T1_R218(volume(start = 0.00017118936, fixed = true)),
                external_iliac_R220(q_in(start = 9.347613e-06, fixed = true), volume(start = 4.878905e-06, fixed = true)),
                femoral_R222(q_in(start = 8.608351e-06, fixed = true), volume(start = 1.3968731e-06, fixed = true)),
                profundus_T2_R224(volume(start = 0.00019632085, fixed = true)),
                femoral_R226(q_in(start = 2.7709561e-06, fixed = true), volume(start = 1.1750567e-05, fixed = true)),
                popliteal_R228(q_in(start = 1.9047498e-06, fixed = true), volume(start = 3.6140793e-06, fixed = true)),
                anterior_tibial_T3_R230(volume(start = 2.574712e-05, fixed = true)),
                popliteal_R232(q_in(start = 9.0364904e-07, fixed = true), volume(start = 1.8245761e-07, fixed = true)),
                tibiofibular_trunk_R234(q_in(start = 8.969229e-07, fixed = true), volume(start = 7.4183407e-07, fixed = true)),
                posterior_tibial_T4_R236(volume(start = 2.810454e-05, fixed = true)),
                common_iliac_L194(q_in(start = 1.6151322e-05, fixed = true), volume(start = 8.123013e-06, fixed = true)),
                internal_iliac_T1_L196(volume(start = 0.00017119056, fixed = true)),
                external_iliac_L198(q_in(start = 9.311744e-06, fixed = true), volume(start = 4.8794177e-06, fixed = true)),
                femoral_L200(q_in(start = 8.587835e-06, fixed = true), volume(start = 1.3970241e-06, fixed = true)),
                profundus_T2_L202(volume(start = 0.00019632177, fixed = true)),
                femoral_L204(q_in(start = 2.7526319e-06, fixed = true), volume(start = 1.175211e-05, fixed = true)),
                popliteal_L206(q_in(start = 1.9022294e-06, fixed = true), volume(start = 3.614517e-06, fixed = true)),
                anterior_tibial_T3_L208(volume(start = 2.5747244e-05, fixed = true)),
                popliteal_L210(q_in(start = 9.037239e-07, fixed = true), volume(start = 1.8246978e-07, fixed = true)),
                tibiofibular_trunk_L212(q_in(start = 8.970837e-07, fixed = true), volume(start = 7.419062e-07, fixed = true)),
                posterior_tibial_T4_L214(volume(start = 2.8104683e-05, fixed = true)),
                subclavian_R28(q_in(start = 2.5023255e-06, fixed = true), volume(start = 1.9896115e-06, fixed = true)),
                subclavian_R30(q_in(start = 1.2695536e-06, fixed = true), volume(start = 2.615509e-06, fixed = true)),
                axillary_R32(q_in(start = 2.0655077e-06, fixed = true), volume(start = 3.009745e-06, fixed = true)),
                brachial_R34(q_in(start = 2.7110734e-06, fixed = true), volume(start = 4.405144e-06, fixed = true)),
                ulnar_T2_R36(q_in(start = 1.6416628e-06, fixed = true), volume(start = 2.3593721e-07, fixed = true)),
                ulnar_T2_R42(volume(start = 5.90531e-05, fixed = true)),
                radial_T1_R44(volume(start = 4.8377624e-05, fixed = true)),
                subclavian_L66(q_in(start = 2.1564822e-06, fixed = true), volume(start = 4.7363333e-06, fixed = true)),
                subclavian_L78(q_in(start = 1.6647504e-06, fixed = true), volume(start = 1.9430443e-06, fixed = true)),
                axillary_L80(q_in(start = 2.1710882e-06, fixed = true), volume(start = 3.007266e-06, fixed = true)),
                brachial_L82(q_in(start = 2.9193238e-06, fixed = true), volume(start = 1.4612259e-06, fixed = true)),
                ulnar_T2_L84(q_in(start = 1.6210557e-06, fixed = true), volume(start = 2.3547219e-07, fixed = true)),
                ulnar_T2_L90(volume(start = 5.9032674e-05, fixed = true)),
                radial_T1_L92(volume(start = 5.126903e-05, fixed = true)),
                common_carotid_R6_A(q_in(start = -1.8979384e-06, fixed = true), volume(start = 4.862136e-06, fixed = true)),
                common_carotid_R6_B(q_in(start = 3.5392188e-07, fixed = true), volume(start = 4.1499006e-06, fixed = true)),
                common_carotid_R6_C(q_in(start = 2.294554e-06, fixed = true), volume(start = 3.1025977e-06, fixed = true)),
                internal_carotid_R8_A(q_in(start = 1.6707688e-06, fixed = true), volume(start = 1.245021e-06, fixed = true)),
                internal_carotid_R8_B(q_in(start = 1.9129216e-06, fixed = true), volume(start = 7.892016e-07, fixed = true)),
                internal_carotid_R8_C(volume(start = 7.008938e-05, fixed = true)),
                external_carotid_T2_R26(volume(start = 7.031905e-05, fixed = true)),
                common_carotid_L48_A(q_in(start = -4.5173874e-06, fixed = true), volume(start = 5.2723663e-06, fixed = true)),
                common_carotid_L48_B(q_in(start = -2.129048e-06, fixed = true), volume(start = 4.638095e-06, fixed = true)),
                common_carotid_L48_C(q_in(start = 7.929517e-08, fixed = true), volume(start = 4.1221583e-06, fixed = true)),
                common_carotid_L48_D(q_in(start = 2.1033102e-06, fixed = true), volume(start = 3.340532e-06, fixed = true)),
                internal_carotid_L50_A(q_in(start = 1.6695535e-06, fixed = true), volume(start = 1.2479665e-06, fixed = true)),
                internal_carotid_L50_B(q_in(start = 1.9287497e-06, fixed = true), volume(start = 7.9102614e-07, fixed = true)),
                internal_carotid_L50_C(volume(start = 7.009793e-05, fixed = true)),
                external_carotid_T2_L62(volume(start = 7.0322756e-05, fixed = true)),
                vertebral_L2(volume(start = 6.465846e-05, fixed = true)),
                vertebral_R272(volume(start = 6.465947e-05, fixed = true)),
                superior_vena_cava_C2(volume(start = 1.5388658e-06, fixed = true)),
                superior_vena_cava_C88(volume(start = 2.6518564e-06, fixed = true)),
                inferior_vena_cava_C8(volume(start = 2.3079924e-06, fixed = true)),
                hepatic_vein_T1_C10(volume(start = 9.0490266e-07, fixed = true)),
                inferior_vena_cava_C12(volume(start = 6.2623876e-06, fixed = true)),
                inferior_vena_cava_C16(volume(start = 4.924892e-06, fixed = true)),
                renal_vein_T1_R18(volume(start = 1.4511223e-06, fixed = true)),
                inferior_vena_cava_C20(volume(start = 3.4359525e-07, fixed = true)),
                renal_vein_T1_L22(volume(start = 1.2821928e-06, fixed = true)),
                inferior_vena_cava_C24(volume(start = 1.3705571e-05, fixed = true)),
                common_iliac_vein_L56(volume(start = 3.3636425e-06, fixed = true)),
                common_iliac_vein_R26(volume(start = 3.0916908e-06, fixed = true)),
                external_iliac_vein_R28(volume(start = 4.509187e-07, fixed = true)),
                internal_iliac_vein_T1_R30(volume(start = 1.9287709e-06, fixed = true)),
                external_iliac_vein_R32(volume(start = 5.231693e-06, fixed = true)),
                femoral_vein_R34(volume(start = 2.2742992e-07, fixed = true)),
                femoral_vein_R38(volume(start = 1.8030373e-06, fixed = true)),
                profunda_femoris_vein_T2_R40(volume(start = 4.9924033e-06, fixed = true)),
                femoral_vein_R42(volume(start = 1.275544e-05, fixed = true)),
                femoral_vein_R46(volume(start = 7.024904e-07, fixed = true)),
                popliteal_vein_R48(volume(start = 2.8592237e-06, fixed = true)),
                anterior_tibial_vein_T4_R50(volume(start = 8.0649306e-07, fixed = true)),
                popliteal_vein_R52(volume(start = 6.3603414e-07, fixed = true)),
                posterior_tibial_vein_T6_R54(volume(start = 1.2267082e-06, fixed = true)),
                external_iliac_vein_L58(volume(start = 4.5148514e-07, fixed = true)),
                internal_iliac_vein_T1_L60(volume(start = 1.983906e-06, fixed = true)),
                external_iliac_vein_L62(volume(start = 5.1363713e-06, fixed = true)),
                femoral_vein_L64(volume(start = 2.658882e-07, fixed = true)),
                femoral_vein_L68(volume(start = 1.8030931e-06, fixed = true)),
                profunda_femoris_vein_T2_L70(volume(start = 4.992536e-06, fixed = true)),
                femoral_vein_L72(volume(start = 1.2755835e-05, fixed = true)),
                femoral_vein_L76(volume(start = 7.0250786e-07, fixed = true)),
                popliteal_vein_L78(volume(start = 2.8593124e-06, fixed = true)),
                anterior_tibial_vein_T4_L80(volume(start = 8.065202e-07, fixed = true)),
                popliteal_vein_L82(volume(start = 6.360578e-07, fixed = true)),
                posterior_tibial_vein_T6_L84(volume(start = 1.2267511e-06, fixed = true)),
                brachiocephalic_vein_R90(volume(start = 3.1180687e-06, fixed = true)),
                brachiocephalic_vein_L124(volume(start = 5.8437645e-06, fixed = true)),
                vertebral_vein_R92(volume(start = 1.959957e-06, fixed = true)),
                brachiocephalic_vein_R94(volume(start = 7.068721e-07, fixed = true)),
                subclavian_vein_R96(volume(start = 3.4371172e-07, fixed = true)),
                internal_jugular_vein_R122(volume(start = 1.3585578e-05, fixed = true)),
                external_jugular_vein_R98(volume(start = 9.526652e-07, fixed = true)),
                subclavian_vein_R100(volume(start = 1.4057921e-06, fixed = true)),
                axillary_vein_R102(volume(start = 4.94072e-06, fixed = true)),
                brachial_vein_R104(volume(start = 9.670787e-07, fixed = true)),
                brachial_vein_R114(volume(start = 8.6890054e-07, fixed = true)),
                brachial_vein_R108(volume(start = 1.3356214e-07, fixed = true)),
                ulnar_vein_T7_R110(volume(start = 1.1103261e-06, fixed = true)),
                brachial_vein_R118(volume(start = 8.393498e-08, fixed = true)),
                radial_vein_T3_R120(volume(start = 6.98352e-07, fixed = true)),
                vertebral_vein_L126(volume(start = 1.8328561e-06, fixed = true)),
                brachiocephalic_vein_L128(volume(start = 3.572458e-07, fixed = true)),
                subclavian_vein_L130(volume(start = 3.0567557e-07, fixed = true)),
                internal_jugular_vein_L156(volume(start = 8.247264e-06, fixed = true)),
                external_jugular_vein_L132(volume(start = 9.341989e-07, fixed = true)),
                subclavian_vein_L134(volume(start = 1.3701552e-06, fixed = true)),
                axillary_vein_L136(volume(start = 4.9972105e-06, fixed = true)),
                brachial_vein_L138(volume(start = 9.671567e-07, fixed = true)),
                brachial_vein_L148(volume(start = 8.703139e-07, fixed = true)),
                brachial_vein_L142(volume(start = 1.335736e-07, fixed = true)),
                ulnar_vein_T7_L144(volume(start = 1.1103241e-06, fixed = true)),
                brachial_vein_L152(volume(start = 8.408397e-08, fixed = true)),
                radial_vein_T3_L154(volume(start = 7.033602e-07, fixed = true)),
                mesenteric_artery(q_in(start = 7.374181e-06, fixed = true), volume(start = 6.286288e-06, fixed = true)),
                splanchnic_tissue(volume(start = 0.0002525803, fixed = true)),
                splanchnic_vein(volume(start = 7.5416883e-06, fixed = true)),
                coronary_arteries(q_in(start = 2.5840454e-06, fixed = true), volume(start = 3.6559783e-08, fixed = true)),
                cardiac_tissue(volume(start = 0.00011358586, fixed = true)),
                coronary_veins(volume(start = 1.6802138e-08, fixed = true)),
                brachial_L82_HeartLevel(q_in(start = 2.6841988e-06, fixed = true), volume(start = 2.9423397e-06, fixed = true))),
              heartComponent(
                tricuspidValve(open(start = true, fixed = true)),
                pulmonaryValve(open(start = false, fixed = true)),
                mitralValve(open(start = true, fixed = true)),
                aorticValve(open(start = false, fixed = true)),
                ventricles(
                  LV_wall(ym(start = 3.3871994, fixed = true), SL(start = 1.9155309, fixed = true), xm(start = -4.6280074, fixed = false)),
                  SEP_wall(SL(start = 1.9361405, fixed = true), xm(start = 1.9063469, fixed = false)),
                  RV_wall(SL(start = 1.9362881, fixed = true), xm(start = 5.547496, fixed = false)), V_LV(start = 0.00011784931, fixed = true), V_RV(start = 0.00012388783, fixed = true)),
                ra(volume(start = 1.1085245e-05, fixed = true)),
                la(volume(start = 4.5752684e-05, fixed = true)),
                sa_node(cardiac_cycle(start = 0.98068154, fixed = true))),
              pulmonaryComponent(
                c_pa(volume(start = 5.708838e-05, fixed = true)),
                c_pv(volume(start = 0.00032910754, fixed = true))));
        end CVS_baseline_fastBaro_init;

        model OlufsenTriSeg_optimized1_init "Steady state initialization from 2021-05-06 21:29:10.433709 at time 599.62"
          extends
            ADAN_main.SystemicTree.Identification.Results.OlufsenTriSeg_optimized1(
              SystemicComponent(
                baroreflex_system(
                  baroreflex(phi_mean(start = 0.2504567, fixed = true), phi(start = 0.24661149, fixed = true)),
                  baroreceptor_aortic(fbr_int(start = 14.02404, fixed = true), epsilon(start = 1.5292943, fixed = true), s(start = 0.8019683, fixed = true)),
                  baroreceptor_carotid(fbr_int(start = 0.24131908, fixed = true), epsilon(start = 1.1715816, fixed = true), s(start = 0.89082366, fixed = true))),
                ascending_aorta_A(q(start = -2.497262e-06, fixed = true), vol1(start = 8.598188e-06, fixed = true), vol2(start = 8.598481e-06, fixed = true)),
                ascending_aorta_B(q_in(start = -4.928647e-06, fixed = true), volume(start = 2.601911e-05, fixed = true)),
                ascending_aorta_C(q_in(start = -1.2589853e-05, fixed = true), volume(start = 2.406705e-05, fixed = true)),
                ascending_aorta_D(q_in(start = -1.6254455e-05, fixed = true), volume(start = 2.1974703e-05, fixed = true)),
                aortic_arch_C2(q_in(start = -1.9147197e-05, fixed = true), volume(start = 2.0107176e-05, fixed = true)),
                brachiocephalic_trunk_C4(q_in(start = 2.0549563e-05, fixed = true), volume(start = 1.3627599e-05, fixed = true)),
                aortic_arch_C46(q_in(start = -4.1810938e-05, fixed = true), volume(start = 1.1917445e-05, fixed = true)),
                aortic_arch_C64(q_in(start = -6.162082e-05, fixed = true), volume(start = 8.183917e-06, fixed = true)),
                aortic_arch_C94(q_in(start = -6.363597e-05, fixed = true), volume(start = 4.501003e-05, fixed = true)),
                thoracic_aorta_C96(q_in(start = -5.6430534e-05, fixed = true), volume(start = 8.090044e-06, fixed = true)),
                thoracic_aorta_C100(q_in(start = -5.4792636e-05, fixed = true), volume(start = 6.226652e-06, fixed = true)),
                thoracic_aorta_C104(q_in(start = -5.3325017e-05, fixed = true), volume(start = 1.1747513e-05, fixed = true)),
                thoracic_aorta_C108(q_in(start = -4.979814e-05, fixed = true), volume(start = 3.8609596e-06, fixed = true)),
                thoracic_aorta_C112(q_in(start = -4.856243e-05, fixed = true), volume(start = 6.4179236e-05, fixed = true)),
                abdominal_aorta_C114(q_in(start = 9.452708e-06, fixed = true), volume(start = 1.3263846e-06, fixed = true)),
                abdominal_aorta_C136(q_in(start = -2.5703491e-06, fixed = true), volume(start = 5.578249e-06, fixed = true)),
                abdominal_aorta_C164(q_in(start = -3.0682463e-06, fixed = true), volume(start = 1.6567186e-06, fixed = true)),
                abdominal_aorta_C176(q_in(start = -1.3418345e-05, fixed = true), volume(start = 4.4624535e-06, fixed = true)),
                abdominal_aorta_C188(q_in(start = -2.0703901e-05, fixed = true), volume(start = 1.8004192e-05, fixed = true)),
                abdominal_aorta_C192(q_in(start = 2.1879803e-06, fixed = true), volume(start = 1.128601e-05, fixed = true)),
                celiac_trunk_C116(volume(start = 0.00034088033, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                renal_L166(volume(start = 0.00030793404, fixed = true)),
                renal_R178(volume(start = 0.0003051728, fixed = true)),
                common_iliac_R216(q_in(start = 8.7540875e-06, fixed = true), volume(start = 9.474735e-06, fixed = true)),
                internal_iliac_T1_R218(volume(start = 0.00016764645, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                external_iliac_R220(q_in(start = 1.572382e-05, fixed = true), volume(start = 5.2979703e-06, fixed = true)),
                femoral_R222(q_in(start = 1.9686446e-05, fixed = true), volume(start = 1.5212968e-06, fixed = true)),
                profundus_T2_R224(volume(start = 0.00019227955, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                femoral_R226(q_in(start = 1.1940836e-05, fixed = true), volume(start = 1.3219107e-05, fixed = true)),
                popliteal_R228(q_in(start = 5.855977e-06, fixed = true), volume(start = 4.0533305e-06, fixed = true)),
                anterior_tibial_T3_R230(volume(start = 2.535224e-05, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                popliteal_R232(q_in(start = 1.93622e-06, fixed = true), volume(start = 1.9491702e-07, fixed = true)),
                tibiofibular_trunk_R234(q_in(start = 1.8642646e-06, fixed = true), volume(start = 7.9232797e-07, fixed = true)),
                posterior_tibial_T4_R236(volume(start = 2.7539598e-05, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                common_iliac_L194(q_in(start = 9.353148e-06, fixed = true), volume(start = 9.055247e-06, fixed = true)),
                internal_iliac_T1_L196(volume(start = 0.00016764853, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                external_iliac_L198(q_in(start = 1.5568183e-05, fixed = true), volume(start = 5.296139e-06, fixed = true)),
                femoral_L200(q_in(start = 1.950899e-05, fixed = true), volume(start = 1.520786e-06, fixed = true)),
                profundus_T2_L202(volume(start = 0.00019228172, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                femoral_L204(q_in(start = 1.1768852e-05, fixed = true), volume(start = 1.3216754e-05, fixed = true)),
                popliteal_L206(q_in(start = 5.806311e-06, fixed = true), volume(start = 4.052741e-06, fixed = true)),
                anterior_tibial_T3_L208(volume(start = 2.5352703e-05, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                popliteal_L210(q_in(start = 1.9290412e-06, fixed = true), volume(start = 1.9490015e-07, fixed = true)),
                tibiofibular_trunk_L212(q_in(start = 1.8582606e-06, fixed = true), volume(start = 7.922851e-07, fixed = true)),
                posterior_tibial_T4_L214(volume(start = 2.754016e-05, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                subclavian_R28(q_in(start = 3.237411e-06, fixed = true), volume(start = 2.0844714e-06, fixed = true)),
                subclavian_R30(q_in(start = 2.4761997e-07, fixed = true), volume(start = 2.726866e-06, fixed = true)),
                axillary_R32(q_in(start = -3.6539348e-07, fixed = true), volume(start = 3.1150414e-06, fixed = true)),
                brachial_R34(q_in(start = -2.2251434e-07, fixed = true), volume(start = 4.570631e-06, fixed = true)),
                ulnar_T2_R36(q_in(start = 1.948535e-06, fixed = true), volume(start = 2.4088723e-07, fixed = true)),
                ulnar_T2_R42(volume(start = 5.8063186e-05, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                radial_T1_R44(volume(start = 4.7680194e-05, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                subclavian_L66(q_in(start = 1.6474916e-06, fixed = true), volume(start = 4.9562227e-06, fixed = true)),
                subclavian_L78(q_in(start = -7.8437733e-07, fixed = true), volume(start = 2.0234102e-06, fixed = true)),
                axillary_L80(q_in(start = -6.8300164e-07, fixed = true), volume(start = 3.1167697e-06, fixed = true)),
                brachial_L82(q_in(start = 2.365608e-06, fixed = true), volume(start = 1.513865e-06, fixed = true)),
                ulnar_T2_L84(q_in(start = 1.914884e-06, fixed = true), volume(start = 2.4020386e-07, fixed = true)),
                ulnar_T2_L90(volume(start = 5.8039168e-05, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                radial_T1_L92(volume(start = 5.054257e-05, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                common_carotid_R6_A(q_in(start = 1.3672416e-05, fixed = true), volume(start = 5.1764728e-06, fixed = true)),
                common_carotid_R6_B(q_in(start = 1.1105377e-05, fixed = true), volume(start = 4.4161725e-06, fixed = true)),
                common_carotid_R6_C(q_in(start = 8.363719e-06, fixed = true), volume(start = 3.2971648e-06, fixed = true)),
                internal_carotid_R8_A(q_in(start = 3.3738231e-06, fixed = true), volume(start = 1.2770621e-06, fixed = true)),
                internal_carotid_R8_B(q_in(start = 2.9495775e-06, fixed = true), volume(start = 8.0748686e-07, fixed = true)),
                internal_carotid_R8_C(volume(start = 6.860081e-05, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                external_carotid_T2_R26(volume(start = 6.8864574e-05, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                common_carotid_L48_A(q_in(start = 1.8912111e-05, fixed = true), volume(start = 5.5965743e-06, fixed = true)),
                common_carotid_L48_B(q_in(start = 1.6777689e-05, fixed = true), volume(start = 4.902902e-06, fixed = true)),
                common_carotid_L48_C(q_in(start = 1.35676e-05, fixed = true), volume(start = 4.342606e-06, fixed = true)),
                common_carotid_L48_D(q_in(start = 9.795013e-06, fixed = true), volume(start = 3.5084472e-06, fixed = true)),
                internal_carotid_L50_A(q_in(start = 3.6191695e-06, fixed = true), volume(start = 1.2729195e-06, fixed = true)),
                internal_carotid_L50_B(q_in(start = 3.024069e-06, fixed = true), volume(start = 8.0480044e-07, fixed = true)),
                internal_carotid_L50_C(volume(start = 6.859894e-05, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                external_carotid_T2_L62(volume(start = 6.885707e-05, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                vertebral_L2(volume(start = 6.330624e-05, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                vertebral_R272(volume(start = 6.331232e-05, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                superior_vena_cava_C2(volume(start = 4.893981e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                superior_vena_cava_C88(volume(start = 8.435547e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                inferior_vena_cava_C8(volume(start = 7.3423616e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                hepatic_vein_T1_C10(volume(start = 2.8793172e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                inferior_vena_cava_C12(volume(start = 1.9944835e-05, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                inferior_vena_cava_C16(volume(start = 1.570001e-05, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                renal_vein_T1_R18(volume(start = 4.629284e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                inferior_vena_cava_C20(volume(start = 1.0954028e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                renal_vein_T1_L22(volume(start = 4.0920245e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                inferior_vena_cava_C24(volume(start = 4.3769942e-05, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                common_iliac_vein_L56(volume(start = 1.07656315e-05, fixed = true), open(start = true, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                common_iliac_vein_R26(volume(start = 9.893464e-06, fixed = true), open(start = true, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                external_iliac_vein_R28(volume(start = 1.4433576e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                internal_iliac_vein_T1_R30(volume(start = 6.184813e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                external_iliac_vein_R32(volume(start = 1.6782948e-05, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                femoral_vein_R34(volume(start = 7.29697e-07, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                femoral_vein_R38(volume(start = 5.7921948e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                profunda_femoris_vein_T2_R40(volume(start = 1.6320293e-05, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                femoral_vein_R42(volume(start = 4.1096344e-05, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                femoral_vein_R46(volume(start = 2.2635227e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                popliteal_vein_R48(volume(start = 9.245765e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                anterior_tibial_vein_T4_R50(volume(start = 2.9984376e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                popliteal_vein_R52(volume(start = 2.0574714e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                posterior_tibial_vein_T6_R54(volume(start = 4.2511733e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                external_iliac_vein_L58(volume(start = 1.4454274e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                internal_iliac_vein_T1_L60(volume(start = 6.3630787e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                external_iliac_vein_L62(volume(start = 1.6479235e-05, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                femoral_vein_L64(volume(start = 8.532181e-07, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                femoral_vein_L68(volume(start = 5.7932234e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                profunda_femoris_vein_T2_L70(volume(start = 1.632263e-05, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                femoral_vein_L72(volume(start = 4.1102547e-05, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                femoral_vein_L76(volume(start = 2.2638494e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                popliteal_vein_L78(volume(start = 9.2470245e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                anterior_tibial_vein_T4_L80(volume(start = 2.998515e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                popliteal_vein_L82(volume(start = 2.057763e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                posterior_tibial_vein_T6_L84(volume(start = 4.251539e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                brachiocephalic_vein_R90(volume(start = 9.923045e-06, fixed = true), open(start = true, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                brachiocephalic_vein_L124(volume(start = 1.861109e-05, fixed = true), open(start = true, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                vertebral_vein_R92(volume(start = 6.4003475e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                brachiocephalic_vein_R94(volume(start = 2.249759e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                subclavian_vein_R96(volume(start = 1.0941303e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                internal_jugular_vein_R122(volume(start = 4.3284257e-05, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                external_jugular_vein_R98(volume(start = 3.1473917e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                subclavian_vein_R100(volume(start = 4.4772423e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                axillary_vein_R102(volume(start = 1.5760521e-05, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                brachial_vein_R104(volume(start = 3.3269887e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                brachial_vein_R114(volume(start = 3.0247613e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                brachial_vein_R108(volume(start = 4.6317277e-07, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                ulnar_vein_T7_R110(volume(start = 4.0912e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                brachial_vein_R118(volume(start = 2.9398632e-07, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                radial_vein_T3_R120(volume(start = 2.6061803e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                vertebral_vein_L126(volume(start = 5.980317e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                brachiocephalic_vein_L128(volume(start = 1.1378104e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                subclavian_vein_L130(volume(start = 9.737217e-07, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                internal_jugular_vein_L156(volume(start = 2.6315005e-05, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                external_jugular_vein_L132(volume(start = 3.085994e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                subclavian_vein_L134(volume(start = 4.366734e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                axillary_vein_L136(volume(start = 1.5952457e-05, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                brachial_vein_L138(volume(start = 3.3289682e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                brachial_vein_L148(volume(start = 3.0426065e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                brachial_vein_L142(volume(start = 4.6343152e-07, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                ulnar_vein_T7_L144(volume(start = 4.0918203e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                brachial_vein_L152(volume(start = 2.9578072e-07, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                radial_vein_T3_L154(volume(start = 2.6229252e-06, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                mesenteric_artery(q_in(start = 5.89704e-06, fixed = true), volume(start = 6.7313886e-06, fixed = true)),
                splanchnic_tissue(volume(start = 0.00024725468, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                splanchnic_vein(volume(start = 2.404199e-05, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                coronary_arteries(q_in(start = 3.33544e-06, fixed = true), volume(start = 3.7663227e-08, fixed = true)),
                cardiac_tissue(volume(start = 0.00011254761, fixed = true), phi_delayed(start = 0.2546652, fixed = true)),
                coronary_veins(volume(start = 6.031164e-08, fixed = true),
                  compliant_vessel(A(start = 0.068331495, fixed = true))),
                brachial_L82_HeartLevel(q_in(start = 1.4045615e-07, fixed = true), volume(start = 3.0458991e-06, fixed = true))),
              heartComponent(
                tricuspidValve(open(start = true, fixed = true)),
                pulmonaryValve(open(start = false, fixed = true), BP_max(start = 0.0, fixed = true), BP_min(start = 26600.0, fixed = true), CO_acc(start = 0.0, fixed = true)),
                mitralValve(open(start = true, fixed = true), BP_max(start = 819.77704, fixed = true), BP_min(start = 523.6328, fixed = true), CO_acc(start = 4.933998e-05, fixed = true)),
                aorticValve(open(start = false, fixed = true), BP_max(start = 15527.607, fixed = true), BP_min(start = 11479.871, fixed = true), CO_acc(start = 9.218565e-05, fixed = true)),
                ventricles(
                  LV_wall(ym(start = 3.214754, fixed = true), SL(start = 1.8856231, fixed = true)),
                  SEP_wall(SL(start = 1.9268122, fixed = true)),
                  RV_wall(SL(start = 1.8412867, fixed = true)), V_LV(start = 8.427093e-05, fixed = true), V_RV(start = 7.9399455e-05, fixed = true), currentWork_LV(start = 1.3267448, fixed = true), currentWork_RV(start = 0.219809, fixed = true)),
                ra(volume(start = 6.8981926e-06, fixed = true), currentWork(start = 4.214491, fixed = true)),
                la(volume(start = 2.7994165e-05, fixed = true), currentWork(start = -3.8559382, fixed = true)),
                sa_node(cardiac_cycle(start = 0.6545373, fixed = true))),
              pulmonaryComponent(
                c_pa(volume(start = 3.3511074e-05, fixed = true)),
                c_pv(volume(start = 0.00036976067 + settings.V_PV_init, fixed = true))),
            settings(
              V_PV_init=0,
              baro_tau_s=93,
              baro_fsn(displayUnit="1/min") = 0.0355333333),
            useAutonomousPhi(y=true));
        end OlufsenTriSeg_optimized1_init;

      model OlufsenTriSeg_optimized2_init "Steady state initialization from 2021-05-14 13:57:18.502322 at time 299.5"
        extends
            ADAN_main.SystemicTree.Identification.Results.OlufsenTriSeg_optimized2(
            SystemicComponent(
              baroreflex_system(
                baroreflex(phi_mean(start = 0.25164273, fixed = true), phi(start = 0.24665853, fixed = true), f1_adj(start = 0.0030635502, fixed = true)),
                baroreceptor_aortic(fbr_int(start = 17.219315, fixed = true), epsilon(start = 1.5338292, fixed = true), s(start = 0.80714023, fixed = true)),
                baroreceptor_carotid(fbr_int(start = 9.472754, fixed = true), epsilon(start = 1.173269, fixed = true), s(start = 0.89426416, fixed = true))),
              ascending_aorta_A(q(start = 4.4594385e-06, fixed = true), vol1(start = 8.408414e-06, fixed = true), vol2(start = 8.408159e-06, fixed = true)),
              ascending_aorta_B(q_in(start = 8.927584e-06, fixed = true), volume(start = 2.5679592e-05, fixed = true)),
              ascending_aorta_C(q_in(start = 1.3817695e-05, fixed = true), volume(start = 2.3749855e-05, fixed = true)),
              ascending_aorta_D(q_in(start = 2.1216041e-05, fixed = true), volume(start = 2.1680371e-05, fixed = true)),
              aortic_arch_C2(q_in(start = 2.7867727e-05, fixed = true), volume(start = 1.9831745e-05, fixed = true)),
              brachiocephalic_trunk_C4(q_in(start = -6.5478224e-07, fixed = true), volume(start = 1.3452707e-05, fixed = true)),
              aortic_arch_C46(q_in(start = 3.448511e-05, fixed = true), volume(start = 1.1751499e-05, fixed = true)),
              aortic_arch_C64(q_in(start = 4.191827e-05, fixed = true), volume(start = 8.068118e-06, fixed = true)),
              aortic_arch_C94(q_in(start = 3.923041e-05, fixed = true), volume(start = 4.428841e-05, fixed = true)),
              thoracic_aorta_C96(q_in(start = 4.970458e-05, fixed = true), volume(start = 7.9564825e-06, fixed = true)),
              thoracic_aorta_C100(q_in(start = 5.1443567e-05, fixed = true), volume(start = 6.120813e-06, fixed = true)),
              thoracic_aorta_C104(q_in(start = 5.2697877e-05, fixed = true), volume(start = 1.153572e-05, fixed = true)),
              thoracic_aorta_C108(q_in(start = 5.4736116e-05, fixed = true), volume(start = 3.7899736e-06, fixed = true)),
              thoracic_aorta_C112(q_in(start = 5.536656e-05, fixed = true), volume(start = 6.224494e-05, fixed = true)),
              abdominal_aorta_C114(q_in(start = 4.629102e-05, fixed = true), volume(start = 1.2862216e-06, fixed = true)),
              abdominal_aorta_C136(q_in(start = 3.355048e-05, fixed = true), volume(start = 5.3972185e-06, fixed = true)),
              abdominal_aorta_C164(q_in(start = 2.285146e-05, fixed = true), volume(start = 1.6018763e-06, fixed = true)),
              abdominal_aorta_C176(q_in(start = 1.1262989e-05, fixed = true), volume(start = 4.306172e-06, fixed = true)),
              abdominal_aorta_C188(q_in(start = -7.158564e-07, fixed = true), volume(start = 1.7206263e-05, fixed = true)),
              abdominal_aorta_C192(q_in(start = -4.5073525e-06, fixed = true), volume(start = 1.0685065e-05, fixed = true)),
              celiac_trunk_C116(volume(start = 0.0003517382, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              renal_L166(volume(start = 0.00031772564, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              renal_R178(volume(start = 0.0003148776, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              common_iliac_R216(q_in(start = -3.355684e-06, fixed = true), volume(start = 8.853208e-06, fixed = true)),
              internal_iliac_T1_R218(volume(start = 0.00017298575, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              external_iliac_R220(q_in(start = -1.0522547e-05, fixed = true), volume(start = 4.998218e-06, fixed = true)),
              femoral_R222(q_in(start = -9.822761e-06, fixed = true), volume(start = 1.4301188e-06, fixed = true)),
              profundus_T2_R224(volume(start = 0.0001984499, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              femoral_R226(q_in(start = -1.64554e-05, fixed = true), volume(start = 1.1983827e-05, fixed = true)),
              popliteal_R228(q_in(start = -3.1177617e-06, fixed = true), volume(start = 3.6879587e-06, fixed = true)),
              anterior_tibial_T3_R230(volume(start = 2.6019989e-05, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              popliteal_R232(q_in(start = 3.8138833e-07, fixed = true), volume(start = 1.8456018e-07, fixed = true)),
              tibiofibular_trunk_R234(q_in(start = 5.0609344e-07, fixed = true), volume(start = 7.504733e-07, fixed = true)),
              posterior_tibial_T4_R236(volume(start = 2.843185e-05, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              common_iliac_L194(q_in(start = -3.3685885e-06, fixed = true), volume(start = 8.466765e-06, fixed = true)),
              internal_iliac_T1_L196(volume(start = 0.00017298752, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              external_iliac_L198(q_in(start = -1.0451978e-05, fixed = true), volume(start = 4.998092e-06, fixed = true)),
              femoral_L200(q_in(start = -9.73988e-06, fixed = true), volume(start = 1.4300504e-06, fixed = true)),
              profundus_T2_L202(volume(start = 0.00019845123, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              femoral_L204(q_in(start = -1.636766e-05, fixed = true), volume(start = 1.1979611e-05, fixed = true)),
              popliteal_L206(q_in(start = -3.0940007e-06, fixed = true), volume(start = 3.6864649e-06, fixed = true)),
              anterior_tibial_T3_L208(volume(start = 2.6020052e-05, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              popliteal_L210(q_in(start = 3.8314312e-07, fixed = true), volume(start = 1.8451746e-07, fixed = true)),
              tibiofibular_trunk_L212(q_in(start = 5.0718256e-07, fixed = true), volume(start = 7.503217e-07, fixed = true)),
              posterior_tibial_T4_L214(volume(start = 2.8431958e-05, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              subclavian_R28(q_in(start = 4.6321393e-06, fixed = true), volume(start = 2.059946e-06, fixed = true)),
              subclavian_R30(q_in(start = 2.8975235e-06, fixed = true), volume(start = 2.6990012e-06, fixed = true)),
              axillary_R32(q_in(start = 3.6112494e-06, fixed = true), volume(start = 3.081222e-06, fixed = true)),
              brachial_R34(q_in(start = 4.071181e-06, fixed = true), volume(start = 4.46728e-06, fixed = true)),
              ulnar_T2_R36(q_in(start = 1.9730428e-06, fixed = true), volume(start = 2.3771076e-07, fixed = true)),
              ulnar_T2_R42(volume(start = 5.9671267e-05, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              radial_T1_R44(volume(start = 4.8845603e-05, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              subclavian_L66(q_in(start = 4.9931464e-06, fixed = true), volume(start = 4.900813e-06, fixed = true)),
              subclavian_L78(q_in(start = 3.7520344e-06, fixed = true), volume(start = 2.0031966e-06, fixed = true)),
              axillary_L80(q_in(start = 4.105323e-06, fixed = true), volume(start = 3.0788271e-06, fixed = true)),
              brachial_L82(q_in(start = 3.8254893e-06, fixed = true), volume(start = 1.4847556e-06, fixed = true)),
              ulnar_T2_L84(q_in(start = 1.9659117e-06, fixed = true), volume(start = 2.374946e-07, fixed = true)),
              ulnar_T2_L90(volume(start = 5.964663e-05, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              radial_T1_L92(volume(start = 5.175845e-05, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              common_carotid_R6_A(q_in(start = -1.0277915e-06, fixed = true), volume(start = 5.090748e-06, fixed = true)),
              common_carotid_R6_B(q_in(start = 1.1597078e-06, fixed = true), volume(start = 4.3410287e-06, fixed = true)),
              common_carotid_R6_C(q_in(start = 3.1331908e-06, fixed = true), volume(start = 3.2414257e-06, fixed = true)),
              internal_carotid_R8_A(q_in(start = 2.1057574e-06, fixed = true), volume(start = 1.268036e-06, fixed = true)),
              internal_carotid_R8_B(q_in(start = 2.3668963e-06, fixed = true), volume(start = 8.0259133e-07, fixed = true)),
              internal_carotid_R8_C(volume(start = 7.081984e-05, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              external_carotid_T2_R26(volume(start = 7.103616e-05, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              common_carotid_L48_A(q_in(start = -3.9865945e-06, fixed = true), volume(start = 5.5180763e-06, fixed = true)),
              common_carotid_L48_B(q_in(start = -1.7312266e-06, fixed = true), volume(start = 4.8437973e-06, fixed = true)),
              common_carotid_L48_C(q_in(start = 5.3276597e-07, fixed = true), volume(start = 4.2975107e-06, fixed = true)),
              common_carotid_L48_D(q_in(start = 2.7312828e-06, fixed = true), volume(start = 3.477296e-06, fixed = true)),
              internal_carotid_L50_A(q_in(start = 2.049192e-06, fixed = true), volume(start = 1.2690466e-06, fixed = true)),
              internal_carotid_L50_B(q_in(start = 2.3502573e-06, fixed = true), volume(start = 8.0324486e-07, fixed = true)),
              internal_carotid_L50_C(volume(start = 7.08206e-05, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              external_carotid_T2_L62(volume(start = 7.103253e-05, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              vertebral_L2(volume(start = 6.531328e-05, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              vertebral_R272(volume(start = 6.53205e-05, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              superior_vena_cava_C2(volume(start = 4.21507e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              superior_vena_cava_C88(volume(start = 7.2662074e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              inferior_vena_cava_C8(volume(start = 6.3246075e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              hepatic_vein_T1_C10(volume(start = 2.4802223e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              inferior_vena_cava_C12(volume(start = 1.718968e-05, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              inferior_vena_cava_C16(volume(start = 1.3537921e-05, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              renal_vein_T1_R18(volume(start = 3.9919546e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              inferior_vena_cava_C20(volume(start = 9.4458267e-07, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              renal_vein_T1_L22(volume(start = 3.5288397e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              inferior_vena_cava_C24(volume(start = 3.7791782e-05, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              common_iliac_vein_L56(volume(start = 9.309704e-06, fixed = true), open(start = true, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              common_iliac_vein_R26(volume(start = 8.554346e-06, fixed = true), open(start = true, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              external_iliac_vein_R28(volume(start = 1.2482377e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              internal_iliac_vein_T1_R30(volume(start = 5.350095e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              external_iliac_vein_R32(volume(start = 1.4544679e-05, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              femoral_vein_R34(volume(start = 6.3247177e-07, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              femoral_vein_R38(volume(start = 5.0261583e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              profunda_femoris_vein_T2_R40(volume(start = 1.4261817e-05, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              femoral_vein_R42(volume(start = 3.5860518e-05, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              femoral_vein_R46(volume(start = 1.9752983e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              popliteal_vein_R48(volume(start = 8.0928085e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              anterior_tibial_vein_T4_R50(volume(start = 2.9130176e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              popliteal_vein_R52(volume(start = 1.8011459e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              posterior_tibial_vein_T6_R54(volume(start = 3.7903205e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              external_iliac_vein_L58(volume(start = 1.2501945e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              internal_iliac_vein_T1_L60(volume(start = 5.5051178e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              external_iliac_vein_L62(volume(start = 1.4282732e-05, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              femoral_vein_L64(volume(start = 7.3961803e-07, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              femoral_vein_L68(volume(start = 5.0276044e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              profunda_femoris_vein_T2_L70(volume(start = 1.4265324e-05, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              femoral_vein_L72(volume(start = 3.5869292e-05, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              femoral_vein_L76(volume(start = 1.975768e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              popliteal_vein_L78(volume(start = 8.094554e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              anterior_tibial_vein_T4_L80(volume(start = 2.9131102e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              popliteal_vein_L82(volume(start = 1.801543e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              posterior_tibial_vein_T6_L84(volume(start = 3.7907337e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              brachiocephalic_vein_R90(volume(start = 8.549489e-06, fixed = true), open(start = true, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              brachiocephalic_vein_L124(volume(start = 1.6040569e-05, fixed = true), open(start = true, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              vertebral_vein_R92(volume(start = 5.5745168e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              brachiocephalic_vein_R94(volume(start = 1.9384272e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              subclavian_vein_R96(volume(start = 9.4278556e-07, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              internal_jugular_vein_R122(volume(start = 3.7319827e-05, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              external_jugular_vein_R98(volume(start = 2.7395367e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              subclavian_vein_R100(volume(start = 3.858819e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              axillary_vein_R102(volume(start = 1.3592676e-05, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              brachial_vein_R104(volume(start = 2.9507742e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              brachial_vein_R114(volume(start = 2.701426e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              brachial_vein_R108(volume(start = 4.125886e-07, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              ulnar_vein_T7_R110(volume(start = 3.8551025e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              brachial_vein_R118(volume(start = 2.6361346e-07, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              radial_vein_T3_R120(volume(start = 2.5303123e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              vertebral_vein_L126(volume(start = 5.2053197e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              brachiocephalic_vein_L128(volume(start = 9.806826e-07, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              subclavian_vein_L130(volume(start = 8.393069e-07, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              internal_jugular_vein_L156(volume(start = 2.2703603e-05, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              external_jugular_vein_L132(volume(start = 2.6865725e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              subclavian_vein_L134(volume(start = 3.7648008e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              axillary_vein_L136(volume(start = 1.3763046e-05, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              brachial_vein_L138(volume(start = 2.9542257e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              brachial_vein_L148(volume(start = 2.7251665e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              brachial_vein_L142(volume(start = 4.1305486e-07, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              ulnar_vein_T7_L144(volume(start = 3.8565045e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              brachial_vein_L152(volume(start = 2.6606676e-07, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              radial_vein_T3_L154(volume(start = 2.552039e-06, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              mesenteric_artery(q_in(start = 9.809109e-06, fixed = true), volume(start = 6.6122684e-06, fixed = true)),
              splanchnic_tissue(volume(start = 0.00025512805, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              splanchnic_vein(volume(start = 2.0725523e-05, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              coronary_arteries(q_in(start = 3.1923114e-06, fixed = true), volume(start = 3.749764e-08, fixed = true)),
              cardiac_tissue(volume(start = 0.000114823575, fixed = true), phi_delayed(start = 0.25572914, fixed = true)),
              coronary_veins(volume(start = 5.9419953e-08, fixed = true),
                compliant_vessel(A(start = 0.069661364, fixed = true))),
              brachial_L82_HeartLevel(q_in(start = 4.152462e-06, fixed = true), volume(start = 2.9941345e-06, fixed = true))),
            heartComponent(
              tricuspidValve(open(start = true, fixed = true)),
              pulmonaryValve(open(start = false, fixed = true), BP_max(start = 0.0, fixed = true), BP_min(start = 26600.0, fixed = true), CO_acc(start = 0.0, fixed = true)),
              mitralValve(open(start = true, fixed = true), BP_max(start = 1006.6066, fixed = true), BP_min(start = 1001.3948, fixed = true), CO_acc(start = 7.4347015e-05, fixed = true)),
              aorticValve(open(start = false, fixed = true),
                calculateAdditionalMetrics=true,             BP_max(start = 15195.577, fixed = true), BP_min(start = 11786.38, fixed = true),
                CO_acc(start=9.2221075e-05, fixed=true)),
              ventricles(
                LV_wall(ym(start = 3.4203827, fixed = true), SL(start = 2.0219047, fixed = true)),
                SEP_wall(SL(start = 2.0704916, fixed = true)),
                RV_wall(SL(start = 1.9566606, fixed = true)), V_LV(start = 0.00011557527, fixed = true), V_RV(start = 9.959733e-05, fixed = true), currentWork_LV(start = 1.3098211, fixed = true), currentWork_RV(start = 0.22064234, fixed = true)),
              ra(volume(start = 4.621231e-06, fixed = true), currentWork(start = 5.2961016, fixed = true)),
              la(volume(start = 1.545366e-05, fixed = true), currentWork(start = -3.3348625, fixed = true)),
              idealValve_deactivable(open(start = true, fixed = true)),
              idealValve_deactivable1(open(start = true, fixed = true)),
              sa_node(cardiac_cycle(start = 0.8995934, fixed = true))),
            pulmonaryComponent(
              c_pa(volume(start = 2.1241181e-05, fixed = true)),
              c_pv(volume(start = 0.00035014682 + settings.V_PV_init, fixed = true))),
            useAutonomousPhi(y=true),
            settings(
              V_PV_init=0,
              baro_tau_s=93,
              baro_f1=3.5e-03));
          annotation (experiment(
              StopTime=5,
              Interval=0.01,
              Tolerance=1e-08,
              __Dymola_Algorithm="Cvode"));
      end OlufsenTriSeg_optimized2_init;

        model OlufsenTriSeg_optimized3_init
          "Steady state initialization from 2021-06-11 11:58:31.954907 at time 1199.52"
          extends
            ADAN_main.SystemicTree.Identification.Results.OlufsenTriSeg_optimized6(
              SystemicComponent(
                baroreflex_system(
                  baroreflex(phi_mean(start = 0.24970344, fixed = true), phi(start = 0.24585241, fixed = true)),
                  baroreceptor_aortic(fbr_int(start = 17.603256, fixed = true), epsilon(start = 1.5282549, fixed = true), s(start = 0.8055929, fixed = true)),
                  baroreceptor_carotid(fbr_int(start = 9.66313, fixed = true), epsilon(start = 1.1712315, fixed = true), s(start = 0.8933484, fixed = true))),
                ascending_aorta_A(q(start = 3.8719095e-06, fixed = true), vol1(start = 8.070678e-06, fixed = true), vol2(start = 8.07108e-06, fixed = true)),
                ascending_aorta_B(q_in(start = 7.752585e-06, fixed = true), volume(start = 2.508757e-05, fixed = true)),
                ascending_aorta_C(q_in(start = 1.1892152e-05, fixed = true), volume(start = 2.320838e-05, fixed = true)),
                ascending_aorta_D(q_in(start = 1.846028e-05, fixed = true), volume(start = 2.119409e-05, fixed = true)),
                aortic_arch_C2(q_in(start = 2.4359766e-05, fixed = true), volume(start = 1.9396348e-05, fixed = true)),
                brachiocephalic_trunk_C4(q_in(start = 1.0679327e-06, fixed = true), volume(start = 1.3168819e-05, fixed = true)),
                aortic_arch_C46(q_in(start = 2.857476e-05, fixed = true), volume(start = 1.1498663e-05, fixed = true)),
                aortic_arch_C64(q_in(start = 3.2763313e-05, fixed = true), volume(start = 7.897691e-06, fixed = true)),
                aortic_arch_C94(q_in(start = 3.069236e-05, fixed = true), volume(start = 4.346698e-05, fixed = true)),
                thoracic_aorta_C96(q_in(start = 4.0688137e-05, fixed = true), volume(start = 7.816586e-06, fixed = true)),
                thoracic_aorta_C100(q_in(start = 4.239365e-05, fixed = true), volume(start = 6.017454e-06, fixed = true)),
                thoracic_aorta_C104(q_in(start = 4.3655968e-05, fixed = true), volume(start = 1.13574315e-05, fixed = true)),
                thoracic_aorta_C108(q_in(start = 4.5842833e-05, fixed = true), volume(start = 3.7333957e-06, fixed = true)),
                thoracic_aorta_C112(q_in(start = 4.653811e-05, fixed = true), volume(start = 6.229157e-05, fixed = true)),
                abdominal_aorta_C114(q_in(start = 4.659059e-05, fixed = true), volume(start = 1.2874332e-06, fixed = true)),
                abdominal_aorta_C136(q_in(start = 3.4045326e-05, fixed = true), volume(start = 5.4068755e-06, fixed = true)),
                abdominal_aorta_C164(q_in(start = 2.4611865e-05, fixed = true), volume(start = 1.6050404e-06, fixed = true)),
                abdominal_aorta_C176(q_in(start = 1.3252353e-05, fixed = true), volume(start = 4.3167847e-06, fixed = true)),
                abdominal_aorta_C188(q_in(start = 1.9290894e-06, fixed = true), volume(start = 1.7281012e-05, fixed = true)),
                abdominal_aorta_C192(q_in(start = 1.2510534e-06, fixed = true), volume(start = 1.07259175e-05, fixed = true)),
                celiac_trunk_C116(volume(start = 0.00034059316, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                renal_L166(volume(start = 0.00030766928, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                renal_R178(volume(start = 0.00030490823, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                common_iliac_R216(q_in(start = 3.993164e-07, fixed = true), volume(start = 8.855931e-06, fixed = true)),
                internal_iliac_T1_R218(volume(start = 0.0001674349, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                external_iliac_R220(q_in(start = -5.6010044e-06, fixed = true), volume(start = 4.9496953e-06, fixed = true)),
                femoral_R222(q_in(start = -4.9161563e-06, fixed = true), volume(start = 1.411402e-06, fixed = true)),
                profundus_T2_R224(volume(start = 0.00019209895, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                femoral_R226(q_in(start = -1.1232905e-05, fixed = true), volume(start = 1.13322685e-05, fixed = true)),
                popliteal_R228(q_in(start = -2.0564273e-06, fixed = true), volume(start = 3.474142e-06, fixed = true)),
                anterior_tibial_T3_R230(volume(start = 2.5363706e-05, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                popliteal_R232(q_in(start = 3.2306946e-07, fixed = true), volume(start = 1.7848711e-07, fixed = true)),
                tibiofibular_trunk_R234(q_in(start = 4.0966268e-07, fixed = true), volume(start = 7.257386e-07, fixed = true)),
                posterior_tibial_T4_R236(volume(start = 2.7553777e-05, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                common_iliac_L194(q_in(start = 4.9551284e-07, fixed = true), volume(start = 8.468505e-06, fixed = true)),
                internal_iliac_T1_L196(volume(start = 0.00016743637, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                external_iliac_L198(q_in(start = -5.5039895e-06, fixed = true), volume(start = 4.94945e-06, fixed = true)),
                femoral_L200(q_in(start = -4.8239845e-06, fixed = true), volume(start = 1.4113288e-06, fixed = true)),
                profundus_T2_L202(volume(start = 0.00019209972, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                femoral_L204(q_in(start = -1.1141473e-05, fixed = true), volume(start = 1.13314045e-05, fixed = true)),
                popliteal_L206(q_in(start = -2.0313817e-06, fixed = true), volume(start = 3.4738355e-06, fixed = true)),
                anterior_tibial_T3_L208(volume(start = 2.5363699e-05, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                popliteal_L210(q_in(start = 3.2615267e-07, fixed = true), volume(start = 1.7847813e-07, fixed = true)),
                tibiofibular_trunk_L212(q_in(start = 4.1212033e-07, fixed = true), volume(start = 7.2572374e-07, fixed = true)),
                posterior_tibial_T4_L214(volume(start = 2.7553791e-05, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                subclavian_R28(q_in(start = 4.2812662e-06, fixed = true), volume(start = 2.0194673e-06, fixed = true)),
                subclavian_R30(q_in(start = 2.5490683e-06, fixed = true), volume(start = 2.6515029e-06, fixed = true)),
                axillary_R32(q_in(start = 3.1488526e-06, fixed = true), volume(start = 3.0477704e-06, fixed = true)),
                brachial_R34(q_in(start = 3.586867e-06, fixed = true), volume(start = 4.4681537e-06, fixed = true)),
                ulnar_T2_R36(q_in(start = 1.9579106e-06, fixed = true), volume(start = 2.3776016e-07, fixed = true)),
                ulnar_T2_R42(volume(start = 5.795162e-05, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                radial_T1_R44(volume(start = 4.7595116e-05, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                subclavian_L66(q_in(start = 4.1387966e-06, fixed = true), volume(start = 4.8143684e-06, fixed = true)),
                subclavian_L78(q_in(start = 2.9756661e-06, fixed = true), volume(start = 1.972952e-06, fixed = true)),
                axillary_L80(q_in(start = 3.3676852e-06, fixed = true), volume(start = 3.0556064e-06, fixed = true)),
                brachial_L82(q_in(start = 3.699919e-06, fixed = true), volume(start = 1.4879852e-06, fixed = true)),
                ulnar_T2_L84(q_in(start = 1.966288e-06, fixed = true), volume(start = 2.3780191e-07, fixed = true)),
                ulnar_T2_L90(volume(start = 5.7928195e-05, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                radial_T1_L92(volume(start = 5.0452905e-05, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                common_carotid_R6_A(q_in(start = 2.987729e-07, fixed = true), volume(start = 4.955184e-06, fixed = true)),
                common_carotid_R6_B(q_in(start = 1.9940771e-06, fixed = true), volume(start = 4.2253982e-06, fixed = true)),
                common_carotid_R6_C(q_in(start = 3.4522282e-06, fixed = true), volume(start = 3.1563536e-06, fixed = true)),
                internal_carotid_R8_A(q_in(start = 2.1149858e-06, fixed = true), volume(start = 1.25376e-06, fixed = true)),
                internal_carotid_R8_B(q_in(start = 2.2972552e-06, fixed = true), volume(start = 7.9418646e-07, fixed = true)),
                internal_carotid_R8_C(volume(start = 6.8532376e-05, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                external_carotid_T2_R26(volume(start = 6.8797475e-05, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                common_carotid_L48_A(q_in(start = -1.1233657e-06, fixed = true), volume(start = 5.370309e-06, fixed = true)),
                common_carotid_L48_B(q_in(start = 5.902771e-07, fixed = true), volume(start = 4.707705e-06, fixed = true)),
                common_carotid_L48_C(q_in(start = 2.107219e-06, fixed = true), volume(start = 4.172906e-06, fixed = true)),
                common_carotid_L48_D(q_in(start = 3.4548837e-06, fixed = true), volume(start = 3.3755337e-06, fixed = true)),
                internal_carotid_L50_A(q_in(start = 2.1257392e-06, fixed = true), volume(start = 1.2528502e-06, fixed = true)),
                internal_carotid_L50_B(q_in(start = 2.2963727e-06, fixed = true), volume(start = 7.936284e-07, fixed = true)),
                internal_carotid_L50_C(volume(start = 6.8537345e-05, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                external_carotid_T2_L62(volume(start = 6.87966e-05, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                vertebral_L2(volume(start = 6.324332e-05, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                vertebral_R272(volume(start = 6.324797e-05, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                superior_vena_cava_C2(volume(start = 4.220106e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                superior_vena_cava_C88(volume(start = 7.276236e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                inferior_vena_cava_C8(volume(start = 6.3323146e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                hepatic_vein_T1_C10(volume(start = 2.4832575e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                inferior_vena_cava_C12(volume(start = 1.721682e-05, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                inferior_vena_cava_C16(volume(start = 1.356269e-05, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                renal_vein_T1_R18(volume(start = 3.9994206e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                inferior_vena_cava_C20(volume(start = 9.463241e-07, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                renal_vein_T1_L22(volume(start = 3.535526e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                inferior_vena_cava_C24(volume(start = 3.7881873e-05, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                common_iliac_vein_L56(volume(start = 9.335072e-06, fixed = true), open(start = true, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                common_iliac_vein_R26(volume(start = 8.577576e-06, fixed = true), open(start = true, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                external_iliac_vein_R28(volume(start = 1.2516608e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                internal_iliac_vein_T1_R30(volume(start = 5.3659746e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                external_iliac_vein_R32(volume(start = 1.4586541e-05, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                femoral_vein_R34(volume(start = 6.3428143e-07, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                femoral_vein_R38(volume(start = 5.0398216e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                profunda_femoris_vein_T2_R40(volume(start = 1.4287033e-05, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                femoral_vein_R42(volume(start = 3.5915946e-05, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                femoral_vein_R46(volume(start = 1.978256e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                popliteal_vein_R48(volume(start = 8.087784e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                anterior_tibial_vein_T4_R50(volume(start = 2.8893216e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                popliteal_vein_R52(volume(start = 1.799751e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                posterior_tibial_vein_T6_R54(volume(start = 3.7113025e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                external_iliac_vein_L58(volume(start = 1.2536291e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                internal_iliac_vein_T1_L60(volume(start = 5.521543e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                external_iliac_vein_L62(volume(start = 1.4323126e-05, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                femoral_vein_L64(volume(start = 7.4169236e-07, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                femoral_vein_L68(volume(start = 5.040843e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                profunda_femoris_vein_T2_L70(volume(start = 1.4287143e-05, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                femoral_vein_L72(volume(start = 3.5916506e-05, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                femoral_vein_L76(volume(start = 1.9782692e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                popliteal_vein_L78(volume(start = 8.087087e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                anterior_tibial_vein_T4_L80(volume(start = 2.889313e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                popliteal_vein_L82(volume(start = 1.7995998e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                posterior_tibial_vein_T6_L84(volume(start = 3.7111809e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                brachiocephalic_vein_R90(volume(start = 8.56433e-06, fixed = true), open(start = true, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                brachiocephalic_vein_L124(volume(start = 1.6076916e-05, fixed = true), open(start = true, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                vertebral_vein_R92(volume(start = 5.580061e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                brachiocephalic_vein_R94(volume(start = 1.941929e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                subclavian_vein_R96(volume(start = 9.445688e-07, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                internal_jugular_vein_R122(volume(start = 3.7437676e-05, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                external_jugular_vein_R98(volume(start = 2.7481374e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                subclavian_vein_R100(volume(start = 3.8673534e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                axillary_vein_R102(volume(start = 1.3634191e-05, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                brachial_vein_R104(volume(start = 2.9135247e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                brachial_vein_R114(volume(start = 2.6622365e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                brachial_vein_R108(volume(start = 4.070048e-07, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                ulnar_vein_T7_R110(volume(start = 3.7959562e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                brachial_vein_R118(volume(start = 2.5970394e-07, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                radial_vein_T3_R120(volume(start = 2.5086317e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                vertebral_vein_L126(volume(start = 5.2267933e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                brachiocephalic_vein_L128(volume(start = 9.829428e-07, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                subclavian_vein_L130(volume(start = 8.413075e-07, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                internal_jugular_vein_L156(volume(start = 2.2799617e-05, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                external_jugular_vein_L132(volume(start = 2.7001201e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                subclavian_vein_L134(volume(start = 3.7749803e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                axillary_vein_L136(volume(start = 1.3812472e-05, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                brachial_vein_L138(volume(start = 2.922691e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                brachial_vein_L148(volume(start = 2.6908028e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                brachial_vein_L142(volume(start = 4.0825245e-07, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                ulnar_vein_T7_L144(volume(start = 3.8003539e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                brachial_vein_L152(volume(start = 2.626265e-07, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                radial_vein_T3_L154(volume(start = 2.53239e-06, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                mesenteric_artery(q_in(start = 9.368483e-06, fixed = true), volume(start = 6.631462e-06, fixed = true)),
                splanchnic_tissue(volume(start = 0.00024702842, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                splanchnic_vein(volume(start = 2.0766065e-05, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                coronary_arteries(q_in(start = 3.040544e-06, fixed = true), volume(start = 3.726891e-08, fixed = true)),
                cardiac_tissue(volume(start = 0.000112328176, fixed = true), phi_delayed(start = 0.25378594, fixed = true)),
                coronary_veins(volume(start = 5.926006e-08, fixed = true),
                  compliant_vessel(A(start = 0.06723232, fixed = false))),
                brachial_L82_HeartLevel(q_in(start = 3.722948e-06, fixed = true), volume(start = 2.9958835e-06, fixed = true))),
              heartComponent(
                tricuspidValve(open(start = true, fixed = true)),
                pulmonaryValve(open(start = false, fixed = true), BP_max(start = 0.0, fixed = true), BP_min(start = 26600.0, fixed = true), CO_acc(start = 0.0, fixed = true)),
                mitralValve(open(start = true, fixed = true), BP_max(start = 1113.3982, fixed = true), BP_min(start = 942.15027, fixed = true), CO_acc(start = 5.9481652e-05, fixed = true)),
                aorticValve(open(start = false, fixed = true), BP_max(start = 15047.65, fixed = true), BP_min(start = 11532.416, fixed = true), CO_acc(start = 9.141051e-05, fixed = true)),
                ventricles(
                  LV_wall(ym(start = 3.3008697, fixed = true), SL(start = 1.938651, fixed = true)),
                  SEP_wall(SL(start = 1.9807618, fixed = true)),
                  RV_wall(SL(start = 1.8905245, fixed = true)), V_LV(start = 9.674789e-05, fixed = true), V_RV(start = 8.8568e-05, fixed = true), currentWork_LV(start = 1.3147972, fixed = true), currentWork_RV(start = 0.23436068, fixed = true)),
                ra(volume(start = 8.8254565e-06, fixed = true), currentWork(start = 8.026772, fixed = true)),
                la(volume(start = 1.979809e-05, fixed = true), currentWork(start = 0.35237855, fixed = true)),
                sa_node(cardiac_cycle(start = 0.884947, fixed = true))),
              pulmonaryComponent(
                c_pa(volume(start = 2.055306e-05, fixed = true)),
                c_pv(volume(start = 0.000367088 + settings.V_PV_init, fixed = true))),
            settings(V_PV_init=0));
          annotation ();
        end OlufsenTriSeg_optimized3_init;

        model CVS_reoptimizeBaseline7_init "Steady state initialization from 2021-06-17 23:39:45.947850 at time 600.0"
          extends Results.CVS_reoptimizeBaseline7_result(
              SystemicComponent(
                baroreflex_system(
                  baroreflex(phi_mean(start = 0.2506984, fixed = true), phi(start = 0.24604833, fixed = true)),
                  baroreceptor_aortic(fbr_int(start = 15.306283, fixed = true), epsilon(start = 1.5297927, fixed = true), s(start = 0.80429804, fixed = true)),
                  baroreceptor_carotid(fbr_int(start = 8.2476425, fixed = true), epsilon(start = 1.1717747, fixed = true), s(start = 0.8925187, fixed = true))),
                ascending_aorta_A(q(start = 3.6423918e-07, fixed = true), vol1(start = 8.66505e-06, fixed = true), vol2(start = 8.664305e-06, fixed = true)),
                ascending_aorta_B(q_in(start = 7.5149273e-07, fixed = true), volume(start = 2.613017e-05, fixed = true)),
                ascending_aorta_C(q_in(start = -2.0063874e-06, fixed = true), volume(start = 2.416228e-05, fixed = true)),
                ascending_aorta_D(q_in(start = -1.372484e-06, fixed = true), volume(start = 2.205129e-05, fixed = true)),
                aortic_arch_C2(q_in(start = -6.8836454e-07, fixed = true), volume(start = 2.0164603e-05, fixed = true)),
                brachiocephalic_trunk_C4(q_in(start = 1.1923363e-05, fixed = true), volume(start = 1.3693145e-05, fixed = true)),
                aortic_arch_C46(q_in(start = -1.185623e-05, fixed = true), volume(start = 1.1944001e-05, fixed = true)),
                aortic_arch_C64(q_in(start = -1.873218e-05, fixed = true), volume(start = 8.196982e-06, fixed = true)),
                aortic_arch_C94(q_in(start = -2.2033633e-05, fixed = true), volume(start = 4.4882916e-05, fixed = true)),
                thoracic_aorta_C96(q_in(start = -1.686846e-05, fixed = true), volume(start = 8.057118e-06, fixed = true)),
                thoracic_aorta_C100(q_in(start = -1.5818307e-05, fixed = true), volume(start = 6.194873e-06, fixed = true)),
                thoracic_aorta_C104(q_in(start = -1.4930589e-05, fixed = true), volume(start = 1.1662664e-05, fixed = true)),
                thoracic_aorta_C108(q_in(start = -1.2951023e-05, fixed = true), volume(start = 3.830243e-06, fixed = true)),
                thoracic_aorta_C112(q_in(start = -1.22667025e-05, fixed = true), volume(start = 6.2229854e-05, fixed = true)),
                abdominal_aorta_C114(q_in(start = 1.6391365e-05, fixed = true), volume(start = 1.285977e-06, fixed = true)),
                abdominal_aorta_C136(q_in(start = 4.5182337e-06, fixed = true), volume(start = 5.397243e-06, fixed = true)),
                abdominal_aorta_C164(q_in(start = 4.9017956e-08, fixed = true), volume(start = 1.6020978e-06, fixed = true)),
                abdominal_aorta_C176(q_in(start = -1.0380274e-05, fixed = true), volume(start = 4.308371e-06, fixed = true)),
                abdominal_aorta_C188(q_in(start = -1.9222805e-05, fixed = true), volume(start = 1.7253346e-05, fixed = true)),
                abdominal_aorta_C192(q_in(start = -7.895771e-06, fixed = true), volume(start = 1.0766112e-05, fixed = true)),
                celiac_trunk_C116(volume(start = 0.00034740422, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                renal_L166(volume(start = 0.00031381668, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                renal_R178(volume(start = 0.00031100385, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                common_iliac_R216(q_in(start = -8.20076e-08, fixed = true), volume(start = 9.01341e-06, fixed = true)),
                internal_iliac_T1_R218(volume(start = 0.00017078809, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                external_iliac_R220(q_in(start = 1.1918268e-06, fixed = true), volume(start = 5.1446427e-06, fixed = true)),
                femoral_R222(q_in(start = 4.0123055e-06, fixed = true), volume(start = 1.4800044e-06, fixed = true)),
                profundus_T2_R224(volume(start = 0.00019587952, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                femoral_R226(q_in(start = -3.1361164e-06, fixed = true), volume(start = 1.3155466e-05, fixed = true)),
                popliteal_R228(q_in(start = 1.5957537e-06, fixed = true), volume(start = 4.055143e-06, fixed = true)),
                anterior_tibial_T3_R230(volume(start = 2.5729436e-05, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                popliteal_R232(q_in(start = 1.3748443e-06, fixed = true), volume(start = 1.9497821e-07, fixed = true)),
                tibiofibular_trunk_R234(q_in(start = 1.4070473e-06, fixed = true), volume(start = 7.927257e-07, fixed = true)),
                posterior_tibial_T4_R236(volume(start = 2.8049144e-05, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                common_iliac_L194(q_in(start = 2.5652463e-07, fixed = true), volume(start = 8.6187e-06, fixed = true)),
                internal_iliac_T1_L196(volume(start = 0.00017078916, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                external_iliac_L198(q_in(start = 1.1258863e-06, fixed = true), volume(start = 5.14382e-06, fixed = true)),
                femoral_L200(q_in(start = 3.93098e-06, fixed = true), volume(start = 1.4797256e-06, fixed = true)),
                profundus_T2_L202(volume(start = 0.00019588046, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                femoral_L204(q_in(start = -3.2157945e-06, fixed = true), volume(start = 1.3149404e-05, fixed = true)),
                popliteal_L206(q_in(start = 1.5696718e-06, fixed = true), volume(start = 4.0532404e-06, fixed = true)),
                anterior_tibial_T3_L208(volume(start = 2.5729683e-05, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                popliteal_L210(q_in(start = 1.3695374e-06, fixed = true), volume(start = 1.9492401e-07, fixed = true)),
                tibiofibular_trunk_L212(q_in(start = 1.4022635e-06, fixed = true), volume(start = 7.925302e-07, fixed = true)),
                posterior_tibial_T4_L214(volume(start = 2.8049442e-05, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                subclavian_R28(q_in(start = 4.287529e-06, fixed = true), volume(start = 2.0939606e-06, fixed = true)),
                subclavian_R30(q_in(start = 1.7434875e-06, fixed = true), volume(start = 2.7374545e-06, fixed = true)),
                axillary_R32(q_in(start = 1.6472062e-06, fixed = true), volume(start = 3.1034247e-06, fixed = true)),
                brachial_R34(q_in(start = 1.7909268e-06, fixed = true), volume(start = 4.463568e-06, fixed = true)),
                ulnar_T2_R36(q_in(start = 1.8895989e-06, fixed = true), volume(start = 2.3766187e-07, fixed = true)),
                ulnar_T2_R42(volume(start = 5.896282e-05, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                radial_T1_R44(volume(start = 4.8333426e-05, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                subclavian_L66(q_in(start = 3.7495568e-06, fixed = true), volume(start = 4.9608957e-06, fixed = true)),
                subclavian_L78(q_in(start = 1.5488021e-06, fixed = true), volume(start = 2.0224097e-06, fixed = true)),
                axillary_L80(q_in(start = 1.6692428e-06, fixed = true), volume(start = 3.088383e-06, fixed = true)),
                brachial_L82(q_in(start = 3.0069268e-06, fixed = true), volume(start = 1.4787281e-06, fixed = true)),
                ulnar_T2_L84(q_in(start = 1.8666705e-06, fixed = true), volume(start = 2.3701669e-07, fixed = true)),
                ulnar_T2_L90(volume(start = 5.894036e-05, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                radial_T1_L92(volume(start = 5.1224866e-05, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                common_carotid_R6_A(q_in(start = 7.236585e-06, fixed = true), volume(start = 5.2159157e-06, fixed = true)),
                common_carotid_R6_B(q_in(start = 6.7519964e-06, fixed = true), volume(start = 4.4546105e-06, fixed = true)),
                common_carotid_R6_C(q_in(start = 6.147951e-06, fixed = true), volume(start = 3.3278202e-06, fixed = true)),
                internal_carotid_R8_A(q_in(start = 2.8871027e-06, fixed = true), volume(start = 1.2826325e-06, fixed = true)),
                internal_carotid_R8_B(q_in(start = 2.7815283e-06, fixed = true), volume(start = 8.110194e-07, fixed = true)),
                internal_carotid_R8_C(volume(start = 6.9893526e-05, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                external_carotid_T2_R26(volume(start = 7.013348e-05, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                common_carotid_L48_A(q_in(start = 7.4268446e-06, fixed = true), volume(start = 5.641889e-06, fixed = true)),
                common_carotid_L48_B(q_in(start = 7.3149067e-06, fixed = true), volume(start = 4.966736e-06, fixed = true)),
                common_carotid_L48_C(q_in(start = 6.885609e-06, fixed = true), volume(start = 4.4157437e-06, fixed = true)),
                common_carotid_L48_D(q_in(start = 6.2735276e-06, fixed = true), volume(start = 3.5759292e-06, fixed = true)),
                internal_carotid_L50_A(q_in(start = 2.9185842e-06, fixed = true), volume(start = 1.2846103e-06, fixed = true)),
                internal_carotid_L50_B(q_in(start = 2.805799e-06, fixed = true), volume(start = 8.1220514e-07, fixed = true)),
                internal_carotid_L50_C(volume(start = 6.989717e-05, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                external_carotid_T2_L62(volume(start = 7.0132126e-05, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                vertebral_L2(volume(start = 6.448468e-05, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                vertebral_R272(volume(start = 6.448752e-05, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                superior_vena_cava_C2(volume(start = 4.077058e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                superior_vena_cava_C88(volume(start = 7.0254414e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                inferior_vena_cava_C8(volume(start = 6.114764e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                hepatic_vein_T1_C10(volume(start = 2.3978441e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                inferior_vena_cava_C12(volume(start = 1.6587855e-05, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                inferior_vena_cava_C16(volume(start = 1.3043346e-05, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                renal_vein_T1_R18(volume(start = 3.8453595e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                inferior_vena_cava_C20(volume(start = 9.0998435e-07, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                renal_vein_T1_L22(volume(start = 3.3986742e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                inferior_vena_cava_C24(volume(start = 3.626734e-05, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                common_iliac_vein_L56(volume(start = 8.573058e-06, fixed = true), open(start = false, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                common_iliac_vein_R26(volume(start = 7.882972e-06, fixed = true), open(start = false, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                external_iliac_vein_R28(volume(start = 1.1496826e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                internal_iliac_vein_T1_R30(volume(start = 4.9239343e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                external_iliac_vein_R32(volume(start = 1.3324123e-05, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                femoral_vein_R34(volume(start = 5.791886e-07, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                femoral_vein_R38(volume(start = 4.5897896e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                profunda_femoris_vein_T2_R40(volume(start = 1.2828105e-05, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                femoral_vein_R42(volume(start = 3.2301024e-05, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                femoral_vein_R46(volume(start = 1.7788899e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                popliteal_vein_R48(volume(start = 7.235818e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                anterior_tibial_vein_T4_R50(volume(start = 2.7924123e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                popliteal_vein_R52(volume(start = 1.6098164e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                posterior_tibial_vein_T6_R54(volume(start = 3.3106198e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                external_iliac_vein_L58(volume(start = 1.1506836e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                internal_iliac_vein_T1_L60(volume(start = 5.062891e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                external_iliac_vein_L62(volume(start = 1.3076885e-05, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                femoral_vein_L64(volume(start = 6.7689217e-07, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                femoral_vein_L68(volume(start = 4.5883703e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                profunda_femoris_vein_T2_L70(volume(start = 1.2824648e-05, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                femoral_vein_L72(volume(start = 3.2292646e-05, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                femoral_vein_L76(volume(start = 1.7784186e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                popliteal_vein_L78(volume(start = 7.2341536e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                anterior_tibial_vein_T4_L80(volume(start = 2.792467e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                popliteal_vein_L82(volume(start = 1.6094591e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                posterior_tibial_vein_T6_L84(volume(start = 3.3107065e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                brachiocephalic_vein_R90(volume(start = 7.886608e-06, fixed = true), open(start = false, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                brachiocephalic_vein_L124(volume(start = 1.4871701e-05, fixed = true), open(start = false, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                vertebral_vein_R92(volume(start = 5.0193926e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                brachiocephalic_vein_R94(volume(start = 1.7878833e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                subclavian_vein_R96(volume(start = 8.693701e-07, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                internal_jugular_vein_R122(volume(start = 3.4343033e-05, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                external_jugular_vein_R98(volume(start = 2.4762244e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                subclavian_vein_R100(volume(start = 3.5556072e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                axillary_vein_R102(volume(start = 1.2496969e-05, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                brachial_vein_R104(volume(start = 2.6008142e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                brachial_vein_R114(volume(start = 2.3727262e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                brachial_vein_R108(volume(start = 3.63233e-07, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                ulnar_vein_T7_R110(volume(start = 3.503806e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                brachial_vein_R118(volume(start = 2.3152131e-07, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                radial_vein_T3_R120(volume(start = 2.4221756e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                vertebral_vein_L126(volume(start = 4.717141e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                brachiocephalic_vein_L128(volume(start = 9.0914494e-07, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                subclavian_vein_L130(volume(start = 7.7791793e-07, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                internal_jugular_vein_L156(volume(start = 2.0975198e-05, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                external_jugular_vein_L132(volume(start = 2.440538e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                subclavian_vein_L134(volume(start = 3.486669e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                axillary_vein_L136(volume(start = 1.2715851e-05, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                brachial_vein_L138(volume(start = 2.609667e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                brachial_vein_L148(volume(start = 2.3982257e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                brachial_vein_L142(volume(start = 3.6442262e-07, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                ulnar_vein_T7_L144(volume(start = 3.5083115e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                brachial_vein_L152(volume(start = 2.3418258e-07, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                radial_vein_T3_L154(volume(start = 2.452342e-06, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                mesenteric_artery(q_in(start = 7.1377885e-06, fixed = true), volume(start = 6.6076814e-06, fixed = true)),
                splanchnic_tissue(volume(start = 0.00025197756, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                splanchnic_vein(volume(start = 1.9977091e-05, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                coronary_arteries(q_in(start = 3.3616902e-06, fixed = true), volume(start = 3.768701e-08, fixed = true)),
                cardiac_tissue(volume(start = 0.00011371741, fixed = true), phi_delayed(start = 0.25483957, fixed = true)),
                coronary_veins(volume(start = 5.8958257e-08, fixed = true),
                  compliant_vessel(A(start = 0.068549454, fixed = false))),
                brachial_L82_HeartLevel(q_in(start = 2.136825e-06, fixed = true), volume(start = 2.98383e-06, fixed = true))),
              heartComponent(
                tricuspidValve(open(start = false, fixed = true)),
                pulmonaryValve(open(start = false, fixed = true), BP_max(start = 3.2722867e-25, fixed = true), BP_min(start = 26600.0, fixed = true), CO_acc(start = 0.0, fixed = true)),
                mitralValve(open(start = false, fixed = true), BP_max(start = 870.69635, fixed = true), BP_min(start = 999.6157, fixed = true), CO_acc(start = 1.944185e-05, fixed = true)),
                aorticValve(open(start = false, fixed = true), BP_max(start = 15069.221, fixed = true), BP_min(start = 11575.492, fixed = true), CO_acc(start = 9.214754e-05, fixed = true)),
                ventricles(
                  LV_wall(ym(start = 2.9424143, fixed = true), SL(start = 1.7651786, fixed = true)),
                  SEP_wall(SL(start = 1.7939262, fixed = true)),
                  RV_wall(SL(start = 1.6774857, fixed = true)), V_LV(start = 6.0294715e-05, fixed = true), V_RV(start = 4.977319e-05, fixed = true), currentWork_LV(start = 1.3474629, fixed = true), currentWork_RV(start = 0.24218448, fixed = true)),
                ra(volume(start = 2.5746644e-05, fixed = true), currentWork(start = 9.458275, fixed = true)),
                la(volume(start = 4.2788946e-05, fixed = true), currentWork(start = 1.4269644, fixed = true)),
                idealValve_deactivable(open(start = true, fixed = true)),
                idealValve_deactivable1(open(start = true, fixed = true)),
                sa_node(cardiac_cycle(start = 0.7176858, fixed = true))),
              pulmonaryComponent(
                c_pa(volume(start = 2.6496082e-05, fixed = true)),
                c_pv(volume(start = 3.655380e-04 + V_PV_init, fixed = true))),
              settings(V_PV_init = 0));
        end CVS_reoptimizeBaseline7_init;

        model Baseline_renals_optim
          "Steady state initialization from 2021-12-13 12:39:02.627037 at time 600.0"
          extends
            ADAN_main.SystemicTree.Identification.Results.SimpleExercise_ident_optimized(
              SystemicComponent(
                baroreflex_system(
                  baroreflex(phi_mean(start = 0.24996968, fixed = true), phi(start = 0.25456366, fixed = true), f1_adj(start = 0.004159404, fixed = true)),
                  baroreceptor_aortic(fbr_auc(start = 17.45957, fixed = true), fbr_int(start = 17.460196, fixed = true), epsilon(start = 1.4768478, fixed = true), s(start = 0.8109881, fixed = true)),
                  baroreceptor_carotid(fbr_auc(start = 9.300182, fixed = true), fbr_int(start = 9.299916, fixed = true), epsilon(start = 1.1527392, fixed = true), s(start = 0.8993876, fixed = true))),
                ascending_aorta_A(q(start = 3.2319583e-06, fixed = true), vol1(start = 6.2168424e-06, fixed = true), vol2(start = 6.2171102e-06, fixed = true)),
                ascending_aorta_B(q_in(start = 6.4679202e-06, fixed = true), volume(start = 2.1709084e-05, fixed = true)),
                ascending_aorta_C(q_in(start = 9.891012e-06, fixed = true), volume(start = 2.0091069e-05, fixed = true)),
                ascending_aorta_D(q_in(start = 1.5355288e-05, fixed = true), volume(start = 1.8355648e-05, fixed = true)),
                aortic_arch_C2(q_in(start = 2.0306006e-05, fixed = true), volume(start = 1.6805763e-05, fixed = true)),
                brachiocephalic_trunk_C4(q_in(start = -4.1144352e-07, fixed = true), volume(start = 1.1533095e-05, fixed = true)),
                aortic_arch_C46(q_in(start = 2.520495e-05, fixed = true), volume(start = 9.967224e-06, fixed = true)),
                aortic_arch_C64(q_in(start = 2.91268e-05, fixed = true), volume(start = 6.847489e-06, fixed = true)),
                aortic_arch_C94(q_in(start = 2.8808014e-05, fixed = true), volume(start = 3.7698836e-05, fixed = true)),
                thoracic_aorta_C96(q_in(start = 3.8074944e-05, fixed = true), volume(start = 6.787807e-06, fixed = true)),
                thoracic_aorta_C100(q_in(start = 3.9695446e-05, fixed = true), volume(start = 5.226205e-06, fixed = true)),
                thoracic_aorta_C104(q_in(start = 4.092112e-05, fixed = true), volume(start = 9.865647e-06, fixed = true)),
                thoracic_aorta_C108(q_in(start = 4.3151027e-05, fixed = true), volume(start = 3.2437158e-06, fixed = true)),
                thoracic_aorta_C112(q_in(start = 4.3873486e-05, fixed = true), volume(start = 5.4194043e-05, fixed = true)),
                abdominal_aorta_C114(q_in(start = 5.0961557e-05, fixed = true), volume(start = 1.1224439e-06, fixed = true)),
                abdominal_aorta_C136(q_in(start = 4.0704956e-05, fixed = true), volume(start = 4.7183025e-06, fixed = true)),
                abdominal_aorta_C164(q_in(start = 3.4030545e-05, fixed = true), volume(start = 1.401464e-06, fixed = true)),
                abdominal_aorta_C176(q_in(start = 2.6745762e-05, fixed = true), volume(start = 3.7730147e-06, fixed = true)),
                abdominal_aorta_C188(q_in(start = 1.963234e-05, fixed = true), volume(start = 1.51774e-05, fixed = true)),
                abdominal_aorta_C192(q_in(start = 2.102125e-05, fixed = true), volume(start = 9.483545e-06, fixed = true)),
                celiac_trunk_C116(volume(start = 0.00036527094, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                renal_L166(V_AKIDNEY(start = 4.402374e-06, fixed = true), V_VKIDNEY(start = 3.91048e-06, fixed = true), A_myo(start = 0.2930409, fixed = true), D_aff(start = 9.436119, fixed = true)),
                renal_R178(V_AKIDNEY(start = 4.4057215e-06, fixed = true), V_VKIDNEY(start = 3.909827e-06, fixed = true), A_myo(start = 0.2928858, fixed = true), D_aff(start = 9.438078, fixed = true)),
                common_iliac_R216(q_in(start = 1.0911112e-05, fixed = true), volume(start = 7.965109e-06, fixed = true)),
                internal_iliac_T1_R218(volume(start = 0.00017956304, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                external_iliac_R220(q_in(start = 6.0912844e-06, fixed = true), volume(start = 4.7006242e-06, fixed = true)),
                femoral_R222(q_in(start = 6.284537e-06, fixed = true), volume(start = 1.3459914e-06, fixed = true)),
                profundus_T2_R224(volume(start = 0.00020591824, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                femoral_R226(q_in(start = 1.4589756e-07, fixed = true), volume(start = 1.1255112e-05, fixed = true)),
                popliteal_R228(q_in(start = 1.3257044e-06, fixed = true), volume(start = 3.4660989e-06, fixed = true)),
                anterior_tibial_T3_R230(volume(start = 2.6758249e-05, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                popliteal_R232(q_in(start = 8.753512e-07, fixed = true), volume(start = 1.7825963e-07, fixed = true)),
                tibiofibular_trunk_R234(q_in(start = 8.857246e-07, fixed = true), volume(start = 7.248119e-07, fixed = true)),
                posterior_tibial_T4_R236(volume(start = 2.9437919e-05, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                common_iliac_L194(q_in(start = 1.0869194e-05, fixed = true), volume(start = 7.6169567e-06, fixed = true)),
                internal_iliac_T1_L196(volume(start = 0.00017956387, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                external_iliac_L198(q_in(start = 6.0400876e-06, fixed = true), volume(start = 4.7001527e-06, fixed = true)),
                femoral_L200(q_in(start = 6.2391086e-06, fixed = true), volume(start = 1.3458576e-06, fixed = true)),
                profundus_T2_L202(volume(start = 0.00020591903, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                femoral_L204(q_in(start = 1.061986e-07, fixed = true), volume(start = 1.1253952e-05, fixed = true)),
                popliteal_L206(q_in(start = 1.3143429e-06, fixed = true), volume(start = 3.4657498e-06, fixed = true)),
                anterior_tibial_T3_L208(volume(start = 2.6758407e-05, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                popliteal_L210(q_in(start = 8.734266e-07, fixed = true), volume(start = 1.7824946e-07, fixed = true)),
                tibiofibular_trunk_L212(q_in(start = 8.8405113e-07, fixed = true), volume(start = 7.2479315e-07, fixed = true)),
                posterior_tibial_T4_L214(volume(start = 2.9438104e-05, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                subclavian_R28(q_in(start = 2.333124e-06, fixed = true), volume(start = 1.7851049e-06, fixed = true)),
                subclavian_R30(q_in(start = 9.141178e-07, fixed = true), volume(start = 2.3668474e-06, fixed = true)),
                axillary_R32(q_in(start = 1.4441762e-06, fixed = true), volume(start = 2.758259e-06, fixed = true)),
                brachial_R34(q_in(start = 2.035717e-06, fixed = true), volume(start = 4.0666887e-06, fixed = true)),
                ulnar_T2_R36(q_in(start = 1.592763e-06, fixed = true), volume(start = 2.2600882e-07, fixed = true)),
                ulnar_T2_R42(volume(start = 6.1703315e-05, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                radial_T1_R44(volume(start = 5.031901e-05, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                subclavian_L66(q_in(start = 2.1098008e-06, fixed = true), volume(start = 4.269545e-06, fixed = true)),
                subclavian_L78(q_in(start = 1.2130323e-06, fixed = true), volume(start = 1.767348e-06, fixed = true)),
                axillary_L80(q_in(start = 1.5813272e-06, fixed = true), volume(start = 2.7599679e-06, fixed = true)),
                brachial_L82(q_in(start = 2.692707e-06, fixed = true), volume(start = 1.3519715e-06, fixed = true)),
                ulnar_T2_L84(q_in(start = 1.5874244e-06, fixed = true), volume(start = 2.2584398e-07, fixed = true)),
                ulnar_T2_L90(volume(start = 6.168134e-05, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                radial_T1_L92(volume(start = 5.329875e-05, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                common_carotid_R6_A(q_in(start = 2.1119769e-07, fixed = true), volume(start = 4.1899884e-06, fixed = true)),
                common_carotid_R6_B(q_in(start = 1.6281941e-06, fixed = true), volume(start = 3.5809355e-06, fixed = true)),
                common_carotid_R6_C(q_in(start = 2.8441996e-06, fixed = true), volume(start = 2.685923e-06, fixed = true)),
                internal_carotid_R8_A(q_in(start = 1.7479218e-06, fixed = true), volume(start = 1.1754518e-06, fixed = true)),
                internal_carotid_R8_B(q_in(start = 1.8998805e-06, fixed = true), volume(start = 7.4846054e-07, fixed = true)),
                internal_carotid_R8_C(volume(start = 7.352709e-05, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                external_carotid_T2_R26(volume(start = 7.3683725e-05, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                common_carotid_L48_A(q_in(start = -1.2899004e-06, fixed = true), volume(start = 4.54401e-06, fixed = true)),
                common_carotid_L48_B(q_in(start = 1.9909697e-07, fixed = true), volume(start = 3.9926626e-06, fixed = true)),
                common_carotid_L48_C(q_in(start = 1.5406481e-06, fixed = true), volume(start = 3.5465957e-06, fixed = true)),
                common_carotid_L48_D(q_in(start = 2.7524704e-06, fixed = true), volume(start = 2.8782729e-06, fixed = true)),
                internal_carotid_L50_A(q_in(start = 1.7402537e-06, fixed = true), volume(start = 1.1753693e-06, fixed = true)),
                internal_carotid_L50_B(q_in(start = 1.896037e-06, fixed = true), volume(start = 7.4841483e-07, fixed = true)),
                internal_carotid_L50_C(volume(start = 7.3529096e-05, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                external_carotid_T2_L62(volume(start = 7.368296e-05, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                vertebral_L2(volume(start = 6.776998e-05, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                vertebral_R272(volume(start = 6.777278e-05, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                superior_vena_cava_C2(volume(start = 2.8647733e-06, fixed = true)),
                superior_vena_cava_C88(volume(start = 4.9365317e-06, fixed = true)),
                inferior_vena_cava_C8(volume(start = 4.2967667e-06, fixed = true)),
                hepatic_vein_T1_C10(volume(start = 1.6848544e-06, fixed = true)),
                inferior_vena_cava_C12(volume(start = 1.1658071e-05, fixed = true)),
                inferior_vena_cava_C16(volume(start = 9.167686e-06, fixed = true)),
                renal_vein_T1_R18(volume(start = 2.7020494e-06, fixed = true)),
                inferior_vena_cava_C20(volume(start = 6.3959834e-07, fixed = true)),
                renal_vein_T1_L22(volume(start = 2.387829e-06, fixed = true)),
                inferior_vena_cava_C24(volume(start = 2.550169e-05, fixed = true)),
                common_iliac_vein_L56(volume(start = 6.256652e-06, fixed = true), open(start = true, fixed = true)),
                common_iliac_vein_R26(volume(start = 5.7509783e-06, fixed = true), open(start = true, fixed = true)),
                external_iliac_vein_R28(volume(start = 8.3875074e-07, fixed = true)),
                internal_iliac_vein_T1_R30(volume(start = 3.5908229e-06, fixed = true)),
                external_iliac_vein_R32(volume(start = 9.723727e-06, fixed = true)),
                femoral_vein_R34(volume(start = 4.2269045e-07, fixed = true)),
                femoral_vein_R38(volume(start = 3.3501153e-06, fixed = true)),
                profunda_femoris_vein_T2_R40(volume(start = 9.3346825e-06, fixed = true)),
                femoral_vein_R42(volume(start = 2.3620385e-05, fixed = true)),
                femoral_vein_R46(volume(start = 1.3008773e-06, fixed = true)),
                popliteal_vein_R48(volume(start = 5.299695e-06, fixed = true)),
                anterior_tibial_vein_T4_R50(volume(start = 2.3505786e-06, fixed = true)),
                popliteal_vein_R52(volume(start = 1.1793006e-06, fixed = true)),
                posterior_tibial_vein_T6_R54(volume(start = 2.522306e-06, fixed = true)),
                external_iliac_vein_L58(volume(start = 8.3977903e-07, fixed = true)),
                internal_iliac_vein_T1_L60(volume(start = 3.693425e-06, fixed = true)),
                external_iliac_vein_L62(volume(start = 9.546534e-06, fixed = true)),
                femoral_vein_L64(volume(start = 4.941631e-07, fixed = true)),
                femoral_vein_L68(volume(start = 3.350211e-06, fixed = true)),
                profunda_femoris_vein_T2_L70(volume(start = 9.335182e-06, fixed = true)),
                femoral_vein_L72(volume(start = 2.3621795e-05, fixed = true)),
                femoral_vein_L76(volume(start = 1.3009476e-06, fixed = true)),
                popliteal_vein_L78(volume(start = 5.3001213e-06, fixed = true)),
                anterior_tibial_vein_T4_L80(volume(start = 2.3506752e-06, fixed = true)),
                popliteal_vein_L82(volume(start = 1.1794037e-06, fixed = true)),
                posterior_tibial_vein_T6_L84(volume(start = 2.5226468e-06, fixed = true)),
                brachiocephalic_vein_R90(volume(start = 5.7620773e-06, fixed = true), open(start = false, fixed = true)),
                brachiocephalic_vein_L124(volume(start = 1.08228105e-05, fixed = true), open(start = false, fixed = true)),
                vertebral_vein_R92(volume(start = 3.653847e-06, fixed = true)),
                brachiocephalic_vein_R94(volume(start = 1.3062565e-06, fixed = true)),
                subclavian_vein_R96(volume(start = 6.351788e-07, fixed = true)),
                internal_jugular_vein_R122(volume(start = 2.5091458e-05, fixed = true)),
                external_jugular_vein_R98(volume(start = 1.7938646e-06, fixed = true)),
                subclavian_vein_R100(volume(start = 2.5979737e-06, fixed = true)),
                axillary_vein_R102(volume(start = 9.133151e-06, fixed = true)),
                brachial_vein_R104(volume(start = 1.9267204e-06, fixed = true)),
                brachial_vein_R114(volume(start = 1.7536273e-06, fixed = true)),
                brachial_vein_R108(volume(start = 2.6907279e-07, fixed = true)),
                ulnar_vein_T7_R110(volume(start = 2.6400596e-06, fixed = true)),
                brachial_vein_R118(volume(start = 1.7089114e-07, fixed = true)),
                radial_vein_T3_R120(volume(start = 2.0314494e-06, fixed = true)),
                vertebral_vein_L126(volume(start = 3.419889e-06, fixed = true)),
                brachiocephalic_vein_L128(volume(start = 6.6162613e-07, fixed = true)),
                subclavian_vein_L130(volume(start = 5.661296e-07, fixed = true)),
                internal_jugular_vein_L156(volume(start = 1.5263338e-05, fixed = true)),
                external_jugular_vein_L132(volume(start = 1.7612657e-06, fixed = true)),
                subclavian_vein_L134(volume(start = 2.537613e-06, fixed = true)),
                axillary_vein_L136(volume(start = 9.256961e-06, fixed = true)),
                brachial_vein_L138(volume(start = 1.9296458e-06, fixed = true)),
                brachial_vein_L148(volume(start = 1.7675119e-06, fixed = true)),
                brachial_vein_L142(volume(start = 2.694894e-07, fixed = true)),
                ulnar_vein_T7_L144(volume(start = 2.6456673e-06, fixed = true)),
                brachial_vein_L152(volume(start = 1.7235504e-07, fixed = true)),
                radial_vein_T3_L154(volume(start = 2.0957336e-06, fixed = true)),
                mesenteric_artery(q_in(start = 7.234383e-06, fixed = true), volume(start = 6.362749e-06, fixed = true)),
                splanchnic_tissue(volume(start = 0.0002649702, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                splanchnic_vein(volume(start = 1.4043073e-05, fixed = true)),
                coronary_arteries(q_in(start = 2.5180716e-06, fixed = true), volume(start = 3.6479207e-08, fixed = true)),
                cardiac_tissue(volume(start = 0.000117654, fixed = true), phi_delayed(start = 0.2540449, fixed = true)),
                coronary_veins(volume(start = 5.4612364e-08, fixed = true)),
                brachial_L82_HeartLevel(q_in(start = 2.1482708e-06, fixed = true), volume(start = 2.7183012e-06, fixed = true))),
              heartComponent(
                tricuspidValve(open(start = false, fixed = true)),
                pulmonaryValve(open(start = true, fixed = true), BP_max(start = 0.0, fixed = true), BP_min(start = 26600.0, fixed = true), CO_acc(start = 0.0, fixed = true)),
                mitralValve(open(start = false, fixed = true), BP_max(start = 1048.1007, fixed = true), BP_min(start = 1136.824, fixed = true), CO_acc(start = 1.492538e-05, fixed = true)),
                aorticValve(open(start = false, fixed = true), BP_max(start = 0.0, fixed = true), BP_min(start = 11518.0625, fixed = true), CO_acc(start = -2.1981539e-09, fixed = true)),
                ventricles(
                  LV_wall(ym(start = 3.5694704, fixed = true), SL(start = 2.1688263, fixed = true)),
                  SEP_wall(SL(start = 2.177227, fixed = true)),
                  RV_wall(SL(start = 2.152234, fixed = true)),
                  calciumMechanics(tm(start = 0.09276072, fixed = true)), V_LV(start = 0.00014926316, fixed = true), V_RV(start = 0.00014292021, fixed = true), currentWork_LV(start = -0.012757437, fixed = true), currentWork_RV(start = -0.0028703595, fixed = true)),
                ra(volume(start = 5.507521e-06, fixed = true), currentWork(start = 11.678347, fixed = true)),
                la(volume(start = 1.2868401e-05, fixed = true), currentWork(start = 2.1097147, fixed = true)),
                idealValve_deactivable(open(start = false, fixed = true)),
                idealValve_deactivable1(open(start = false, fixed = true)),
                sa_node(t0(start = 0.17276073, fixed = true), cardiac_cycle(start = 0.18534014, fixed = true))),
              pulmonaryComponent(
                c_pa(volume(start = 3.0113339e-05, fixed = true)),
                c_pv(volume(start = 2.331198e-03 + settings.V_PV_init, fixed = true))),
              simplestLymphaticDynamicSpeedUp(p_vc_mean(start = 404.71158, fixed = true), J1_s(start = 9.2475005e-08, fixed = true), v_isf(start = 0.07065872, fixed = true), v_lymph(start = 0.0010376032, fixed = true), timeSpedUp(start = 2160600.0, fixed = true), q_int(start = 0.07053858, fixed = true), v_drained(start = 0.0, fixed = true), p_vc_s(start = 37.602303, fixed = true), J1s_s(start = 8.168187e-09, fixed = true), t0(start = 0.09, fixed = true)),
              addedVolume(volume(start = 0.0, fixed = true)),
              settings(V_PV_init = 0));
          annotation (conversion(noneFromVersion=""));
        end Baseline_renals_optim;
      end SteadyState;

      package CombinedModel
        "Combined model to perform identification of multiple use cases at once"
        model CombinedModels "All model variants combined for identification"
        //  ADAN_main.Components.settings_variant sv(a= 2, b = false);

          inner Components.Settings settings(
            syst_art_k_E(displayUnit="1") = 0.358125,
            syst_TR_frac(displayUnit="%") = 5.118955,
            syst_TPR(displayUnit="(mmHg.min)/l") = 119490152,
            initByPressure=false,
            heart_alphaE=0.2,
            syst_art_UseVasoconstrictionEffect=true,
            exercise_factor_on_arterial_compliance=0.2,
            UseNonLinear_TissuesCompliance=true,
            tissues_UseStraighteningReaction2Phi=true,
            tissues_chi_C=0.2,
            heart_vntr_xi_AmRef=1.06,
            heart_vntr_xi_Vw=0.90375,
            V_PV_init(displayUnit="ml"),
            baro_f1=0.00418,
            eta_vc=0.5,
            tissues_eta_Ra=4.2625,
            tissues_eta_C=0.2,
            tissues_gamma=0.5) annotation (Placement(transformation(extent={{-100,
                    80},{-80,100}})));
           // sv = sv,
          Obsolete.OlufsenTriSeg_base olufsenTriSeg_base(settings(
              phi0=settings.phi0,
              HR_max=settings.HR_max,
              HR_nominal=settings.HR_nominal,
              height=settings.height,
              weight=settings.weight,
              age=settings.age,
              initByPressure=settings.initByPressure,
              V_PV_init=settings.V_PV_init,
              heart_R_vlv=settings.heart_R_vlv,
              heart_R_LA=settings.heart_R_LA,
              heart_R_RA=settings.heart_R_RA,
              heart_drive_drive=settings.heart_drive_drive,
              heart_atr_Tact=settings.heart_atr_Tact,
              heart_atr_Emin=settings.heart_atr_Emin,
              heart_atr_Emax=settings.heart_atr_Emax,
              heart_atr_sigma_a=settings.heart_atr_sigma_a,
              exercise_factor_on_arterial_compliance=settings.exercise_factor_on_arterial_compliance,
              UseNonLinear_TissuesCompliance=settings.UseNonLinear_TissuesCompliance,
              tissues_UseStraighteningReaction2Phi=settings.tissues_UseStraighteningReaction2Phi,
              veins_gamma=settings.veins_gamma,
              veins_activation_tau=settings.veins_activation_tau,
              baro_useAbsolutePressureTerm=settings.baro_useAbsolutePressureTerm,
              baro_d0=settings.baro_d0,
              baro_delta0_aor=settings.baro_delta0_aor,
              baro_delta0_car=settings.baro_delta0_car,
              baro_g=settings.baro_g,
              baro_fsn=settings.baro_fsn,
              baro_f1=settings.baro_f1,
              pulm_CO_target=settings.pulm_CO_target,
              pulm_C_PV=settings.pulm_C_PV,
              pulm_C_PA=settings.pulm_C_PA,
              eta_vc=settings.eta_vc,
              syst_tissues_hydrostaticLevel_correction=settings.syst_tissues_hydrostaticLevel_correction,
              syst_abd_P_th_ratio=settings.syst_abd_P_th_ratio,
              syst_TPR=settings.syst_TPR,
              syst_TR_frac=settings.syst_TR_frac,
              syst_art_k_E=settings.syst_art_k_E,
              tissues_P_nom=settings.tissues_P_nom,
              tissues_ZPV_nom=settings.tissues_ZPV_nom,
              tissues_SV_nom=settings.tissues_SV_nom,
              tissues_CO_nom=settings.tissues_CO_nom,
              tissues_eta_Ra=settings.tissues_eta_Ra,
              tissues_eta_Rv=settings.tissues_eta_Rv,
              tissues_tau_R=settings.tissues_tau_R,
              baro_tau_s=settings.baro_tau_s,
              baro_xi_delta0=settings.baro_xi_delta0,
              veins_diameter_correction=settings.veins_diameter_correction,
              veins_chi_pump=settings.veins_chi_pump,
              syst_art_UseVasoconstrictionEffect=settings.syst_art_UseVasoconstrictionEffect,
              pulm_R=settings.pulm_R,
              heart_vntr_xi_Vw=settings.heart_vntr_xi_Vw,
              heart_vntr_xi_AmRef=settings.heart_vntr_xi_AmRef,
              heart_vntr_k_passive=settings.heart_vntr_k_passive,
              heart_vntr_D_0_maxAct=settings.heart_vntr_D_0_maxAct,
              heart_vntr_D_0=settings.heart_vntr_D_0,
              heart_vntr_D_A=settings.heart_vntr_D_A,
              heart_vntr_TS=settings.heart_vntr_TS,
              heart_vntr_TS_maxAct=settings.heart_vntr_TS_maxAct,
              heart_vntr_TR=settings.heart_vntr_TR,
              heart_vntr_TR_maxAct=settings.heart_vntr_TR_maxAct,
              heart_vntr_D_A_maxAct=settings.heart_vntr_D_A_maxAct,
              tissues_chi_Ra=settings.tissues_chi_Ra,
              tissues_chi_C=settings.tissues_chi_C)) if true
            annotation (Placement(transformation(extent={{-80,40},{-60,60}})));

          Tilt.CVS_tiltable olufsenTriSeg_tiltable(settings(
              phi0=settings.phi0,
              height=settings.height,
              weight=settings.weight,
              age=settings.age,
              initByPressure=settings.initByPressure,
              V_PV_init=settings.V_PV_init,
              heart_R_vlv=settings.heart_R_vlv,
              heart_R_LA=settings.heart_R_LA,
              heart_R_RA=settings.heart_R_RA,
              heart_drive_drive=settings.heart_drive_drive,
              heart_atr_Tact=settings.heart_atr_Tact,
              heart_atr_Emin=settings.heart_atr_Emin,
              heart_atr_Emax=settings.heart_atr_Emax,
              heart_atr_sigma_a=settings.heart_atr_sigma_a,
              exercise_factor_on_arterial_compliance=settings.exercise_factor_on_arterial_compliance,
              UseNonLinear_TissuesCompliance=settings.UseNonLinear_TissuesCompliance,
              tissues_UseStraighteningReaction2Phi=settings.tissues_UseStraighteningReaction2Phi,
              veins_gamma=settings.veins_gamma,
              veins_activation_tau=settings.veins_activation_tau,
              baro_useAbsolutePressureTerm=settings.baro_useAbsolutePressureTerm,
              baro_d0=settings.baro_d0,
              baro_delta0_aor=settings.baro_delta0_aor,
              baro_delta0_car=settings.baro_delta0_car,
              baro_g=settings.baro_g,
              baro_fsn=settings.baro_fsn,
              baro_f1=settings.baro_f1,
              pulm_CO_target=settings.pulm_CO_target,
              pulm_C_PV=settings.pulm_C_PV,
              pulm_C_PA=settings.pulm_C_PA,
              eta_vc=settings.eta_vc,
              syst_tissues_hydrostaticLevel_correction=settings.syst_tissues_hydrostaticLevel_correction,
              syst_abd_P_th_ratio=settings.syst_abd_P_th_ratio,
              syst_TPR=settings.syst_TPR,
              syst_TR_frac=settings.syst_TR_frac,
              syst_art_k_E=settings.syst_art_k_E,
              tissues_P_nom=settings.tissues_P_nom,
              tissues_ZPV_nom=settings.tissues_ZPV_nom,
              tissues_SV_nom=settings.tissues_SV_nom,
              tissues_CO_nom=settings.tissues_CO_nom,
              tissues_eta_Ra=settings.tissues_eta_Ra,
              tissues_eta_Rv=settings.tissues_eta_Rv,
              tissues_tau_R=settings.tissues_tau_R,
              baro_tau_s=settings.baro_tau_s,
              baro_xi_delta0=settings.baro_xi_delta0,
              veins_diameter_correction=settings.veins_diameter_correction,
              veins_chi_pump=settings.veins_chi_pump,
              syst_art_UseVasoconstrictionEffect=settings.syst_art_UseVasoconstrictionEffect,
              pulm_R=settings.pulm_R,
              heart_vntr_xi_Vw=settings.heart_vntr_xi_Vw,
              heart_vntr_xi_AmRef=settings.heart_vntr_xi_AmRef,
              heart_vntr_k_passive=settings.heart_vntr_k_passive,
              heart_vntr_D_0_maxAct=settings.heart_vntr_D_0_maxAct,
              heart_vntr_D_0=settings.heart_vntr_D_0,
              heart_vntr_D_A=settings.heart_vntr_D_A,
              heart_vntr_TS=settings.heart_vntr_TS,
              heart_vntr_TS_maxAct=settings.heart_vntr_TS_maxAct,
              heart_vntr_TR=settings.heart_vntr_TR,
              heart_vntr_TR_maxAct=settings.heart_vntr_TR_maxAct,
              heart_vntr_D_A_maxAct=settings.heart_vntr_D_A_maxAct,
              tissues_chi_Ra=settings.tissues_chi_Ra,
              tissues_chi_C=settings.tissues_chi_C)) if true
            annotation (Placement(transformation(extent={{-20,40},{0,60}})));

          Valsalva.CVS_valsalva olufsenTriSeg_valsalva(settings(
              phi0=settings.phi0,
              height=settings.height,
              weight=settings.weight,
              age=settings.age,
              initByPressure=settings.initByPressure,
              V_PV_init=settings.V_PV_init,
              heart_R_vlv=settings.heart_R_vlv,
              heart_R_LA=settings.heart_R_LA,
              heart_R_RA=settings.heart_R_RA,
              heart_drive_drive=settings.heart_drive_drive,
              heart_atr_Tact=settings.heart_atr_Tact,
              heart_atr_Emin=settings.heart_atr_Emin,
              heart_atr_Emax=settings.heart_atr_Emax,
              heart_atr_sigma_a=settings.heart_atr_sigma_a,
              exercise_factor_on_arterial_compliance=settings.exercise_factor_on_arterial_compliance,
              UseNonLinear_TissuesCompliance=settings.UseNonLinear_TissuesCompliance,
              tissues_UseStraighteningReaction2Phi=settings.tissues_UseStraighteningReaction2Phi,
              veins_gamma=settings.veins_gamma,
              veins_activation_tau=settings.veins_activation_tau,
              baro_useAbsolutePressureTerm=settings.baro_useAbsolutePressureTerm,
              baro_d0=settings.baro_d0,
              baro_delta0_aor=settings.baro_delta0_aor,
              baro_delta0_car=settings.baro_delta0_car,
              baro_g=settings.baro_g,
              baro_fsn=settings.baro_fsn,
              baro_f1=settings.baro_f1,
              pulm_CO_target=settings.pulm_CO_target,
              pulm_C_PV=settings.pulm_C_PV,
              pulm_C_PA=settings.pulm_C_PA,
              eta_vc=settings.eta_vc,
              syst_tissues_hydrostaticLevel_correction=settings.syst_tissues_hydrostaticLevel_correction,
              syst_abd_P_th_ratio=settings.syst_abd_P_th_ratio,
              syst_TPR=settings.syst_TPR,
              syst_TR_frac=settings.syst_TR_frac,
              syst_art_k_E=settings.syst_art_k_E,
              tissues_P_nom=settings.tissues_P_nom,
              tissues_ZPV_nom=settings.tissues_ZPV_nom,
              tissues_SV_nom=settings.tissues_SV_nom,
              tissues_CO_nom=settings.tissues_CO_nom,
              tissues_eta_Ra=settings.tissues_eta_Ra,
              tissues_eta_Rv=settings.tissues_eta_Rv,
              tissues_tau_R=settings.tissues_tau_R,
              baro_tau_s=settings.baro_tau_s,
              baro_xi_delta0=settings.baro_xi_delta0,
              veins_diameter_correction=settings.veins_diameter_correction,
              veins_chi_pump=settings.veins_chi_pump,
              syst_art_UseVasoconstrictionEffect=settings.syst_art_UseVasoconstrictionEffect,
              pulm_R=settings.pulm_R,
              heart_vntr_xi_Vw=settings.heart_vntr_xi_Vw,
              heart_vntr_xi_AmRef=settings.heart_vntr_xi_AmRef,
              heart_vntr_k_passive=settings.heart_vntr_k_passive,
              heart_vntr_D_0_maxAct=settings.heart_vntr_D_0_maxAct,
              heart_vntr_D_0=settings.heart_vntr_D_0,
              heart_vntr_D_A=settings.heart_vntr_D_A,
              heart_vntr_TS=settings.heart_vntr_TS,
              heart_vntr_TS_maxAct=settings.heart_vntr_TS_maxAct,
              heart_vntr_TR=settings.heart_vntr_TR,
              heart_vntr_TR_maxAct=settings.heart_vntr_TR_maxAct,
              heart_vntr_D_A_maxAct=settings.heart_vntr_D_A_maxAct,
              tissues_chi_Ra=settings.tissues_chi_Ra,
              tissues_chi_C=settings.tissues_chi_C)) if true
            annotation (Placement(transformation(extent={{-80,-20},{-60,0}})));

          // used regex find '(\w+)=we' and replace with \1=settings.\1
          Exercise.CVS_exercise olufsenTriseg_Exercise(settings(
              phi0=settings.phi0,
              height=settings.height,
              weight=settings.weight,
              age=settings.age,
              initByPressure=settings.initByPressure,
              V_PV_init=settings.V_PV_init,
              heart_R_vlv=settings.heart_R_vlv,
              heart_R_LA=settings.heart_R_LA,
              heart_R_RA=settings.heart_R_RA,
              heart_drive_drive=settings.heart_drive_drive,
              heart_atr_Tact=settings.heart_atr_Tact,
              heart_atr_Emin=settings.heart_atr_Emin,
              heart_atr_Emax=settings.heart_atr_Emax,
              heart_atr_sigma_a=settings.heart_atr_sigma_a,
              exercise_factor_on_arterial_compliance=settings.exercise_factor_on_arterial_compliance,
              UseNonLinear_TissuesCompliance=settings.UseNonLinear_TissuesCompliance,
              tissues_UseStraighteningReaction2Phi=settings.tissues_UseStraighteningReaction2Phi,
              veins_gamma=settings.veins_gamma,
              veins_activation_tau=settings.veins_activation_tau,
              baro_useAbsolutePressureTerm=settings.baro_useAbsolutePressureTerm,
              baro_d0=settings.baro_d0,
              baro_delta0_aor=settings.baro_delta0_aor,
              baro_delta0_car=settings.baro_delta0_car,
              baro_g=settings.baro_g,
              baro_fsn=settings.baro_fsn,
              baro_f1=settings.baro_f1,
              pulm_CO_target=settings.pulm_CO_target,
              pulm_C_PV=settings.pulm_C_PV,
              pulm_C_PA=settings.pulm_C_PA,
              eta_vc=settings.eta_vc,
              syst_tissues_hydrostaticLevel_correction=settings.syst_tissues_hydrostaticLevel_correction,
              syst_abd_P_th_ratio=settings.syst_abd_P_th_ratio,
              syst_TPR=settings.syst_TPR,
              syst_TR_frac=settings.syst_TR_frac,
              syst_art_k_E=settings.syst_art_k_E,
              tissues_P_nom=settings.tissues_P_nom,
              tissues_ZPV_nom=settings.tissues_ZPV_nom,
              tissues_SV_nom=settings.tissues_SV_nom,
              tissues_CO_nom=settings.tissues_CO_nom,
              tissues_eta_Ra=settings.tissues_eta_Ra,
              tissues_eta_Rv=settings.tissues_eta_Rv,
              tissues_tau_R=settings.tissues_tau_R,
              baro_tau_s=settings.baro_tau_s,
              baro_xi_delta0=settings.baro_xi_delta0,
              veins_diameter_correction=settings.veins_diameter_correction,
              veins_chi_pump=settings.veins_chi_pump,
              syst_art_UseVasoconstrictionEffect=settings.syst_art_UseVasoconstrictionEffect,
              pulm_R=settings.pulm_R,
              heart_vntr_xi_Vw=settings.heart_vntr_xi_Vw,
              heart_vntr_xi_AmRef=settings.heart_vntr_xi_AmRef,
              heart_vntr_k_passive=settings.heart_vntr_k_passive,
              heart_vntr_D_0_maxAct=settings.heart_vntr_D_0_maxAct,
              heart_vntr_D_0=settings.heart_vntr_D_0,
              heart_vntr_D_A=settings.heart_vntr_D_A,
              heart_vntr_TS=settings.heart_vntr_TS,
              heart_vntr_TS_maxAct=settings.heart_vntr_TS_maxAct,
              heart_vntr_TR=settings.heart_vntr_TR,
              heart_vntr_TR_maxAct=settings.heart_vntr_TR_maxAct,
              heart_vntr_D_A_maxAct=settings.heart_vntr_D_A_maxAct,
              tissues_chi_Ra=settings.tissues_chi_Ra,
              tissues_chi_C=settings.tissues_chi_C)) if true
            annotation (Placement(transformation(extent={{40,40},{60,60}})));

          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false), graphics={
                Text(
                  extent={{-90,24},{-52,36}},
                  lineColor={28,108,200},
                  textString="Baseline"),
                Text(
                  extent={{-30,24},{8,36}},
                  lineColor={28,108,200},
                  textString="Tilt 60deg"),
                Text(
                  extent={{-88,-36},{-50,-24}},
                  lineColor={28,108,200},
                  textString="Valsalva supine"),
                Text(
                  extent={{-28,-36},{10,-24}},
                  lineColor={28,108,200},
                  textString="Valsalva sitting"),
                Text(
                  extent={{32,24},{70,36}},
                  lineColor={28,108,200},
                  textString="Exercise")}),
            experiment(
              StopTime=60,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CombinedModels;

        model CombinedModels_FMUsTest
          "All model variants combined for identification by importing FMU2 CS to have separate solver events"
          Components.Settings settings(
            syst_art_k_E(displayUnit="1") = 0.358125,
            syst_TR_frac(displayUnit="%") = 5.118955,
            syst_TPR(displayUnit="(mmHg.min)/l") = 119490152,
            UseNonLinear_TissuesCompliance=true,
            tissues_UseStraighteningReaction2Phi=true,
            tissues_eta_C=0.2,
            tissues_chi_C=0.2,
            veins_UseNonLinearVeins=true,
            veins_activation_tau=0.1,
            heart_vntr_xi_AmRef=1.06,
            heart_vntr_xi_Vw=0.90375,
            initByPressure=false,
            V_PV_init=7.4e-05,
            tissues_gamma=0.5,
            baro_useAbsolutePressureTerm=false,
            baro_tau_s=300,
            baro_f1=0.0031,
            syst_art_UseVasoconstrictionEffect=true,
            exercise_factor_on_arterial_compliance=0,
            eta_vc=0.25,
            tissues_chi_Ra=40) annotation (Placement(transformation(extent={{-100,
                    80},{-80,100}})));

                                          /* test
   ,R_vc=0.5,
      Ra_factor=4.2625,
      tissuesCompliance_PhiEffect=0.2,
      tissues_gamma=0.5                                  
                                  
                                  */
                                            // test
            /* from TriSegOptimizedBaseline */

           // from TriSegOptimizedBaseline
          // used regex find '(\w+)=we' and replace with \1=settings.\1
          ADAN_0main_SystemicTree_Baseline_OlufsenTriSeg_0base_fmu_black_box
            baseline(
            settings(
              phi0=settings.phi0,
              height=settings.height,
              weight=settings.weight,
              age=settings.age,
              HR_nominal=settings.HR_nominal,
              HR_max=settings.HR_max,
              V_PV_init=settings.V_PV_init,
              heart_R_vlv=settings.heart_R_vlv,
              heart_R_LA=settings.heart_R_LA,
              heart_R_RA=settings.heart_R_RA,
              heart_alphaE=settings.heart_alphaE,
              heart_gammaE=settings.heart_gammaE,
              heart_drive_offset=settings.heart_vntr_D_0,
              heart_drive_offset_maxAct=settings.heart_vntr_D_0_maxAct,
              heart_drive_k_TS=settings.heart_vntr_TS,
              heart_drive_k_TS_maxAct=settings.heart_vntr_TS_maxAct,
              heart_drive_k_TR=settings.heart_vntr_TR,
              heart_drive_k_TR_maxAct=settings.heart_vntr_TR_maxAct,
              heart_drive_drive=settings.heart_drive_drive,
              heart_atr_Tact=settings.heart_atr_Tact,
              heart_atr_Emin=settings.heart_atr_Emin,
              heart_atr_Emax=settings.heart_atr_Emax,
              heart_atr_sigma_a=settings.heart_atr_sigma_a,
              heart_vntr_Vw_factor=settings.heart_vntr_xi_Vw,
              heart_vntr_AmRef_factor=settings.heart_vntr_xi_AmRef,
              heart_vntr_sigma_act_factor=settings.heart_vntr_D_A,
              heart_vntr_sigma_actMaxAct_factor=settings.heart_vntr_D_A_maxAct,
              heart_vntr_k_passive_factor=settings.heart_vntr_k_passive,
              thoracic_pressure_ratio=settings.syst_abd_P_th_ratio,
              hydrostaticLevel_correction=settings.syst_tissues_hydrostaticLevel_correction,
              TPR=settings.syst_TPR,
              TR_frac=settings.syst_TR_frac,
              k_E=settings.syst_art_k_E,
              exercise_factor_on_arterial_compliance=settings.exercise_factor_on_arterial_compliance,
              R_vc=settings.eta_vc,
              tissues_nominal_pressure=settings.tissues_P_nom,
              tissues_nominal_zpv=settings.tissues_ZPV_nom,
              tissues_nominal_stressed_volume=settings.tissues_SV_nom,
              tissues_nominal_cardiac_output=settings.tissues_CO_nom,
              Ra_factor=settings.tissues_eta_Ra,
              tissues_Ra_tau=settings.tissues_tau_R,
              tissuesCompliance_PhiEffect=settings.tissues_eta_C,
              exercise_factor_on_tissue_compliance=settings.tissues_chi_C,
              tissues_gamma=settings.tissues_gamma,
              exercise_factor=settings.tissues_chi_Ra,
              exercise_venous_pumping_factor=settings.veins_chi_pump,
              UseNonLinear_VenousCompliance=settings.veins_UseNonLinearVeins,
              veins_UsePhiEffect=settings.veins_UsePhiEffect,
              veins_gamma=settings.veins_gamma,
              veins_alpha=settings.veins_alpha,
              veins_activation_tau=settings.veins_activation_tau,
              venous_diameter_correction=settings.veins_diameter_correction,
              baro_d0=settings.baro_d0,
              baro_Ts=settings.baro_tau_s,
              baro_delta0_factor=settings.baro_xi_delta0,
              baro_delta0_aor=settings.baro_delta0_aor,
              baro_delta0_car=settings.baro_delta0_car,
              baro_g=settings.baro_g,
              baro_fsn=settings.baro_fsn,
              baro_f1=settings.baro_f1,
              pulm_CO_target=settings.pulm_CO_target,
              pulm_C_PV=settings.pulm_C_PV,
              pulm_C_PA=settings.pulm_C_PA,
              pulm_R_PA=settings.pulm_R),
            fmi_StopTime=60,
            fmi_NumberOfSteps=steps)
            annotation (Placement(transformation(extent={{-82,44},{-62,64}})));

          parameter Real steps=endTime/stepInterval;
          parameter Real endTime=60;
          parameter Real stepInterval = 0.04;
          Obsolete.OlufsenTriSeg_base olufsenTriSeg_base(settings(
              phi0=settings.phi0,
              height=settings.height,
              weight=settings.weight,
              age=settings.age,
              HR_nominal=settings.HR_nominal,
              HR_max=settings.HR_max,
              V_PV_init=settings.V_PV_init,
              heart_R_vlv=settings.heart_R_vlv,
              heart_R_LA=settings.heart_R_LA,
              heart_R_RA=settings.heart_R_RA,
              heart_alphaE=settings.heart_alphaE,
              heart_gammaE=settings.heart_gammaE,
              heart_drive_drive=settings.heart_drive_drive,
              heart_atr_Tact=settings.heart_atr_Tact,
              heart_atr_Emin=settings.heart_atr_Emin,
              heart_atr_Emax=settings.heart_atr_Emax,
              heart_atr_sigma_a=settings.heart_atr_sigma_a,
              exercise_factor_on_arterial_compliance=settings.exercise_factor_on_arterial_compliance,
              tissues_gamma=settings.tissues_gamma,
              veins_UsePhiEffect=settings.veins_UsePhiEffect,
              veins_gamma=settings.veins_gamma,
              veins_alpha=settings.veins_alpha,
              veins_activation_tau=settings.veins_activation_tau,
              baro_d0=settings.baro_d0,
              baro_delta0_aor=settings.baro_delta0_aor,
              baro_delta0_car=settings.baro_delta0_car,
              baro_g=settings.baro_g,
              baro_fsn=settings.baro_fsn,
              baro_f1=settings.baro_f1,
              pulm_CO_target=settings.pulm_CO_target,
              pulm_C_PV=settings.pulm_C_PV,
              pulm_C_PA=settings.pulm_C_PA,
              eta_vc=settings.eta_vc,
              syst_tissues_hydrostaticLevel_correction=settings.syst_tissues_hydrostaticLevel_correction,
              syst_abd_P_th_ratio=settings.syst_abd_P_th_ratio,
              syst_TPR=settings.syst_TPR,
              syst_TR_frac=settings.syst_TR_frac,
              syst_art_k_E=settings.syst_art_k_E,
              tissues_P_nom=settings.tissues_P_nom,
              tissues_ZPV_nom=settings.tissues_ZPV_nom,
              tissues_SV_nom=settings.tissues_SV_nom,
              tissues_CO_nom=settings.tissues_CO_nom,
              tissues_eta_Ra=settings.tissues_eta_Ra,
              tissues_tau_R=settings.tissues_tau_R,
              tissues_eta_C=settings.tissues_eta_C,
              baro_tau_s=settings.baro_tau_s,
              baro_xi_delta0=settings.baro_xi_delta0,
              veins_diameter_correction=settings.veins_diameter_correction,
              veins_chi_pump=settings.veins_chi_pump,
              pulm_R=settings.pulm_R,
              heart_vntr_xi_Vw=settings.heart_vntr_xi_Vw,
              heart_vntr_xi_AmRef=settings.heart_vntr_xi_AmRef,
              heart_vntr_k_passive=settings.heart_vntr_k_passive,
              heart_vntr_D_0_maxAct=settings.heart_vntr_D_0_maxAct,
              heart_vntr_D_0=settings.heart_vntr_D_0,
              heart_vntr_D_A=settings.heart_vntr_D_A,
              heart_vntr_TS=settings.heart_vntr_TS,
              heart_vntr_TS_maxAct=settings.heart_vntr_TS_maxAct,
              heart_vntr_TR=settings.heart_vntr_TR,
              heart_vntr_TR_maxAct=settings.heart_vntr_TR_maxAct,
              heart_vntr_D_A_maxAct=settings.heart_vntr_D_A_maxAct,
              veins_UseNonLinearVeins=settings.veins_UseNonLinearVeins,
              tissues_chi_Ra=settings.tissues_chi_Ra,
              tissues_chi_C=settings.tissues_chi_C))
            annotation (Placement(transformation(extent={{-40,80},{-20,100}})));

          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false), graphics={
                Text(
                  extent={{-90,24},{-52,36}},
                  lineColor={28,108,200},
                  textString="Baseline"),
                Text(
                  extent={{-30,24},{8,36}},
                  lineColor={28,108,200},
                  textString="Tilt 60deg"),
                Text(
                  extent={{-88,-36},{-50,-24}},
                  lineColor={28,108,200},
                  textString="Valsalva supine"),
                Text(
                  extent={{-28,-36},{10,-24}},
                  lineColor={28,108,200},
                  textString="Valsalva sitting"),
                Text(
                  extent={{32,24},{70,36}},
                  lineColor={28,108,200},
                  textString="Exercise")}),
            experiment(
              StopTime=60,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CombinedModels_FMUsTest;

        model CombinedModels_FMUs
          "All model variants combined for identification by importing FMU2 CS to have separate solver events"

          parameter Boolean useBaseline = true;
          parameter Boolean useTilt = true;
          parameter Boolean useExercise = true;
          parameter Boolean useValsalva = true;

                                          /* test
   ,R_vc=0.5,
      Ra_factor=4.2625,
      tissuesCompliance_PhiEffect=0.2,
      tissues_gamma=0.5                                  
                                  
                                  */
                                            // test
            /* from TriSegOptimizedBaseline */

          // Fill settings with rubbish and replace the path
          // use a regex find '(\w+)\s?=\s?[0-9e\-.]+' and replace with \1=settings.\1
          replaceable
            ADAN_0main_SystemicTree_Baseline_CVS_0baseline_fmu_black_box
            baseline(
            settings(
              phi0=settings.phi0,
              height=settings.height,
              age=settings.age,
              HR_nominal=settings.HR_nominal,
              HR_max=settings.HR_max,
              BMI(unit="kg/m2") = settings.BMI,
              V_PV_init=settings.V_PV_init,
              veins_linearE_rel(unit="Pa"),
              vessel_b(unit="m-1"),
              vessel_d(unit="m-1"),
              blood_mu(unit="J.s.m-3"),
              blood_rho(unit="J.s2.m-5"),
              chi_phi=settings.chi_phi,
              heart_R_vlv=settings.heart_R_vlv,
              heart_R_LA=settings.heart_R_LA,
              heart_R_A_vis=settings.heart_R_A_vis,
              heart_I_A=settings.heart_I_A,
              heart_alphaE=settings.heart_alphaE,
              heart_gammaE=settings.heart_gammaE,
              heart_vntr_D_0(unit="Pa/m3") = settings.heart_vntr_D_0,
              heart_vntr_D_0_maxAct(unit="Pa/m3") = settings.heart_vntr_D_0_maxAct,
              heart_vntr_D_A(unit="Pa/m3") = settings.heart_vntr_D_A,
              heart_vntr_D_A_maxAct(unit="Pa/m3") = settings.heart_vntr_D_A_maxAct,
              heart_vntr_TS=settings.heart_vntr_TS,
              heart_vntr_TS_maxAct=settings.heart_vntr_TS_maxAct,
              heart_vntr_TR=settings.heart_vntr_TR,
              heart_vntr_TR_maxAct=settings.heart_vntr_TR_maxAct,
              heart_vntr_Tact=settings.heart_vntr_Tact,
              heart_vntr_Tact_maxAct=settings.heart_vntr_Tact_maxAct,
              heart_atr_D_0=settings.heart_atr_D_0,
              heart_atr_D_A=settings.heart_atr_D_A,
              heart_atr_TS=settings.heart_atr_TS,
              heart_atr_TR=settings.heart_atr_TR,
              heart_vntr_xi_Vw=settings.heart_vntr_xi_Vw,
              heart_vntr_xi_AmRef=settings.heart_vntr_xi_AmRef,
              heart_vntr_k_passive=settings.heart_vntr_k_passive,
              heart_vntr_Lsref=settings.heart_vntr_Lsref,
              heart_vntr_L0=settings.heart_vntr_L0,
              heart_vntr_SLcollagen=settings.heart_vntr_SLcollagen,
              heart_vntr_SLrest=settings.heart_vntr_SLrest,
              heart_vntr_PConcollagen=settings.heart_vntr_PConcollagen,
              heart_vntr_PExpcollagen=settings.heart_vntr_PExpcollagen,
              syst_abd_P_th_ratio=settings.syst_abd_P_th_ratio,
              syst_TPR=settings.syst_TPR,
              syst_TR_frac=settings.syst_TR_frac,
              syst_art_k_E=settings.syst_art_k_E,
              eta_vc=settings.eta_vc,
              syst_tissues_hydrostaticLevel_correction=settings.syst_tissues_hydrostaticLevel_correction,
              tissues_SV_nom=settings.tissues_SV_nom,
              tissues_CO_nom=settings.tissues_CO_nom,
              tissues_eta_Ra=settings.tissues_eta_Ra,
              tissues_eta_Rv=settings.tissues_eta_Rv,
              tissues_V_max_breakPoint_Frac=settings.tissues_V_max_breakPoint_Frac,
              tissues_eta_C=settings.tissues_eta_C,
              veins_chi_pump=settings.veins_chi_pump,
              eta_adenosine=settings.eta_adenosine,
              veins_UsePhiEffect=true,
              veins_C_phi=settings.veins_C_phi,
              veins_ZPV_phi=settings.veins_ZPV_phi,
              veins_gamma=settings.veins_gamma,
              veins_alpha=settings.veins_alpha,
              veins_diameter_correction=settings.veins_diameter_correction,
              baro_tau_s=settings.baro_tau_s,
              baro_a(unit="s-1") = settings.baro_a,
              baro_b(unit="s-1") = settings.baro_b,
              baro_f0(unit="s-1") = settings.baro_f0,
              baro_xi_delta0=settings.baro_xi_delta0,
              baro_delta0_aor=settings.baro_delta0_aor,
              baro_delta0_car=settings.baro_delta0_car,
              baro_g=settings.baro_g,
              baro_fsn=settings.baro_fsn,
              baro_f1=settings.baro_f1,
              pulm_CO_target=settings.pulm_CO_target,
              pulm_C_PV=settings.pulm_C_PV,
              pulm_C_PA=settings.pulm_C_PA,
              pulm_P_PV_nom=settings.pulm_P_PV_nom,
              pulm_R=settings.pulm_R,
              pulm_q_nom_maxq=settings.pulm_q_nom_maxq,
              pulm_R_exp=settings.pulm_R_exp,
              pulm_PV_R_vis=settings.pulm_PV_R_vis,
              pulm_tp_pleural_frac=settings.pulm_tp_pleural_frac,
              veins_activation_tau=settings.veins_activation_tau,
              veins_relaxation_tau=settings.veins_relaxation_tau,
              tissues_chi_Ra=settings.tissues_chi_Ra,
              tissues_chi_Rv=settings.tissues_chi_Rv,
              tissues_chi_C=settings.tissues_chi_C),
            fmi_StartTime=60,
            fmi_StopTime=120,
            fmi_NumberOfSteps=steps,
            fmi_forceShutDownAtStopTime=true) if useBaseline
            annotation (Placement(transformation(extent={{-82,44},{-62,64}})));

          replaceable
            ADAN_0main_SystemicTree_Exercise_CVS_0exercise_fmu_black_box
            exercise(
            settings(
              phi0=settings.phi0,
              height=settings.height,
              age=settings.age,
              HR_nominal=settings.HR_nominal,
              HR_max=settings.HR_max,
              BMI(unit="kg/m2") = settings.BMI,
              V_PV_init=settings.V_PV_init,
              veins_linearE_rel(unit="Pa"),
              vessel_b(unit="m-1"),
              vessel_d(unit="m-1"),
              blood_mu(unit="J.s.m-3"),
              blood_rho(unit="J.s2.m-5"),
              chi_phi=settings.chi_phi,
              heart_R_vlv=settings.heart_R_vlv,
              heart_R_LA=settings.heart_R_LA,
              heart_R_A_vis=settings.heart_R_A_vis,
              heart_I_A=settings.heart_I_A,
              heart_alphaE=settings.heart_alphaE,
              heart_gammaE=settings.heart_gammaE,
              heart_vntr_D_0(unit="Pa/m3") = settings.heart_vntr_D_0,
              heart_vntr_D_0_maxAct(unit="Pa/m3") = settings.heart_vntr_D_0_maxAct,
              heart_vntr_D_A(unit="Pa/m3") = settings.heart_vntr_D_A,
              heart_vntr_D_A_maxAct(unit="Pa/m3") = settings.heart_vntr_D_A_maxAct,
              heart_vntr_TS=settings.heart_vntr_TS,
              heart_vntr_TS_maxAct=settings.heart_vntr_TS_maxAct,
              heart_vntr_TR=settings.heart_vntr_TR,
              heart_vntr_TR_maxAct=settings.heart_vntr_TR_maxAct,
              heart_vntr_Tact=settings.heart_vntr_Tact,
              heart_vntr_Tact_maxAct=settings.heart_vntr_Tact_maxAct,
              heart_atr_D_0=settings.heart_atr_D_0,
              heart_atr_D_A=settings.heart_atr_D_A,
              heart_atr_TS=settings.heart_atr_TS,
              heart_atr_TR=settings.heart_atr_TR,
              heart_vntr_xi_Vw=settings.heart_vntr_xi_Vw,
              heart_vntr_xi_AmRef=settings.heart_vntr_xi_AmRef,
              heart_vntr_k_passive=settings.heart_vntr_k_passive,
              heart_vntr_Lsref=settings.heart_vntr_Lsref,
              heart_vntr_L0=settings.heart_vntr_L0,
              heart_vntr_SLcollagen=settings.heart_vntr_SLcollagen,
              heart_vntr_SLrest=settings.heart_vntr_SLrest,
              heart_vntr_PConcollagen=settings.heart_vntr_PConcollagen,
              heart_vntr_PExpcollagen=settings.heart_vntr_PExpcollagen,
              syst_abd_P_th_ratio=settings.syst_abd_P_th_ratio,
              syst_TPR=settings.syst_TPR,
              syst_TR_frac=settings.syst_TR_frac,
              syst_art_k_E=settings.syst_art_k_E,
              eta_vc=settings.eta_vc,
              syst_tissues_hydrostaticLevel_correction=settings.syst_tissues_hydrostaticLevel_correction,
              tissues_SV_nom=settings.tissues_SV_nom,
              tissues_CO_nom=settings.tissues_CO_nom,
              tissues_eta_Ra=settings.tissues_eta_Ra,
              tissues_eta_Rv=settings.tissues_eta_Rv,
              tissues_V_max_breakPoint_Frac=settings.tissues_V_max_breakPoint_Frac,
              tissues_eta_C=settings.tissues_eta_C,
              veins_chi_pump=settings.veins_chi_pump,
              eta_adenosine=settings.eta_adenosine,
              veins_UsePhiEffect=true,
              veins_C_phi=settings.veins_C_phi,
              veins_ZPV_phi=settings.veins_ZPV_phi,
              veins_gamma=settings.veins_gamma,
              veins_alpha=settings.veins_alpha,
              veins_diameter_correction=settings.veins_diameter_correction,
              baro_tau_s=settings.baro_tau_s,
              baro_a(unit="s-1") = settings.baro_a,
              baro_b(unit="s-1") = settings.baro_b,
              baro_f0(unit="s-1") = settings.baro_f0,
              baro_xi_delta0=settings.baro_xi_delta0,
              baro_delta0_aor=settings.baro_delta0_aor,
              baro_delta0_car=settings.baro_delta0_car,
              baro_g=settings.baro_g,
              baro_fsn=settings.baro_fsn,
              baro_f1=settings.baro_f1,
              pulm_CO_target=settings.pulm_CO_target,
              pulm_C_PV=settings.pulm_C_PV,
              pulm_C_PA=settings.pulm_C_PA,
              pulm_P_PV_nom=settings.pulm_P_PV_nom,
              pulm_R=settings.pulm_R,
              pulm_q_nom_maxq=settings.pulm_q_nom_maxq,
              pulm_R_exp=settings.pulm_R_exp,
              pulm_PV_R_vis=settings.pulm_PV_R_vis,
              pulm_tp_pleural_frac=settings.pulm_tp_pleural_frac,
              veins_activation_tau=settings.veins_activation_tau,
              veins_relaxation_tau=settings.veins_relaxation_tau,
              tissues_chi_Ra=settings.tissues_chi_Ra,
              tissues_chi_Rv=settings.tissues_chi_Rv,
              tissues_chi_C=settings.tissues_chi_C),
            fmi_StartTime=100,
            fmi_StopTime=120,
            fmi_NumberOfSteps=steps,
            fmi_forceShutDownAtStopTime=true) if useExercise
            annotation (Placement(transformation(extent={{38,42},{58,62}})));

          replaceable ADAN_0main_SystemicTree_Tilt_CVS_0tiltable_fmu_black_box
            tilt(
            settings(
              phi0=settings.phi0,
              height=settings.height,
              age=settings.age,
              HR_nominal=settings.HR_nominal,
              HR_max=settings.HR_max,
              BMI(unit="kg/m2") = settings.BMI,
              V_PV_init=settings.V_PV_init,
              veins_linearE_rel(unit="Pa"),
              vessel_b(unit="m-1"),
              vessel_d(unit="m-1"),
              blood_mu(unit="J.s.m-3"),
              blood_rho(unit="J.s2.m-5"),
              chi_phi=settings.chi_phi,
              heart_R_vlv=settings.heart_R_vlv,
              heart_R_LA=settings.heart_R_LA,
              heart_R_A_vis=settings.heart_R_A_vis,
              heart_I_A=settings.heart_I_A,
              heart_alphaE=settings.heart_alphaE,
              heart_gammaE=settings.heart_gammaE,
              heart_vntr_D_0(unit="Pa/m3") = settings.heart_vntr_D_0,
              heart_vntr_D_0_maxAct(unit="Pa/m3") = settings.heart_vntr_D_0_maxAct,
              heart_vntr_D_A(unit="Pa/m3") = settings.heart_vntr_D_A,
              heart_vntr_D_A_maxAct(unit="Pa/m3") = settings.heart_vntr_D_A_maxAct,
              heart_vntr_TS=settings.heart_vntr_TS,
              heart_vntr_TS_maxAct=settings.heart_vntr_TS_maxAct,
              heart_vntr_TR=settings.heart_vntr_TR,
              heart_vntr_TR_maxAct=settings.heart_vntr_TR_maxAct,
              heart_vntr_Tact=settings.heart_vntr_Tact,
              heart_vntr_Tact_maxAct=settings.heart_vntr_Tact_maxAct,
              heart_atr_D_0=settings.heart_atr_D_0,
              heart_atr_D_A=settings.heart_atr_D_A,
              heart_atr_TS=settings.heart_atr_TS,
              heart_atr_TR=settings.heart_atr_TR,
              heart_vntr_xi_Vw=settings.heart_vntr_xi_Vw,
              heart_vntr_xi_AmRef=settings.heart_vntr_xi_AmRef,
              heart_vntr_k_passive=settings.heart_vntr_k_passive,
              heart_vntr_Lsref=settings.heart_vntr_Lsref,
              heart_vntr_L0=settings.heart_vntr_L0,
              heart_vntr_SLcollagen=settings.heart_vntr_SLcollagen,
              heart_vntr_SLrest=settings.heart_vntr_SLrest,
              heart_vntr_PConcollagen=settings.heart_vntr_PConcollagen,
              heart_vntr_PExpcollagen=settings.heart_vntr_PExpcollagen,
              syst_abd_P_th_ratio=settings.syst_abd_P_th_ratio,
              syst_TPR=settings.syst_TPR,
              syst_TR_frac=settings.syst_TR_frac,
              syst_art_k_E=settings.syst_art_k_E,
              eta_vc=settings.eta_vc,
              syst_tissues_hydrostaticLevel_correction=settings.syst_tissues_hydrostaticLevel_correction,
              tissues_SV_nom=settings.tissues_SV_nom,
              tissues_CO_nom=settings.tissues_CO_nom,
              tissues_eta_Ra=settings.tissues_eta_Ra,
              tissues_eta_Rv=settings.tissues_eta_Rv,
              tissues_V_max_breakPoint_Frac=settings.tissues_V_max_breakPoint_Frac,
              tissues_eta_C=settings.tissues_eta_C,
              veins_chi_pump=settings.veins_chi_pump,
              eta_adenosine=settings.eta_adenosine,
              veins_UsePhiEffect=true,
              veins_C_phi=settings.veins_C_phi,
              veins_ZPV_phi=settings.veins_ZPV_phi,
              veins_gamma=settings.veins_gamma,
              veins_alpha=settings.veins_alpha,
              veins_diameter_correction=settings.veins_diameter_correction,
              baro_tau_s=settings.baro_tau_s,
              baro_a(unit="s-1") = settings.baro_a,
              baro_b(unit="s-1") = settings.baro_b,
              baro_f0(unit="s-1") = settings.baro_f0,
              baro_xi_delta0=settings.baro_xi_delta0,
              baro_delta0_aor=settings.baro_delta0_aor,
              baro_delta0_car=settings.baro_delta0_car,
              baro_g=settings.baro_g,
              baro_fsn=settings.baro_fsn,
              baro_f1=settings.baro_f1,
              pulm_CO_target=settings.pulm_CO_target,
              pulm_C_PV=settings.pulm_C_PV,
              pulm_C_PA=settings.pulm_C_PA,
              pulm_P_PV_nom=settings.pulm_P_PV_nom,
              pulm_R=settings.pulm_R,
              pulm_q_nom_maxq=settings.pulm_q_nom_maxq,
              pulm_R_exp=settings.pulm_R_exp,
              pulm_PV_R_vis=settings.pulm_PV_R_vis,
              pulm_tp_pleural_frac=settings.pulm_tp_pleural_frac,
              veins_activation_tau=settings.veins_activation_tau,
              veins_relaxation_tau=settings.veins_relaxation_tau,
              tissues_chi_Ra=settings.tissues_chi_Ra,
              tissues_chi_Rv=settings.tissues_chi_Rv,
              tissues_chi_C=settings.tissues_chi_C),
            fmi_StartTime=0,
            fmi_StopTime=120,
            fmi_NumberOfSteps=steps,
            fmi_forceShutDownAtStopTime=false) if useTilt
            annotation (Placement(transformation(extent={{-22,44},{-2,64}})));

          replaceable
            ADAN_0main_SystemicTree_Valsalva_CVS_0valsalva_fmu_black_box
            valsalva(
            settings(
              phi0=settings.phi0,
              height=settings.height,
              age=settings.age,
              HR_nominal=settings.HR_nominal,
              HR_max=settings.HR_max,
              BMI(unit="kg/m2") = settings.BMI,
              V_PV_init=settings.V_PV_init,
              veins_linearE_rel(unit="Pa"),
              vessel_b(unit="m-1"),
              vessel_d(unit="m-1"),
              blood_mu(unit="J.s.m-3"),
              blood_rho(unit="J.s2.m-5"),
              chi_phi=settings.chi_phi,
              heart_R_vlv=settings.heart_R_vlv,
              heart_R_LA=settings.heart_R_LA,
              heart_R_A_vis=settings.heart_R_A_vis,
              heart_I_A=settings.heart_I_A,
              heart_alphaE=settings.heart_alphaE,
              heart_gammaE=settings.heart_gammaE,
              heart_vntr_D_0(unit="Pa/m3") = settings.heart_vntr_D_0,
              heart_vntr_D_0_maxAct(unit="Pa/m3") = settings.heart_vntr_D_0_maxAct,
              heart_vntr_D_A(unit="Pa/m3") = settings.heart_vntr_D_A,
              heart_vntr_D_A_maxAct(unit="Pa/m3") = settings.heart_vntr_D_A_maxAct,
              heart_vntr_TS=settings.heart_vntr_TS,
              heart_vntr_TS_maxAct=settings.heart_vntr_TS_maxAct,
              heart_vntr_TR=settings.heart_vntr_TR,
              heart_vntr_TR_maxAct=settings.heart_vntr_TR_maxAct,
              heart_vntr_Tact=settings.heart_vntr_Tact,
              heart_vntr_Tact_maxAct=settings.heart_vntr_Tact_maxAct,
              heart_atr_D_0=settings.heart_atr_D_0,
              heart_atr_D_A=settings.heart_atr_D_A,
              heart_atr_TS=settings.heart_atr_TS,
              heart_atr_TR=settings.heart_atr_TR,
              heart_vntr_xi_Vw=settings.heart_vntr_xi_Vw,
              heart_vntr_xi_AmRef=settings.heart_vntr_xi_AmRef,
              heart_vntr_k_passive=settings.heart_vntr_k_passive,
              heart_vntr_Lsref=settings.heart_vntr_Lsref,
              heart_vntr_L0=settings.heart_vntr_L0,
              heart_vntr_SLcollagen=settings.heart_vntr_SLcollagen,
              heart_vntr_SLrest=settings.heart_vntr_SLrest,
              heart_vntr_PConcollagen=settings.heart_vntr_PConcollagen,
              heart_vntr_PExpcollagen=settings.heart_vntr_PExpcollagen,
              syst_abd_P_th_ratio=settings.syst_abd_P_th_ratio,
              syst_TPR=settings.syst_TPR,
              syst_TR_frac=settings.syst_TR_frac,
              syst_art_k_E=settings.syst_art_k_E,
              eta_vc=settings.eta_vc,
              syst_tissues_hydrostaticLevel_correction=settings.syst_tissues_hydrostaticLevel_correction,
              tissues_SV_nom=settings.tissues_SV_nom,
              tissues_CO_nom=settings.tissues_CO_nom,
              tissues_eta_Ra=settings.tissues_eta_Ra,
              tissues_eta_Rv=settings.tissues_eta_Rv,
              tissues_V_max_breakPoint_Frac=settings.tissues_V_max_breakPoint_Frac,
              tissues_eta_C=settings.tissues_eta_C,
              veins_chi_pump=settings.veins_chi_pump,
              eta_adenosine=settings.eta_adenosine,
              veins_UsePhiEffect=true,
              veins_C_phi=settings.veins_C_phi,
              veins_ZPV_phi=settings.veins_ZPV_phi,
              veins_gamma=settings.veins_gamma,
              veins_alpha=settings.veins_alpha,
              veins_diameter_correction=settings.veins_diameter_correction,
              baro_tau_s=settings.baro_tau_s,
              baro_a(unit="s-1") = settings.baro_a,
              baro_b(unit="s-1") = settings.baro_b,
              baro_f0(unit="s-1") = settings.baro_f0,
              baro_xi_delta0=settings.baro_xi_delta0,
              baro_delta0_aor=settings.baro_delta0_aor,
              baro_delta0_car=settings.baro_delta0_car,
              baro_g=settings.baro_g,
              baro_fsn=settings.baro_fsn,
              baro_f1=settings.baro_f1,
              pulm_CO_target=settings.pulm_CO_target,
              pulm_C_PV=settings.pulm_C_PV,
              pulm_C_PA=settings.pulm_C_PA,
              pulm_P_PV_nom=settings.pulm_P_PV_nom,
              pulm_R=settings.pulm_R,
              pulm_q_nom_maxq=settings.pulm_q_nom_maxq,
              pulm_R_exp=settings.pulm_R_exp,
              pulm_PV_R_vis=settings.pulm_PV_R_vis,
              pulm_tp_pleural_frac=settings.pulm_tp_pleural_frac,
              veins_activation_tau=settings.veins_activation_tau,
              veins_relaxation_tau=settings.veins_relaxation_tau,
              tissues_chi_Ra=settings.tissues_chi_Ra,
              tissues_chi_Rv=settings.tissues_chi_Rv,
              tissues_chi_C=settings.tissues_chi_C),
            fmi_StartTime=60,
            fmi_StopTime=120,
            fmi_NumberOfSteps=steps,
            fmi_forceShutDownAtStopTime=true) if useValsalva
            annotation (Placement(transformation(extent={{-80,-20},{-60,0}})));

          parameter Real steps=endTime/stepInterval;
          parameter Real endTime=120;
          parameter Real stepInterval=0.01;
          inner Components.Settings settings(
            V_PV_init=0,
            heart_R_AV(displayUnit="(mmHg.min)/l") = 2269376,
            heart_R_LA(displayUnit="(mmHg.min)/l") = 628658,
            heart_R_vlv(displayUnit="(mmHg.min)/l") = 718206.6,
            heart_vntr_D_0=1.231875e+01,
            heart_vntr_D_A=7.985938e+02,
            heart_vntr_TS=3.284375e-01,
            heart_vntr_TR(displayUnit="s") = 3.131250e-01,
            heart_atr_D_0=31099160,
            heart_atr_D_A=93356270,
            syst_TPR=127631500,
            syst_TR_frac(displayUnit="1") = 3.270902e+00,
            baro_fsn(displayUnit="Hz") = settings.baro_f1*10.23 - 0.00043,
            pulm_C_PA=2.439877e-08,
            pulm_R(displayUnit="(Pa.s)/m3") = 9.340364e+06,
            syst_art_k_E=0.4935769,
            baro_tau_s(displayUnit="s") = 10,
            starlingFactor_exp=1.25,
            baro_f1=3.625e-03,
            veins_delayed_activation=false,
            heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 4.600005e+03,
            heart_vntr_D_0_maxAct=1.225000e-03,
            heart_vntr_TS_maxAct(displayUnit="s") = 1.047740e-01,
            heart_vntr_TR_maxAct(displayUnit="s") = 7.597690e-02,
            eta_vc=0.2101054,
            tissues_eta_Ra=3.145225,
            tissues_eta_Rv=2.80625,
            tissues_eta_C=0.5708013,
            tissues_chi_Ra(displayUnit="1") = 2.481250e+01,
            tissues_chi_Rv=13.84375,
            tissues_chi_C=-0.03125,
            heart_vntr_k_passive=5.000000e+00,
            heart_vntr_SLcollagen=2.087500e+00,
            heart_vntr_PConcollagen=2.642812e+01,
            heart_vntr_PExpcollagen=2.481250e+00,
            heart_atr_TS=0.08,
            dummy=2,
            HR_max=3.1666666666667,
            chi_phi=0.7,
            heart_R_RA(displayUnit="(dyn.s)/cm5") = settings.heart_R_LA,
            pulm_q_nom_maxq(displayUnit="l/min") = 0.00033333333333333,
            initByPressure=false,
            veins_UseNonLinearVeins=true,
            veins_linearE_rel=765,
            veins_linearV0_rel=0.793,
            veins_activation_tau=1,
            heart_vntr_Tact_maxAct=8.000000e-02,
            heart_vntr_Lsref=1.9,
            heart_atr_TR=2.631250e-01,
            heart_vntr_Tact=8.000000e-02,
            syst_tissues_hydrostaticLevel_correction=1,
            tissues_SV_nom=0.000695,
            pulm_C_PV=3.194206e-07,
            syst_abd_P_th_ratio=0.8,
            heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
            heart_vntr_L0=1.6,
            pulm_P_PV_nom=1333.22387415,
            height=1.7132,
            tissues_CO_nom=0.000105,
            EvaluateFunctionalParams=true,
            HR_nominal=1.0666666666667,
            UseNonLinear_TissuesCompliance=true,
            baro_g=0.606258,
            baro_useAbsolutePressureTerm=false,
            baro_xi_delta0=2.688000e-01,
            pulm_R_exp=9.150000e-01,
            syst_art_UseVasoconstrictionEffect=true,
            tissues_UseStraighteningReaction2Phi=true,
            tissues_ZPV_nom=0.00210124,
            tissues_gamma=0.5,
            tissues_tau_R(displayUnit="s") = 0,
            veins_C_phi=0.09)
            annotation (Placement(transformation(extent={{-100,80},{-80,100}})));
          annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false), graphics={
                Text(
                  extent={{-90,24},{-52,36}},
                  lineColor={28,108,200},
                  textString="Baseline"),
                Text(
                  extent={{-30,24},{8,36}},
                  lineColor={28,108,200},
                  textString="Tilt 60deg"),
                Text(
                  extent={{-88,-36},{-50,-24}},
                  lineColor={28,108,200},
                  textString="Valsalva supine"),
                Text(
                  extent={{-28,-36},{10,-24}},
                  lineColor={28,108,200},
                  textString="Valsalva sitting"),
                Text(
                  extent={{32,24},{70,36}},
                  lineColor={28,108,200},
                  textString="Exercise")}),
            experiment(
              StopTime=120,
              Interval=0.01,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CombinedModels_FMUs;

        model CombinedModels_FMUs_BaselineValsalva
          "Some model variants combined for identification by importing FMU2 CS to have separate solver events"
          extends CombinedModels_FMUs(
            tilt(fmi_StartTime=200, fmi_StopTime=320),
            exercise(fmi_StartTime=200, fmi_StopTime=320),
            baseline(settings(
                baro_tau_s(displayUnit="s") = 10)))
                                       annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                coordinateSystem(preserveAspectRatio=false), graphics={
                Text(
                  extent={{-90,24},{-52,36}},
                  lineColor={28,108,200},
                  textString="Baseline"),
                Text(
                  extent={{-30,24},{8,36}},
                  lineColor={28,108,200},
                  textString="Tilt 60deg"),
                Text(
                  extent={{-88,-36},{-50,-24}},
                  lineColor={28,108,200},
                  textString="Valsalva supine"),
                Text(
                  extent={{-28,-36},{10,-24}},
                  lineColor={28,108,200},
                  textString="Valsalva sitting"),
                Text(
                  extent={{32,24},{70,36}},
                  lineColor={28,108,200},
                  textString="Exercise")}),
            experiment(
              StopTime=120,
              Interval=0.01,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CombinedModels_FMUs_BaselineValsalva;

        model CombinedModels_FMUs_BaselineValsalvaTilt
          "Some model variants combined for identification by importing FMU2 CS to have separate solver events"
          extends CombinedModels_FMUs(
            exercise(fmi_StartTime=200, fmi_StopTime=320),
            baseline(settings(baro_tau_s(displayUnit="s") = 10)),
            settings(
              heart_vntr_TS_maxAct=settings.heart_vntr_TS*settings.HR_nominal/
                  settings.HR_max,
              heart_vntr_TR(displayUnit="s"),
              heart_vntr_TR_maxAct(displayUnit="s") = settings.heart_vntr_TR*
                settings.HR_nominal/settings.HR_max,
              heart_vntr_Tact=0.1,
              heart_vntr_Tact_maxAct=settings.heart_vntr_Tact*settings.HR_nominal
                  /settings.HR_max,
              heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 7000))
                                     annotation (
            Icon(coordinateSystem(preserveAspectRatio=false)),
            Diagram(coordinateSystem(preserveAspectRatio=false), graphics={Text(
                          extent={{-90,24},{-52,36}},
                          lineColor={28,108,200},
                          textString="Baseline"),Text(
                          extent={{-30,24},{8,36}},
                          lineColor={28,108,200},
                          textString="Tilt 60deg"),Text(
                          extent={{-88,-36},{-50,-24}},
                          lineColor={28,108,200},
                          textString="Valsalva supine"),Text(
                          extent={{-28,-36},{10,-24}},
                          lineColor={28,108,200},
                          textString="Valsalva sitting"),Text(
                          extent={{32,24},{70,36}},
                          lineColor={28,108,200},
                          textString="Exercise")}),
            experiment(
              StopTime=120,
              Interval=0.01,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CombinedModels_FMUs_BaselineValsalvaTilt;

        model CombinedModels_FMUs_BaselineValsalvaTilt_BaselineExercise
          extends CombinedModels_FMUs_BaselineValsalvaTilt(exercise(
                fmi_StartTime=0, fmi_StopTime=60), baseline(fmi_StartTime=0,
                fmi_StopTime=60),
        settings(
              syst_tissues_hydrostaticLevel_correction=0.8,
              HR_max=2.707,
              V_PV_init=3.75e-05,
              heart_R_LA=6213404,
              heart_R_vlv=1627.735,
              heart_atr_D_A=36810000,
              heart_vntr_k_passive =          3.475000e+01,
              heart_vntr_xi_Vw=0.9639875,
              baro_tau_s=10,
              pulm_R=7256414,
              syst_TPR=128212500,
              syst_art_k_E=0.3973268,
              tissues_eta_C=0.3758013,
              tissues_eta_Ra=2.445225,
              veins_gamma=0.365625,
              tissues_SV_nom=0.000695,
              heart_atr_D_0 =     18209050,
              heart_vntr_D_0= 11.78155,
              heart_vntr_D_A= 1487.53,
              heart_vntr_TS =           8.200000e-02,
              heart_vntr_TR =           4.100000e-01,
                heart_vntr_D_A_maxAct( displayUnit="Pa/m3") = 7000));
        end CombinedModels_FMUs_BaselineValsalvaTilt_BaselineExercise;

        model CombinedModels_FMUs_ExceptBaseline
          extends CombinedModels_FMUs(useBaseline=false, exercise(fmi_StartTime=
                 0, fmi_StopTime=60),
            settings(baro_fsn=settings.baro_f1*10 - 1e-4),
            valsalva(thoracic_pressure_ramp(nperiod=2)));
        end CombinedModels_FMUs_ExceptBaseline;

        model CombinedModels_FMUs_ExceptBaselineExercise
          extends CombinedModels_FMUs(
            useExercise=false,        useBaseline=false, exercise(fmi_StartTime=
                 0, fmi_StopTime=30));
        end CombinedModels_FMUs_ExceptBaselineExercise;

        model TestFMU
          Exercise.CVS_exercise cVS_exercise
            annotation (Placement(transformation(extent={{-80,0},{-60,20}})));
          ADAN_0main_SystemicTree_Exercise_CVS_0exercise_fmu_black_box
            aDAN_0main_SystemicTree_Exercise_CVS_0exercise_fmu_black_box
            annotation (Placement(transformation(extent={{-40,0},{-20,20}})));
          annotation (
            Icon(coordinateSystem(preserveAspectRatio=false)),
            Diagram(coordinateSystem(preserveAspectRatio=false)),
            experiment(StopTime=50, __Dymola_Algorithm="Cvode"));
        end TestFMU;
      end CombinedModel;

      package AdditionalOutputs
        model CVS_StandardMaxAndMeans
          extends CardiovascularSystem;

          Physiolibrary.Types.Pressure CVP "Mean central venous pressure";
          Physiolibrary.Types.Pressure PCWP "Mean pulmonary capillary wedge pressure";

          Physiolibrary.Types.Pressure PAPs_i;
          Physiolibrary.Types.Pressure PAPd_i;
          Physiolibrary.Types.Pressure PAPs;
          Physiolibrary.Types.Pressure PAPd;

          Modelica.Units.SI.Time tau_int=3
            "INtegral time constant for averaging results";
        equation

          der(PAPs_i)*tau = max(P_pa  - PAPs_i, 0);
          der(PAPd_i)*tau = min(P_pa  - PAPd_i, 0);

          der(CVP)*tau_int = -CVP + P_sv;
          der(PCWP)*tau_int = - PCWP + P_pv;

          when heartComponent.sa_node.beat then
            PAPs = PAPs_i;
            PAPd = PAPd_i;
            reinit(PAPs_i, 0);
            reinit(PAPd_i,13332);
          end when;

        end CVS_StandardMaxAndMeans;

        model CVS_IncrHR
          extends CVS_StandardMaxAndMeans(
            phi_fixed(offset=0.505, startTime=200),
            useAutonomousPhi(y=false),
            heartComponent(ventricles(
                LV_wall(contractilityFraction=LVcontractilityFraction),
                RV_wall(contractilityFraction=RVcontractilityFraction),
                SEP_wall(contractilityFraction=SEPcontractilityFraction))));
          parameter Physiolibrary.Types.Fraction LVcontractilityFraction=1;
          parameter Physiolibrary.Types.Fraction RVcontractilityFraction=1;
          parameter Physiolibrary.Types.Fraction SEPcontractilityFraction=(LVcontractilityFraction +
                      RVcontractilityFraction)/2;
        end CVS_IncrHR;

        model CVS_impLV
          extends CVS_IncrHR(
            SEPcontractilityFraction=LVcontractilityFraction,
            LVcontractilityFraction=1,
            heartComponent(
              ventricles(SEP_wall(contractilityFraction=LVcontractilityFraction)),
              ra(contractilityFraction=RVcontractilityFraction),
              la(contractilityFraction=LVcontractilityFraction)));

          annotation (experiment(
              StopTime=30,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_impLV;

        model CVS_fit "Manual fit to cardiogenic shock patient"
          extends CVS_impLV(
            LVcontractilityFraction=0.07,
            heartComponent(ventricles(SEP_wall(contractilityFraction=(
                      LVcontractilityFraction + RVcontractilityFraction)/2))),
            settings(V_PV_init=0.0005, baro_tau_s=10),
            useAutonomousPhi(y=true));
          annotation (experiment(
              StopTime=30,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_fit;
      end AdditionalOutputs;

      package HF "Heart failures"
        model HFpEF
          extends CardiovascularSystem(
            useAutonomousPhi(y=false),
            settings(heart_vntr_xi_AmRef=0.7),
            heartComponent(
              ra(enableCollagen=true, V0_col=6e-05),
              la(enableCollagen=true, V0_col=6e-05),
              ventricles(RV_wall(Amref=heart_vntr_xi_AmRef_RV*110))));
          parameter Real heart_vntr_xi_AmRef_RV=1
            "midwall reference surface area for right ventricle only, cm^2";
        end HFpEF;

        model TestIdent
          HFpEF CVS annotation (Placement(transformation(extent={{-100,80},{-80,
                    100}})));
          Signals.Max EDV(holdTime=steadyTime)
            annotation (Placement(transformation(extent={{20,80},{40,100}})));
          Modelica.Blocks.Sources.RealExpression realExpression(y=CVS.V_LV)
            annotation (Placement(transformation(extent={{-14,80},{6,100}})));
          parameter Modelica.Units.SI.Time steadyTime=10
            "Time, when the step is triggered";
          Signals.Min ESV(holdTime=steadyTime)
            annotation (Placement(transformation(extent={{20,52},{40,72}})));
          Modelica.Blocks.Sources.RealExpression realExpression1(y=CVS.V_LV)
            annotation (Placement(transformation(extent={{-14,52},{6,72}})));
          Modelica.Blocks.Sources.RealExpression realExpression2(y=CVS.CO)
            annotation (Placement(transformation(extent={{-14,26},{6,46}})));
          Signals.MeanValue meanValue(holdTime=steadyTime)
            annotation (Placement(transformation(extent={{20,26},{40,46}})));
          Modelica.Blocks.Sources.RealExpression BPs(y=CVS.brachial_pressure_systolic)
            annotation (Placement(transformation(extent={{-14,-4},{6,16}})));
          Modelica.Blocks.Sources.RealExpression BPd(y=CVS.brachial_pressure_diastolic)
            annotation (Placement(transformation(extent={{-14,-32},{6,-12}})));
          Signals.Max Ppas(holdTime=steadyTime)
            annotation (Placement(transformation(extent={{60,-2},{80,18}})));
          Modelica.Blocks.Sources.RealExpression realExpression3(y=CVS.P_pa)
            annotation (Placement(transformation(extent={{26,-2},{46,18}})));
          Signals.Min Ppad(holdTime=steadyTime)
            annotation (Placement(transformation(extent={{60,-30},{80,-10}})));
          Modelica.Blocks.Sources.RealExpression realExpression4(y=CVS.P_pa)
            annotation (Placement(transformation(extent={{26,-30},{46,-10}})));
          Modelica.Blocks.Sources.RealExpression realExpression5(y=CVS.P_pv)
            annotation (Placement(transformation(extent={{-14,-60},{6,-40}})));
          Signals.MeanValue Pw(holdTime=steadyTime)
            annotation (Placement(transformation(extent={{20,-60},{40,-40}})));
          Signals.Max P_RVs(holdTime=steadyTime, integrateAndDerive=true)
            annotation (Placement(transformation(extent={{-72,-54},{-52,-34}})));
          Modelica.Blocks.Sources.RealExpression realExpression6(y=CVS.heartComponent.ventricles.P_RV)
            annotation (Placement(transformation(extent={{-142,-54},{-122,-34}})));
          Signals.Min P_RVd(holdTime=steadyTime, integrateAndDerive=true)
            annotation (Placement(transformation(extent={{-72,-82},{-52,-62}})));
          Modelica.Blocks.Sources.RealExpression realExpression7(y=CVS.heartComponent.ventricles.P_RV)
            annotation (Placement(transformation(extent={{-142,-82},{-122,-62}})));
        equation
          connect(meanValue.u, realExpression2.y)
            annotation (Line(points={{18,36},{7,36}}, color={0,0,127}));
          connect(realExpression1.y, ESV.u)
            annotation (Line(points={{7,62},{18,62}}, color={0,0,127}));
          connect(realExpression.y, EDV.u)
            annotation (Line(points={{7,90},{18,90}}, color={0,0,127}));
          connect(realExpression3.y, Ppas.u)
            annotation (Line(points={{47,8},{58,8}}, color={0,0,127}));
          connect(realExpression4.y, Ppad.u)
            annotation (Line(points={{47,-20},{58,-20}}, color={0,0,127}));
          connect(Pw.u, realExpression5.y)
            annotation (Line(points={{18,-50},{7,-50}}, color={0,0,127}));
          connect(realExpression6.y, P_RVs.u)
            annotation (Line(points={{-121,-44},{-74,-44}}, color={0,0,127}));
          connect(realExpression7.y, P_RVd.u)
            annotation (Line(points={{-121,-72},{-74,-72}}, color={0,0,127}));
          annotation (
            Icon(coordinateSystem(preserveAspectRatio=false)),
            Diagram(coordinateSystem(preserveAspectRatio=false)),
            experiment(
              StopTime=15,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end TestIdent;

        record Prep
          extends Optimization.Internal.Version.Current.ModelOptimizationSetup(
            modelName="ADAN_main.SystemicTree.Identification.HF.TestIdent",
            plotScript="",
            saveSetup=true,
            saveSetupFilename="OptimizationLastRunModel.mo",
            convertSetup=false,
            askForTunerReUse=true,
            tuner=Optimization.Internal.Version.Current.Tuner(
                        UseTunerMatrixForDiscreteValues=false,
                        tunerParameters={
                  Optimization.Internal.Version.Current.TunerParameter(
                          name="",
                          active=true,
                          Value=0.0,
                          scaleToBounds=false,
                          min=-10.0,
                          max=10.0,
                          equidistant=0,
                          discreteValues=fill(0.0, 0),
                          unit="")},
                        tunerMatrix=fill(
                          0.0,
                          0,
                          1)),
            criteria={Optimization.Internal.Version.Current.Criterion(
                        name="",
                        active=true,
                        usage=Optimization.Internal.Version.Current.Types.CriterionUsage.Minimize,
                        demand=1.0,
                        unit="")},
            preferences=Optimization.Internal.Version.Current.Preferences(
                        optimizationOptions=
                  Optimization.Internal.Version.Current.OptimizationOptions(
                          method=Optimization.Internal.Version.Current.Types.OptimizationMethod.sqp,
                          ObjectiveFunctionType=Optimization.Internal.Version.Current.Types.ObjectiveFunctionType.Max,
                          OptTol=0.001,
                          maxEval=1000,
                          GridBlock=50,
                          evalBestFinal=false,
                          saveBest=true,
                          saveHistory=true,
                          listFilename="OptimizationLog.log",
                          listOn=true,
                          listOnline=true,
                          listIncrement=100,
                          numberOfShownDigits=3,
                          onPlace=true,
                          listTuners=true,
                          GaPopSize=10,
                          GaNGen=100),
                        simulationOptions=
                  Optimization.Internal.Version.Current.SimulationOptions(
                          startTime=0.0,
                          stopTime=1.0,
                          outputInterval=0.0,
                          numberOfIntervals=500,
                          integrationMethod=Optimization.Internal.Version.Current.Types.IntegrationMethod.Dassl,
                          integrationTolerance=0.001,
                          fixedStepSize=0.0,
                          autoLoadResults=true,
                          useDsFinal=true,
                          translateModel=false,
                          setCriteriaSimulationFailed=true,
                          CriteriaSimulationFailedValue=1000000.0,
                          simulationMode=Optimization.Internal.Version.Current.Types.SimulationMode.Single,
                          parallelizationMode=Optimization.Internal.Version.Current.Types.ParallelizationMode.None,
                          numberOfThreads=0,
                          copyFiles=fill("", 0)),
                        sensitivityOptions=
                  Optimization.Internal.Version.Current.SensitivityOptions(
                          TypeOfSensitivityComputation=Optimization.Internal.Version.Current.Types.SensitivityMethod.ExternalDifferencesSymmetric,
                          automaticSensitivityTolerance=true,
                          sensitivityTolerance=1E-06)));
        end Prep;

        model Renals_HF_base
          extends Variations.Renals.Renals_HF(
          settings(HR_nominal(displayUnit="1/min")),
            useAutonomousPhi(y=false),
          heartComponent(
              ra(enableCollagen=true, V0_col=6e-05),
              la(enableCollagen=true, V0_col=6e-05)),
            phi_fixed(offset=0.253));

                    // syst_TR_frac=10.0
              // ,
        //      baro_f1=3.8e-03,
              //
        //   parameter Real
        //     "midwall reference surface area for right ventricle only, cm^2";
          annotation (experiment(
              StopTime=600,
              Interval=0.04,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end Renals_HF_base;

        model Renals_HFrEF
          extends Variations.Renals.Renals_HF(
          settings(
              baro_tau_s=6,
              baro_f1=3.8e-03,
              pulm_C_PA=4.82832e-09,
              syst_TPR=155666800,
              heart_vntr_xi_AmRef=0.8717188,
              pulm_R =          4.737510e+07,
              syst_art_k_E=1.499671,
              heart_vntr_D_A =          1.095408e+03,
              V_PV_init=0.0009357812),
            useAutonomousPhi(y=true),
          heartComponent(
              ra(enableCollagen=true, V0_col=6e-05),
              la(enableCollagen=true, V0_col=6e-05),
              ventricles(RV_wall(Amref=heart_vntr_xi_AmRef_RV*110))),
              heart_vntr_xi_AmRef_RV=settings.heart_vntr_xi_AmRef);

              // ,

              // syst_TR_frac=10.0
        //   parameter Real
        //     "midwall reference surface area for right ventricle only, cm^2";
          annotation (experiment(
              StopTime=600,
              Interval=0.04,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end Renals_HFrEF;

        model Renals_HFpEF
          extends Variations.Renals.Renals_HF(
          settings(
              baro_tau_s=6,
              baro_f1=3.8e-03,
              pulm_C_PA=4.82832e-09,
              syst_TPR=155666800,
              heart_vntr_xi_AmRef=0.8717188,
              pulm_R =          4.737510e+07,
              syst_art_k_E=1.499671,
              heart_vntr_D_A =          1.095408e+03,
              V_PV_init=0.0009357812,
              syst_TR_frac=10.0),
            useAutonomousPhi(y=true),
          heartComponent(
              ra(enableCollagen=true, V0_col=6e-05),
              la(enableCollagen=true, V0_col=6e-05),
              ventricles(RV_wall(Amref=heart_vntr_xi_AmRef_RV*110))));

        //   parameter Real heart_vntr_xi_AmRef_RV=4.743750e-01

          annotation (experiment(
              StopTime=600,
              Interval=0.04,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end Renals_HFpEF;

        package Results
          model HFpEF_optimized "Generated by PostProcess/postprocess_optim.py optimized at Sep 21 21:34:43 CEST 2021
 with cost 0.000450 lowest at run 1407"
            extends HFpEF( settings(
                baro_tau_s=6,
                baro_f1=3.8e-03,
                pulm_C_PA=4.82832e-09,
                syst_TPR=155666800,
                heart_vntr_xi_AmRef=0.8717188,
                pulm_R =          4.737510e+07,
                syst_art_k_E=1.499671,
                heart_vntr_D_A =          1.095408e+03,
                V_PV_init=0.0009357812),
                heart_vntr_xi_AmRef_RV = 4.743750e-01,
              useAutonomousPhi(y=true));

          end HFpEF_optimized;

          model obsolete_Renals_HFpEF_ss
            "Steady state initialization from 2021-09-23 15:10:47.570137 at time 600.0"
            extends ADAN_main.SystemicTree.Identification.HF.Renals_HFpEF(
                SystemicComponent(
                  baroreflex_system(
                    baroreflex(phi_mean(start = 0.2651106, fixed = true), phi(start = 0.26904845, fixed = true), f1_adj(start = 0.0045735687, fixed = true)),
                    baroreceptor_aortic(fbr_auc(start = 14.980803, fixed = true), fbr_int(start = 14.980554, fixed = true), epsilon(start = 1.2020254, fixed = true), s(start = 0.83114547, fixed = true)),
                    baroreceptor_carotid(fbr_auc(start = 6.614669, fixed = true), fbr_int(start = 6.6145577, fixed = true), epsilon(start = 1.0602242, fixed = true), s(start = 0.92545885, fixed = true))),
                  ascending_aorta_A(q(start = 1.6254371e-06, fixed = true), vol1(start = 2.1041465e-06, fixed = true), vol2(start = 2.104164e-06, fixed = true)),
                  ascending_aorta_B(q_in(start = 3.2546106e-06, fixed = true), volume(start = 1.4360084e-05, fixed = true)),
                  ascending_aorta_C(q_in(start = 4.4721237e-06, fixed = true), volume(start = 1.331041e-05, fixed = true)),
                  ascending_aorta_D(q_in(start = 7.1752825e-06, fixed = true), volume(start = 1.2181817e-05, fixed = true)),
                  aortic_arch_C2(q_in(start = 9.634787e-06, fixed = true), volume(start = 1.117124e-05, fixed = true)),
                  brachiocephalic_trunk_C4(q_in(start = 1.6314159e-06, fixed = true), volume(start = 7.97688e-06, fixed = true)),
                  aortic_arch_C46(q_in(start = 1.0245848e-05, fixed = true), volume(start = 6.636294e-06, fixed = true)),
                  aortic_arch_C64(q_in(start = 1.1300268e-05, fixed = true), volume(start = 4.563409e-06, fixed = true)),
                  aortic_arch_C94(q_in(start = 1.0255357e-05, fixed = true), volume(start = 2.5151157e-05, fixed = true)),
                  thoracic_aorta_C96(q_in(start = 1.5195581e-05, fixed = true), volume(start = 4.5491333e-06, fixed = true)),
                  thoracic_aorta_C100(q_in(start = 1.607452e-05, fixed = true), volume(start = 3.5038681e-06, fixed = true)),
                  thoracic_aorta_C104(q_in(start = 1.6749153e-05, fixed = true), volume(start = 6.6160615e-06, fixed = true)),
                  thoracic_aorta_C108(q_in(start = 1.8015766e-05, fixed = true), volume(start = 2.1766828e-06, fixed = true)),
                  thoracic_aorta_C112(q_in(start = 1.8430928e-05, fixed = true), volume(start = 3.6360594e-05, fixed = true)),
                  abdominal_aorta_C114(q_in(start = 2.499122e-05, fixed = true), volume(start = 7.584862e-07, fixed = true)),
                  abdominal_aorta_C136(q_in(start = 1.8513245e-05, fixed = true), volume(start = 3.1883255e-06, fixed = true)),
                  abdominal_aorta_C164(q_in(start = 1.5489379e-05, fixed = true), volume(start = 9.4797053e-07, fixed = true)),
                  abdominal_aorta_C176(q_in(start = 1.3043515e-05, fixed = true), volume(start = 2.5529175e-06, fixed = true)),
                  abdominal_aorta_C188(q_in(start = 1.0846725e-05, fixed = true), volume(start = 1.0277878e-05, fixed = true)),
                  abdominal_aorta_C192(q_in(start = 1.2565599e-05, fixed = true), volume(start = 6.461519e-06, fixed = true)),
                  celiac_trunk_C116(volume(start = 0.00036696254, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  renal_L166(V_AKIDNEY(start = 4.67605e-06, fixed = true), V_VKIDNEY(start = 1.2613756e-05, fixed = true), A_myo(start = 0.3616016, fixed = true), D_aff(start = 8.781414, fixed = true)),
                  renal_R178(V_AKIDNEY(start = 4.6763357e-06, fixed = true), V_VKIDNEY(start = 1.2614344e-05, fixed = true), A_myo(start = 0.36140746, fixed = true), D_aff(start = 8.783625, fixed = true)),
                  common_iliac_R216(q_in(start = 6.788228e-06, fixed = true), volume(start = 5.6071676e-06, fixed = true)),
                  internal_iliac_T1_R218(volume(start = 0.00017826319, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  external_iliac_R220(q_in(start = 4.1663347e-06, fixed = true), volume(start = 3.8863495e-06, fixed = true)),
                  femoral_R222(q_in(start = 4.406955e-06, fixed = true), volume(start = 1.1155012e-06, fixed = true)),
                  profundus_T2_R224(volume(start = 0.00020459514, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  femoral_R226(q_in(start = 5.682842e-07, fixed = true), volume(start = 9.322494e-06, fixed = true)),
                  popliteal_R228(q_in(start = 9.470752e-07, fixed = true), volume(start = 2.9004734e-06, fixed = true)),
                  anterior_tibial_T3_R230(volume(start = 2.6611964e-05, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  popliteal_R232(q_in(start = 5.511349e-07, fixed = true), volume(start = 1.622144e-07, fixed = true)),
                  tibiofibular_trunk_R234(q_in(start = 5.539969e-07, fixed = true), volume(start = 6.5975183e-07, fixed = true)),
                  posterior_tibial_T4_R236(volume(start = 2.9283772e-05, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  common_iliac_L194(q_in(start = 6.810071e-06, fixed = true), volume(start = 5.366367e-06, fixed = true)),
                  internal_iliac_T1_L196(volume(start = 0.00017825911, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  external_iliac_L198(q_in(start = 4.1551702e-06, fixed = true), volume(start = 3.8863113e-06, fixed = true)),
                  femoral_L200(q_in(start = 4.3967825e-06, fixed = true), volume(start = 1.1154898e-06, fixed = true)),
                  profundus_T2_L202(volume(start = 0.00020459021, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  femoral_L204(q_in(start = 5.5897027e-07, fixed = true), volume(start = 9.322349e-06, fixed = true)),
                  popliteal_L206(q_in(start = 9.443371e-07, fixed = true), volume(start = 2.9004088e-06, fixed = true)),
                  anterior_tibial_T3_L208(volume(start = 2.6611466e-05, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  popliteal_L210(q_in(start = 5.506599e-07, fixed = true), volume(start = 1.6221227e-07, fixed = true)),
                  tibiofibular_trunk_L212(q_in(start = 5.535818e-07, fixed = true), volume(start = 6.597634e-07, fixed = true)),
                  posterior_tibial_T4_L214(volume(start = 2.928311e-05, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  subclavian_R28(q_in(start = 2.0901787e-06, fixed = true), volume(start = 1.2758801e-06, fixed = true)),
                  subclavian_R30(q_in(start = 1.0376185e-06, fixed = true), volume(start = 1.7497097e-06, fixed = true)),
                  axillary_R32(q_in(start = 1.2870132e-06, fixed = true), volume(start = 2.130028e-06, fixed = true)),
                  brachial_R34(q_in(start = 1.550765e-06, fixed = true), volume(start = 3.1802354e-06, fixed = true)),
                  ulnar_T2_R36(q_in(start = 1.0736492e-06, fixed = true), volume(start = 1.9996875e-07, fixed = true)),
                  ulnar_T2_R42(volume(start = 6.1620725e-05, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  radial_T1_R44(volume(start = 5.0172075e-05, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  subclavian_L66(q_in(start = 1.9518814e-06, fixed = true), volume(start = 3.0901606e-06, fixed = true)),
                  subclavian_L78(q_in(start = 1.1670858e-06, fixed = true), volume(start = 1.3245202e-06, fixed = true)),
                  axillary_L80(q_in(start = 1.345237e-06, fixed = true), volume(start = 2.1299284e-06, fixed = true)),
                  brachial_L82(q_in(start = 1.8633075e-06, fixed = true), volume(start = 1.0584235e-06, fixed = true)),
                  ulnar_T2_L84(q_in(start = 1.0708067e-06, fixed = true), volume(start = 1.9994273e-07, fixed = true)),
                  ulnar_T2_L90(volume(start = 6.164001e-05, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  radial_T1_L92(volume(start = 5.317309e-05, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  common_carotid_R6_A(q_in(start = 9.666586e-07, fixed = true), volume(start = 2.5252414e-06, fixed = true)),
                  common_carotid_R6_B(q_in(start = 1.6363019e-06, fixed = true), volume(start = 2.1779724e-06, fixed = true)),
                  common_carotid_R6_C(q_in(start = 2.2022189e-06, fixed = true), volume(start = 1.6612671e-06, fixed = true)),
                  internal_carotid_R8_A(q_in(start = 1.2521458e-06, fixed = true), volume(start = 1.0047747e-06, fixed = true)),
                  internal_carotid_R8_B(q_in(start = 1.3213108e-06, fixed = true), volume(start = 6.4872154e-07, fixed = true)),
                  internal_carotid_R8_C(volume(start = 7.299024e-05, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  external_carotid_T2_R26(volume(start = 7.309093e-05, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  common_carotid_L48_A(q_in(start = 2.6969482e-07, fixed = true), volume(start = 2.741288e-06, fixed = true)),
                  common_carotid_L48_B(q_in(start = 9.901116e-07, fixed = true), volume(start = 2.4278406e-06, fixed = true)),
                  common_carotid_L48_C(q_in(start = 1.6182886e-06, fixed = true), volume(start = 2.172353e-06, fixed = true)),
                  common_carotid_L48_D(q_in(start = 2.1719072e-06, fixed = true), volume(start = 1.7851104e-06, fixed = true)),
                  internal_carotid_L50_A(q_in(start = 1.250667e-06, fixed = true), volume(start = 1.00477e-06, fixed = true)),
                  internal_carotid_L50_B(q_in(start = 1.3197388e-06, fixed = true), volume(start = 6.487189e-07, fixed = true)),
                  internal_carotid_L50_C(volume(start = 7.302593e-05, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  external_carotid_T2_L62(volume(start = 7.312328e-05, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  vertebral_L2(volume(start = 6.724906e-05, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  vertebral_R272(volume(start = 6.722077e-05, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  superior_vena_cava_C2(volume(start = 7.915132e-06, fixed = true)),
                  superior_vena_cava_C88(volume(start = 1.3639324e-05, fixed = true)),
                  inferior_vena_cava_C8(volume(start = 1.1870428e-05, fixed = true)),
                  hepatic_vein_T1_C10(volume(start = 4.653867e-06, fixed = true)),
                  inferior_vena_cava_C12(volume(start = 3.220272e-05, fixed = true)),
                  inferior_vena_cava_C16(volume(start = 2.5320858e-05, fixed = true)),
                  renal_vein_T1_R18(volume(start = 7.4595923e-06, fixed = true)),
                  inferior_vena_cava_C20(volume(start = 1.7665458e-06, fixed = true)),
                  renal_vein_T1_L22(volume(start = 6.5905942e-06, fixed = true)),
                  inferior_vena_cava_C24(volume(start = 7.0446484e-05, fixed = true)),
                  common_iliac_vein_L56(volume(start = 1.6534565e-05, fixed = true), open(start = false, fixed = true)),
                  common_iliac_vein_R26(volume(start = 1.519968e-05, fixed = true), open(start = false, fixed = true)),
                  external_iliac_vein_R28(volume(start = 2.2167321e-06, fixed = true)),
                  internal_iliac_vein_T1_R30(volume(start = 9.478497e-06, fixed = true)),
                  external_iliac_vein_R32(volume(start = 2.5708772e-05, fixed = true)),
                  femoral_vein_R34(volume(start = 1.1175655e-06, fixed = true)),
                  femoral_vein_R38(volume(start = 8.8577235e-06, fixed = true)),
                  profunda_femoris_vein_T2_R40(volume(start = 2.4434548e-05, fixed = true)),
                  femoral_vein_R42(volume(start = 6.262777e-05, fixed = true)),
                  femoral_vein_R46(volume(start = 3.449077e-06, fixed = true)),
                  popliteal_vein_R48(volume(start = 1.402548e-05, fixed = true)),
                  anterior_tibial_vein_T4_R50(volume(start = 3.542567e-06, fixed = true)),
                  popliteal_vein_R52(volume(start = 3.119659e-06, fixed = true)),
                  posterior_tibial_vein_T6_R54(volume(start = 5.8827263e-06, fixed = true)),
                  external_iliac_vein_L58(volume(start = 2.2192335e-06, fixed = true)),
                  internal_iliac_vein_T1_L60(volume(start = 9.7481e-06, fixed = true)),
                  external_iliac_vein_L62(volume(start = 2.5237337e-05, fixed = true)),
                  femoral_vein_L64(volume(start = 1.306382e-06, fixed = true)),
                  femoral_vein_L68(volume(start = 8.856894e-06, fixed = true)),
                  profunda_femoris_vein_T2_L70(volume(start = 2.4432205e-05, fixed = true)),
                  femoral_vein_L72(volume(start = 6.2621984e-05, fixed = true)),
                  femoral_vein_L76(volume(start = 3.4487368e-06, fixed = true)),
                  popliteal_vein_L78(volume(start = 1.4024198e-05, fixed = true)),
                  anterior_tibial_vein_T4_L80(volume(start = 3.5424016e-06, fixed = true)),
                  popliteal_vein_L82(volume(start = 3.1193936e-06, fixed = true)),
                  posterior_tibial_vein_T6_L84(volume(start = 5.8823043e-06, fixed = true)),
                  brachiocephalic_vein_R90(volume(start = 1.5319443e-05, fixed = true), open(start = false, fixed = true)),
                  brachiocephalic_vein_L124(volume(start = 2.8750308e-05, fixed = true), open(start = false, fixed = true)),
                  vertebral_vein_R92(volume(start = 9.579927e-06, fixed = true)),
                  brachiocephalic_vein_R94(volume(start = 3.4729055e-06, fixed = true)),
                  subclavian_vein_R96(volume(start = 1.6886227e-06, fixed = true)),
                  internal_jugular_vein_R122(volume(start = 6.673906e-05, fixed = true)),
                  external_jugular_vein_R98(volume(start = 4.6439277e-06, fixed = true)),
                  subclavian_vein_R100(volume(start = 6.9059583e-06, fixed = true)),
                  axillary_vein_R102(volume(start = 2.4264546e-05, fixed = true)),
                  brachial_vein_R104(volume(start = 4.652223e-06, fixed = true)),
                  brachial_vein_R114(volume(start = 4.1634094e-06, fixed = true)),
                  brachial_vein_R108(volume(start = 6.4073356e-07, fixed = true)),
                  ulnar_vein_T7_R110(volume(start = 5.1308434e-06, fixed = true)),
                  brachial_vein_R118(volume(start = 4.0125417e-07, fixed = true)),
                  radial_vein_T3_R120(volume(start = 3.0804504e-06, fixed = true)),
                  vertebral_vein_L126(volume(start = 8.9736695e-06, fixed = true)),
                  brachiocephalic_vein_L128(volume(start = 1.7575721e-06, fixed = true)),
                  subclavian_vein_L130(volume(start = 1.503814e-06, fixed = true)),
                  internal_jugular_vein_L156(volume(start = 4.0565068e-05, fixed = true)),
                  external_jugular_vein_L132(volume(start = 4.5605984e-06, fixed = true)),
                  subclavian_vein_L134(volume(start = 6.7401156e-06, fixed = true)),
                  axillary_vein_L136(volume(start = 2.4575276e-05, fixed = true)),
                  brachial_vein_L138(volume(start = 4.658094e-06, fixed = true)),
                  brachial_vein_L148(volume(start = 4.169632e-06, fixed = true)),
                  brachial_vein_L142(volume(start = 6.4153573e-07, fixed = true)),
                  ulnar_vein_T7_L144(volume(start = 5.135964e-06, fixed = true)),
                  brachial_vein_L152(volume(start = 4.018572e-07, fixed = true)),
                  radial_vein_T3_L154(volume(start = 3.0858635e-06, fixed = true)),
                  mesenteric_artery(q_in(start = 3.581575e-06, fixed = true), volume(start = 6.356832e-06, fixed = true)),
                  splanchnic_tissue(volume(start = 0.0002663161, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  splanchnic_vein(volume(start = 3.8775324e-05, fixed = true)),
                  coronary_arteries(q_in(start = 1.7135596e-06, fixed = true), volume(start = 3.6877207e-08, fixed = true)),
                  cardiac_tissue(volume(start = 0.000119767785, fixed = true), phi_delayed(start = 0.26877934, fixed = true)),
                  coronary_veins(volume(start = 6.962551e-08, fixed = true)),
                  brachial_L82_HeartLevel(q_in(start = 1.6069738e-06, fixed = true), volume(start = 2.1231504e-06, fixed = true))),
                heartComponent(
                  tricuspidValve(open(start = false, fixed = true)),
                  pulmonaryValve(open(start = true, fixed = true), BP_max(start = 0.0, fixed = true), BP_min(start = 26600.0, fixed = true), CO_acc(start = 0.0, fixed = true)),
                  mitralValve(open(start = false, fixed = true), BP_max(start = 3915.3, fixed = true), BP_min(start = 3987.1775, fixed = true), CO_acc(start = 1.5796051e-05, fixed = true)),
                  aorticValve(open(start = false, fixed = true), BP_max(start = 0.0, fixed = true), BP_min(start = 11847.744, fixed = true), CO_acc(start = -1.8916444e-09, fixed = true)),
                  ventricles(
                    LV_wall(ym(start = 3.5362327, fixed = true), SL(start = 2.2859612, fixed = true)),
                    SEP_wall(SL(start = 2.076283, fixed = true)),
                    RV_wall(SL(start = 2.4429338, fixed = true)),
                    calciumMechanics(tm(start = 0.10410308, fixed = true)), V_LV(start = 0.000113972994, fixed = true), V_RV(start = 6.1759434e-05, fixed = true), currentWork_LV(start = -0.046832323, fixed = true), currentWork_RV(start = 0.036109354, fixed = true)),
                  ra(volume(start = 5.3980006e-05, fixed = true), currentWork(start = -5.0722356, fixed = true)),
                  la(volume(start = 4.264557e-05, fixed = true), currentWork(start = -35.49703, fixed = true)),
                  idealValve_deactivable(open(start = false, fixed = true)),
                  idealValve_deactivable1(open(start = false, fixed = true)),
                  sa_node(t0(start = 0.18410309, fixed = true), cardiac_cycle(start = 0.20496073, fixed = true))),
                pulmonaryComponent(
                  c_pa(volume(start = 2.9544279e-05, fixed = true)),
                  c_pv(volume(start = 0.0008772145, fixed = true))),
                simplestLymphaticDynamicSpeedUp(p_vc_mean(start = 2975.389, fixed = true), J1_s(start = -6.378576e-09, fixed = true), v_isf(start = 0.08856685, fixed = true), v_lymph(start = 0.0032391215, fixed = true), timeSpedUp(start = 2160600.0, fixed = true), q_int(start = 0.08218815, fixed = true), v_drained(start = 0.0, fixed = true), p_vc_s(start = 325.20645, fixed = true), J1s_s(start = -3.310418e-10, fixed = true), t0(start = 0.09, fixed = true)),
                settings(V_PV_init = 0));
            annotation ();
          end obsolete_Renals_HFpEF_ss;

          model HFrEF_optimized "Generated by PostProcess/postprocess_optim.py optimized at Sep 25 14:30:42 CEST 2021
 with cost 0.001954 lowest at run 771"
            extends Renals_HFrEF( settings(
                HR_nominal(displayUnit="1/min") = 1.2166666666667,
                baro_f1=4.64e-03,
                pulm_C_PA=8.036843e-09,
                syst_TPR=139756100,
                heart_vntr_xi_AmRef=0.8728123,
                pulm_R =          2.311553e+07,
                syst_art_k_E=1.84811,
                heart_vntr_D_A =          1.061033e+03,
                V_PV_init=0.00080125),
                LVfunctionFraction = 8.250000e-01,
              useAutonomousPhi(y=true));

          end HFrEF_optimized;

          model HFpEF2_optimized "Generated by PostProcess/postprocess_optim.py optimized at Sep 25 13:54:20 CEST 2021
 with cost 0.000037 lowest at run 1346"
            extends ADAN_main.SystemicTree.Identification.HF.Renals_HFpEF(
                                 settings(
                baro_f1=4.14e-03,
                pulm_C_PA=4.421608e-09,
                syst_TPR=156753200,
                heart_vntr_xi_AmRef=0.8614063,
                pulm_R =          4.673979e+07,
                syst_art_k_E=1.849671,
                heart_vntr_D_A =          1.112597e+03,
                V_PV_init=0.000830156),
                heart_vntr_xi_AmRef_RV = 5.462492e-01,
              useAutonomousPhi(y=true));

          end HFpEF2_optimized;

          model HFpEF2_optimizedScaled
            "Same as opt, but with scaled disease vector"
            extends Renals_HF_base(
                                 settings(
          pulm_C_PA = 1.64E-08 *(1+theta*( -7.30E-01)),
          syst_TPR = 128733300 *(1+theta*( 2.18E-01)),
          heart_vntr_xi_AmRef = 1 *(1+theta*( -1.39E-01)),
          pulm_R = 10197530 *(1+theta*( 3.58E+00)),
          syst_art_k_E = 0.4402957 *(1+theta*( 3.20E+00)),
          heart_vntr_D_A = 1298.533 *(1+theta*( -1.43E-01)),
          V_PV_init = 1392e-6 *(0+theta*( 5.96E-01)),
          syst_TR_frac= 5.23*(1+theta*(9.13E-01))),
                heart_vntr_xi_AmRef_RV = 1 *(1+theta* ( -4.60E-01)),
              useAutonomousPhi(y=false));

              parameter Real theta=0;
          end HFpEF2_optimizedScaled;

          model HFrEF_optimizedScaled
            extends Renals_HF_base(
            settings(
            pulm_C_PA = 1.64E-08 *(1+theta*( -5.09E-01)),
          syst_TPR = 128733300 *(1+theta*( 8.56E-02)),
          heart_vntr_xi_AmRef = 1 *(1+theta*( -1.27E-01)),
          pulm_R = 10197530 *(1+theta*( 1.27E+00)),
          syst_art_k_E = 0.4402957 *(1+theta*( 3.20E+00)),
          heart_vntr_D_A = 1298.533 *(1+theta*( -1.83E-01)),
          V_PV_init = 1392e-6 *(0+theta*( 5.76E-01)),
          HR_nominal = 1.0666 *(1+theta*( 2.17E-01)),
          syst_TR_frac= 5.23*(1+theta*(9.13E-01))),
          LVfunctionFraction = 1 *(1+theta*( -1.75E-01)),
              useAutonomousPhi(y=false));


              parameter Real theta=0;
          end HFrEF_optimizedScaled;
        end Results;

        package SS
          model Renals_HFpEF_ss
            "Steady state initialization from 2021-09-27 14:29:34.077742 at time 600.0"
            extends Results.HFpEF2_optimized(
              SystemicComponent(
                baroreflex_system(
                  baroreflex(
                    phi_mean(start=0.24967965, fixed=true),
                    phi(start=0.25225663, fixed=true),
                    f1_adj(start=0.0043871785, fixed=true)),
                  baroreceptor_aortic(
                    fbr_auc(start=15.603293, fixed=true),
                    fbr_int(start=5.03616, fixed=true),
                    epsilon(start=1.1541058, fixed=true),
                    s(start=0.830561, fixed=true)),
                  baroreceptor_carotid(
                    fbr_auc(start=6.7041593, fixed=true),
                    fbr_int(start=2.1769414, fixed=true),
                    epsilon(start=1.0452783, fixed=true),
                    s(start=0.92719895, fixed=true))),
                ascending_aorta_A(
                  q(start=0.00018258386, fixed=true),
                  vol1(start=2.6414905e-06, fixed=true),
                  vol2(start=2.6487771e-06, fixed=true)),
                ascending_aorta_B(q_in(start=0.00018176451, fixed=true), volume(
                      start=1.5367594e-05, fixed=true)),
                ascending_aorta_C(q_in(start=0.00017670162, fixed=true), volume(
                      start=1.4252294e-05, fixed=true)),
                ascending_aorta_D(q_in(start=0.000175188, fixed=true), volume(
                      start=1.30509825e-05, fixed=true)),
                aortic_arch_C2(q_in(start=0.00017380143, fixed=true), volume(
                      start=1.1975393e-05, fixed=true)),
                brachiocephalic_trunk_C4(q_in(start=1.3934566e-05, fixed=true),
                    volume(start=8.492317e-06, fixed=true)),
                aortic_arch_C46(q_in(start=0.00015859166, fixed=true), volume(
                      start=7.1156237e-06, fixed=true)),
                aortic_arch_C64(q_in(start=0.00015110962, fixed=true), volume(
                      start=4.893952e-06, fixed=true)),
                aortic_arch_C94(q_in(start=0.00014350032, fixed=true), volume(
                      start=2.7033924e-05, fixed=true)),
                thoracic_aorta_C96(q_in(start=0.00014044504, fixed=true),
                    volume(start=4.8879247e-06, fixed=true)),
                thoracic_aorta_C100(q_in(start=0.00013988845, fixed=true),
                    volume(start=3.7662758e-06, fixed=true)),
                thoracic_aorta_C104(q_in(start=0.00013945265, fixed=true),
                    volume(start=7.117777e-06, fixed=true)),
                thoracic_aorta_C108(q_in(start=0.00013860004, fixed=true),
                    volume(start=2.3421576e-06, fixed=true)),
                thoracic_aorta_C112(q_in(start=0.00013831632, fixed=true),
                    volume(start=3.948467e-05, fixed=true)),
                abdominal_aorta_C114(q_in(start=0.00013159099, fixed=true),
                    volume(start=8.2241365e-07, fixed=true)),
                abdominal_aorta_C136(q_in(start=0.00011726597, fixed=true),
                    volume(start=3.4602535e-06, fixed=true)),
                abdominal_aorta_C164(q_in(start=0.00010460909, fixed=true),
                    volume(start=1.028837e-06, fixed=true)),
                abdominal_aorta_C176(q_in(start=8.148017e-05, fixed=true),
                    volume(start=2.7720341e-06, fixed=true)),
                abdominal_aorta_C188(q_in(start=5.7705005e-05, fixed=true),
                    volume(start=1.1178184e-05, fixed=true)),
                abdominal_aorta_C192(q_in(start=5.5250013e-05, fixed=true),
                    volume(start=7.0255965e-06, fixed=true)),
                celiac_trunk_C116(volume(start=0.0003644841, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                renal_L166(
                  V_AKIDNEY(start=6.8400946e-06, fixed=true),
                  V_VKIDNEY(start=1.0697205e-05, fixed=true),
                  A_myo(start=0.3092157, fixed=true),
                  D_aff(start=9.102383, fixed=true)),
                renal_R178(
                  V_AKIDNEY(start=6.846813e-06, fixed=true),
                  V_VKIDNEY(start=1.0693947e-05, fixed=true),
                  A_myo(start=0.3090121, fixed=true),
                  D_aff(start=9.102962, fixed=true)),
                common_iliac_R216(q_in(start=2.6821532e-05, fixed=true), volume(
                      start=6.055934e-06, fixed=true)),
                internal_iliac_T1_R218(volume(start=0.00017727769, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                external_iliac_R220(q_in(start=1.7702856e-05, fixed=true),
                    volume(start=4.045334e-06, fixed=true)),
                femoral_R222(q_in(start=1.686487e-05, fixed=true), volume(start=
                       1.1607631e-06, fixed=true)),
                profundus_T2_R224(volume(start=0.00020343311, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                femoral_R226(q_in(start=7.886071e-06, fixed=true), volume(start=
                       9.738395e-06, fixed=true)),
                popliteal_R228(q_in(start=3.9689075e-06, fixed=true), volume(
                      start=3.0222595e-06, fixed=true)),
                anterior_tibial_T3_R230(volume(start=2.647671e-05, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                popliteal_R232(q_in(start=1.5244748e-06, fixed=true), volume(
                      start=1.6566791e-07, fixed=true)),
                tibiofibular_trunk_R234(q_in(start=1.4891136e-06, fixed=true),
                    volume(start=6.737333e-07, fixed=true)),
                posterior_tibial_T4_R236(volume(start=2.9111217e-05, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                common_iliac_L194(q_in(start=2.6686654e-05, fixed=true), volume(
                      start=5.794399e-06, fixed=true)),
                internal_iliac_T1_L196(volume(start=0.00017727456, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                external_iliac_L198(q_in(start=1.7658402e-05, fixed=true),
                    volume(start=4.0451314e-06, fixed=true)),
                femoral_L200(q_in(start=1.6825472e-05, fixed=true), volume(
                      start=1.1607073e-06, fixed=true)),
                profundus_T2_L202(volume(start=0.00020342926, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                femoral_L204(q_in(start=7.852791e-06, fixed=true), volume(start=
                       9.738032e-06, fixed=true)),
                popliteal_L206(q_in(start=3.9592437e-06, fixed=true), volume(
                      start=3.022141e-06, fixed=true)),
                anterior_tibial_T3_L208(volume(start=2.6476337e-05, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                popliteal_L210(q_in(start=1.5227652e-06, fixed=true), volume(
                      start=1.6566428e-07, fixed=true)),
                tibiofibular_trunk_L212(q_in(start=1.4876128e-06, fixed=true),
                    volume(start=6.737393e-07, fixed=true)),
                posterior_tibial_T4_L214(volume(start=2.9110712e-05, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                subclavian_R28(q_in(start=6.8149216e-06, fixed=true), volume(
                      start=1.3498061e-06, fixed=true)),
                subclavian_R30(q_in(start=4.2331244e-06, fixed=true), volume(
                      start=1.8397766e-06, fixed=true)),
                axillary_R32(q_in(start=4.1040753e-06, fixed=true), volume(
                      start=2.2218364e-06, fixed=true)),
                brachial_R34(q_in(start=3.993061e-06, fixed=true), volume(start=
                       3.3058927e-06, fixed=true)),
                ulnar_T2_R36(q_in(start=2.1440717e-06, fixed=true), volume(
                      start=2.0363568e-07, fixed=true)),
                ulnar_T2_R42(volume(start=6.130898e-05, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                radial_T1_R44(volume(start=4.9943737e-05, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                subclavian_L66(q_in(start=7.084198e-06, fixed=true), volume(
                      start=3.2620298e-06, fixed=true)),
                subclavian_L78(q_in(start=4.3453138e-06, fixed=true), volume(
                      start=1.3892857e-06, fixed=true)),
                axillary_L80(q_in(start=4.249386e-06, fixed=true), volume(start=
                       2.2216582e-06, fixed=true)),
                brachial_L82(q_in(start=4.017329e-06, fixed=true), volume(start=
                       1.099547e-06, fixed=true)),
                ulnar_T2_L84(q_in(start=2.1337796e-06, fixed=true), volume(
                      start=2.0354602e-07, fixed=true)),
                ulnar_T2_L90(volume(start=6.1326406e-05, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                radial_T1_L92(volume(start=5.293271e-05, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                common_carotid_R6_A(q_in(start=6.3382436e-06, fixed=true),
                    volume(start=2.7683873e-06, fixed=true)),
                common_carotid_R6_B(q_in(start=5.972603e-06, fixed=true),
                    volume(start=2.3839063e-06, fixed=true)),
                common_carotid_R6_C(q_in(start=5.6625418e-06, fixed=true),
                    volume(start=1.8120019e-06, fixed=true)),
                internal_carotid_R8_A(q_in(start=2.7423669e-06, fixed=true),
                    volume(start=1.0298688e-06, fixed=true)),
                internal_carotid_R8_B(q_in(start=2.7030417e-06, fixed=true),
                    volume(start=6.633344e-07, fixed=true)),
                internal_carotid_R8_C(volume(start=7.261528e-05, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                external_carotid_T2_R26(volume(start=7.272662e-05, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                common_carotid_L48_A(q_in(start=6.722104e-06, fixed=true),
                    volume(start=3.0042338e-06, fixed=true)),
                common_carotid_L48_B(q_in(start=6.3217894e-06, fixed=true),
                    volume(start=2.658482e-06, fixed=true)),
                common_carotid_L48_C(q_in(start=5.9807057e-06, fixed=true),
                    volume(start=2.3763089e-06, fixed=true)),
                common_carotid_L48_D(q_in(start=5.683278e-06, fixed=true),
                    volume(start=1.9478723e-06, fixed=true)),
                internal_carotid_L50_A(q_in(start=2.7475353e-06, fixed=true),
                    volume(start=1.0301645e-06, fixed=true)),
                internal_carotid_L50_B(q_in(start=2.7094193e-06, fixed=true),
                    volume(start=6.635103e-07, fixed=true)),
                internal_carotid_L50_C(volume(start=7.264741e-05, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                external_carotid_T2_L62(volume(start=7.275533e-05, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                vertebral_L2(volume(start=6.690982e-05, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                vertebral_R272(volume(start=6.688504e-05, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                superior_vena_cava_C2(volume(start=7.4766513e-06, fixed=true)),
                superior_vena_cava_C88(volume(start=1.2883735e-05, fixed=true)),
                inferior_vena_cava_C8(volume(start=1.1212831e-05, fixed=true)),
                hepatic_vein_T1_C10(volume(start=4.3960827e-06, fixed=true)),
                inferior_vena_cava_C12(volume(start=3.0418576e-05, fixed=true)),
                inferior_vena_cava_C16(volume(start=2.3918017e-05, fixed=true)),
                renal_vein_T1_R18(volume(start=7.0465157e-06, fixed=true)),
                inferior_vena_cava_C20(volume(start=1.6686745e-06, fixed=true)),
                renal_vein_T1_L22(volume(start=6.2257327e-06, fixed=true)),
                inferior_vena_cava_C24(volume(start=6.654219e-05, fixed=true)),
                common_iliac_vein_L56(volume(start=1.6324575e-05, fixed=true),
                    open(start=true, fixed=true)),
                common_iliac_vein_R26(volume(start=1.5005204e-05, fixed=true),
                    open(start=true, fixed=true)),
                external_iliac_vein_R28(volume(start=2.1883745e-06, fixed=true)),
                internal_iliac_vein_T1_R30(volume(start=9.357332e-06, fixed=
                        true)),
                external_iliac_vein_R32(volume(start=2.5380397e-05, fixed=true)),
                femoral_vein_R34(volume(start=1.1032927e-06, fixed=true)),
                femoral_vein_R38(volume(start=8.744703e-06, fixed=true)),
                profunda_femoris_vein_T2_R40(volume(start=2.4125393e-05, fixed=
                        true)),
                femoral_vein_R42(volume(start=6.183168e-05, fixed=true)),
                femoral_vein_R46(volume(start=3.405239e-06, fixed=true)),
                popliteal_vein_R48(volume(start=1.38481155e-05, fixed=true)),
                anterior_tibial_vein_T4_R50(volume(start=3.5124249e-06, fixed=
                        true)),
                popliteal_vein_R52(volume(start=3.0802314e-06, fixed=true)),
                posterior_tibial_vein_T6_R54(volume(start=5.817426e-06, fixed=
                        true)),
                external_iliac_vein_L58(volume(start=2.191054e-06, fixed=true)),
                internal_iliac_vein_T1_L60(volume(start=9.624412e-06, fixed=
                        true)),
                external_iliac_vein_L62(volume(start=2.4917354e-05, fixed=true)),
                femoral_vein_L64(volume(start=1.2898208e-06, fixed=true)),
                femoral_vein_L68(volume(start=8.744715e-06, fixed=true)),
                profunda_femoris_vein_T2_L70(volume(start=2.412532e-05, fixed=
                        true)),
                femoral_vein_L72(volume(start=6.183177e-05, fixed=true)),
                femoral_vein_L76(volume(start=3.4052232e-06, fixed=true)),
                popliteal_vein_L78(volume(start=1.3848137e-05, fixed=true)),
                anterior_tibial_vein_T4_L80(volume(start=3.5123971e-06, fixed=
                        true)),
                popliteal_vein_L82(volume(start=3.0802553e-06, fixed=true)),
                posterior_tibial_vein_T6_L84(volume(start=5.8174564e-06, fixed=
                        true)),
                brachiocephalic_vein_R90(volume(start=1.5147791e-05, fixed=true),
                    open(start=true, fixed=true)),
                brachiocephalic_vein_L124(volume(start=2.8386252e-05, fixed=
                        true), open(start=true, fixed=true)),
                vertebral_vein_R92(volume(start=9.473472e-06, fixed=true)),
                brachiocephalic_vein_R94(volume(start=3.4339926e-06, fixed=true)),
                subclavian_vein_R96(volume(start=1.6697036e-06, fixed=true)),
                internal_jugular_vein_R122(volume(start=6.5991306e-05, fixed=
                        true)),
                external_jugular_vein_R98(volume(start=4.5925426e-06, fixed=
                        true)),
                subclavian_vein_R100(volume(start=6.828602e-06, fixed=true)),
                axillary_vein_R102(volume(start=2.3992969e-05, fixed=true)),
                brachial_vein_R104(volume(start=4.6039363e-06, fixed=true)),
                brachial_vein_R114(volume(start=4.120181e-06, fixed=true)),
                brachial_vein_R108(volume(start=6.341365e-07, fixed=true)),
                ulnar_vein_T7_R110(volume(start=5.083051e-06, fixed=true)),
                brachial_vein_R118(volume(start=3.9710918e-07, fixed=true)),
                radial_vein_T3_R120(volume(start=3.05314e-06, fixed=true)),
                vertebral_vein_L126(volume(start=8.8612605e-06, fixed=true)),
                brachiocephalic_vein_L128(volume(start=1.7353171e-06, fixed=
                        true)),
                subclavian_vein_L130(volume(start=1.4847739e-06, fixed=true)),
                internal_jugular_vein_L156(volume(start=4.0051713e-05, fixed=
                        true)),
                external_jugular_vein_L132(volume(start=4.503766e-06, fixed=
                        true)),
                subclavian_vein_L134(volume(start=6.654805e-06, fixed=true)),
                axillary_vein_L136(volume(start=2.4264571e-05, fixed=true)),
                brachial_vein_L138(volume(start=4.604125e-06, fixed=true)),
                brachial_vein_L148(volume(start=4.121371e-06, fixed=true)),
                brachial_vein_L142(volume(start=6.341714e-07, fixed=true)),
                ulnar_vein_T7_L144(volume(start=5.083483e-06, fixed=true)),
                brachial_vein_L152(volume(start=3.972338e-07, fixed=true)),
                radial_vein_T3_L154(volume(start=3.0562508e-06, fixed=true)),
                mesenteric_artery(q_in(start=1.20404375e-05, fixed=true),
                    volume(start=7.493424e-06, fixed=true)),
                splanchnic_tissue(volume(start=0.00026449192, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                splanchnic_vein(volume(start=3.662669e-05, fixed=true)),
                coronary_arteries(q_in(start=3.430567e-06, fixed=true), volume(
                      start=3.979951e-08, fixed=true)),
                cardiac_tissue(volume(start=0.0001191663, fixed=true),
                    phi_delayed(start=0.25398996, fixed=true)),
                coronary_veins(volume(start=6.736602e-08, fixed=true)),
                brachial_L82_HeartLevel(q_in(start=4.124816e-06, fixed=true),
                    volume(start=2.2076351e-06, fixed=true))),
              heartComponent(
                tricuspidValve(open(start=false, fixed=true)),
                pulmonaryValve(
                  open(start=true, fixed=true),
                  BP_max(start=0.0, fixed=true),
                  BP_min(start=26600.0, fixed=true),
                  CO_acc(start=0.0, fixed=true)),
                mitralValve(
                  open(start=false, fixed=true),
                  BP_max(start=3635.7007, fixed=true),
                  BP_min(start=3692.0754, fixed=true),
                  CO_acc(start=1.5178134e-05, fixed=true)),
                aorticValve(
                  open(start=true, fixed=true),
                  BP_max(start=18324.336, fixed=true),
                  BP_min(start=9699.749, fixed=true),
                  CO_acc(start=6.319176e-05, fixed=true)),
                ventricles(
                  LV_wall(ym(start=2.9093857, fixed=true), SL(start=1.9143736,
                        fixed=true)),
                  SEP_wall(SL(start=1.7782726, fixed=true)),
                  RV_wall(SL(start=2.1228187, fixed=true)),
                  calciumMechanics(tm(start=0.34102964, fixed=true)),
                  V_LV(start=5.0129394e-05, fixed=true),
                  V_RV(start=3.974025e-05, fixed=true),
                  currentWork_LV(start=0.949287, fixed=true),
                  currentWork_RV(start=0.37960517, fixed=true)),
                ra(volume(start=7.6891556e-05, fixed=true), currentWork(start=-2.3830035,
                      fixed=true)),
                la(volume(start=8.770976e-05, fixed=true), currentWork(start=-31.96743,
                      fixed=true)),
                idealValve_deactivable(open(start=false, fixed=true)),
                idealValve_deactivable1(open(start=false, fixed=true)),
                sa_node(t0(start=0.42102963, fixed=true), cardiac_cycle(start=
                        0.45367703, fixed=true))),
              pulmonaryComponent(c_pa(volume(start=3.6300702e-05, fixed=true)),
                  c_pv(volume(start=7.950581e-04 + settings.V_PV_init, fixed=
                        true))),
              simplestLymphaticDynamicSpeedUp(
                p_vc_mean(start=2289.6812, fixed=true),
                J1_s(start=-9.220922e-09, fixed=true),
                v_isf(start=0.07274944, fixed=true),
                v_lymph(start=0.0029569399, fixed=true),
                timeSpedUp(start=2160600.0, fixed=true),
                q_int(start=0.067880005, fixed=true),
                v_drained(start=0.0, fixed=true),
                p_vc_s(start=190.75618, fixed=true),
                J1s_s(start=-8.2473667e-10, fixed=true),
                t0(start=0.09, fixed=true)),
              settings(V_PV_init=0));

          end Renals_HFpEF_ss;

          model Renals_HFrEF_ss
            "Steady state initialization from 2021-09-27 13:54:08.532625 at time 600.0"
            extends Results.HFrEF_optimized(
              SystemicComponent(
                baroreflex_system(
                  baroreflex(
                    phi_mean(start=0.24923716, fixed=true),
                    phi(start=0.24720937, fixed=true),
                    f1_adj(start=0.004414321, fixed=true)),
                  baroreceptor_aortic(
                    fbr_auc(start=12.3463545, fixed=true),
                    fbr_int(start=7.519825, fixed=true),
                    epsilon(start=1.1389774, fixed=true),
                    s(start=0.8454509, fixed=true)),
                  baroreceptor_carotid(
                    fbr_auc(start=5.127133, fixed=true),
                    fbr_int(start=3.1706357, fixed=true),
                    epsilon(start=1.0406158, fixed=true),
                    s(start=0.9357914, fixed=true))),
                ascending_aorta_A(
                  q(start=2.4519397e-05, fixed=true),
                  vol1(start=2.2473434e-06, fixed=true),
                  vol2(start=2.253949e-06, fixed=true)),
                ascending_aorta_B(q_in(start=2.7265036e-05, fixed=true), volume(
                      start=1.4677741e-05, fixed=true)),
                ascending_aorta_C(q_in(start=2.881469e-05, fixed=true), volume(
                      start=1.3614685e-05, fixed=true)),
                ascending_aorta_D(q_in(start=3.321491e-05, fixed=true), volume(
                      start=1.2469407e-05, fixed=true)),
                aortic_arch_C2(q_in(start=3.7220176e-05, fixed=true), volume(
                      start=1.1443676e-05, fixed=true)),
                brachiocephalic_trunk_C4(q_in(start=4.849476e-06, fixed=true),
                    volume(start=8.156043e-06, fixed=true)),
                aortic_arch_C46(q_in(start=3.6024965e-05, fixed=true), volume(
                      start=6.8009776e-06, fixed=true)),
                aortic_arch_C64(q_in(start=3.6874237e-05, fixed=true), volume(
                      start=4.6780706e-06, fixed=true)),
                aortic_arch_C94(q_in(start=3.3842814e-05, fixed=true), volume(
                      start=2.5843367e-05, fixed=true)),
                thoracic_aorta_C96(q_in(start=4.2027405e-05, fixed=true),
                    volume(start=4.6753885e-06, fixed=true)),
                thoracic_aorta_C100(q_in(start=4.348966e-05, fixed=true),
                    volume(start=3.6026936e-06, fixed=true)),
                thoracic_aorta_C104(q_in(start=4.4615936e-05, fixed=true),
                    volume(start=6.808925e-06, fixed=true)),
                thoracic_aorta_C108(q_in(start=4.674581e-05, fixed=true),
                    volume(start=2.240726e-06, fixed=true)),
                thoracic_aorta_C112(q_in(start=4.7445745e-05, fixed=true),
                    volume(start=3.778514e-05, fixed=true)),
                abdominal_aorta_C114(q_in(start=5.9391336e-05, fixed=true),
                    volume(start=7.877429e-07, fixed=true)),
                abdominal_aorta_C136(q_in(start=4.5943005e-05, fixed=true),
                    volume(start=3.3146578e-06, fixed=true)),
                abdominal_aorta_C164(q_in(start=3.9501967e-05, fixed=true),
                    volume(start=9.856981e-07, fixed=true)),
                abdominal_aorta_C176(q_in(start=2.9093973e-05, fixed=true),
                    volume(start=2.6560942e-06, fixed=true)),
                abdominal_aorta_C188(q_in(start=1.9116882e-05, fixed=true),
                    volume(start=1.0715199e-05, fixed=true)),
                abdominal_aorta_C192(q_in(start=2.256151e-05, fixed=true),
                    volume(start=6.742318e-06, fixed=true)),
                celiac_trunk_C116(volume(start=0.00034780143, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                renal_L166(
                  V_AKIDNEY(start=6.2224126e-06, fixed=true),
                  V_VKIDNEY(start=8.487447e-06, fixed=true),
                  A_myo(start=0.2622542, fixed=true),
                  D_aff(start=9.738922, fixed=true)),
                renal_R178(
                  V_AKIDNEY(start=6.2373997e-06, fixed=true),
                  V_VKIDNEY(start=8.486436e-06, fixed=true),
                  A_myo(start=0.26205942, fixed=true),
                  D_aff(start=9.740284, fixed=true)),
                common_iliac_R216(q_in(start=1.2339058e-05, fixed=true), volume(
                      start=5.839637e-06, fixed=true)),
                internal_iliac_T1_R218(volume(start=0.00017033612, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                external_iliac_R220(q_in(start=7.0220176e-06, fixed=true),
                    volume(start=3.974004e-06, fixed=true)),
                femoral_R222(q_in(start=7.684947e-06, fixed=true), volume(start=
                       1.1408945e-06, fixed=true)),
                profundus_T2_R224(volume(start=0.00019549955, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                femoral_R226(q_in(start=-4.873822e-07, fixed=true), volume(
                      start=9.586513e-06, fixed=true)),
                popliteal_R228(q_in(start=1.6971467e-06, fixed=true), volume(
                      start=2.9799633e-06, fixed=true)),
                anterior_tibial_T3_R230(volume(start=2.5637368e-05, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                popliteal_R232(q_in(start=1.1965052e-06, fixed=true), volume(
                      start=1.6447007e-07, fixed=true)),
                tibiofibular_trunk_R234(q_in(start=1.2147897e-06, fixed=true),
                    volume(start=6.689091e-07, fixed=true)),
                posterior_tibial_T4_R236(volume(start=2.8017119e-05, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                common_iliac_L194(q_in(start=1.240991e-05, fixed=true), volume(
                      start=5.587811e-06, fixed=true)),
                internal_iliac_T1_L196(volume(start=0.00017033405, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                external_iliac_L198(q_in(start=7.0139668e-06, fixed=true),
                    volume(start=3.9737274e-06, fixed=true)),
                femoral_L200(q_in(start=7.676092e-06, fixed=true), volume(start=
                       1.1408127e-06, fixed=true)),
                profundus_T2_L202(volume(start=0.00019549667, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                femoral_L204(q_in(start=-4.9054063e-07, fixed=true), volume(
                      start=9.585507e-06, fixed=true)),
                popliteal_L206(q_in(start=1.6941844e-06, fixed=true), volume(
                      start=2.9796338e-06, fixed=true)),
                anterior_tibial_T3_L208(volume(start=2.5637071e-05, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                popliteal_L210(q_in(start=1.1950541e-06, fixed=true), volume(
                      start=1.6446043e-07, fixed=true)),
                tibiofibular_trunk_L212(q_in(start=1.2133456e-06, fixed=true),
                    volume(start=6.688904e-07, fixed=true)),
                posterior_tibial_T4_L214(volume(start=2.8016722e-05, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                subclavian_R28(q_in(start=4.726214e-06, fixed=true), volume(
                      start=1.3016778e-06, fixed=true)),
                subclavian_R30(q_in(start=2.685202e-06, fixed=true), volume(
                      start=1.7815519e-06, fixed=true)),
                axillary_R32(q_in(start=3.0717947e-06, fixed=true), volume(
                      start=2.163785e-06, fixed=true)),
                brachial_R34(q_in(start=3.4128661e-06, fixed=true), volume(
                      start=3.2266544e-06, fixed=true)),
                ulnar_T2_R36(q_in(start=2.0713892e-06, fixed=true), volume(
                      start=2.0129303e-07, fixed=true)),
                ulnar_T2_R42(volume(start=5.905223e-05, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                radial_T1_R44(volume(start=4.827931e-05, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                subclavian_L66(q_in(start=4.513981e-06, fixed=true), volume(
                      start=3.151011e-06, fixed=true)),
                subclavian_L78(q_in(start=2.8928482e-06, fixed=true), volume(
                      start=1.347843e-06, fixed=true)),
                axillary_L80(q_in(start=3.1670586e-06, fixed=true), volume(
                      start=2.1646933e-06, fixed=true)),
                brachial_L82(q_in(start=3.7464765e-06, fixed=true), volume(
                      start=1.0741238e-06, fixed=true)),
                ulnar_T2_L84(q_in(start=2.0718837e-06, fixed=true), volume(
                      start=2.0128888e-07, fixed=true)),
                ulnar_T2_L90(volume(start=5.906381e-05, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                radial_T1_L92(volume(start=5.1184972e-05, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                common_carotid_R6_A(q_in(start=2.4010708e-06, fixed=true),
                    volume(start=2.6108416e-06, fixed=true)),
                common_carotid_R6_B(q_in(start=3.4594182e-06, fixed=true),
                    volume(start=2.2511385e-06, fixed=true)),
                common_carotid_R6_C(q_in(start=4.3448076e-06, fixed=true),
                    volume(start=1.7151445e-06, fixed=true)),
                internal_carotid_R8_A(q_in(start=2.4069257e-06, fixed=true),
                    volume(start=1.0137735e-06, fixed=true)),
                internal_carotid_R8_B(q_in(start=2.5124848e-06, fixed=true),
                    volume(start=6.5395074e-07, fixed=true)),
                internal_carotid_R8_C(volume(start=6.973131e-05, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                external_carotid_T2_R26(volume(start=6.990174e-05, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                common_carotid_L48_A(q_in(start=1.311727e-06, fixed=true),
                    volume(start=2.8334002e-06, fixed=true)),
                common_carotid_L48_B(q_in(start=2.467836e-06, fixed=true),
                    volume(start=2.5098343e-06, fixed=true)),
                common_carotid_L48_C(q_in(start=3.4598397e-06, fixed=true),
                    volume(start=2.24561e-06, fixed=true)),
                common_carotid_L48_D(q_in(start=4.3216705e-06, fixed=true),
                    volume(start=1.8439489e-06, fixed=true)),
                internal_carotid_L50_A(q_in(start=2.4145431e-06, fixed=true),
                    volume(start=1.0139753e-06, fixed=true)),
                internal_carotid_L50_B(q_in(start=2.5190773e-06, fixed=true),
                    volume(start=6.540679e-07, fixed=true)),
                internal_carotid_L50_C(volume(start=6.976218e-05, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                external_carotid_T2_L62(volume(start=6.9927686e-05, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                vertebral_L2(volume(start=6.4294065e-05, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                vertebral_R272(volume(start=6.427275e-05, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                superior_vena_cava_C2(volume(start=7.1820823e-06, fixed=true)),
                superior_vena_cava_C88(volume(start=1.2376118e-05, fixed=true)),
                inferior_vena_cava_C8(volume(start=1.0771059e-05, fixed=true)),
                hepatic_vein_T1_C10(volume(start=4.222901e-06, fixed=true)),
                inferior_vena_cava_C12(volume(start=2.9219955e-05, fixed=true)),
                inferior_vena_cava_C16(volume(start=2.297543e-05, fixed=true)),
                renal_vein_T1_R18(volume(start=6.7688834e-06, fixed=true)),
                inferior_vena_cava_C20(volume(start=1.6029128e-06, fixed=true)),
                renal_vein_T1_L22(volume(start=5.9804665e-06, fixed=true)),
                inferior_vena_cava_C24(volume(start=6.3918385e-05, fixed=true)),
                common_iliac_vein_L56(volume(start=1.5678288e-05, fixed=true),
                    open(start=false, fixed=true)),
                common_iliac_vein_R26(volume(start=1.4411381e-05, fixed=true),
                    open(start=false, fixed=true)),
                external_iliac_vein_R28(volume(start=2.1017672e-06, fixed=true)),
                internal_iliac_vein_T1_R30(volume(start=8.987353e-06, fixed=
                        true)),
                external_iliac_vein_R32(volume(start=2.4374945e-05, fixed=true)),
                femoral_vein_R34(volume(start=1.0595832e-06, fixed=true)),
                femoral_vein_R38(volume(start=8.398117e-06, fixed=true)),
                profunda_femoris_vein_T2_R40(volume(start=2.3175684e-05, fixed=
                        true)),
                femoral_vein_R42(volume(start=5.9369864e-05, fixed=true)),
                femoral_vein_R46(volume(start=3.2696546e-06, fixed=true)),
                popliteal_vein_R48(volume(start=1.32960095e-05, fixed=true)),
                anterior_tibial_vein_T4_R50(volume(start=3.4000313e-06, fixed=
                        true)),
                popliteal_vein_R52(volume(start=2.9574255e-06, fixed=true)),
                posterior_tibial_vein_T6_R54(volume(start=5.590646e-06, fixed=
                        true)),
                external_iliac_vein_L58(volume(start=2.1043072e-06, fixed=true)),
                internal_iliac_vein_T1_L60(volume(start=9.243735e-06, fixed=
                        true)),
                external_iliac_vein_L62(volume(start=2.392991e-05, fixed=true)),
                femoral_vein_L64(volume(start=1.2387036e-06, fixed=true)),
                femoral_vein_L68(volume(start=8.398012e-06, fixed=true)),
                profunda_femoris_vein_T2_L70(volume(start=2.3175357e-05, fixed=
                        true)),
                femoral_vein_L72(volume(start=5.93693e-05, fixed=true)),
                femoral_vein_L76(volume(start=3.2696034e-06, fixed=true)),
                popliteal_vein_L78(volume(start=1.3295905e-05, fixed=true)),
                anterior_tibial_vein_T4_L80(volume(start=3.400025e-06, fixed=
                        true)),
                popliteal_vein_L82(volume(start=2.957421e-06, fixed=true)),
                posterior_tibial_vein_T6_L84(volume(start=5.5906667e-06, fixed=
                        true)),
                brachiocephalic_vein_R90(volume(start=1.4543003e-05, fixed=true),
                    open(start=false, fixed=true)),
                brachiocephalic_vein_L124(volume(start=2.726309e-05, fixed=true),
                    open(start=false, fixed=true)),
                vertebral_vein_R92(volume(start=9.099018e-06, fixed=true)),
                brachiocephalic_vein_R94(volume(start=3.296887e-06, fixed=true)),
                subclavian_vein_R96(volume(start=1.6030402e-06, fixed=true)),
                internal_jugular_vein_R122(volume(start=6.335571e-05, fixed=
                        true)),
                external_jugular_vein_R98(volume(start=4.412933e-06, fixed=true)),
                subclavian_vein_R100(volume(start=6.555959e-06, fixed=true)),
                axillary_vein_R102(volume(start=2.3035007e-05, fixed=true)),
                brachial_vein_R104(volume(start=4.426071e-06, fixed=true)),
                brachial_vein_R114(volume(start=3.9627225e-06, fixed=true)),
                brachial_vein_R108(volume(start=6.0978994e-07, fixed=true)),
                ulnar_vein_T7_R110(volume(start=4.903253e-06, fixed=true)),
                brachial_vein_R118(volume(start=3.8202063e-07, fixed=true)),
                radial_vein_T3_R120(volume(start=2.9562966e-06, fixed=true)),
                vertebral_vein_L126(volume(start=8.513526e-06, fixed=true)),
                brachiocephalic_vein_L128(volume(start=1.6666554e-06, fixed=
                        true)),
                subclavian_vein_L130(volume(start=1.4260256e-06, fixed=true)),
                internal_jugular_vein_L156(volume(start=3.8466245e-05, fixed=
                        true)),
                external_jugular_vein_L132(volume(start=4.328935e-06, fixed=
                        true)),
                subclavian_vein_L134(volume(start=6.391469e-06, fixed=true)),
                axillary_vein_L136(volume(start=2.330423e-05, fixed=true)),
                brachial_vein_L138(volume(start=4.4269545e-06, fixed=true)),
                brachial_vein_L148(volume(start=3.965096e-06, fixed=true)),
                brachial_vein_L142(volume(start=6.099128e-07, fixed=true)),
                ulnar_vein_T7_L144(volume(start=4.9037735e-06, fixed=true)),
                brachial_vein_L152(volume(start=3.8226167e-07, fixed=true)),
                radial_vein_T3_L154(volume(start=2.9607334e-06, fixed=true)),
                mesenteric_artery(q_in(start=7.471084e-06, fixed=true), volume(
                      start=7.0998e-06, fixed=true)),
                splanchnic_tissue(volume(start=0.0002523655, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                splanchnic_vein(volume(start=3.5183628e-05, fixed=true)),
                coronary_arteries(q_in(start=3.2206872e-06, fixed=true), volume(
                      start=3.8342645e-08, fixed=true)),
                cardiac_tissue(volume(start=0.00011486065, fixed=true),
                    phi_delayed(start=0.25291628, fixed=true)),
                coronary_veins(volume(start=6.5509106e-08, fixed=true)),
                brachial_L82_HeartLevel(q_in(start=3.4992454e-06, fixed=true),
                    volume(start=2.1557887e-06, fixed=true))),
              heartComponent(
                tricuspidValve(open(start=false, fixed=true)),
                pulmonaryValve(
                  open(start=true, fixed=true),
                  BP_max(start=0.0, fixed=true),
                  BP_min(start=26600.0, fixed=true),
                  CO_acc(start=0.0, fixed=true)),
                mitralValve(
                  open(start=false, fixed=true),
                  BP_max(start=3176.4783, fixed=true),
                  BP_min(start=3191.0864, fixed=true),
                  CO_acc(start=2.1254871e-05, fixed=true)),
                aorticValve(
                  open(start=true, fixed=true),
                  BP_max(start=16115.146, fixed=true),
                  BP_min(start=8753.775, fixed=true),
                  CO_acc(start=6.278786e-05, fixed=true)),
                ventricles(
                  LV_wall(ym(start=3.0756998, fixed=true), SL(start=1.979985,
                        fixed=true)),
                  SEP_wall(SL(start=1.8967978, fixed=true)),
                  RV_wall(SL(start=2.2583141, fixed=true)),
                  calciumMechanics(tm(start=0.41504386, fixed=true)),
                  V_LV(start=6.703923e-05, fixed=true),
                  V_RV(start=0.00014454171, fixed=true),
                  currentWork_LV(start=0.8345485, fixed=true),
                  currentWork_RV(start=0.27908355, fixed=true)),
                ra(volume(start=6.110059e-05, fixed=true), currentWork(start=
                        5.313011, fixed=true)),
                la(volume(start=9.70139e-05, fixed=true), currentWork(start=-23.542376,
                      fixed=true)),
                idealValve_deactivable(open(start=false, fixed=true)),
                idealValve_deactivable1(open(start=false, fixed=true)),
                sa_node(t0(start=0.49504387, fixed=true), cardiac_cycle(start=
                        0.6047074, fixed=true))),
              pulmonaryComponent(c_pa(volume(start=4.0783725e-05, fixed=true)),
                  c_pv(volume(start=7.885824e-04 + settings.V_PV_init, fixed=
                        true))),
              simplestLymphaticDynamicSpeedUp(
                p_vc_mean(start=1639.884, fixed=true),
                J1_s(start=-7.240897e-09, fixed=true),
                v_isf(start=0.070649825, fixed=true),
                v_lymph(start=0.00215488, fixed=true),
                timeSpedUp(start=2160600.0, fixed=true),
                q_int(start=0.06726411, fixed=true),
                v_drained(start=0.0, fixed=true),
                p_vc_s(start=147.83766, fixed=true),
                J1s_s(start=-4.5752632e-10, fixed=true),
                t0(start=0.089999996, fixed=true)),
              settings(V_PV_init=0));

          end Renals_HFrEF_ss;
        end SS;

        model HFpEF_exercise
          extends SS.Renals_HFpEF_ss(SystemicComponent(UseBaroreflexOutput=false,
                UseExerciseInput=true), settings(HR_max=2.6666666666667));
                      Components.Signals.Stepping  Exercise(
            startTime=40,
            interval=40,
            increment=0.1,
            maxVal=1)
            annotation (Placement(transformation(extent={{-100,56},{-80,76}})));
          Modelica.Blocks.Math.Gain gain(k=0.75)
            annotation (Placement(transformation(extent={{-66,36},{-46,56}})));
          Modelica.Blocks.Math.Add add
            annotation (Placement(transformation(extent={{-18,42},{2,62}})));
        equation
          connect(Exercise.y, SystemicComponent.exercise_input) annotation (Line(
                points={{-79,66},{-34,66},{-34,36},{-28,36}}, color={0,0,127}));
          connect(Exercise.y,gain. u) annotation (Line(points={{-79,66},{-76,
                  66},{-76,46},{-68,46}},
                                      color={0,0,127}));
          connect(gain.y,add. u2)
            annotation (Line(points={{-45,46},{-20,46}}, color={0,0,127}));
          connect(phi_fixed.y,add. u1) annotation (Line(points={{-35,84},{-32,
                  84},{-32,58},{-20,58}},
                                      color={0,0,127}));
          connect(add.y, switch1.u1) annotation (Line(points={{3,52},{10,52},
                  {10,70.2},{14.3,70.2}},
                                      color={0,0,127}));
        end HFpEF_exercise;

        model HFrEF_exercise
          extends SS.Renals_HFrEF_ss(SystemicComponent(UseBaroreflexOutput=false,
                UseExerciseInput=true), settings(HR_max=2.6666666666667));
                      Components.Signals.Stepping  Exercise(
            startTime=40,
            interval=40,
            increment=0.1,
            maxVal=1)
            annotation (Placement(transformation(extent={{-100,56},{-80,76}})));
          Modelica.Blocks.Math.Gain gain(k=0.75)
            annotation (Placement(transformation(extent={{-66,36},{-46,56}})));
          Modelica.Blocks.Math.Add add
            annotation (Placement(transformation(extent={{-18,42},{2,62}})));
        equation
          connect(Exercise.y, SystemicComponent.exercise_input) annotation (Line(
                points={{-79,66},{-34,66},{-34,36},{-28,36}}, color={0,0,127}));
          connect(Exercise.y,gain. u) annotation (Line(points={{-79,66},{-76,
                  66},{-76,46},{-68,46}},
                                      color={0,0,127}));
          connect(gain.y,add. u2)
            annotation (Line(points={{-45,46},{-20,46}}, color={0,0,127}));
          connect(phi_fixed.y,add. u1) annotation (Line(points={{-35,84},{-32,
                  84},{-32,58},{-20,58}},
                                      color={0,0,127}));
          connect(add.y, switch1.u1) annotation (Line(points={{3,52},{10,52},
                  {10,70.2},{14.3,70.2}},
                                      color={0,0,127}));
        end HFrEF_exercise;

        model HFrEF_alone
          extends Variations.Renals.Renals_HF(condHRPhi(disconnected=true),
              useAutonomousPhi(y=false));
        end HFrEF_alone;
      end HF;
    end Identification;

    package Baseline
      package Experiments
        model SmithOlufsenMynard_base
          "Smith heart with Olufsen's driving and Mynard valves, with additional speed segment and aortic length metrics"
          extends Auxiliary.partialCVS(
            SystemicComponent(systemicParameters(k_E=0.4)),
            condHRPhi(disconnected=false),
            phi_fixed(nperiod=0),
            redeclare Components.Subsystems.Heart.Heart_SmithOlufsenMynard
              heartComponent(
              UseFrequencyInput=true,
              UsePhiInput=true,
              UseThoracic_PressureInput=
                                       true),
            redeclare Components.Subsystems.Pulmonary.Pulmonary_Smith
              pulmonaryComponent,
            redeclare Components.Subsystems.Baroreflex.HeartRate_HRMinMax
              heartRate(HR_nom(displayUnit="1/min") = 1.16667, phi0=settings.phi0),
            settings(
              heart_alphaE=0.2,
              exercise_factor_on_arterial_compliance=0.2,
              UseNonLinear_TissuesCompliance=true,
              tissues_UseStraighteningReaction2Phi=true,
              veins_activation_tau=0.1,
              hideLevel0=true,
              hideLevel1=true,
              eta_vc=0.2,
              tissues_CO_nom(displayUnit="l/min") = 0.00010666666666667,
              tissues_eta_Rv=settings.tissues_eta_Ra,
              tissues_eta_C=0.2,
              syst_art_UseVasoconstrictionEffect=true,
              veins_UseNonLinearVeins =     true,
              tissues_chi_C=
                           0.2));

          Modelica.Blocks.Logical.Switch switch1
            annotation (Placement(transformation(extent={{10,52},{24,66}})));
          Modelica.Blocks.Sources.BooleanExpression useAutonomousPhi
            annotation (Placement(transformation(extent={{-22,50},{-2,70}})));
          Components.Signals.ConditionalConnection condHeartPhi(disconnectedValue=
               0.25, disconnected=false) annotation (Placement(transformation(
                  extent={{42,37.2592},{54,47.9259}})));
          parameter Modelica.Units.SI.Length speedSegmentLength=
              SystemicComponent.common_carotid_L48_A.l + SystemicComponent.common_carotid_L48_B.l
               + SystemicComponent.common_carotid_L48_C.l + SystemicComponent.common_carotid_L48_D.l
               + SystemicComponent.aortic_arch_C64.l + SystemicComponent.aortic_arch_C94.l
               + SystemicComponent.thoracic_aorta_C96.l + SystemicComponent.thoracic_aorta_C100.l
               + SystemicComponent.thoracic_aorta_C104.l + SystemicComponent.thoracic_aorta_C108.l
               + SystemicComponent.thoracic_aorta_C112.l + SystemicComponent.abdominal_aorta_C114.l
               + SystemicComponent.abdominal_aorta_C136.l + SystemicComponent.abdominal_aorta_C164.l
               + SystemicComponent.abdominal_aorta_C176.l + SystemicComponent.abdominal_aorta_C188.l
               + SystemicComponent.abdominal_aorta_C192.l + SystemicComponent.common_iliac_R216.l
               + SystemicComponent.external_iliac_R220.l + SystemicComponent.femoral_R222.l
            "Distance between carotid_L48 and femoral_R222";

          parameter Modelica.Units.SI.Length aortic_length=SystemicComponent.ascending_aorta_A.l
               + SystemicComponent.ascending_aorta_B.l + SystemicComponent.ascending_aorta_C.l
               + SystemicComponent.ascending_aorta_D.l + SystemicComponent.aortic_arch_C2.l
               + SystemicComponent.aortic_arch_C46.l + SystemicComponent.aortic_arch_C64.l
               + SystemicComponent.aortic_arch_C94.l + SystemicComponent.thoracic_aorta_C96.l
               + SystemicComponent.thoracic_aorta_C100.l + SystemicComponent.thoracic_aorta_C104.l
               + SystemicComponent.thoracic_aorta_C108.l + SystemicComponent.thoracic_aorta_C112.l
               + SystemicComponent.abdominal_aorta_C114.l + SystemicComponent.abdominal_aorta_C136.l
               + SystemicComponent.abdominal_aorta_C164.l + SystemicComponent.abdominal_aorta_C176.l
               + SystemicComponent.abdominal_aorta_C188.l + SystemicComponent.abdominal_aorta_C192.l
            "Length of the whole aorta for comparison to body size";

            parameter Real age = 35 "patient age";
          Modelica.Units.SI.Mass weight;
          Modelica.Units.SI.Height height(start=1.7);
            parameter Real BMI = 25;
          Modelica.Units.SI.Length aortic_length_calc=1/100*(-67.2793 + 0.2487*
              age + 0.5409*(height*100) + 0.3476*BMI)
            "Zemtsovskaja, HT 2019 for male subjects";
          Modelica.Units.SI.Length aortic_length_calc2=1/1000*(-109.7 + 2.9*age
               + 2.5*height*100)
            "Rezai, Blood Press Monit 2013, for male subjects";

          output Physiolibrary.Types.Pressure brachial_pressure=
              SystemicComponent.brachial_L82_HeartLevel.p_C;

        output Physiolibrary.Types.Pressure brachial_pressure_mean(start = 0);
        Real brachial_pressure_int "integration of pressure to find the true mean";
          output Physiolibrary.Types.Pressure renal_capillary=SystemicComponent.renal_L166.p_C;
        equation
          BMI = weight/(height^2);
          aortic_length = aortic_length_calc;

          der(brachial_pressure_int) = brachial_pressure;

          when heartComponent.smithOttesen_VentricularInteraction_flat_.systolicContraction then
            brachial_pressure_mean = pre(brachial_pressure_int)/pre(heartComponent.smithOttesen_VentricularInteraction_flat_.tm);
            reinit(brachial_pressure_int, 0);
          end when;

          connect(switch1.y, condHRPhi.u) annotation (Line(points={{24.7,59},{
                  32.35,59},{32.35,-32},{57.2,-32}},
                                                   color={0,0,127}));
          connect(useAutonomousPhi.y, switch1.u2) annotation (Line(points={{-1,60},
                  {4,60},{4,59},{8.6,59}}, color={255,0,255}));
          connect(SystemicComponent.phi_baroreflex, switch1.u1) annotation (
              Line(points={{-27.4,45.4},{-27.4,72},{4,72},{4,64.6},{8.6,64.6}},
                color={0,0,127}));
          connect(condSystemicPhi.u, condHRPhi.u) annotation (Line(points={{57.2,20},
                  {57.2,36},{30,36},{30,59},{32.35,59},{32.35,-32},{57.2,-32}},
                             color={0,0,127}));
          connect(heartComponent.phi, condHeartPhi.y) annotation (Line(points={{-16,-16},
                  {60,-16},{60,42},{54.6,42}},          color={0,0,127}));
          connect(condHeartPhi.u, condHRPhi.u) annotation (Line(points={{40.8,42},
                  {34,42},{34,-32},{57.2,-32}},   color={0,0,127}));
          connect(phi_fixed.y, switch1.u3) annotation (Line(points={{-35,84},{
                  -38,84},{-38,53.4},{8.6,53.4}},
                                             color={0,0,127}));
          annotation (experiment(
              StopTime=30,
              Interval=0.01,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"),
                      experiment(
              StopTime=60,
              Interval=0.02,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end SmithOlufsenMynard_base;

        model OlufsenTriSeg_baroTs15
          extends Obsolete.OlufsenTriSeg_base(
                                     settings(baro_tau_s(
                                                      displayUnit="s") = 15));
        end OlufsenTriSeg_baroTs15;

        model OlufsenTriSeg_baroTs60
          extends Obsolete.OlufsenTriSeg_base(
                                     settings(baro_tau_s(
                                                      displayUnit="s") = 60));
          annotation (experiment(
              StopTime=1200,
              Interval=0.04,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode"));
        end OlufsenTriSeg_baroTs60;

        model OlufsenTriSeg_baroInitTs15
          extends Obsolete.OlufsenTriSeg_base(SystemicComponent(
                baroreflex_system(baroreceptor_carotid(epsilon(start=1.19)),
                  baroreceptor_aortic(epsilon(start=1.59)))), settings(
                baro_tau_s(displayUnit="s") = 60));
        end OlufsenTriSeg_baroInitTs15;

        model OlufsenTriSeg_baroInitTs60
          extends Obsolete.OlufsenTriSeg_base(SystemicComponent(
                baroreflex_system(baroreceptor_carotid(epsilon(start=1.19)),
                  baroreceptor_aortic(epsilon(start=1.59)))), settings(
                baro_tau_s(displayUnit="s") = 60));
        end OlufsenTriSeg_baroInitTs60;

        model OTS_O_SS_I_NonLInearPR "Nonlinear pulmonary resistance"
          extends
            Identification.SteadyState.OlufsenTriSeg_optimized_steadyState_init(
                                                           redeclare
              Components.Subsystems.Pulmonary.PulmonaryTriSeg_NonLinear
              pulmonaryComponent(UseThoracic_PressureInput=true));

          Physiolibrary.Types.Pressure PAavg(start = 14*133);
          Physiolibrary.Types.Pressure PVavg(start = 5*133);
          parameter Modelica.Units.SI.Time tau=10;
        equation
          tau*der(PAavg) = pulmonaryComponent.c_pa.q_in.pressure - PAavg;
          tau*der(PVavg) = pulmonaryComponent.c_pv.q_in.pressure - PVavg;
        end OTS_O_SS_I_NonLInearPR;

        model adenosine
          extends
            Identification.SteadyState.OlufsenTriSeg_optimized_steadyState_init(
            SystemicComponent(UseAdenosineInput=true),
            pulmonaryComponent(UseAdenosineInput=true),
            settings(eta_adenosine=1));
        replaceable Modelica.Blocks.Sources.Trapezoid adenosine(
            startTime=20,
            amplitude=1,
            rising=20,
            width=20,
            falling=1,
            period=200,
            nperiod=1,
            offset=0) constrainedby Modelica.Blocks.Sources.Trapezoid
            annotation (Placement(transformation(extent={{-102,26},{-82,46}})));
            Physiolibrary.Types.HydraulicResistance tsr = (heartComponent.aorticValve.q_out.pressure - heartComponent.tricuspidValve.q_in.pressure)/max(CO, 1e-6) "Total systemic resistance";
            Physiolibrary.Types.HydraulicResistance tpr = (heartComponent.pulmonaryValve.q_out.pressure - heartComponent.mitralValve.q_in.pressure)/max(CO, 1e-6) "Total systemic resistance";

        equation
          connect(adenosine.y, SystemicComponent.adenosineInput) annotation (
              Line(points={{-81,36},{-70,36},{-70,32},{-58,32}}, color={0,0,127}));
          connect(adenosine.y, pulmonaryComponent.adenosine)
            annotation (Line(points={{-81,36},{-81,-48},{-34,-48}}, color={0,0,127}));
        end adenosine;

        model CVS_venousViscoElasticity
          extends CVS_baseline(settings(veins_ignoreViscosityResistance=true));
          annotation (experiment(
              Interval=0.02,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end CVS_venousViscoElasticity;

        model CardiovascularSystem "Experimental maunua; tuning setings"
          extends Obsolete.partialCVS_ss(
            condHRPhi(delayIntegral_Enabled=
                                   false),
            condHeartPhi(delayIntegral_Enabled=
                                      false),
            condSystemicPhi(delayIntegral_Enabled=
                                         false),
            settings(
              heart_atr_D_A(displayUnit="Pa/m3"),
              pulm_C_PV=3.0002463033826e-07,
              pulm_P_PV_nom=1333.22387415,
              pulm_R(displayUnit="(dyn.s)/cm5"),
              pulm_PV_R_vis(displayUnit="(dyn.s)/cm5"),
              heart_atr_D_0(      displayUnit="1") = 0.5902815*16803550,
              heart_vntr_D_0_maxAct( displayUnit="1") = 0,
              heart_vntr_D_0( displayUnit="1") = 0.025*1.5*7.5*120,
              heart_vntr_D_A( displayUnit="Pa/m3") = 1.5*7.5*120,
              heart_vntr_D_A_maxAct( displayUnit="Pa/m3") = 16*7.5*120));
          annotation (__Dymola_Commands(file(ensureSimulated=true)=
                "\"EvaluateSimulation.mos\"" "EvaluateUseCases"));
        end CardiovascularSystem;

        package HeartChars "Experimenting with the Starling curve"
          model Starling_base
            extends CVS_baseline(useAutonomousPhi(y=false), SystemicComponent(
                  ascending_aorta_A(
                    q(start=2.0773978e-06, fixed=false),
                    vol1(start=8.6253085e-06, fixed=false),
                    vol2(start=8.624841e-06, fixed=true))));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume constantArteries(P=
                  13332.2387415)
              annotation (Placement(transformation(extent={{-100,18},{-80,38}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedVolume constantVeins(P=
                  5332.8954966)
              annotation (Placement(transformation(extent={{48,18},{28,38}})));
          equation
            connect(constantVeins.y, SystemicComponent.port_b) annotation (Line(
                points={{28,28},{18,28}},
                color={0,0,0},
                thickness=1));
            connect(constantArteries.y, SystemicComponent.port_a) annotation (
                Line(
                points={{-80,28},{-58,28}},
                color={0,0,0},
                thickness=1));
            annotation (experiment(
                StopTime=30,
                Interval=0.01,
                Tolerance=1e-07,
                __Dymola_Algorithm="Cvode"));
          end Starling_base;
        end HeartChars;

        model StiffeningBaroreceptors "Only baroreceptors are stiffened"
          extends CVS_baseline_fastBaro(SystemicComponent(
              systemicParameters(
                  E_aortic_arch_C46=0.4e+6*settings.syst_art_k_E*stiffeningCoeff,
                  E_internal_carotid_R8_A=0.8e+6*settings.syst_art_k_E*stiffeningCoeff)));

        parameter Physiolibrary.Types.Fraction stiffeningCoeff = 2;

          annotation (experiment(
              StopTime=360,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end StiffeningBaroreceptors;

        model StiffeningDistalA "Only some of the distal arteries are stiffened - only leaves one, directly connected to tissues"
          extends CVS_baseline_fastBaro(SystemicComponent(
              internal_carotid_R8_B(                  E=SystemicComponent.systemicParameters.E_internal_carotid_R8_B*stiffeningCoeff),
              coronary_arteries(                  E=4e5*stiffeningCoeff),
              mesenteric_artery(                  E=4.00E+05*stiffeningCoeff),
              tibiofibular_trunk_R234(                  E=SystemicComponent.systemicParameters.E_tibiofibular_trunk_R234*stiffeningCoeff),
              tibiofibular_trunk_L212(                  E=SystemicComponent.systemicParameters.E_tibiofibular_trunk_L212*stiffeningCoeff)));

              parameter Physiolibrary.Types.Fraction stiffeningCoeff = 2;
          annotation (experiment(
              StopTime=360,
              Interval=0.08,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end StiffeningDistalA;

        model StiffeningArteriesButBaroreceptors
          "All arteries are are stiffened, except for baroreceptors"
          extends CVS_baseline_fastBaro(SystemicComponent(
              systemicParameters(
                  E_aortic_arch_C46=0.4e+6*settings.syst_art_k_E*stiffeningCoeff,
                  E_internal_carotid_R8_A=0.8e+6*settings.syst_art_k_E*stiffeningCoeff)),
              settings(syst_art_k_E=0.8));

        parameter Physiolibrary.Types.Fraction stiffeningCoeff = 0.5;

          annotation (experiment(
              StopTime=360,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end StiffeningArteriesButBaroreceptors;

        model StiffeningArteriesButBaroreceptors_noBaro "Just to check isolated effect of the stiffening, to make sure the stiffening just didnt squeeze the volume more, creating hypertension"
          extends StiffeningArteriesButBaroreceptors(useAutonomousPhi(y=false));
        end StiffeningArteriesButBaroreceptors_noBaro;

        model CVS_VolOverload "Volume overload test"
          extends ADAN_main.SystemicTree.Identification.Results.CVS_EDPVR(
                                                            settings(V_PV_init=-0.0003),
              useAutonomousPhi(y=false));
          Physiolibrary.Hydraulic.Sources.UnlimitedPump
                                                  unlimitedPump(useSolutionFlowInput=true,
              SolutionFlow(displayUnit="ml/min") = 1e-06)
            annotation (Placement(transformation(extent={{-122,2},{-102,22}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump1(
              useSolutionFlowInput=true) annotation (Placement(transformation(
                  extent={{-122,-22},{-102,-2}})));
          Physiolibrary.Hydraulic.Components.ElasticVessel addedVolume
            annotation (Placement(transformation(extent={{-98,-22},{-78,-2}})));
          Physiolibrary.Hydraulic.Sensors.FlowMeasure flowMeasure
            annotation (Placement(transformation(extent={{-94,22},{-74,2}})));
        Modelica.Blocks.Sources.Ramp volumeInfusionRamp(
            height=20e-6,
            duration=0,
            offset=0,
            startTime=10)
            "Phi for when the model is not using the autonomous feedback phi from baroreflex"
            annotation (Placement(transformation(extent={{-142,22},{-122,42}})));
          Components.Subsystems.Heart.Data.EDPVRnorm
                         EDPVRnorm_V(
            V_m=0.00015,
            P_m=799.93432449,
            useVolumeInput=true)
            annotation (Placement(transformation(extent={{10,-96},{30,-76}})));
          Modelica.Blocks.Sources.RealExpression Volume_LV(y=V_LV)
            annotation (Placement(transformation(extent={{-62,-98},{-42,-78}})));
        equation
          connect(addedVolume.q_in,unlimitedPump1. q_out) annotation (Line(
              points={{-88,-12},{-102,-12}},
              color={0,0,0},
              thickness=1));
          connect(unlimitedPump.q_out,flowMeasure. q_in) annotation (Line(
              points={{-102,12},{-94,12}},
              color={0,0,0},
              thickness=1));
          connect(flowMeasure.volumeFlow,unlimitedPump1. solutionFlow)
            annotation (Line(points={{-84,0},{-112,0},{-112,-5}},      color={0,
                  0,127}));
          connect(flowMeasure.q_out, heartComponent.sv) annotation (Line(
              points={{-74,12},{24,12},{24,-16.4},{-16,-16.4}},
              color={0,0,0},
              thickness=1));
          connect(volumeInfusionRamp.y,unlimitedPump. solutionFlow) annotation (
             Line(points={{-121,32},{-112,32},{-112,19}}, color={0,0,127}));
          connect(Volume_LV.y,EDPVRnorm_V. volume) annotation (Line(points={{-41,-88},
                  {-26,-88},{-26,-90},{10,-90},{10,-92}},
                                                   color={0,0,127}));
        end CVS_VolOverload;

        model CVS_StepVolumeOverload "Step-up volume overload test"
          extends ADAN_main.SystemicTree.Identification.Results.CVS_EDPVR(
                                                            settings(V_PV_init=
                  -0.0003), useAutonomousPhi(y=false));
          Physiolibrary.Hydraulic.Sources.UnlimitedPump
                                                  unlimitedPump(useSolutionFlowInput=true,
              SolutionFlow(displayUnit="ml/min") = 1e-06)
            annotation (Placement(transformation(extent={{-122,2},{-102,22}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump1(
              useSolutionFlowInput=true) annotation (Placement(transformation(
                  extent={{-122,-22},{-102,-2}})));
          Physiolibrary.Hydraulic.Components.ElasticVessel addedVolume
            annotation (Placement(transformation(extent={{-98,-22},{-78,-2}})));
          Physiolibrary.Hydraulic.Sensors.FlowMeasure flowMeasure
            annotation (Placement(transformation(extent={{-94,22},{-74,2}})));
        Modelica.Blocks.Sources.Pulse volumeInfusionRamp(
            amplitude=30e-6,
            width=100/3,
            period=30,
            offset=0,
            startTime=20)
            "Inject volume for 10s every 40s to reach steady state"
            annotation (Placement(transformation(extent={{-142,22},{-122,42}})));
          Components.Subsystems.Heart.Data.EDPVRnorm
                         EDPVRnorm_V(
            V_m=0.00015,
            P_m=799.93432449,
            useVolumeInput=true)
            annotation (Placement(transformation(extent={{10,-90},{30,-70}})));
          Modelica.Blocks.Sources.RealExpression Volume_LV(y=V_LV)
            annotation (Placement(transformation(extent={{-62,-92},{-42,-72}})));
        equation
          connect(addedVolume.q_in,unlimitedPump1. q_out) annotation (Line(
              points={{-88,-12},{-102,-12}},
              color={0,0,0},
              thickness=1));
          connect(unlimitedPump.q_out,flowMeasure. q_in) annotation (Line(
              points={{-102,12},{-94,12}},
              color={0,0,0},
              thickness=1));
          connect(flowMeasure.volumeFlow,unlimitedPump1. solutionFlow)
            annotation (Line(points={{-84,0},{-112,0},{-112,-5}},      color={0,
                  0,127}));
          connect(flowMeasure.q_out, heartComponent.sv) annotation (Line(
              points={{-74,12},{24,12},{24,-16.4},{-16,-16.4}},
              color={0,0,0},
              thickness=1));
          connect(volumeInfusionRamp.y,unlimitedPump. solutionFlow) annotation (
             Line(points={{-121,32},{-112,32},{-112,19}}, color={0,0,127}));
          connect(Volume_LV.y,EDPVRnorm_V. volume) annotation (Line(points={{-41,-82},
                  {-26,-82},{-26,-84},{10,-84},{10,-86}},
                                                   color={0,0,127}));
        end CVS_StepVolumeOverload;

        model CVS_baseline_longbaro "With long-term baroreflex control"
          extends CVS_baseline(
            SystemicComponent(redeclare
                Components.Subsystems.Baroreflex.Baroreflex_Longterm
                baroreflex_system(beat=heartComponent.sa_node.beat)),
            useAutonomousPhi(y=true),
            settings(V_PV_init=0),
            pulmonaryComponent(deadVolume=0));
        end CVS_baseline_longbaro;
      end Experiments;

      model CVS_baseline "Just a baseline wrapper"
        import ADAN_main;
        extends ADAN_main.SystemicTree.CardiovascularSystem(useAutonomousPhi(y=true));
      //   (
      //     heartComponent(valveInertia_Mitral(enabled=false)),
      //     settings(heart_vntr_TS=0.1, heart_atr_TS=0.08),
      //     useAutonomousPhi(y=false));
      //   (settings(heart_I_A(displayUnit="Pa.s2/m3"),
      //                                         baro_tau_s(displayUnit="s") = 30),
      //       useAutonomousPhi(y=false));
        annotation (experiment(
            StopTime=10,
            Interval=0.01,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"),
          __OpenModelica_simulationFlags(lv = "LOG_STATS", s = "cvode"));
      end CVS_baseline;

      model CVS_baseline_fastBaro
        extends CVS_baseline(settings(baro_tau_s=10));
        annotation (experiment(
            StopTime=360,
            Interval=0.08,
            Tolerance=1e-07,
            __Dymola_Algorithm="Cvode"));
      end CVS_baseline_fastBaro;

      model test
        extends CVS_baseline(useAutonomousPhi(y=false), heartComponent(
            la(zpv=0),
            resistor1(enable=true),
            valveInertia_Mitral(enabled=false)));
        Components.Subsystems.Heart.Data.EDPVRnorm
                       EDPVRnorm_V(
          V_m=0.00015,
          P_m=799.93432449,
          useVolumeInput=true)
          annotation (Placement(transformation(extent={{46,-80},{66,-60}})));
        Modelica.Blocks.Sources.RealExpression    useAutonomousPhi1(y=
              heartComponent.ventricles.V_LV)
          annotation (Placement(transformation(extent={{-2,-86},{18,-66}})));
      equation
        connect(useAutonomousPhi1.y, EDPVRnorm_V.volume)
          annotation (Line(points={{19,-76},{46,-76}}, color={0,0,127}));
        annotation (experiment(
            StopTime=20,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end test;

      model CVS_baseline_overload
        extends CVS_baseline(settings(V_PV_init=0.001, baro_tau_s=10),
            useAutonomousPhi(y=true));
      end CVS_baseline_overload;

      model CVS_baseline_overload1000_ss
        "Steady state initialization from 2021-10-27 11:28:27.407032 at time 600.0 with 1000ml extra"
        extends ADAN_main.SystemicTree.Baseline.CVS_baseline(
            SystemicComponent(
              baroreflex_system(
                baroreflex(phi_mean(start = 0.23823488, fixed = true), phi(start = 0.23346418, fixed = true)),
                baroreceptor_aortic(fbr_int(start = 15.80869, fixed = true), epsilon(start = 1.5634519, fixed = true), s(start = 0.7958721, fixed = true)),
                baroreceptor_carotid(fbr_int(start = 8.679776, fixed = true), epsilon(start = 1.1840785, fixed = true), s(start = 0.88622874, fixed = true))),
              ascending_aorta_A(q(start = 1.7393414e-07, fixed = true), vol1(start = 9.281159e-06, fixed = true), vol2(start = 9.280859e-06, fixed = true)),
              ascending_aorta_B(q_in(start = 3.770561e-07, fixed = true), volume(start = 2.7372915e-05, fixed = true)),
              ascending_aorta_C(q_in(start = -2.9852044e-06, fixed = true), volume(start = 2.5311621e-05, fixed = true)),
              ascending_aorta_D(q_in(start = -2.627967e-06, fixed = true), volume(start = 2.3101442e-05, fixed = true)),
              aortic_arch_C2(q_in(start = -2.1385172e-06, fixed = true), volume(start = 2.1127351e-05, fixed = true)),
              brachiocephalic_trunk_C4(q_in(start = 1.7015434e-05, fixed = true), volume(start = 1.4266266e-05, fixed = true)),
              aortic_arch_C46(q_in(start = -1.8511992e-05, fixed = true), volume(start = 1.2516756e-05, fixed = true)),
              aortic_arch_C64(q_in(start = -2.8352417e-05, fixed = true), volume(start = 8.592534e-06, fixed = true)),
              aortic_arch_C94(q_in(start = -3.131424e-05, fixed = true), volume(start = 4.715925e-05, fixed = true)),
              thoracic_aorta_C96(q_in(start = -2.3851873e-05, fixed = true), volume(start = 8.46722e-06, fixed = true)),
              thoracic_aorta_C100(q_in(start = -2.232986e-05, fixed = true), volume(start = 6.5127347e-06, fixed = true)),
              thoracic_aorta_C104(q_in(start = -2.1044534e-05, fixed = true), volume(start = 1.2270986e-05, fixed = true)),
              thoracic_aorta_C108(q_in(start = -1.8194552e-05, fixed = true), volume(start = 4.0308823e-06, fixed = true)),
              thoracic_aorta_C112(q_in(start = -1.721341e-05, fixed = true), volume(start = 6.601576e-05, fixed = true)),
              abdominal_aorta_C114(q_in(start = 2.1424703e-05, fixed = true), volume(start = 1.3635234e-06, fixed = true)),
              abdominal_aorta_C136(q_in(start = 8.257268e-06, fixed = true), volume(start = 5.728326e-06, fixed = true)),
              abdominal_aorta_C164(q_in(start = 4.4370427e-06, fixed = true), volume(start = 1.7007108e-06, fixed = true)),
              abdominal_aorta_C176(q_in(start = -7.0932906e-06, fixed = true), volume(start = 4.577273e-06, fixed = true)),
              abdominal_aorta_C188(q_in(start = -1.6511092e-05, fixed = true), volume(start = 1.8402841e-05, fixed = true)),
              abdominal_aorta_C192(q_in(start = -9.419583e-07, fixed = true), volume(start = 1.1508994e-05, fixed = true)),
              celiac_trunk_C116(volume(start = 0.00036613186, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              renal_L166(volume(start = 0.0003307233, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              renal_R178(volume(start = 0.00032776565, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              common_iliac_R216(q_in(start = 4.8119787e-06, fixed = true), volume(start = 9.629399e-06, fixed = true)),
              internal_iliac_T1_R218(volume(start = 0.00017997714, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              external_iliac_R220(q_in(start = 7.3500187e-06, fixed = true), volume(start = 5.358218e-06, fixed = true)),
              femoral_R222(q_in(start = 1.0493416e-05, fixed = true), volume(start = 1.539662e-06, fixed = true)),
              profundus_T2_R224(volume(start = 0.00020644712, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              femoral_R226(q_in(start = 2.201221e-06, fixed = true), volume(start = 1.354313e-05, fixed = true)),
              popliteal_R228(q_in(start = 3.2872604e-06, fixed = true), volume(start = 4.1603153e-06, fixed = true)),
              anterior_tibial_T3_R230(volume(start = 2.687748e-05, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              popliteal_R232(q_in(start = 1.7086044e-06, fixed = true), volume(start = 1.9795772e-07, fixed = true)),
              tibiofibular_trunk_R234(q_in(start = 1.7062551e-06, fixed = true), volume(start = 8.047465e-07, fixed = true)),
              posterior_tibial_T4_R236(volume(start = 2.9523935e-05, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              common_iliac_L194(q_in(start = 5.194e-06, fixed = true), volume(start = 9.20411e-06, fixed = true)),
              internal_iliac_T1_L196(volume(start = 0.00017997636, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              external_iliac_L198(q_in(start = 7.2333746e-06, fixed = true), volume(start = 5.356564e-06, fixed = true)),
              femoral_L200(q_in(start = 1.0372296e-05, fixed = true), volume(start = 1.5391765e-06, fixed = true)),
              profundus_T2_L202(volume(start = 0.00020644629, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              femoral_L204(q_in(start = 2.0904663e-06, fixed = true), volume(start = 1.3538179e-05, fixed = true)),
              popliteal_L206(q_in(start = 3.2550454e-06, fixed = true), volume(start = 4.158863e-06, fixed = true)),
              anterior_tibial_T3_L208(volume(start = 2.6877595e-05, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              popliteal_L210(q_in(start = 1.7028657e-06, fixed = true), volume(start = 1.9791632e-07, fixed = true)),
              tibiofibular_trunk_L212(q_in(start = 1.7012111e-06, fixed = true), volume(start = 8.0460387e-07, fixed = true)),
              posterior_tibial_T4_L214(volume(start = 2.952404e-05, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              subclavian_R28(q_in(start = 4.4224976e-06, fixed = true), volume(start = 2.1758005e-06, fixed = true)),
              subclavian_R30(q_in(start = 1.5122764e-06, fixed = true), volume(start = 2.836213e-06, fixed = true)),
              axillary_R32(q_in(start = 1.2397903e-06, fixed = true), volume(start = 3.2100136e-06, fixed = true)),
              brachial_R34(q_in(start = 1.3331953e-06, fixed = true), volume(start = 4.6628948e-06, fixed = true)),
              ulnar_T2_R36(q_in(start = 2.1055102e-06, fixed = true), volume(start = 2.4354753e-07, fixed = true)),
              ulnar_T2_R42(volume(start = 6.2040854e-05, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              radial_T1_R44(volume(start = 5.060521e-05, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              subclavian_L66(q_in(start = 3.4703514e-06, fixed = true), volume(start = 5.1680136e-06, fixed = true)),
              subclavian_L78(q_in(start = 1.1088591e-06, fixed = true), volume(start = 2.1013868e-06, fixed = true)),
              axillary_L80(q_in(start = 1.2546791e-06, fixed = true), volume(start = 3.208875e-06, fixed = true)),
              brachial_L82(q_in(start = 3.100791e-06, fixed = true), volume(start = 1.5435744e-06, fixed = true)),
              ulnar_T2_L84(q_in(start = 2.0711243e-06, fixed = true), volume(start = 2.427704e-07, fixed = true)),
              ulnar_T2_L90(volume(start = 6.20336e-05, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              radial_T1_L92(volume(start = 5.361751e-05, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              common_carotid_R6_A(q_in(start = 1.1107156e-05, fixed = true), volume(start = 5.4708657e-06, fixed = true)),
              common_carotid_R6_B(q_in(start = 9.649286e-06, fixed = true), volume(start = 4.660199e-06, fixed = true)),
              common_carotid_R6_C(q_in(start = 7.887077e-06, fixed = true), volume(start = 3.4730735e-06, fixed = true)),
              internal_carotid_R8_A(q_in(start = 3.3967845e-06, fixed = true), volume(start = 1.3060342e-06, fixed = true)),
              internal_carotid_R8_B(q_in(start = 3.0985263e-06, fixed = true), volume(start = 8.2432365e-07, fixed = true)),
              internal_carotid_R8_C(volume(start = 7.3665564e-05, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              external_carotid_T2_R26(volume(start = 7.3819916e-05, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              common_carotid_L48_A(q_in(start = 1.0400976e-05, fixed = true), volume(start = 5.926938e-06, fixed = true)),
              common_carotid_L48_B(q_in(start = 9.936828e-06, fixed = true), volume(start = 5.193236e-06, fixed = true)),
              common_carotid_L48_C(q_in(start = 8.8945135e-06, fixed = true), volume(start = 4.5996517e-06, fixed = true)),
              common_carotid_L48_D(q_in(start = 7.522276e-06, fixed = true), volume(start = 3.7141856e-06, fixed = true)),
              internal_carotid_L50_A(q_in(start = 3.2724306e-06, fixed = true), volume(start = 1.305309e-06, fixed = true)),
              internal_carotid_L50_B(q_in(start = 3.040109e-06, fixed = true), volume(start = 8.239432e-07, fixed = true)),
              internal_carotid_L50_C(volume(start = 7.367777e-05, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              external_carotid_T2_L62(volume(start = 7.3828465e-05, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              vertebral_L2(volume(start = 6.790056e-05, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              vertebral_R272(volume(start = 6.789274e-05, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              superior_vena_cava_C2(volume(start = 6.8775375e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              superior_vena_cava_C88(volume(start = 1.1851321e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              inferior_vena_cava_C8(volume(start = 1.03144e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              hepatic_vein_T1_C10(volume(start = 4.0439136e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              inferior_vena_cava_C12(volume(start = 2.7981345e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              inferior_vena_cava_C16(volume(start = 2.20017e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              renal_vein_T1_R18(volume(start = 6.4822907e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              inferior_vena_cava_C20(volume(start = 1.5349793e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              renal_vein_T1_L22(volume(start = 5.7273887e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              inferior_vena_cava_C24(volume(start = 6.1208055e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              common_iliac_vein_L56(volume(start = 1.484907e-05, fixed = true), open(start = false, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              common_iliac_vein_R26(volume(start = 1.3651375e-05, fixed = true), open(start = false, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              external_iliac_vein_R28(volume(start = 1.9909307e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              internal_iliac_vein_T1_R30(volume(start = 8.514523e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              external_iliac_vein_R32(volume(start = 2.308819e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              femoral_vein_R34(volume(start = 1.0036456e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              femoral_vein_R38(volume(start = 7.954637e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              profunda_femoris_vein_T2_R40(volume(start = 2.1975291e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              femoral_vein_R42(volume(start = 5.6212106e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              femoral_vein_R46(volume(start = 3.0957417e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              popliteal_vein_R48(volume(start = 1.2588166e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              anterior_tibial_vein_T4_R50(volume(start = 3.293922e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              popliteal_vein_R52(volume(start = 2.8000018e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              posterior_tibial_vein_T6_R54(volume(start = 5.314086e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              external_iliac_vein_L58(volume(start = 1.993015e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              internal_iliac_vein_T1_L60(volume(start = 8.756037e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              external_iliac_vein_L62(volume(start = 2.2663047e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              femoral_vein_L64(volume(start = 1.1731232e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              femoral_vein_L68(volume(start = 7.953277e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              profunda_femoris_vein_T2_L70(volume(start = 2.1971655e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              femoral_vein_L72(volume(start = 5.620281e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              femoral_vein_L76(volume(start = 3.095211e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              popliteal_vein_L78(volume(start = 1.2586142e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              anterior_tibial_vein_T4_L80(volume(start = 3.2938003e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              popliteal_vein_L82(volume(start = 2.79957e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              posterior_tibial_vein_T6_L84(volume(start = 5.3135996e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              brachiocephalic_vein_R90(volume(start = 1.3737996e-05, fixed = true), open(start = false, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              brachiocephalic_vein_L124(volume(start = 2.5821031e-05, fixed = true), open(start = false, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              vertebral_vein_R92(volume(start = 8.6085565e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              brachiocephalic_vein_R94(volume(start = 3.1143916e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              subclavian_vein_R96(volume(start = 1.514313e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              internal_jugular_vein_R122(volume(start = 5.9846578e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              external_jugular_vein_R98(volume(start = 4.1808944e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              subclavian_vein_R100(volume(start = 6.1930996e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              axillary_vein_R102(volume(start = 2.1760512e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              brachial_vein_R104(volume(start = 4.2041142e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              brachial_vein_R114(volume(start = 3.7699426e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              brachial_vein_R108(volume(start = 5.797084e-07, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              ulnar_vein_T7_R110(volume(start = 4.7079866e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              brachial_vein_R118(volume(start = 3.637111e-07, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              radial_vein_T3_R120(volume(start = 2.8677619e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              vertebral_vein_L126(volume(start = 8.07389e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              brachiocephalic_vein_L128(volume(start = 1.5784995e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              subclavian_vein_L130(volume(start = 1.3506019e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              internal_jugular_vein_L156(volume(start = 3.643059e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              external_jugular_vein_L132(volume(start = 4.1109147e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              subclavian_vein_L134(volume(start = 6.053409e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              axillary_vein_L136(volume(start = 2.2071843e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              brachial_vein_L138(volume(start = 4.212866e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              brachial_vein_L148(volume(start = 3.7811096e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              brachial_vein_L142(volume(start = 5.8087585e-07, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              ulnar_vein_T7_L144(volume(start = 4.7136537e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              brachial_vein_L152(volume(start = 3.6479614e-07, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              radial_vein_T3_L154(volume(start = 2.8776758e-06, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              mesenteric_artery(q_in(start = 7.4399286e-06, fixed = true), volume(start = 6.821275e-06, fixed = true)),
              splanchnic_tissue(volume(start = 0.00026563674, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              splanchnic_vein(volume(start = 3.3693e-05, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              coronary_arteries(q_in(start = 3.618823e-06, fixed = true), volume(start = 3.818523e-08, fixed = true)),
              cardiac_tissue(volume(start = 0.00011910262, fixed = true), phi_delayed(start = 0.24255158, fixed = true)),
              coronary_veins(volume(start = 6.4563466e-08, fixed = true),
                compliant_vessel(A(start = 0.041830227, fixed = false))),
              brachial_L82_HeartLevel(q_in(start = 1.7312258e-06, fixed = true), volume(start = 3.1113907e-06, fixed = true))),
            heartComponent(
              tricuspidValve(open(start = false, fixed = true)),
              pulmonaryValve(open(start = false, fixed = true), BP_max(start = 0.0, fixed = true), BP_min(start = 26600.0, fixed = true), CO_acc(start = 0.0, fixed = true)),
              mitralValve(open(start = false, fixed = true), BP_max(start = 2723.0376, fixed = true), BP_min(start = 2731.1199, fixed = true), CO_acc(start = 1.4705531e-05, fixed = true)),
              aorticValve(open(start = false, fixed = true), BP_max(start = 16125.167, fixed = true), BP_min(start = 12381.934, fixed = true), CO_acc(start = 0.00010219132, fixed = true)),
              ventricles(
                LV_wall(ym(start = 3.1647348, fixed = true), SL(start = 1.8811996, fixed = true)),
                SEP_wall(SL(start = 1.8946309, fixed = true)),
                RV_wall(SL(start = 1.9972645, fixed = true)), V_LV(start = 8.067748e-05, fixed = true), V_RV(start = 0.00011281565, fixed = true), currentWork_LV(start = 1.567997, fixed = true), currentWork_RV(start = 0.36658227, fixed = true)),
              ra(volume(start = 4.7160956e-05, fixed = true), currentWork(start = 7.27619, fixed = true)),
              la(volume(start = 8.335156e-05, fixed = true), currentWork(start = -20.373621, fixed = true)),
              idealValve_deactivable(open(start = true, fixed = true)),
              idealValve_deactivable1(open(start = true, fixed = true)),
              sa_node(cardiac_cycle(start = 0.6906921, fixed = true))),
            pulmonaryComponent(
              c_pa(volume(start = 4.579632e-05, fixed = true)),
              c_pv(volume(start = 7.110034e-04 + settings.V_PV_init, fixed = true))),
            settings(V_PV_init = 0));
        annotation (conversion(noneFromVersion=""));
      end CVS_baseline_overload1000_ss;
    end Baseline;

    package Tilt
      package Experiments
        model OlufsenTriseg_tiltable_reparam
          extends CVS_tiltable(           settings(
              tissues_gamma=0.5,
              eta_vc=
                   0.5,
              tissues_eta_Ra=
                        4.2625,
              tissues_eta_C =             0.2));
        end OlufsenTriseg_tiltable_reparam;

        model OptimizedExercise_tiltable
          extends
            ADAN_main.SystemicTree.Exercise.Experiments.base_Exercise_SimpleCa_maxSV(
            SystemicComponent(
              redeclare
                ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.vv_artery_thoracic_leveled
                ascending_aorta_A(sinAlpha=1),
              ascending_aorta_B(sinAlpha=1),
              ascending_aorta_C(sinAlpha=1),
              ascending_aorta_D(sinAlpha=1),
              aortic_arch_C2(sinAlpha=1),
              aortic_arch_C46(sinAlpha=1),
              aortic_arch_C64(sinAlpha=1),
              common_carotid_R6_A(sinAlpha=1),
              common_carotid_R6_B(sinAlpha=1),
              common_carotid_R6_C(sinAlpha=1),
              internal_carotid_R8_A(sinAlpha=1),
              internal_carotid_R8_B(sinAlpha=1),
              common_carotid_L48_A(sinAlpha=1),
              common_carotid_L48_B(sinAlpha=1),
              common_carotid_L48_C(sinAlpha=1),
              common_carotid_L48_D(sinAlpha=1),
              internal_carotid_L50_A(sinAlpha=1),
              internal_carotid_L50_B(sinAlpha=1),
              brachial_L82(sinAlpha=-1),
              ulnar_T2_L84(sinAlpha=-1),
              brachial_R34(sinAlpha=-1),
              ulnar_T2_R36(sinAlpha=-1),
              vertebral_vein_L126(sinAlpha=-1),
              brachial_vein_L138(sinAlpha=1),
              brachial_vein_L142(sinAlpha=1),
              ulnar_vein_T7_L144(sinAlpha=1),
              brachial_vein_L152(sinAlpha=1),
              radial_vein_T3_L154(sinAlpha=1),
              brachial_vein_R104(sinAlpha=1),
              brachial_vein_R114(sinAlpha=1),
              brachial_vein_R108(sinAlpha=1),
              ulnar_vein_T7_R110(sinAlpha=1),
              brachial_vein_R118(sinAlpha=1),
              radial_vein_T3_R120(sinAlpha=1),
              brachial_vein_L148(sinAlpha=1),
              superior_vena_cava_C2(sinAlpha=-1),
              superior_vena_cava_C88(sinAlpha=-1),
              brachiocephalic_vein_R90(sinAlpha=-1),
              brachiocephalic_vein_R94(sinAlpha=-1),
              brachiocephalic_vein_L128(sinAlpha=-1),
              brachiocephalic_vein_L124(sinAlpha=-1),
              internal_jugular_vein_R122(sinAlpha=-1),
              external_jugular_vein_R98(sinAlpha=-1),
              thoracic_aorta_C96(sinAlpha=-1),
              thoracic_aorta_C100(sinAlpha=-1),
              thoracic_aorta_C104(sinAlpha=-1),
              thoracic_aorta_C108(sinAlpha=-1),
              thoracic_aorta_C112(sinAlpha=-1),
              aortic_arch_C94(sinAlpha=-1),
              vertebral_vein_R92(sinAlpha=-1),
              internal_jugular_vein_L156(sinAlpha=-1),
              external_jugular_vein_L132(sinAlpha=-1),
              abdominal_aorta_C114(sinAlpha=-1),
              abdominal_aorta_C136(sinAlpha=-1),
              abdominal_aorta_C164(sinAlpha=-1),
              abdominal_aorta_C176(sinAlpha=-1),
              abdominal_aorta_C188(sinAlpha=-1),
              abdominal_aorta_C192(sinAlpha=-1),
              common_iliac_R216(sinAlpha=-1),
              external_iliac_R220(sinAlpha=-1),
              femoral_R222(sinAlpha=-1),
              common_iliac_L194(sinAlpha=-1),
              external_iliac_L198(sinAlpha=-1),
              femoral_L200(sinAlpha=-1),
              femoral_R226(sinAlpha=-1),
              popliteal_R228(sinAlpha=-1),
              popliteal_R232(sinAlpha=-1),
              tibiofibular_trunk_R234(sinAlpha=-1),
              femoral_L204(sinAlpha=-1),
              popliteal_L206(sinAlpha=-1),
              popliteal_L210(sinAlpha=-1),
              tibiofibular_trunk_L212(sinAlpha=-1),
              renal_vein_T1_L22(sinAlpha=1),
              internal_iliac_vein_T1_R30(sinAlpha=1),
              profunda_femoris_vein_T2_R40(sinAlpha=1),
              anterior_tibial_vein_T4_R50(sinAlpha=1),
              posterior_tibial_vein_T6_R54(sinAlpha=1),
              internal_iliac_vein_T1_L60(sinAlpha=1),
              profunda_femoris_vein_T2_L70(sinAlpha=1),
              anterior_tibial_vein_T4_L80(sinAlpha=1),
              posterior_tibial_vein_T6_L84(sinAlpha=1),
              external_iliac_vein_R32(sinAlpha=1),
              femoral_vein_R34(sinAlpha=1),
              femoral_vein_R38(sinAlpha=1),
              femoral_vein_R42(sinAlpha=1),
              femoral_vein_R46(sinAlpha=1),
              popliteal_vein_R48(sinAlpha=1),
              popliteal_vein_R52(sinAlpha=1),
              external_iliac_vein_L62(sinAlpha=1),
              femoral_vein_L64(sinAlpha=1),
              femoral_vein_L68(sinAlpha=1),
              femoral_vein_L72(sinAlpha=1),
              femoral_vein_L76(sinAlpha=1),
              popliteal_vein_L78(sinAlpha=1),
              popliteal_vein_L82(sinAlpha=1),
              inferior_vena_cava_C20(sinAlpha=1),
              inferior_vena_cava_C24(sinAlpha=1),
              common_iliac_vein_L56(sinAlpha=1),
              common_iliac_vein_R26(sinAlpha=1),
              external_iliac_vein_R28(sinAlpha=1),
              external_iliac_vein_L58(sinAlpha=1),
              inferior_vena_cava_C16(sinAlpha=1),
              inferior_vena_cava_C12(sinAlpha=1),
              inferior_vena_cava_C8(sinAlpha=1),
              UseTiltInput=true,
              redeclare model Systemic_artery_thoracic =
                  ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.pv_artery_leveled,
              redeclare model Systemic_artery =
                  ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.pv_artery_leveled,
              redeclare model Systemic_vein =
                  ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.vp_vein_tDF_leveled,
              redeclare model Systemic_tissue =
                  ADAN_main.Components.Subsystems.Systemic.Vessel_modules.systemic_tissue_leveled),
            phi_fixed(
              amplitude=0.75,
              rising=1,
              width=200,
              falling=1,
              period=200,
              nperiod=1,
              startTime=0),
            heartComponent(UseFrequencyInput=true, UsePhiInput=true));

          replaceable Modelica.Blocks.Sources.Ramp Tilt_ramp(
            height=Modelica.Constants.pi/3,
            startTime=10,
            duration=1)   constrainedby Modelica.Blocks.Interfaces.SO
            annotation (Placement(transformation(extent={{-100,22},{-80,42}})));
        equation
          connect(Tilt_ramp.y, SystemicComponent.tilt_input) annotation (Line(
                points={{-79,32},{-22,32},{-22,20}}, color={0,0,127}));
          annotation (experiment(
              StopTime=30,
              Interval=0.02,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode"));
        end OptimizedExercise_tiltable;

        model OptimizedBaseline_tiltable
          extends Identification.SteadyState.TriSeg_OptimizedBaseline_init(
            SystemicComponent(
              redeclare
                ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.vv_artery_thoracic_leveled
                ascending_aorta_A(sinAlpha=1),
              ascending_aorta_B(sinAlpha=1),
              ascending_aorta_C(sinAlpha=1),
              ascending_aorta_D(sinAlpha=1),
              aortic_arch_C2(sinAlpha=1),
              aortic_arch_C46(sinAlpha=1),
              aortic_arch_C64(sinAlpha=1),
              common_carotid_R6_A(sinAlpha=1),
              common_carotid_R6_B(sinAlpha=1),
              common_carotid_R6_C(sinAlpha=1),
              internal_carotid_R8_A(sinAlpha=1),
              internal_carotid_R8_B(sinAlpha=1),
              common_carotid_L48_A(sinAlpha=1),
              common_carotid_L48_B(sinAlpha=1),
              common_carotid_L48_C(sinAlpha=1),
              common_carotid_L48_D(sinAlpha=1),
              internal_carotid_L50_A(sinAlpha=1),
              internal_carotid_L50_B(sinAlpha=1),
              brachial_L82(sinAlpha=-1),
              ulnar_T2_L84(sinAlpha=-1),
              brachial_R34(sinAlpha=-1),
              ulnar_T2_R36(sinAlpha=-1),
              vertebral_vein_L126(sinAlpha=-1),
              brachial_vein_L138(sinAlpha=1),
              brachial_vein_L142(sinAlpha=1),
              ulnar_vein_T7_L144(sinAlpha=1),
              brachial_vein_L152(sinAlpha=1),
              radial_vein_T3_L154(sinAlpha=1),
              brachial_vein_R104(sinAlpha=1),
              brachial_vein_R114(sinAlpha=1),
              brachial_vein_R108(sinAlpha=1),
              ulnar_vein_T7_R110(sinAlpha=1),
              brachial_vein_R118(sinAlpha=1),
              radial_vein_T3_R120(sinAlpha=1),
              brachial_vein_L148(sinAlpha=1),
              superior_vena_cava_C2(sinAlpha=-1),
              superior_vena_cava_C88(sinAlpha=-1),
              brachiocephalic_vein_R90(sinAlpha=-1),
              brachiocephalic_vein_R94(sinAlpha=-1),
              brachiocephalic_vein_L128(sinAlpha=-1),
              brachiocephalic_vein_L124(sinAlpha=-1),
              internal_jugular_vein_R122(sinAlpha=-1),
              external_jugular_vein_R98(sinAlpha=-1),
              thoracic_aorta_C96(sinAlpha=-1),
              thoracic_aorta_C100(sinAlpha=-1),
              thoracic_aorta_C104(sinAlpha=-1),
              thoracic_aorta_C108(sinAlpha=-1),
              thoracic_aorta_C112(sinAlpha=-1),
              aortic_arch_C94(sinAlpha=-1),
              vertebral_vein_R92(sinAlpha=-1),
              internal_jugular_vein_L156(sinAlpha=-1),
              external_jugular_vein_L132(sinAlpha=-1),
              abdominal_aorta_C114(sinAlpha=-1),
              abdominal_aorta_C136(sinAlpha=-1),
              abdominal_aorta_C164(sinAlpha=-1),
              abdominal_aorta_C176(sinAlpha=-1),
              abdominal_aorta_C188(sinAlpha=-1),
              abdominal_aorta_C192(sinAlpha=-1),
              common_iliac_R216(sinAlpha=-1),
              external_iliac_R220(sinAlpha=-1),
              femoral_R222(sinAlpha=-1),
              common_iliac_L194(sinAlpha=-1),
              external_iliac_L198(sinAlpha=-1),
              femoral_L200(sinAlpha=-1),
              femoral_R226(sinAlpha=-1),
              popliteal_R228(sinAlpha=-1),
              popliteal_R232(sinAlpha=-1),
              tibiofibular_trunk_R234(sinAlpha=-1),
              femoral_L204(sinAlpha=-1),
              popliteal_L206(sinAlpha=-1),
              popliteal_L210(sinAlpha=-1),
              tibiofibular_trunk_L212(sinAlpha=-1),
              renal_vein_T1_L22(sinAlpha=1),
              internal_iliac_vein_T1_R30(sinAlpha=1),
              profunda_femoris_vein_T2_R40(sinAlpha=1),
              anterior_tibial_vein_T4_R50(sinAlpha=1),
              posterior_tibial_vein_T6_R54(sinAlpha=1),
              internal_iliac_vein_T1_L60(sinAlpha=1),
              profunda_femoris_vein_T2_L70(sinAlpha=1),
              anterior_tibial_vein_T4_L80(sinAlpha=1),
              posterior_tibial_vein_T6_L84(sinAlpha=1),
              external_iliac_vein_R32(sinAlpha=1),
              femoral_vein_R34(sinAlpha=1),
              femoral_vein_R38(sinAlpha=1),
              femoral_vein_R42(sinAlpha=1),
              femoral_vein_R46(sinAlpha=1),
              popliteal_vein_R48(sinAlpha=1),
              popliteal_vein_R52(sinAlpha=1),
              external_iliac_vein_L62(sinAlpha=1),
              femoral_vein_L64(sinAlpha=1),
              femoral_vein_L68(sinAlpha=1),
              femoral_vein_L72(sinAlpha=1),
              femoral_vein_L76(sinAlpha=1),
              popliteal_vein_L78(sinAlpha=1),
              popliteal_vein_L82(sinAlpha=1),
              inferior_vena_cava_C20(sinAlpha=1),
              inferior_vena_cava_C24(sinAlpha=1),
              common_iliac_vein_L56(sinAlpha=1),
              common_iliac_vein_R26(sinAlpha=1),
              external_iliac_vein_R28(sinAlpha=1),
              external_iliac_vein_L58(sinAlpha=1),
              inferior_vena_cava_C16(sinAlpha=1),
              inferior_vena_cava_C12(sinAlpha=1),
              inferior_vena_cava_C8(sinAlpha=1),
              UseTiltInput=true,
              redeclare model Systemic_artery_thoracic =
                  ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.pv_artery_leveled,
              redeclare model Systemic_artery =
                  ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.pv_artery_leveled,
              redeclare model Systemic_vein =
                  ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.vp_vein_tDF_leveled,
              redeclare model Systemic_tissue =
                  ADAN_main.Components.Subsystems.Systemic.Vessel_modules.systemic_tissue_leveled),
            phi_fixed(
              amplitude=0.05,
              width=200,
              nperiod=1,
              startTime=10),
            heartComponent(UseFrequencyInput=true, UsePhiInput=true),
            settings(
              eta_vc=0,
              tissues_eta_Ra=0,
              tissues_eta_C=0));

          replaceable Modelica.Blocks.Sources.Ramp Tilt_ramp(
            height=Modelica.Constants.pi/3,
            startTime=10,
            duration=1)   constrainedby Modelica.Blocks.Interfaces.SO
            annotation (Placement(transformation(extent={{-100,22},{-80,42}})));
        equation
          connect(Tilt_ramp.y, SystemicComponent.tilt_input) annotation (Line(
                points={{-79,32},{-22,32},{-22,20}}, color={0,0,127}));
          annotation (experiment(
              Interval=0.02,
              Tolerance=1e-09,
              __Dymola_Algorithm="Cvode"));
        end OptimizedBaseline_tiltable;

        model OlufsenTriseg_tiltable_reparam_valsalva
          extends Experiments.OlufsenTriseg_tiltable_reparam(Tilt_ramp(
                startTime=4000));
          annotation (experiment(
              StopTime=80,
              Interval=0.02,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode"));
        end OlufsenTriseg_tiltable_reparam_valsalva;

        model OlufsenTriSeg_tiltable_sit
          "tilting to sitting position. Zero degree tilt while sitting does not elevate lower limbs."
          extends CVS_tiltable(SystemicComponent(
              femoral_R226(sinAlpha=0),
              popliteal_R228(sinAlpha=0),
              popliteal_L206(sinAlpha=0),
              femoral_L204(sinAlpha=0),
              femoral_vein_R42(sinAlpha=0),
              femoral_vein_R46(sinAlpha=0),
              popliteal_vein_R48(sinAlpha=0),
              femoral_vein_L76(sinAlpha=0),
              popliteal_vein_L78(sinAlpha=0),
              femoral_vein_L72(sinAlpha=0)), Tilt_ramp(startTime=1000));
        end OlufsenTriSeg_tiltable_sit;

        model OlufsenTriSeg_LegRaise
          extends Obsolete.OlufsenTriSeg_base(
            SystemicComponent(
              redeclare
                ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.vv_artery_thoracic_leveled
                ascending_aorta_A,
              UseTiltInput=true,
              femoral_R226(sinAlpha=1),
              femoral_L204(sinAlpha=1),
              femoral_R222(sinAlpha=1),
              femoral_L200(sinAlpha=1),
              femoral_vein_R38(sinAlpha=-1),
              femoral_vein_R42(sinAlpha=-1),
              femoral_vein_R46(sinAlpha=-1),
              femoral_vein_L68(sinAlpha=-1),
              femoral_vein_L76(sinAlpha=-1),
              femoral_vein_L72(sinAlpha=-1),
              baroreflex_system(
                baroreceptor_aortic(tau_s=60),
                baroreceptor_carotid(tau_s=60),
                baroreflex(f1=0.0031)),
              redeclare model Systemic_artery_thoracic =
                  ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.pv_artery_leveled,
              redeclare model Systemic_artery =
                  ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.pv_artery_leveled,
              redeclare model Systemic_vein =
                  ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Obsolete.vp_vein_tDF_leveled,
              redeclare model Systemic_tissue =
                  ADAN_main.Components.Subsystems.Systemic.Vessel_modules.systemic_tissue_leveled),
            phi_fixed(
              amplitude=0.38 - 0.25,
              width=200,
              nperiod=1,
              startTime=10),
            heartComponent(UseFrequencyInput=true, UsePhiInput=true),
            settings(
              tissues_gamma=0.5,
              eta_vc=0.5,
              tissues_eta_Ra=4.2625,
              tissues_eta_C=0.2),
            useAutonomousPhi(y=true));

          replaceable Modelica.Blocks.Sources.Trapezoid
                                                   Tilt_ramp(
            amplitude=Modelica.Constants.pi/2,
            rising=1,
            width=30,
            falling=1,
            period=60,
            nperiod=1,
            startTime=30) constrainedby Modelica.Blocks.Interfaces.SO
            annotation (Placement(transformation(extent={{-100,22},{-80,42}})));
        equation
          connect(Tilt_ramp.y, SystemicComponent.tilt_input) annotation (Line(
                points={{-79,32},{-22,32},{-22,20}}, color={0,0,127}));
          annotation (experiment(
              StopTime=90,
              Interval=0.02,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode"));
        end OlufsenTriSeg_LegRaise;

        model OlufsenTriSeg_SemiRecumberent
          extends ADAN_main.SystemicTree.Tilt.CVS_SemiRecumberent(
              settings(baro_tau_s(
                               displayUnit="s") = 9));
        end OlufsenTriSeg_SemiRecumberent;

        model SupineToSemirecumberentWithSemiExtendedLegs
          "Reproducing the Wisconsin-Madison experiment"
          extends ADAN_main.SystemicTree.Tilt.CVS_SemiRecumberent(
              Tilt_ramp(duration=0, startTime=800),Tilt_LegRaise(startTime=30));
        end SupineToSemirecumberentWithSemiExtendedLegs;

        model CVS_tiltable_SitValsalva
          "tilting to sitting position, followed by valsalva"
          extends CVS_tiltable_StandValsalva(
              SystemicComponent(
              UseThoracic_PressureInput=true,
              femoral_R226(sinAlpha=0),
              popliteal_R228(sinAlpha=0),
              popliteal_L206(sinAlpha=0),
              femoral_L204(sinAlpha=0),
              femoral_vein_R42(sinAlpha=0),
              femoral_vein_R46(sinAlpha=0),
              popliteal_vein_R48(sinAlpha=0),
              femoral_vein_L76(sinAlpha=0),
              popliteal_vein_L78(sinAlpha=0),
              femoral_vein_L72(sinAlpha=0)));

        end CVS_tiltable_SitValsalva;

        model base
          extends Obsolete.partialCVS_leveled(
            SystemicComponent(
              UseBaroreflexOutput=true,
              baroreflex_system(baroreceptor_carotid(tau_s(displayUnit="s") = 0.1),
                  baroreceptor_aortic(tau_s(displayUnit="s") = 0.1)),
              systemicParameters(k_E=0.4)),
            condHRPhi(disconnected=false),
            condSystemicPhi(disconnected=true),
            phi_fixed(
              amplitude=0.38 - 0.25,
              width=200,
              nperiod=1,
              offset=0.25,
              startTime=30),
            redeclare replaceable
              Components.Subsystems.Heart.Heart_SmithOlufsenMynard heartComponent(
              UseFrequencyInput=true,
              UsePhiInput=true,
              UseThoracic_PressureInput=
                                       true),
            redeclare replaceable Components.Subsystems.Pulmonary.Pulmonary_Smith
              pulmonaryComponent constrainedby
              Components.Subsystems.Pulmonary.partialPulmonary,
            redeclare Components.Subsystems.Baroreflex.HeartRate_HRMinMax
              heartRate(HR_nom(displayUnit="1/min") = 1.16667, phi0=settings.phi0),
            settings(
              heart_alphaE=0.2,
              exercise_factor_on_arterial_compliance=0.2,
              UseNonLinear_TissuesCompliance=true,
              tissues_UseStraighteningReaction2Phi=true,
              veins_activation_tau=0.1,
              veins_ignoreViscosityResistance=true,
              hideLevel0=false,
              hideLevel1=false,
              eta_vc=0.2,
              tissues_CO_nom(displayUnit="l/min") = 0.00010666666666667,
              tissues_eta_Rv=settings.tissues_eta_Ra,
              tissues_eta_C=0.2,
              syst_art_UseVasoconstrictionEffect=true,
              veins_UseNonLinearVeins =     true,
              tissues_chi_C=
                           0.2),
            Tilt_ramp(
              height=Modelica.Constants.pi/3,
              duration=2,
              startTime=30));

          Modelica.Blocks.Logical.Switch switch1
            annotation (Placement(transformation(extent={{10,52},{24,66}})));
          Modelica.Blocks.Sources.BooleanExpression useAutonomousPhi
            annotation (Placement(transformation(extent={{-22,50},{-2,70}})));
          Components.Signals.ConditionalConnection condHeartPhi(disconnectedValue=0.25,
              disconnected=true)
            annotation (Placement(transformation(extent={{42,37.2592},{54,47.9259}})));
          Modelica.Blocks.Sources.Ramp time_(
            height=100,
            duration=100,
            offset=-1,
            startTime=26.5) annotation (Placement(transformation(extent={{-100,
                    -100},{-80,-80}})));
        //   output Physiolibrary.Types.Pressure brachial_pressure = Systemic1.brachial_L82_HeartLevel.u_C;

        // output Modelica.SIunits.Position Systemic1_brachial_L82_HeartLevel_port_a_position = Systemic1.brachial_L82_HeartLevel.port_a.position;
        // output Physiolibrary.Types.Pressure Systemic1_brachial_L82_HeartLevel_port_a_pressure = Systemic1.brachial_L82_HeartLevel.port_a.pressure;
        // output Modelica.SIunits.Position Systemic1_brachial_L82_HeartLevel_port_b_position = Systemic1.brachial_L82_HeartLevel.port_b.position;
        // output Physiolibrary.Types.Pressure Systemic1_brachial_L82_HeartLevel_port_b_pressure = Systemic1.brachial_L82_HeartLevel.port_b.pressure;
        // output Physiolibrary.Types.Pressure Systemic1_brachial_L82_HeartLevel_u_C = Systemic1.brachial_L82_HeartLevel.u_C;
        // output Modelica.SIunits.Position Systemic1_femoral_R226_hydrostatic_level = Systemic1.femoral_R226.hydrostatic_level;
        // output Physiolibrary.Types.Pressure Systemic1_femoral_R226_u_C = Systemic1.femoral_R226.u_C;
        // output Modelica.SIunits.Position Systemic1_internal_carotid_R8_B_hydrostatic_level = Systemic1.internal_carotid_R8_B.hydrostatic_level;
        // output Physiolibrary.Types.Pressure Systemic1_internal_carotid_R8_B_u_C = Systemic1.internal_carotid_R8_B.u_C;
        // output Physiolibrary.Types.Pressure Systemic1_brachial_L82_HeartLevel_hydrostatic_level = Systemic1.brachial_L82_HeartLevel.hydrostatic_level;
        // output Modelica.SIunits.Position Systemic1_thoracic_aorta_C108_hydrostatic_level = Systemic1.thoracic_aorta_C108.hydrostatic_level;
        // output Physiolibrary.Types.Pressure Systemic1_thoracic_aorta_C108_u_C = Systemic1.thoracic_aorta_C108.u_C;
        // output Modelica.SIunits.Position Systemic1_tibiofibular_trunk_R234_hydrostatic_level = Systemic1.tibiofibular_trunk_R234.hydrostatic_level;
        // output Physiolibrary.Types.Pressure Systemic1_tibiofibular_trunk_R234_u_C = Systemic1.tibiofibular_trunk_R234.u_C;
        // output Physiolibrary.Types.Pressure heartComponent_aorticValve_q_out_pressure = heartComponent.aorticValve.q_out.pressure;
        equation

          connect(switch1.y, condHRPhi.u) annotation (Line(points={{24.7,59},{
                  32.35,59},{32.35,-32},{57.2,-32}}, color={0,0,127}));
          connect(useAutonomousPhi.y, switch1.u2) annotation (Line(points={{-1,60},
                  {4,60},{4,59},{8.6,59}}, color={255,0,255}));
          connect(SystemicComponent.phi_baroreflex, switch1.u1) annotation (Line(
                points={{-27.4,45.4},{-27.4,72},{4,72},{4,64.6},{8.6,64.6}},
                color={0,0,127}));
          connect(condSystemicPhi.u, condHRPhi.u) annotation (Line(points={{57.2,20},
                  {57.2,36},{30,36},{30,59},{32.35,59},{32.35,-32},{57.2,-32}},
                color={0,0,127}));
          connect(heartComponent.phi, condHeartPhi.y) annotation (Line(points={{-16,-16},
                  {60,-16},{60,42},{54.6,42}},          color={0,0,127}));
          connect(condHeartPhi.u, condHRPhi.u) annotation (Line(points={{40.8,42},
                  {34,42},{34,-32},{57.2,-32}}, color={0,0,127}));
          connect(phi_fixed.y, switch1.u3) annotation (Line(points={{-35,84},{
                  -38,84},{-38,53.4},{8.6,53.4}},
                                              color={0,0,127}));
          annotation (experiment(
              StopTime=30,
              Interval=0.01,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"), __Dymola_Commands(file(ensureSimulated=
                   true) = "Scripts/PrintPulsePressures.mos"
                "Print pulse pressures"));
        end base;

        model TriSeg
          extends Experiments.base(
            condHRPhi(disconnected=true),
            phi_fixed(startTime=60),
            redeclare Components.Subsystems.Heart.Heart_TriSeg heartComponent(
                UsePhiInput=false),
            Tilt_ramp(startTime=60));
          annotation (experiment(
              StopTime=60,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end TriSeg;

        model TriSegMech
          extends Experiments.base(
            condHRPhi(disconnected=true),
            phi_fixed(startTime=60),
            redeclare Components.Subsystems.Heart.Heart_TriSegMechanics
              heartComponent(UsePhiInput=false),
            Tilt_ramp(startTime=60));
          annotation (experiment(
              StopTime=60,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end TriSegMech;

        model TriSegLumens
          extends Experiments.base(
            SystemicComponent(baroreflex_system(baroreceptor_carotid(delta0=0.4),
                  baroreflex(fsn=0.0135)), systemicParameters(k_E=0.36)),
            condHRPhi(disconnected=false),
            condSystemicPhi(disconnected=false),
            phi_fixed(startTime=30),
            redeclare Components.Subsystems.Heart.Heart_TriSegMechanics_Lumens
              heartComponent(UsePhiInput=false),
            Tilt_ramp(startTime=30),
            redeclare Components.Subsystems.Pulmonary.PulmonaryTriSeg
              pulmonaryComponent);
          annotation (experiment(
              StopTime=60,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end TriSegLumens;

        model TriSeg_OptimizedBaseline
          extends Experiments.TriSegLumens(
            SystemicComponent(systemicParameters(k_E(displayUnit="1") = 0.358125)),
            V_PV_init(displayUnit="ml") = 0.00190045,
            TR_frac(displayUnit="%") = 5.118955,
            TPR(displayUnit="(mmHg.min)/l") = 119490152,
            Amref_factor=1.06,
            Vw_factor=0.90375);

          annotation (experiment(
              StopTime=30,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end TriSeg_OptimizedBaseline;

        model CVS_tiltable_StandValsalva
          "tilting to sitting position, followed by valsalva"
          extends CVS_tiltable(
            SystemicComponent(
              UseThoracic_PressureInput=true),
            Tilt_ramp(height=Modelica.Constants.pi/2, startTime=0),
            heartComponent(UseThoracic_PressureInput=true),
            pulmonaryComponent(UseThoracic_PressureInput=true));
        replaceable
        Modelica.Blocks.Sources.Trapezoid thoracic_pressure_ramp(
            nperiod=-1,
            amplitude=40*133.32,
            rising=0.1,
            width=14.8,
            falling=0.1,
            period=60,
            startTime=20)   constrainedby Modelica.Blocks.Sources.Trapezoid
            annotation (Placement(transformation(extent={{-124,-24},{-104,-4}})));
          Components.Signals.ConditionalConnection condTP_EP1(
            disconnected=false,
            disconnectedValue=0,
            phi_gain=settings.pulm_tp_pleural_frac,
            const_offset=0) "Thoracic pressure effect on extra-pleural circulatory"
            annotation (Placement(transformation(extent={{-95,-19.3333},{-81,
                    -7.3333}})));
        equation
          connect(condTP_EP1.y, SystemicComponent.thoracic_pressure_input)
            annotation (Line(points={{-80.3,-14},{-72,-14},{-72,20},{-34,20}},
                color={0,0,127}));
          connect(heartComponent.thoracic_pressure_input, SystemicComponent.thoracic_pressure_input)
            annotation (Line(points={{-26,-32},{-72,-32},{-72,20},{-34,20}},
                color={0,0,127}));
          connect(pulmonaryComponent.thoracic_pressure, SystemicComponent.thoracic_pressure_input)
            annotation (Line(points={{-24,-62},{-72,-62},{-72,20},{-34,20}},
                color={0,0,127}));
          connect(condTP_EP1.u, thoracic_pressure_ramp.y) annotation (Line(
                points={{-96.4,-14},{-100,-14},{-100,-14},{-103,-14}}, color={0,
                  0,127}));
        end CVS_tiltable_StandValsalva;
      end Experiments;

      model CVS_tiltable
        import ADAN_main;
        extends ADAN_main.SystemicTree.CardiovascularSystem(
       SystemicComponent(UseTiltInput=true), pulmonaryComponent(
              UseCondFracInput=false,r_pa(useConductanceInput=true)),
          settings(veins_relaxation_tau=1));

        replaceable Modelica.Blocks.Sources.Ramp Tilt_ramp(
          height=Modelica.Constants.pi/3,
          startTime=0,
          duration=1)   constrainedby Modelica.Blocks.Interfaces.SO
          annotation (Placement(transformation(extent={{-100,22},{-80,42}})));
        Modelica.Blocks.Math.Gain gain(k=-0.2/(Modelica.Constants.pi/3))
          annotation (Placement(transformation(extent={{-102,-54},{-82,-34}})));
        Modelica.Blocks.Math.Add add
          annotation (Placement(transformation(extent={{-66,-60},{-46,-40}})));
        Modelica.Blocks.Sources.Constant const(k=1) annotation (Placement(
              transformation(extent={{-120,-84},{-100,-64}})));
      equation
        connect(Tilt_ramp.y, SystemicComponent.tilt_input) annotation (Line(
              points={{-79,32},{-22,32},{-22,20}}, color={0,0,127}));
        connect(Tilt_ramp.y, gain.u) annotation (Line(points={{-79,32},{-74,32},
                {-74,-30},{-102,-30},{-102,-44},{-104,-44}}, color={0,0,127}));
        connect(gain.y, add.u1)
          annotation (Line(points={{-81,-44},{-68,-44}}, color={0,0,127}));
        connect(const.y, add.u2) annotation (Line(points={{-99,-74},{-74,-74},{
                -74,-56},{-68,-56}}, color={0,0,127}));
        connect(add.y, pulmonaryComponent.conductanceFraction)
          annotation (Line(points={{-45,-50},{-14,-50}}, color={0,0,127}));
        annotation (experiment(
            StopTime=120,
            Interval=0.01,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"),
          __OpenModelica_simulationFlags(lv = "LOG_STATS", s = "cvode"));
      end CVS_tiltable;

      model CVS_SemiRecumberent "Semi-recumberent position with leg raise"
        extends
          CVS_tiltable(
          LVfunctionFraction=0.3,
            redeclare
            Components.Subsystems.Systemic.Postures.SystemicAV_SemiRecumbent
            SystemicComponent(
            UseThoracic_PressureInput=false,
            UsePhi_Input=true,
            UseTiltInput=true), settings(baro_tau_s(displayUnit="s") = 93));
        replaceable Modelica.Blocks.Sources.Ramp Tilt_ramp(
          height=Modelica.Constants.pi/6,
          duration=0,
          startTime=20) constrainedby Modelica.Blocks.Sources.Ramp
          annotation (Placement(transformation(extent={{-100,22},{-80,42}})));
        replaceable Modelica.Blocks.Sources.Ramp Tilt_LegRaise(
          height=Modelica.Constants.pi/2,
          duration=0,
          startTime=80) constrainedby Modelica.Blocks.Sources.Ramp
          annotation (Placement(transformation(extent={{-100,52},{-80,72}})));
      equation
        connect(Tilt_ramp.y, SystemicComponent.tilt_input) annotation (Line(
              points={{-79,32},{-22,32},{-22,20}}, color={0,0,127}));
        connect(SystemicComponent.femur_angle, Tilt_LegRaise.y) annotation (
            Line(points={{-40.2,20},{-42,20},{-42,62},{-79,62}}, color={0,0,127}));
        annotation (experiment(
            StopTime=130,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"),
          __OpenModelica_simulationFlags(lv = "LOG_STATS", s = "cvode"));
      end CVS_SemiRecumberent;

      model CVS_upsideDown "A headdown experiment - not optimized for though"
        extends CVS_tiltable(Tilt_ramp(height=-Modelica.Constants.pi/2,
              startTime=0), settings(baro_tau_s=10));
      end CVS_upsideDown;

      model CVS_tiltable_noBaro
        extends CVS_tiltable(useAutonomousPhi(y=false));
      end CVS_tiltable_noBaro;

      model CVS_HUT "For plots"
        extends CVS_tiltable(Tilt_ramp(duration=1, startTime=10));
        annotation (experiment(
            StopTime=130,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end CVS_HUT;
    end Tilt;

    package Exercise

      package Experiments
        model base_Exercise_SimpleCa_maxSV
          extends ADAN_main.SystemicTree.Exercise.CVS_exercise(
            SystemicComponent(
              ulnar_T2_L90(UseExercise=false),
              radial_T1_L92(UseExercise=false),
              vertebral_L2(UseExercise=false),
              ulnar_T2_R42(UseExercise=false),
              radial_T1_R44(UseExercise=false),
              internal_carotid_R8_C(UseExercise=false),
              external_carotid_T2_R26(UseExercise=false),
              vertebral_R272(UseExercise=false),
              cardiac_tissue(UseExercise=false)),
            phi_fixed(
              amplitude=0.75,
              rising(displayUnit="s") = 0,
              width(displayUnit="s") = 200,
              falling(displayUnit="s") = 0,
              period(displayUnit="s"),
              nperiod=1,
              offset=0.25,
              startTime=10),
            Exercise(startTime=10));
          annotation (experiment(
              StopTime=20,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end base_Exercise_SimpleCa_maxSV;

        model test_CO
          extends CVS_exercise(
            condHRPhi(uMax=1),
            phi_fixed(
              amplitude=0.25,
              offset=1,
              startTime=40),
            condHeartPhi(uMax=1));
        end test_CO;

        package KnockOffExperiments
          model knockOff_base
            extends CVS_tiltable_exercise;
            annotation (__Dymola_Commands(file=
                    "\"Scripts/Dymola/ExecuteExerciseKnockOffExperiments.mos\""
                  "Execute all knock off experiments."), experiment(
                StopTime=60,
                Interval=0.02,
                Tolerance=1e-07,
                __Dymola_Algorithm="Cvode"));
          end knockOff_base;

          model KnockOff_NonLinearTissues
            extends knockOff_base(settings(UseNonLinear_TissuesCompliance=false));
          end KnockOff_NonLinearTissues;

          model KnockOff_TissueComplianceReaction
            extends knockOff_base(settings(tissues_chi_C=
                   0));
          end KnockOff_TissueComplianceReaction;

          model KnockOff_ArterialCompliance
            extends knockOff_base(settings(                              eta_vc=
                                                                              0,
                                           syst_TPR(
                                               displayUnit="(Pa.s)/m3")));
          end KnockOff_ArterialCompliance;

          model KnockOff_TissueResistance
            extends knockOff_base(settings(tissues_eta_Ra=
                                                     0, tissues_chi_Ra= exerciseFactor_used));
            parameter Physiolibrary.Types.Fraction maxphi = 1;
            parameter Physiolibrary.Types.Fraction Ra_nominal = 3.17162 "Enter nominal tissues arterial resistance";
            parameter Physiolibrary.Types.Fraction exerciseFactor_nominal = 34.776 "Enter nominal exercise factor";
            Physiolibrary.Types.Fraction exerciseFactor_corrected "Output of the calculation - this shall be the correct exercise factor, given the Ra is knocekd off";
            parameter Physiolibrary.Types.Fraction exerciseFactor_used = 9.58864 "Set the corrected factor here.";
            Physiolibrary.Types.Fraction nominalModifier = (1 + (maxphi - settings.phi0)
                *Ra_nominal)/(1 + exerciseFactor_nominal);
            Physiolibrary.Types.Fraction currentModifier = (1 + (maxphi - settings.phi0)
                *0)/(1 + exerciseFactor_corrected);
          equation
            nominalModifier = currentModifier;
            assert(abs(exerciseFactor_used / exerciseFactor_corrected -1) < 0.01, "You have to manually input the corrected factor " + String(exerciseFactor_corrected) +" here to avoid tedious calculations.");
          end KnockOff_TissueResistance;

          model KnockOff_Venoconstriction
            extends knockOff_base(settings(veins_UsePhiEffect=false));
          end KnockOff_Venoconstriction;

          model KnockOff_Chronotropy
            extends knockOff_base(condHRPhi(disconnected=true, delayIntegral_Enabled=
                    false));
          end KnockOff_Chronotropy;

          model KnockOff_Inotropy
            extends knockOff_base(settings(heart_vntr_D_A_maxAct=settings.heart_vntr_D_A));
          end KnockOff_Inotropy;

          model KnockOff_Lusitropy
            "Do not change drive offset and relaxing timing."
            extends knockOff_base(settings(heart_vntr_D_0_maxAct=settings.heart_vntr_D_0,
                  heart_vntr_TR_maxAct(displayUnit="s") = settings.heart_vntr_TR));
          end KnockOff_Lusitropy;
        end KnockOffExperiments;

        model OlufsenTriseg_Exercise_NonLInPumRes
          extends CVS_tiltable_exercise(
            phi_fixed(
              amplitude=0.75,
              width=100,
              nperiod=1,
              offset=0.25,
              startTime=20),
            redeclare Components.Subsystems.Pulmonary.PulmonaryTriSeg_NonLinear
              pulmonaryComponent(UseThoracic_PressureInput=true, r_pa(
                Q_nom(displayUnit="l/min"),
                dp_nom(displayUnit="mmHg"),
                Q_nom_maxQ(displayUnit="l/min"),
                maxLinearFlow(displayUnit="l/min") = 1.6666666666667e-05)),
            Exercise(startTime=20),
            Tilt_ramp(startTime=40));

          annotation (experiment(
              StopTime=60,
              Interval=0.02,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode"));
        end OlufsenTriseg_Exercise_NonLInPumRes;

        model OlufsenTriSeg_tiltable_exercise_MusclePump
          extends CVS_tiltable_exercise(
            SystemicComponent(
              UseOuter_PressureInput=true,
              profunda_femoris_vein_T2_R40(UseOuter_external_pressure=true,
                  LimitBackflow=true),
              anterior_tibial_vein_T4_R50(UseOuter_external_pressure=true,
                  LimitBackflow=true),
              popliteal_vein_R52(UseOuter_external_pressure=true, LimitBackflow=
                    true),
              posterior_tibial_vein_T6_R54(UseOuter_external_pressure=true,
                  LimitBackflow=true),
              internal_iliac_vein_T1_L60(UseOuter_external_pressure=true,
                  LimitBackflow=true),
              profunda_femoris_vein_T2_L70(UseOuter_external_pressure=true,
                  LimitBackflow=true),
              anterior_tibial_vein_T4_L80(UseOuter_external_pressure=true,
                  LimitBackflow=true),
              popliteal_vein_L82(UseOuter_external_pressure=true, LimitBackflow=
                    true),
              posterior_tibial_vein_T6_L84(UseOuter_external_pressure=true,
                  LimitBackflow=true),
              internal_iliac_vein_T1_R30(UseOuter_external_pressure=true,
                  LimitBackflow=true),
              popliteal_vein_R48(LimitBackflow=true),
              popliteal_vein_L78(LimitBackflow=true),
              femoral_vein_R38(LimitBackflow=true),
              femoral_vein_L68(LimitBackflow=true),
              external_iliac_vein_R28(LimitBackflow=true),
              external_iliac_vein_L58(LimitBackflow=true),
              internal_iliac_T1_R218(LimitBackflow=true),
              profundus_T2_R224(LimitBackflow=true),
              anterior_tibial_T3_R230(LimitBackflow=true),
              posterior_tibial_T4_R236(LimitBackflow=true),
              profundus_T2_L202(LimitBackflow=true),
              anterior_tibial_T3_L208(LimitBackflow=true),
              posterior_tibial_T4_L214(LimitBackflow=true),
              internal_iliac_T1_L196(LimitBackflow=true)),
            phi_fixed(nperiod=0),
            Tilt_ramp(startTime=0));
          replaceable Modelica.Blocks.Sources.Sine muscle_pump_pressure(
            f=2,
            startTime=60,
            amplitude=40*133,
            offset=0) constrainedby Modelica.Blocks.Sources.Trapezoid
            annotation (Placement(transformation(extent={{-100,-10},{-80,10}})));
          Components.Signals.ConditionalConnection condEP(
            disconnected=false,
            disconnectedValue=0,
            uMin=0)
            annotation (Placement(transformation(extent={{-69,-5.3333},{-55,6.6667}})));

          Physiolibrary.Types.Volume pulsating_venous_volume=SystemicComponent.internal_iliac_vein_T1_R30.volume
               + SystemicComponent.profunda_femoris_vein_T2_R40.volume +
              SystemicComponent.anterior_tibial_vein_T4_R50.volume +
              SystemicComponent.posterior_tibial_vein_T6_R54.volume +
              SystemicComponent.internal_iliac_vein_T1_L60.volume +
              SystemicComponent.profunda_femoris_vein_T2_L70.volume +
              SystemicComponent.anterior_tibial_vein_T4_L80.volume +
              SystemicComponent.posterior_tibial_vein_T6_L84.volume +
              SystemicComponent.popliteal_vein_R52.volume + SystemicComponent.popliteal_vein_L82.volume;
        equation
          connect(muscle_pump_pressure.y, condEP.u) annotation (Line(points={{-79,0},{-74.7,
                  0},{-74.7,3.33333e-05},{-70.4,3.33333e-05}}, color={0,0,127}));
          connect(condEP.y, SystemicComponent.Outer_pressure_input) annotation (
              Line(points={{-54.3,3.33333e-05},{-28,0},{-28,20}}, color={0,0,127}));
          annotation (experiment(
              StopTime=90,
              Interval=0.02,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode"));
        end OlufsenTriSeg_tiltable_exercise_MusclePump;
      end Experiments;

      model CVS_exercise "Simplified heart model"
        import ADAN_main;
        extends ADAN_main.SystemicTree.CardiovascularSystem(
          SystemicComponent(
            UseExerciseInput=true,
            cardiac_tissue(UseExercise=true),
            internal_iliac_T1_R218(UseExercise=true),
            profundus_T2_R224(UseExercise=true),
            anterior_tibial_T3_R230(UseExercise=true),
            posterior_tibial_T4_R236(UseExercise=true),
            posterior_tibial_T4_L214(UseExercise=true),
            anterior_tibial_T3_L208(UseExercise=true),
            profundus_T2_L202(UseExercise=true),
            internal_iliac_T1_L196(UseExercise=true)),
          phi_fixed(
            amplitude=1 - phi_fixed.offset,
            rising(displayUnit="s") = 1,
            width(displayUnit="s") = 120,
            falling(displayUnit="s") = 0,
            period(displayUnit="s") = 160,
            nperiod=1,
            offset=settings.chi_phi*(1 - settings.phi0) + settings.phi0,
            startTime=30),
          useAutonomousPhi(y=false),
          heartComponent(aorticValve(_Ron(displayUnit="(mmHg.s)/ml")=
                1333223.87415)));

        replaceable Modelica.Blocks.Sources.Ramp Exercise(
          offset=settings.chi_phi,
          startTime=30,
          height=1 - settings.chi_phi,
          duration=1) constrainedby Modelica.Blocks.Interfaces.SO
          annotation (Placement(transformation(extent={{-100,52},{-80,72}})));
        output Modelica.Units.SI.Time TEjection=heartComponent.aorticValve.Ts;
        output Modelica.Units.SI.Time TFilling=heartComponent.mitralValve.Ts;
        Physiolibrary.Types.VolumeFlowRate q_exercised_avg;
        Physiolibrary.Types.VolumeFlowRate q_exercised=
          SystemicComponent.internal_iliac_T1_R218.port_a.q + SystemicComponent.profundus_T2_R224.port_a.q + SystemicComponent.anterior_tibial_T3_R230.port_a.q + SystemicComponent.posterior_tibial_T4_R236.port_a.q + SystemicComponent.posterior_tibial_T4_L214.port_a.q + SystemicComponent.anterior_tibial_T3_L208.port_a.q + SystemicComponent.profundus_T2_L202.port_a.q + SystemicComponent.internal_iliac_T1_L196.port_a.q;
      equation
        der(q_exercised_avg)*5 = q_exercised - q_exercised_avg;
        connect(Exercise.y, SystemicComponent.exercise_input) annotation (Line(
              points={{-79,62},{-34,62},{-34,36},{-28,36}}, color={0,0,127}));
        annotation (experiment(
            StopTime=20,
            Interval=0.01,
            Tolerance=1e-07,
            __Dymola_Algorithm="Cvode"),
          __OpenModelica_simulationFlags(lv = "LOG_STATS", s = "cvode"));
      end CVS_exercise;

      model CVS_tiltable_exercise
        extends Tilt.CVS_tiltable(
          SystemicComponent(
            ulnar_T2_L90(UseExercise=false),
            radial_T1_L92(UseExercise=false),
            vertebral_L2(UseExercise=false),
            ulnar_T2_R42(UseExercise=false),
            radial_T1_R44(UseExercise=false),
            internal_carotid_R8_C(UseExercise=false),
            external_carotid_T2_R26(UseExercise=false),
            vertebral_R272(UseExercise=false),
            UseExerciseInput=true,
            cardiac_tissue(UseExercise=true),
            internal_iliac_T1_R218(UseExercise=true),
            profundus_T2_R224(UseExercise=true),
            anterior_tibial_T3_R230(UseExercise=true),
            posterior_tibial_T4_R236(UseExercise=true),
            posterior_tibial_T4_L214(UseExercise=true),
            anterior_tibial_T3_L208(UseExercise=true),
            profundus_T2_L202(UseExercise=true),
            internal_iliac_T1_L196(UseExercise=true)),
          condHRPhi(disconnected=false),
          phi_fixed(
            amplitude=0.1,
            rising(displayUnit="s") = 0,
            width(displayUnit="s") = 10,
            falling(displayUnit="s") = 0,
            period(displayUnit="s") = 60,
            nperiod=0,
            offset=1,
            startTime=40),
          useAutonomousPhi(y=false),
          condHeartPhi(disconnected=false),
          Tilt_ramp(duration=1, startTime=5),
          settings(tissues_V_max_breakPoint_Frac=1e-05));

        replaceable Modelica.Blocks.Sources.Ramp Exercise(
          startTime=0,
          height=1,
          duration=1) constrainedby Modelica.Blocks.Interfaces.SO
          annotation (Placement(transformation(extent={{-100,52},{-80,72}})));
      equation
        connect(SystemicComponent.exercise_input, Exercise.y) annotation (Line(
              points={{-28,36},{-42,36},{-42,62},{-79,62}}, color={0,0,127}));
        annotation (experiment(
            StopTime=60,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end CVS_tiltable_exercise;

      model test
        Modelica.Blocks.Sources.BooleanStep       useAutonomousPhi(
          startTime=30,
          startValue=true)
          annotation (Placement(transformation(extent={{-56,-28},{-36,-8}})));
                    Components.Signals.Stepping  Exercise(
          startTime=40,
          interval=40,
          increment=0.1,
          maxVal=1)
          annotation (Placement(transformation(extent={{-58,8},{-38,28}})));
        annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
              coordinateSystem(preserveAspectRatio=false)));
      end test;

      model CVS_Exercise_stepping
        extends CVS_exercise(
          SystemicComponent(UseBaroreflexOutput=false),
          redeclare Components.Signals.Stepping Exercise(
            startTime=40,
            interval=40,
            increment=0.1,
            maxVal=1),
          useAutonomousPhi(y=true),
          phi_fixed(nperiod=0, offset=settings.phi0));
        Modelica.Blocks.Math.Add add
          annotation (Placement(transformation(extent={{-18,38},{2,58}})));
        Modelica.Blocks.Math.Gain gain(k=0.75)
          annotation (Placement(transformation(extent={{-66,32},{-46,52}})));
      equation
        connect(phi_fixed.y, add.u1) annotation (Line(points={{-35,84},{-32,84},
                {-32,54},{-20,54}}, color={0,0,127}));
        connect(add.y, switch1.u1) annotation (Line(points={{3,48},{10,48},{10,
                70.2},{14.3,70.2}}, color={0,0,127}));
        connect(Exercise.y, gain.u) annotation (Line(points={{-79,62},{-76,62},
                {-76,42},{-68,42}}, color={0,0,127}));
        connect(gain.y, add.u2)
          annotation (Line(points={{-45,42},{-20,42}}, color={0,0,127}));
        annotation (experiment(
            StopTime=450,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"),
          __OpenModelica_simulationFlags(lv = "LOG_STATS", s = "cvode"));
      end CVS_Exercise_stepping;

      model CVS_exercise_noVenousConstriction
        extends CVS_exercise(settings(veins_UsePhiEffect=false));
      end CVS_exercise_noVenousConstriction;

      model CVS_exercise_max
        extends CVS_exercise(SystemicComponent(
            ulnar_T2_R42(UseExercise=true),
            radial_T1_R44(UseExercise=true),
            ulnar_T2_L90(UseExercise=true),
            radial_T1_L92(UseExercise=true)), settings(chi_phi=1));
      end CVS_exercise_max;
    end Exercise;

    package Valsalva

      package Experiments
        model OlufsenTriSeg_valsalva_KosinskiBaro
          extends CVS_valsalva(SystemicComponent(baroreflex_system(
                baroreflex(
                  fsn(displayUnit="Hz") = 0.036,
                  f1=0.0041,
                  g(displayUnit="1") = 0.54),
                baroreceptor_carotid(
                  delta0=0.55*delta0_factor,
                  epsilon(start=1.25),
                  s(start=0.91),
                  tau_s=30.0),
                baroreceptor_aortic(
                  delta0=0.6*delta0_factor,
                  epsilon(start=1.6),
                  s(start=0.81),
                  tau_s=30.0))), useAutonomousPhi(y=true));
                  parameter Physiolibrary.Types.Fraction delta0_factor=0.4;

          annotation (experiment(
              StopTime=80,
              Interval=0.02,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end OlufsenTriSeg_valsalva_KosinskiBaro;

        model OlufsenTriSeg_valsalva_KosinskiBaro_longTs
          extends Experiments.OlufsenTriSeg_valsalva_KosinskiBaro(
            SystemicComponent(baroreflex_system(
                baroreceptor_aortic(tau_s=60),
                baroreceptor_carotid(tau_s=60),
                baroreflex(f1=0.0031))),
            delta0_factor=0.25,
            settings(syst_art_UseVasoconstrictionEffect=false));
          annotation (experiment(
              StopTime=120,
              Interval=0.02,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end OlufsenTriSeg_valsalva_KosinskiBaro_longTs;

        model OlufsenTriSeg_valsalva_KosinskiBaro_lowp_phigain
          extends Experiments.OlufsenTriSeg_valsalva_KosinskiBaro_longTs(
              condSystemicPhi(phi_gain=2), condHeartPhi(phi_gain=2));
          annotation (experiment(
              StopTime=90,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end OlufsenTriSeg_valsalva_KosinskiBaro_lowp_phigain;

        model OlufsenTriSeg_valsalva_KosinskiBaro_tiltable_sit
          "tilting to sitting position. Zero degree tilt while sitting does not elevate lower limbs."
          extends Tilt.CVS_tiltable(SystemicComponent(
              femoral_R226(sinAlpha=0),
              popliteal_R228(sinAlpha=0),
              popliteal_L206(sinAlpha=0),
              femoral_L204(sinAlpha=0),
              femoral_vein_R42(sinAlpha=0),
              femoral_vein_R46(sinAlpha=0),
              popliteal_vein_R48(sinAlpha=0),
              femoral_vein_L76(sinAlpha=0),
              popliteal_vein_L78(sinAlpha=0),
              femoral_vein_L72(sinAlpha=0)), Tilt_ramp(startTime=1000));
        end OlufsenTriSeg_valsalva_KosinskiBaro_tiltable_sit;

        model OlufsenTriSeg_valsalva_exhale
          "LArge exhale at the end of the valsalva"
          extends CVS_valsalva;
        replaceable
        Modelica.Blocks.Sources.Trapezoid thoracic_pressure_ramp1(
            rising=0.5,
            width=0,
            falling=2,
            startTime=34.5,
            amplitude=20*133,
            period=200,
            nperiod=1,
            offset=0)     constrainedby Modelica.Blocks.Sources.Trapezoid
            annotation (Placement(transformation(extent={{-100,-20},{-80,0}})));
        equation
          connect(thoracic_pressure_ramp1.y,condTP_PC.u1)  annotation (Line(
                points={{-79,-10},{-76,-10},{-76,-50},{-70.54,-50}}, color={0,0,
                  127}));
        end OlufsenTriSeg_valsalva_exhale;

        model OlufsenTriSeg_valsalva_inhale
          extends OlufsenTriSeg_valsalva_exhale(thoracic_pressure_ramp1(
                amplitude=-10*133, startTime=35));
        end OlufsenTriSeg_valsalva_inhale;

        model OlufsenTriSeg_valsalva_NonLinPulmonary
          extends CVS_valsalva(          redeclare
              Components.Subsystems.Pulmonary.PulmonaryTriSeg_NonLinear
              pulmonaryComponent(UseThoracic_PressureInput=true, r_pa(Q_nom(
                    displayUnit="l/min"))));
        end OlufsenTriSeg_valsalva_NonLinPulmonary;

        model PulmonaryCompliance "Increased pulmonary compliance"
          extends CVS_valsalva(
          settings(
              V_PV_init=1e-06*(-1297.5 - 100),
              syst_abd_P_th_ratio=0.6,
              eta_vc=0.24,
              tissues_eta_Ra=4.003633,
              pulm_C_PV=9.0007389101479e-08), heartComponent(ra(enabled=false),
                la(enabled=false)));
        end PulmonaryCompliance;

        model ViscoElastic
          "Added viscoelastic resistance to 1% of the compliance"
          extends CVS_valsalva(pulmonaryComponent(R_pv_visc(Resistance=0.1/
                    settings.pulm_C_PV)), settings(
                veins_ignoreViscosityResistance=false));
        end ViscoElastic;

        model pleuralPressureDrop
          extends CVS_valsalva(pulmonaryComponent(UseAdenosineInput=true, r_pa(
                useConductanceInput=true,
                useNonlinearResistance=false,
                useNominalParametrization=false)), settings(
                pulm_tp_pleural_frac=1.2));
        replaceable
        Modelica.Blocks.Sources.Trapezoid thoracic_pressure_ramp1(
            amplitude=0,
            rising=0.1,
            width=14.8,
            falling=0.1,
            period=60,
            nperiod=-1,
            startTime=20)   constrainedby Modelica.Blocks.Sources.Trapezoid
            annotation (Placement(transformation(extent={{-100,-90},{-80,-70}})));
        equation
          connect(thoracic_pressure_ramp1.y, pulmonaryComponent.adenosine)
            annotation (Line(points={{-79,-80},{-34,-80},{-34,-48}}, color={0,0,
                  127}));
        end pleuralPressureDrop;

        model ComplianceViscoElasticPleural "All at once"
          extends CVS_valsalva(
          settings(
          pulm_tp_pleural_frac=0.9,
          V_PV_init=1e-06*(-1297.5 + 200), pulm_C_PV=3.7503078792283e-07),
        pulmonaryComponent(R_pv_visc(Resistance=0.01/settings.pulm_C_PV)));

        end ComplianceViscoElasticPleural;

        model delays "with delays estimated from pstras"
          extends CVS_valsalva(
            condSystemicPhi(delayTransport_Enabled=
                                         true, delayTransport_Time=
                                                         2));
        end delays;

        model CVS_valsalva_test
          extends Obsolete.partialCVS_ss_noHeart;
        //           SystemicComponent(
        //         baroreflex_system(
        //           baroreflex(phi_mean(start = 0.24930115, fixed = true), phi(start = 0.25175378, fixed = true)),
        //           baroreceptor_aortic(fbr_int(start = 18.098284, fixed = true), epsilon(start = 1.5408921, fixed = true), s(start = 0.80313325, fixed = true)),
        //           baroreceptor_carotid(fbr_int(start = 9.969681, fixed = true), epsilon(start = 1.1758231, fixed = true), s(start = 0.8915902, fixed = true))),
        //         ascending_aorta_A(q(start = 4.7891126e-06, fixed = true), vol1(start = 7.741325e-06, fixed = true), vol2(start = 7.740929e-06, fixed = true)),
        //         ascending_aorta_B(q_in(start = 9.5865125e-06, fixed = true), volume(start = 2.4455125e-05, fixed = true)),
        //         ascending_aorta_C(q_in(start = 1.5405387e-05, fixed = true), volume(start = 2.2619479e-05, fixed = true)),
        //         ascending_aorta_D(q_in(start = 2.3242754e-05, fixed = true), volume(start = 2.0650332e-05, fixed = true)),
        //         aortic_arch_C2(q_in(start = 3.0315494e-05, fixed = true), volume(start = 1.8890645e-05, fixed = true)),
        //         brachiocephalic_trunk_C4(q_in(start = -2.751741e-06, fixed = true), volume(start = 1.2878123e-05, fixed = true)),
        //         aortic_arch_C46(q_in(start = 3.944277e-05, fixed = true), volume(start = 1.1193709e-05, fixed = true)),
        //         aortic_arch_C64(q_in(start = 4.6177294e-05, fixed = true), volume(start = 7.684528e-06, fixed = true)),
        //         aortic_arch_C94(q_in(start = 4.6339173e-05, fixed = true), volume(start = 4.21373e-05, fixed = true)),
        //         thoracic_aorta_C96(q_in(start = 5.886148e-05, fixed = true), volume(start = 7.570479e-06, fixed = true)),
        //         thoracic_aorta_C100(q_in(start = 6.1021252e-05, fixed = true), volume(start = 5.8224477e-06, fixed = true)),
        //         thoracic_aorta_C104(q_in(start = 6.26352e-05, fixed = true), volume(start = 1.0967433e-05, fixed = true)),
        //         thoracic_aorta_C108(q_in(start = 6.549362e-05, fixed = true), volume(start = 3.6027632e-06, fixed = true)),
        //         thoracic_aorta_C112(q_in(start = 6.641022e-05, fixed = true), volume(start = 5.8809717e-05, fixed = true)),
        //         abdominal_aorta_C114(q_in(start = 7.069e-05, fixed = true), volume(start = 1.2160663e-06, fixed = true)),
        //         abdominal_aorta_C136(q_in(start = 6.039267e-05, fixed = true), volume(start = 5.10137e-06, fixed = true)),
        //         abdominal_aorta_C164(q_in(start = 5.334334e-05, fixed = true), volume(start = 1.514121e-06, fixed = true)),
        //         abdominal_aorta_C176(q_in(start = 4.406575e-05, fixed = true), volume(start = 4.069545e-06, fixed = true)),
        //         abdominal_aorta_C188(q_in(start = 3.495255e-05, fixed = true), volume(start = 1.6246277e-05, fixed = true)),
        //         abdominal_aorta_C192(q_in(start = 3.4464385e-05, fixed = true), volume(start = 1.0094919e-05, fixed = true)),
        //         celiac_trunk_C116(volume(start = 0.00035894633, fixed = true)),
        //         renal_L166(volume(start = 0.00032424013, fixed = true)),
        //         renal_R178(volume(start = 0.0003213272, fixed = true)),
        //         common_iliac_R216(q_in(start = 1.6922218e-05, fixed = true), volume(start = 8.394215e-06, fixed = true)),
        //         internal_iliac_T1_R218(volume(start = 0.00017648032, fixed = true)),
        //         external_iliac_R220(q_in(start = 1.0942256e-05, fixed = true), volume(start = 4.840243e-06, fixed = true)),
        //         femoral_R222(q_in(start = 1.0466925e-05, fixed = true), volume(start = 1.3855271e-06, fixed = true)),
        //         profundus_T2_R224(volume(start = 0.00020239198, fixed = true)),
        //         femoral_R226(q_in(start = 4.5208994e-06, fixed = true), volume(start = 1.16122155e-05, fixed = true)),
        //         popliteal_R228(q_in(start = 2.4283165e-06, fixed = true), volume(start = 3.5710325e-06, fixed = true)),
        //         anterior_tibial_T3_R230(volume(start = 2.6648477e-05, fixed = true)),
        //         popliteal_R232(q_in(start = 9.795816e-07, fixed = true), volume(start = 1.8123525e-07, fixed = true)),
        //         tibiofibular_trunk_R234(q_in(start = 9.604763e-07, fixed = true), volume(start = 7.368587e-07, fixed = true)),
        //         posterior_tibial_T4_R236(volume(start = 2.8990882e-05, fixed = true)),
        //         common_iliac_L194(q_in(start = 1.6825268e-05, fixed = true), volume(start = 8.029576e-06, fixed = true)),
        //         internal_iliac_T1_L196(volume(start = 0.0001764832, fixed = true)),
        //         external_iliac_L198(q_in(start = 1.0910256e-05, fixed = true), volume(start = 4.840974e-06, fixed = true)),
        //         femoral_L200(q_in(start = 1.0444083e-05, fixed = true), volume(start = 1.3857408e-06, fixed = true)),
        //         profundus_T2_L202(volume(start = 0.00020239464, fixed = true)),
        //         femoral_L204(q_in(start = 4.4969865e-06, fixed = true), volume(start = 1.1614383e-05, fixed = true)),
        //         popliteal_L206(q_in(start = 2.4235317e-06, fixed = true), volume(start = 3.571652e-06, fixed = true)),
        //         anterior_tibial_T3_L208(volume(start = 2.6648788e-05, fixed = true)),
        //         popliteal_L210(q_in(start = 9.795235e-07, fixed = true), volume(start = 1.8125257e-07, fixed = true)),
        //         tibiofibular_trunk_L212(q_in(start = 9.605702e-07, fixed = true), volume(start = 7.369516e-07, fixed = true)),
        //         posterior_tibial_T4_L214(volume(start = 2.8991275e-05, fixed = true)),
        //         subclavian_R28(q_in(start = 2.801184e-06, fixed = true), volume(start = 1.9780064e-06, fixed = true)),
        //         subclavian_R30(q_in(start = 1.4107255e-06, fixed = true), volume(start = 2.6014345e-06, fixed = true)),
        //         axillary_R32(q_in(start = 2.1425049e-06, fixed = true), volume(start = 2.9935559e-06, fixed = true)),
        //         brachial_R34(q_in(start = 2.7424371e-06, fixed = true), volume(start = 4.371171e-06, fixed = true)),
        //         ulnar_T2_R36(q_in(start = 1.7076428e-06, fixed = true), volume(start = 2.349348e-07, fixed = true)),
        //         ulnar_T2_R42(volume(start = 6.0989736e-05, fixed = true)),
        //         radial_T1_R44(volume(start = 5.0063023e-05, fixed = true)),
        //         subclavian_L66(q_in(start = 2.3535786e-06, fixed = true), volume(start = 4.704757e-06, fixed = true)),
        //         subclavian_L78(q_in(start = 1.6464196e-06, fixed = true), volume(start = 1.9308882e-06, fixed = true)),
        //         axillary_L80(q_in(start = 2.116359e-06, fixed = true), volume(start = 2.9886035e-06, fixed = true)),
        //         brachial_L82(q_in(start = 3.0593862e-06, fixed = true), volume(start = 8.3166725e-07, fixed = true)),
        //         ulnar_T2_L84(q_in(start = 1.6932565e-06, fixed = true), volume(start = 2.3472343e-07, fixed = true)),
        //         ulnar_T2_L90(volume(start = 6.096195e-05, fixed = true)),
        //         radial_T1_L92(volume(start = 5.3059044e-05, fixed = true)),
        //         common_carotid_R6_A(q_in(start = -1.2669333e-06, fixed = true), volume(start = 4.8281845e-06, fixed = true)),
        //         common_carotid_R6_B(q_in(start = 8.2757936e-07, fixed = true), volume(start = 4.1240546e-06, fixed = true)),
        //         common_carotid_R6_C(q_in(start = 2.6473351e-06, fixed = true), volume(start = 3.085043e-06, fixed = true)),
        //         internal_carotid_R8_A(q_in(start = 1.8176981e-06, fixed = true), volume(start = 1.2422475e-06, fixed = true)),
        //         internal_carotid_R8_B(q_in(start = 2.0452617e-06, fixed = true), volume(start = 7.8761275e-07, fixed = true)),
        //         internal_carotid_R8_C(volume(start = 7.226639e-05, fixed = true)),
        //         external_carotid_T2_R26(volume(start = 7.25409e-05, fixed = true)),
        //         common_carotid_L48_A(q_in(start = -3.0178282e-06, fixed = true), volume(start = 5.2247765e-06, fixed = true)),
        //         common_carotid_L48_B(q_in(start = -9.118605e-07, fixed = true), volume(start = 4.59612e-06, fixed = true)),
        //         common_carotid_L48_C(q_in(start = 9.799176e-07, fixed = true), volume(start = 4.0847412e-06, fixed = true)),
        //         common_carotid_L48_D(q_in(start = 2.678458e-06, fixed = true), volume(start = 3.3103743e-06, fixed = true)),
        //         internal_carotid_L50_A(q_in(start = 1.8520627e-06, fixed = true), volume(start = 1.2431815e-06, fixed = true)),
        //         internal_carotid_L50_B(q_in(start = 2.0649109e-06, fixed = true), volume(start = 7.881731e-07, fixed = true)),
        //         internal_carotid_L50_C(volume(start = 7.22633e-05, fixed = true)),
        //         external_carotid_T2_L62(volume(start = 7.2532275e-05, fixed = true)),
        //         vertebral_L2(volume(start = 6.668325e-05, fixed = true)),
        //         vertebral_R272(volume(start = 6.6695255e-05, fixed = true)),
        //         superior_vena_cava_C2(volume(start = 2.1616434e-06, fixed = true)),
        //         superior_vena_cava_C88(volume(start = 3.7250738e-06, fixed = true)),
        //         inferior_vena_cava_C8(volume(start = 3.2420462e-06, fixed = true)),
        //         hepatic_vein_T1_C10(volume(start = 1.2711224e-06, fixed = true)),
        //         inferior_vena_cava_C12(volume(start = 8.796935e-06, fixed = true)),
        //         inferior_vena_cava_C16(volume(start = 6.918212e-06, fixed = true)),
        //         renal_vein_T1_R18(volume(start = 2.0384666e-06, fixed = true)),
        //         inferior_vena_cava_C20(volume(start = 4.826637e-07, fixed = true)),
        //         renal_vein_T1_L22(volume(start = 1.8011691e-06, fixed = true)),
        //         inferior_vena_cava_C24(volume(start = 1.9253397e-05, fixed = true)),
        //         common_iliac_vein_L56(volume(start = 4.725373e-06, fixed = true)),
        //         common_iliac_vein_R26(volume(start = 4.343311e-06, fixed = true)),
        //         external_iliac_vein_R28(volume(start = 6.334687e-07, fixed = true)),
        //         internal_iliac_vein_T1_R30(volume(start = 2.7096576e-06, fixed = true)),
        //         external_iliac_vein_R32(volume(start = 7.3500237e-06, fixed = true)),
        //         femoral_vein_R34(volume(start = 3.1951808e-07, fixed = true)),
        //         femoral_vein_R38(volume(start = 2.533166e-06, fixed = true)),
        //         profunda_femoris_vein_T2_R40(volume(start = 7.0154774e-06, fixed = true)),
        //         femoral_vein_R42(volume(start = 1.7922623e-05, fixed = true)),
        //         femoral_vein_R46(volume(start = 9.870693e-07, fixed = true)),
        //         popliteal_vein_R48(volume(start = 4.0179275e-06, fixed = true)),
        //         anterior_tibial_vein_T4_R50(volume(start = 1.1430095e-06, fixed = true)),
        //         popliteal_vein_R52(volume(start = 8.937971e-07, fixed = true)),
        //         posterior_tibial_vein_T6_R54(volume(start = 1.7275721e-06, fixed = true)),
        //         external_iliac_vein_L58(volume(start = 6.3426654e-07, fixed = true)),
        //         internal_iliac_vein_T1_L60(volume(start = 2.7871251e-06, fixed = true)),
        //         external_iliac_vein_L62(volume(start = 7.216123e-06, fixed = true)),
        //         femoral_vein_L64(volume(start = 3.7354954e-07, fixed = true)),
        //         femoral_vein_L68(volume(start = 2.533252e-06, fixed = true)),
        //         profunda_femoris_vein_T2_L70(volume(start = 7.0156875e-06, fixed = true)),
        //         femoral_vein_L72(volume(start = 1.7923236e-05, fixed = true)),
        //         femoral_vein_L76(volume(start = 9.870969e-07, fixed = true)),
        //         popliteal_vein_L78(volume(start = 4.0180653e-06, fixed = true)),
        //         anterior_tibial_vein_T4_L80(volume(start = 1.1430578e-06, fixed = true)),
        //         popliteal_vein_L82(volume(start = 8.938334e-07, fixed = true)),
        //         posterior_tibial_vein_T6_L84(volume(start = 1.7276424e-06, fixed = true)),
        //         brachiocephalic_vein_R90(volume(start = 4.3799923e-06, fixed = true)),
        //         brachiocephalic_vein_L124(volume(start = 8.208929e-06, fixed = true)),
        //         vertebral_vein_R92(volume(start = 2.75401e-06, fixed = true)),
        //         brachiocephalic_vein_R94(volume(start = 9.929537e-07, fixed = true)),
        //         subclavian_vein_R96(volume(start = 4.8281834e-07, fixed = true)),
        //         internal_jugular_vein_R122(volume(start = 1.9084135e-05, fixed = true)),
        //         external_jugular_vein_R98(volume(start = 1.3387258e-06, fixed = true)),
        //         subclavian_vein_R100(volume(start = 1.9747608e-06, fixed = true)),
        //         axillary_vein_R102(volume(start = 6.9405933e-06, fixed = true)),
        //         brachial_vein_R104(volume(start = 1.3609908e-06, fixed = true)),
        //         brachial_vein_R114(volume(start = 1.22317e-06, fixed = true)),
        //         brachial_vein_R108(volume(start = 1.8800257e-07, fixed = true)),
        //         ulnar_vein_T7_R110(volume(start = 1.5671646e-06, fixed = true)),
        //         brachial_vein_R118(volume(start = 1.1817549e-07, fixed = true)),
        //         radial_vein_T3_R120(volume(start = 9.889869e-07, fixed = true)),
        //         vertebral_vein_L126(volume(start = 2.5753711e-06, fixed = true)),
        //         brachiocephalic_vein_L128(volume(start = 5.018355e-07, fixed = true)),
        //         subclavian_vein_L130(volume(start = 4.2939462e-07, fixed = true)),
        //         internal_jugular_vein_L156(volume(start = 1.1585479e-05, fixed = true)),
        //         external_jugular_vein_L132(volume(start = 1.3127751e-06, fixed = true)),
        //         subclavian_vein_L134(volume(start = 1.924739e-06, fixed = true)),
        //         axillary_vein_L136(volume(start = 7.0202304e-06, fixed = true)),
        //         brachial_vein_L138(q_out(start = 2.2906886e-06, fixed = true), volume(start = 1.3534399e-06, fixed = true)),
        //         brachial_vein_L148(volume(start = 1.2252591e-06, fixed = true)),
        //         brachial_vein_L142(volume(start = 1.8700365e-07, fixed = true)),
        //         ulnar_vein_T7_L144(volume(start = 1.563212e-06, fixed = true)),
        //         brachial_vein_L152(volume(start = 1.1839537e-07, fixed = true)),
        //         radial_vein_T3_L154(volume(start = 9.96403e-07, fixed = true)),
        //         mesenteric_artery(q_in(start = 7.315994e-06, fixed = true), volume(start = 6.354152e-06, fixed = true)),
        //         splanchnic_tissue(volume(start = 0.0002603238, fixed = true)),
        //         splanchnic_vein(volume(start = 1.0594096e-05, fixed = true)),
        //         coronary_arteries(q_in(start = 2.7237734e-06, fixed = true), volume(start = 3.6808633e-08, fixed = true)),
        //         cardiac_tissue(volume(start = 0.0001177309, fixed = true)),
        //         coronary_veins(volume(start = 2.386533e-08, fixed = true)),
        //         brachial_L82_HeartLevel(q_in(start = 2.655711e-06, fixed = true), volume(start = 3.5419416e-06, fixed = true))),
        //       heartComponent(
        //         tricuspidValve(open(start = true, fixed = true)),
        //         pulmonaryValve(open(start = false, fixed = true)),
        //         mitralValve(open(start = true, fixed = true), BP_max(start = 0.0, fixed = true), BP_min(start = 39996.0, fixed = true), CO_acc(start = 0.0, fixed = true)),
        //         aorticValve(open(start = false, fixed = true), BP_max(start = 15132.825, fixed = true), BP_min(start = 11252.298, fixed = true), CO_acc(start = 8.998715e-05, fixed = true)),
        //         ra(
        //         enabled=false,
        //            volume(start = 1.3404624e-05, fixed = true), currentWork(start = 0.3296081, fixed = true)),
        //         la(
        //         enabled=false,
        //            volume(start = 5.76426e-05, fixed = true), currentWork(start = 0.08366831, fixed = true)),
        //         calciumMechanics(initializeCardiac_cycle=false,
        //                          cardiac_cycle(start = 0.91466665 - settings.heart_drive_atr_Tact -1, fixed = true))),
        //       pulmonaryComponent(
        //         c_pa(volume(start = 4.78778e-05, fixed = true)),
        //         c_pv(volume(start = 0.002200931 + pulmonaryComponent.deadVolume - 2000e-6 + settings.V_PV_init - (-1297.5e-6), fixed = true))),
        //     settings(initByPressure=false),
        //     condTP_EP(disconnected=false),
        //     condTP_IP(disconnected=false));

        end CVS_valsalva_test;

        model CVS_VS_Smiths
          extends CVS_valsalva_test( heartComponent(redeclare
                Components.Subsystems.Heart.Auxiliary.Ventricle_Smith ventricles));
        end CVS_VS_Smiths;

        model CVS_VS_NoHeartBaro
          extends Obsolete.partialCVS_optimizedCombined( condHeartPhi(disconnected=true));
        end CVS_VS_NoHeartBaro;

        model CVS_VS_Smiths_LinPR
          extends CVS_VS_Smiths(pulmonaryComponent(r_pa(useNonlinearResistance=
                    false)));
        end CVS_VS_Smiths_LinPR;

        model CVS_VS_Smiths_ViscPV
          extends CVS_VS_Smiths(pulmonaryComponent(R_pv_visc(Resistance=1e7)));
        end CVS_VS_Smiths_ViscPV;

        model CVS_SimplestHeart
          extends CVS_valsalva_test( redeclare
              Components.Subsystems.Heart.Heart_SimplestVS heartComponent(
              UseFrequencyInput=true,
              UsePhiInput=true,
              UseThoracic_PressureInput=
                                       true));
        end CVS_SimplestHeart;

        model CVS_VS_nonlinPV
          extends CVS_valsalva(redeclare
              Components.Subsystems.Pulmonary.PulmonaryTriSegNonLOnearVeins
              pulmonaryComponent(UseThoracic_PressureInput=true, c_pv(
                volume_full=0.001,
                ZeroPressureVolume=1e-06,
                volume(start=0.00035, fixed=false),
                p_transm_full=4000,
                V0=0.00035)));
        end CVS_VS_nonlinPV;

        model CVS_VS_base
          extends CVS_valsalva_test(pulmonaryComponent(c_pv(
                volume_start=0.004,
                Compliance=2.250184727537e-07,
                volume(start=4000e-6))));
        end CVS_VS_base;

        model CVS_VS_suction
          extends CVS_valsalva_test(
            settings(heart_vntr_D_0_maxAct= 0),
            phi_fixed(
              amplitude=0.74,
              rising=15,
              width=13,
              falling=1,
              period=60,
              nperiod=-1),
            useAutonomousPhi(y=true));
        end CVS_VS_suction;

        model CVS_VS_TriSegL0 "Testing suction by increasing L0"
          extends CVS_VS_nonlinPV(heartComponent(ventricles(
                SEP_wall(L0=heart_vntr_L0),
                LV_wall(L0=heart_vntr_L0),
                RV_wall(L0=heart_vntr_L0))));

          parameter Real L0 = 0.907*1.5 "MOdifieer to L0";
        end CVS_VS_TriSegL0;

        model CVS_VS_pericardium
          extends CVS_valsalva;
          Components.Subsystems.Heart.Auxiliary.PericardiumPressure
            pericardiumTest(
            heartVolume=heartComponent.volume,
            V0=0.003,
            s=50) annotation (Placement(transformation(extent={{-102,-32},{-82,
                    -12}})));
        equation
          connect(pericardiumTest.p_out, condTP_PC.u1) annotation (Line(points={{-82,-22},
                  {-80,-22},{-80,-50},{-70.54,-50}}, color={0,0,127}));
        end CVS_VS_pericardium;

        model CVS_VS_AtrialValves
          extends CVS_valsalva(redeclare
              Components.Subsystems.Heart.Heart_TriSegMechanics_Simple_AtrialValves
              heartComponent(
              UseFrequencyInput=true,
              UsePhiInput=true,
              atrial_res_frac=2,
              UseThoracic_PressureInput=
                                       true));
        end CVS_VS_AtrialValves;

        model CVS_VS_AtrialInertance
          extends CVS_valsalva(redeclare
              Components.Subsystems.Heart.Heart_TriSegMechanics_Simple_AtrialInertia
              heartComponent(
              UseFrequencyInput=true,
              UsePhiInput=true,
              r_SystemicVenousInflow(inertance(displayUnit="mmHg.s2/ml")),
              UseThoracic_PressureInput=
                                       true));
        end CVS_VS_AtrialInertance;

        model CVS_VS_SLRest "Variation on SLRest"
          extends CVS_valsalva(heartComponent(ventricles(
                SEP_wall(Lsref=heart_vntr_Lsref),
                LV_wall(Lsref=heart_vntr_Lsref),
                RV_wall(Lsref=heart_vntr_Lsref))));
          parameter Real Lsref=1.5 " Resting SL, micron ";
        end CVS_VS_SLRest;

        model CVS_VS_NonLinSigmaPas
          "Piecewise non-linear sigmaPassive for creating negative tension during VS"
          extends CVS_valsalva(heartComponent(ventricles(
                LV_wall(k_passive_negative=k_passive_negative),
                SEP_wall(k_passive_negative=k_passive_negative),
                RV_wall(k_passive_negative=k_passive_negative))));
          parameter Real k_passive_negative=100 "mN / mm^2 / micro";
        end CVS_VS_NonLinSigmaPas;

        model CVS_VS_overfilled
          extends CVS_valsalva(pulmonaryComponent(
                               c_pv(volume(start=650e-6 + settings.V_PV_init), Compliance(
                    displayUnit="m3/Pa") = 0.000350/(8*133.332))), settings(V_PV_init=0));

        end CVS_VS_overfilled;

        model CVS_valsalvaEDP "Vaslalva from EDPoptimized baseline"

            //   settings(V_PV_init=1e-06*(-1297.5 + 200), pulm_C_PV=3.7503078792283e-07),
            // pulmonaryComponent(c_pv(volume_start=65e-6 + 2000e-6 + settings.V_PV_init +
            //         200e-6))
          extends
            ADAN_main.SystemicTree.Identification.Results.CVS_baseline_optimizedEDP(
              condHeartPhi(uMin=settings.phi0));

        // ADAN_main.SystemicTree.Identification.Results.Experiments.CVS_baseline(
        //     useAutonomousPhi(y=true),
        //     heartComponent(
        //       ra(enabled=false),
        //       la(enabled=false),
        //       ventricles(
        //         LV_wall(L0=1.6),
        //         SEP_wall(L0=1.6),
        //         RV_wall(L0=1.6))),
        //     settings(
        //       V_PV_init=0.00035,
        //       heart_R_vlv(displayUnit="(Pa.s)/m3"),
        //       heart_R_LA(displayUnit="(mmHg.min)/l") = 3199737.29796,
        //       heart_vntr_L0=1.6)
          annotation (experiment(
              StopTime=60,
              Interval=0.01,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode"), Documentation(info="<html>
<p>This model simulates Valsalva maneuver, based on the normal resting supine case</p>
</html>"));
        end CVS_valsalvaEDP;

        model CVS_valsalvaEDP_playground
          extends CVS_valsalvaEDP(settings(
              heart_R_LA(displayUnit="(dyn.s)/cm5") = 4000000.0,
              heart_atr_D_A(displayUnit="mmHg/ml") = 13332200.0,
              heart_vntr_k_passive=15.0,
              V_PV_init(displayUnit="ml") = 0.000235312,
              heart_R_vlv(displayUnit="(dyn.s)/cm5") = 300000.0,
              pulm_C_PV(displayUnit="ml/mmHg") = 1.5095E-07,
              heart_vntr_TS= 0.2,
              heart_vntr_TR= 0.25,
              heart_vntr_Tact= 0.15),                         heartComponent(
                mitralValve(_Ron(displayUnit="(dyn.s)/cm5") = 62500.0)));
        end CVS_valsalvaEDP_playground;

        model CVS_VS_RaCollagen
          extends CVS_valsalva(heartComponent(ra(enableCollagen=true, V0_col=
                    2e-05)));
          annotation (experiment(
              StopTime=60,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_VS_RaCollagen;

        model CVS_valsalva_overshootDecay
          "Experiments on how to decay the overshoot"
          import ADAN_main;

            //   settings(V_PV_init=1e-06*(-1297.5 + 200), pulm_C_PV=3.7503078792283e-07),
            // pulmonaryComponent(c_pv(volume_start=65e-6 + 2000e-6 + settings.V_PV_init +
            //         200e-6))
          extends CVS_valsalva(
            settings(tissues_tau_R=10),
            condHeartPhi(
              uMin=0.24,
              delayInt_Relax=3,
              delayIntegral_Enabled=
                           true,
              delayInt_Act=0.1),
            condSystemicPhi(
              uMin=0.24,
              delayInt_Relax=3,
              delayIntegral_Enabled=
                           true,
              delayInt_Act=0.1),
            condHRPhi(
              uMin=0.2,
              delayInt_Relax=0.2,
              delayIntegral_Enabled=
                           true,
              delayInt_Act=0.1),
            SystemicComponent(UseTiltInput=true));

        // ADAN_main.SystemicTree.Identification.Results.Experiments.CVS_baseline(
        //     useAutonomousPhi(y=true),
        //     heartComponent(
        //       ra(enabled=false),
        //       la(enabled=false),
        //       ventricles(
        //         LV_wall(L0=1.6),
        //         SEP_wall(L0=1.6),
        //         RV_wall(L0=1.6))),
        //     settings(
        //       V_PV_init=0.00035,
        //       heart_R_vlv(displayUnit="(Pa.s)/m3"),
        //       heart_R_LA(displayUnit="(mmHg.min)/l") = 3199737.29796,
        //       heart_vntr_L0=1.6)
          replaceable Modelica.Blocks.Sources.Ramp Tilt_ramp(
            height=Modelica.Constants.pi/3,
            startTime=0,
            duration=1)   constrainedby Modelica.Blocks.Sources.Ramp
            annotation (Placement(transformation(extent={{-98,36},{-78,56}})));
        equation
          connect(Tilt_ramp.y, SystemicComponent.tilt_input) annotation (Line(points={{-77,
                  46},{-40,46},{-40,32},{-22,32},{-22,20}}, color={0,0,127}));
          annotation (experiment(
              StopTime=60,
              Interval=0.01,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode",
            __OpenModelica_simulationFlags(lv = "LOG_STATS", s = "cvode")), Documentation(info="<html>
<p>This model simulates Valsalva maneuver, based on the normal resting supine case</p>
</html>"));
        end CVS_valsalva_overshootDecay;

        model CVS_valsalva_splanchnicVol
          extends CVS_valsalva(SystemicComponent(tissueParameters(
                  qf_splachnic_tissue=0.18), redeclare
                Components.Subsystems.Systemic.Organs.Splanchnic.Splanchnic_circulation
                splanchnic_tissue(volume(start=0.001, fixed=false))),
              thoracic_pressure_ramp(startTime=60));
          annotation (experiment(
              StopTime=100,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_valsalva_splanchnicVol;

        model CVS_valsalva_splanchnicVolBaro
          extends CVS_valsalva(
            thoracic_pressure_ramp(startTime=60),
            SystemicComponent(splanchnic_tissue(
                volume(start=0.0009),
                C=5.6254618188424e-07,
                Ra(displayUnit="(mmHg.min)/l") = 1487877843.5514,
                Rv(displayUnit="(mmHg.min)/l") = 79993432.449,
                nominal_pressure=1333.22387415)),
            useAutonomousPhi(y=true));
          annotation (experiment(
              StopTime=100,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_valsalva_splanchnicVolBaro;

        model CVS_valsalva_longbaro
          import ADAN_main;

            //   settings(V_PV_init=1e-06*(-1297.5 + 200), pulm_C_PV=3.7503078792283e-07),
            // pulmonaryComponent(c_pv(volume_start=65e-6 + 2000e-6 + settings.V_PV_init +
            //         200e-6))
          extends ADAN_main.SystemicTree.CardiovascularSystem(
            useAutonomousPhi(y=true),
            SystemicComponent(UseThoracic_PressureInput=true, baroreflex_system(
                  baroreflex(phi(fixed=false)))),
            pulmonaryComponent(UseThoracic_PressureInput=true),
            heartComponent(UseThoracic_PressureInput=true, aorticValve(
                  useChatteringProtection=true),
              pulmonaryValve(calculateAdditionalMetrics=true)),
            settings(baro_tau_s=93,
                     dummy=2));

        // ADAN_main.SystemicTree.Identification.Results.Experiments.CVS_baseline(
        //     useAutonomousPhi(y=true),
        //     heartComponent(
        //       ra(enabled=false),
        //       la(enabled=false),
        //       ventricles(
        //         LV_wall(L0=1.6),
        //         SEP_wall(L0=1.6),
        //         RV_wall(L0=1.6))),
        //     settings(
        //       V_PV_init=0.00035,
        //       heart_R_vlv(displayUnit="(Pa.s)/m3"),
        //       heart_R_LA(displayUnit="(mmHg.min)/l") = 3199737.29796,
        //       heart_vntr_L0=1.6)
        replaceable
        Modelica.Blocks.Sources.Trapezoid thoracic_pressure_ramp(
            nperiod=-1,
            amplitude=40*133.32,
            rising=0.1,
            width=14.8,
            falling=0.1,
            period=60,
            startTime=20)   constrainedby Modelica.Blocks.Sources.Trapezoid
            annotation (Placement(transformation(extent={{-100,-70},{-80,-50}})));
          ADAN_main.Components.Signals.ConditionalConnection
                                                   condTP_PC(
            disconnected=false,
            disconnectedValue=0,
            phi_gain=settings.pulm_tp_pleural_frac,
            const_offset=0) "Thoracic pressure effect on pericardium."
            annotation (Placement(transformation(extent={{-69,-59.333},{-55,
                    -47.333}})));
          ADAN_main.Components.Signals.ConditionalConnection
                                                   condTP_IP(
            disconnected=false,
            disconnectedValue=0,
            phi0=0,
            phi_gain=1,
            const_offset=0)
            "Thoracic pressure effect on intra-pleural circulatory (i.e. lung tissue only)"
            annotation (Placement(transformation(extent={{-69,-79.333},{-55,
                    -67.333}})));
          ADAN_main.Components.Signals.ConditionalConnection
                                                   condTP_EP1(
            disconnected=false,
            disconnectedValue=0,
            phi_gain=settings.pulm_tp_pleural_frac,
            const_offset=0) "Thoracic pressure effect on extra-pleural circulatory"
            annotation (Placement(transformation(extent={{-69,-41.333},{-55,
                    -29.3333}})));
        equation
          connect(thoracic_pressure_ramp.y,condTP_PC. u) annotation (Line(points={{-79,-60},
                  {-74,-60},{-74,-53.333},{-70.4,-53.333}},
                                                    color={0,0,127}));
          connect(condTP_PC.y, heartComponent.thoracic_pressure_input) annotation (Line(
                points={{-54.3,-53.333},{-26,-53.333},{-26,-32}},
                                                          color={0,0,127}));
          connect(condTP_IP.y, pulmonaryComponent.thoracic_pressure) annotation (Line(
                points={{-54.3,-73.333},{-40,-73.333},{-40,-62},{-24,-62}},
                                                                    color={0,0,127}));
          connect(condTP_IP.u,thoracic_pressure_ramp. y) annotation (Line(points={{-70.4,
                  -73.333},{-74,-73.333},{-74,-60},{-79,-60}},   color={0,0,127}));
          connect(condTP_EP1.y, SystemicComponent.thoracic_pressure_input)
            annotation (Line(points={{-54.3,-35.3332},{-46,-35.3332},{-46,20},{
                  -34,20}},
                color={0,0,127}));
          connect(condTP_EP1.u,condTP_PC. u) annotation (Line(points={{-70.4,
                  -35.3332},{-74,-35.3332},{-74,-53.333},{-70.4,-53.333}},
                                                    color={0,0,127}));
          annotation (experiment(
              StopTime=60,
              Interval=0.01,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode",
            __OpenModelica_simulationFlags(lv = "LOG_STATS", s = "cvode")), Documentation(info="<html>
<p>This model simulates Valsalva maneuver, based on the normal resting supine case</p>
</html>"));
        end CVS_valsalva_longbaro;
      end Experiments;

      model CVS_valsalva
        import ADAN_main;

          //   settings(V_PV_init=1e-06*(-1297.5 + 200), pulm_C_PV=3.7503078792283e-07),
          // pulmonaryComponent(c_pv(volume_start=65e-6 + 2000e-6 + settings.V_PV_init +
          //         200e-6))
        extends ADAN_main.SystemicTree.CardiovascularSystem(
          useAutonomousPhi(y=true),
          SystemicComponent(UseThoracic_PressureInput=true, baroreflex_system(
                baroreflex(phi(fixed=false))),
            renal_L166(tau_R_K_afferent=60),
            renal_R178(tau_R_K_afferent=60)),
          pulmonaryComponent(UseThoracic_PressureInput=true),
          heartComponent(UseThoracic_PressureInput=true, aorticValve(
                useChatteringProtection=true),
            pulmonaryValve(calculateAdditionalMetrics=true)),
          settings(baro_tau_s=93,
            baro_fsn(displayUnit="Hz"),
            hideLevel0=true,
            hideLevel1=true,
                   dummy=2));

      // ADAN_main.SystemicTree.Identification.Results.Experiments.CVS_baseline(
      //     useAutonomousPhi(y=true),
      //     heartComponent(
      //       ra(enabled=false),
      //       la(enabled=false),
      //       ventricles(
      //         LV_wall(L0=1.6),
      //         SEP_wall(L0=1.6),
      //         RV_wall(L0=1.6))),
      //     settings(
      //       V_PV_init=0.00035,
      //       heart_R_vlv(displayUnit="(Pa.s)/m3"),
      //       heart_R_LA(displayUnit="(mmHg.min)/l") = 3199737.29796,
      //       heart_vntr_L0=1.6)
      replaceable
      Modelica.Blocks.Sources.Trapezoid thoracic_pressure_ramp(
          nperiod=2,
          amplitude=40*133.32,
          rising=0.1,
          width=14.8,
          falling=0.1,
          period=60,
          startTime=20)   constrainedby Modelica.Blocks.Sources.Trapezoid
          annotation (Placement(transformation(extent={{-100,-70},{-80,-50}})));
        ADAN_main.Components.Signals.ConditionalConnection
                                                 condTP_PC(
          disconnected=false,
          disconnectedValue=0,
          phi_gain=settings.pulm_tp_pleural_frac,
          const_offset=0) "Thoracic pressure effect on pericardium."
          annotation (Placement(transformation(extent={{-69,-59.333},{-55,
                  -47.333}})));
        ADAN_main.Components.Signals.ConditionalConnection
                                                 condTP_IP(
          disconnected=false,
          disconnectedValue=0,
          phi0=0,
          phi_gain=1,
          const_offset=0)
          "Thoracic pressure effect on intra-pleural circulatory (i.e. lung tissue only)"
          annotation (Placement(transformation(extent={{-69,-79.333},{-55,
                  -67.333}})));
        ADAN_main.Components.Signals.ConditionalConnection
                                                 condTP_EP1(
          disconnected=false,
          disconnectedValue=0,
          phi_gain=settings.pulm_tp_pleural_frac,
          const_offset=0) "Thoracic pressure effect on extra-pleural circulatory"
          annotation (Placement(transformation(extent={{-69,-41.333},{-55,
                  -29.3333}})));
      equation
        connect(thoracic_pressure_ramp.y,condTP_PC. u) annotation (Line(points={{-79,-60},
                {-74,-60},{-74,-53.333},{-70.4,-53.333}},
                                                  color={0,0,127}));
        connect(condTP_PC.y, heartComponent.thoracic_pressure_input) annotation (Line(
              points={{-54.3,-53.333},{-26,-53.333},{-26,-32}},
                                                        color={0,0,127}));
        connect(condTP_IP.y, pulmonaryComponent.thoracic_pressure) annotation (Line(
              points={{-54.3,-73.333},{-40,-73.333},{-40,-62},{-24,-62}},
                                                                  color={0,0,127}));
        connect(condTP_IP.u,thoracic_pressure_ramp. y) annotation (Line(points={{-70.4,
                -73.333},{-74,-73.333},{-74,-60},{-79,-60}},   color={0,0,127}));
        connect(condTP_EP1.y, SystemicComponent.thoracic_pressure_input)
          annotation (Line(points={{-54.3,-35.3332},{-46,-35.3332},{-46,20},{
                -34,20}},
              color={0,0,127}));
        connect(condTP_EP1.u,condTP_PC. u) annotation (Line(points={{-70.4,
                -35.3332},{-74,-35.3332},{-74,-53.333},{-70.4,-53.333}},
                                                  color={0,0,127}));
        annotation (experiment(
            StopTime=60,
            Interval=0.01,
            Tolerance=1e-07,
            __Dymola_Algorithm="Cvode",
          __OpenModelica_simulationFlags(lv = "LOG_STATS", s = "cvode")), Documentation(info="<html>
<p>This model simulates Valsalva maneuver, based on the normal resting supine case</p>
</html>"));
      end CVS_valsalva;

      model CVS_valsalva_overshootTests
        extends CVS_valsalva(settings(tissues_tau_R=10));
      end CVS_valsalva_overshootTests;

      model CVS_Valsalva_eta_vc
        extends CVS_valsalva(settings(eta_vc=0.5));
      end CVS_Valsalva_eta_vc;

      model CVS_valsalva_overload
        import ADAN_main;

          //   settings(V_PV_init=1e-06*(-1297.5 + 200), pulm_C_PV=3.7503078792283e-07),
          // pulmonaryComponent(c_pv(volume_start=65e-6 + 2000e-6 + settings.V_PV_init +
          //         200e-6))
        extends ADAN_main.SystemicTree.Baseline.CVS_baseline_overload1000_ss(
          useAutonomousPhi(y=true),
          SystemicComponent(UseThoracic_PressureInput=true, baroreflex_system(
                baroreflex(phi(fixed=false)))),
          pulmonaryComponent(UseThoracic_PressureInput=true),
          heartComponent(UseThoracic_PressureInput=true, aorticValve(
                useChatteringProtection=true),
            pulmonaryValve(calculateAdditionalMetrics=true)),
          settings(dummy=2));

      // ADAN_main.SystemicTree.Identification.Results.Experiments.CVS_baseline(
      //     useAutonomousPhi(y=true),
      //     heartComponent(
      //       ra(enabled=false),
      //       la(enabled=false),
      //       ventricles(
      //         LV_wall(L0=1.6),
      //         SEP_wall(L0=1.6),
      //         RV_wall(L0=1.6))),
      //     settings(
      //       V_PV_init=0.00035,
      //       heart_R_vlv(displayUnit="(Pa.s)/m3"),
      //       heart_R_LA(displayUnit="(mmHg.min)/l") = 3199737.29796,
      //       heart_vntr_L0=1.6)
      replaceable
      Modelica.Blocks.Sources.Trapezoid thoracic_pressure_ramp(
          nperiod=-1,
          amplitude=40*133.32,
          rising=0.1,
          width=14.8,
          falling=0.1,
          period=60,
          startTime=20)   constrainedby Modelica.Blocks.Sources.Trapezoid
          annotation (Placement(transformation(extent={{-100,-70},{-80,-50}})));
        ADAN_main.Components.Signals.ConditionalConnection
                                                 condTP_PC(
          disconnected=false,
          disconnectedValue=0,
          phi_gain=settings.pulm_tp_pleural_frac,
          const_offset=0) "Thoracic pressure effect on pericardium."
          annotation (Placement(transformation(extent={{-69,-59.333},{-55,
                  -47.333}})));
        ADAN_main.Components.Signals.ConditionalConnection
                                                 condTP_IP(
          disconnected=false,
          disconnectedValue=0,
          phi0=0,
          phi_gain=1,
          const_offset=0)
          "Thoracic pressure effect on intra-pleural circulatory (i.e. lung tissue only)"
          annotation (Placement(transformation(extent={{-69,-79.333},{-55,
                  -67.333}})));
        ADAN_main.Components.Signals.ConditionalConnection
                                                 condTP_EP1(
          disconnected=false,
          disconnectedValue=0,
          phi_gain=settings.pulm_tp_pleural_frac,
          const_offset=0) "Thoracic pressure effect on extra-pleural circulatory"
          annotation (Placement(transformation(extent={{-69,-41.333},{-55,
                  -29.3333}})));
      equation
        connect(thoracic_pressure_ramp.y,condTP_PC. u) annotation (Line(points={{-79,-60},
                {-74,-60},{-74,-53.333},{-70.4,-53.333}},
                                                  color={0,0,127}));
        connect(condTP_PC.y, heartComponent.thoracic_pressure_input) annotation (Line(
              points={{-54.3,-53.333},{-26,-53.333},{-26,-32}},
                                                        color={0,0,127}));
        connect(condTP_IP.y, pulmonaryComponent.thoracic_pressure) annotation (Line(
              points={{-54.3,-73.333},{-40,-73.333},{-40,-62},{-24,-62}},
                                                                  color={0,0,127}));
        connect(condTP_IP.u,thoracic_pressure_ramp. y) annotation (Line(points={{-70.4,
                -73.333},{-74,-73.333},{-74,-60},{-79,-60}},   color={0,0,127}));
        connect(condTP_EP1.y, SystemicComponent.thoracic_pressure_input)
          annotation (Line(points={{-54.3,-35.3332},{-46,-35.3332},{-46,20},{
                -34,20}},
              color={0,0,127}));
        connect(condTP_EP1.u,condTP_PC. u) annotation (Line(points={{-70.4,
                -35.3332},{-74,-35.3332},{-74,-53.333},{-70.4,-53.333}},
                                                  color={0,0,127}));
        annotation (experiment(
            StopTime=60,
            Interval=0.01,
            Tolerance=1e-07,
            __Dymola_Algorithm="Cvode",
          __OpenModelica_simulationFlags(lv = "LOG_STATS", s = "cvode")), Documentation(info="<html>
<p>This model simulates Valsalva maneuver, based on the normal resting supine case</p>
</html>"));
      end CVS_valsalva_overload;
    end Valsalva;

    package Variations
      "Experimental variations of the base model, e.g. linear veins etc"
      package UseCases
        model UseCase_baseline
          extends UseCase_base;
        end UseCase_baseline;

        model UseCase_exercise "Simplified heart model"
          extends UseCase_base(
            SystemicComponent(
              ulnar_T2_L90(UseExercise=false),
              radial_T1_L92(UseExercise=false),
              vertebral_L2(UseExercise=false),
              ulnar_T2_R42(UseExercise=false),
              radial_T1_R44(UseExercise=false),
              internal_carotid_R8_C(UseExercise=false),
              external_carotid_T2_R26(UseExercise=false),
              vertebral_R272(UseExercise=false),
              UseExerciseInput=true,
              cardiac_tissue(UseExercise=true),
              internal_iliac_T1_R218(UseExercise=true),
              profundus_T2_R224(UseExercise=true),
              anterior_tibial_T3_R230(UseExercise=true),
              posterior_tibial_T4_R236(UseExercise=true),
              posterior_tibial_T4_L214(UseExercise=true),
              anterior_tibial_T3_L208(UseExercise=true),
              profundus_T2_L202(UseExercise=true),
              internal_iliac_T1_L196(UseExercise=true)),
            condHRPhi(disconnected=false),
            phi_fixed(
              amplitude=0.75,
              rising(displayUnit="s") = 0,
              width(displayUnit="s") = 200,
              falling(displayUnit="s") = 0,
              period(displayUnit="s"),
              nperiod=1,
              offset=0.25,
              startTime=0),
            useAutonomousPhi(y=false),
            condHeartPhi(disconnected=false));

          replaceable Modelica.Blocks.Sources.Ramp Exercise(
            startTime=0,
            height=1,
            duration=0) constrainedby Modelica.Blocks.Interfaces.SO
            annotation (Placement(transformation(extent={{-76,52},{-56,72}})));
          output Modelica.Units.SI.Time TEjection=heartComponent.aorticValve.Ts;
          output Modelica.Units.SI.Time TFilling=heartComponent.mitralValve.Ts;
        equation
          connect(Exercise.y, SystemicComponent.exercise_input) annotation (
              Line(points={{-55,62},{-34,62},{-34,36},{-28,36}}, color={0,0,127}));
          annotation (experiment(
              StopTime=60,
              Interval=0.02,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end UseCase_exercise;

        model UseCase_tiltable
          extends UseCase_base(redeclare
              Components.Subsystems.Systemic.Postures.SystemicAV_SupineTilt
              SystemicComponent(
              UseThoracic_PressureInput=true,
              UsePhi_Input=true,
              UseTiltInput=true,
              UseExerciseInput=false));

          replaceable Modelica.Blocks.Sources.Ramp Tilt_ramp(
            height=Modelica.Constants.pi/3,
            startTime=10,
            duration=1)   constrainedby Modelica.Blocks.Interfaces.SO
            annotation (Placement(transformation(extent={{-100,22},{-80,42}})));
        equation
          connect(Tilt_ramp.y, SystemicComponent.tilt_input) annotation (Line(
                points={{-79,32},{-22,32},{-22,20}}, color={0,0,127}));
          annotation (experiment(
              StopTime=60,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end UseCase_tiltable;

        model UseCase_valsalva
          extends UseCase_base(
            phi_fixed(
              amplitude=-0.0025,
              rising=0,
              width=60,
              falling=0,
              nperiod=1,
              startTime=30),
            useAutonomousPhi(y=true),
            SystemicComponent(UseThoracic_PressureInput=true),
            pulmonaryComponent(UseThoracic_PressureInput=true),
            heartComponent(UseThoracic_PressureInput=true));
        replaceable
        Modelica.Blocks.Sources.Trapezoid thoracic_pressure_ramp(
            nperiod=-1,
            amplitude=40*133.32,
            rising=0.1,
            width=14.8,
            falling=0.1,
            period=60,
            startTime=20)   constrainedby Modelica.Blocks.Sources.Trapezoid
            annotation (Placement(transformation(extent={{-124,-52},{-104,-32}})));
          Components.Signals.ConditionalConnection condTP_EP1(
            disconnected=false,
            disconnectedValue=0,
            phi_gain=settings.pulm_tp_pleural_frac,
            const_offset=0) "Thoracic pressure effect on extra-pleural circulatory"
            annotation (Placement(transformation(extent={{-95,-47.3333},{-81,
                    -35.3333}})));
        equation
          connect(condTP_EP1.y, SystemicComponent.thoracic_pressure_input)
            annotation (Line(points={{-80.3,-42},{-72,-42},{-72,20},{-34,20}},
                color={0,0,127}));
          connect(heartComponent.thoracic_pressure_input, SystemicComponent.thoracic_pressure_input)
            annotation (Line(points={{-26,-32},{-72,-32},{-72,20},{-34,20}},
                color={0,0,127}));
          connect(pulmonaryComponent.thoracic_pressure, SystemicComponent.thoracic_pressure_input)
            annotation (Line(points={{-24,-62},{-72,-62},{-72,20},{-34,20}},
                color={0,0,127}));
          connect(condTP_EP1.u, thoracic_pressure_ramp.y) annotation (Line(
                points={{-96.4,-42},{-100,-42},{-100,-42},{-103,-42}}, color={0,
                  0,127}));
          annotation (experiment(
              StopTime=60,
              Interval=0.02,
              Tolerance=1e-09,
              __Dymola_Algorithm="Cvode"));
        end UseCase_valsalva;

        model UseCase_tiltable_linearVeins
          extends Auxiliary.partialCVS_optimized_ss(
              SystemicComponent(UseTiltInput=true, redeclare model
                Systemic_vein =
                  ADAN_main.Components.Subsystems.Systemic.Vessel_modules.Vein_linear));

          replaceable Modelica.Blocks.Sources.Ramp Tilt_ramp(
            height=Modelica.Constants.pi/3,
            startTime=1000,
            duration=1)   constrainedby Modelica.Blocks.Interfaces.SO
            annotation (Placement(transformation(extent={{-100,22},{-80,42}})));
        equation
          connect(Tilt_ramp.y, SystemicComponent.tilt_input) annotation (Line(
                points={{-79,32},{-22,32},{-22,20}}, color={0,0,127}));
          annotation (experiment(
              StopTime=60,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end UseCase_tiltable_linearVeins;
      end UseCases;

      model UseCase_base
        "Base class for model use cases. Choose any version to extend from here to affect all use cases. Built for testing model variants for all use cases."
        extends CardiovascularSystem;
        // extends BreathingSignal;
        //  extends NoVenousValves;
        //  extends MaxVenousValves;
        //  extends OlufsenTriSeg_opt_LinearVeins_init;

      end UseCase_base;

      model OlufsenTriSeg_opt_LinearVeins "Experiment with linear veins"
        extends Identification.Results.Experiments.OlufsenTriSeg_optimized(
          SystemicComponent(redeclare model Systemic_vein =
                ADAN_main.Components.Subsystems.Systemic.Vessel_modules.vp_vein_linear),
          useAutonomousPhi(y=false),
          settings(V_PV_init(displayUnit="ml") = -0.0002, experimental_C_factor=2.0));

      end OlufsenTriSeg_opt_LinearVeins;

    model OlufsenTriSeg_opt_LinearVeins_init
        "Steady state initialization from 2020-07-14 14:34:06.566249 at time 300.0"
        extends OlufsenTriSeg_opt_LinearVeins(
          condTP_PC(disconnected=true),
          SystemicComponent(
            baroreflex_system(
              baroreflex(phi(start=0.2524993, fixed=true), phi_mean(start=
                      0.24710603, fixed=true)),
              baroreceptor_aortic(
                fbr_int(start=21.031265, fixed=true),
                epsilon(start=1.6364919, fixed=true),
                s(start=0.7869363, fixed=true)),
              baroreceptor_carotid(
                fbr_int(start=12.556395, fixed=true),
                epsilon(start=1.2111481, fixed=true),
                s(start=0.87278914, fixed=true))),
            ascending_aorta_A(
              q(start=5.5263713e-06, fixed=true),
              vol1(start=8.887012e-06, fixed=true),
              vol2(start=8.887294e-06, fixed=true)),
            ascending_aorta_B(volume(start=2.6418493e-05, fixed=true)),
            ascending_aorta_C(volume(start=2.443474e-05, fixed=true)),
            ascending_aorta_D(volume(start=2.230859e-05, fixed=true)),
            aortic_arch_C2(volume(start=2.041107e-05, fixed=true)),
            brachiocephalic_trunk_C4(volume(start=1.38132045e-05, fixed=true)),
            aortic_arch_C46(volume(start=1.20968025e-05, fixed=true)),
            aortic_arch_C64(volume(start=8.30671e-06, fixed=true)),
            aortic_arch_C94(volume(start=4.5674187e-05, fixed=true)),
            thoracic_aorta_C96(volume(start=8.207914e-06, fixed=true)),
            thoracic_aorta_C100(volume(start=6.317249e-06, fixed=true)),
            thoracic_aorta_C104(volume(start=1.1918243e-05, fixed=true)),
            thoracic_aorta_C108(volume(start=3.9169763e-06, fixed=true)),
            thoracic_aorta_C112(volume(start=6.508781e-05, fixed=true)),
            abdominal_aorta_C114(volume(start=1.344449e-06, fixed=true)),
            abdominal_aorta_C136(volume(start=5.648051e-06, fixed=true)),
            abdominal_aorta_C164(volume(start=1.6767207e-06, fixed=true)),
            abdominal_aorta_C176(volume(start=4.511394e-06, fixed=true)),
            abdominal_aorta_C188(volume(start=1.810299e-05, fixed=true)),
            abdominal_aorta_C192(volume(start=1.126774e-05, fixed=true)),
            celiac_trunk_C116(volume(start=0.00035785275, fixed=true)),
            renal_L166(volume(start=0.00032325642, fixed=true)),
            renal_R178(volume(start=0.00032035005, fixed=true)),
            common_iliac_R216(volume(start=9.327678e-06, fixed=true)),
            internal_iliac_T1_R218(volume(start=0.00017593219, fixed=true)),
            external_iliac_R220(volume(start=5.1446536e-06, fixed=true)),
            femoral_R222(volume(start=1.4707689e-06, fixed=true)),
            profundus_T2_R224(volume(start=0.00020175368, fixed=true)),
            femoral_R226(volume(start=1.2250596e-05, fixed=true)),
            popliteal_R228(volume(start=3.7541602e-06, fixed=true)),
            anterior_tibial_T3_R230(volume(start=2.663892e-05, fixed=true)),
            popliteal_R232(volume(start=1.8581432e-07, fixed=true)),
            tibiofibular_trunk_R234(volume(start=7.554153e-07, fixed=true)),
            posterior_tibial_T4_R236(volume(start=2.8912997e-05, fixed=true)),
            common_iliac_L194(volume(start=8.918453e-06, fixed=true)),
            internal_iliac_T1_L196(volume(start=0.0001759355, fixed=true)),
            external_iliac_L198(volume(start=5.1444567e-06, fixed=true)),
            femoral_L200(volume(start=1.4707241e-06, fixed=true)),
            profundus_T2_L202(volume(start=0.00020175676, fixed=true)),
            femoral_L204(volume(start=1.2251153e-05, fixed=true)),
            popliteal_L206(volume(start=3.7543484e-06, fixed=true)),
            anterior_tibial_T3_L208(volume(start=2.6639293e-05, fixed=true)),
            popliteal_L210(volume(start=1.8581943e-07, fixed=true)),
            tibiofibular_trunk_L212(volume(start=7.5545944e-07, fixed=true)),
            posterior_tibial_T4_L214(volume(start=2.8913468e-05, fixed=true)),
            subclavian_R28(volume(start=2.1108465e-06, fixed=true)),
            subclavian_R30(volume(start=2.76138e-06, fixed=true)),
            axillary_R32(volume(start=3.1625902e-06, fixed=true)),
            brachial_R34(volume(start=4.6393066e-06, fixed=true)),
            ulnar_T2_R36(volume(start=2.4197087e-07, fixed=true)),
            ulnar_T2_R42(volume(start=6.0820006e-05, fixed=true)),
            radial_T1_R44(volume(start=5.0003237e-05, fixed=true)),
            subclavian_L66(volume(start=5.0194644e-06, fixed=true)),
            subclavian_L78(volume(start=2.048446e-06, fixed=true)),
            axillary_L80(volume(start=3.161843e-06, fixed=true)),
            brachial_L82(volume(start=8.523778e-07, fixed=true)),
            ulnar_T2_L84(volume(start=2.4154994e-07, fixed=true)),
            ulnar_T2_L90(volume(start=6.078322e-05, fixed=true)),
            radial_T1_L92(volume(start=5.299981e-05, fixed=true)),
            common_carotid_R6_A(volume(start=5.270027e-06, fixed=true)),
            common_carotid_R6_B(volume(start=4.4929134e-06, fixed=true)),
            common_carotid_R6_C(volume(start=3.3524746e-06, fixed=true)),
            internal_carotid_R8_A(volume(start=1.280996e-06, fixed=true)),
            internal_carotid_R8_B(volume(start=8.09683e-07, fixed=true)),
            internal_carotid_R8_C(volume(start=7.203386e-05, fixed=true)),
            external_carotid_T2_R26(volume(start=7.234414e-05, fixed=true)),
            common_carotid_L48_A(volume(start=5.707676e-06, fixed=true)),
            common_carotid_L48_B(volume(start=5.005873e-06, fixed=true)),
            common_carotid_L48_C(volume(start=4.4384637e-06, fixed=true)),
            common_carotid_L48_D(volume(start=3.588538e-06, fixed=true)),
            internal_carotid_L50_A(volume(start=1.2807642e-06, fixed=true)),
            internal_carotid_L50_B(volume(start=8.09577e-07, fixed=true)),
            internal_carotid_L50_C(volume(start=7.203121e-05, fixed=true)),
            external_carotid_T2_L62(volume(start=7.2335075e-05, fixed=true)),
            vertebral_L2(volume(start=6.649548e-05, fixed=true)),
            vertebral_R272(volume(start=6.650899e-05, fixed=true)),
            superior_vena_cava_C2(volume(start=1.706292e-05, fixed=true)),
            superior_vena_cava_C88(volume(start=2.9403693e-05, fixed=true)),
            inferior_vena_cava_C8(volume(start=2.5597768e-05, fixed=true)),
            hepatic_vein_T1_C10(volume(start=1.0038075e-05, fixed=true)),
            inferior_vena_cava_C12(volume(start=6.949758e-05, fixed=true)),
            inferior_vena_cava_C16(volume(start=5.468753e-05, fixed=true)),
            renal_vein_T1_R18(volume(start=1.6123939e-05, fixed=true)),
            inferior_vena_cava_C20(volume(start=3.8155226e-06, fixed=true)),
            renal_vein_T1_L22(volume(start=1.42520985e-05, fixed=true)),
            inferior_vena_cava_C24(volume(start=0.0001523523, fixed=true)),
            common_iliac_vein_L56(volume(start=3.7456277e-05, fixed=true)),
            common_iliac_vein_R26(volume(start=3.4422876e-05, fixed=true)),
            external_iliac_vein_R28(volume(start=5.021792e-06, fixed=true)),
            internal_iliac_vein_T1_R30(volume(start=2.1512968e-05, fixed=true)),
            external_iliac_vein_R32(volume(start=5.8381942e-05, fixed=true)),
            femoral_vein_R34(volume(start=2.5383943e-06, fixed=true)),
            femoral_vein_R38(volume(start=2.0151767e-05, fixed=true)),
            profunda_femoris_vein_T2_R40(volume(start=5.6851968e-05, fixed=true)),
            femoral_vein_R42(volume(start=0.00014311404, fixed=true)),
            femoral_vein_R46(volume(start=7.882731e-06, fixed=true)),
            popliteal_vein_R48(volume(start=3.2238906e-05, fixed=true)),
            anterior_tibial_vein_T4_R50(volume(start=1.2560027e-05, fixed=true)),
            popliteal_vein_R52(volume(start=7.174824e-06, fixed=true)),
            posterior_tibial_vein_T6_R54(volume(start=1.510979e-05, fixed=true)),
            external_iliac_vein_L58(volume(start=5.0288463e-06, fixed=true)),
            internal_iliac_vein_T1_L60(volume(start=2.2132253e-05, fixed=true)),
            external_iliac_vein_L62(volume(start=5.732529e-05, fixed=true)),
            femoral_vein_L64(volume(start=2.9680893e-06, fixed=true)),
            femoral_vein_L68(volume(start=2.0155529e-05, fixed=true)),
            profunda_femoris_vein_T2_L70(volume(start=5.6862737e-05, fixed=true)),
            femoral_vein_L72(volume(start=0.00014314194, fixed=true)),
            femoral_vein_L76(volume(start=7.884217e-06, fixed=true)),
            popliteal_vein_L78(volume(start=3.2244967e-05, fixed=true)),
            anterior_tibial_vein_T4_L80(volume(start=1.2561283e-05, fixed=true)),
            popliteal_vein_L82(volume(start=7.176214e-06, fixed=true)),
            posterior_tibial_vein_T6_L84(volume(start=1.5111865e-05, fixed=true)),
            brachiocephalic_vein_R90(volume(start=3.457241e-05, fixed=true)),
            brachiocephalic_vein_L124(volume(start=6.480566e-05, fixed=true)),
            vertebral_vein_R92(volume(start=2.228121e-05, fixed=true)),
            brachiocephalic_vein_R94(volume(start=7.837579e-06, fixed=true)),
            subclavian_vein_R96(volume(start=3.8112298e-06, fixed=true)),
            internal_jugular_vein_R122(volume(start=0.00015054469, fixed=true)),
            external_jugular_vein_R98(volume(start=1.095506e-05, fixed=true)),
            subclavian_vein_R100(volume(start=1.5589061e-05, fixed=true)),
            axillary_vein_R102(volume(start=5.4815362e-05, fixed=true)),
            brachial_vein_R104(volume(start=1.1733692e-05, fixed=true)),
            brachial_vein_R114(volume(start=1.071113e-05, fixed=true)),
            brachial_vein_R108(volume(start=1.6380651e-06, fixed=true)),
            ulnar_vein_T7_R110(volume(start=1.5423175e-05, fixed=true)),
            brachial_vein_R118(volume(start=1.0437828e-06, fixed=true)),
            radial_vein_T3_R120(volume(start=1.088816e-05, fixed=true)),
            vertebral_vein_L126(volume(start=2.0808297e-05, fixed=true)),
            brachiocephalic_vein_L128(volume(start=3.9618053e-06, fixed=true)),
            subclavian_vein_L130(volume(start=3.3901442e-06, fixed=true)),
            internal_jugular_vein_L156(volume(start=9.1456786e-05, fixed=true)),
            external_jugular_vein_L132(volume(start=1.0740036e-05, fixed=true)),
            subclavian_vein_L134(volume(start=1.5197589e-05, fixed=true)),
            axillary_vein_L136(volume(start=5.546331e-05, fixed=true)),
            brachial_vein_L138(volume(start=1.17376285e-05, fixed=true)),
            brachial_vein_L148(volume(start=1.0785995e-05, fixed=true)),
            brachial_vein_L142(volume(start=1.6385547e-06, fixed=true)),
            ulnar_vein_T7_L144(volume(start=1.5419084e-05, fixed=true)),
            brachial_vein_L152(volume(start=1.0516295e-06, fixed=true)),
            radial_vein_T3_L154(volume(start=1.1106696e-05, fixed=true)),
            mesenteric_artery(volume(start=6.3813786e-06, fixed=true)),
            coronary_arteries(volume(start=3.6529304e-08, fixed=true)),
            cardiac_tissue(volume(start=0.000117522075, fixed=true)),
            coronary_veins(volume(start=3.041459e-07, fixed=true)),
            brachial_L82_HeartLevel(volume(start=3.7834498e-06, fixed=true)),
            splanchnic_tissue(volume(start=0.00025949875, fixed=true)),
            splanchnic_vein(volume(start=8.43756e-05, fixed=true))),
          heartComponent(
            mitralValve(
              BP_max(start=805.92664, fixed=true),
              BP_min(start=663.4355, fixed=true),
              CO_acc(start=0.00010691206, fixed=true)),
            aorticValve(
              BP_max(start=15334.916, fixed=true),
              BP_min(start=11398.866, fixed=true),
              CO_acc(start=0.00010691199, fixed=true)),
            ventricles(
              LV_wall(ym(start=3.9216194, fixed=true), SL(start=2.2280812,
                    fixed=true)),
              SEP_wall(SL(start=2.186389, fixed=true)),
              RV_wall(SL(start=2.329386, fixed=true)),
              calciumMechanics(cardiac_cycle(start=1.0, fixed=true)),
              V_LV(start=0.0001846641, fixed=true),
              V_RV(start=0.00023111871, fixed=true)),
            ra(volume(start=2.0696922e-05, fixed=true)),
            la(volume(start=4.7677488e-05, fixed=true))),
          pulmonaryComponent(c_pa(volume(start=9.296634e-05, fixed=true)), c_pv(
                volume(start=0.0021692594, fixed=true))),
          settings(
            initByPressure=false,
            veins_C_phi(displayUnit="1") = 0.40625,
            veins_ZPV_phi=0.35,
            experimental_zpv_factor(displayUnit="1") = 0.4035,
            experimental_C_factor(displayUnit="1") = 0.3),
          useAutonomousPhi(y=true));

    end OlufsenTriSeg_opt_LinearVeins_init;

      model OlufsenTriSeg_opt_LinearVeins_init_oscillatingTest
        extends OlufsenTriSeg_opt_LinearVeins_init(settings(veins_C_phi=0.5,
              veins_ZPV_phi=0.5));
      end OlufsenTriSeg_opt_LinearVeins_init_oscillatingTest;

      model base
        extends
          Identification.SteadyState.OlufsenTriSeg_optimized_steadyState_init;
      end base;

      model NoVenousValves
        extends
          Identification.SteadyState.OlufsenTriSeg_optimized_steadyState_init(
                                                                  SystemicComponent(
            femoral_vein_R34(LimitBackflow=false),
            femoral_vein_R38(LimitBackflow=false),
            femoral_vein_R42(LimitBackflow=false),
            femoral_vein_R46(LimitBackflow=false),
            popliteal_vein_R48(LimitBackflow=false),
            popliteal_vein_R52(LimitBackflow=false),
            femoral_vein_L64(LimitBackflow=false),
            femoral_vein_L68(LimitBackflow=false),
            femoral_vein_L72(LimitBackflow=false),
            femoral_vein_L76(LimitBackflow=false),
            popliteal_vein_L78(LimitBackflow=false),
            popliteal_vein_L82(LimitBackflow=false),
            external_iliac_vein_R32(LimitBackflow=false),
            external_iliac_vein_L62(LimitBackflow=false),
            common_iliac_vein_R26(LimitBackflow=false),
            external_iliac_vein_R28(LimitBackflow=false),
            external_iliac_vein_L58(LimitBackflow=false),
            common_iliac_vein_L56(LimitBackflow=false)));
      end NoVenousValves;

      model MaxVenousValves
        extends
          Identification.SteadyState.OlufsenTriSeg_optimized_steadyState_init(
                                                                  SystemicComponent(
            common_iliac_vein_L56(LimitBackflow=true),
            common_iliac_vein_R26(LimitBackflow=true),
            external_iliac_vein_R28(LimitBackflow=true),
            external_iliac_vein_R32(LimitBackflow=true),
            femoral_vein_R34(LimitBackflow=true),
            femoral_vein_R38(LimitBackflow=true),
            femoral_vein_R42(LimitBackflow=true),
            femoral_vein_R46(LimitBackflow=true),
            popliteal_vein_R48(LimitBackflow=true),
            external_iliac_vein_L58(LimitBackflow=true),
            external_iliac_vein_L62(LimitBackflow=true),
            femoral_vein_L64(LimitBackflow=true),
            femoral_vein_L68(LimitBackflow=true),
            femoral_vein_L72(LimitBackflow=true),
            femoral_vein_L76(LimitBackflow=true),
            popliteal_vein_L78(LimitBackflow=true),
            popliteal_vein_L82(LimitBackflow=true),
            popliteal_vein_R52(LimitBackflow=true),
            inferior_vena_cava_C12(LimitBackflow=true),
            inferior_vena_cava_C16(LimitBackflow=true),
            inferior_vena_cava_C20(LimitBackflow=true),
            inferior_vena_cava_C24(LimitBackflow=true),
            inferior_vena_cava_C8(LimitBackflow=true)));
      end MaxVenousValves;

      model BreathingSignal
        extends
          Identification.SteadyState.OlufsenTriSeg_optimized_steadyState_init(condTP_PC(
            disconnected=false,
            UseAdditionalInput=true,
            uMax=40*133), thoracic_pressure_ramp(amplitude=50*133, nperiod=0));
        Modelica.Blocks.Sources.Sine thoracic_pressure_ramp1(
          f(displayUnit="1/min") = 0.26666666666667,
          amplitude=133.32*5,
          offset=-133.32*4,
          startTime=0)
          annotation (Placement(transformation(extent={{-100,-10},{-80,10}})));
      equation
        connect(thoracic_pressure_ramp1.y,condTP_PC.u1)  annotation (Line(
              points={{-79,0},{-70.54,0},{-70.54,-50}}, color={0,0,127}));
      end BreathingSignal;

      package Impairments

          package Normal
            model imp_base
                extends CVS_Normal;
            end imp_base;

            model imp_noVc
                extends imp_base(settings(veins_UsePhiEffect=false));
            end imp_noVc;

            model imp_noVcLin
                extends imp_base(settings(veins_UseNonLinearVeins=false,
                                          veins_UsePhiEffect=false));
            end imp_noVcLin;

            model imp_noVcTc
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTc;

            model imp_noVcTcLin
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTcLin;

            model imp_noBaro
                extends imp_base(useAutonomousPhi(y=false));
            end imp_noBaro;

            model imp_noBaroLinV
              extends imp_noBaro(
                  settings(veins_UseNonLinearVeins=false));
            end imp_noBaroLinV;

            model imp_noBaro_linVT
              extends imp_noBaroLinV(settings(UseNonLinear_TissuesCompliance=false));
            end imp_noBaro_linVT;

            model imp_noValves
              extends imp_base(SystemicComponent(
                    brachiocephalic_vein_R90(LimitBackflow=false),
                    brachiocephalic_vein_L124(LimitBackflow=false),
                    common_iliac_vein_R26(LimitBackflow=false),
                    common_iliac_vein_L56(LimitBackflow=false)));
            end imp_noValves;

            model imp_arSt_fastBaro
              extends imp_base(settings(syst_art_k_E=0.88, baro_tau_s=10));
            annotation (experiment(
                StopTime=400,
                Interval=0.02,
                Tolerance=1e-06,
                __Dymola_Algorithm="Cvode"));
            end imp_arSt_fastBaro;

            model imp_arSt_ss
            "Steady state initialization from 2020-12-29 21:05:26.481251 at time 299.86"
              extends imp_arSt_fastBaro(
                  SystemicComponent(
                    baroreflex_system(
                      baroreflex(phi(start = 0.24229456, fixed = true)),
                      baroreceptor_aortic(epsilon(start = 1.3092335, fixed = true), s(start = 0.7701473, fixed = true)),
                      baroreceptor_carotid(epsilon(start = 1.0949951, fixed = true), s(start = 0.8840892, fixed = true))),
                    ascending_aorta_A(q(start = 2.5515742e-06, fixed = true), vol1(start = 3.403867e-06, fixed = true), vol2(start = 3.403783e-06, fixed = true)),
                    ascending_aorta_B(q_in(start = 5.112949e-06, fixed = true), volume(start = 1.6754268e-05, fixed = true)),
                    ascending_aorta_C(q_in(start = 7.662759e-06, fixed = true), volume(start = 1.5518155e-05, fixed = true)),
                    ascending_aorta_D(q_in(start = 1.1987098e-05, fixed = true), volume(start = 1.4190164e-05, fixed = true)),
                    aortic_arch_C2(q_in(start = 1.5902064e-05, fixed = true), volume(start = 1.3001863e-05, fixed = true)),
                    brachiocephalic_trunk_C4(q_in(start = 1.2677907e-06, fixed = true), volume(start = 9.140656e-06, fixed = true)),
                    aortic_arch_C46(q_in(start = 1.8179178e-05, fixed = true), volume(start = 7.716952e-06, fixed = true)),
                    aortic_arch_C64(q_in(start = 2.0871652e-05, fixed = true), volume(start = 5.3034414e-06, fixed = true)),
                    aortic_arch_C94(q_in(start = 1.9551486e-05, fixed = true), volume(start = 2.9175528e-05, fixed = true)),
                    thoracic_aorta_C96(q_in(start = 2.6880227e-05, fixed = true), volume(start = 5.2647374e-06, fixed = true)),
                    thoracic_aorta_C100(q_in(start = 2.816266e-05, fixed = true), volume(start = 4.0528794e-06, fixed = true)),
                    thoracic_aorta_C104(q_in(start = 2.9133214e-05, fixed = true), volume(start = 7.645832e-06, fixed = true)),
                    thoracic_aorta_C108(q_in(start = 3.0901436e-05, fixed = true), volume(start = 2.5140964e-06, fixed = true)),
                    thoracic_aorta_C112(q_in(start = 3.147465e-05, fixed = true), volume(start = 4.163393e-05, fixed = true)),
                    abdominal_aorta_C114(q_in(start = 3.73411e-05, fixed = true), volume(start = 8.6590995e-07, fixed = true)),
                    abdominal_aorta_C136(q_in(start = 2.9044633e-05, fixed = true), volume(start = 3.6362642e-06, fixed = true)),
                    abdominal_aorta_C164(q_in(start = 2.3903056e-05, fixed = true), volume(start = 1.0804175e-06, fixed = true)),
                    abdominal_aorta_C176(q_in(start = 1.6465858e-05, fixed = true), volume(start = 2.906814e-06, fixed = true)),
                    abdominal_aorta_C188(q_in(start = 9.335313e-06, fixed = true), volume(start = 1.1651799e-05, fixed = true)),
                    abdominal_aorta_C192(q_in(start = 1.0589696e-05, fixed = true), volume(start = 7.2855782e-06, fixed = true)),
                    celiac_trunk_C116(volume(start = 0.0003551999, fixed = true)),
                    renal_L166(volume(start = 0.00032085134, fixed = true)),
                    renal_R178(volume(start = 0.00031797556, fixed = true)),
                    common_iliac_R216(q_in(start = 5.622475e-06, fixed = true), volume(start = 6.2219397e-06, fixed = true)),
                    internal_iliac_T1_R218(volume(start = 0.0001746407, fixed = true)),
                    external_iliac_R220(q_in(start = 2.2483043e-06, fixed = true), volume(start = 4.083962e-06, fixed = true)),
                    femoral_R222(q_in(start = 2.5723098e-06, fixed = true), volume(start = 1.1703349e-06, fixed = true)),
                    profundus_T2_R224(volume(start = 0.0002003131, fixed = true)),
                    femoral_R226(q_in(start = -1.7140757e-06, fixed = true), volume(start = 9.683984e-06, fixed = true)),
                    popliteal_R228(q_in(start = 2.9811156e-07, fixed = true), volume(start = 3.0031426e-06, fixed = true)),
                    anterior_tibial_T3_R230(volume(start = 2.6213478e-05, fixed = true)),
                    popliteal_R232(q_in(start = 4.662309e-07, fixed = true), volume(start = 1.6512647e-07, fixed = true)),
                    tibiofibular_trunk_R234(q_in(start = 4.848016e-07, fixed = true), volume(start = 6.7155645e-07, fixed = true)),
                    posterior_tibial_T4_R236(volume(start = 2.8676926e-05, fixed = true)),
                    common_iliac_L194(q_in(start = 5.7011166e-06, fixed = true), volume(start = 5.9542117e-06, fixed = true)),
                    internal_iliac_T1_L196(volume(start = 0.00017464205, fixed = true)),
                    external_iliac_L198(q_in(start = 2.2989632e-06, fixed = true), volume(start = 4.0842533e-06, fixed = true)),
                    femoral_L200(q_in(start = 2.6207276e-06, fixed = true), volume(start = 1.1704201e-06, fixed = true)),
                    profundus_T2_L202(volume(start = 0.00020031397, fixed = true)),
                    femoral_L204(q_in(start = -1.6701713e-06, fixed = true), volume(start = 9.684931e-06, fixed = true)),
                    popliteal_L206(q_in(start = 3.1131438e-07, fixed = true), volume(start = 3.00339e-06, fixed = true)),
                    anterior_tibial_T3_L208(volume(start = 2.6213504e-05, fixed = true)),
                    popliteal_L210(q_in(start = 4.6855897e-07, fixed = true), volume(start = 1.6513317e-07, fixed = true)),
                    tibiofibular_trunk_L212(q_in(start = 4.8684336e-07, fixed = true), volume(start = 6.716039e-07, fixed = true)),
                    posterior_tibial_T4_L214(volume(start = 2.8676977e-05, fixed = true)),
                    subclavian_R28(q_in(start = 3.0323986e-06, fixed = true), volume(start = 1.4426801e-06, fixed = true)),
                    subclavian_R30(q_in(start = 1.7622905e-06, fixed = true), volume(start = 1.952449e-06, fixed = true)),
                    axillary_R32(q_in(start = 2.1503586e-06, fixed = true), volume(start = 2.3369512e-06, fixed = true)),
                    brachial_R34(q_in(start = 2.4401477e-06, fixed = true), volume(start = 3.4667978e-06, fixed = true)),
                    ulnar_T2_R36(q_in(start = 1.3941229e-06, fixed = true), volume(start = 2.0834604e-07, fixed = true)),
                    ulnar_T2_R42(volume(start = 6.0209728e-05, fixed = true)),
                    radial_T1_R44(volume(start = 4.9256567e-05, fixed = true)),
                    subclavian_L66(q_in(start = 2.7339422e-06, fixed = true), volume(start = 3.473886e-06, fixed = true)),
                    subclavian_L78(q_in(start = 1.8564388e-06, fixed = true), volume(start = 1.4690359e-06, fixed = true)),
                    axillary_L80(q_in(start = 2.1160115e-06, fixed = true), volume(start = 2.3365046e-06, fixed = true)),
                    brachial_L82(q_in(start = 2.519172e-06, fixed = true), volume(start = 1.15349e-06, fixed = true)),
                    ulnar_T2_L84(q_in(start = 1.3866913e-06, fixed = true), volume(start = 2.0829354e-07, fixed = true)),
                    ulnar_T2_L90(volume(start = 6.018713e-05, fixed = true)),
                    radial_T1_L92(volume(start = 5.219178e-05, fixed = true)),
                    common_carotid_R6_A(q_in(start = 5.414467e-07, fixed = true), volume(start = 3.0722165e-06, fixed = true)),
                    common_carotid_R6_B(q_in(start = 1.6466822e-06, fixed = true), volume(start = 2.6402852e-06, fixed = true)),
                    common_carotid_R6_C(q_in(start = 2.5935403e-06, fixed = true), volume(start = 1.9995377e-06, fixed = true)),
                    internal_carotid_R8_A(q_in(start = 1.5525253e-06, fixed = true), volume(start = 1.0611803e-06, fixed = true)),
                    internal_carotid_R8_B(q_in(start = 1.669214e-06, fixed = true), volume(start = 6.816792e-07, fixed = true)),
                    internal_carotid_R8_C(volume(start = 7.149893e-05, fixed = true)),
                    external_carotid_T2_R26(volume(start = 7.170783e-05, fixed = true)),
                    common_carotid_L48_A(q_in(start = -6.141678e-07, fixed = true), volume(start = 3.3297435e-06, fixed = true)),
                    common_carotid_L48_B(q_in(start = 5.534364e-07, fixed = true), volume(start = 2.9412283e-06, fixed = true)),
                    common_carotid_L48_C(q_in(start = 1.5976489e-06, fixed = true), volume(start = 2.6248806e-06, fixed = true)),
                    common_carotid_L48_D(q_in(start = 2.5339357e-06, fixed = true), volume(start = 2.145889e-06, fixed = true)),
                    internal_carotid_L50_A(q_in(start = 1.5492935e-06, fixed = true), volume(start = 1.0611327e-06, fixed = true)),
                    internal_carotid_L50_B(q_in(start = 1.6673133e-06, fixed = true), volume(start = 6.8165207e-07, fixed = true)),
                    internal_carotid_L50_C(volume(start = 7.1501076e-05, fixed = true)),
                    external_carotid_T2_L62(volume(start = 7.170576e-05, fixed = true)),
                    vertebral_L2(volume(start = 6.593643e-05, fixed = true)),
                    vertebral_R272(volume(start = 6.594132e-05, fixed = true)),
                    superior_vena_cava_C2(volume(start = 2.349646e-06, fixed = true)),
                    superior_vena_cava_C88(volume(start = 4.0495393e-06, fixed = true)),
                    inferior_vena_cava_C8(volume(start = 3.5247192e-06, fixed = true)),
                    hepatic_vein_T1_C10(volume(start = 1.3821171e-06, fixed = true)),
                    inferior_vena_cava_C12(volume(start = 9.570287e-06, fixed = true)),
                    inferior_vena_cava_C16(volume(start = 7.5307207e-06, fixed = true)),
                    renal_vein_T1_R18(volume(start = 2.2198908e-06, fixed = true)),
                    inferior_vena_cava_C20(volume(start = 5.2541407e-07, fixed = true)),
                    renal_vein_T1_L22(volume(start = 1.9619556e-06, fixed = true)),
                    inferior_vena_cava_C24(volume(start = 2.0981015e-05, fixed = true)),
                    common_iliac_vein_L56(volume(start = 5.1566294e-06, fixed = true)),
                    common_iliac_vein_R26(volume(start = 4.739145e-06, fixed = true)),
                    external_iliac_vein_R28(volume(start = 6.9132915e-07, fixed = true)),
                    internal_iliac_vein_T1_R30(volume(start = 2.960323e-06, fixed = true)),
                    external_iliac_vein_R32(volume(start = 8.033378e-06, fixed = true)),
                    femoral_vein_R34(volume(start = 3.492642e-07, fixed = true)),
                    femoral_vein_R38(volume(start = 2.7714716e-06, fixed = true)),
                    profunda_femoris_vein_T2_R40(volume(start = 7.766037e-06, fixed = true)),
                    femoral_vein_R42(volume(start = 1.9658151e-05, fixed = true)),
                    femoral_vein_R46(volume(start = 1.0827324e-06, fixed = true)),
                    popliteal_vein_R48(volume(start = 4.4213325e-06, fixed = true)),
                    anterior_tibial_vein_T4_R50(volume(start = 1.6728767e-06, fixed = true)),
                    popliteal_vein_R52(volume(start = 9.838703e-07, fixed = true)),
                    posterior_tibial_vein_T6_R54(volume(start = 2.0523348e-06, fixed = true)),
                    external_iliac_vein_L58(volume(start = 6.92281e-07, fixed = true)),
                    internal_iliac_vein_T1_L60(volume(start = 3.0454132e-06, fixed = true)),
                    external_iliac_vein_L62(volume(start = 7.887734e-06, fixed = true)),
                    femoral_vein_L64(volume(start = 4.0837014e-07, fixed = true)),
                    femoral_vein_L68(volume(start = 2.7718672e-06, fixed = true)),
                    profunda_femoris_vein_T2_L70(volume(start = 7.7671275e-06, fixed = true)),
                    femoral_vein_L72(volume(start = 1.9660982e-05, fixed = true)),
                    femoral_vein_L76(volume(start = 1.0828815e-06, fixed = true)),
                    popliteal_vein_L78(volume(start = 4.4219705e-06, fixed = true)),
                    anterior_tibial_vein_T4_L80(volume(start = 1.6729833e-06, fixed = true)),
                    popliteal_vein_L82(volume(start = 9.840184e-07, fixed = true)),
                    posterior_tibial_vein_T6_L84(volume(start = 2.0526238e-06, fixed = true)),
                    brachiocephalic_vein_R90(volume(start = 4.7626113e-06, fixed = true)),
                    brachiocephalic_vein_L124(volume(start = 8.929497e-06, fixed = true)),
                    vertebral_vein_R92(volume(start = 3.0442625e-06, fixed = true)),
                    brachiocephalic_vein_R94(volume(start = 1.0797398e-06, fixed = true)),
                    subclavian_vein_R96(volume(start = 5.250738e-07, fixed = true)),
                    internal_jugular_vein_R122(volume(start = 2.0761512e-05, fixed = true)),
                    external_jugular_vein_R98(volume(start = 1.491042e-06, fixed = true)),
                    subclavian_vein_R100(volume(start = 2.1482047e-06, fixed = true)),
                    axillary_vein_R102(volume(start = 7.5574403e-06, fixed = true)),
                    brachial_vein_R104(volume(start = 1.5854067e-06, fixed = true)),
                    brachial_vein_R114(volume(start = 1.4408736e-06, fixed = true)),
                    brachial_vein_R108(volume(start = 2.2094642e-07, fixed = true)),
                    ulnar_vein_T7_R110(volume(start = 2.0743273e-06, fixed = true)),
                    brachial_vein_R118(volume(start = 1.4019727e-07, fixed = true)),
                    radial_vein_T3_R120(volume(start = 1.4504806e-06, fixed = true)),
                    vertebral_vein_L126(volume(start = 2.844439e-06, fixed = true)),
                    brachiocephalic_vein_L128(volume(start = 5.4590174e-07, fixed = true)),
                    subclavian_vein_L130(volume(start = 4.6714425e-07, fixed = true)),
                    internal_jugular_vein_L156(volume(start = 1.2613514e-05, fixed = true)),
                    external_jugular_vein_L132(volume(start = 1.4619573e-06, fixed = true)),
                    subclavian_vein_L134(volume(start = 2.0945354e-06, fixed = true)),
                    axillary_vein_L136(volume(start = 7.646973e-06, fixed = true)),
                    brachial_vein_L138(volume(start = 1.5862393e-06, fixed = true)),
                    brachial_vein_L148(volume(start = 1.4495672e-06, fixed = true)),
                    brachial_vein_L142(volume(start = 2.21063e-07, fixed = true)),
                    ulnar_vein_T7_L144(volume(start = 2.0750651e-06, fixed = true)),
                    brachial_vein_L152(volume(start = 1.4111909e-07, fixed = true)),
                    radial_vein_T3_L154(volume(start = 1.4744237e-06, fixed = true)),
                    mesenteric_artery(q_in(start = 5.6178865e-06, fixed = true), volume(start = 6.11247e-06, fixed = true)),
                    splanchnic_tissue(volume(start = 0.00025765123, fixed = true)),
                    splanchnic_vein(volume(start = 1.1531514e-05, fixed = true)),
                    coronary_arteries(q_in(start = 2.1540886e-06, fixed = true), volume(start = 3.59634e-08, fixed = true)),
                    cardiac_tissue(volume(start = 0.000115643015, fixed = true)),
                    coronary_veins(volume(start = 3.646531e-08, fixed = true)),
                    brachial_L82_HeartLevel(q_in(start = 2.3882185e-06, fixed = true), volume(start = 2.3169812e-06, fixed = true))),
                  heartComponent(
                    tricuspidValve(open(start = true, fixed = true)),
                    pulmonaryValve(open(start = false, fixed = true)),
                    mitralValve(open(start = true, fixed = true)),
                    aorticValve(open(start = false, fixed = true)),
                    ventricles(
                      LV_wall(ym(start = 3.4805632, fixed = true), SL(start = 1.9729362, fixed = true), xm(start = -4.762715, fixed = false)),
                      SEP_wall(SL(start = 1.9974529, fixed = true), xm(start = 1.9856914, fixed = false)),
                      RV_wall(SL(start = 1.9732813, fixed = true), xm(start = 5.636706, fixed = false)), V_LV(start = 0.00013364125, fixed = true), V_RV(start = 0.00013165307, fixed = true)),
                    ra(volume(start = 1.1497501e-05, fixed = true)),
                    la(volume(start = 4.7752277e-05, fixed = true)),
                    sa_node(cardiac_cycle(start = 0.018870693, fixed = true))),
                  pulmonaryComponent(
                    c_pa(volume(start = 5.8772443e-05, fixed = true)),
                    c_pv(volume(start = 0.0003409318, fixed = true))));
            end imp_arSt_ss;

            model imp_avRe_fastBaro
              extends imp_base(heartComponent(aorticValve(_Goff=3E-08)),
                settings(baro_tau_s=10),
              useAutonomousPhi(y=true));

            Physiolibrary.Types.Volume SV_backflow_acc;
            Physiolibrary.Types.Volume SV_backflow;
            Physiolibrary.Types.Fraction regurgitation_frac = min(1,SV_backflow /max(SV +
                SV_backflow,                                                                           1e-6));
            equation
                // integrate only negative backflow
                der(SV_backflow_acc) = max(heartComponent.aorticValve.q_out.q, 0);

              when heartComponent.aorticValve.cc < heartComponent.aorticValve.epsTime then
                reinit(SV_backflow_acc, 0);
              SV_backflow   =SV_backflow_acc;
              end when;

            annotation (experiment(
                StopTime=600,
                Interval=0.01,
                Tolerance=1e-08,
                __Dymola_Algorithm="Cvode"));
            end imp_avRe_fastBaro;

            model imp_avRe_ss
            "Steady state initialization from 2020-12-29 21:55:59.012166 at time 253.0"
              extends imp_avRe_fastBaro(
                  SystemicComponent(
                    baroreflex_system(
                      baroreflex(phi(start = 0.16757183, fixed = true)),
                      baroreceptor_aortic(epsilon(start = 1.3320701, fixed = true), s(start = 0.65012145, fixed = true)),
                      baroreceptor_carotid(epsilon(start = 1.103226, fixed = true), s(start = 0.79037714, fixed = true))),
                    ascending_aorta_A(q(start = -7.3818075e-05, fixed = true), vol1(start = 2.4189142e-06, fixed = true), vol2(start = 2.414492e-06, fixed = true)),
                    ascending_aorta_B(q_in(start = -6.7408044e-05, fixed = true), volume(start = 1.52061875e-05, fixed = true)),
                    ascending_aorta_C(q_in(start = -5.5794437e-05, fixed = true), volume(start = 1.40863895e-05, fixed = true)),
                    ascending_aorta_D(q_in(start = -4.4647764e-05, fixed = true), volume(start = 1.2886119e-05, fixed = true)),
                    aortic_arch_C2(q_in(start = -3.4638433e-05, fixed = true), volume(start = 1.1813967e-05, fixed = true)),
                    brachiocephalic_trunk_C4(q_in(start = -1.6764128e-05, fixed = true), volume(start = 8.36213e-06, fixed = true)),
                    aortic_arch_C46(q_in(start = -8.9024925e-06, fixed = true), volume(start = 7.0181272e-06, fixed = true)),
                    aortic_arch_C64(q_in(start = 6.869297e-06, fixed = true), volume(start = 4.8270326e-06, fixed = true)),
                    aortic_arch_C94(q_in(start = 1.4624259e-05, fixed = true), volume(start = 2.6675087e-05, fixed = true)),
                    thoracic_aorta_C96(q_in(start = 3.137344e-05, fixed = true), volume(start = 4.8263205e-06, fixed = true)),
                    thoracic_aorta_C100(q_in(start = 3.422136e-05, fixed = true), volume(start = 3.720615e-06, fixed = true)),
                    thoracic_aorta_C104(q_in(start = 3.632285e-05, fixed = true), volume(start = 7.0389433e-06, fixed = true)),
                    thoracic_aorta_C108(q_in(start = 3.9938175e-05, fixed = true), volume(start = 2.317241e-06, fixed = true)),
                    thoracic_aorta_C112(q_in(start = 4.1084335e-05, fixed = true), volume(start = 3.9572555e-05, fixed = true)),
                    abdominal_aorta_C114(q_in(start = 3.9460607e-05, fixed = true), volume(start = 8.244755e-07, fixed = true)),
                    abdominal_aorta_C136(q_in(start = 3.6274727e-05, fixed = true), volume(start = 3.4738077e-06, fixed = true)),
                    abdominal_aorta_C164(q_in(start = 3.3265344e-05, fixed = true), volume(start = 1.0333196e-06, fixed = true)),
                    abdominal_aorta_C176(q_in(start = 3.025105e-05, fixed = true), volume(start = 2.7881347e-06, fixed = true)),
                    abdominal_aorta_C188(q_in(start = 2.694116e-05, fixed = true), volume(start = 1.1331741e-05, fixed = true)),
                    abdominal_aorta_C192(q_in(start = 2.3654404e-05, fixed = true), volume(start = 7.162293e-06, fixed = true)),
                    celiac_trunk_C116(volume(start = 0.00034239716, fixed = true)),
                    renal_L166(volume(start = 0.00030928865, fixed = true)),
                    renal_R178(volume(start = 0.00030651345, fixed = true)),
                    common_iliac_R216(q_in(start = 1.0638374e-05, fixed = true), volume(start = 6.2092395e-06, fixed = true)),
                    internal_iliac_T1_R218(volume(start = 0.00016828466, fixed = true)),
                    external_iliac_R220(q_in(start = 5.9365752e-06, fixed = true), volume(start = 4.120243e-06, fixed = true)),
                    femoral_R222(q_in(start = 4.912814e-06, fixed = true), volume(start = 1.1835556e-06, fixed = true)),
                    profundus_T2_R224(volume(start = 0.00019295952, fixed = true)),
                    femoral_R226(q_in(start = 2.201239e-06, fixed = true), volume(start = 1.0079696e-05, fixed = true)),
                    popliteal_R228(q_in(start = 1.1151135e-06, fixed = true), volume(start = 3.1283034e-06, fixed = true)),
                    anterior_tibial_T3_R230(volume(start = 2.5325407e-05, fixed = true)),
                    popliteal_R232(q_in(start = 4.6872145e-07, fixed = true), volume(start = 1.6867807e-07, fixed = true)),
                    tibiofibular_trunk_R234(q_in(start = 4.6101414e-07, fixed = true), volume(start = 6.859674e-07, fixed = true)),
                    posterior_tibial_T4_R236(volume(start = 2.7621592e-05, fixed = true)),
                    common_iliac_L194(q_in(start = 1.0325266e-05, fixed = true), volume(start = 5.9389768e-06, fixed = true)),
                    internal_iliac_T1_L196(volume(start = 0.00016828648, fixed = true)),
                    external_iliac_L198(q_in(start = 5.8000064e-06, fixed = true), volume(start = 4.1195262e-06, fixed = true)),
                    femoral_L200(q_in(start = 4.7971494e-06, fixed = true), volume(start = 1.1833721e-06, fixed = true)),
                    profundus_T2_L202(volume(start = 0.00019296147, fixed = true)),
                    femoral_L204(q_in(start = 2.0969128e-06, fixed = true), volume(start = 1.007987e-05, fixed = true)),
                    popliteal_L206(q_in(start = 1.0879515e-06, fixed = true), volume(start = 3.1284503e-06, fixed = true)),
                    anterior_tibial_T3_L208(volume(start = 2.532579e-05, fixed = true)),
                    popliteal_L210(q_in(start = 4.6524158e-07, fixed = true), volume(start = 1.6868202e-07, fixed = true)),
                    tibiofibular_trunk_L212(q_in(start = 4.582035e-07, fixed = true), volume(start = 6.860053e-07, fixed = true)),
                    posterior_tibial_T4_L214(volume(start = 2.7622036e-05, fixed = true)),
                    subclavian_R28(q_in(start = -3.706251e-06, fixed = true), volume(start = 1.3311679e-06, fixed = true)),
                    subclavian_R30(q_in(start = -3.2659264e-06, fixed = true), volume(start = 1.8184707e-06, fixed = true)),
                    axillary_R32(q_in(start = -2.162287e-06, fixed = true), volume(start = 2.2243473e-06, fixed = true)),
                    brachial_R34(q_in(start = -9.11163e-07, fixed = true), volume(start = 3.3848426e-06, fixed = true)),
                    ulnar_T2_R36(q_in(start = 4.7601432e-07, fixed = true), volume(start = 2.0602695e-07, fixed = true)),
                    ulnar_T2_R42(volume(start = 5.798794e-05, fixed = true)),
                    radial_T1_R44(volume(start = 4.7546804e-05, fixed = true)),
                    subclavian_L66(q_in(start = -4.2460524e-06, fixed = true), volume(start = 3.2266328e-06, fixed = true)),
                    subclavian_L78(q_in(start = -2.7845997e-06, fixed = true), volume(start = 1.3777111e-06, fixed = true)),
                    axillary_L80(q_in(start = -2.034735e-06, fixed = true), volume(start = 2.2280599e-06, fixed = true)),
                    brachial_L82(q_in(start = 3.214934e-07, fixed = true), volume(start = 1.1215301e-06, fixed = true)),
                    ulnar_T2_L84(q_in(start = 4.5969537e-07, fixed = true), volume(start = 2.0555574e-07, fixed = true)),
                    ulnar_T2_L90(volume(start = 5.7955684e-05, fixed = true)),
                    radial_T1_L92(volume(start = 5.0381783e-05, fixed = true)),
                    common_carotid_R6_A(q_in(start = -6.9858456e-06, fixed = true), volume(start = 2.7002557e-06, fixed = true)),
                    common_carotid_R6_B(q_in(start = -4.035563e-06, fixed = true), volume(start = 2.3226835e-06, fixed = true)),
                    common_carotid_R6_C(q_in(start = -1.4813181e-06, fixed = true), volume(start = 1.7661653e-06, fixed = true)),
                    internal_carotid_R8_A(q_in(start = -4.4742926e-08, fixed = true), volume(start = 1.022336e-06, fixed = true)),
                    internal_carotid_R8_B(q_in(start = 2.7696117e-07, fixed = true), volume(start = 6.5913014e-07, fixed = true)),
                    internal_carotid_R8_C(volume(start = 6.88845e-05, fixed = true)),
                    external_carotid_T2_R26(volume(start = 6.913013e-05, fixed = true)),
                    common_carotid_L48_A(q_in(start = -1.056406e-05, fixed = true), volume(start = 2.9348769e-06, fixed = true)),
                    common_carotid_L48_B(q_in(start = -7.4699756e-06, fixed = true), volume(start = 2.5869044e-06, fixed = true)),
                    common_carotid_L48_C(q_in(start = -4.5724987e-06, fixed = true), volume(start = 2.3067207e-06, fixed = true)),
                    common_carotid_L48_D(q_in(start = -1.8827092e-06, fixed = true), volume(start = 1.8899709e-06, fixed = true)),
                    internal_carotid_L50_A(q_in(start = -1.1484559e-07, fixed = true), volume(start = 1.021155e-06, fixed = true)),
                    internal_carotid_L50_B(q_in(start = 2.4089434e-07, fixed = true), volume(start = 6.5843636e-07, fixed = true)),
                    internal_carotid_L50_C(volume(start = 6.888818e-05, fixed = true)),
                    external_carotid_T2_L62(volume(start = 6.912891e-05, fixed = true)),
                    vertebral_L2(volume(start = 6.355881e-05, fixed = true)),
                    vertebral_R272(volume(start = 6.356479e-05, fixed = true)),
                    superior_vena_cava_C2(volume(start = 2.2396982e-06, fixed = true)),
                    superior_vena_cava_C88(volume(start = 3.859797e-06, fixed = true)),
                    inferior_vena_cava_C8(volume(start = 3.3594706e-06, fixed = true)),
                    hepatic_vein_T1_C10(volume(start = 1.3172539e-06, fixed = true)),
                    inferior_vena_cava_C12(volume(start = 9.118591e-06, fixed = true)),
                    inferior_vena_cava_C16(volume(start = 7.173229e-06, fixed = true)),
                    renal_vein_T1_R18(volume(start = 2.1141304e-06, fixed = true)),
                    inferior_vena_cava_C20(volume(start = 5.004636e-07, fixed = true)),
                    renal_vein_T1_L22(volume(start = 1.868286e-06, fixed = true)),
                    inferior_vena_cava_C24(volume(start = 1.9973306e-05, fixed = true)),
                    common_iliac_vein_L56(volume(start = 4.9053456e-06, fixed = true)),
                    common_iliac_vein_R26(volume(start = 4.5084844e-06, fixed = true)),
                    external_iliac_vein_R28(volume(start = 6.576181e-07, fixed = true)),
                    internal_iliac_vein_T1_R30(volume(start = 2.8146553e-06, fixed = true)),
                    external_iliac_vein_R32(volume(start = 7.635341e-06, fixed = true)),
                    femoral_vein_R34(volume(start = 3.3193868e-07, fixed = true)),
                    femoral_vein_R38(volume(start = 2.6327255e-06, fixed = true)),
                    profunda_femoris_vein_T2_R40(volume(start = 7.336657e-06, fixed = true)),
                    femoral_vein_R42(volume(start = 1.8644381e-05, fixed = true)),
                    femoral_vein_R46(volume(start = 1.0268543e-06, fixed = true)),
                    popliteal_vein_R48(volume(start = 4.1860517e-06, fixed = true)),
                    anterior_tibial_vein_T4_R50(volume(start = 1.3580134e-06, fixed = true)),
                    popliteal_vein_R52(volume(start = 9.3135395e-07, fixed = true)),
                    posterior_tibial_vein_T6_R54(volume(start = 1.868323e-06, fixed = true)),
                    external_iliac_vein_L58(volume(start = 6.5848263e-07, fixed = true)),
                    internal_iliac_vein_T1_L60(volume(start = 2.8953355e-06, fixed = true)),
                    external_iliac_vein_L62(volume(start = 7.4965637e-06, fixed = true)),
                    femoral_vein_L64(volume(start = 3.8809054e-07, fixed = true)),
                    femoral_vein_L68(volume(start = 2.6329512e-06, fixed = true)),
                    profunda_femoris_vein_T2_L70(volume(start = 7.337258e-06, fixed = true)),
                    femoral_vein_L72(volume(start = 1.8645995e-05, fixed = true)),
                    femoral_vein_L76(volume(start = 1.0269368e-06, fixed = true)),
                    popliteal_vein_L78(volume(start = 4.186415e-06, fixed = true)),
                    anterior_tibial_vein_T4_L80(volume(start = 1.358075e-06, fixed = true)),
                    popliteal_vein_L82(volume(start = 9.314405e-07, fixed = true)),
                    posterior_tibial_vein_T6_L84(volume(start = 1.8684832e-06, fixed = true)),
                    brachiocephalic_vein_R90(volume(start = 4.538889e-06, fixed = true)),
                    brachiocephalic_vein_L124(volume(start = 8.508279e-06, fixed = true)),
                    vertebral_vein_R92(volume(start = 2.878661e-06, fixed = true)),
                    brachiocephalic_vein_R94(volume(start = 1.0289957e-06, fixed = true)),
                    subclavian_vein_R96(volume(start = 5.003696e-07, fixed = true)),
                    internal_jugular_vein_R122(volume(start = 1.978054e-05, fixed = true)),
                    external_jugular_vein_R98(volume(start = 1.4055558e-06, fixed = true)),
                    subclavian_vein_R100(volume(start = 2.0468115e-06, fixed = true)),
                    axillary_vein_R102(volume(start = 7.1970157e-06, fixed = true)),
                    brachial_vein_R104(volume(start = 1.4577556e-06, fixed = true)),
                    brachial_vein_R114(volume(start = 1.3169629e-06, fixed = true)),
                    brachial_vein_R108(volume(start = 2.0221236e-07, fixed = true)),
                    ulnar_vein_T7_R110(volume(start = 1.775459e-06, fixed = true)),
                    brachial_vein_R118(volume(start = 1.2766415e-07, fixed = true)),
                    radial_vein_T3_R120(volume(start = 1.1758169e-06, fixed = true)),
                    vertebral_vein_L126(volume(start = 2.6908401e-06, fixed = true)),
                    brachiocephalic_vein_L128(volume(start = 5.201427e-07, fixed = true)),
                    subclavian_vein_L130(volume(start = 4.4507945e-07, fixed = true)),
                    internal_jugular_vein_L156(volume(start = 1.2012749e-05, fixed = true)),
                    external_jugular_vein_L132(volume(start = 1.3781975e-06, fixed = true)),
                    subclavian_vein_L134(volume(start = 1.9952918e-06, fixed = true)),
                    axillary_vein_L136(volume(start = 7.2807566e-06, fixed = true)),
                    brachial_vein_L138(volume(start = 1.4581785e-06, fixed = true)),
                    brachial_vein_L148(volume(start = 1.3218397e-06, fixed = true)),
                    brachial_vein_L142(volume(start = 2.0227127e-07, fixed = true)),
                    ulnar_vein_T7_L144(volume(start = 1.775722e-06, fixed = true)),
                    brachial_vein_L152(volume(start = 1.2817735e-07, fixed = true)),
                    radial_vein_T3_L154(volume(start = 1.1912063e-06, fixed = true)),
                    mesenteric_artery(q_in(start = 2.6824766e-06, fixed = true), volume(start = 5.3205927e-06, fixed = true)),
                    splanchnic_tissue(volume(start = 0.00024831685, fixed = true)),
                    splanchnic_vein(volume(start = 1.09846005e-05, fixed = true)),
                    coronary_arteries(q_in(start = 5.893933e-07, fixed = true), volume(start = 3.3130878e-08, fixed = true)),
                    cardiac_tissue(volume(start = 0.00011125262, fixed = true)),
                    coronary_veins(volume(start = 2.997192e-08, fixed = true)),
                    brachial_L82_HeartLevel(q_in(start = -8.314693e-07, fixed = true), volume(start = 2.2445367e-06, fixed = true))),
                  heartComponent(
                    tricuspidValve(open(start = true, fixed = true)),
                    pulmonaryValve(open(start = false, fixed = true)),
                    mitralValve(open(start = false, fixed = true)),
                    aorticValve(open(start = false, fixed = true)),
                    ventricles(
                      LV_wall(ym(start = 3.9143994, fixed = true), SL(start = 2.305412, fixed = true), xm(start = -5.6037717, fixed = false)),
                      SEP_wall(SL(start = 2.3106086, fixed = true), xm(start = 2.4303186, fixed = false)),
                      RV_wall(SL(start = 1.9181752, fixed = true), xm(start = 5.110908, fixed = false)), V_LV(start = 0.00023758177, fixed = true), V_RV(start = 9.9409066e-05, fixed = true)),
                    ra(volume(start = 1.0022613e-05, fixed = true)),
                    la(volume(start = 6.365515e-05, fixed = true)),
                    sa_node(cardiac_cycle(start = 0.8978792, fixed = true))),
                  pulmonaryComponent(
                    c_pa(volume(start = 6.597261e-05, fixed = true)),
                    c_pv(volume(start = 0.00038607666, fixed = true))));
            end imp_avRe_ss;

            model imp_avSt_fastBaro
              extends imp_base(heartComponent(aorticValve(_Ron(
                        displayUnit="(mmHg.min)/l") = 10879106.813064)),
                settings(baro_tau_s=10));

            Physiolibrary.Types.Pressure p_in(start = 13e3);
            Physiolibrary.Types.Pressure p_out(start = 13e3);
            Physiolibrary.Types.Pressure dp_aortic = p_in - p_out;
            parameter Modelica.Units.SI.Time tau_avg=10;
            equation
                // integrate only during open valve
                if heartComponent.aorticValve.open then
                der(p_in)*tau_avg = heartComponent.aorticValve.q_in.pressure - p_in;
                der(p_out)*tau_avg = heartComponent.aorticValve.q_out.pressure - p_out;
                else
                  der(p_in) = 0;
                  der(p_out) = 0;
                end if;
            end imp_avSt_fastBaro;

            model imp_avSt_ss
            "Steady state initialization from 2020-12-29 22:03:07.886767 at time 299.82"
              extends imp_avSt_fastBaro(
                  SystemicComponent(
                    baroreflex_system(
                      baroreflex(phi(start = 0.26419958, fixed = true)),
                      baroreceptor_aortic(epsilon(start = 1.5612273, fixed = true), s(start = 0.80557275, fixed = true)),
                      baroreceptor_carotid(epsilon(start = 1.1832228, fixed = true), s(start = 0.88544905, fixed = true))),
                    ascending_aorta_A(q(start = 2.5058348e-06, fixed = true), vol1(start = 8.344596e-06, fixed = true), vol2(start = 8.344082e-06, fixed = true)),
                    ascending_aorta_B(q_in(start = 5.030426e-06, fixed = true), volume(start = 2.5393738e-05, fixed = true)),
                    ascending_aorta_C(q_in(start = 6.987516e-06, fixed = true), volume(start = 2.3484545e-05, fixed = true)),
                    ascending_aorta_D(q_in(start = 1.13964425e-05, fixed = true), volume(start = 2.1436614e-05, fixed = true)),
                    aortic_arch_C2(q_in(start = 1.5447753e-05, fixed = true), volume(start = 1.9606518e-05, fixed = true)),
                    brachiocephalic_trunk_C4(q_in(start = 2.389152e-06, fixed = true), volume(start = 1.334522e-05, fixed = true)),
                    aortic_arch_C46(q_in(start = 1.6801863e-05, fixed = true), volume(start = 1.161528e-05, fixed = true)),
                    aortic_arch_C64(q_in(start = 1.7420149e-05, fixed = true), volume(start = 7.972709e-06, fixed = true)),
                    aortic_arch_C94(q_in(start = 1.5842797e-05, fixed = true), volume(start = 4.36876e-05, fixed = true)),
                    thoracic_aorta_C96(q_in(start = 2.499475e-05, fixed = true), volume(start = 7.8452595e-06, fixed = true)),
                    thoracic_aorta_C100(q_in(start = 2.6667152e-05, fixed = true), volume(start = 6.032697e-06, fixed = true)),
                    thoracic_aorta_C104(q_in(start = 2.7979333e-05, fixed = true), volume(start = 1.1359616e-05, fixed = true)),
                    thoracic_aorta_C108(q_in(start = 3.055539e-05, fixed = true), volume(start = 3.7310135e-06, fixed = true)),
                    thoracic_aorta_C112(q_in(start = 3.1413132e-05, fixed = true), volume(start = 6.069352e-05, fixed = true)),
                    abdominal_aorta_C114(q_in(start = 5.1864696e-05, fixed = true), volume(start = 1.2543936e-06, fixed = true)),
                    abdominal_aorta_C136(q_in(start = 4.1857333e-05, fixed = true), volume(start = 5.260174e-06, fixed = true)),
                    abdominal_aorta_C164(q_in(start = 3.729783e-05, fixed = true), volume(start = 1.5609712e-06, fixed = true)),
                    abdominal_aorta_C176(q_in(start = 2.845579e-05, fixed = true), volume(start = 4.193831e-06, fixed = true)),
                    abdominal_aorta_C188(q_in(start = 2.0634187e-05, fixed = true), volume(start = 1.6709444e-05, fixed = true)),
                    abdominal_aorta_C192(q_in(start = 2.6572869e-05, fixed = true), volume(start = 1.0363566e-05, fixed = true)),
                    celiac_trunk_C116(volume(start = 0.00034605066, fixed = true)),
                    renal_L166(volume(start = 0.00031258902, fixed = true)),
                    renal_R178(volume(start = 0.0003097842, fixed = true)),
                    common_iliac_R216(q_in(start = 1.502021e-05, fixed = true), volume(start = 8.584074e-06, fixed = true)),
                    internal_iliac_T1_R218(volume(start = 0.0001701042, fixed = true)),
                    external_iliac_R220(q_in(start = 1.265608e-05, fixed = true), volume(start = 4.891175e-06, fixed = true)),
                    femoral_R222(q_in(start = 1.3102774e-05, fixed = true), volume(start = 1.3986787e-06, fixed = true)),
                    profundus_T2_R224(volume(start = 0.0001950657, fixed = true)),
                    femoral_R226(q_in(start = 7.5418125e-06, fixed = true), volume(start = 1.1580388e-05, fixed = true)),
                    popliteal_R228(q_in(start = 3.2454736e-06, fixed = true), volume(start = 3.554339e-06, fixed = true)),
                    anterior_tibial_T3_R230(volume(start = 2.5597426e-05, fixed = true)),
                    popliteal_R232(q_in(start = 1.033068e-06, fixed = true), volume(start = 1.8075882e-07, fixed = true)),
                    tibiofibular_trunk_R234(q_in(start = 9.905999e-07, fixed = true), volume(start = 7.348841e-07, fixed = true)),
                    posterior_tibial_T4_R236(volume(start = 2.7922191e-05, fixed = true)),
                    common_iliac_L194(q_in(start = 1.5141948e-05, fixed = true), volume(start = 8.211538e-06, fixed = true)),
                    internal_iliac_T1_L196(volume(start = 0.00017010565, fixed = true)),
                    external_iliac_L198(q_in(start = 1.2644105e-05, fixed = true), volume(start = 4.8921697e-06, fixed = true)),
                    femoral_L200(q_in(start = 1.3085697e-05, fixed = true), volume(start = 1.3989653e-06, fixed = true)),
                    profundus_T2_L202(volume(start = 0.00019506678, fixed = true)),
                    femoral_L204(q_in(start = 7.5177954e-06, fixed = true), volume(start = 1.1583147e-05, fixed = true)),
                    popliteal_L206(q_in(start = 3.2390747e-06, fixed = true), volume(start = 3.555127e-06, fixed = true)),
                    anterior_tibial_T3_L208(volume(start = 2.559756e-05, fixed = true)),
                    popliteal_L210(q_in(start = 1.0329201e-06, fixed = true), volume(start = 1.8078092e-07, fixed = true)),
                    tibiofibular_trunk_L212(q_in(start = 9.906518e-07, fixed = true), volume(start = 7.349963e-07, fixed = true)),
                    posterior_tibial_T4_L214(volume(start = 2.7922355e-05, fixed = true)),
                    subclavian_R28(q_in(start = 3.5333308e-06, fixed = true), volume(start = 2.0448463e-06, fixed = true)),
                    subclavian_R30(q_in(start = 1.8231343e-06, fixed = true), volume(start = 2.681836e-06, fixed = true)),
                    axillary_R32(q_in(start = 2.2345373e-06, fixed = true), volume(start = 3.0684769e-06, fixed = true)),
                    brachial_R34(q_in(start = 2.5945667e-06, fixed = true), volume(start = 4.4528024e-06, fixed = true)),
                    ulnar_T2_R36(q_in(start = 1.7006256e-06, fixed = true), volume(start = 2.3733502e-07, fixed = true)),
                    ulnar_T2_R42(volume(start = 5.8677684e-05, fixed = true)),
                    radial_T1_R44(volume(start = 4.809243e-05, fixed = true)),
                    subclavian_L66(q_in(start = 3.122423e-06, fixed = true), volume(start = 4.851381e-06, fixed = true)),
                    subclavian_L78(q_in(start = 1.8392781e-06, fixed = true), volume(start = 1.9846962e-06, fixed = true)),
                    axillary_L80(q_in(start = 2.1162452e-06, fixed = true), volume(start = 3.0569622e-06, fixed = true)),
                    brachial_L82(q_in(start = 2.9281853e-06, fixed = true), volume(start = 1.4809441e-06, fixed = true)),
                    ulnar_T2_L84(q_in(start = 1.6893332e-06, fixed = true), volume(start = 2.3721871e-07, fixed = true)),
                    ulnar_T2_L90(volume(start = 5.8654055e-05, fixed = true)),
                    radial_T1_L92(volume(start = 5.0967024e-05, fixed = true)),
                    common_carotid_R6_A(q_in(start = 1.3062946e-06, fixed = true), volume(start = 5.0526714e-06, fixed = true)),
                    common_carotid_R6_B(q_in(start = 2.4999433e-06, fixed = true), volume(start = 4.317062e-06, fixed = true)),
                    common_carotid_R6_C(q_in(start = 3.5371388e-06, fixed = true), volume(start = 3.2277392e-06, fixed = true)),
                    internal_carotid_R8_A(q_in(start = 2.0517562e-06, fixed = true), volume(start = 1.2661793e-06, fixed = true)),
                    internal_carotid_R8_B(q_in(start = 2.1789479e-06, fixed = true), volume(start = 8.016099e-07, fixed = true)),
                    internal_carotid_R8_C(volume(start = 6.963685e-05, fixed = true)),
                    external_carotid_T2_R26(volume(start = 6.9874775e-05, fixed = true)),
                    common_carotid_L48_A(q_in(start = 1.6119718e-06, fixed = true), volume(start = 5.452077e-06, fixed = true)),
                    common_carotid_L48_B(q_in(start = 2.648711e-06, fixed = true), volume(start = 4.792322e-06, fixed = true)),
                    common_carotid_L48_C(q_in(start = 3.412999e-06, fixed = true), volume(start = 4.255995e-06, fixed = true)),
                    common_carotid_L48_D(q_in(start = 3.989223e-06, fixed = true), volume(start = 3.4457782e-06, fixed = true)),
                    internal_carotid_L50_A(q_in(start = 2.151118e-06, fixed = true), volume(start = 1.2641354e-06, fixed = true)),
                    internal_carotid_L50_B(q_in(start = 2.2081886e-06, fixed = true), volume(start = 8.0029497e-07, fixed = true)),
                    internal_carotid_L50_C(volume(start = 6.964012e-05, fixed = true)),
                    external_carotid_T2_L62(volume(start = 6.9873226e-05, fixed = true)),
                    vertebral_L2(volume(start = 6.424655e-05, fixed = true)),
                    vertebral_R272(volume(start = 6.4250744e-05, fixed = true)),
                    superior_vena_cava_C2(volume(start = 2.0190057e-06, fixed = true)),
                    superior_vena_cava_C88(volume(start = 3.4795523e-06, fixed = true)),
                    inferior_vena_cava_C8(volume(start = 3.0285164e-06, fixed = true)),
                    hepatic_vein_T1_C10(volume(start = 1.1874977e-06, fixed = true)),
                    inferior_vena_cava_C12(volume(start = 8.221148e-06, fixed = true)),
                    inferior_vena_cava_C16(volume(start = 6.467838e-06, fixed = true)),
                    renal_vein_T1_R18(volume(start = 1.9063035e-06, fixed = true)),
                    inferior_vena_cava_C20(volume(start = 4.5125225e-07, fixed = true)),
                    renal_vein_T1_L22(volume(start = 1.6846657e-06, fixed = true)),
                    inferior_vena_cava_C24(volume(start = 1.8012972e-05, fixed = true)),
                    common_iliac_vein_L56(volume(start = 4.4250137e-06, fixed = true)),
                    common_iliac_vein_R26(volume(start = 4.066925e-06, fixed = true)),
                    external_iliac_vein_R28(volume(start = 5.932303e-07, fixed = true)),
                    internal_iliac_vein_T1_R30(volume(start = 2.5393401e-06, fixed = true)),
                    external_iliac_vein_R32(volume(start = 6.8898735e-06, fixed = true)),
                    femoral_vein_R34(volume(start = 2.9953674e-07, fixed = true)),
                    femoral_vein_R38(volume(start = 2.3761404e-06, fixed = true)),
                    profunda_femoris_vein_T2_R40(volume(start = 6.631626e-06, fixed = true)),
                    femoral_vein_R42(volume(start = 1.6839162e-05, fixed = true)),
                    femoral_vein_R46(volume(start = 9.274451e-07, fixed = true)),
                    popliteal_vein_R48(volume(start = 3.7832826e-06, fixed = true)),
                    anterior_tibial_vein_T4_R50(volume(start = 1.3909333e-06, fixed = true)),
                    popliteal_vein_R52(volume(start = 8.4179516e-07, fixed = true)),
                    posterior_tibial_vein_T6_R54(volume(start = 1.7155799e-06, fixed = true)),
                    external_iliac_vein_L58(volume(start = 5.9402305e-07, fixed = true)),
                    internal_iliac_vein_T1_L60(volume(start = 2.6121952e-06, fixed = true)),
                    external_iliac_vein_L62(volume(start = 6.7647516e-06, fixed = true)),
                    femoral_vein_L64(volume(start = 3.5021418e-07, fixed = true)),
                    femoral_vein_L68(volume(start = 2.3763903e-06, fixed = true)),
                    profunda_femoris_vein_T2_L70(volume(start = 6.6323046e-06, fixed = true)),
                    femoral_vein_L72(volume(start = 1.6840946e-05, fixed = true)),
                    femoral_vein_L76(volume(start = 9.2753766e-07, fixed = true)),
                    popliteal_vein_L78(volume(start = 3.7836849e-06, fixed = true)),
                    anterior_tibial_vein_T4_L80(volume(start = 1.3910188e-06, fixed = true)),
                    popliteal_vein_L82(volume(start = 8.418899e-07, fixed = true)),
                    posterior_tibial_vein_T6_L84(volume(start = 1.7157756e-06, fixed = true)),
                    brachiocephalic_vein_R90(volume(start = 4.091942e-06, fixed = true)),
                    brachiocephalic_vein_L124(volume(start = 7.67105e-06, fixed = true)),
                    vertebral_vein_R92(volume(start = 2.6009247e-06, fixed = true)),
                    brachiocephalic_vein_R94(volume(start = 9.2767846e-07, fixed = true)),
                    subclavian_vein_R96(volume(start = 4.5111125e-07, fixed = true)),
                    internal_jugular_vein_R122(volume(start = 1.7834926e-05, fixed = true)),
                    external_jugular_vein_R98(volume(start = 1.2707261e-06, fixed = true)),
                    subclavian_vein_R100(volume(start = 1.8454383e-06, fixed = true)),
                    axillary_vein_R102(volume(start = 6.4903325e-06, fixed = true)),
                    brachial_vein_R104(volume(start = 1.3339586e-06, fixed = true)),
                    brachial_vein_R114(volume(start = 1.2079088e-06, fixed = true)),
                    brachial_vein_R108(volume(start = 1.8542592e-07, fixed = true)),
                    ulnar_vein_T7_R110(volume(start = 1.6921599e-06, fixed = true)),
                    brachial_vein_R118(volume(start = 1.1729282e-07, fixed = true)),
                    radial_vein_T3_R120(volume(start = 1.205644e-06, fixed = true)),
                    vertebral_vein_L126(volume(start = 2.4309086e-06, fixed = true)),
                    brachiocephalic_vein_L128(volume(start = 4.6896253e-07, fixed = true)),
                    subclavian_vein_L130(volume(start = 4.0129257e-07, fixed = true)),
                    internal_jugular_vein_L156(volume(start = 1.0832639e-05, fixed = true)),
                    external_jugular_vein_L132(volume(start = 1.2459938e-06, fixed = true)),
                    subclavian_vein_L134(volume(start = 1.7991135e-06, fixed = true)),
                    axillary_vein_L136(volume(start = 6.566354e-06, fixed = true)),
                    brachial_vein_L138(volume(start = 1.334548e-06, fixed = true)),
                    brachial_vein_L148(volume(start = 1.2137037e-06, fixed = true)),
                    brachial_vein_L142(volume(start = 1.8551005e-07, fixed = true)),
                    ulnar_vein_T7_L144(volume(start = 1.6929237e-06, fixed = true)),
                    brachial_vein_L152(volume(start = 1.1790848e-07, fixed = true)),
                    radial_vein_T3_L154(volume(start = 1.236435e-06, fixed = true)),
                    mesenteric_artery(q_in(start = 6.350247e-06, fixed = true), volume(start = 6.3512184e-06, fixed = true)),
                    splanchnic_tissue(volume(start = 0.00025098588, fixed = true)),
                    splanchnic_vein(volume(start = 9.904153e-06, fixed = true)),
                    coronary_arteries(q_in(start = 2.792708e-06, fixed = true), volume(start = 3.6836703e-08, fixed = true)),
                    cardiac_tissue(volume(start = 0.00011293962, fixed = true)),
                    coronary_veins(volume(start = 3.391292e-08, fixed = true)),
                    brachial_L82_HeartLevel(q_in(start = 2.5026036e-06, fixed = true), volume(start = 2.9829905e-06, fixed = true))),
                  heartComponent(
                    tricuspidValve(open(start = true, fixed = true)),
                    pulmonaryValve(open(start = false, fixed = true)),
                    mitralValve(open(start = true, fixed = true)),
                    aorticValve(open(start = false, fixed = true)),
                    ventricles(
                      LV_wall(ym(start = 3.4132285, fixed = true), SL(start = 1.9376333, fixed = true), xm(start = -4.6858945, fixed = false)),
                      SEP_wall(SL(start = 1.9653507, fixed = true), xm(start = 1.9751972, fixed = false)),
                      RV_wall(SL(start = 1.8940938, fixed = true), xm(start = 5.3701267, fixed = false)), V_LV(start = 0.00012436486, fixed = true), V_RV(start = 0.0001116841, fixed = true)),
                    ra(volume(start = 1.0647456e-05, fixed = true)),
                    la(volume(start = 4.688662e-05, fixed = true)),
                    sa_node(cardiac_cycle(start = 0.93316317, fixed = true))),
                  pulmonaryComponent(
                    c_pa(volume(start = 6.0211845e-05, fixed = true)),
                    c_pv(volume(start = 0.00034601512, fixed = true))));
            end imp_avSt_ss;

            model imp_hemr "A simple bleeding experiment"
              extends imp_base;
              Physiolibrary.Hydraulic.Components.Pump pump(useSolutionFlowInput=true,
                  SolutionFlow(displayUnit="m3/s") = 1.6666666666667e-05)
                annotation (Placement(transformation(extent={{48,-98},{68,-78}})));
              Physiolibrary.Hydraulic.Components.ElasticVessel volume_bleeded
                "A cut vein reservoir"
                annotation (Placement(transformation(extent={{80,-98},{100,-78}})));
              replaceable Modelica.Blocks.Sources.Ramp bleeding_ramp(
              height=-50e-6,
              offset=50e-6,
              startTime=10,
              duration=0) constrainedby Modelica.Blocks.Sources.Ramp
              annotation (Placement(transformation(extent={{32,-68},{48,-52}})));
            equation
              connect(volume_bleeded.q_in, pump.q_out) annotation (Line(
                  points={{90,-88},{68,-88}},
                  color={0,0,0},
                  thickness=1));
              connect(pump.q_in, heartComponent.sv) annotation (Line(
                  points={{48,-88},{24,-88},{24,-16.4},{-16,-16.4}},
                  color={0,0,0},
                  thickness=1));
            connect(bleeding_ramp.y, pump.solutionFlow) annotation (Line(points={{48.8,
                    -60},{58,-60},{58,-81}}, color={0,0,127}));
            end imp_hemr;
          end Normal;

          package NormalNoBaro
            model imp_base
                extends CVS_NormalNoBaro;
            end imp_base;

            model imp_noVc
                extends imp_base(settings(veins_UsePhiEffect=false));
            end imp_noVc;

            model imp_noVcLin
                extends imp_base(settings(veins_UseNonLinearVeins=false,
                                          veins_UsePhiEffect=false));
            end imp_noVcLin;

            model imp_noVcTc
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTc;

            model imp_noVcTcLin
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTcLin;

            model imp_noBaro
                extends imp_base(useAutonomousPhi(y=false));
            end imp_noBaro;

            model imp_noBaroLinV
              extends imp_noBaro(
                  settings(veins_UseNonLinearVeins=false));
            end imp_noBaroLinV;

            model imp_noBaro_linVT
              extends imp_noBaroLinV(settings(UseNonLinear_TissuesCompliance=false));
            end imp_noBaro_linVT;

            model imp_noValves
              extends imp_base(SystemicComponent(
                    brachiocephalic_vein_R90(LimitBackflow=false),
                    brachiocephalic_vein_L124(LimitBackflow=false),
                    common_iliac_vein_R26(LimitBackflow=false),
                    common_iliac_vein_L56(LimitBackflow=false)));
            end imp_noValves;

            model imp_arSt
              extends imp_base(settings(syst_art_k_E=0.8));
            end imp_arSt;

            model imp_avRe
              extends imp_base(heartComponent(aorticValve(_Goff=3E-08)));
            end imp_avRe;

            model imp_avSt
              extends imp_base(heartComponent(aorticValve(_Ron(
                        displayUnit="(mmHg.min)/l") = 10879106.813064)), settings(
                    baro_tau_s=10));

            Physiolibrary.Types.Pressure p_in(start = 13e3);
            Physiolibrary.Types.Pressure p_out(start = 13e3);
            Physiolibrary.Types.Pressure dp_aortic = p_in - p_out;
            parameter Modelica.Units.SI.Time tau_avg=10;
            equation
                // integrate only during open valve
                if heartComponent.aorticValve.open then
                der(p_in)*tau_avg = heartComponent.aorticValve.q_in.pressure - p_in;
                der(p_out)*tau_avg = heartComponent.aorticValve.q_out.pressure - p_out;
                else
                  der(p_in) = 0;
                  der(p_out) = 0;
                end if;
            end imp_avSt;

            model imp_hemr "A simple bleeding experiment"
              extends imp_base;
              Physiolibrary.Hydraulic.Components.Pump pump(useSolutionFlowInput=true,
                  SolutionFlow(displayUnit="m3/s") = 1.6666666666667e-05)
                annotation (Placement(transformation(extent={{48,-98},{68,-78}})));
              Physiolibrary.Hydraulic.Components.ElasticVessel volume_bleeded
                "A cut vein reservoir"
                annotation (Placement(transformation(extent={{80,-98},{100,-78}})));
              replaceable Modelica.Blocks.Sources.Ramp bleeding_ramp(
              height=-50e-6,
              offset=50e-6,
              startTime=10,
              duration=0) constrainedby Modelica.Blocks.Sources.Ramp
              annotation (Placement(transformation(extent={{32,-68},{48,-52}})));
            equation
              connect(volume_bleeded.q_in, pump.q_out) annotation (Line(
                  points={{90,-88},{68,-88}},
                  color={0,0,0},
                  thickness=1));
              connect(pump.q_in, heartComponent.sv) annotation (Line(
                  points={{48,-88},{24,-88},{24,-16.4},{-16,-16.4}},
                  color={0,0,0},
                  thickness=1));
            connect(bleeding_ramp.y, pump.solutionFlow) annotation (Line(points={{48.8,
                    -60},{58,-60},{58,-81}}, color={0,0,127}));
            end imp_hemr;
          end NormalNoBaro;

          package TiltAuto
            model imp_base
                extends CVS_TiltAuto;
            end imp_base;

            model imp_noVc
                extends imp_base(settings(veins_UsePhiEffect=false));
            end imp_noVc;

            model imp_noVcLin
                extends imp_base(settings(veins_UseNonLinearVeins=false,
                                          veins_UsePhiEffect=false));
            end imp_noVcLin;

            model imp_noVcTc
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTc;

            model imp_noVcTcLin
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTcLin;

            model imp_noBaro
                extends imp_base(useAutonomousPhi(y=false));
            end imp_noBaro;

            model imp_noBaroLinV
              extends imp_noBaro(
                  settings(veins_UseNonLinearVeins=false));
            end imp_noBaroLinV;

            model imp_noBaro_linVT
              extends imp_noBaroLinV(settings(UseNonLinear_TissuesCompliance=false));
            end imp_noBaro_linVT;

            model imp_noValves
              extends imp_base(SystemicComponent(
                    brachiocephalic_vein_R90(LimitBackflow=false),
                    brachiocephalic_vein_L124(LimitBackflow=false),
                    common_iliac_vein_R26(LimitBackflow=false),
                    common_iliac_vein_L56(LimitBackflow=false)));
            end imp_noValves;

            model imp_arSt
              extends imp_base(settings(syst_art_k_E=0.8,baro_tau_s = 10));
            annotation (experiment(
                StopTime=400,
                Interval=0.02,
                Tolerance=1e-06,
                __Dymola_Algorithm="Cvode"));
            end imp_arSt;

            model imp_arSt_ss
              "Steady state initialization from 2020-12-29 21:05:26.481251 at time 299.86"
              extends imp_arSt(
                SystemicComponent(
                  baroreflex_system(
                    baroreflex(phi(start=0.24229456, fixed=true)),
                    baroreceptor_aortic(epsilon(start=1.3092335, fixed=true), s(start=0.7701473,
                          fixed=true)),
                    baroreceptor_carotid(epsilon(start=1.0949951, fixed=true), s(start=0.8840892,
                          fixed=true))),
                  ascending_aorta_A(
                    q(start=2.5515742e-06, fixed=true),
                    vol1(start=3.403867e-06, fixed=true),
                    vol2(start=3.403783e-06, fixed=true)),
                  ascending_aorta_B(q_in(start=5.112949e-06, fixed=true), volume(start=1.6754268e-05,
                        fixed=true)),
                  ascending_aorta_C(q_in(start=7.662759e-06, fixed=true), volume(start=1.5518155e-05,
                        fixed=true)),
                  ascending_aorta_D(q_in(start=1.1987098e-05, fixed=true), volume(start=1.4190164e-05,
                        fixed=true)),
                  aortic_arch_C2(q_in(start=1.5902064e-05, fixed=true), volume(start=1.3001863e-05,
                        fixed=true)),
                  brachiocephalic_trunk_C4(q_in(start=1.2677907e-06, fixed=true), volume(
                        start=9.140656e-06, fixed=true)),
                  aortic_arch_C46(q_in(start=1.8179178e-05, fixed=true), volume(start=7.716952e-06,
                        fixed=true)),
                  aortic_arch_C64(q_in(start=2.0871652e-05, fixed=true), volume(start=5.3034414e-06,
                        fixed=true)),
                  aortic_arch_C94(q_in(start=1.9551486e-05, fixed=true), volume(start=2.9175528e-05,
                        fixed=true)),
                  thoracic_aorta_C96(q_in(start=2.6880227e-05, fixed=true), volume(start=5.2647374e-06,
                        fixed=true)),
                  thoracic_aorta_C100(q_in(start=2.816266e-05, fixed=true), volume(start=4.0528794e-06,
                        fixed=true)),
                  thoracic_aorta_C104(q_in(start=2.9133214e-05, fixed=true), volume(start=7.645832e-06,
                        fixed=true)),
                  thoracic_aorta_C108(q_in(start=3.0901436e-05, fixed=true), volume(start=2.5140964e-06,
                        fixed=true)),
                  thoracic_aorta_C112(q_in(start=3.147465e-05, fixed=true), volume(start=4.163393e-05,
                        fixed=true)),
                  abdominal_aorta_C114(q_in(start=3.73411e-05, fixed=true), volume(start=8.6590995e-07,
                        fixed=true)),
                  abdominal_aorta_C136(q_in(start=2.9044633e-05, fixed=true), volume(start=3.6362642e-06,
                        fixed=true)),
                  abdominal_aorta_C164(q_in(start=2.3903056e-05, fixed=true), volume(start=1.0804175e-06,
                        fixed=true)),
                  abdominal_aorta_C176(q_in(start=1.6465858e-05, fixed=true), volume(start=2.906814e-06,
                        fixed=true)),
                  abdominal_aorta_C188(q_in(start=9.335313e-06, fixed=true), volume(start=1.1651799e-05,
                        fixed=true)),
                  abdominal_aorta_C192(q_in(start=1.0589696e-05, fixed=true), volume(start=7.2855782e-06,
                        fixed=true)),
                  celiac_trunk_C116(volume(start=0.0003551999, fixed=true)),
                  renal_L166(volume(start=0.00032085134, fixed=true)),
                  renal_R178(volume(start=0.00031797556, fixed=true)),
                  common_iliac_R216(q_in(start=5.622475e-06, fixed=true), volume(start=6.2219397e-06,
                        fixed=true)),
                  internal_iliac_T1_R218(volume(start=0.0001746407, fixed=true)),
                  external_iliac_R220(q_in(start=2.2483043e-06, fixed=true), volume(start=4.083962e-06,
                        fixed=true)),
                  femoral_R222(q_in(start=2.5723098e-06, fixed=true), volume(start=1.1703349e-06,
                        fixed=true)),
                  profundus_T2_R224(volume(start=0.0002003131, fixed=true)),
                  femoral_R226(q_in(start=-1.7140757e-06, fixed=true), volume(start=9.683984e-06,
                        fixed=true)),
                  popliteal_R228(q_in(start=2.9811156e-07, fixed=true), volume(start=3.0031426e-06,
                        fixed=true)),
                  anterior_tibial_T3_R230(volume(start=2.6213478e-05, fixed=true)),
                  popliteal_R232(q_in(start=4.662309e-07, fixed=true), volume(start=1.6512647e-07,
                        fixed=true)),
                  tibiofibular_trunk_R234(q_in(start=4.848016e-07, fixed=true), volume(
                        start=6.7155645e-07, fixed=true)),
                  posterior_tibial_T4_R236(volume(start=2.8676926e-05, fixed=true)),
                  common_iliac_L194(q_in(start=5.7011166e-06, fixed=true), volume(start=5.9542117e-06,
                        fixed=true)),
                  internal_iliac_T1_L196(volume(start=0.00017464205, fixed=true)),
                  external_iliac_L198(q_in(start=2.2989632e-06, fixed=true), volume(start=4.0842533e-06,
                        fixed=true)),
                  femoral_L200(q_in(start=2.6207276e-06, fixed=true), volume(start=1.1704201e-06,
                        fixed=true)),
                  profundus_T2_L202(volume(start=0.00020031397, fixed=true)),
                  femoral_L204(q_in(start=-1.6701713e-06, fixed=true), volume(start=9.684931e-06,
                        fixed=true)),
                  popliteal_L206(q_in(start=3.1131438e-07, fixed=true), volume(start=3.00339e-06,
                        fixed=true)),
                  anterior_tibial_T3_L208(volume(start=2.6213504e-05, fixed=true)),
                  popliteal_L210(q_in(start=4.6855897e-07, fixed=true), volume(start=1.6513317e-07,
                        fixed=true)),
                  tibiofibular_trunk_L212(q_in(start=4.8684336e-07, fixed=true), volume(
                        start=6.716039e-07, fixed=true)),
                  posterior_tibial_T4_L214(volume(start=2.8676977e-05, fixed=true)),
                  subclavian_R28(q_in(start=3.0323986e-06, fixed=true), volume(start=1.4426801e-06,
                        fixed=true)),
                  subclavian_R30(q_in(start=1.7622905e-06, fixed=true), volume(start=1.952449e-06,
                        fixed=true)),
                  axillary_R32(q_in(start=2.1503586e-06, fixed=true), volume(start=2.3369512e-06,
                        fixed=true)),
                  brachial_R34(q_in(start=2.4401477e-06, fixed=true), volume(start=3.4667978e-06,
                        fixed=true)),
                  ulnar_T2_R36(q_in(start=1.3941229e-06, fixed=true), volume(start=2.0834604e-07,
                        fixed=true)),
                  ulnar_T2_R42(volume(start=6.0209728e-05, fixed=true)),
                  radial_T1_R44(volume(start=4.9256567e-05, fixed=true)),
                  subclavian_L66(q_in(start=2.7339422e-06, fixed=true), volume(start=3.473886e-06,
                        fixed=true)),
                  subclavian_L78(q_in(start=1.8564388e-06, fixed=true), volume(start=1.4690359e-06,
                        fixed=true)),
                  axillary_L80(q_in(start=2.1160115e-06, fixed=true), volume(start=2.3365046e-06,
                        fixed=true)),
                  brachial_L82(q_in(start=2.519172e-06, fixed=true), volume(start=1.15349e-06,
                        fixed=true)),
                  ulnar_T2_L84(q_in(start=1.3866913e-06, fixed=true), volume(start=2.0829354e-07,
                        fixed=true)),
                  ulnar_T2_L90(volume(start=6.018713e-05, fixed=true)),
                  radial_T1_L92(volume(start=5.219178e-05, fixed=true)),
                  common_carotid_R6_A(q_in(start=5.414467e-07, fixed=true), volume(start=3.0722165e-06,
                        fixed=true)),
                  common_carotid_R6_B(q_in(start=1.6466822e-06, fixed=true), volume(start=2.6402852e-06,
                        fixed=true)),
                  common_carotid_R6_C(q_in(start=2.5935403e-06, fixed=true), volume(start=1.9995377e-06,
                        fixed=true)),
                  internal_carotid_R8_A(q_in(start=1.5525253e-06, fixed=true), volume(start=
                         1.0611803e-06, fixed=true)),
                  internal_carotid_R8_B(q_in(start=1.669214e-06, fixed=true), volume(start=6.816792e-07,
                        fixed=true)),
                  internal_carotid_R8_C(volume(start=7.149893e-05, fixed=true)),
                  external_carotid_T2_R26(volume(start=7.170783e-05, fixed=true)),
                  common_carotid_L48_A(q_in(start=-6.141678e-07, fixed=true), volume(start=3.3297435e-06,
                        fixed=true)),
                  common_carotid_L48_B(q_in(start=5.534364e-07, fixed=true), volume(start=2.9412283e-06,
                        fixed=true)),
                  common_carotid_L48_C(q_in(start=1.5976489e-06, fixed=true), volume(start=2.6248806e-06,
                        fixed=true)),
                  common_carotid_L48_D(q_in(start=2.5339357e-06, fixed=true), volume(start=2.145889e-06,
                        fixed=true)),
                  internal_carotid_L50_A(q_in(start=1.5492935e-06, fixed=true), volume(
                        start=1.0611327e-06, fixed=true)),
                  internal_carotid_L50_B(q_in(start=1.6673133e-06, fixed=true), volume(
                        start=6.8165207e-07, fixed=true)),
                  internal_carotid_L50_C(volume(start=7.1501076e-05, fixed=true)),
                  external_carotid_T2_L62(volume(start=7.170576e-05, fixed=true)),
                  vertebral_L2(volume(start=6.593643e-05, fixed=true)),
                  vertebral_R272(volume(start=6.594132e-05, fixed=true)),
                  superior_vena_cava_C2(volume(start=2.349646e-06, fixed=true)),
                  superior_vena_cava_C88(volume(start=4.0495393e-06, fixed=true)),
                  inferior_vena_cava_C8(volume(start=3.5247192e-06, fixed=true)),
                  hepatic_vein_T1_C10(volume(start=1.3821171e-06, fixed=true)),
                  inferior_vena_cava_C12(volume(start=9.570287e-06, fixed=true)),
                  inferior_vena_cava_C16(volume(start=7.5307207e-06, fixed=true)),
                  renal_vein_T1_R18(volume(start=2.2198908e-06, fixed=true)),
                  inferior_vena_cava_C20(volume(start=5.2541407e-07, fixed=true)),
                  renal_vein_T1_L22(volume(start=1.9619556e-06, fixed=true)),
                  inferior_vena_cava_C24(volume(start=2.0981015e-05, fixed=true)),
                  common_iliac_vein_L56(volume(start=5.1566294e-06, fixed=true)),
                  common_iliac_vein_R26(volume(start=4.739145e-06, fixed=true)),
                  external_iliac_vein_R28(volume(start=6.9132915e-07, fixed=true)),
                  internal_iliac_vein_T1_R30(volume(start=2.960323e-06, fixed=true)),
                  external_iliac_vein_R32(volume(start=8.033378e-06, fixed=true)),
                  femoral_vein_R34(volume(start=3.492642e-07, fixed=true)),
                  femoral_vein_R38(volume(start=2.7714716e-06, fixed=true)),
                  profunda_femoris_vein_T2_R40(volume(start=7.766037e-06, fixed=true)),
                  femoral_vein_R42(volume(start=1.9658151e-05, fixed=true)),
                  femoral_vein_R46(volume(start=1.0827324e-06, fixed=true)),
                  popliteal_vein_R48(volume(start=4.4213325e-06, fixed=true)),
                  anterior_tibial_vein_T4_R50(volume(start=1.6728767e-06, fixed=true)),
                  popliteal_vein_R52(volume(start=9.838703e-07, fixed=true)),
                  posterior_tibial_vein_T6_R54(volume(start=2.0523348e-06, fixed=true)),
                  external_iliac_vein_L58(volume(start=6.92281e-07, fixed=true)),
                  internal_iliac_vein_T1_L60(volume(start=3.0454132e-06, fixed=true)),
                  external_iliac_vein_L62(volume(start=7.887734e-06, fixed=true)),
                  femoral_vein_L64(volume(start=4.0837014e-07, fixed=true)),
                  femoral_vein_L68(volume(start=2.7718672e-06, fixed=true)),
                  profunda_femoris_vein_T2_L70(volume(start=7.7671275e-06, fixed=true)),
                  femoral_vein_L72(volume(start=1.9660982e-05, fixed=true)),
                  femoral_vein_L76(volume(start=1.0828815e-06, fixed=true)),
                  popliteal_vein_L78(volume(start=4.4219705e-06, fixed=true)),
                  anterior_tibial_vein_T4_L80(volume(start=1.6729833e-06, fixed=true)),
                  popliteal_vein_L82(volume(start=9.840184e-07, fixed=true)),
                  posterior_tibial_vein_T6_L84(volume(start=2.0526238e-06, fixed=true)),
                  brachiocephalic_vein_R90(volume(start=4.7626113e-06, fixed=true)),
                  brachiocephalic_vein_L124(volume(start=8.929497e-06, fixed=true)),
                  vertebral_vein_R92(volume(start=3.0442625e-06, fixed=true)),
                  brachiocephalic_vein_R94(volume(start=1.0797398e-06, fixed=true)),
                  subclavian_vein_R96(volume(start=5.250738e-07, fixed=true)),
                  internal_jugular_vein_R122(volume(start=2.0761512e-05, fixed=true)),
                  external_jugular_vein_R98(volume(start=1.491042e-06, fixed=true)),
                  subclavian_vein_R100(volume(start=2.1482047e-06, fixed=true)),
                  axillary_vein_R102(volume(start=7.5574403e-06, fixed=true)),
                  brachial_vein_R104(volume(start=1.5854067e-06, fixed=true)),
                  brachial_vein_R114(volume(start=1.4408736e-06, fixed=true)),
                  brachial_vein_R108(volume(start=2.2094642e-07, fixed=true)),
                  ulnar_vein_T7_R110(volume(start=2.0743273e-06, fixed=true)),
                  brachial_vein_R118(volume(start=1.4019727e-07, fixed=true)),
                  radial_vein_T3_R120(volume(start=1.4504806e-06, fixed=true)),
                  vertebral_vein_L126(volume(start=2.844439e-06, fixed=true)),
                  brachiocephalic_vein_L128(volume(start=5.4590174e-07, fixed=true)),
                  subclavian_vein_L130(volume(start=4.6714425e-07, fixed=true)),
                  internal_jugular_vein_L156(volume(start=1.2613514e-05, fixed=true)),
                  external_jugular_vein_L132(volume(start=1.4619573e-06, fixed=true)),
                  subclavian_vein_L134(volume(start=2.0945354e-06, fixed=true)),
                  axillary_vein_L136(volume(start=7.646973e-06, fixed=true)),
                  brachial_vein_L138(volume(start=1.5862393e-06, fixed=true)),
                  brachial_vein_L148(volume(start=1.4495672e-06, fixed=true)),
                  brachial_vein_L142(volume(start=2.21063e-07, fixed=true)),
                  ulnar_vein_T7_L144(volume(start=2.0750651e-06, fixed=true)),
                  brachial_vein_L152(volume(start=1.4111909e-07, fixed=true)),
                  radial_vein_T3_L154(volume(start=1.4744237e-06, fixed=true)),
                  mesenteric_artery(q_in(start=5.6178865e-06, fixed=true), volume(start=6.11247e-06,
                        fixed=true)),
                  splanchnic_tissue(volume(start=0.00025765123, fixed=true)),
                  splanchnic_vein(volume(start=1.1531514e-05, fixed=true)),
                  coronary_arteries(q_in(start=2.1540886e-06, fixed=true), volume(start=3.59634e-08,
                        fixed=true)),
                  cardiac_tissue(volume(start=0.000115643015, fixed=true)),
                  coronary_veins(volume(start=3.646531e-08, fixed=true)),
                  brachial_L82_HeartLevel(q_in(start=2.3882185e-06, fixed=true), volume(
                        start=2.3169812e-06, fixed=true))),
                heartComponent(
                  tricuspidValve(open(start=true, fixed=true)),
                  pulmonaryValve(open(start=false, fixed=true)),
                  mitralValve(open(start=true, fixed=true)),
                  aorticValve(open(start=false, fixed=true)),
                  ventricles(
                    LV_wall(
                      ym(start=3.4805632, fixed=true),
                      SL(start=1.9729362, fixed=true),
                      xm(start=-4.762715, fixed=false)),
                    SEP_wall(SL(start=1.9974529, fixed=true), xm(start=1.9856914, fixed=false)),
                    RV_wall(SL(start=1.9732813, fixed=true), xm(start=5.636706, fixed=false)),
                    V_LV(start=0.00013364125, fixed=true),
                    V_RV(start=0.00013165307, fixed=true)),
                  ra(volume(start=1.1497501e-05, fixed=true)),
                  la(volume(start=4.7752277e-05, fixed=true)),
                  sa_node(cardiac_cycle(start=0.018870693, fixed=true))),
                pulmonaryComponent(c_pa(volume(start=5.8772443e-05, fixed=true)), c_pv(
                      volume(start=0.0003409318, fixed=true))));

            end imp_arSt_ss;

            model imp_avRe
              extends imp_base(heartComponent(aorticValve(_Goff=3E-08)));
            end imp_avRe;

            model imp_avRe_ss
              "Steady state initialization from 2020-12-29 21:55:59.012166 at time 253.0"
              extends imp_avRe(
                SystemicComponent(
                  baroreflex_system(
                    baroreflex(phi(start=0.16757183, fixed=true)),
                    baroreceptor_aortic(epsilon(start=1.3320701, fixed=true), s(start=0.65012145,
                          fixed=true)),
                    baroreceptor_carotid(epsilon(start=1.103226, fixed=true), s(start=0.79037714,
                          fixed=true))),
                  ascending_aorta_A(
                    q(start=-7.3818075e-05, fixed=true),
                    vol1(start=2.4189142e-06, fixed=true),
                    vol2(start=2.414492e-06, fixed=true)),
                  ascending_aorta_B(q_in(start=-6.7408044e-05, fixed=true), volume(start=1.52061875e-05,
                        fixed=true)),
                  ascending_aorta_C(q_in(start=-5.5794437e-05, fixed=true), volume(start=1.40863895e-05,
                        fixed=true)),
                  ascending_aorta_D(q_in(start=-4.4647764e-05, fixed=true), volume(start=1.2886119e-05,
                        fixed=true)),
                  aortic_arch_C2(q_in(start=-3.4638433e-05, fixed=true), volume(start=1.1813967e-05,
                        fixed=true)),
                  brachiocephalic_trunk_C4(q_in(start=-1.6764128e-05, fixed=true), volume(
                        start=8.36213e-06, fixed=true)),
                  aortic_arch_C46(q_in(start=-8.9024925e-06, fixed=true), volume(start=7.0181272e-06,
                        fixed=true)),
                  aortic_arch_C64(q_in(start=6.869297e-06, fixed=true), volume(start=4.8270326e-06,
                        fixed=true)),
                  aortic_arch_C94(q_in(start=1.4624259e-05, fixed=true), volume(start=2.6675087e-05,
                        fixed=true)),
                  thoracic_aorta_C96(q_in(start=3.137344e-05, fixed=true), volume(start=4.8263205e-06,
                        fixed=true)),
                  thoracic_aorta_C100(q_in(start=3.422136e-05, fixed=true), volume(start=3.720615e-06,
                        fixed=true)),
                  thoracic_aorta_C104(q_in(start=3.632285e-05, fixed=true), volume(start=7.0389433e-06,
                        fixed=true)),
                  thoracic_aorta_C108(q_in(start=3.9938175e-05, fixed=true), volume(start=2.317241e-06,
                        fixed=true)),
                  thoracic_aorta_C112(q_in(start=4.1084335e-05, fixed=true), volume(start=3.9572555e-05,
                        fixed=true)),
                  abdominal_aorta_C114(q_in(start=3.9460607e-05, fixed=true), volume(start=8.244755e-07,
                        fixed=true)),
                  abdominal_aorta_C136(q_in(start=3.6274727e-05, fixed=true), volume(start=3.4738077e-06,
                        fixed=true)),
                  abdominal_aorta_C164(q_in(start=3.3265344e-05, fixed=true), volume(start=1.0333196e-06,
                        fixed=true)),
                  abdominal_aorta_C176(q_in(start=3.025105e-05, fixed=true), volume(start=2.7881347e-06,
                        fixed=true)),
                  abdominal_aorta_C188(q_in(start=2.694116e-05, fixed=true), volume(start=1.1331741e-05,
                        fixed=true)),
                  abdominal_aorta_C192(q_in(start=2.3654404e-05, fixed=true), volume(start=7.162293e-06,
                        fixed=true)),
                  celiac_trunk_C116(volume(start=0.00034239716, fixed=true)),
                  renal_L166(volume(start=0.00030928865, fixed=true)),
                  renal_R178(volume(start=0.00030651345, fixed=true)),
                  common_iliac_R216(q_in(start=1.0638374e-05, fixed=true), volume(start=6.2092395e-06,
                        fixed=true)),
                  internal_iliac_T1_R218(volume(start=0.00016828466, fixed=true)),
                  external_iliac_R220(q_in(start=5.9365752e-06, fixed=true), volume(start=4.120243e-06,
                        fixed=true)),
                  femoral_R222(q_in(start=4.912814e-06, fixed=true), volume(start=1.1835556e-06,
                        fixed=true)),
                  profundus_T2_R224(volume(start=0.00019295952, fixed=true)),
                  femoral_R226(q_in(start=2.201239e-06, fixed=true), volume(start=1.0079696e-05,
                        fixed=true)),
                  popliteal_R228(q_in(start=1.1151135e-06, fixed=true), volume(start=3.1283034e-06,
                        fixed=true)),
                  anterior_tibial_T3_R230(volume(start=2.5325407e-05, fixed=true)),
                  popliteal_R232(q_in(start=4.6872145e-07, fixed=true), volume(start=1.6867807e-07,
                        fixed=true)),
                  tibiofibular_trunk_R234(q_in(start=4.6101414e-07, fixed=true), volume(
                        start=6.859674e-07, fixed=true)),
                  posterior_tibial_T4_R236(volume(start=2.7621592e-05, fixed=true)),
                  common_iliac_L194(q_in(start=1.0325266e-05, fixed=true), volume(start=5.9389768e-06,
                        fixed=true)),
                  internal_iliac_T1_L196(volume(start=0.00016828648, fixed=true)),
                  external_iliac_L198(q_in(start=5.8000064e-06, fixed=true), volume(start=4.1195262e-06,
                        fixed=true)),
                  femoral_L200(q_in(start=4.7971494e-06, fixed=true), volume(start=1.1833721e-06,
                        fixed=true)),
                  profundus_T2_L202(volume(start=0.00019296147, fixed=true)),
                  femoral_L204(q_in(start=2.0969128e-06, fixed=true), volume(start=1.007987e-05,
                        fixed=true)),
                  popliteal_L206(q_in(start=1.0879515e-06, fixed=true), volume(start=3.1284503e-06,
                        fixed=true)),
                  anterior_tibial_T3_L208(volume(start=2.532579e-05, fixed=true)),
                  popliteal_L210(q_in(start=4.6524158e-07, fixed=true), volume(start=1.6868202e-07,
                        fixed=true)),
                  tibiofibular_trunk_L212(q_in(start=4.582035e-07, fixed=true), volume(
                        start=6.860053e-07, fixed=true)),
                  posterior_tibial_T4_L214(volume(start=2.7622036e-05, fixed=true)),
                  subclavian_R28(q_in(start=-3.706251e-06, fixed=true), volume(start=1.3311679e-06,
                        fixed=true)),
                  subclavian_R30(q_in(start=-3.2659264e-06, fixed=true), volume(start=1.8184707e-06,
                        fixed=true)),
                  axillary_R32(q_in(start=-2.162287e-06, fixed=true), volume(start=2.2243473e-06,
                        fixed=true)),
                  brachial_R34(q_in(start=-9.11163e-07, fixed=true), volume(start=3.3848426e-06,
                        fixed=true)),
                  ulnar_T2_R36(q_in(start=4.7601432e-07, fixed=true), volume(start=2.0602695e-07,
                        fixed=true)),
                  ulnar_T2_R42(volume(start=5.798794e-05, fixed=true)),
                  radial_T1_R44(volume(start=4.7546804e-05, fixed=true)),
                  subclavian_L66(q_in(start=-4.2460524e-06, fixed=true), volume(start=3.2266328e-06,
                        fixed=true)),
                  subclavian_L78(q_in(start=-2.7845997e-06, fixed=true), volume(start=1.3777111e-06,
                        fixed=true)),
                  axillary_L80(q_in(start=-2.034735e-06, fixed=true), volume(start=2.2280599e-06,
                        fixed=true)),
                  brachial_L82(q_in(start=3.214934e-07, fixed=true), volume(start=1.1215301e-06,
                        fixed=true)),
                  ulnar_T2_L84(q_in(start=4.5969537e-07, fixed=true), volume(start=2.0555574e-07,
                        fixed=true)),
                  ulnar_T2_L90(volume(start=5.7955684e-05, fixed=true)),
                  radial_T1_L92(volume(start=5.0381783e-05, fixed=true)),
                  common_carotid_R6_A(q_in(start=-6.9858456e-06, fixed=true), volume(start=2.7002557e-06,
                        fixed=true)),
                  common_carotid_R6_B(q_in(start=-4.035563e-06, fixed=true), volume(start=2.3226835e-06,
                        fixed=true)),
                  common_carotid_R6_C(q_in(start=-1.4813181e-06, fixed=true), volume(start=1.7661653e-06,
                        fixed=true)),
                  internal_carotid_R8_A(q_in(start=-4.4742926e-08, fixed=true), volume(
                        start=1.022336e-06, fixed=true)),
                  internal_carotid_R8_B(q_in(start=2.7696117e-07, fixed=true), volume(start=
                         6.5913014e-07, fixed=true)),
                  internal_carotid_R8_C(volume(start=6.88845e-05, fixed=true)),
                  external_carotid_T2_R26(volume(start=6.913013e-05, fixed=true)),
                  common_carotid_L48_A(q_in(start=-1.056406e-05, fixed=true), volume(start=2.9348769e-06,
                        fixed=true)),
                  common_carotid_L48_B(q_in(start=-7.4699756e-06, fixed=true), volume(start=
                         2.5869044e-06, fixed=true)),
                  common_carotid_L48_C(q_in(start=-4.5724987e-06, fixed=true), volume(start=
                         2.3067207e-06, fixed=true)),
                  common_carotid_L48_D(q_in(start=-1.8827092e-06, fixed=true), volume(start=
                         1.8899709e-06, fixed=true)),
                  internal_carotid_L50_A(q_in(start=-1.1484559e-07, fixed=true), volume(
                        start=1.021155e-06, fixed=true)),
                  internal_carotid_L50_B(q_in(start=2.4089434e-07, fixed=true), volume(
                        start=6.5843636e-07, fixed=true)),
                  internal_carotid_L50_C(volume(start=6.888818e-05, fixed=true)),
                  external_carotid_T2_L62(volume(start=6.912891e-05, fixed=true)),
                  vertebral_L2(volume(start=6.355881e-05, fixed=true)),
                  vertebral_R272(volume(start=6.356479e-05, fixed=true)),
                  superior_vena_cava_C2(volume(start=2.2396982e-06, fixed=true)),
                  superior_vena_cava_C88(volume(start=3.859797e-06, fixed=true)),
                  inferior_vena_cava_C8(volume(start=3.3594706e-06, fixed=true)),
                  hepatic_vein_T1_C10(volume(start=1.3172539e-06, fixed=true)),
                  inferior_vena_cava_C12(volume(start=9.118591e-06, fixed=true)),
                  inferior_vena_cava_C16(volume(start=7.173229e-06, fixed=true)),
                  renal_vein_T1_R18(volume(start=2.1141304e-06, fixed=true)),
                  inferior_vena_cava_C20(volume(start=5.004636e-07, fixed=true)),
                  renal_vein_T1_L22(volume(start=1.868286e-06, fixed=true)),
                  inferior_vena_cava_C24(volume(start=1.9973306e-05, fixed=true)),
                  common_iliac_vein_L56(volume(start=4.9053456e-06, fixed=true)),
                  common_iliac_vein_R26(volume(start=4.5084844e-06, fixed=true)),
                  external_iliac_vein_R28(volume(start=6.576181e-07, fixed=true)),
                  internal_iliac_vein_T1_R30(volume(start=2.8146553e-06, fixed=true)),
                  external_iliac_vein_R32(volume(start=7.635341e-06, fixed=true)),
                  femoral_vein_R34(volume(start=3.3193868e-07, fixed=true)),
                  femoral_vein_R38(volume(start=2.6327255e-06, fixed=true)),
                  profunda_femoris_vein_T2_R40(volume(start=7.336657e-06, fixed=true)),
                  femoral_vein_R42(volume(start=1.8644381e-05, fixed=true)),
                  femoral_vein_R46(volume(start=1.0268543e-06, fixed=true)),
                  popliteal_vein_R48(volume(start=4.1860517e-06, fixed=true)),
                  anterior_tibial_vein_T4_R50(volume(start=1.3580134e-06, fixed=true)),
                  popliteal_vein_R52(volume(start=9.3135395e-07, fixed=true)),
                  posterior_tibial_vein_T6_R54(volume(start=1.868323e-06, fixed=true)),
                  external_iliac_vein_L58(volume(start=6.5848263e-07, fixed=true)),
                  internal_iliac_vein_T1_L60(volume(start=2.8953355e-06, fixed=true)),
                  external_iliac_vein_L62(volume(start=7.4965637e-06, fixed=true)),
                  femoral_vein_L64(volume(start=3.8809054e-07, fixed=true)),
                  femoral_vein_L68(volume(start=2.6329512e-06, fixed=true)),
                  profunda_femoris_vein_T2_L70(volume(start=7.337258e-06, fixed=true)),
                  femoral_vein_L72(volume(start=1.8645995e-05, fixed=true)),
                  femoral_vein_L76(volume(start=1.0269368e-06, fixed=true)),
                  popliteal_vein_L78(volume(start=4.186415e-06, fixed=true)),
                  anterior_tibial_vein_T4_L80(volume(start=1.358075e-06, fixed=true)),
                  popliteal_vein_L82(volume(start=9.314405e-07, fixed=true)),
                  posterior_tibial_vein_T6_L84(volume(start=1.8684832e-06, fixed=true)),
                  brachiocephalic_vein_R90(volume(start=4.538889e-06, fixed=true)),
                  brachiocephalic_vein_L124(volume(start=8.508279e-06, fixed=true)),
                  vertebral_vein_R92(volume(start=2.878661e-06, fixed=true)),
                  brachiocephalic_vein_R94(volume(start=1.0289957e-06, fixed=true)),
                  subclavian_vein_R96(volume(start=5.003696e-07, fixed=true)),
                  internal_jugular_vein_R122(volume(start=1.978054e-05, fixed=true)),
                  external_jugular_vein_R98(volume(start=1.4055558e-06, fixed=true)),
                  subclavian_vein_R100(volume(start=2.0468115e-06, fixed=true)),
                  axillary_vein_R102(volume(start=7.1970157e-06, fixed=true)),
                  brachial_vein_R104(volume(start=1.4577556e-06, fixed=true)),
                  brachial_vein_R114(volume(start=1.3169629e-06, fixed=true)),
                  brachial_vein_R108(volume(start=2.0221236e-07, fixed=true)),
                  ulnar_vein_T7_R110(volume(start=1.775459e-06, fixed=true)),
                  brachial_vein_R118(volume(start=1.2766415e-07, fixed=true)),
                  radial_vein_T3_R120(volume(start=1.1758169e-06, fixed=true)),
                  vertebral_vein_L126(volume(start=2.6908401e-06, fixed=true)),
                  brachiocephalic_vein_L128(volume(start=5.201427e-07, fixed=true)),
                  subclavian_vein_L130(volume(start=4.4507945e-07, fixed=true)),
                  internal_jugular_vein_L156(volume(start=1.2012749e-05, fixed=true)),
                  external_jugular_vein_L132(volume(start=1.3781975e-06, fixed=true)),
                  subclavian_vein_L134(volume(start=1.9952918e-06, fixed=true)),
                  axillary_vein_L136(volume(start=7.2807566e-06, fixed=true)),
                  brachial_vein_L138(volume(start=1.4581785e-06, fixed=true)),
                  brachial_vein_L148(volume(start=1.3218397e-06, fixed=true)),
                  brachial_vein_L142(volume(start=2.0227127e-07, fixed=true)),
                  ulnar_vein_T7_L144(volume(start=1.775722e-06, fixed=true)),
                  brachial_vein_L152(volume(start=1.2817735e-07, fixed=true)),
                  radial_vein_T3_L154(volume(start=1.1912063e-06, fixed=true)),
                  mesenteric_artery(q_in(start=2.6824766e-06, fixed=true), volume(start=5.3205927e-06,
                        fixed=true)),
                  splanchnic_tissue(volume(start=0.00024831685, fixed=true)),
                  splanchnic_vein(volume(start=1.09846005e-05, fixed=true)),
                  coronary_arteries(q_in(start=5.893933e-07, fixed=true), volume(start=3.3130878e-08,
                        fixed=true)),
                  cardiac_tissue(volume(start=0.00011125262, fixed=true)),
                  coronary_veins(volume(start=2.997192e-08, fixed=true)),
                  brachial_L82_HeartLevel(q_in(start=-8.314693e-07, fixed=true), volume(
                        start=2.2445367e-06, fixed=true))),
                heartComponent(
                  tricuspidValve(open(start=true, fixed=true)),
                  pulmonaryValve(open(start=false, fixed=true)),
                  mitralValve(open(start=false, fixed=true)),
                  aorticValve(open(start=false, fixed=true)),
                  ventricles(
                    LV_wall(
                      ym(start=3.9143994, fixed=true),
                      SL(start=2.305412, fixed=true),
                      xm(start=-5.6037717, fixed=false)),
                    SEP_wall(SL(start=2.3106086, fixed=true), xm(start=2.4303186, fixed=false)),
                    RV_wall(SL(start=1.9181752, fixed=true), xm(start=5.110908, fixed=false)),
                    V_LV(start=0.00023758177, fixed=true),
                    V_RV(start=9.9409066e-05, fixed=true)),
                  ra(volume(start=1.0022613e-05, fixed=true)),
                  la(volume(start=6.365515e-05, fixed=true)),
                  sa_node(cardiac_cycle(start=0.8978792, fixed=true))),
                pulmonaryComponent(c_pa(volume(start=6.597261e-05, fixed=true)), c_pv(
                      volume(start=0.00038607666, fixed=true))));

            end imp_avRe_ss;

            model imp_avSt
              extends imp_base(heartComponent(aorticValve(_Ron(
                        displayUnit="(mmHg.min)/l") = 10879106.813064)));

            Physiolibrary.Types.Pressure p_in(start = 13e3);
            Physiolibrary.Types.Pressure p_out(start = 13e3);
            Physiolibrary.Types.Pressure dp_aortic = p_in - p_out;
            parameter Modelica.Units.SI.Time tau_avg=10;
            equation
                // integrate only during open valve
                if heartComponent.aorticValve.open then
                der(p_in)*tau_avg = heartComponent.aorticValve.q_in.pressure - p_in;
                der(p_out)*tau_avg = heartComponent.aorticValve.q_out.pressure - p_out;
                else
                  der(p_in) = 0;
                  der(p_out) = 0;
                end if;
            end imp_avSt;

            model imp_avSt_ss
              "Steady state initialization from 2020-12-29 22:03:07.886767 at time 299.82"
              extends imp_avSt(
                SystemicComponent(
                  baroreflex_system(
                    baroreflex(phi(start=0.26419958, fixed=true)),
                    baroreceptor_aortic(epsilon(start=1.5612273, fixed=true), s(start=0.80557275,
                          fixed=true)),
                    baroreceptor_carotid(epsilon(start=1.1832228, fixed=true), s(start=0.88544905,
                          fixed=true))),
                  ascending_aorta_A(
                    q(start=2.5058348e-06, fixed=true),
                    vol1(start=8.344596e-06, fixed=true),
                    vol2(start=8.344082e-06, fixed=true)),
                  ascending_aorta_B(q_in(start=5.030426e-06, fixed=true), volume(start=2.5393738e-05,
                        fixed=true)),
                  ascending_aorta_C(q_in(start=6.987516e-06, fixed=true), volume(start=2.3484545e-05,
                        fixed=true)),
                  ascending_aorta_D(q_in(start=1.13964425e-05, fixed=true), volume(start=2.1436614e-05,
                        fixed=true)),
                  aortic_arch_C2(q_in(start=1.5447753e-05, fixed=true), volume(start=1.9606518e-05,
                        fixed=true)),
                  brachiocephalic_trunk_C4(q_in(start=2.389152e-06, fixed=true), volume(
                        start=1.334522e-05, fixed=true)),
                  aortic_arch_C46(q_in(start=1.6801863e-05, fixed=true), volume(start=1.161528e-05,
                        fixed=true)),
                  aortic_arch_C64(q_in(start=1.7420149e-05, fixed=true), volume(start=7.972709e-06,
                        fixed=true)),
                  aortic_arch_C94(q_in(start=1.5842797e-05, fixed=true), volume(start=4.36876e-05,
                        fixed=true)),
                  thoracic_aorta_C96(q_in(start=2.499475e-05, fixed=true), volume(start=7.8452595e-06,
                        fixed=true)),
                  thoracic_aorta_C100(q_in(start=2.6667152e-05, fixed=true), volume(start=6.032697e-06,
                        fixed=true)),
                  thoracic_aorta_C104(q_in(start=2.7979333e-05, fixed=true), volume(start=1.1359616e-05,
                        fixed=true)),
                  thoracic_aorta_C108(q_in(start=3.055539e-05, fixed=true), volume(start=3.7310135e-06,
                        fixed=true)),
                  thoracic_aorta_C112(q_in(start=3.1413132e-05, fixed=true), volume(start=6.069352e-05,
                        fixed=true)),
                  abdominal_aorta_C114(q_in(start=5.1864696e-05, fixed=true), volume(start=1.2543936e-06,
                        fixed=true)),
                  abdominal_aorta_C136(q_in(start=4.1857333e-05, fixed=true), volume(start=5.260174e-06,
                        fixed=true)),
                  abdominal_aorta_C164(q_in(start=3.729783e-05, fixed=true), volume(start=1.5609712e-06,
                        fixed=true)),
                  abdominal_aorta_C176(q_in(start=2.845579e-05, fixed=true), volume(start=4.193831e-06,
                        fixed=true)),
                  abdominal_aorta_C188(q_in(start=2.0634187e-05, fixed=true), volume(start=1.6709444e-05,
                        fixed=true)),
                  abdominal_aorta_C192(q_in(start=2.6572869e-05, fixed=true), volume(start=1.0363566e-05,
                        fixed=true)),
                  celiac_trunk_C116(volume(start=0.00034605066, fixed=true)),
                  renal_L166(volume(start=0.00031258902, fixed=true)),
                  renal_R178(volume(start=0.0003097842, fixed=true)),
                  common_iliac_R216(q_in(start=1.502021e-05, fixed=true), volume(start=8.584074e-06,
                        fixed=true)),
                  internal_iliac_T1_R218(volume(start=0.0001701042, fixed=true)),
                  external_iliac_R220(q_in(start=1.265608e-05, fixed=true), volume(start=4.891175e-06,
                        fixed=true)),
                  femoral_R222(q_in(start=1.3102774e-05, fixed=true), volume(start=1.3986787e-06,
                        fixed=true)),
                  profundus_T2_R224(volume(start=0.0001950657, fixed=true)),
                  femoral_R226(q_in(start=7.5418125e-06, fixed=true), volume(start=1.1580388e-05,
                        fixed=true)),
                  popliteal_R228(q_in(start=3.2454736e-06, fixed=true), volume(start=3.554339e-06,
                        fixed=true)),
                  anterior_tibial_T3_R230(volume(start=2.5597426e-05, fixed=true)),
                  popliteal_R232(q_in(start=1.033068e-06, fixed=true), volume(start=1.8075882e-07,
                        fixed=true)),
                  tibiofibular_trunk_R234(q_in(start=9.905999e-07, fixed=true), volume(
                        start=7.348841e-07, fixed=true)),
                  posterior_tibial_T4_R236(volume(start=2.7922191e-05, fixed=true)),
                  common_iliac_L194(q_in(start=1.5141948e-05, fixed=true), volume(start=8.211538e-06,
                        fixed=true)),
                  internal_iliac_T1_L196(volume(start=0.00017010565, fixed=true)),
                  external_iliac_L198(q_in(start=1.2644105e-05, fixed=true), volume(start=4.8921697e-06,
                        fixed=true)),
                  femoral_L200(q_in(start=1.3085697e-05, fixed=true), volume(start=1.3989653e-06,
                        fixed=true)),
                  profundus_T2_L202(volume(start=0.00019506678, fixed=true)),
                  femoral_L204(q_in(start=7.5177954e-06, fixed=true), volume(start=1.1583147e-05,
                        fixed=true)),
                  popliteal_L206(q_in(start=3.2390747e-06, fixed=true), volume(start=3.555127e-06,
                        fixed=true)),
                  anterior_tibial_T3_L208(volume(start=2.559756e-05, fixed=true)),
                  popliteal_L210(q_in(start=1.0329201e-06, fixed=true), volume(start=1.8078092e-07,
                        fixed=true)),
                  tibiofibular_trunk_L212(q_in(start=9.906518e-07, fixed=true), volume(
                        start=7.349963e-07, fixed=true)),
                  posterior_tibial_T4_L214(volume(start=2.7922355e-05, fixed=true)),
                  subclavian_R28(q_in(start=3.5333308e-06, fixed=true), volume(start=2.0448463e-06,
                        fixed=true)),
                  subclavian_R30(q_in(start=1.8231343e-06, fixed=true), volume(start=2.681836e-06,
                        fixed=true)),
                  axillary_R32(q_in(start=2.2345373e-06, fixed=true), volume(start=3.0684769e-06,
                        fixed=true)),
                  brachial_R34(q_in(start=2.5945667e-06, fixed=true), volume(start=4.4528024e-06,
                        fixed=true)),
                  ulnar_T2_R36(q_in(start=1.7006256e-06, fixed=true), volume(start=2.3733502e-07,
                        fixed=true)),
                  ulnar_T2_R42(volume(start=5.8677684e-05, fixed=true)),
                  radial_T1_R44(volume(start=4.809243e-05, fixed=true)),
                  subclavian_L66(q_in(start=3.122423e-06, fixed=true), volume(start=4.851381e-06,
                        fixed=true)),
                  subclavian_L78(q_in(start=1.8392781e-06, fixed=true), volume(start=1.9846962e-06,
                        fixed=true)),
                  axillary_L80(q_in(start=2.1162452e-06, fixed=true), volume(start=3.0569622e-06,
                        fixed=true)),
                  brachial_L82(q_in(start=2.9281853e-06, fixed=true), volume(start=1.4809441e-06,
                        fixed=true)),
                  ulnar_T2_L84(q_in(start=1.6893332e-06, fixed=true), volume(start=2.3721871e-07,
                        fixed=true)),
                  ulnar_T2_L90(volume(start=5.8654055e-05, fixed=true)),
                  radial_T1_L92(volume(start=5.0967024e-05, fixed=true)),
                  common_carotid_R6_A(q_in(start=1.3062946e-06, fixed=true), volume(start=5.0526714e-06,
                        fixed=true)),
                  common_carotid_R6_B(q_in(start=2.4999433e-06, fixed=true), volume(start=4.317062e-06,
                        fixed=true)),
                  common_carotid_R6_C(q_in(start=3.5371388e-06, fixed=true), volume(start=3.2277392e-06,
                        fixed=true)),
                  internal_carotid_R8_A(q_in(start=2.0517562e-06, fixed=true), volume(start=
                         1.2661793e-06, fixed=true)),
                  internal_carotid_R8_B(q_in(start=2.1789479e-06, fixed=true), volume(start=
                         8.016099e-07, fixed=true)),
                  internal_carotid_R8_C(volume(start=6.963685e-05, fixed=true)),
                  external_carotid_T2_R26(volume(start=6.9874775e-05, fixed=true)),
                  common_carotid_L48_A(q_in(start=1.6119718e-06, fixed=true), volume(start=5.452077e-06,
                        fixed=true)),
                  common_carotid_L48_B(q_in(start=2.648711e-06, fixed=true), volume(start=4.792322e-06,
                        fixed=true)),
                  common_carotid_L48_C(q_in(start=3.412999e-06, fixed=true), volume(start=4.255995e-06,
                        fixed=true)),
                  common_carotid_L48_D(q_in(start=3.989223e-06, fixed=true), volume(start=3.4457782e-06,
                        fixed=true)),
                  internal_carotid_L50_A(q_in(start=2.151118e-06, fixed=true), volume(start=
                         1.2641354e-06, fixed=true)),
                  internal_carotid_L50_B(q_in(start=2.2081886e-06, fixed=true), volume(
                        start=8.0029497e-07, fixed=true)),
                  internal_carotid_L50_C(volume(start=6.964012e-05, fixed=true)),
                  external_carotid_T2_L62(volume(start=6.9873226e-05, fixed=true)),
                  vertebral_L2(volume(start=6.424655e-05, fixed=true)),
                  vertebral_R272(volume(start=6.4250744e-05, fixed=true)),
                  superior_vena_cava_C2(volume(start=2.0190057e-06, fixed=true)),
                  superior_vena_cava_C88(volume(start=3.4795523e-06, fixed=true)),
                  inferior_vena_cava_C8(volume(start=3.0285164e-06, fixed=true)),
                  hepatic_vein_T1_C10(volume(start=1.1874977e-06, fixed=true)),
                  inferior_vena_cava_C12(volume(start=8.221148e-06, fixed=true)),
                  inferior_vena_cava_C16(volume(start=6.467838e-06, fixed=true)),
                  renal_vein_T1_R18(volume(start=1.9063035e-06, fixed=true)),
                  inferior_vena_cava_C20(volume(start=4.5125225e-07, fixed=true)),
                  renal_vein_T1_L22(volume(start=1.6846657e-06, fixed=true)),
                  inferior_vena_cava_C24(volume(start=1.8012972e-05, fixed=true)),
                  common_iliac_vein_L56(volume(start=4.4250137e-06, fixed=true)),
                  common_iliac_vein_R26(volume(start=4.066925e-06, fixed=true)),
                  external_iliac_vein_R28(volume(start=5.932303e-07, fixed=true)),
                  internal_iliac_vein_T1_R30(volume(start=2.5393401e-06, fixed=true)),
                  external_iliac_vein_R32(volume(start=6.8898735e-06, fixed=true)),
                  femoral_vein_R34(volume(start=2.9953674e-07, fixed=true)),
                  femoral_vein_R38(volume(start=2.3761404e-06, fixed=true)),
                  profunda_femoris_vein_T2_R40(volume(start=6.631626e-06, fixed=true)),
                  femoral_vein_R42(volume(start=1.6839162e-05, fixed=true)),
                  femoral_vein_R46(volume(start=9.274451e-07, fixed=true)),
                  popliteal_vein_R48(volume(start=3.7832826e-06, fixed=true)),
                  anterior_tibial_vein_T4_R50(volume(start=1.3909333e-06, fixed=true)),
                  popliteal_vein_R52(volume(start=8.4179516e-07, fixed=true)),
                  posterior_tibial_vein_T6_R54(volume(start=1.7155799e-06, fixed=true)),
                  external_iliac_vein_L58(volume(start=5.9402305e-07, fixed=true)),
                  internal_iliac_vein_T1_L60(volume(start=2.6121952e-06, fixed=true)),
                  external_iliac_vein_L62(volume(start=6.7647516e-06, fixed=true)),
                  femoral_vein_L64(volume(start=3.5021418e-07, fixed=true)),
                  femoral_vein_L68(volume(start=2.3763903e-06, fixed=true)),
                  profunda_femoris_vein_T2_L70(volume(start=6.6323046e-06, fixed=true)),
                  femoral_vein_L72(volume(start=1.6840946e-05, fixed=true)),
                  femoral_vein_L76(volume(start=9.2753766e-07, fixed=true)),
                  popliteal_vein_L78(volume(start=3.7836849e-06, fixed=true)),
                  anterior_tibial_vein_T4_L80(volume(start=1.3910188e-06, fixed=true)),
                  popliteal_vein_L82(volume(start=8.418899e-07, fixed=true)),
                  posterior_tibial_vein_T6_L84(volume(start=1.7157756e-06, fixed=true)),
                  brachiocephalic_vein_R90(volume(start=4.091942e-06, fixed=true)),
                  brachiocephalic_vein_L124(volume(start=7.67105e-06, fixed=true)),
                  vertebral_vein_R92(volume(start=2.6009247e-06, fixed=true)),
                  brachiocephalic_vein_R94(volume(start=9.2767846e-07, fixed=true)),
                  subclavian_vein_R96(volume(start=4.5111125e-07, fixed=true)),
                  internal_jugular_vein_R122(volume(start=1.7834926e-05, fixed=true)),
                  external_jugular_vein_R98(volume(start=1.2707261e-06, fixed=true)),
                  subclavian_vein_R100(volume(start=1.8454383e-06, fixed=true)),
                  axillary_vein_R102(volume(start=6.4903325e-06, fixed=true)),
                  brachial_vein_R104(volume(start=1.3339586e-06, fixed=true)),
                  brachial_vein_R114(volume(start=1.2079088e-06, fixed=true)),
                  brachial_vein_R108(volume(start=1.8542592e-07, fixed=true)),
                  ulnar_vein_T7_R110(volume(start=1.6921599e-06, fixed=true)),
                  brachial_vein_R118(volume(start=1.1729282e-07, fixed=true)),
                  radial_vein_T3_R120(volume(start=1.205644e-06, fixed=true)),
                  vertebral_vein_L126(volume(start=2.4309086e-06, fixed=true)),
                  brachiocephalic_vein_L128(volume(start=4.6896253e-07, fixed=true)),
                  subclavian_vein_L130(volume(start=4.0129257e-07, fixed=true)),
                  internal_jugular_vein_L156(volume(start=1.0832639e-05, fixed=true)),
                  external_jugular_vein_L132(volume(start=1.2459938e-06, fixed=true)),
                  subclavian_vein_L134(volume(start=1.7991135e-06, fixed=true)),
                  axillary_vein_L136(volume(start=6.566354e-06, fixed=true)),
                  brachial_vein_L138(volume(start=1.334548e-06, fixed=true)),
                  brachial_vein_L148(volume(start=1.2137037e-06, fixed=true)),
                  brachial_vein_L142(volume(start=1.8551005e-07, fixed=true)),
                  ulnar_vein_T7_L144(volume(start=1.6929237e-06, fixed=true)),
                  brachial_vein_L152(volume(start=1.1790848e-07, fixed=true)),
                  radial_vein_T3_L154(volume(start=1.236435e-06, fixed=true)),
                  mesenteric_artery(q_in(start=6.350247e-06, fixed=true), volume(start=6.3512184e-06,
                        fixed=true)),
                  splanchnic_tissue(volume(start=0.00025098588, fixed=true)),
                  splanchnic_vein(volume(start=9.904153e-06, fixed=true)),
                  coronary_arteries(q_in(start=2.792708e-06, fixed=true), volume(start=3.6836703e-08,
                        fixed=true)),
                  cardiac_tissue(volume(start=0.00011293962, fixed=true)),
                  coronary_veins(volume(start=3.391292e-08, fixed=true)),
                  brachial_L82_HeartLevel(q_in(start=2.5026036e-06, fixed=true), volume(
                        start=2.9829905e-06, fixed=true))),
                heartComponent(
                  tricuspidValve(open(start=true, fixed=true)),
                  pulmonaryValve(open(start=false, fixed=true)),
                  mitralValve(open(start=true, fixed=true)),
                  aorticValve(open(start=false, fixed=true)),
                  ventricles(
                    LV_wall(
                      ym(start=3.4132285, fixed=true),
                      SL(start=1.9376333, fixed=true),
                      xm(start=-4.6858945, fixed=false)),
                    SEP_wall(SL(start=1.9653507, fixed=true), xm(start=1.9751972, fixed=false)),
                    RV_wall(SL(start=1.8940938, fixed=true), xm(start=5.3701267, fixed=false)),
                    V_LV(start=0.00012436486, fixed=true),
                    V_RV(start=0.0001116841, fixed=true)),
                  ra(volume(start=1.0647456e-05, fixed=true)),
                  la(volume(start=4.688662e-05, fixed=true)),
                  sa_node(cardiac_cycle(start=0.93316317, fixed=true))),
                pulmonaryComponent(c_pa(volume(start=6.0211845e-05, fixed=true)), c_pv(
                      volume(start=0.00034601512, fixed=true))));

            end imp_avSt_ss;

            model imp_hemr "A simple bleeding experiment"
              extends imp_base;
              Physiolibrary.Hydraulic.Components.Pump pump(useSolutionFlowInput=true,
                  SolutionFlow(displayUnit="m3/s") = 1.6666666666667e-05)
                annotation (Placement(transformation(extent={{48,-98},{68,-78}})));
              Physiolibrary.Hydraulic.Components.ElasticVessel volume_bleeded
                "A cut vein reservoir"
                annotation (Placement(transformation(extent={{80,-98},{100,-78}})));
              replaceable Modelica.Blocks.Sources.Ramp bleeding_ramp(
              height=-50e-6,
              offset=50e-6,
              startTime=10,
              duration=0) constrainedby Modelica.Blocks.Sources.Ramp
              annotation (Placement(transformation(extent={{32,-68},{48,-52}})));
            equation
              connect(volume_bleeded.q_in, pump.q_out) annotation (Line(
                  points={{90,-88},{68,-88}},
                  color={0,0,0},
                  thickness=1));
              connect(pump.q_in, heartComponent.sv) annotation (Line(
                  points={{48,-88},{24,-88},{24,-16.4},{-16,-16.4}},
                  color={0,0,0},
                  thickness=1));
            connect(bleeding_ramp.y, pump.solutionFlow) annotation (Line(points={{48.8,
                    -60},{58,-60},{58,-81}}, color={0,0,127}));
            end imp_hemr;
          end TiltAuto;

          package TiltNoBaro
            model imp_base
                extends CVS_TiltNoBaro;
            end imp_base;

            model imp_noVc
                extends imp_base(settings(veins_UsePhiEffect=false));
            end imp_noVc;

            model imp_noVcLin
                extends imp_base(settings(veins_UseNonLinearVeins=false,
                                          veins_UsePhiEffect=false));
            end imp_noVcLin;

            model imp_noVcTc
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTc;

            model imp_noVcTcLin
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTcLin;

            model imp_noBaro
                extends imp_base(useAutonomousPhi(y=false), phi_fixed(offset=
                    0.25));
            end imp_noBaro;

            model imp_noBaroLinV
              extends imp_noBaro(
                  settings(veins_UseNonLinearVeins=false));
            end imp_noBaroLinV;

            model imp_noBaro_linVT
              extends imp_noBaroLinV(settings(UseNonLinear_TissuesCompliance=false));
            end imp_noBaro_linVT;

            model imp_noValves
              extends imp_base(SystemicComponent(
                    brachiocephalic_vein_R90(LimitBackflow=false),
                    brachiocephalic_vein_L124(LimitBackflow=false),
                    common_iliac_vein_R26(LimitBackflow=false),
                    common_iliac_vein_L56(LimitBackflow=false)));
            end imp_noValves;

            model imp_arSt
              extends imp_base(settings(syst_art_k_E=0.8));
            end imp_arSt;

            model imp_avRe
              extends imp_base(heartComponent(aorticValve(_Goff=3E-08)));
            end imp_avRe;

            model imp_avSt
              extends imp_base(heartComponent(aorticValve(_Ron(
                        displayUnit="(mmHg.min)/l") = 10879106.813064)), settings(
                    baro_tau_s=10));

            Physiolibrary.Types.Pressure p_in(start = 13e3);
            Physiolibrary.Types.Pressure p_out(start = 13e3);
            Physiolibrary.Types.Pressure dp_aortic = p_in - p_out;
            parameter Modelica.Units.SI.Time tau_avg=10;
            equation
                // integrate only during open valve
                if heartComponent.aorticValve.open then
                der(p_in)*tau_avg = heartComponent.aorticValve.q_in.pressure - p_in;
                der(p_out)*tau_avg = heartComponent.aorticValve.q_out.pressure - p_out;
                else
                  der(p_in) = 0;
                  der(p_out) = 0;
                end if;
            end imp_avSt;

            model imp_hemr "A simple bleeding experiment"
              extends imp_base;
              Physiolibrary.Hydraulic.Components.Pump pump(useSolutionFlowInput=true,
                  SolutionFlow(displayUnit="m3/s") = 1.6666666666667e-05)
                annotation (Placement(transformation(extent={{48,-98},{68,-78}})));
              Physiolibrary.Hydraulic.Components.ElasticVessel volume_bleeded
                "A cut vein reservoir"
                annotation (Placement(transformation(extent={{80,-98},{100,-78}})));
              replaceable Modelica.Blocks.Sources.Ramp bleeding_ramp(
              height=-50e-6,
              offset=50e-6,
              startTime=10,
              duration=0) constrainedby Modelica.Blocks.Sources.Ramp
              annotation (Placement(transformation(extent={{32,-68},{48,-52}})));
            equation
              connect(volume_bleeded.q_in, pump.q_out) annotation (Line(
                  points={{90,-88},{68,-88}},
                  color={0,0,0},
                  thickness=1));
              connect(pump.q_in, heartComponent.sv) annotation (Line(
                  points={{48,-88},{24,-88},{24,-16.4},{-16,-16.4}},
                  color={0,0,0},
                  thickness=1));
            connect(bleeding_ramp.y, pump.solutionFlow) annotation (Line(points={{48.8,
                    -60},{58,-60},{58,-81}}, color={0,0,127}));
            end imp_hemr;
          end TiltNoBaro;

          package VMAuto
            model imp_base
                extends CVS_VMAuto;
            end imp_base;

            model imp_noVc
                extends imp_base(settings(veins_UsePhiEffect=false));
            end imp_noVc;

            model imp_noVcLin
                extends imp_base(settings(veins_UseNonLinearVeins=false,
                                          veins_UsePhiEffect=false));
            end imp_noVcLin;

            model imp_noVcTc
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTc;

            model imp_noVcTcLin
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTcLin;

            model imp_noBaro
                extends imp_base(useAutonomousPhi(y=false));
            end imp_noBaro;

            model imp_noBaroLinV
              extends imp_noBaro(
                  settings(veins_UseNonLinearVeins=false));
            end imp_noBaroLinV;

            model imp_noBaro_linVT
              extends imp_noBaroLinV(settings(UseNonLinear_TissuesCompliance=false));
            end imp_noBaro_linVT;

            model imp_noValves
              extends imp_base(SystemicComponent(
                    brachiocephalic_vein_R90(LimitBackflow=false),
                    brachiocephalic_vein_L124(LimitBackflow=false),
                    common_iliac_vein_R26(LimitBackflow=false),
                    common_iliac_vein_L56(LimitBackflow=false)));
            end imp_noValves;

            model imp_arSt
              extends imp_base(settings(syst_art_k_E=0.8));
            end imp_arSt;

            model imp_arSt_ss
              "Steady state initialization from 2020-12-29 21:05:26.481251 at time 299.86"
              extends imp_arSt(
                SystemicComponent(
                  baroreflex_system(
                    baroreflex(phi(start=0.24229456, fixed=true)),
                    baroreceptor_aortic(epsilon(start=1.3092335, fixed=true), s(start=0.7701473,
                          fixed=true)),
                    baroreceptor_carotid(epsilon(start=1.0949951, fixed=true), s(start=0.8840892,
                          fixed=true))),
                  ascending_aorta_A(
                    q(start=2.5515742e-06, fixed=true),
                    vol1(start=3.403867e-06, fixed=true),
                    vol2(start=3.403783e-06, fixed=true)),
                  ascending_aorta_B(q_in(start=5.112949e-06, fixed=true), volume(start=1.6754268e-05,
                        fixed=true)),
                  ascending_aorta_C(q_in(start=7.662759e-06, fixed=true), volume(start=1.5518155e-05,
                        fixed=true)),
                  ascending_aorta_D(q_in(start=1.1987098e-05, fixed=true), volume(start=1.4190164e-05,
                        fixed=true)),
                  aortic_arch_C2(q_in(start=1.5902064e-05, fixed=true), volume(start=1.3001863e-05,
                        fixed=true)),
                  brachiocephalic_trunk_C4(q_in(start=1.2677907e-06, fixed=true), volume(
                        start=9.140656e-06, fixed=true)),
                  aortic_arch_C46(q_in(start=1.8179178e-05, fixed=true), volume(start=7.716952e-06,
                        fixed=true)),
                  aortic_arch_C64(q_in(start=2.0871652e-05, fixed=true), volume(start=5.3034414e-06,
                        fixed=true)),
                  aortic_arch_C94(q_in(start=1.9551486e-05, fixed=true), volume(start=2.9175528e-05,
                        fixed=true)),
                  thoracic_aorta_C96(q_in(start=2.6880227e-05, fixed=true), volume(start=5.2647374e-06,
                        fixed=true)),
                  thoracic_aorta_C100(q_in(start=2.816266e-05, fixed=true), volume(start=4.0528794e-06,
                        fixed=true)),
                  thoracic_aorta_C104(q_in(start=2.9133214e-05, fixed=true), volume(start=7.645832e-06,
                        fixed=true)),
                  thoracic_aorta_C108(q_in(start=3.0901436e-05, fixed=true), volume(start=2.5140964e-06,
                        fixed=true)),
                  thoracic_aorta_C112(q_in(start=3.147465e-05, fixed=true), volume(start=4.163393e-05,
                        fixed=true)),
                  abdominal_aorta_C114(q_in(start=3.73411e-05, fixed=true), volume(start=8.6590995e-07,
                        fixed=true)),
                  abdominal_aorta_C136(q_in(start=2.9044633e-05, fixed=true), volume(start=3.6362642e-06,
                        fixed=true)),
                  abdominal_aorta_C164(q_in(start=2.3903056e-05, fixed=true), volume(start=1.0804175e-06,
                        fixed=true)),
                  abdominal_aorta_C176(q_in(start=1.6465858e-05, fixed=true), volume(start=2.906814e-06,
                        fixed=true)),
                  abdominal_aorta_C188(q_in(start=9.335313e-06, fixed=true), volume(start=1.1651799e-05,
                        fixed=true)),
                  abdominal_aorta_C192(q_in(start=1.0589696e-05, fixed=true), volume(start=7.2855782e-06,
                        fixed=true)),
                  celiac_trunk_C116(volume(start=0.0003551999, fixed=true)),
                  renal_L166(volume(start=0.00032085134, fixed=true)),
                  renal_R178(volume(start=0.00031797556, fixed=true)),
                  common_iliac_R216(q_in(start=5.622475e-06, fixed=true), volume(start=6.2219397e-06,
                        fixed=true)),
                  internal_iliac_T1_R218(volume(start=0.0001746407, fixed=true)),
                  external_iliac_R220(q_in(start=2.2483043e-06, fixed=true), volume(start=4.083962e-06,
                        fixed=true)),
                  femoral_R222(q_in(start=2.5723098e-06, fixed=true), volume(start=1.1703349e-06,
                        fixed=true)),
                  profundus_T2_R224(volume(start=0.0002003131, fixed=true)),
                  femoral_R226(q_in(start=-1.7140757e-06, fixed=true), volume(start=9.683984e-06,
                        fixed=true)),
                  popliteal_R228(q_in(start=2.9811156e-07, fixed=true), volume(start=3.0031426e-06,
                        fixed=true)),
                  anterior_tibial_T3_R230(volume(start=2.6213478e-05, fixed=true)),
                  popliteal_R232(q_in(start=4.662309e-07, fixed=true), volume(start=1.6512647e-07,
                        fixed=true)),
                  tibiofibular_trunk_R234(q_in(start=4.848016e-07, fixed=true), volume(
                        start=6.7155645e-07, fixed=true)),
                  posterior_tibial_T4_R236(volume(start=2.8676926e-05, fixed=true)),
                  common_iliac_L194(q_in(start=5.7011166e-06, fixed=true), volume(start=5.9542117e-06,
                        fixed=true)),
                  internal_iliac_T1_L196(volume(start=0.00017464205, fixed=true)),
                  external_iliac_L198(q_in(start=2.2989632e-06, fixed=true), volume(start=4.0842533e-06,
                        fixed=true)),
                  femoral_L200(q_in(start=2.6207276e-06, fixed=true), volume(start=1.1704201e-06,
                        fixed=true)),
                  profundus_T2_L202(volume(start=0.00020031397, fixed=true)),
                  femoral_L204(q_in(start=-1.6701713e-06, fixed=true), volume(start=9.684931e-06,
                        fixed=true)),
                  popliteal_L206(q_in(start=3.1131438e-07, fixed=true), volume(start=3.00339e-06,
                        fixed=true)),
                  anterior_tibial_T3_L208(volume(start=2.6213504e-05, fixed=true)),
                  popliteal_L210(q_in(start=4.6855897e-07, fixed=true), volume(start=1.6513317e-07,
                        fixed=true)),
                  tibiofibular_trunk_L212(q_in(start=4.8684336e-07, fixed=true), volume(
                        start=6.716039e-07, fixed=true)),
                  posterior_tibial_T4_L214(volume(start=2.8676977e-05, fixed=true)),
                  subclavian_R28(q_in(start=3.0323986e-06, fixed=true), volume(start=1.4426801e-06,
                        fixed=true)),
                  subclavian_R30(q_in(start=1.7622905e-06, fixed=true), volume(start=1.952449e-06,
                        fixed=true)),
                  axillary_R32(q_in(start=2.1503586e-06, fixed=true), volume(start=2.3369512e-06,
                        fixed=true)),
                  brachial_R34(q_in(start=2.4401477e-06, fixed=true), volume(start=3.4667978e-06,
                        fixed=true)),
                  ulnar_T2_R36(q_in(start=1.3941229e-06, fixed=true), volume(start=2.0834604e-07,
                        fixed=true)),
                  ulnar_T2_R42(volume(start=6.0209728e-05, fixed=true)),
                  radial_T1_R44(volume(start=4.9256567e-05, fixed=true)),
                  subclavian_L66(q_in(start=2.7339422e-06, fixed=true), volume(start=3.473886e-06,
                        fixed=true)),
                  subclavian_L78(q_in(start=1.8564388e-06, fixed=true), volume(start=1.4690359e-06,
                        fixed=true)),
                  axillary_L80(q_in(start=2.1160115e-06, fixed=true), volume(start=2.3365046e-06,
                        fixed=true)),
                  brachial_L82(q_in(start=2.519172e-06, fixed=true), volume(start=1.15349e-06,
                        fixed=true)),
                  ulnar_T2_L84(q_in(start=1.3866913e-06, fixed=true), volume(start=2.0829354e-07,
                        fixed=true)),
                  ulnar_T2_L90(volume(start=6.018713e-05, fixed=true)),
                  radial_T1_L92(volume(start=5.219178e-05, fixed=true)),
                  common_carotid_R6_A(q_in(start=5.414467e-07, fixed=true), volume(start=3.0722165e-06,
                        fixed=true)),
                  common_carotid_R6_B(q_in(start=1.6466822e-06, fixed=true), volume(start=2.6402852e-06,
                        fixed=true)),
                  common_carotid_R6_C(q_in(start=2.5935403e-06, fixed=true), volume(start=1.9995377e-06,
                        fixed=true)),
                  internal_carotid_R8_A(q_in(start=1.5525253e-06, fixed=true), volume(start=
                         1.0611803e-06, fixed=true)),
                  internal_carotid_R8_B(q_in(start=1.669214e-06, fixed=true), volume(start=6.816792e-07,
                        fixed=true)),
                  internal_carotid_R8_C(volume(start=7.149893e-05, fixed=true)),
                  external_carotid_T2_R26(volume(start=7.170783e-05, fixed=true)),
                  common_carotid_L48_A(q_in(start=-6.141678e-07, fixed=true), volume(start=3.3297435e-06,
                        fixed=true)),
                  common_carotid_L48_B(q_in(start=5.534364e-07, fixed=true), volume(start=2.9412283e-06,
                        fixed=true)),
                  common_carotid_L48_C(q_in(start=1.5976489e-06, fixed=true), volume(start=2.6248806e-06,
                        fixed=true)),
                  common_carotid_L48_D(q_in(start=2.5339357e-06, fixed=true), volume(start=2.145889e-06,
                        fixed=true)),
                  internal_carotid_L50_A(q_in(start=1.5492935e-06, fixed=true), volume(
                        start=1.0611327e-06, fixed=true)),
                  internal_carotid_L50_B(q_in(start=1.6673133e-06, fixed=true), volume(
                        start=6.8165207e-07, fixed=true)),
                  internal_carotid_L50_C(volume(start=7.1501076e-05, fixed=true)),
                  external_carotid_T2_L62(volume(start=7.170576e-05, fixed=true)),
                  vertebral_L2(volume(start=6.593643e-05, fixed=true)),
                  vertebral_R272(volume(start=6.594132e-05, fixed=true)),
                  superior_vena_cava_C2(volume(start=2.349646e-06, fixed=true)),
                  superior_vena_cava_C88(volume(start=4.0495393e-06, fixed=true)),
                  inferior_vena_cava_C8(volume(start=3.5247192e-06, fixed=true)),
                  hepatic_vein_T1_C10(volume(start=1.3821171e-06, fixed=true)),
                  inferior_vena_cava_C12(volume(start=9.570287e-06, fixed=true)),
                  inferior_vena_cava_C16(volume(start=7.5307207e-06, fixed=true)),
                  renal_vein_T1_R18(volume(start=2.2198908e-06, fixed=true)),
                  inferior_vena_cava_C20(volume(start=5.2541407e-07, fixed=true)),
                  renal_vein_T1_L22(volume(start=1.9619556e-06, fixed=true)),
                  inferior_vena_cava_C24(volume(start=2.0981015e-05, fixed=true)),
                  common_iliac_vein_L56(volume(start=5.1566294e-06, fixed=true)),
                  common_iliac_vein_R26(volume(start=4.739145e-06, fixed=true)),
                  external_iliac_vein_R28(volume(start=6.9132915e-07, fixed=true)),
                  internal_iliac_vein_T1_R30(volume(start=2.960323e-06, fixed=true)),
                  external_iliac_vein_R32(volume(start=8.033378e-06, fixed=true)),
                  femoral_vein_R34(volume(start=3.492642e-07, fixed=true)),
                  femoral_vein_R38(volume(start=2.7714716e-06, fixed=true)),
                  profunda_femoris_vein_T2_R40(volume(start=7.766037e-06, fixed=true)),
                  femoral_vein_R42(volume(start=1.9658151e-05, fixed=true)),
                  femoral_vein_R46(volume(start=1.0827324e-06, fixed=true)),
                  popliteal_vein_R48(volume(start=4.4213325e-06, fixed=true)),
                  anterior_tibial_vein_T4_R50(volume(start=1.6728767e-06, fixed=true)),
                  popliteal_vein_R52(volume(start=9.838703e-07, fixed=true)),
                  posterior_tibial_vein_T6_R54(volume(start=2.0523348e-06, fixed=true)),
                  external_iliac_vein_L58(volume(start=6.92281e-07, fixed=true)),
                  internal_iliac_vein_T1_L60(volume(start=3.0454132e-06, fixed=true)),
                  external_iliac_vein_L62(volume(start=7.887734e-06, fixed=true)),
                  femoral_vein_L64(volume(start=4.0837014e-07, fixed=true)),
                  femoral_vein_L68(volume(start=2.7718672e-06, fixed=true)),
                  profunda_femoris_vein_T2_L70(volume(start=7.7671275e-06, fixed=true)),
                  femoral_vein_L72(volume(start=1.9660982e-05, fixed=true)),
                  femoral_vein_L76(volume(start=1.0828815e-06, fixed=true)),
                  popliteal_vein_L78(volume(start=4.4219705e-06, fixed=true)),
                  anterior_tibial_vein_T4_L80(volume(start=1.6729833e-06, fixed=true)),
                  popliteal_vein_L82(volume(start=9.840184e-07, fixed=true)),
                  posterior_tibial_vein_T6_L84(volume(start=2.0526238e-06, fixed=true)),
                  brachiocephalic_vein_R90(volume(start=4.7626113e-06, fixed=true)),
                  brachiocephalic_vein_L124(volume(start=8.929497e-06, fixed=true)),
                  vertebral_vein_R92(volume(start=3.0442625e-06, fixed=true)),
                  brachiocephalic_vein_R94(volume(start=1.0797398e-06, fixed=true)),
                  subclavian_vein_R96(volume(start=5.250738e-07, fixed=true)),
                  internal_jugular_vein_R122(volume(start=2.0761512e-05, fixed=true)),
                  external_jugular_vein_R98(volume(start=1.491042e-06, fixed=true)),
                  subclavian_vein_R100(volume(start=2.1482047e-06, fixed=true)),
                  axillary_vein_R102(volume(start=7.5574403e-06, fixed=true)),
                  brachial_vein_R104(volume(start=1.5854067e-06, fixed=true)),
                  brachial_vein_R114(volume(start=1.4408736e-06, fixed=true)),
                  brachial_vein_R108(volume(start=2.2094642e-07, fixed=true)),
                  ulnar_vein_T7_R110(volume(start=2.0743273e-06, fixed=true)),
                  brachial_vein_R118(volume(start=1.4019727e-07, fixed=true)),
                  radial_vein_T3_R120(volume(start=1.4504806e-06, fixed=true)),
                  vertebral_vein_L126(volume(start=2.844439e-06, fixed=true)),
                  brachiocephalic_vein_L128(volume(start=5.4590174e-07, fixed=true)),
                  subclavian_vein_L130(volume(start=4.6714425e-07, fixed=true)),
                  internal_jugular_vein_L156(volume(start=1.2613514e-05, fixed=true)),
                  external_jugular_vein_L132(volume(start=1.4619573e-06, fixed=true)),
                  subclavian_vein_L134(volume(start=2.0945354e-06, fixed=true)),
                  axillary_vein_L136(volume(start=7.646973e-06, fixed=true)),
                  brachial_vein_L138(volume(start=1.5862393e-06, fixed=true)),
                  brachial_vein_L148(volume(start=1.4495672e-06, fixed=true)),
                  brachial_vein_L142(volume(start=2.21063e-07, fixed=true)),
                  ulnar_vein_T7_L144(volume(start=2.0750651e-06, fixed=true)),
                  brachial_vein_L152(volume(start=1.4111909e-07, fixed=true)),
                  radial_vein_T3_L154(volume(start=1.4744237e-06, fixed=true)),
                  mesenteric_artery(q_in(start=5.6178865e-06, fixed=true), volume(start=6.11247e-06,
                        fixed=true)),
                  splanchnic_tissue(volume(start=0.00025765123, fixed=true)),
                  splanchnic_vein(volume(start=1.1531514e-05, fixed=true)),
                  coronary_arteries(q_in(start=2.1540886e-06, fixed=true), volume(start=3.59634e-08,
                        fixed=true)),
                  cardiac_tissue(volume(start=0.000115643015, fixed=true)),
                  coronary_veins(volume(start=3.646531e-08, fixed=true)),
                  brachial_L82_HeartLevel(q_in(start=2.3882185e-06, fixed=true), volume(
                        start=2.3169812e-06, fixed=true))),
                heartComponent(
                  tricuspidValve(open(start=true, fixed=true)),
                  pulmonaryValve(open(start=false, fixed=true)),
                  mitralValve(open(start=true, fixed=true)),
                  aorticValve(open(start=false, fixed=true)),
                  ventricles(
                    LV_wall(
                      ym(start=3.4805632, fixed=true),
                      SL(start=1.9729362, fixed=true),
                      xm(start=-4.762715, fixed=false)),
                    SEP_wall(SL(start=1.9974529, fixed=true), xm(start=1.9856914, fixed=false)),
                    RV_wall(SL(start=1.9732813, fixed=true), xm(start=5.636706, fixed=false)),
                    V_LV(start=0.00013364125, fixed=true),
                    V_RV(start=0.00013165307, fixed=true)),
                  ra(volume(start=1.1497501e-05, fixed=true)),
                  la(volume(start=4.7752277e-05, fixed=true)),
                  sa_node(cardiac_cycle(start=0.018870693, fixed=true))),
                pulmonaryComponent(c_pa(volume(start=5.8772443e-05, fixed=true)), c_pv(
                      volume(start=0.0003409318, fixed=true))));

            end imp_arSt_ss;

            model imp_avRe
              extends imp_base(heartComponent(aorticValve(_Goff=3E-08)));
            end imp_avRe;

            model imp_avRe_ss
              "Steady state initialization from 2020-12-29 21:55:59.012166 at time 253.0"
              extends imp_avRe(
                SystemicComponent(
                  baroreflex_system(
                    baroreflex(phi(start=0.16757183, fixed=true)),
                    baroreceptor_aortic(epsilon(start=1.3320701, fixed=true), s(start=0.65012145,
                          fixed=true)),
                    baroreceptor_carotid(epsilon(start=1.103226, fixed=true), s(start=0.79037714,
                          fixed=true))),
                  ascending_aorta_A(
                    q(start=-7.3818075e-05, fixed=true),
                    vol1(start=2.4189142e-06, fixed=true),
                    vol2(start=2.414492e-06, fixed=true)),
                  ascending_aorta_B(q_in(start=-6.7408044e-05, fixed=true), volume(start=1.52061875e-05,
                        fixed=true)),
                  ascending_aorta_C(q_in(start=-5.5794437e-05, fixed=true), volume(start=1.40863895e-05,
                        fixed=true)),
                  ascending_aorta_D(q_in(start=-4.4647764e-05, fixed=true), volume(start=1.2886119e-05,
                        fixed=true)),
                  aortic_arch_C2(q_in(start=-3.4638433e-05, fixed=true), volume(start=1.1813967e-05,
                        fixed=true)),
                  brachiocephalic_trunk_C4(q_in(start=-1.6764128e-05, fixed=true), volume(
                        start=8.36213e-06, fixed=true)),
                  aortic_arch_C46(q_in(start=-8.9024925e-06, fixed=true), volume(start=7.0181272e-06,
                        fixed=true)),
                  aortic_arch_C64(q_in(start=6.869297e-06, fixed=true), volume(start=4.8270326e-06,
                        fixed=true)),
                  aortic_arch_C94(q_in(start=1.4624259e-05, fixed=true), volume(start=2.6675087e-05,
                        fixed=true)),
                  thoracic_aorta_C96(q_in(start=3.137344e-05, fixed=true), volume(start=4.8263205e-06,
                        fixed=true)),
                  thoracic_aorta_C100(q_in(start=3.422136e-05, fixed=true), volume(start=3.720615e-06,
                        fixed=true)),
                  thoracic_aorta_C104(q_in(start=3.632285e-05, fixed=true), volume(start=7.0389433e-06,
                        fixed=true)),
                  thoracic_aorta_C108(q_in(start=3.9938175e-05, fixed=true), volume(start=2.317241e-06,
                        fixed=true)),
                  thoracic_aorta_C112(q_in(start=4.1084335e-05, fixed=true), volume(start=3.9572555e-05,
                        fixed=true)),
                  abdominal_aorta_C114(q_in(start=3.9460607e-05, fixed=true), volume(start=8.244755e-07,
                        fixed=true)),
                  abdominal_aorta_C136(q_in(start=3.6274727e-05, fixed=true), volume(start=3.4738077e-06,
                        fixed=true)),
                  abdominal_aorta_C164(q_in(start=3.3265344e-05, fixed=true), volume(start=1.0333196e-06,
                        fixed=true)),
                  abdominal_aorta_C176(q_in(start=3.025105e-05, fixed=true), volume(start=2.7881347e-06,
                        fixed=true)),
                  abdominal_aorta_C188(q_in(start=2.694116e-05, fixed=true), volume(start=1.1331741e-05,
                        fixed=true)),
                  abdominal_aorta_C192(q_in(start=2.3654404e-05, fixed=true), volume(start=7.162293e-06,
                        fixed=true)),
                  celiac_trunk_C116(volume(start=0.00034239716, fixed=true)),
                  renal_L166(volume(start=0.00030928865, fixed=true)),
                  renal_R178(volume(start=0.00030651345, fixed=true)),
                  common_iliac_R216(q_in(start=1.0638374e-05, fixed=true), volume(start=6.2092395e-06,
                        fixed=true)),
                  internal_iliac_T1_R218(volume(start=0.00016828466, fixed=true)),
                  external_iliac_R220(q_in(start=5.9365752e-06, fixed=true), volume(start=4.120243e-06,
                        fixed=true)),
                  femoral_R222(q_in(start=4.912814e-06, fixed=true), volume(start=1.1835556e-06,
                        fixed=true)),
                  profundus_T2_R224(volume(start=0.00019295952, fixed=true)),
                  femoral_R226(q_in(start=2.201239e-06, fixed=true), volume(start=1.0079696e-05,
                        fixed=true)),
                  popliteal_R228(q_in(start=1.1151135e-06, fixed=true), volume(start=3.1283034e-06,
                        fixed=true)),
                  anterior_tibial_T3_R230(volume(start=2.5325407e-05, fixed=true)),
                  popliteal_R232(q_in(start=4.6872145e-07, fixed=true), volume(start=1.6867807e-07,
                        fixed=true)),
                  tibiofibular_trunk_R234(q_in(start=4.6101414e-07, fixed=true), volume(
                        start=6.859674e-07, fixed=true)),
                  posterior_tibial_T4_R236(volume(start=2.7621592e-05, fixed=true)),
                  common_iliac_L194(q_in(start=1.0325266e-05, fixed=true), volume(start=5.9389768e-06,
                        fixed=true)),
                  internal_iliac_T1_L196(volume(start=0.00016828648, fixed=true)),
                  external_iliac_L198(q_in(start=5.8000064e-06, fixed=true), volume(start=4.1195262e-06,
                        fixed=true)),
                  femoral_L200(q_in(start=4.7971494e-06, fixed=true), volume(start=1.1833721e-06,
                        fixed=true)),
                  profundus_T2_L202(volume(start=0.00019296147, fixed=true)),
                  femoral_L204(q_in(start=2.0969128e-06, fixed=true), volume(start=1.007987e-05,
                        fixed=true)),
                  popliteal_L206(q_in(start=1.0879515e-06, fixed=true), volume(start=3.1284503e-06,
                        fixed=true)),
                  anterior_tibial_T3_L208(volume(start=2.532579e-05, fixed=true)),
                  popliteal_L210(q_in(start=4.6524158e-07, fixed=true), volume(start=1.6868202e-07,
                        fixed=true)),
                  tibiofibular_trunk_L212(q_in(start=4.582035e-07, fixed=true), volume(
                        start=6.860053e-07, fixed=true)),
                  posterior_tibial_T4_L214(volume(start=2.7622036e-05, fixed=true)),
                  subclavian_R28(q_in(start=-3.706251e-06, fixed=true), volume(start=1.3311679e-06,
                        fixed=true)),
                  subclavian_R30(q_in(start=-3.2659264e-06, fixed=true), volume(start=1.8184707e-06,
                        fixed=true)),
                  axillary_R32(q_in(start=-2.162287e-06, fixed=true), volume(start=2.2243473e-06,
                        fixed=true)),
                  brachial_R34(q_in(start=-9.11163e-07, fixed=true), volume(start=3.3848426e-06,
                        fixed=true)),
                  ulnar_T2_R36(q_in(start=4.7601432e-07, fixed=true), volume(start=2.0602695e-07,
                        fixed=true)),
                  ulnar_T2_R42(volume(start=5.798794e-05, fixed=true)),
                  radial_T1_R44(volume(start=4.7546804e-05, fixed=true)),
                  subclavian_L66(q_in(start=-4.2460524e-06, fixed=true), volume(start=3.2266328e-06,
                        fixed=true)),
                  subclavian_L78(q_in(start=-2.7845997e-06, fixed=true), volume(start=1.3777111e-06,
                        fixed=true)),
                  axillary_L80(q_in(start=-2.034735e-06, fixed=true), volume(start=2.2280599e-06,
                        fixed=true)),
                  brachial_L82(q_in(start=3.214934e-07, fixed=true), volume(start=1.1215301e-06,
                        fixed=true)),
                  ulnar_T2_L84(q_in(start=4.5969537e-07, fixed=true), volume(start=2.0555574e-07,
                        fixed=true)),
                  ulnar_T2_L90(volume(start=5.7955684e-05, fixed=true)),
                  radial_T1_L92(volume(start=5.0381783e-05, fixed=true)),
                  common_carotid_R6_A(q_in(start=-6.9858456e-06, fixed=true), volume(start=2.7002557e-06,
                        fixed=true)),
                  common_carotid_R6_B(q_in(start=-4.035563e-06, fixed=true), volume(start=2.3226835e-06,
                        fixed=true)),
                  common_carotid_R6_C(q_in(start=-1.4813181e-06, fixed=true), volume(start=1.7661653e-06,
                        fixed=true)),
                  internal_carotid_R8_A(q_in(start=-4.4742926e-08, fixed=true), volume(
                        start=1.022336e-06, fixed=true)),
                  internal_carotid_R8_B(q_in(start=2.7696117e-07, fixed=true), volume(start=
                         6.5913014e-07, fixed=true)),
                  internal_carotid_R8_C(volume(start=6.88845e-05, fixed=true)),
                  external_carotid_T2_R26(volume(start=6.913013e-05, fixed=true)),
                  common_carotid_L48_A(q_in(start=-1.056406e-05, fixed=true), volume(start=2.9348769e-06,
                        fixed=true)),
                  common_carotid_L48_B(q_in(start=-7.4699756e-06, fixed=true), volume(start=
                         2.5869044e-06, fixed=true)),
                  common_carotid_L48_C(q_in(start=-4.5724987e-06, fixed=true), volume(start=
                         2.3067207e-06, fixed=true)),
                  common_carotid_L48_D(q_in(start=-1.8827092e-06, fixed=true), volume(start=
                         1.8899709e-06, fixed=true)),
                  internal_carotid_L50_A(q_in(start=-1.1484559e-07, fixed=true), volume(
                        start=1.021155e-06, fixed=true)),
                  internal_carotid_L50_B(q_in(start=2.4089434e-07, fixed=true), volume(
                        start=6.5843636e-07, fixed=true)),
                  internal_carotid_L50_C(volume(start=6.888818e-05, fixed=true)),
                  external_carotid_T2_L62(volume(start=6.912891e-05, fixed=true)),
                  vertebral_L2(volume(start=6.355881e-05, fixed=true)),
                  vertebral_R272(volume(start=6.356479e-05, fixed=true)),
                  superior_vena_cava_C2(volume(start=2.2396982e-06, fixed=true)),
                  superior_vena_cava_C88(volume(start=3.859797e-06, fixed=true)),
                  inferior_vena_cava_C8(volume(start=3.3594706e-06, fixed=true)),
                  hepatic_vein_T1_C10(volume(start=1.3172539e-06, fixed=true)),
                  inferior_vena_cava_C12(volume(start=9.118591e-06, fixed=true)),
                  inferior_vena_cava_C16(volume(start=7.173229e-06, fixed=true)),
                  renal_vein_T1_R18(volume(start=2.1141304e-06, fixed=true)),
                  inferior_vena_cava_C20(volume(start=5.004636e-07, fixed=true)),
                  renal_vein_T1_L22(volume(start=1.868286e-06, fixed=true)),
                  inferior_vena_cava_C24(volume(start=1.9973306e-05, fixed=true)),
                  common_iliac_vein_L56(volume(start=4.9053456e-06, fixed=true)),
                  common_iliac_vein_R26(volume(start=4.5084844e-06, fixed=true)),
                  external_iliac_vein_R28(volume(start=6.576181e-07, fixed=true)),
                  internal_iliac_vein_T1_R30(volume(start=2.8146553e-06, fixed=true)),
                  external_iliac_vein_R32(volume(start=7.635341e-06, fixed=true)),
                  femoral_vein_R34(volume(start=3.3193868e-07, fixed=true)),
                  femoral_vein_R38(volume(start=2.6327255e-06, fixed=true)),
                  profunda_femoris_vein_T2_R40(volume(start=7.336657e-06, fixed=true)),
                  femoral_vein_R42(volume(start=1.8644381e-05, fixed=true)),
                  femoral_vein_R46(volume(start=1.0268543e-06, fixed=true)),
                  popliteal_vein_R48(volume(start=4.1860517e-06, fixed=true)),
                  anterior_tibial_vein_T4_R50(volume(start=1.3580134e-06, fixed=true)),
                  popliteal_vein_R52(volume(start=9.3135395e-07, fixed=true)),
                  posterior_tibial_vein_T6_R54(volume(start=1.868323e-06, fixed=true)),
                  external_iliac_vein_L58(volume(start=6.5848263e-07, fixed=true)),
                  internal_iliac_vein_T1_L60(volume(start=2.8953355e-06, fixed=true)),
                  external_iliac_vein_L62(volume(start=7.4965637e-06, fixed=true)),
                  femoral_vein_L64(volume(start=3.8809054e-07, fixed=true)),
                  femoral_vein_L68(volume(start=2.6329512e-06, fixed=true)),
                  profunda_femoris_vein_T2_L70(volume(start=7.337258e-06, fixed=true)),
                  femoral_vein_L72(volume(start=1.8645995e-05, fixed=true)),
                  femoral_vein_L76(volume(start=1.0269368e-06, fixed=true)),
                  popliteal_vein_L78(volume(start=4.186415e-06, fixed=true)),
                  anterior_tibial_vein_T4_L80(volume(start=1.358075e-06, fixed=true)),
                  popliteal_vein_L82(volume(start=9.314405e-07, fixed=true)),
                  posterior_tibial_vein_T6_L84(volume(start=1.8684832e-06, fixed=true)),
                  brachiocephalic_vein_R90(volume(start=4.538889e-06, fixed=true)),
                  brachiocephalic_vein_L124(volume(start=8.508279e-06, fixed=true)),
                  vertebral_vein_R92(volume(start=2.878661e-06, fixed=true)),
                  brachiocephalic_vein_R94(volume(start=1.0289957e-06, fixed=true)),
                  subclavian_vein_R96(volume(start=5.003696e-07, fixed=true)),
                  internal_jugular_vein_R122(volume(start=1.978054e-05, fixed=true)),
                  external_jugular_vein_R98(volume(start=1.4055558e-06, fixed=true)),
                  subclavian_vein_R100(volume(start=2.0468115e-06, fixed=true)),
                  axillary_vein_R102(volume(start=7.1970157e-06, fixed=true)),
                  brachial_vein_R104(volume(start=1.4577556e-06, fixed=true)),
                  brachial_vein_R114(volume(start=1.3169629e-06, fixed=true)),
                  brachial_vein_R108(volume(start=2.0221236e-07, fixed=true)),
                  ulnar_vein_T7_R110(volume(start=1.775459e-06, fixed=true)),
                  brachial_vein_R118(volume(start=1.2766415e-07, fixed=true)),
                  radial_vein_T3_R120(volume(start=1.1758169e-06, fixed=true)),
                  vertebral_vein_L126(volume(start=2.6908401e-06, fixed=true)),
                  brachiocephalic_vein_L128(volume(start=5.201427e-07, fixed=true)),
                  subclavian_vein_L130(volume(start=4.4507945e-07, fixed=true)),
                  internal_jugular_vein_L156(volume(start=1.2012749e-05, fixed=true)),
                  external_jugular_vein_L132(volume(start=1.3781975e-06, fixed=true)),
                  subclavian_vein_L134(volume(start=1.9952918e-06, fixed=true)),
                  axillary_vein_L136(volume(start=7.2807566e-06, fixed=true)),
                  brachial_vein_L138(volume(start=1.4581785e-06, fixed=true)),
                  brachial_vein_L148(volume(start=1.3218397e-06, fixed=true)),
                  brachial_vein_L142(volume(start=2.0227127e-07, fixed=true)),
                  ulnar_vein_T7_L144(volume(start=1.775722e-06, fixed=true)),
                  brachial_vein_L152(volume(start=1.2817735e-07, fixed=true)),
                  radial_vein_T3_L154(volume(start=1.1912063e-06, fixed=true)),
                  mesenteric_artery(q_in(start=2.6824766e-06, fixed=true), volume(start=5.3205927e-06,
                        fixed=true)),
                  splanchnic_tissue(volume(start=0.00024831685, fixed=true)),
                  splanchnic_vein(volume(start=1.09846005e-05, fixed=true)),
                  coronary_arteries(q_in(start=5.893933e-07, fixed=true), volume(start=3.3130878e-08,
                        fixed=true)),
                  cardiac_tissue(volume(start=0.00011125262, fixed=true)),
                  coronary_veins(volume(start=2.997192e-08, fixed=true)),
                  brachial_L82_HeartLevel(q_in(start=-8.314693e-07, fixed=true), volume(
                        start=2.2445367e-06, fixed=true))),
                heartComponent(
                  tricuspidValve(open(start=true, fixed=true)),
                  pulmonaryValve(open(start=false, fixed=true)),
                  mitralValve(open(start=false, fixed=true)),
                  aorticValve(open(start=false, fixed=true)),
                  ventricles(
                    LV_wall(
                      ym(start=3.9143994, fixed=true),
                      SL(start=2.305412, fixed=true),
                      xm(start=-5.6037717, fixed=false)),
                    SEP_wall(SL(start=2.3106086, fixed=true), xm(start=2.4303186, fixed=false)),
                    RV_wall(SL(start=1.9181752, fixed=true), xm(start=5.110908, fixed=false)),
                    V_LV(start=0.00023758177, fixed=true),
                    V_RV(start=9.9409066e-05, fixed=true)),
                  ra(volume(start=1.0022613e-05, fixed=true)),
                  la(volume(start=6.365515e-05, fixed=true)),
                  sa_node(cardiac_cycle(start=0.8978792, fixed=true))),
                pulmonaryComponent(c_pa(volume(start=6.597261e-05, fixed=true)), c_pv(
                      volume(start=0.00038607666, fixed=true))));

            end imp_avRe_ss;

            model imp_avSt
              extends imp_base(heartComponent(aorticValve(_Ron(
                        displayUnit="(mmHg.min)/l") = 10879106.813064)));

            Physiolibrary.Types.Pressure p_in(start = 13e3);
            Physiolibrary.Types.Pressure p_out(start = 13e3);
            Physiolibrary.Types.Pressure dp_aortic = p_in - p_out;
            parameter Modelica.Units.SI.Time tau_avg=10;
            equation
                // integrate only during open valve
                if heartComponent.aorticValve.open then
                der(p_in)*tau_avg = heartComponent.aorticValve.q_in.pressure - p_in;
                der(p_out)*tau_avg = heartComponent.aorticValve.q_out.pressure - p_out;
                else
                  der(p_in) = 0;
                  der(p_out) = 0;
                end if;
            end imp_avSt;

            model imp_avSt_ss
              "Steady state initialization from 2020-12-29 22:03:07.886767 at time 299.82"
              extends imp_avSt(
                SystemicComponent(
                  baroreflex_system(
                    baroreflex(phi(start=0.26419958, fixed=true)),
                    baroreceptor_aortic(epsilon(start=1.5612273, fixed=true), s(start=0.80557275,
                          fixed=true)),
                    baroreceptor_carotid(epsilon(start=1.1832228, fixed=true), s(start=0.88544905,
                          fixed=true))),
                  ascending_aorta_A(
                    q(start=2.5058348e-06, fixed=true),
                    vol1(start=8.344596e-06, fixed=true),
                    vol2(start=8.344082e-06, fixed=true)),
                  ascending_aorta_B(q_in(start=5.030426e-06, fixed=true), volume(start=2.5393738e-05,
                        fixed=true)),
                  ascending_aorta_C(q_in(start=6.987516e-06, fixed=true), volume(start=2.3484545e-05,
                        fixed=true)),
                  ascending_aorta_D(q_in(start=1.13964425e-05, fixed=true), volume(start=2.1436614e-05,
                        fixed=true)),
                  aortic_arch_C2(q_in(start=1.5447753e-05, fixed=true), volume(start=1.9606518e-05,
                        fixed=true)),
                  brachiocephalic_trunk_C4(q_in(start=2.389152e-06, fixed=true), volume(
                        start=1.334522e-05, fixed=true)),
                  aortic_arch_C46(q_in(start=1.6801863e-05, fixed=true), volume(start=1.161528e-05,
                        fixed=true)),
                  aortic_arch_C64(q_in(start=1.7420149e-05, fixed=true), volume(start=7.972709e-06,
                        fixed=true)),
                  aortic_arch_C94(q_in(start=1.5842797e-05, fixed=true), volume(start=4.36876e-05,
                        fixed=true)),
                  thoracic_aorta_C96(q_in(start=2.499475e-05, fixed=true), volume(start=7.8452595e-06,
                        fixed=true)),
                  thoracic_aorta_C100(q_in(start=2.6667152e-05, fixed=true), volume(start=6.032697e-06,
                        fixed=true)),
                  thoracic_aorta_C104(q_in(start=2.7979333e-05, fixed=true), volume(start=1.1359616e-05,
                        fixed=true)),
                  thoracic_aorta_C108(q_in(start=3.055539e-05, fixed=true), volume(start=3.7310135e-06,
                        fixed=true)),
                  thoracic_aorta_C112(q_in(start=3.1413132e-05, fixed=true), volume(start=6.069352e-05,
                        fixed=true)),
                  abdominal_aorta_C114(q_in(start=5.1864696e-05, fixed=true), volume(start=1.2543936e-06,
                        fixed=true)),
                  abdominal_aorta_C136(q_in(start=4.1857333e-05, fixed=true), volume(start=5.260174e-06,
                        fixed=true)),
                  abdominal_aorta_C164(q_in(start=3.729783e-05, fixed=true), volume(start=1.5609712e-06,
                        fixed=true)),
                  abdominal_aorta_C176(q_in(start=2.845579e-05, fixed=true), volume(start=4.193831e-06,
                        fixed=true)),
                  abdominal_aorta_C188(q_in(start=2.0634187e-05, fixed=true), volume(start=1.6709444e-05,
                        fixed=true)),
                  abdominal_aorta_C192(q_in(start=2.6572869e-05, fixed=true), volume(start=1.0363566e-05,
                        fixed=true)),
                  celiac_trunk_C116(volume(start=0.00034605066, fixed=true)),
                  renal_L166(volume(start=0.00031258902, fixed=true)),
                  renal_R178(volume(start=0.0003097842, fixed=true)),
                  common_iliac_R216(q_in(start=1.502021e-05, fixed=true), volume(start=8.584074e-06,
                        fixed=true)),
                  internal_iliac_T1_R218(volume(start=0.0001701042, fixed=true)),
                  external_iliac_R220(q_in(start=1.265608e-05, fixed=true), volume(start=4.891175e-06,
                        fixed=true)),
                  femoral_R222(q_in(start=1.3102774e-05, fixed=true), volume(start=1.3986787e-06,
                        fixed=true)),
                  profundus_T2_R224(volume(start=0.0001950657, fixed=true)),
                  femoral_R226(q_in(start=7.5418125e-06, fixed=true), volume(start=1.1580388e-05,
                        fixed=true)),
                  popliteal_R228(q_in(start=3.2454736e-06, fixed=true), volume(start=3.554339e-06,
                        fixed=true)),
                  anterior_tibial_T3_R230(volume(start=2.5597426e-05, fixed=true)),
                  popliteal_R232(q_in(start=1.033068e-06, fixed=true), volume(start=1.8075882e-07,
                        fixed=true)),
                  tibiofibular_trunk_R234(q_in(start=9.905999e-07, fixed=true), volume(
                        start=7.348841e-07, fixed=true)),
                  posterior_tibial_T4_R236(volume(start=2.7922191e-05, fixed=true)),
                  common_iliac_L194(q_in(start=1.5141948e-05, fixed=true), volume(start=8.211538e-06,
                        fixed=true)),
                  internal_iliac_T1_L196(volume(start=0.00017010565, fixed=true)),
                  external_iliac_L198(q_in(start=1.2644105e-05, fixed=true), volume(start=4.8921697e-06,
                        fixed=true)),
                  femoral_L200(q_in(start=1.3085697e-05, fixed=true), volume(start=1.3989653e-06,
                        fixed=true)),
                  profundus_T2_L202(volume(start=0.00019506678, fixed=true)),
                  femoral_L204(q_in(start=7.5177954e-06, fixed=true), volume(start=1.1583147e-05,
                        fixed=true)),
                  popliteal_L206(q_in(start=3.2390747e-06, fixed=true), volume(start=3.555127e-06,
                        fixed=true)),
                  anterior_tibial_T3_L208(volume(start=2.559756e-05, fixed=true)),
                  popliteal_L210(q_in(start=1.0329201e-06, fixed=true), volume(start=1.8078092e-07,
                        fixed=true)),
                  tibiofibular_trunk_L212(q_in(start=9.906518e-07, fixed=true), volume(
                        start=7.349963e-07, fixed=true)),
                  posterior_tibial_T4_L214(volume(start=2.7922355e-05, fixed=true)),
                  subclavian_R28(q_in(start=3.5333308e-06, fixed=true), volume(start=2.0448463e-06,
                        fixed=true)),
                  subclavian_R30(q_in(start=1.8231343e-06, fixed=true), volume(start=2.681836e-06,
                        fixed=true)),
                  axillary_R32(q_in(start=2.2345373e-06, fixed=true), volume(start=3.0684769e-06,
                        fixed=true)),
                  brachial_R34(q_in(start=2.5945667e-06, fixed=true), volume(start=4.4528024e-06,
                        fixed=true)),
                  ulnar_T2_R36(q_in(start=1.7006256e-06, fixed=true), volume(start=2.3733502e-07,
                        fixed=true)),
                  ulnar_T2_R42(volume(start=5.8677684e-05, fixed=true)),
                  radial_T1_R44(volume(start=4.809243e-05, fixed=true)),
                  subclavian_L66(q_in(start=3.122423e-06, fixed=true), volume(start=4.851381e-06,
                        fixed=true)),
                  subclavian_L78(q_in(start=1.8392781e-06, fixed=true), volume(start=1.9846962e-06,
                        fixed=true)),
                  axillary_L80(q_in(start=2.1162452e-06, fixed=true), volume(start=3.0569622e-06,
                        fixed=true)),
                  brachial_L82(q_in(start=2.9281853e-06, fixed=true), volume(start=1.4809441e-06,
                        fixed=true)),
                  ulnar_T2_L84(q_in(start=1.6893332e-06, fixed=true), volume(start=2.3721871e-07,
                        fixed=true)),
                  ulnar_T2_L90(volume(start=5.8654055e-05, fixed=true)),
                  radial_T1_L92(volume(start=5.0967024e-05, fixed=true)),
                  common_carotid_R6_A(q_in(start=1.3062946e-06, fixed=true), volume(start=5.0526714e-06,
                        fixed=true)),
                  common_carotid_R6_B(q_in(start=2.4999433e-06, fixed=true), volume(start=4.317062e-06,
                        fixed=true)),
                  common_carotid_R6_C(q_in(start=3.5371388e-06, fixed=true), volume(start=3.2277392e-06,
                        fixed=true)),
                  internal_carotid_R8_A(q_in(start=2.0517562e-06, fixed=true), volume(start=
                         1.2661793e-06, fixed=true)),
                  internal_carotid_R8_B(q_in(start=2.1789479e-06, fixed=true), volume(start=
                         8.016099e-07, fixed=true)),
                  internal_carotid_R8_C(volume(start=6.963685e-05, fixed=true)),
                  external_carotid_T2_R26(volume(start=6.9874775e-05, fixed=true)),
                  common_carotid_L48_A(q_in(start=1.6119718e-06, fixed=true), volume(start=5.452077e-06,
                        fixed=true)),
                  common_carotid_L48_B(q_in(start=2.648711e-06, fixed=true), volume(start=4.792322e-06,
                        fixed=true)),
                  common_carotid_L48_C(q_in(start=3.412999e-06, fixed=true), volume(start=4.255995e-06,
                        fixed=true)),
                  common_carotid_L48_D(q_in(start=3.989223e-06, fixed=true), volume(start=3.4457782e-06,
                        fixed=true)),
                  internal_carotid_L50_A(q_in(start=2.151118e-06, fixed=true), volume(start=
                         1.2641354e-06, fixed=true)),
                  internal_carotid_L50_B(q_in(start=2.2081886e-06, fixed=true), volume(
                        start=8.0029497e-07, fixed=true)),
                  internal_carotid_L50_C(volume(start=6.964012e-05, fixed=true)),
                  external_carotid_T2_L62(volume(start=6.9873226e-05, fixed=true)),
                  vertebral_L2(volume(start=6.424655e-05, fixed=true)),
                  vertebral_R272(volume(start=6.4250744e-05, fixed=true)),
                  superior_vena_cava_C2(volume(start=2.0190057e-06, fixed=true)),
                  superior_vena_cava_C88(volume(start=3.4795523e-06, fixed=true)),
                  inferior_vena_cava_C8(volume(start=3.0285164e-06, fixed=true)),
                  hepatic_vein_T1_C10(volume(start=1.1874977e-06, fixed=true)),
                  inferior_vena_cava_C12(volume(start=8.221148e-06, fixed=true)),
                  inferior_vena_cava_C16(volume(start=6.467838e-06, fixed=true)),
                  renal_vein_T1_R18(volume(start=1.9063035e-06, fixed=true)),
                  inferior_vena_cava_C20(volume(start=4.5125225e-07, fixed=true)),
                  renal_vein_T1_L22(volume(start=1.6846657e-06, fixed=true)),
                  inferior_vena_cava_C24(volume(start=1.8012972e-05, fixed=true)),
                  common_iliac_vein_L56(volume(start=4.4250137e-06, fixed=true)),
                  common_iliac_vein_R26(volume(start=4.066925e-06, fixed=true)),
                  external_iliac_vein_R28(volume(start=5.932303e-07, fixed=true)),
                  internal_iliac_vein_T1_R30(volume(start=2.5393401e-06, fixed=true)),
                  external_iliac_vein_R32(volume(start=6.8898735e-06, fixed=true)),
                  femoral_vein_R34(volume(start=2.9953674e-07, fixed=true)),
                  femoral_vein_R38(volume(start=2.3761404e-06, fixed=true)),
                  profunda_femoris_vein_T2_R40(volume(start=6.631626e-06, fixed=true)),
                  femoral_vein_R42(volume(start=1.6839162e-05, fixed=true)),
                  femoral_vein_R46(volume(start=9.274451e-07, fixed=true)),
                  popliteal_vein_R48(volume(start=3.7832826e-06, fixed=true)),
                  anterior_tibial_vein_T4_R50(volume(start=1.3909333e-06, fixed=true)),
                  popliteal_vein_R52(volume(start=8.4179516e-07, fixed=true)),
                  posterior_tibial_vein_T6_R54(volume(start=1.7155799e-06, fixed=true)),
                  external_iliac_vein_L58(volume(start=5.9402305e-07, fixed=true)),
                  internal_iliac_vein_T1_L60(volume(start=2.6121952e-06, fixed=true)),
                  external_iliac_vein_L62(volume(start=6.7647516e-06, fixed=true)),
                  femoral_vein_L64(volume(start=3.5021418e-07, fixed=true)),
                  femoral_vein_L68(volume(start=2.3763903e-06, fixed=true)),
                  profunda_femoris_vein_T2_L70(volume(start=6.6323046e-06, fixed=true)),
                  femoral_vein_L72(volume(start=1.6840946e-05, fixed=true)),
                  femoral_vein_L76(volume(start=9.2753766e-07, fixed=true)),
                  popliteal_vein_L78(volume(start=3.7836849e-06, fixed=true)),
                  anterior_tibial_vein_T4_L80(volume(start=1.3910188e-06, fixed=true)),
                  popliteal_vein_L82(volume(start=8.418899e-07, fixed=true)),
                  posterior_tibial_vein_T6_L84(volume(start=1.7157756e-06, fixed=true)),
                  brachiocephalic_vein_R90(volume(start=4.091942e-06, fixed=true)),
                  brachiocephalic_vein_L124(volume(start=7.67105e-06, fixed=true)),
                  vertebral_vein_R92(volume(start=2.6009247e-06, fixed=true)),
                  brachiocephalic_vein_R94(volume(start=9.2767846e-07, fixed=true)),
                  subclavian_vein_R96(volume(start=4.5111125e-07, fixed=true)),
                  internal_jugular_vein_R122(volume(start=1.7834926e-05, fixed=true)),
                  external_jugular_vein_R98(volume(start=1.2707261e-06, fixed=true)),
                  subclavian_vein_R100(volume(start=1.8454383e-06, fixed=true)),
                  axillary_vein_R102(volume(start=6.4903325e-06, fixed=true)),
                  brachial_vein_R104(volume(start=1.3339586e-06, fixed=true)),
                  brachial_vein_R114(volume(start=1.2079088e-06, fixed=true)),
                  brachial_vein_R108(volume(start=1.8542592e-07, fixed=true)),
                  ulnar_vein_T7_R110(volume(start=1.6921599e-06, fixed=true)),
                  brachial_vein_R118(volume(start=1.1729282e-07, fixed=true)),
                  radial_vein_T3_R120(volume(start=1.205644e-06, fixed=true)),
                  vertebral_vein_L126(volume(start=2.4309086e-06, fixed=true)),
                  brachiocephalic_vein_L128(volume(start=4.6896253e-07, fixed=true)),
                  subclavian_vein_L130(volume(start=4.0129257e-07, fixed=true)),
                  internal_jugular_vein_L156(volume(start=1.0832639e-05, fixed=true)),
                  external_jugular_vein_L132(volume(start=1.2459938e-06, fixed=true)),
                  subclavian_vein_L134(volume(start=1.7991135e-06, fixed=true)),
                  axillary_vein_L136(volume(start=6.566354e-06, fixed=true)),
                  brachial_vein_L138(volume(start=1.334548e-06, fixed=true)),
                  brachial_vein_L148(volume(start=1.2137037e-06, fixed=true)),
                  brachial_vein_L142(volume(start=1.8551005e-07, fixed=true)),
                  ulnar_vein_T7_L144(volume(start=1.6929237e-06, fixed=true)),
                  brachial_vein_L152(volume(start=1.1790848e-07, fixed=true)),
                  radial_vein_T3_L154(volume(start=1.236435e-06, fixed=true)),
                  mesenteric_artery(q_in(start=6.350247e-06, fixed=true), volume(start=6.3512184e-06,
                        fixed=true)),
                  splanchnic_tissue(volume(start=0.00025098588, fixed=true)),
                  splanchnic_vein(volume(start=9.904153e-06, fixed=true)),
                  coronary_arteries(q_in(start=2.792708e-06, fixed=true), volume(start=3.6836703e-08,
                        fixed=true)),
                  cardiac_tissue(volume(start=0.00011293962, fixed=true)),
                  coronary_veins(volume(start=3.391292e-08, fixed=true)),
                  brachial_L82_HeartLevel(q_in(start=2.5026036e-06, fixed=true), volume(
                        start=2.9829905e-06, fixed=true))),
                heartComponent(
                  tricuspidValve(open(start=true, fixed=true)),
                  pulmonaryValve(open(start=false, fixed=true)),
                  mitralValve(open(start=true, fixed=true)),
                  aorticValve(open(start=false, fixed=true)),
                  ventricles(
                    LV_wall(
                      ym(start=3.4132285, fixed=true),
                      SL(start=1.9376333, fixed=true),
                      xm(start=-4.6858945, fixed=false)),
                    SEP_wall(SL(start=1.9653507, fixed=true), xm(start=1.9751972, fixed=false)),
                    RV_wall(SL(start=1.8940938, fixed=true), xm(start=5.3701267, fixed=false)),
                    V_LV(start=0.00012436486, fixed=true),
                    V_RV(start=0.0001116841, fixed=true)),
                  ra(volume(start=1.0647456e-05, fixed=true)),
                  la(volume(start=4.688662e-05, fixed=true)),
                  sa_node(cardiac_cycle(start=0.93316317, fixed=true))),
                pulmonaryComponent(c_pa(volume(start=6.0211845e-05, fixed=true)), c_pv(
                      volume(start=0.00034601512, fixed=true))));

            end imp_avSt_ss;

            model imp_hemr "A simple bleeding experiment"
              extends imp_base;
              Physiolibrary.Hydraulic.Components.Pump pump(useSolutionFlowInput=true,
                  SolutionFlow(displayUnit="m3/s") = 1.6666666666667e-05)
                annotation (Placement(transformation(extent={{48,-98},{68,-78}})));
              Physiolibrary.Hydraulic.Components.ElasticVessel volume_bleeded
                "A cut vein reservoir"
                annotation (Placement(transformation(extent={{80,-98},{100,-78}})));
              replaceable Modelica.Blocks.Sources.Ramp bleeding_ramp(
              height=-50e-6,
              offset=50e-6,
              startTime=10,
              duration=0) constrainedby Modelica.Blocks.Sources.Ramp
              annotation (Placement(transformation(extent={{32,-68},{48,-52}})));
            equation
              connect(volume_bleeded.q_in, pump.q_out) annotation (Line(
                  points={{90,-88},{68,-88}},
                  color={0,0,0},
                  thickness=1));
              connect(pump.q_in, heartComponent.sv) annotation (Line(
                  points={{48,-88},{24,-88},{24,-16.4},{-16,-16.4}},
                  color={0,0,0},
                  thickness=1));
            connect(bleeding_ramp.y, pump.solutionFlow) annotation (Line(points={{48.8,
                    -60},{58,-60},{58,-81}}, color={0,0,127}));
            end imp_hemr;
          end VMAuto;

          package VMNoBaro
            model imp_base
                extends CVS_VMNoBaro;
            end imp_base;

            model imp_noVc
                extends imp_base(settings(veins_UsePhiEffect=false));
            end imp_noVc;

            model imp_noVcLin
                extends imp_base(settings(veins_UseNonLinearVeins=false,
                                          veins_UsePhiEffect=false));
            end imp_noVcLin;

            model imp_noVcTc
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTc;

            model imp_noVcTcLin
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTcLin;

            model imp_noBaro
                extends imp_base(useAutonomousPhi(y=false));
            end imp_noBaro;

            model imp_noBaroLinV
              extends imp_noBaro(
                  settings(veins_UseNonLinearVeins=false));
            end imp_noBaroLinV;

            model imp_noBaro_linVT
              extends imp_noBaroLinV(settings(UseNonLinear_TissuesCompliance=false));
            end imp_noBaro_linVT;

            model imp_noValves
              extends imp_base(SystemicComponent(
                    brachiocephalic_vein_R90(LimitBackflow=false),
                    brachiocephalic_vein_L124(LimitBackflow=false),
                    common_iliac_vein_R26(LimitBackflow=false),
                    common_iliac_vein_L56(LimitBackflow=false)));
            end imp_noValves;

            model imp_arSt
              extends imp_base(settings(syst_art_k_E=0.8));
            end imp_arSt;

            model imp_avRe
              extends imp_base(heartComponent(aorticValve(_Goff=3E-08)));
            end imp_avRe;

            model imp_avSt
              extends imp_base(heartComponent(aorticValve(_Ron(
                        displayUnit="(mmHg.min)/l") = 10879106.813064)), settings(
                    baro_tau_s=10));

            Physiolibrary.Types.Pressure p_in(start = 13e3);
            Physiolibrary.Types.Pressure p_out(start = 13e3);
            Physiolibrary.Types.Pressure dp_aortic = p_in - p_out;
            parameter Modelica.Units.SI.Time tau_avg=10;
            equation
                // integrate only during open valve
                if heartComponent.aorticValve.open then
                der(p_in)*tau_avg = heartComponent.aorticValve.q_in.pressure - p_in;
                der(p_out)*tau_avg = heartComponent.aorticValve.q_out.pressure - p_out;
                else
                  der(p_in) = 0;
                  der(p_out) = 0;
                end if;
            end imp_avSt;

            model imp_hemr "A simple bleeding experiment"
              extends imp_base;
              Physiolibrary.Hydraulic.Components.Pump pump(useSolutionFlowInput=true,
                  SolutionFlow(displayUnit="m3/s") = 1.6666666666667e-05)
                annotation (Placement(transformation(extent={{48,-98},{68,-78}})));
              Physiolibrary.Hydraulic.Components.ElasticVessel volume_bleeded
                "A cut vein reservoir"
                annotation (Placement(transformation(extent={{80,-98},{100,-78}})));
              replaceable Modelica.Blocks.Sources.Ramp bleeding_ramp(
              height=-50e-6,
              offset=50e-6,
              startTime=10,
              duration=0) constrainedby Modelica.Blocks.Sources.Ramp
              annotation (Placement(transformation(extent={{32,-68},{48,-52}})));
            equation
              connect(volume_bleeded.q_in, pump.q_out) annotation (Line(
                  points={{90,-88},{68,-88}},
                  color={0,0,0},
                  thickness=1));
              connect(pump.q_in, heartComponent.sv) annotation (Line(
                  points={{48,-88},{24,-88},{24,-16.4},{-16,-16.4}},
                  color={0,0,0},
                  thickness=1));
            connect(bleeding_ramp.y, pump.solutionFlow) annotation (Line(points={{48.8,
                    -60},{58,-60},{58,-81}}, color={0,0,127}));
            end imp_hemr;
          end VMNoBaro;

          package Ex30
            model imp_base
                extends CVS_Ex30;
            end imp_base;

            model imp_noVc
                extends imp_base(settings(veins_UsePhiEffect=false));
            end imp_noVc;

            model imp_noVcLin
                extends imp_base(settings(veins_UseNonLinearVeins=false,
                                          veins_UsePhiEffect=false));
            end imp_noVcLin;

            model imp_noVcTc
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTc;

            model imp_noVcTcLin
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTcLin;

            model imp_noBaro
                extends imp_base(useAutonomousPhi(y=false));
            end imp_noBaro;

            model imp_noBaroLinV
              extends imp_noBaro(
                  settings(veins_UseNonLinearVeins=false));
            end imp_noBaroLinV;

            model imp_noBaro_linVT
              extends imp_noBaroLinV(settings(UseNonLinear_TissuesCompliance=false));
            end imp_noBaro_linVT;

            model imp_noValves
              extends imp_base(SystemicComponent(
                    brachiocephalic_vein_R90(LimitBackflow=false),
                    brachiocephalic_vein_L124(LimitBackflow=false),
                    common_iliac_vein_R26(LimitBackflow=false),
                    common_iliac_vein_L56(LimitBackflow=false)));
            end imp_noValves;

            model imp_arSt
              extends imp_base(settings(syst_art_k_E=0.8));
            end imp_arSt;

            model imp_avRe
              extends imp_base(heartComponent(aorticValve(_Goff=3E-08)));
            end imp_avRe;

            model imp_avSt
              extends imp_base(heartComponent(aorticValve(_Ron(
                        displayUnit="(mmHg.min)/l") = 10879106.813064)), settings(
                    baro_tau_s=10));

            Physiolibrary.Types.Pressure p_in(start = 13e3);
            Physiolibrary.Types.Pressure p_out(start = 13e3);
            Physiolibrary.Types.Pressure dp_aortic = p_in - p_out;
            parameter Modelica.Units.SI.Time tau_avg=10;
            equation
                // integrate only during open valve
                if heartComponent.aorticValve.open then
                der(p_in)*tau_avg = heartComponent.aorticValve.q_in.pressure - p_in;
                der(p_out)*tau_avg = heartComponent.aorticValve.q_out.pressure - p_out;
                else
                  der(p_in) = 0;
                  der(p_out) = 0;
                end if;
            end imp_avSt;

            model imp_hemr "A simple bleeding experiment"
              extends imp_base(phi_fixed(startTime=20));
              Physiolibrary.Hydraulic.Components.Pump pump(useSolutionFlowInput=true,
                  SolutionFlow(displayUnit="m3/s") = 1.6666666666667e-05)
                annotation (Placement(transformation(extent={{48,-98},{68,-78}})));
              Physiolibrary.Hydraulic.Components.ElasticVessel volume_bleeded
                "A cut vein reservoir"
                annotation (Placement(transformation(extent={{80,-98},{100,-78}})));
              replaceable Modelica.Blocks.Sources.Ramp bleeding_ramp(
              height=-50e-6,
              offset=50e-6,
              startTime=10,
              duration=0) constrainedby Modelica.Blocks.Sources.Ramp
              annotation (Placement(transformation(extent={{32,-68},{48,-52}})));
            equation
              connect(volume_bleeded.q_in, pump.q_out) annotation (Line(
                  points={{90,-88},{68,-88}},
                  color={0,0,0},
                  thickness=1));
              connect(pump.q_in, heartComponent.sv) annotation (Line(
                  points={{48,-88},{24,-88},{24,-16.4},{-16,-16.4}},
                  color={0,0,0},
                  thickness=1));
            connect(bleeding_ramp.y, pump.solutionFlow) annotation (Line(points={{48.8,
                    -60},{58,-60},{58,-81}}, color={0,0,127}));
            end imp_hemr;
          end Ex30;

          package Ex90
            model imp_base
                extends CVS_Ex90;
            end imp_base;

            model imp_noVc
                extends imp_base(settings(veins_UsePhiEffect=false));
            end imp_noVc;

            model imp_noVcLin
                extends imp_base(settings(veins_UseNonLinearVeins=false,
                                          veins_UsePhiEffect=false));
            end imp_noVcLin;

            model imp_noVcTc
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTc;

            model imp_noVcTcLin
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTcLin;

            model imp_noBaro
                extends imp_base(useAutonomousPhi(y=false));
            end imp_noBaro;

            model imp_noBaroLinV
              extends imp_noBaro(
                  settings(veins_UseNonLinearVeins=false));
            end imp_noBaroLinV;

            model imp_noBaro_linVT
              extends imp_noBaroLinV(settings(UseNonLinear_TissuesCompliance=false));
            end imp_noBaro_linVT;

            model imp_noValves
              extends imp_base(SystemicComponent(
                    brachiocephalic_vein_R90(LimitBackflow=false),
                    brachiocephalic_vein_L124(LimitBackflow=false),
                    common_iliac_vein_R26(LimitBackflow=false),
                    common_iliac_vein_L56(LimitBackflow=false)));
            end imp_noValves;

            model imp_arSt
              extends imp_base(settings(syst_art_k_E=0.8));
            end imp_arSt;

            model imp_avRe
              extends imp_base(heartComponent(aorticValve(_Goff=3E-08)));
            end imp_avRe;

            model imp_avSt
              extends imp_base(heartComponent(aorticValve(_Ron(
                        displayUnit="(mmHg.min)/l") = 10879106.813064)), settings(
                    baro_tau_s=10));

            Physiolibrary.Types.Pressure p_in(start = 13e3);
            Physiolibrary.Types.Pressure p_out(start = 13e3);
            Physiolibrary.Types.Pressure dp_aortic = p_in - p_out;
            parameter Modelica.Units.SI.Time tau_avg=10;
            equation
                // integrate only during open valve
                if heartComponent.aorticValve.open then
                der(p_in)*tau_avg = heartComponent.aorticValve.q_in.pressure - p_in;
                der(p_out)*tau_avg = heartComponent.aorticValve.q_out.pressure - p_out;
                else
                  der(p_in) = 0;
                  der(p_out) = 0;
                end if;
            end imp_avSt;

            model imp_hemr "A simple bleeding experiment"
              extends imp_base(phi_fixed(startTime=20));
              Physiolibrary.Hydraulic.Components.Pump pump(useSolutionFlowInput=true,
                  SolutionFlow(displayUnit="m3/s") = 1.6666666666667e-05)
                annotation (Placement(transformation(extent={{48,-98},{68,-78}})));
              Physiolibrary.Hydraulic.Components.ElasticVessel volume_bleeded
                "A cut vein reservoir"
                annotation (Placement(transformation(extent={{80,-98},{100,-78}})));
              replaceable Modelica.Blocks.Sources.Ramp bleeding_ramp(
              height=-50e-6,
              offset=50e-6,
              startTime=10,
              duration=0) constrainedby Modelica.Blocks.Sources.Ramp
              annotation (Placement(transformation(extent={{32,-68},{48,-52}})));
            equation
              connect(volume_bleeded.q_in, pump.q_out) annotation (Line(
                  points={{90,-88},{68,-88}},
                  color={0,0,0},
                  thickness=1));
              connect(pump.q_in, heartComponent.sv) annotation (Line(
                  points={{48,-88},{24,-88},{24,-16.4},{-16,-16.4}},
                  color={0,0,0},
                  thickness=1));
            connect(bleeding_ramp.y, pump.solutionFlow) annotation (Line(points={{48.8,
                    -60},{58,-60},{58,-81}}, color={0,0,127}));
            end imp_hemr;
          end Ex90;

          package ExStepping "Stepping exercise scenario"
            model imp_base
                extends CVS_ExStepping;
            end imp_base;

            model imp_noVc
                extends imp_base(settings(veins_UsePhiEffect=false));
            end imp_noVc;

            model imp_noVcLin
                extends imp_base(settings(veins_UseNonLinearVeins=false,
                                          veins_UsePhiEffect=false));
            end imp_noVcLin;

            model imp_noVcTc
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTc;

            model imp_noVcTcLin
                extends imp_base(settings(
                    syst_art_UseVasoconstrictionEffect=true,
                    tissues_eta_Ra=0,
                    tissues_eta_C=0,
                    veins_UsePhiEffect=false));
            end imp_noVcTcLin;

            model imp_noBaro
                extends imp_base(useAutonomousPhi(y=false));
            end imp_noBaro;

            model imp_noBaroLinV
              extends imp_noBaro(
                  settings(veins_UseNonLinearVeins=false));
            end imp_noBaroLinV;

            model imp_noBaro_linVT
              extends imp_noBaroLinV(settings(UseNonLinear_TissuesCompliance=false));
            end imp_noBaro_linVT;

            model imp_noValves
              extends imp_base(SystemicComponent(
                    brachiocephalic_vein_R90(LimitBackflow=false),
                    brachiocephalic_vein_L124(LimitBackflow=false),
                    common_iliac_vein_R26(LimitBackflow=false),
                    common_iliac_vein_L56(LimitBackflow=false)));
            end imp_noValves;

            model imp_arSt
              extends imp_base(settings(syst_art_k_E=0.8));
            end imp_arSt;

            model imp_arSt_ss
            "Steady state initialization from 2020-12-29 21:05:26.481251 at time 299.86"
              extends imp_arSt(
                  SystemicComponent(
                    baroreflex_system(
                      baroreflex(phi(start = 0.24229456, fixed = true)),
                      baroreceptor_aortic(epsilon(start = 1.3092335, fixed = true), s(start = 0.7701473, fixed = true)),
                      baroreceptor_carotid(epsilon(start = 1.0949951, fixed = true), s(start = 0.8840892, fixed = true))),
                    ascending_aorta_A(q(start = 2.5515742e-06, fixed = true), vol1(start = 3.403867e-06, fixed = true), vol2(start = 3.403783e-06, fixed = true)),
                    ascending_aorta_B(q_in(start = 5.112949e-06, fixed = true), volume(start = 1.6754268e-05, fixed = true)),
                    ascending_aorta_C(q_in(start = 7.662759e-06, fixed = true), volume(start = 1.5518155e-05, fixed = true)),
                    ascending_aorta_D(q_in(start = 1.1987098e-05, fixed = true), volume(start = 1.4190164e-05, fixed = true)),
                    aortic_arch_C2(q_in(start = 1.5902064e-05, fixed = true), volume(start = 1.3001863e-05, fixed = true)),
                    brachiocephalic_trunk_C4(q_in(start = 1.2677907e-06, fixed = true), volume(start = 9.140656e-06, fixed = true)),
                    aortic_arch_C46(q_in(start = 1.8179178e-05, fixed = true), volume(start = 7.716952e-06, fixed = true)),
                    aortic_arch_C64(q_in(start = 2.0871652e-05, fixed = true), volume(start = 5.3034414e-06, fixed = true)),
                    aortic_arch_C94(q_in(start = 1.9551486e-05, fixed = true), volume(start = 2.9175528e-05, fixed = true)),
                    thoracic_aorta_C96(q_in(start = 2.6880227e-05, fixed = true), volume(start = 5.2647374e-06, fixed = true)),
                    thoracic_aorta_C100(q_in(start = 2.816266e-05, fixed = true), volume(start = 4.0528794e-06, fixed = true)),
                    thoracic_aorta_C104(q_in(start = 2.9133214e-05, fixed = true), volume(start = 7.645832e-06, fixed = true)),
                    thoracic_aorta_C108(q_in(start = 3.0901436e-05, fixed = true), volume(start = 2.5140964e-06, fixed = true)),
                    thoracic_aorta_C112(q_in(start = 3.147465e-05, fixed = true), volume(start = 4.163393e-05, fixed = true)),
                    abdominal_aorta_C114(q_in(start = 3.73411e-05, fixed = true), volume(start = 8.6590995e-07, fixed = true)),
                    abdominal_aorta_C136(q_in(start = 2.9044633e-05, fixed = true), volume(start = 3.6362642e-06, fixed = true)),
                    abdominal_aorta_C164(q_in(start = 2.3903056e-05, fixed = true), volume(start = 1.0804175e-06, fixed = true)),
                    abdominal_aorta_C176(q_in(start = 1.6465858e-05, fixed = true), volume(start = 2.906814e-06, fixed = true)),
                    abdominal_aorta_C188(q_in(start = 9.335313e-06, fixed = true), volume(start = 1.1651799e-05, fixed = true)),
                    abdominal_aorta_C192(q_in(start = 1.0589696e-05, fixed = true), volume(start = 7.2855782e-06, fixed = true)),
                    celiac_trunk_C116(volume(start = 0.0003551999, fixed = true)),
                    renal_L166(volume(start = 0.00032085134, fixed = true)),
                    renal_R178(volume(start = 0.00031797556, fixed = true)),
                    common_iliac_R216(q_in(start = 5.622475e-06, fixed = true), volume(start = 6.2219397e-06, fixed = true)),
                    internal_iliac_T1_R218(volume(start = 0.0001746407, fixed = true)),
                    external_iliac_R220(q_in(start = 2.2483043e-06, fixed = true), volume(start = 4.083962e-06, fixed = true)),
                    femoral_R222(q_in(start = 2.5723098e-06, fixed = true), volume(start = 1.1703349e-06, fixed = true)),
                    profundus_T2_R224(volume(start = 0.0002003131, fixed = true)),
                    femoral_R226(q_in(start = -1.7140757e-06, fixed = true), volume(start = 9.683984e-06, fixed = true)),
                    popliteal_R228(q_in(start = 2.9811156e-07, fixed = true), volume(start = 3.0031426e-06, fixed = true)),
                    anterior_tibial_T3_R230(volume(start = 2.6213478e-05, fixed = true)),
                    popliteal_R232(q_in(start = 4.662309e-07, fixed = true), volume(start = 1.6512647e-07, fixed = true)),
                    tibiofibular_trunk_R234(q_in(start = 4.848016e-07, fixed = true), volume(start = 6.7155645e-07, fixed = true)),
                    posterior_tibial_T4_R236(volume(start = 2.8676926e-05, fixed = true)),
                    common_iliac_L194(q_in(start = 5.7011166e-06, fixed = true), volume(start = 5.9542117e-06, fixed = true)),
                    internal_iliac_T1_L196(volume(start = 0.00017464205, fixed = true)),
                    external_iliac_L198(q_in(start = 2.2989632e-06, fixed = true), volume(start = 4.0842533e-06, fixed = true)),
                    femoral_L200(q_in(start = 2.6207276e-06, fixed = true), volume(start = 1.1704201e-06, fixed = true)),
                    profundus_T2_L202(volume(start = 0.00020031397, fixed = true)),
                    femoral_L204(q_in(start = -1.6701713e-06, fixed = true), volume(start = 9.684931e-06, fixed = true)),
                    popliteal_L206(q_in(start = 3.1131438e-07, fixed = true), volume(start = 3.00339e-06, fixed = true)),
                    anterior_tibial_T3_L208(volume(start = 2.6213504e-05, fixed = true)),
                    popliteal_L210(q_in(start = 4.6855897e-07, fixed = true), volume(start = 1.6513317e-07, fixed = true)),
                    tibiofibular_trunk_L212(q_in(start = 4.8684336e-07, fixed = true), volume(start = 6.716039e-07, fixed = true)),
                    posterior_tibial_T4_L214(volume(start = 2.8676977e-05, fixed = true)),
                    subclavian_R28(q_in(start = 3.0323986e-06, fixed = true), volume(start = 1.4426801e-06, fixed = true)),
                    subclavian_R30(q_in(start = 1.7622905e-06, fixed = true), volume(start = 1.952449e-06, fixed = true)),
                    axillary_R32(q_in(start = 2.1503586e-06, fixed = true), volume(start = 2.3369512e-06, fixed = true)),
                    brachial_R34(q_in(start = 2.4401477e-06, fixed = true), volume(start = 3.4667978e-06, fixed = true)),
                    ulnar_T2_R36(q_in(start = 1.3941229e-06, fixed = true), volume(start = 2.0834604e-07, fixed = true)),
                    ulnar_T2_R42(volume(start = 6.0209728e-05, fixed = true)),
                    radial_T1_R44(volume(start = 4.9256567e-05, fixed = true)),
                    subclavian_L66(q_in(start = 2.7339422e-06, fixed = true), volume(start = 3.473886e-06, fixed = true)),
                    subclavian_L78(q_in(start = 1.8564388e-06, fixed = true), volume(start = 1.4690359e-06, fixed = true)),
                    axillary_L80(q_in(start = 2.1160115e-06, fixed = true), volume(start = 2.3365046e-06, fixed = true)),
                    brachial_L82(q_in(start = 2.519172e-06, fixed = true), volume(start = 1.15349e-06, fixed = true)),
                    ulnar_T2_L84(q_in(start = 1.3866913e-06, fixed = true), volume(start = 2.0829354e-07, fixed = true)),
                    ulnar_T2_L90(volume(start = 6.018713e-05, fixed = true)),
                    radial_T1_L92(volume(start = 5.219178e-05, fixed = true)),
                    common_carotid_R6_A(q_in(start = 5.414467e-07, fixed = true), volume(start = 3.0722165e-06, fixed = true)),
                    common_carotid_R6_B(q_in(start = 1.6466822e-06, fixed = true), volume(start = 2.6402852e-06, fixed = true)),
                    common_carotid_R6_C(q_in(start = 2.5935403e-06, fixed = true), volume(start = 1.9995377e-06, fixed = true)),
                    internal_carotid_R8_A(q_in(start = 1.5525253e-06, fixed = true), volume(start = 1.0611803e-06, fixed = true)),
                    internal_carotid_R8_B(q_in(start = 1.669214e-06, fixed = true), volume(start = 6.816792e-07, fixed = true)),
                    internal_carotid_R8_C(volume(start = 7.149893e-05, fixed = true)),
                    external_carotid_T2_R26(volume(start = 7.170783e-05, fixed = true)),
                    common_carotid_L48_A(q_in(start = -6.141678e-07, fixed = true), volume(start = 3.3297435e-06, fixed = true)),
                    common_carotid_L48_B(q_in(start = 5.534364e-07, fixed = true), volume(start = 2.9412283e-06, fixed = true)),
                    common_carotid_L48_C(q_in(start = 1.5976489e-06, fixed = true), volume(start = 2.6248806e-06, fixed = true)),
                    common_carotid_L48_D(q_in(start = 2.5339357e-06, fixed = true), volume(start = 2.145889e-06, fixed = true)),
                    internal_carotid_L50_A(q_in(start = 1.5492935e-06, fixed = true), volume(start = 1.0611327e-06, fixed = true)),
                    internal_carotid_L50_B(q_in(start = 1.6673133e-06, fixed = true), volume(start = 6.8165207e-07, fixed = true)),
                    internal_carotid_L50_C(volume(start = 7.1501076e-05, fixed = true)),
                    external_carotid_T2_L62(volume(start = 7.170576e-05, fixed = true)),
                    vertebral_L2(volume(start = 6.593643e-05, fixed = true)),
                    vertebral_R272(volume(start = 6.594132e-05, fixed = true)),
                    superior_vena_cava_C2(volume(start = 2.349646e-06, fixed = true)),
                    superior_vena_cava_C88(volume(start = 4.0495393e-06, fixed = true)),
                    inferior_vena_cava_C8(volume(start = 3.5247192e-06, fixed = true)),
                    hepatic_vein_T1_C10(volume(start = 1.3821171e-06, fixed = true)),
                    inferior_vena_cava_C12(volume(start = 9.570287e-06, fixed = true)),
                    inferior_vena_cava_C16(volume(start = 7.5307207e-06, fixed = true)),
                    renal_vein_T1_R18(volume(start = 2.2198908e-06, fixed = true)),
                    inferior_vena_cava_C20(volume(start = 5.2541407e-07, fixed = true)),
                    renal_vein_T1_L22(volume(start = 1.9619556e-06, fixed = true)),
                    inferior_vena_cava_C24(volume(start = 2.0981015e-05, fixed = true)),
                    common_iliac_vein_L56(volume(start = 5.1566294e-06, fixed = true)),
                    common_iliac_vein_R26(volume(start = 4.739145e-06, fixed = true)),
                    external_iliac_vein_R28(volume(start = 6.9132915e-07, fixed = true)),
                    internal_iliac_vein_T1_R30(volume(start = 2.960323e-06, fixed = true)),
                    external_iliac_vein_R32(volume(start = 8.033378e-06, fixed = true)),
                    femoral_vein_R34(volume(start = 3.492642e-07, fixed = true)),
                    femoral_vein_R38(volume(start = 2.7714716e-06, fixed = true)),
                    profunda_femoris_vein_T2_R40(volume(start = 7.766037e-06, fixed = true)),
                    femoral_vein_R42(volume(start = 1.9658151e-05, fixed = true)),
                    femoral_vein_R46(volume(start = 1.0827324e-06, fixed = true)),
                    popliteal_vein_R48(volume(start = 4.4213325e-06, fixed = true)),
                    anterior_tibial_vein_T4_R50(volume(start = 1.6728767e-06, fixed = true)),
                    popliteal_vein_R52(volume(start = 9.838703e-07, fixed = true)),
                    posterior_tibial_vein_T6_R54(volume(start = 2.0523348e-06, fixed = true)),
                    external_iliac_vein_L58(volume(start = 6.92281e-07, fixed = true)),
                    internal_iliac_vein_T1_L60(volume(start = 3.0454132e-06, fixed = true)),
                    external_iliac_vein_L62(volume(start = 7.887734e-06, fixed = true)),
                    femoral_vein_L64(volume(start = 4.0837014e-07, fixed = true)),
                    femoral_vein_L68(volume(start = 2.7718672e-06, fixed = true)),
                    profunda_femoris_vein_T2_L70(volume(start = 7.7671275e-06, fixed = true)),
                    femoral_vein_L72(volume(start = 1.9660982e-05, fixed = true)),
                    femoral_vein_L76(volume(start = 1.0828815e-06, fixed = true)),
                    popliteal_vein_L78(volume(start = 4.4219705e-06, fixed = true)),
                    anterior_tibial_vein_T4_L80(volume(start = 1.6729833e-06, fixed = true)),
                    popliteal_vein_L82(volume(start = 9.840184e-07, fixed = true)),
                    posterior_tibial_vein_T6_L84(volume(start = 2.0526238e-06, fixed = true)),
                    brachiocephalic_vein_R90(volume(start = 4.7626113e-06, fixed = true)),
                    brachiocephalic_vein_L124(volume(start = 8.929497e-06, fixed = true)),
                    vertebral_vein_R92(volume(start = 3.0442625e-06, fixed = true)),
                    brachiocephalic_vein_R94(volume(start = 1.0797398e-06, fixed = true)),
                    subclavian_vein_R96(volume(start = 5.250738e-07, fixed = true)),
                    internal_jugular_vein_R122(volume(start = 2.0761512e-05, fixed = true)),
                    external_jugular_vein_R98(volume(start = 1.491042e-06, fixed = true)),
                    subclavian_vein_R100(volume(start = 2.1482047e-06, fixed = true)),
                    axillary_vein_R102(volume(start = 7.5574403e-06, fixed = true)),
                    brachial_vein_R104(volume(start = 1.5854067e-06, fixed = true)),
                    brachial_vein_R114(volume(start = 1.4408736e-06, fixed = true)),
                    brachial_vein_R108(volume(start = 2.2094642e-07, fixed = true)),
                    ulnar_vein_T7_R110(volume(start = 2.0743273e-06, fixed = true)),
                    brachial_vein_R118(volume(start = 1.4019727e-07, fixed = true)),
                    radial_vein_T3_R120(volume(start = 1.4504806e-06, fixed = true)),
                    vertebral_vein_L126(volume(start = 2.844439e-06, fixed = true)),
                    brachiocephalic_vein_L128(volume(start = 5.4590174e-07, fixed = true)),
                    subclavian_vein_L130(volume(start = 4.6714425e-07, fixed = true)),
                    internal_jugular_vein_L156(volume(start = 1.2613514e-05, fixed = true)),
                    external_jugular_vein_L132(volume(start = 1.4619573e-06, fixed = true)),
                    subclavian_vein_L134(volume(start = 2.0945354e-06, fixed = true)),
                    axillary_vein_L136(volume(start = 7.646973e-06, fixed = true)),
                    brachial_vein_L138(volume(start = 1.5862393e-06, fixed = true)),
                    brachial_vein_L148(volume(start = 1.4495672e-06, fixed = true)),
                    brachial_vein_L142(volume(start = 2.21063e-07, fixed = true)),
                    ulnar_vein_T7_L144(volume(start = 2.0750651e-06, fixed = true)),
                    brachial_vein_L152(volume(start = 1.4111909e-07, fixed = true)),
                    radial_vein_T3_L154(volume(start = 1.4744237e-06, fixed = true)),
                    mesenteric_artery(q_in(start = 5.6178865e-06, fixed = true), volume(start = 6.11247e-06, fixed = true)),
                    splanchnic_tissue(volume(start = 0.00025765123, fixed = true)),
                    splanchnic_vein(volume(start = 1.1531514e-05, fixed = true)),
                    coronary_arteries(q_in(start = 2.1540886e-06, fixed = true), volume(start = 3.59634e-08, fixed = true)),
                    cardiac_tissue(volume(start = 0.000115643015, fixed = true)),
                    coronary_veins(volume(start = 3.646531e-08, fixed = true)),
                    brachial_L82_HeartLevel(q_in(start = 2.3882185e-06, fixed = true), volume(start = 2.3169812e-06, fixed = true))),
                  heartComponent(
                    tricuspidValve(open(start = true, fixed = true)),
                    pulmonaryValve(open(start = false, fixed = true)),
                    mitralValve(open(start = true, fixed = true)),
                    aorticValve(open(start = false, fixed = true)),
                    ventricles(
                      LV_wall(ym(start = 3.4805632, fixed = true), SL(start = 1.9729362, fixed = true), xm(start = -4.762715, fixed = false)),
                      SEP_wall(SL(start = 1.9974529, fixed = true), xm(start = 1.9856914, fixed = false)),
                      RV_wall(SL(start = 1.9732813, fixed = true), xm(start = 5.636706, fixed = false)), V_LV(start = 0.00013364125, fixed = true), V_RV(start = 0.00013165307, fixed = true)),
                    ra(volume(start = 1.1497501e-05, fixed = true)),
                    la(volume(start = 4.7752277e-05, fixed = true)),
                    sa_node(cardiac_cycle(start = 0.018870693, fixed = true))),
                  pulmonaryComponent(
                    c_pa(volume(start = 5.8772443e-05, fixed = true)),
                    c_pv(volume(start = 0.0003409318, fixed = true))));
            end imp_arSt_ss;

            model imp_avRe
              extends imp_base(heartComponent(aorticValve(_Goff=3E-08)));
            end imp_avRe;

            model imp_avRe_ss
            "Steady state initialization from 2020-12-29 21:55:59.012166 at time 253.0"
              extends imp_avRe(
                  SystemicComponent(
                    baroreflex_system(
                      baroreflex(phi(start = 0.16757183, fixed = true)),
                      baroreceptor_aortic(epsilon(start = 1.3320701, fixed = true), s(start = 0.65012145, fixed = true)),
                      baroreceptor_carotid(epsilon(start = 1.103226, fixed = true), s(start = 0.79037714, fixed = true))),
                    ascending_aorta_A(q(start = -7.3818075e-05, fixed = true), vol1(start = 2.4189142e-06, fixed = true), vol2(start = 2.414492e-06, fixed = true)),
                    ascending_aorta_B(q_in(start = -6.7408044e-05, fixed = true), volume(start = 1.52061875e-05, fixed = true)),
                    ascending_aorta_C(q_in(start = -5.5794437e-05, fixed = true), volume(start = 1.40863895e-05, fixed = true)),
                    ascending_aorta_D(q_in(start = -4.4647764e-05, fixed = true), volume(start = 1.2886119e-05, fixed = true)),
                    aortic_arch_C2(q_in(start = -3.4638433e-05, fixed = true), volume(start = 1.1813967e-05, fixed = true)),
                    brachiocephalic_trunk_C4(q_in(start = -1.6764128e-05, fixed = true), volume(start = 8.36213e-06, fixed = true)),
                    aortic_arch_C46(q_in(start = -8.9024925e-06, fixed = true), volume(start = 7.0181272e-06, fixed = true)),
                    aortic_arch_C64(q_in(start = 6.869297e-06, fixed = true), volume(start = 4.8270326e-06, fixed = true)),
                    aortic_arch_C94(q_in(start = 1.4624259e-05, fixed = true), volume(start = 2.6675087e-05, fixed = true)),
                    thoracic_aorta_C96(q_in(start = 3.137344e-05, fixed = true), volume(start = 4.8263205e-06, fixed = true)),
                    thoracic_aorta_C100(q_in(start = 3.422136e-05, fixed = true), volume(start = 3.720615e-06, fixed = true)),
                    thoracic_aorta_C104(q_in(start = 3.632285e-05, fixed = true), volume(start = 7.0389433e-06, fixed = true)),
                    thoracic_aorta_C108(q_in(start = 3.9938175e-05, fixed = true), volume(start = 2.317241e-06, fixed = true)),
                    thoracic_aorta_C112(q_in(start = 4.1084335e-05, fixed = true), volume(start = 3.9572555e-05, fixed = true)),
                    abdominal_aorta_C114(q_in(start = 3.9460607e-05, fixed = true), volume(start = 8.244755e-07, fixed = true)),
                    abdominal_aorta_C136(q_in(start = 3.6274727e-05, fixed = true), volume(start = 3.4738077e-06, fixed = true)),
                    abdominal_aorta_C164(q_in(start = 3.3265344e-05, fixed = true), volume(start = 1.0333196e-06, fixed = true)),
                    abdominal_aorta_C176(q_in(start = 3.025105e-05, fixed = true), volume(start = 2.7881347e-06, fixed = true)),
                    abdominal_aorta_C188(q_in(start = 2.694116e-05, fixed = true), volume(start = 1.1331741e-05, fixed = true)),
                    abdominal_aorta_C192(q_in(start = 2.3654404e-05, fixed = true), volume(start = 7.162293e-06, fixed = true)),
                    celiac_trunk_C116(volume(start = 0.00034239716, fixed = true)),
                    renal_L166(volume(start = 0.00030928865, fixed = true)),
                    renal_R178(volume(start = 0.00030651345, fixed = true)),
                    common_iliac_R216(q_in(start = 1.0638374e-05, fixed = true), volume(start = 6.2092395e-06, fixed = true)),
                    internal_iliac_T1_R218(volume(start = 0.00016828466, fixed = true)),
                    external_iliac_R220(q_in(start = 5.9365752e-06, fixed = true), volume(start = 4.120243e-06, fixed = true)),
                    femoral_R222(q_in(start = 4.912814e-06, fixed = true), volume(start = 1.1835556e-06, fixed = true)),
                    profundus_T2_R224(volume(start = 0.00019295952, fixed = true)),
                    femoral_R226(q_in(start = 2.201239e-06, fixed = true), volume(start = 1.0079696e-05, fixed = true)),
                    popliteal_R228(q_in(start = 1.1151135e-06, fixed = true), volume(start = 3.1283034e-06, fixed = true)),
                    anterior_tibial_T3_R230(volume(start = 2.5325407e-05, fixed = true)),
                    popliteal_R232(q_in(start = 4.6872145e-07, fixed = true), volume(start = 1.6867807e-07, fixed = true)),
                    tibiofibular_trunk_R234(q_in(start = 4.6101414e-07, fixed = true), volume(start = 6.859674e-07, fixed = true)),
                    posterior_tibial_T4_R236(volume(start = 2.7621592e-05, fixed = true)),
                    common_iliac_L194(q_in(start = 1.0325266e-05, fixed = true), volume(start = 5.9389768e-06, fixed = true)),
                    internal_iliac_T1_L196(volume(start = 0.00016828648, fixed = true)),
                    external_iliac_L198(q_in(start = 5.8000064e-06, fixed = true), volume(start = 4.1195262e-06, fixed = true)),
                    femoral_L200(q_in(start = 4.7971494e-06, fixed = true), volume(start = 1.1833721e-06, fixed = true)),
                    profundus_T2_L202(volume(start = 0.00019296147, fixed = true)),
                    femoral_L204(q_in(start = 2.0969128e-06, fixed = true), volume(start = 1.007987e-05, fixed = true)),
                    popliteal_L206(q_in(start = 1.0879515e-06, fixed = true), volume(start = 3.1284503e-06, fixed = true)),
                    anterior_tibial_T3_L208(volume(start = 2.532579e-05, fixed = true)),
                    popliteal_L210(q_in(start = 4.6524158e-07, fixed = true), volume(start = 1.6868202e-07, fixed = true)),
                    tibiofibular_trunk_L212(q_in(start = 4.582035e-07, fixed = true), volume(start = 6.860053e-07, fixed = true)),
                    posterior_tibial_T4_L214(volume(start = 2.7622036e-05, fixed = true)),
                    subclavian_R28(q_in(start = -3.706251e-06, fixed = true), volume(start = 1.3311679e-06, fixed = true)),
                    subclavian_R30(q_in(start = -3.2659264e-06, fixed = true), volume(start = 1.8184707e-06, fixed = true)),
                    axillary_R32(q_in(start = -2.162287e-06, fixed = true), volume(start = 2.2243473e-06, fixed = true)),
                    brachial_R34(q_in(start = -9.11163e-07, fixed = true), volume(start = 3.3848426e-06, fixed = true)),
                    ulnar_T2_R36(q_in(start = 4.7601432e-07, fixed = true), volume(start = 2.0602695e-07, fixed = true)),
                    ulnar_T2_R42(volume(start = 5.798794e-05, fixed = true)),
                    radial_T1_R44(volume(start = 4.7546804e-05, fixed = true)),
                    subclavian_L66(q_in(start = -4.2460524e-06, fixed = true), volume(start = 3.2266328e-06, fixed = true)),
                    subclavian_L78(q_in(start = -2.7845997e-06, fixed = true), volume(start = 1.3777111e-06, fixed = true)),
                    axillary_L80(q_in(start = -2.034735e-06, fixed = true), volume(start = 2.2280599e-06, fixed = true)),
                    brachial_L82(q_in(start = 3.214934e-07, fixed = true), volume(start = 1.1215301e-06, fixed = true)),
                    ulnar_T2_L84(q_in(start = 4.5969537e-07, fixed = true), volume(start = 2.0555574e-07, fixed = true)),
                    ulnar_T2_L90(volume(start = 5.7955684e-05, fixed = true)),
                    radial_T1_L92(volume(start = 5.0381783e-05, fixed = true)),
                    common_carotid_R6_A(q_in(start = -6.9858456e-06, fixed = true), volume(start = 2.7002557e-06, fixed = true)),
                    common_carotid_R6_B(q_in(start = -4.035563e-06, fixed = true), volume(start = 2.3226835e-06, fixed = true)),
                    common_carotid_R6_C(q_in(start = -1.4813181e-06, fixed = true), volume(start = 1.7661653e-06, fixed = true)),
                    internal_carotid_R8_A(q_in(start = -4.4742926e-08, fixed = true), volume(start = 1.022336e-06, fixed = true)),
                    internal_carotid_R8_B(q_in(start = 2.7696117e-07, fixed = true), volume(start = 6.5913014e-07, fixed = true)),
                    internal_carotid_R8_C(volume(start = 6.88845e-05, fixed = true)),
                    external_carotid_T2_R26(volume(start = 6.913013e-05, fixed = true)),
                    common_carotid_L48_A(q_in(start = -1.056406e-05, fixed = true), volume(start = 2.9348769e-06, fixed = true)),
                    common_carotid_L48_B(q_in(start = -7.4699756e-06, fixed = true), volume(start = 2.5869044e-06, fixed = true)),
                    common_carotid_L48_C(q_in(start = -4.5724987e-06, fixed = true), volume(start = 2.3067207e-06, fixed = true)),
                    common_carotid_L48_D(q_in(start = -1.8827092e-06, fixed = true), volume(start = 1.8899709e-06, fixed = true)),
                    internal_carotid_L50_A(q_in(start = -1.1484559e-07, fixed = true), volume(start = 1.021155e-06, fixed = true)),
                    internal_carotid_L50_B(q_in(start = 2.4089434e-07, fixed = true), volume(start = 6.5843636e-07, fixed = true)),
                    internal_carotid_L50_C(volume(start = 6.888818e-05, fixed = true)),
                    external_carotid_T2_L62(volume(start = 6.912891e-05, fixed = true)),
                    vertebral_L2(volume(start = 6.355881e-05, fixed = true)),
                    vertebral_R272(volume(start = 6.356479e-05, fixed = true)),
                    superior_vena_cava_C2(volume(start = 2.2396982e-06, fixed = true)),
                    superior_vena_cava_C88(volume(start = 3.859797e-06, fixed = true)),
                    inferior_vena_cava_C8(volume(start = 3.3594706e-06, fixed = true)),
                    hepatic_vein_T1_C10(volume(start = 1.3172539e-06, fixed = true)),
                    inferior_vena_cava_C12(volume(start = 9.118591e-06, fixed = true)),
                    inferior_vena_cava_C16(volume(start = 7.173229e-06, fixed = true)),
                    renal_vein_T1_R18(volume(start = 2.1141304e-06, fixed = true)),
                    inferior_vena_cava_C20(volume(start = 5.004636e-07, fixed = true)),
                    renal_vein_T1_L22(volume(start = 1.868286e-06, fixed = true)),
                    inferior_vena_cava_C24(volume(start = 1.9973306e-05, fixed = true)),
                    common_iliac_vein_L56(volume(start = 4.9053456e-06, fixed = true)),
                    common_iliac_vein_R26(volume(start = 4.5084844e-06, fixed = true)),
                    external_iliac_vein_R28(volume(start = 6.576181e-07, fixed = true)),
                    internal_iliac_vein_T1_R30(volume(start = 2.8146553e-06, fixed = true)),
                    external_iliac_vein_R32(volume(start = 7.635341e-06, fixed = true)),
                    femoral_vein_R34(volume(start = 3.3193868e-07, fixed = true)),
                    femoral_vein_R38(volume(start = 2.6327255e-06, fixed = true)),
                    profunda_femoris_vein_T2_R40(volume(start = 7.336657e-06, fixed = true)),
                    femoral_vein_R42(volume(start = 1.8644381e-05, fixed = true)),
                    femoral_vein_R46(volume(start = 1.0268543e-06, fixed = true)),
                    popliteal_vein_R48(volume(start = 4.1860517e-06, fixed = true)),
                    anterior_tibial_vein_T4_R50(volume(start = 1.3580134e-06, fixed = true)),
                    popliteal_vein_R52(volume(start = 9.3135395e-07, fixed = true)),
                    posterior_tibial_vein_T6_R54(volume(start = 1.868323e-06, fixed = true)),
                    external_iliac_vein_L58(volume(start = 6.5848263e-07, fixed = true)),
                    internal_iliac_vein_T1_L60(volume(start = 2.8953355e-06, fixed = true)),
                    external_iliac_vein_L62(volume(start = 7.4965637e-06, fixed = true)),
                    femoral_vein_L64(volume(start = 3.8809054e-07, fixed = true)),
                    femoral_vein_L68(volume(start = 2.6329512e-06, fixed = true)),
                    profunda_femoris_vein_T2_L70(volume(start = 7.337258e-06, fixed = true)),
                    femoral_vein_L72(volume(start = 1.8645995e-05, fixed = true)),
                    femoral_vein_L76(volume(start = 1.0269368e-06, fixed = true)),
                    popliteal_vein_L78(volume(start = 4.186415e-06, fixed = true)),
                    anterior_tibial_vein_T4_L80(volume(start = 1.358075e-06, fixed = true)),
                    popliteal_vein_L82(volume(start = 9.314405e-07, fixed = true)),
                    posterior_tibial_vein_T6_L84(volume(start = 1.8684832e-06, fixed = true)),
                    brachiocephalic_vein_R90(volume(start = 4.538889e-06, fixed = true)),
                    brachiocephalic_vein_L124(volume(start = 8.508279e-06, fixed = true)),
                    vertebral_vein_R92(volume(start = 2.878661e-06, fixed = true)),
                    brachiocephalic_vein_R94(volume(start = 1.0289957e-06, fixed = true)),
                    subclavian_vein_R96(volume(start = 5.003696e-07, fixed = true)),
                    internal_jugular_vein_R122(volume(start = 1.978054e-05, fixed = true)),
                    external_jugular_vein_R98(volume(start = 1.4055558e-06, fixed = true)),
                    subclavian_vein_R100(volume(start = 2.0468115e-06, fixed = true)),
                    axillary_vein_R102(volume(start = 7.1970157e-06, fixed = true)),
                    brachial_vein_R104(volume(start = 1.4577556e-06, fixed = true)),
                    brachial_vein_R114(volume(start = 1.3169629e-06, fixed = true)),
                    brachial_vein_R108(volume(start = 2.0221236e-07, fixed = true)),
                    ulnar_vein_T7_R110(volume(start = 1.775459e-06, fixed = true)),
                    brachial_vein_R118(volume(start = 1.2766415e-07, fixed = true)),
                    radial_vein_T3_R120(volume(start = 1.1758169e-06, fixed = true)),
                    vertebral_vein_L126(volume(start = 2.6908401e-06, fixed = true)),
                    brachiocephalic_vein_L128(volume(start = 5.201427e-07, fixed = true)),
                    subclavian_vein_L130(volume(start = 4.4507945e-07, fixed = true)),
                    internal_jugular_vein_L156(volume(start = 1.2012749e-05, fixed = true)),
                    external_jugular_vein_L132(volume(start = 1.3781975e-06, fixed = true)),
                    subclavian_vein_L134(volume(start = 1.9952918e-06, fixed = true)),
                    axillary_vein_L136(volume(start = 7.2807566e-06, fixed = true)),
                    brachial_vein_L138(volume(start = 1.4581785e-06, fixed = true)),
                    brachial_vein_L148(volume(start = 1.3218397e-06, fixed = true)),
                    brachial_vein_L142(volume(start = 2.0227127e-07, fixed = true)),
                    ulnar_vein_T7_L144(volume(start = 1.775722e-06, fixed = true)),
                    brachial_vein_L152(volume(start = 1.2817735e-07, fixed = true)),
                    radial_vein_T3_L154(volume(start = 1.1912063e-06, fixed = true)),
                    mesenteric_artery(q_in(start = 2.6824766e-06, fixed = true), volume(start = 5.3205927e-06, fixed = true)),
                    splanchnic_tissue(volume(start = 0.00024831685, fixed = true)),
                    splanchnic_vein(volume(start = 1.09846005e-05, fixed = true)),
                    coronary_arteries(q_in(start = 5.893933e-07, fixed = true), volume(start = 3.3130878e-08, fixed = true)),
                    cardiac_tissue(volume(start = 0.00011125262, fixed = true)),
                    coronary_veins(volume(start = 2.997192e-08, fixed = true)),
                    brachial_L82_HeartLevel(q_in(start = -8.314693e-07, fixed = true), volume(start = 2.2445367e-06, fixed = true))),
                  heartComponent(
                    tricuspidValve(open(start = true, fixed = true)),
                    pulmonaryValve(open(start = false, fixed = true)),
                    mitralValve(open(start = false, fixed = true)),
                    aorticValve(open(start = false, fixed = true)),
                    ventricles(
                      LV_wall(ym(start = 3.9143994, fixed = true), SL(start = 2.305412, fixed = true), xm(start = -5.6037717, fixed = false)),
                      SEP_wall(SL(start = 2.3106086, fixed = true), xm(start = 2.4303186, fixed = false)),
                      RV_wall(SL(start = 1.9181752, fixed = true), xm(start = 5.110908, fixed = false)), V_LV(start = 0.00023758177, fixed = true), V_RV(start = 9.9409066e-05, fixed = true)),
                    ra(volume(start = 1.0022613e-05, fixed = true)),
                    la(volume(start = 6.365515e-05, fixed = true)),
                    sa_node(cardiac_cycle(start = 0.8978792, fixed = true))),
                  pulmonaryComponent(
                    c_pa(volume(start = 6.597261e-05, fixed = true)),
                    c_pv(volume(start = 0.00038607666, fixed = true))));
            end imp_avRe_ss;

            model imp_avSt
              extends imp_base(heartComponent(aorticValve(_Ron(
                        displayUnit="(mmHg.min)/l") = 10879106.813064)));

            Physiolibrary.Types.Pressure p_in(start = 13e3);
            Physiolibrary.Types.Pressure p_out(start = 13e3);
            Physiolibrary.Types.Pressure dp_aortic = p_in - p_out;
            parameter Modelica.Units.SI.Time tau_avg=10;
            equation
                // integrate only during open valve
                if heartComponent.aorticValve.open then
                der(p_in)*tau_avg = heartComponent.aorticValve.q_in.pressure - p_in;
                der(p_out)*tau_avg = heartComponent.aorticValve.q_out.pressure - p_out;
                else
                  der(p_in) = 0;
                  der(p_out) = 0;
                end if;
            end imp_avSt;

            model imp_avSt_ss
            "Steady state initialization from 2020-12-29 22:03:07.886767 at time 299.82"
              extends imp_avSt(
                  SystemicComponent(
                    baroreflex_system(
                      baroreflex(phi(start = 0.26419958, fixed = true)),
                      baroreceptor_aortic(epsilon(start = 1.5612273, fixed = true), s(start = 0.80557275, fixed = true)),
                      baroreceptor_carotid(epsilon(start = 1.1832228, fixed = true), s(start = 0.88544905, fixed = true))),
                    ascending_aorta_A(q(start = 2.5058348e-06, fixed = true), vol1(start = 8.344596e-06, fixed = true), vol2(start = 8.344082e-06, fixed = true)),
                    ascending_aorta_B(q_in(start = 5.030426e-06, fixed = true), volume(start = 2.5393738e-05, fixed = true)),
                    ascending_aorta_C(q_in(start = 6.987516e-06, fixed = true), volume(start = 2.3484545e-05, fixed = true)),
                    ascending_aorta_D(q_in(start = 1.13964425e-05, fixed = true), volume(start = 2.1436614e-05, fixed = true)),
                    aortic_arch_C2(q_in(start = 1.5447753e-05, fixed = true), volume(start = 1.9606518e-05, fixed = true)),
                    brachiocephalic_trunk_C4(q_in(start = 2.389152e-06, fixed = true), volume(start = 1.334522e-05, fixed = true)),
                    aortic_arch_C46(q_in(start = 1.6801863e-05, fixed = true), volume(start = 1.161528e-05, fixed = true)),
                    aortic_arch_C64(q_in(start = 1.7420149e-05, fixed = true), volume(start = 7.972709e-06, fixed = true)),
                    aortic_arch_C94(q_in(start = 1.5842797e-05, fixed = true), volume(start = 4.36876e-05, fixed = true)),
                    thoracic_aorta_C96(q_in(start = 2.499475e-05, fixed = true), volume(start = 7.8452595e-06, fixed = true)),
                    thoracic_aorta_C100(q_in(start = 2.6667152e-05, fixed = true), volume(start = 6.032697e-06, fixed = true)),
                    thoracic_aorta_C104(q_in(start = 2.7979333e-05, fixed = true), volume(start = 1.1359616e-05, fixed = true)),
                    thoracic_aorta_C108(q_in(start = 3.055539e-05, fixed = true), volume(start = 3.7310135e-06, fixed = true)),
                    thoracic_aorta_C112(q_in(start = 3.1413132e-05, fixed = true), volume(start = 6.069352e-05, fixed = true)),
                    abdominal_aorta_C114(q_in(start = 5.1864696e-05, fixed = true), volume(start = 1.2543936e-06, fixed = true)),
                    abdominal_aorta_C136(q_in(start = 4.1857333e-05, fixed = true), volume(start = 5.260174e-06, fixed = true)),
                    abdominal_aorta_C164(q_in(start = 3.729783e-05, fixed = true), volume(start = 1.5609712e-06, fixed = true)),
                    abdominal_aorta_C176(q_in(start = 2.845579e-05, fixed = true), volume(start = 4.193831e-06, fixed = true)),
                    abdominal_aorta_C188(q_in(start = 2.0634187e-05, fixed = true), volume(start = 1.6709444e-05, fixed = true)),
                    abdominal_aorta_C192(q_in(start = 2.6572869e-05, fixed = true), volume(start = 1.0363566e-05, fixed = true)),
                    celiac_trunk_C116(volume(start = 0.00034605066, fixed = true)),
                    renal_L166(volume(start = 0.00031258902, fixed = true)),
                    renal_R178(volume(start = 0.0003097842, fixed = true)),
                    common_iliac_R216(q_in(start = 1.502021e-05, fixed = true), volume(start = 8.584074e-06, fixed = true)),
                    internal_iliac_T1_R218(volume(start = 0.0001701042, fixed = true)),
                    external_iliac_R220(q_in(start = 1.265608e-05, fixed = true), volume(start = 4.891175e-06, fixed = true)),
                    femoral_R222(q_in(start = 1.3102774e-05, fixed = true), volume(start = 1.3986787e-06, fixed = true)),
                    profundus_T2_R224(volume(start = 0.0001950657, fixed = true)),
                    femoral_R226(q_in(start = 7.5418125e-06, fixed = true), volume(start = 1.1580388e-05, fixed = true)),
                    popliteal_R228(q_in(start = 3.2454736e-06, fixed = true), volume(start = 3.554339e-06, fixed = true)),
                    anterior_tibial_T3_R230(volume(start = 2.5597426e-05, fixed = true)),
                    popliteal_R232(q_in(start = 1.033068e-06, fixed = true), volume(start = 1.8075882e-07, fixed = true)),
                    tibiofibular_trunk_R234(q_in(start = 9.905999e-07, fixed = true), volume(start = 7.348841e-07, fixed = true)),
                    posterior_tibial_T4_R236(volume(start = 2.7922191e-05, fixed = true)),
                    common_iliac_L194(q_in(start = 1.5141948e-05, fixed = true), volume(start = 8.211538e-06, fixed = true)),
                    internal_iliac_T1_L196(volume(start = 0.00017010565, fixed = true)),
                    external_iliac_L198(q_in(start = 1.2644105e-05, fixed = true), volume(start = 4.8921697e-06, fixed = true)),
                    femoral_L200(q_in(start = 1.3085697e-05, fixed = true), volume(start = 1.3989653e-06, fixed = true)),
                    profundus_T2_L202(volume(start = 0.00019506678, fixed = true)),
                    femoral_L204(q_in(start = 7.5177954e-06, fixed = true), volume(start = 1.1583147e-05, fixed = true)),
                    popliteal_L206(q_in(start = 3.2390747e-06, fixed = true), volume(start = 3.555127e-06, fixed = true)),
                    anterior_tibial_T3_L208(volume(start = 2.559756e-05, fixed = true)),
                    popliteal_L210(q_in(start = 1.0329201e-06, fixed = true), volume(start = 1.8078092e-07, fixed = true)),
                    tibiofibular_trunk_L212(q_in(start = 9.906518e-07, fixed = true), volume(start = 7.349963e-07, fixed = true)),
                    posterior_tibial_T4_L214(volume(start = 2.7922355e-05, fixed = true)),
                    subclavian_R28(q_in(start = 3.5333308e-06, fixed = true), volume(start = 2.0448463e-06, fixed = true)),
                    subclavian_R30(q_in(start = 1.8231343e-06, fixed = true), volume(start = 2.681836e-06, fixed = true)),
                    axillary_R32(q_in(start = 2.2345373e-06, fixed = true), volume(start = 3.0684769e-06, fixed = true)),
                    brachial_R34(q_in(start = 2.5945667e-06, fixed = true), volume(start = 4.4528024e-06, fixed = true)),
                    ulnar_T2_R36(q_in(start = 1.7006256e-06, fixed = true), volume(start = 2.3733502e-07, fixed = true)),
                    ulnar_T2_R42(volume(start = 5.8677684e-05, fixed = true)),
                    radial_T1_R44(volume(start = 4.809243e-05, fixed = true)),
                    subclavian_L66(q_in(start = 3.122423e-06, fixed = true), volume(start = 4.851381e-06, fixed = true)),
                    subclavian_L78(q_in(start = 1.8392781e-06, fixed = true), volume(start = 1.9846962e-06, fixed = true)),
                    axillary_L80(q_in(start = 2.1162452e-06, fixed = true), volume(start = 3.0569622e-06, fixed = true)),
                    brachial_L82(q_in(start = 2.9281853e-06, fixed = true), volume(start = 1.4809441e-06, fixed = true)),
                    ulnar_T2_L84(q_in(start = 1.6893332e-06, fixed = true), volume(start = 2.3721871e-07, fixed = true)),
                    ulnar_T2_L90(volume(start = 5.8654055e-05, fixed = true)),
                    radial_T1_L92(volume(start = 5.0967024e-05, fixed = true)),
                    common_carotid_R6_A(q_in(start = 1.3062946e-06, fixed = true), volume(start = 5.0526714e-06, fixed = true)),
                    common_carotid_R6_B(q_in(start = 2.4999433e-06, fixed = true), volume(start = 4.317062e-06, fixed = true)),
                    common_carotid_R6_C(q_in(start = 3.5371388e-06, fixed = true), volume(start = 3.2277392e-06, fixed = true)),
                    internal_carotid_R8_A(q_in(start = 2.0517562e-06, fixed = true), volume(start = 1.2661793e-06, fixed = true)),
                    internal_carotid_R8_B(q_in(start = 2.1789479e-06, fixed = true), volume(start = 8.016099e-07, fixed = true)),
                    internal_carotid_R8_C(volume(start = 6.963685e-05, fixed = true)),
                    external_carotid_T2_R26(volume(start = 6.9874775e-05, fixed = true)),
                    common_carotid_L48_A(q_in(start = 1.6119718e-06, fixed = true), volume(start = 5.452077e-06, fixed = true)),
                    common_carotid_L48_B(q_in(start = 2.648711e-06, fixed = true), volume(start = 4.792322e-06, fixed = true)),
                    common_carotid_L48_C(q_in(start = 3.412999e-06, fixed = true), volume(start = 4.255995e-06, fixed = true)),
                    common_carotid_L48_D(q_in(start = 3.989223e-06, fixed = true), volume(start = 3.4457782e-06, fixed = true)),
                    internal_carotid_L50_A(q_in(start = 2.151118e-06, fixed = true), volume(start = 1.2641354e-06, fixed = true)),
                    internal_carotid_L50_B(q_in(start = 2.2081886e-06, fixed = true), volume(start = 8.0029497e-07, fixed = true)),
                    internal_carotid_L50_C(volume(start = 6.964012e-05, fixed = true)),
                    external_carotid_T2_L62(volume(start = 6.9873226e-05, fixed = true)),
                    vertebral_L2(volume(start = 6.424655e-05, fixed = true)),
                    vertebral_R272(volume(start = 6.4250744e-05, fixed = true)),
                    superior_vena_cava_C2(volume(start = 2.0190057e-06, fixed = true)),
                    superior_vena_cava_C88(volume(start = 3.4795523e-06, fixed = true)),
                    inferior_vena_cava_C8(volume(start = 3.0285164e-06, fixed = true)),
                    hepatic_vein_T1_C10(volume(start = 1.1874977e-06, fixed = true)),
                    inferior_vena_cava_C12(volume(start = 8.221148e-06, fixed = true)),
                    inferior_vena_cava_C16(volume(start = 6.467838e-06, fixed = true)),
                    renal_vein_T1_R18(volume(start = 1.9063035e-06, fixed = true)),
                    inferior_vena_cava_C20(volume(start = 4.5125225e-07, fixed = true)),
                    renal_vein_T1_L22(volume(start = 1.6846657e-06, fixed = true)),
                    inferior_vena_cava_C24(volume(start = 1.8012972e-05, fixed = true)),
                    common_iliac_vein_L56(volume(start = 4.4250137e-06, fixed = true)),
                    common_iliac_vein_R26(volume(start = 4.066925e-06, fixed = true)),
                    external_iliac_vein_R28(volume(start = 5.932303e-07, fixed = true)),
                    internal_iliac_vein_T1_R30(volume(start = 2.5393401e-06, fixed = true)),
                    external_iliac_vein_R32(volume(start = 6.8898735e-06, fixed = true)),
                    femoral_vein_R34(volume(start = 2.9953674e-07, fixed = true)),
                    femoral_vein_R38(volume(start = 2.3761404e-06, fixed = true)),
                    profunda_femoris_vein_T2_R40(volume(start = 6.631626e-06, fixed = true)),
                    femoral_vein_R42(volume(start = 1.6839162e-05, fixed = true)),
                    femoral_vein_R46(volume(start = 9.274451e-07, fixed = true)),
                    popliteal_vein_R48(volume(start = 3.7832826e-06, fixed = true)),
                    anterior_tibial_vein_T4_R50(volume(start = 1.3909333e-06, fixed = true)),
                    popliteal_vein_R52(volume(start = 8.4179516e-07, fixed = true)),
                    posterior_tibial_vein_T6_R54(volume(start = 1.7155799e-06, fixed = true)),
                    external_iliac_vein_L58(volume(start = 5.9402305e-07, fixed = true)),
                    internal_iliac_vein_T1_L60(volume(start = 2.6121952e-06, fixed = true)),
                    external_iliac_vein_L62(volume(start = 6.7647516e-06, fixed = true)),
                    femoral_vein_L64(volume(start = 3.5021418e-07, fixed = true)),
                    femoral_vein_L68(volume(start = 2.3763903e-06, fixed = true)),
                    profunda_femoris_vein_T2_L70(volume(start = 6.6323046e-06, fixed = true)),
                    femoral_vein_L72(volume(start = 1.6840946e-05, fixed = true)),
                    femoral_vein_L76(volume(start = 9.2753766e-07, fixed = true)),
                    popliteal_vein_L78(volume(start = 3.7836849e-06, fixed = true)),
                    anterior_tibial_vein_T4_L80(volume(start = 1.3910188e-06, fixed = true)),
                    popliteal_vein_L82(volume(start = 8.418899e-07, fixed = true)),
                    posterior_tibial_vein_T6_L84(volume(start = 1.7157756e-06, fixed = true)),
                    brachiocephalic_vein_R90(volume(start = 4.091942e-06, fixed = true)),
                    brachiocephalic_vein_L124(volume(start = 7.67105e-06, fixed = true)),
                    vertebral_vein_R92(volume(start = 2.6009247e-06, fixed = true)),
                    brachiocephalic_vein_R94(volume(start = 9.2767846e-07, fixed = true)),
                    subclavian_vein_R96(volume(start = 4.5111125e-07, fixed = true)),
                    internal_jugular_vein_R122(volume(start = 1.7834926e-05, fixed = true)),
                    external_jugular_vein_R98(volume(start = 1.2707261e-06, fixed = true)),
                    subclavian_vein_R100(volume(start = 1.8454383e-06, fixed = true)),
                    axillary_vein_R102(volume(start = 6.4903325e-06, fixed = true)),
                    brachial_vein_R104(volume(start = 1.3339586e-06, fixed = true)),
                    brachial_vein_R114(volume(start = 1.2079088e-06, fixed = true)),
                    brachial_vein_R108(volume(start = 1.8542592e-07, fixed = true)),
                    ulnar_vein_T7_R110(volume(start = 1.6921599e-06, fixed = true)),
                    brachial_vein_R118(volume(start = 1.1729282e-07, fixed = true)),
                    radial_vein_T3_R120(volume(start = 1.205644e-06, fixed = true)),
                    vertebral_vein_L126(volume(start = 2.4309086e-06, fixed = true)),
                    brachiocephalic_vein_L128(volume(start = 4.6896253e-07, fixed = true)),
                    subclavian_vein_L130(volume(start = 4.0129257e-07, fixed = true)),
                    internal_jugular_vein_L156(volume(start = 1.0832639e-05, fixed = true)),
                    external_jugular_vein_L132(volume(start = 1.2459938e-06, fixed = true)),
                    subclavian_vein_L134(volume(start = 1.7991135e-06, fixed = true)),
                    axillary_vein_L136(volume(start = 6.566354e-06, fixed = true)),
                    brachial_vein_L138(volume(start = 1.334548e-06, fixed = true)),
                    brachial_vein_L148(volume(start = 1.2137037e-06, fixed = true)),
                    brachial_vein_L142(volume(start = 1.8551005e-07, fixed = true)),
                    ulnar_vein_T7_L144(volume(start = 1.6929237e-06, fixed = true)),
                    brachial_vein_L152(volume(start = 1.1790848e-07, fixed = true)),
                    radial_vein_T3_L154(volume(start = 1.236435e-06, fixed = true)),
                    mesenteric_artery(q_in(start = 6.350247e-06, fixed = true), volume(start = 6.3512184e-06, fixed = true)),
                    splanchnic_tissue(volume(start = 0.00025098588, fixed = true)),
                    splanchnic_vein(volume(start = 9.904153e-06, fixed = true)),
                    coronary_arteries(q_in(start = 2.792708e-06, fixed = true), volume(start = 3.6836703e-08, fixed = true)),
                    cardiac_tissue(volume(start = 0.00011293962, fixed = true)),
                    coronary_veins(volume(start = 3.391292e-08, fixed = true)),
                    brachial_L82_HeartLevel(q_in(start = 2.5026036e-06, fixed = true), volume(start = 2.9829905e-06, fixed = true))),
                  heartComponent(
                    tricuspidValve(open(start = true, fixed = true)),
                    pulmonaryValve(open(start = false, fixed = true)),
                    mitralValve(open(start = true, fixed = true)),
                    aorticValve(open(start = false, fixed = true)),
                    ventricles(
                      LV_wall(ym(start = 3.4132285, fixed = true), SL(start = 1.9376333, fixed = true), xm(start = -4.6858945, fixed = false)),
                      SEP_wall(SL(start = 1.9653507, fixed = true), xm(start = 1.9751972, fixed = false)),
                      RV_wall(SL(start = 1.8940938, fixed = true), xm(start = 5.3701267, fixed = false)), V_LV(start = 0.00012436486, fixed = true), V_RV(start = 0.0001116841, fixed = true)),
                    ra(volume(start = 1.0647456e-05, fixed = true)),
                    la(volume(start = 4.688662e-05, fixed = true)),
                    sa_node(cardiac_cycle(start = 0.93316317, fixed = true))),
                  pulmonaryComponent(
                    c_pa(volume(start = 6.0211845e-05, fixed = true)),
                    c_pv(volume(start = 0.00034601512, fixed = true))));
            end imp_avSt_ss;

            model imp_hemr "A simple bleeding experiment"
              extends imp_base;
              Physiolibrary.Hydraulic.Components.Pump pump(useSolutionFlowInput=true,
                  SolutionFlow(displayUnit="m3/s") = 1.6666666666667e-05)
                annotation (Placement(transformation(extent={{48,-98},{68,-78}})));
              Physiolibrary.Hydraulic.Components.ElasticVessel volume_bleeded
                "A cut vein reservoir"
                annotation (Placement(transformation(extent={{80,-98},{100,-78}})));
              replaceable Modelica.Blocks.Sources.Ramp bleeding_ramp(
              height=-50e-6,
              offset=50e-6,
              startTime=10,
              duration=0) constrainedby Modelica.Blocks.Sources.Ramp
              annotation (Placement(transformation(extent={{32,-68},{48,-52}})));
            equation
              connect(volume_bleeded.q_in, pump.q_out) annotation (Line(
                  points={{90,-88},{68,-88}},
                  color={0,0,0},
                  thickness=1));
              connect(pump.q_in, heartComponent.sv) annotation (Line(
                  points={{48,-88},{24,-88},{24,-16.4},{-16,-16.4}},
                  color={0,0,0},
                  thickness=1));
            connect(bleeding_ramp.y, pump.solutionFlow) annotation (Line(points={{48.8,
                    -60},{58,-60},{58,-81}}, color={0,0,127}));
            end imp_hemr;

            model imp_chronotropy
            extends imp_base(condHRPhi(disconnected=true));
            end imp_chronotropy;

            model imp_inotropy
            extends imp_base(settings(
                heart_vntr_D_0_maxAct=settings.heart_vntr_D_0,
                heart_vntr_D_A_maxAct(displayUnit="mmHg/ml") = settings.heart_vntr_D_A,
                heart_atr_D_0(displayUnit="1")));

            end imp_inotropy;

            model imp_noAR "Impaired atonomous tissue relaxation during exercise"
              extends imp_base(settings(tissues_chi_Ra=
                                                      0));
            end imp_noAR;

            model imp_noComp "No exercise related changes in tissue compliance"
            extends imp_base(settings(tissues_chi_C=
                                                   0));
            end imp_noComp;

            model Tilted60
              extends imp_base(SystemicComponent(UseTiltInput=true));
              replaceable Modelica.Blocks.Sources.Ramp Tilt_ramp(
                height=Modelica.Constants.pi/3,
              startTime=0,
                duration=1)   constrainedby Modelica.Blocks.Interfaces.SO
                annotation (Placement(transformation(extent={{-100,22},{-80,42}})));
            equation
              connect(Tilt_ramp.y, SystemicComponent.tilt_input) annotation (Line(
                    points={{-79,32},{-22,32},{-22,20}}, color={0,0,127}));

            end Tilted60;

            model Tilted_90
            extends Tilted60(Tilt_ramp(height=Modelica.Constants.pi/2));
            end Tilted_90;

            model Tilted60_noVC
            extends Tilted60(settings(veins_UsePhiEffect=false));
            end Tilted60_noVC;

            model Tilted60_noVCLin
            extends Tilted60(settings(veins_UseNonLinearVeins=false,
                  veins_UsePhiEffect=false));
            end Tilted60_noVCLin;

            model Tilted_90_noVC
              extends Tilted_90(settings(veins_UsePhiEffect=false));
            end Tilted_90_noVC;

            model Tilted_90_noVCLin
              extends Tilted_90(settings(veins_UseNonLinearVeins=false, veins_UsePhiEffect=false));
            end Tilted_90_noVCLin;
          end ExStepping;

        model CVS_Normal "Base class for Normal package"
            extends CardiovascularSystem;
        end CVS_Normal;

        model CVS_NormalNoBaro "Base class for Normal package"
            extends CardiovascularSystem(useAutonomousPhi(y=false));
        end CVS_NormalNoBaro;

        model CVS_TiltAuto "Base class for Normal package"
            extends Tilt.CVS_tiltable;
        end CVS_TiltAuto;

        model CVS_TiltNoBaro "Tilt with elevated baroreflex to match the tilted one"
            extends Tilt.CVS_tiltable(useAutonomousPhi(y=false), phi_fixed(offset=0.356));
        end CVS_TiltNoBaro;

        model CVS_TiltRestingBaro "Tilt with clamped resting baro"
          extends Tilt.CVS_tiltable(useAutonomousPhi(y=false), phi_fixed(offset=0.25));
        end CVS_TiltRestingBaro;

        model CVS_VMAuto "Base class for Normal package"
            extends Valsalva.CVS_valsalva;
        end CVS_VMAuto;

        model CVS_VMNoBaro "Base class for Normal package"
            extends Valsalva.CVS_valsalva( useAutonomousPhi(y=false));
        end CVS_VMNoBaro;

        model CVS_Ex30 "Base class for Normal package"
            extends Exercise.CVS_exercise(settings(chi_phi=0.3),
            Exercise(startTime=20),
            phi_fixed(startTime=20));
        end CVS_Ex30;

        model CVS_Ex90 "Base class for Normal package"
            extends Exercise.CVS_exercise(settings(chi_phi=0.9),
            Exercise(startTime=20),
            phi_fixed(startTime=20));
        end CVS_Ex90;

        model CVS_ExStepping "Gradually increased exercise"
          extends Exercise.CVS_Exercise_stepping(settings(
              veins_delayed_activation=false,
              veins_activation_tau=0.1,
              veins_relaxation_tau=0.1));
        end CVS_ExStepping;
      end Impairments;

      model Water_flow
        extends CardiovascularSystem(SystemicComponent(
              useCapillaryPressureOutputs=true));
      end Water_flow;

      model CVS_mergedVeins
        extends Auxiliary.partialCVS_optimized(
              heartComponent(
            tricuspidValve(open(start=true, fixed=true)),
            pulmonaryValve(open(start=false, fixed=true)),
            mitralValve(
              open(start=true, fixed=true),
              BP_max(start=0.0, fixed=true),
              BP_min(start=39996.0, fixed=true),
              CO_acc(start=0.0, fixed=true)),
            aorticValve(
              open(start=false, fixed=true),
              BP_max(start=15132.825, fixed=true),
              BP_min(start=11252.298, fixed=true),
              CO_acc(start=8.998715e-05, fixed=true)),
            ventricles(
              LV_wall(
                ym(start=3.3871994, fixed=true),
                SL(start=1.9155309, fixed=true),
                xm(start=-4.6280074, fixed=false)),
              SEP_wall(SL(start=1.9361405, fixed=true), xm(start=1.9063469, fixed=false)),
              RV_wall(SL(start=1.9362881, fixed=true), xm(start=5.547496, fixed=false)),
              V_LV(start=0.00011784931, fixed=true),
              V_RV(start=0.00012388783, fixed=true)),
            ra(volume(start=1.1085245e-05, fixed=true)),
            la(volume(start=4.5752684e-05, fixed=true)),
            sa_node(cardiac_cycle(start=0.98068154, fixed=true))),
          redeclare
            Components.Subsystems.Systemic.SystemicAV_baseMerged SystemicComponent(
              UseThoracic_PressureInput=true,
                                              UsePhi_Input=true,
            baroreflex_system(
              baroreflex(phi(start=0.25674924, fixed=true), phi_mean(start=0.24930115,
                    fixed=true)),
              baroreceptor_aortic(
                epsilon(start=1.5530832, fixed=true),
                s(start=0.80067515, fixed=true),
                fbr_int(start=18.098284, fixed=true)),
              baroreceptor_carotid(
                epsilon(start=1.1802006, fixed=true),
                s(start=0.8740537, fixed=true),
                fbr_int(start=9.969681, fixed=true))),
            ascending_aorta_A(
              q(start=5.238356e-06, fixed=true),
              vol1(start=7.869863e-06, fixed=true),
              vol2(start=7.869491e-06, fixed=true)),
            ascending_aorta_B(q_in(start=1.0480721e-05, fixed=true), volume(start=2.4644087e-05,
                  fixed=true)),
            ascending_aorta_C(q_in(start=1.7377888e-05, fixed=true), volume(start=2.2793965e-05,
                  fixed=true)),
            ascending_aorta_D(q_in(start=2.6055804e-05, fixed=true), volume(start=2.0809415e-05,
                  fixed=true)),
            aortic_arch_C2(q_in(start=3.385809e-05, fixed=true), volume(start=1.9036119e-05,
                  fixed=true)),
            brachiocephalic_trunk_C4(q_in(start=-4.0518994e-06, fixed=true), volume(
                  start=1.2959389e-05, fixed=true)),
            aortic_arch_C46(q_in(start=4.4906774e-05, fixed=true), volume(start=1.1280376e-05,
                  fixed=true)),
            aortic_arch_C64(q_in(start=5.3487584e-05, fixed=true), volume(start=7.7443065e-06,
                  fixed=true)),
            aortic_arch_C94(q_in(start=5.406914e-05, fixed=true), volume(start=4.2478296e-05,
                  fixed=true)),
            thoracic_aorta_C96(q_in(start=6.72108e-05, fixed=true), volume(start=7.631959e-06,
                  fixed=true)),
            thoracic_aorta_C100(q_in(start=6.944493e-05, fixed=true), volume(start=5.870152e-06,
                  fixed=true)),
            thoracic_aorta_C104(q_in(start=7.109278e-05, fixed=true), volume(start=1.1058997e-05,
                  fixed=true)),
            thoracic_aorta_C108(q_in(start=7.3923424e-05, fixed=true), volume(start=3.6330086e-06,
                  fixed=true)),
            thoracic_aorta_C112(q_in(start=7.482002e-05, fixed=true), volume(start=5.9403235e-05,
                  fixed=true)),
            abdominal_aorta_C114(q_in(start=7.3239564e-05, fixed=true), volume(start=1.2282215e-06,
                  fixed=true)),
            abdominal_aorta_C136(q_in(start=6.325583e-05, fixed=true), volume(start=5.153277e-06,
                  fixed=true)),
            abdominal_aorta_C164(q_in(start=5.5602937e-05, fixed=true), volume(start=1.5295808e-06,
                  fixed=true)),
            abdominal_aorta_C176(q_in(start=4.6545607e-05, fixed=true), volume(start=4.1117264e-06,
                  fixed=true)),
            abdominal_aorta_C188(q_in(start=3.734582e-05, fixed=true), volume(start=1.6427552e-05,
                  fixed=true)),
            abdominal_aorta_C192(q_in(start=3.4643086e-05, fixed=true), volume(start=1.0212353e-05,
                  fixed=true)),
            celiac_trunk_C116(volume(start=0.0003482427, fixed=true)),
            renal_L166(volume(start=0.00031456648, fixed=true)),
            renal_R178(volume(start=0.00031174353, fixed=true)),
            common_iliac_R216(q_in(start=1.6320022e-05, fixed=true), volume(start=8.49252e-06,
                  fixed=true)),
            internal_iliac_T1_R218(volume(start=0.00017118936, fixed=true)),
            external_iliac_R220(q_in(start=9.347613e-06, fixed=true), volume(start=4.878905e-06,
                  fixed=true)),
            femoral_R222(q_in(start=8.608351e-06, fixed=true), volume(start=1.3968731e-06,
                  fixed=true)),
            profundus_T2_R224(volume(start=0.00019632085, fixed=true)),
            femoral_R226(q_in(start=2.7709561e-06, fixed=true), volume(start=1.1750567e-05,
                  fixed=true)),
            popliteal_R228(q_in(start=1.9047498e-06, fixed=true), volume(start=3.6140793e-06,
                  fixed=true)),
            anterior_tibial_T3_R230(volume(start=2.574712e-05, fixed=true)),
            popliteal_R232(q_in(start=9.0364904e-07, fixed=true), volume(start=1.8245761e-07,
                  fixed=true)),
            tibiofibular_trunk_R234(q_in(start=8.969229e-07, fixed=true), volume(
                  start=7.4183407e-07, fixed=true)),
            posterior_tibial_T4_R236(volume(start=2.810454e-05, fixed=true)),
            common_iliac_L194(q_in(start=1.6151322e-05, fixed=true), volume(start=8.123013e-06,
                  fixed=true)),
            internal_iliac_T1_L196(volume(start=0.00017119056, fixed=true)),
            external_iliac_L198(q_in(start=9.311744e-06, fixed=true), volume(start=4.8794177e-06,
                  fixed=true)),
            femoral_L200(q_in(start=8.587835e-06, fixed=true), volume(start=1.3970241e-06,
                  fixed=true)),
            profundus_T2_L202(volume(start=0.00019632177, fixed=true)),
            femoral_L204(q_in(start=2.7526319e-06, fixed=true), volume(start=1.175211e-05,
                  fixed=true)),
            popliteal_L206(q_in(start=1.9022294e-06, fixed=true), volume(start=3.614517e-06,
                  fixed=true)),
            anterior_tibial_T3_L208(volume(start=2.5747244e-05, fixed=true)),
            popliteal_L210(q_in(start=9.037239e-07, fixed=true), volume(start=1.8246978e-07,
                  fixed=true)),
            tibiofibular_trunk_L212(q_in(start=8.970837e-07, fixed=true), volume(
                  start=7.419062e-07, fixed=true)),
            posterior_tibial_T4_L214(volume(start=2.8104683e-05, fixed=true)),
            subclavian_R28(q_in(start=2.5023255e-06, fixed=true), volume(start=1.9896115e-06,
                  fixed=true)),
            subclavian_R30(q_in(start=1.2695536e-06, fixed=true), volume(start=2.615509e-06,
                  fixed=true)),
            axillary_R32(q_in(start=2.0655077e-06, fixed=true), volume(start=3.009745e-06,
                  fixed=true)),
            brachial_R34(q_in(start=2.7110734e-06, fixed=true), volume(start=4.405144e-06,
                  fixed=true)),
            ulnar_T2_R36(q_in(start=1.6416628e-06, fixed=true), volume(start=2.3593721e-07,
                  fixed=true)),
            ulnar_T2_R42(volume(start=5.90531e-05, fixed=true)),
            radial_T1_R44(volume(start=4.8377624e-05, fixed=true)),
            subclavian_L66(q_in(start=2.1564822e-06, fixed=true), volume(start=4.7363333e-06,
                  fixed=true)),
            subclavian_L78(q_in(start=1.6647504e-06, fixed=true), volume(start=1.9430443e-06,
                  fixed=true)),
            axillary_L80(q_in(start=2.1710882e-06, fixed=true), volume(start=3.007266e-06,
                  fixed=true)),
            brachial_L82(q_in(start=2.9193238e-06, fixed=true), volume(start=1.4612259e-06,
                  fixed=true)),
            ulnar_T2_L84(q_in(start=1.6210557e-06, fixed=true), volume(start=2.3547219e-07,
                  fixed=true)),
            ulnar_T2_L90(volume(start=5.9032674e-05, fixed=true)),
            radial_T1_L92(volume(start=5.126903e-05, fixed=true)),
            common_carotid_R6_A(q_in(start=-1.8979384e-06, fixed=true), volume(start=4.862136e-06,
                  fixed=true)),
            common_carotid_R6_B(q_in(start=3.5392188e-07, fixed=true), volume(start=4.1499006e-06,
                  fixed=true)),
            common_carotid_R6_C(q_in(start=2.294554e-06, fixed=true), volume(start=3.1025977e-06,
                  fixed=true)),
            internal_carotid_R8_A(q_in(start=1.6707688e-06, fixed=true), volume(start=
                   1.245021e-06, fixed=true)),
            internal_carotid_R8_B(q_in(start=1.9129216e-06, fixed=true), volume(start=
                   7.892016e-07, fixed=true)),
            internal_carotid_R8_C(volume(start=7.008938e-05, fixed=true)),
            external_carotid_T2_R26(volume(start=7.031905e-05, fixed=true)),
            common_carotid_L48_A(q_in(start=-4.5173874e-06, fixed=true), volume(start=
                   5.2723663e-06, fixed=true)),
            common_carotid_L48_B(q_in(start=-2.129048e-06, fixed=true), volume(start=4.638095e-06,
                  fixed=true)),
            common_carotid_L48_C(q_in(start=7.929517e-08, fixed=true), volume(start=4.1221583e-06,
                  fixed=true)),
            common_carotid_L48_D(q_in(start=2.1033102e-06, fixed=true), volume(start=3.340532e-06,
                  fixed=true)),
            internal_carotid_L50_A(q_in(start=1.6695535e-06, fixed=true), volume(
                  start=1.2479665e-06, fixed=true)),
            internal_carotid_L50_B(q_in(start=1.9287497e-06, fixed=true), volume(
                  start=7.9102614e-07, fixed=true)),
            internal_carotid_L50_C(volume(start=7.009793e-05, fixed=true)),
            external_carotid_T2_L62(volume(start=7.0322756e-05, fixed=true)),
            vertebral_L2(volume(start=6.465846e-05, fixed=true)),
            vertebral_R272(volume(start=6.465947e-05, fixed=true)),
            superior_vena_cava_C88(volume(start=2.6518564e-06, fixed=true)),
            inferior_vena_cava_C8(volume(start=2.3079924e-06, fixed=true)),
            hepatic_vein_T1_C10(volume(start=9.0490266e-07, fixed=true)),
            inferior_vena_cava_C12(volume(start=6.2623876e-06, fixed=true)),
            inferior_vena_cava_C16(volume(start=4.924892e-06, fixed=true)),
            renal_vein_T1_R18(volume(start=1.4511223e-06, fixed=true)),
            inferior_vena_cava_C20(volume(start=3.4359525e-07, fixed=true)),
            renal_vein_T1_L22(volume(start=1.2821928e-06, fixed=true)),
            inferior_vena_cava_C24(volume(start=1.3705571e-05, fixed=true)),
            common_iliac_vein_L56(volume(start=3.3636425e-06, fixed=true)),
            common_iliac_vein_R26(volume(start=3.0916908e-06, fixed=true)),
            internal_iliac_vein_T1_R30(volume(start=1.9287709e-06, fixed=true)),
            external_iliac_vein_R32(volume(start=5.231693e-06, fixed=true)),
            femoral_vein_R34(volume(start=2.2742992e-07, fixed=true)),
            profunda_femoris_vein_T2_R40(volume(start=4.9924033e-06, fixed=true)),
            femoral_vein_R42(volume(start=1.275544e-05, fixed=true)),
            popliteal_vein_R48(volume(start=2.8592237e-06, fixed=true)),
            anterior_tibial_vein_T4_R50(volume(start=8.0649306e-07, fixed=true)),
            popliteal_vein_R52(volume(start=6.3603414e-07, fixed=true)),
            posterior_tibial_vein_T6_R54(volume(start=1.2267082e-06, fixed=true)),
            internal_iliac_vein_T1_L60(volume(start=1.983906e-06, fixed=true)),
            external_iliac_vein_L62(volume(start=5.1363713e-06, fixed=true)),
            femoral_vein_L64(volume(start=2.658882e-07, fixed=true)),
            profunda_femoris_vein_T2_L70(volume(start=4.992536e-06, fixed=true)),
            femoral_vein_L72(volume(start=1.2755835e-05, fixed=true)),
            popliteal_vein_L78(volume(start=2.8593124e-06, fixed=true)),
            anterior_tibial_vein_T4_L80(volume(start=8.065202e-07, fixed=true)),
            popliteal_vein_L82(volume(start=6.360578e-07, fixed=true)),
            posterior_tibial_vein_T6_L84(volume(start=1.2267511e-06, fixed=true)),
            brachiocephalic_vein_R90(volume(start=3.1180687e-06, fixed=true)),
            brachiocephalic_vein_L124(volume(start=5.8437645e-06, fixed=true)),
            vertebral_vein_R92(volume(start=1.959957e-06, fixed=true)),
            brachiocephalic_vein_R94(volume(start=7.068721e-07, fixed=true)),
            subclavian_vein_R96(volume(start=3.4371172e-07, fixed=true)),
            internal_jugular_vein_R122(volume(start=1.3585578e-05, fixed=true)),
            external_jugular_vein_R98(volume(start=9.526652e-07, fixed=true)),
            axillary_vein_R102(volume(start=4.94072e-06, fixed=true)),
            brachial_vein_R104(volume(start=9.670787e-07, fixed=true)),
            brachial_vein_R114(volume(start=8.6890054e-07, fixed=true)),
            ulnar_vein_T7_R110(volume(start=1.1103261e-06, fixed=true)),
            radial_vein_T3_R120(volume(start=6.98352e-07, fixed=true)),
            vertebral_vein_L126(volume(start=1.8328561e-06, fixed=true)),
            brachiocephalic_vein_L128(volume(start=3.572458e-07, fixed=true)),
            subclavian_vein_L130(volume(start=3.0567557e-07, fixed=true)),
            internal_jugular_vein_L156(volume(start=8.247264e-06, fixed=true)),
            external_jugular_vein_L132(volume(start=9.341989e-07, fixed=true)),
            axillary_vein_L136(volume(start=4.9972105e-06, fixed=true)),
            brachial_vein_L138(volume(start=9.671567e-07, fixed=true)),
            brachial_vein_L148(volume(start=8.703139e-07, fixed=true)),
            ulnar_vein_T7_L144(volume(start=1.1103241e-06, fixed=true)),
            radial_vein_T3_L154(volume(start=7.033602e-07, fixed=true)),
            mesenteric_artery(q_in(start=7.374181e-06, fixed=true), volume(start=6.286288e-06,
                  fixed=true)),
            splanchnic_tissue(volume(start=0.0002525803, fixed=true)),
            splanchnic_vein(volume(start=7.5416883e-06, fixed=true)),
            coronary_arteries(q_in(start=2.5840454e-06, fixed=true), volume(start=3.6559783e-08,
                  fixed=true)),
            cardiac_tissue(volume(start=0.00011358586, fixed=true)),
            coronary_veins(volume(start=1.6802138e-08, fixed=true)),
            brachial_L82_HeartLevel(q_in(start=2.6841988e-06, fixed=true), volume(
                  start=2.9423397e-06, fixed=true))),
          pulmonaryComponent(
            c_pa(volume(start=5.708838e-05, fixed=true)),
            c_pv(volume(start=0.00032910754, fixed=true))),
          settings(initByPressure=false),
          condSystemicPhi(delayIntegral_Enabled=
                                       false));

        annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
              coordinateSystem(preserveAspectRatio=false)));
      end CVS_mergedVeins;

      package Renals
        model CardiovascularSystem_Renals
          extends Auxiliary.partialCVS_outputs(
            SystemicComponent(
              useCapillaryPressureOutputs=true,
              redeclare
                ADAN_main.Components.Subsystems.Systemic.Organs.Renal.Renal_P_Int_i
                renal_L166(
                Q_ra(displayUnit="l/d") = 4.3402777777778e-06,
                           P_int=simplestLymphaticDynamicSpeedUp.p_isf,
                volume(start=1e-05, fixed=true)),
              redeclare
                ADAN_main.Components.Subsystems.Systemic.Organs.Renal.Renal_P_Int_i
                renal_R178(P_int=simplestLymphaticDynamicSpeedUp.p_isf, volume(start=0.00001,
                    fixed=true))),
            settings(baro_tau_s=10),
            useAutonomousPhi(y=true));

           Real eGFR = 1e6*60*SystemicComponent.renal_L166.GFR*2/settings.BSA
            "estimate of total GFR (ml/min/m2)";
           Real eGFR_m "Mean total GFR scaled to BSA";
           parameter Real tau_gfr = 3;

          Components.Subsystems.Lymphatic.SimplestLymphaticDynamicSpeedUp
                                                            simplestLymphaticDynamicSpeedUp(
            nc=23,
            tau=0.01,
            p_int_diff(displayUnit="Pa") = 2700,
            timeSpeedUpFactor(amplitude=0, nperiod=0),
            step(height=0))
            annotation (Placement(transformation(extent={{40,50},{60,70}})));
          Physiolibrary.Hydraulic.Sensors.PressureMeasure pressureMeasure
            annotation (Placement(transformation(extent={{10,34},{30,54}})));
        equation
          der(eGFR_m)*tau_gfr = eGFR - eGFR_m;
          connect(SystemicComponent.capillaryPressures, simplestLymphaticDynamicSpeedUp.capillaryPressures)
            annotation (Line(points={{-10.2,45.6},{-10.2,61.6},{40.4,61.6}},
                                                                       color={0,0,127}));
          connect(pressureMeasure.pressure, simplestLymphaticDynamicSpeedUp.p_vc)
            annotation (Line(points={{26,40},{66,40},{66,61.6},{59.6,61.6}},
                                                                       color={0,0,127}));
          connect(SystemicComponent.port_b, pressureMeasure.q_in) annotation (
              Line(
              points={{18,28},{18,38},{16,38}},
              color={0,0,0},
              thickness=1));
          annotation (experiment(
              StopTime=800,
              Interval=0.04,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CardiovascularSystem_Renals;

        model CardiovascularSystem_Renals_ss
        "Steady state initialization from 2021-07-08 15:09:20.588705 at time 1198.0"
          extends ADAN_main.SystemicTree.Variations.Renals.CardiovascularSystem_Renals(
              SystemicComponent(
                baroreflex_system(
                  baroreflex(phi_mean(start = 0.24902993, fixed = true), phi(start = 0.2546438, fixed = true), f1_adj(start = 0.0042378153, fixed = true)),
                  baroreceptor_aortic(fbr_auc(start = 16.934622, fixed = true), fbr_int(start = 16.934229, fixed = true), epsilon(start = 1.5327758, fixed = true), s(start = 0.81758505, fixed = true)),
                  baroreceptor_carotid(fbr_auc(start = 9.214125, fixed = true), fbr_int(start = 9.2139, fixed = true), epsilon(start = 1.172878, fixed = true), s(start = 0.9008146, fixed = true))),
                ascending_aorta_A(q(start = 6.195167e-05, fixed = true), vol1(start = 7.215859e-06, fixed = true), vol2(start = 7.1603426e-06, fixed = true)),
                ascending_aorta_B(q_in(start = 5.307964e-05, fixed = true), volume(start = 2.3403143e-05, fixed = true)),
                ascending_aorta_C(q_in(start = 3.256903e-05, fixed = true), volume(start = 2.1612004e-05, fixed = true)),
                ascending_aorta_D(q_in(start = 2.5361773e-05, fixed = true), volume(start = 1.9720732e-05, fixed = true)),
                aortic_arch_C2(q_in(start = 2.4284727e-05, fixed = true), volume(start = 1.8042783e-05, fixed = true)),
                brachiocephalic_trunk_C4(q_in(start = 5.419254e-08, fixed = true), volume(start = 1.2311581e-05, fixed = true)),
                aortic_arch_C46(q_in(start = 2.6163993e-05, fixed = true), volume(start = 1.0696857e-05, fixed = true)),
                aortic_arch_C64(q_in(start = 2.889241e-05, fixed = true), volume(start = 7.347337e-06, fixed = true)),
                aortic_arch_C94(q_in(start = 2.7967992e-05, fixed = true), volume(start = 4.0434705e-05, fixed = true)),
                thoracic_aorta_C96(q_in(start = 3.6910264e-05, fixed = true), volume(start = 7.2755497e-06, fixed = true)),
                thoracic_aorta_C100(q_in(start = 3.849564e-05, fixed = true), volume(start = 5.601223e-06, fixed = true)),
                thoracic_aorta_C104(q_in(start = 3.970225e-05, fixed = true), volume(start = 1.057232e-05, fixed = true)),
                thoracic_aorta_C108(q_in(start = 4.191461e-05, fixed = true), volume(start = 3.4756536e-06, fixed = true)),
                thoracic_aorta_C112(q_in(start = 4.2632408e-05, fixed = true), volume(start = 5.8017828e-05, fixed = true)),
                abdominal_aorta_C114(q_in(start = 5.00469e-05, fixed = true), volume(start = 1.2004487e-06, fixed = true)),
                abdominal_aorta_C136(q_in(start = 3.9667488e-05, fixed = true), volume(start = 5.045597e-06, fixed = true)),
                abdominal_aorta_C164(q_in(start = 3.293213e-05, fixed = true), volume(start = 1.4984196e-06, fixed = true)),
                abdominal_aorta_C176(q_in(start = 2.5722498e-05, fixed = true), volume(start = 4.033422e-06, fixed = true)),
                abdominal_aorta_C188(q_in(start = 1.8712908e-05, fixed = true), volume(start = 1.6213948e-05, fixed = true)),
                abdominal_aorta_C192(q_in(start = 2.0241987e-05, fixed = true), volume(start = 1.0117922e-05, fixed = true)),
                celiac_trunk_C116(volume(start = 0.0003475803, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                renal_L166(
                volume(fixed=false),
                tau_R_K_afferent=10,
                V_AKIDNEY(start=4.5052993e-06, fixed=true),
                V_VKIDNEY(start=4.606398e-06, fixed=true),                                                                A_myo(start = 0.3026051, fixed = true), D_aff(start = 9.311087, fixed = true)),
                renal_R178(
                volume(fixed=false),
                tau_R_K_afferent=10,
                V_AKIDNEY(start=4.508612e-06, fixed=true),
                V_VKIDNEY(start=4.605769e-06, fixed=true),                                                               A_myo(start = 0.30246243, fixed = true), D_aff(start = 9.31289, fixed = true)),
                common_iliac_R216(q_in(start = 1.05641175e-05, fixed = true), volume(start = 8.4538415e-06, fixed = true)),
                internal_iliac_T1_R218(volume(start = 0.00017084694, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                external_iliac_R220(q_in(start = 5.81231e-06, fixed = true), volume(start = 4.865387e-06, fixed = true)),
                femoral_R222(q_in(start = 6.044131e-06, fixed = true), volume(start = 1.3922993e-06, fixed = true)),
                profundus_T2_R224(volume(start = 0.00019596484, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                femoral_R226(q_in(start = -6.950426e-08, fixed = true), volume(start = 1.1610725e-05, fixed = true)),
                popliteal_R228(q_in(start = 1.2411119e-06, fixed = true), volume(start = 3.5689786e-06, fixed = true)),
                anterior_tibial_T3_R230(volume(start = 2.5747173e-05, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                popliteal_R232(q_in(start = 8.5057206e-07, fixed = true), volume(start = 1.8117784e-07, fixed = true)),
                tibiofibular_trunk_R234(q_in(start = 8.6218125e-07, fixed = true), volume(start = 7.366428e-07, fixed = true)),
                posterior_tibial_T4_R236(volume(start = 2.8069171e-05, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                common_iliac_L194(q_in(start = 1.05353465e-05, fixed = true), volume(start = 8.083625e-06, fixed = true)),
                internal_iliac_T1_L196(volume(start = 0.00017084845, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                external_iliac_L198(q_in(start = 5.7686293e-06, fixed = true), volume(start = 4.864903e-06, fixed = true)),
                femoral_L200(q_in(start = 6.0055086e-06, fixed = true), volume(start = 1.3921626e-06, fixed = true)),
                profundus_T2_L202(volume(start = 0.00019596609, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                femoral_L204(q_in(start = -1.0337109e-07, fixed = true), volume(start = 1.1609635e-05, fixed = true)),
                popliteal_L206(q_in(start = 1.2315463e-06, fixed = true), volume(start = 3.5686514e-06, fixed = true)),
                anterior_tibial_T3_L208(volume(start = 2.5747368e-05, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                popliteal_L210(q_in(start = 8.490037e-07, fixed = true), volume(start = 1.8116832e-07, fixed = true)),
                tibiofibular_trunk_L212(q_in(start = 8.6082764e-07, fixed = true), volume(start = 7.366269e-07, fixed = true)),
                posterior_tibial_T4_L214(volume(start = 2.8069406e-05, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                subclavian_R28(q_in(start = 2.426948e-06, fixed = true), volume(start = 1.8965529e-06, fixed = true)),
                subclavian_R30(q_in(start = 9.55001e-07, fixed = true), volume(start = 2.5018676e-06, fixed = true)),
                axillary_R32(q_in(start = 1.4750004e-06, fixed = true), volume(start = 2.8953593e-06, fixed = true)),
                brachial_R34(q_in(start = 2.0630928e-06, fixed = true), volume(start = 4.2593047e-06, fixed = true)),
                ulnar_T2_R36(q_in(start = 1.6122561e-06, fixed = true), volume(start = 2.3167692e-07, fixed = true)),
                ulnar_T2_R42(volume(start = 5.901318e-05, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                radial_T1_R44(volume(start = 4.837462e-05, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                subclavian_L66(q_in(start = 2.215813e-06, fixed = true), volume(start = 4.5271895e-06, fixed = true)),
                subclavian_L78(q_in(start = 1.2479106e-06, fixed = true), volume(start = 1.8640278e-06, fixed = true)),
                axillary_L80(q_in(start = 1.6109775e-06, fixed = true), volume(start = 2.8971601e-06, fixed = true)),
                brachial_L82(q_in(start = 2.7266517e-06, fixed = true), volume(start = 1.41578e-06, fixed = true)),
                ulnar_T2_L84(q_in(start = 1.6066687e-06, fixed = true), volume(start = 2.3148452e-07, fixed = true)),
                ulnar_T2_L90(volume(start = 5.898916e-05, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                radial_T1_L92(volume(start = 5.126739e-05, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                common_carotid_R6_A(q_in(start = 3.738336e-07, fixed = true), volume(start = 4.5545535e-06, fixed = true)),
                common_carotid_R6_B(q_in(start = 1.7534574e-06, fixed = true), volume(start = 3.88829e-06, fixed = true)),
                common_carotid_R6_C(q_in(start = 2.9435148e-06, fixed = true), volume(start = 2.9104276e-06, fixed = true)),
                internal_carotid_R8_A(q_in(start = 1.7900412e-06, fixed = true), volume(start = 1.2128463e-06, fixed = true)),
                internal_carotid_R8_B(q_in(start = 1.9386362e-06, fixed = true), volume(start = 7.7031405e-07, fixed = true)),
                internal_carotid_R8_C(volume(start = 6.993463e-05, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                external_carotid_T2_R26(volume(start = 7.017443e-05, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                common_carotid_L48_A(q_in(start = -1.03934e-06, fixed = true), volume(start = 4.9383284e-06, fixed = true)),
                common_carotid_L48_B(q_in(start = 3.5998949e-07, fixed = true), volume(start = 4.33503e-06, fixed = true)),
                common_carotid_L48_C(q_in(start = 1.6689027e-06, fixed = true), volume(start = 3.847327e-06, fixed = true)),
                common_carotid_L48_D(q_in(start = 2.8541774e-06, fixed = true), volume(start = 3.117486e-06, fixed = true)),
                internal_carotid_L50_A(q_in(start = 1.782279e-06, fixed = true), volume(start = 1.2126942e-06, fixed = true)),
                internal_carotid_L50_B(q_in(start = 1.9344816e-06, fixed = true), volume(start = 7.7022577e-07, fixed = true)),
                internal_carotid_L50_C(volume(start = 6.993916e-05, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                external_carotid_T2_L62(volume(start = 7.017383e-05, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                vertebral_L2(volume(start = 6.451932e-05, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                vertebral_R272(volume(start = 6.4523294e-05, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                superior_vena_cava_C2(volume(start = 3.822174e-06, fixed = true)),
                superior_vena_cava_C88(volume(start = 6.5869835e-06, fixed = true)),
                inferior_vena_cava_C8(volume(start = 5.7334705e-06, fixed = true)),
                hepatic_vein_T1_C10(volume(start = 2.2483266e-06, fixed = true)),
                inferior_vena_cava_C12(volume(start = 1.5563739e-05, fixed = true)),
                inferior_vena_cava_C16(volume(start = 1.22441115e-05, fixed = true)),
                renal_vein_T1_R18(volume(start = 3.609252e-06, fixed = true)),
                inferior_vena_cava_C20(volume(start = 8.542523e-07, fixed = true)),
                renal_vein_T1_L22(volume(start = 3.189806e-06, fixed = true)),
                inferior_vena_cava_C24(volume(start = 3.4092933e-05, fixed = true)),
                common_iliac_vein_L56(volume(start = 8.37424e-06, fixed = true), open(start = true, fixed = true)),
                common_iliac_vein_R26(volume(start = 7.696639e-06, fixed = true), open(start = true, fixed = true)),
                external_iliac_vein_R28(volume(start = 1.1226813e-06, fixed = true)),
                internal_iliac_vein_T1_R30(volume(start = 4.8088255e-06, fixed = true)),
                external_iliac_vein_R32(volume(start = 1.30334365e-05, fixed = true)),
                femoral_vein_R34(volume(start = 5.6661827e-07, fixed = true)),
                femoral_vein_R38(volume(start = 4.494259e-06, fixed = true)),
                profunda_femoris_vein_T2_R40(volume(start = 1.2606506e-05, fixed = true)),
                femoral_vein_R42(volume(start = 3.1783085e-05, fixed = true)),
                femoral_vein_R46(volume(start = 1.7505243e-06, fixed = true)),
                popliteal_vein_R48(volume(start = 7.146255e-06, fixed = true)),
                anterior_tibial_vein_T4_R50(volume(start = 2.8379507e-06, fixed = true)),
                popliteal_vein_R52(volume(start = 1.590417e-06, fixed = true)),
                posterior_tibial_vein_T6_R54(volume(start = 3.47673e-06, fixed = true)),
                external_iliac_vein_L58(volume(start = 1.124172e-06, fixed = true)),
                internal_iliac_vein_T1_L60(volume(start = 4.946822e-06, fixed = true)),
                external_iliac_vein_L62(volume(start = 1.2796905e-05, fixed = true)),
                femoral_vein_L64(volume(start = 6.624891e-07, fixed = true)),
                femoral_vein_L68(volume(start = 4.49481e-06, fixed = true)),
                profunda_femoris_vein_T2_L70(volume(start = 1.2608475e-05, fixed = true)),
                femoral_vein_L72(volume(start = 3.1788175e-05, fixed = true)),
                femoral_vein_L76(volume(start = 1.750795e-06, fixed = true)),
                popliteal_vein_L78(volume(start = 7.147572e-06, fixed = true)),
                anterior_tibial_vein_T4_L80(volume(start = 2.838048e-06, fixed = true)),
                popliteal_vein_L82(volume(start = 1.5907211e-06, fixed = true)),
                posterior_tibial_vein_T6_L84(volume(start = 3.4771615e-06, fixed = true)),
                brachiocephalic_vein_R90(volume(start = 7.745927e-06, fixed = true), open(start = true, fixed = true)),
                brachiocephalic_vein_L124(volume(start = 1.452057e-05, fixed = true), open(start = true, fixed = true)),
                vertebral_vein_R92(volume(start = 4.9455207e-06, fixed = true)),
                brachiocephalic_vein_R94(volume(start = 1.7560528e-06, fixed = true)),
                subclavian_vein_R96(volume(start = 8.5394925e-07, fixed = true)),
                internal_jugular_vein_R122(volume(start = 3.3748696e-05, fixed = true)),
                external_jugular_vein_R98(volume(start = 2.4350745e-06, fixed = true)),
                subclavian_vein_R100(volume(start = 3.4934353e-06, fixed = true)),
                axillary_vein_R102(volume(start = 1.2288033e-05, fixed = true)),
                brachial_vein_R104(volume(start = 2.6486496e-06, fixed = true)),
                brachial_vein_R114(volume(start = 2.4312224e-06, fixed = true)),
                brachial_vein_R108(volume(start = 3.708656e-07, fixed = true)),
                ulnar_vein_T7_R110(volume(start = 3.6403699e-06, fixed = true)),
                brachial_vein_R118(volume(start = 2.3748498e-07, fixed = true)),
                radial_vein_T3_R120(volume(start = 2.4616254e-06, fixed = true)),
                vertebral_vein_L126(volume(start = 4.62175e-06, fixed = true)),
                brachiocephalic_vein_L128(volume(start = 8.8770037e-07, fixed = true)),
                subclavian_vein_L130(volume(start = 7.5962134e-07, fixed = true)),
                internal_jugular_vein_L156(volume(start = 2.049687e-05, fixed = true)),
                external_jugular_vein_L132(volume(start = 2.3878022e-06, fixed = true)),
                subclavian_vein_L134(volume(start = 3.405651e-06, fixed = true)),
                axillary_vein_L136(volume(start = 1.2431762e-05, fixed = true)),
                brachial_vein_L138(volume(start = 2.6525877e-06, fixed = true)),
                brachial_vein_L148(volume(start = 2.454976e-06, fixed = true)),
                brachial_vein_L142(volume(start = 3.7143622e-07, fixed = true)),
                ulnar_vein_T7_L144(volume(start = 3.6449187e-06, fixed = true)),
                brachial_vein_L152(volume(start = 2.3998973e-07, fixed = true)),
                radial_vein_T3_L154(volume(start = 2.4881394e-06, fixed = true)),
                mesenteric_artery(q_in(start = 7.3274023e-06, fixed = true), volume(start = 6.3959233e-06, fixed = true)),
                splanchnic_tissue(volume(start = 0.00025210794, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                splanchnic_vein(volume(start = 1.875396e-05, fixed = true)),
                coronary_arteries(q_in(start = 2.646325e-06, fixed = true), volume(start = 3.6691155e-08, fixed = true)),
                cardiac_tissue(volume(start = 0.00011380926, fixed = true), phi_delayed(start = 0.2530279, fixed = true)),
                coronary_veins(volume(start = 5.8472487e-08, fixed = true)),
                brachial_L82_HeartLevel(q_in(start = 2.1774824e-06, fixed = true), volume(start = 2.8476286e-06, fixed = true))),
              heartComponent(
                tricuspidValve(open(start = false, fixed = true)),
                pulmonaryValve(open(start = true, fixed = true), BP_max(start = 0.0, fixed = true), BP_min(start = 26600.0, fixed = true), CO_acc(start = 0.0, fixed = true)),
                mitralValve(open(start = false, fixed = true), BP_max(start = 850.3849, fixed = true), BP_min(start = 976.9674, fixed = true), CO_acc(start = 1.887598e-05, fixed = true)),
                aorticValve(open(start = true, fixed = true), BP_max(start = 12624.989, fixed = true), BP_min(start = 11822.019, fixed = true), CO_acc(start = 2.8000977e-07, fixed = true)),
                ventricles(
                  LV_wall(ym(start = 3.556851, fixed = true), SL(start = 2.173956, fixed = true)),
                  SEP_wall(SL(start = 2.1934493, fixed = true)),
                  RV_wall(SL(start = 2.0891747, fixed = true)),
                  calciumMechanics(tm(start = 0.16485026, fixed = true)), V_LV(start = 0.00015179491, fixed = true), V_RV(start = 0.00012277605, fixed = true), currentWork_LV(start = -0.0065878234, fixed = true), currentWork_RV(start = 0.025948646, fixed = true)),
                ra(volume(start = 1.2928354e-05, fixed = true), currentWork(start = 11.166919, fixed = true)),
                la(volume(start = 1.882536e-05, fixed = true), currentWork(start = 2.2067084, fixed = true)),
                idealValve_deactivable(open(start = false, fixed = true)),
                idealValve_deactivable1(open(start = false, fixed = true)),
                sa_node(t0(start = 0.24485026, fixed = true), cardiac_cycle(start = 0.2621279, fixed = true))),
              pulmonaryComponent(
              deadVolume=0.002,
                c_pa(volume(start = 3.187494e-05, fixed = true)),
                c_pv(volume(start=0.00029940205 + settings.V_PV_init +
                      pulmonaryComponent.deadVolume, fixed=true))),
              simplestLymphaticDynamicSpeedUp(p_vc_mean(start = 620.5987, fixed = true), J1_s(start = 4.8788245e-08, fixed = true), v_isf(start = 0.06995968, fixed = true), v_lymph(start = 0.0010544991, fixed = true), q_int(start = 0.07111494, fixed = true), v_drained(start = 0.0, fixed = true), p_vc_s(start = 57.849285, fixed = true), J1s_s(start = 4.3085433e-09, fixed = true), t0(start = 0.089999996, fixed = true)),
              settings(V_PV_init = 0, baro_f1=3.625e-03),
            useAutonomousPhi(y=false));
          annotation (experiment(
              StopTime=600,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CardiovascularSystem_Renals_ss;

        model Renals_HF "A general heart failure model"
          extends CardiovascularSystem_Renals_ss(
            heartComponent(ventricles(
                LV_wall(contractilityFraction=settings.heartImp_LVcont,
                k_passive=settings.heart_vntr_k_passive*settings.heartImp_LV_stiff),
                RV_wall(
                  Amref=settings.heart_vntr_xi_AmRef_RV*110,
                        contractilityFraction=settings.heartImp_RVcont,
                k_passive=settings.heart_vntr_k_passive*settings.heartImp_RV_stiff),
                SEP_wall(contractilityFraction=(settings.heartImp_LVcont +settings.heartImp_RVcont)
                                               /2,
                      k_passive=settings.heart_vntr_k_passive*(settings.heartImp_RV_stiff/2 + settings.heartImp_RV_stiff/2))),
              ra(contractilityFraction=settings.heartImp_LVcont),
              la(contractilityFraction=settings.heartImp_RVcont)), useAutonomousPhi(y=
                 true));
                 // MOVED ALL TO THE SETTINGS.
        //   parameter Real LV_stiff=1.0 "Stiffening factor";
        //   parameter Real LV_SLcollagen_f=1.0 "threshold for collagen activation, [um]";
        //   parameter Real LV_PConcollagen_f=1.0 "contriubtion of collagen [1]";
        //   parameter Real LV_PExpcollagen_f=1.0 "contriubtion of collagen [1]";
        //
        //   parameter Real RV_stiff=1.0 "Stiffening factor";
        //   parameter Real RV_SLcollagen_f=1.0 "threshold for collagen activation, [um]";
        //   parameter Real RV_PConcollagen_f=1.0 "contriubtion of collagen [1]";
        //   parameter Real RV_PExpcollagen_f=1.0 "contriubtion of collagen [1]";
        //
        //   parameter Physiolibrary.Types.Fraction LVfunctionFraction=1
        //     "Reducing LV and LA contractility, incl. the maximal one";
        //   parameter Physiolibrary.Types.Fraction RVfunctionFraction=1
        //     "Reducing RV and RA contractility, incl. the maximal one";
        //
        //   parameter Real heart_vntr_xi_AmRef_RV=settings.heart_vntr_xi_AmRef
        //     "modifier to RV midwall reference surface area, cm^2";
        end Renals_HF;

        model Renals_VolumeLoad
          extends Renals_HF(settings(V_PV_init=initVol, baro_tau_s=10));
        parameter Physiolibrary.Types.Pressure PA_cutOff=14665.46261565
                                                              "Brachial Pressure to terminate the simulation";
        parameter Modelica.Units.SI.Time time_cutoff = 120;
        parameter Physiolibrary.Types.Volume initVol=0
            "Volume adjustment";

          Physiolibrary.Hydraulic.Sources.UnlimitedPump
                                                  unlimitedPump(
              useSolutionFlowInput=true, SolutionFlow(displayUnit="ml/min")=
              1e-06)
            annotation (Placement(transformation(extent={{-122,-6},{-102,14}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump1(
              useSolutionFlowInput=true) annotation (Placement(transformation(
                  extent={{-122,-30},{-102,-10}})));
          Physiolibrary.Hydraulic.Components.ElasticVessel addedVolume(volume_start=initVol)
            annotation (Placement(transformation(extent={{-98,-30},{-78,-10}})));
          Physiolibrary.Hydraulic.Sensors.FlowMeasure flowMeasure
            annotation (Placement(transformation(extent={{-94,14},{-74,-6}})));
        Modelica.Blocks.Sources.Ramp volumeInfusionRamp(
            height=volumeInfusion,
            duration=0,
            offset=0,
            startTime=600)
            "Phi for when the model is not using the autonomous feedback phi from baroreflex"
            annotation (Placement(transformation(extent={{-142,14},{-122,34}})));
          parameter Physiolibrary.Types.VolumeFlowRate volumeInfusion(displayUnit="ml/min")=
               1e-06 "Compensation infusion flowrate";
        equation
         if time_cutoff > 0 and time > time_cutoff and brachial_pressure_mean > PA_cutOff then
           terminate("Pressure is already too high");
         end if;
          connect(addedVolume.q_in, unlimitedPump1.q_out) annotation (Line(
              points={{-88,-20},{-102,-20}},
              color={0,0,0},
              thickness=1));
          connect(unlimitedPump.q_out,flowMeasure. q_in) annotation (Line(
              points={{-102,4},{-94,4}},
              color={0,0,0},
              thickness=1));
          connect(flowMeasure.volumeFlow,unlimitedPump1. solutionFlow)
            annotation (Line(points={{-84,-8},{-112,-8},{-112,-13}},   color={0,
                  0,127}));
          connect(flowMeasure.q_out, heartComponent.sv) annotation (Line(
              points={{-74,4},{24,4},{24,-12},{-16,-12}},
              color={0,0,0},
              thickness=1));
          connect(volumeInfusionRamp.y, unlimitedPump.solutionFlow) annotation (
             Line(points={{-121,24},{-112,24},{-112,11}}, color={0,0,127}));
          annotation (experiment(
              StopTime=5000,
              Interval=0.06,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end Renals_VolumeLoad;

        model CVS_renalRegulation_HFrEF_noBaro
          extends Renals_HF(useAutonomousPhi(y=false));
          annotation (experiment(
              StopTime=60,
              Interval=0.02,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode"));
        end CVS_renalRegulation_HFrEF_noBaro;

        model CVS_renalRegulation_HFrEF_15
          extends CVS_renalRegulation_HFrEF_baro(
            LVfunctionFraction=0.15,
            settings(V_PV_init(displayUnit="l") = 0.00225));
          annotation (experiment(
              StopTime=1200,
              Interval=0.04,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_renalRegulation_HFrEF_15;

        model CVS_renalRegulation_HFrEF_15_ss
          "Steady state initialization from 2021-07-12 10:03:33.934081 at time 800.0"
          extends
            ADAN_main.SystemicTree.Variations.Renals.CVS_renalRegulation_HFrEF_15(
              SystemicComponent(
                baroreflex_system(
                  baroreflex(phi_mean(start = 0.40002874, fixed = true), phi(start = 0.3972208, fixed = true), f1_adj(start = 0.0069169486, fixed = true)),
                  baroreceptor_aortic(fbr_auc(start = 0.5277771, fixed = true), fbr_int(start = 5.3820257, fixed = true), epsilon(start = 1.4875317, fixed = true), s(start = 0.90904397, fixed = true)),
                  baroreceptor_carotid(fbr_auc(start = 0.46260038, fixed = true), fbr_int(start = 2.9956932, fixed = true), epsilon(start = 1.1566986, fixed = true), s(start = 0.9468236, fixed = true))),
                ascending_aorta_A(q(start = -5.46926e-07, fixed = true), vol1(start = 8.122105e-06, fixed = true), vol2(start = 8.122828e-06, fixed = true)),
                ascending_aorta_B(q_in(start = -1.1078342e-06, fixed = true), volume(start = 2.3836954e-05, fixed = true)),
                ascending_aorta_C(q_in(start = -3.8461185e-06, fixed = true), volume(start = 2.2056582e-05, fixed = true)),
                ascending_aorta_D(q_in(start = -4.720915e-06, fixed = true), volume(start = 2.0148324e-05, fixed = true)),
                aortic_arch_C2(q_in(start = -5.640328e-06, fixed = true), volume(start = 1.8445702e-05, fixed = true)),
                brachiocephalic_trunk_C4(q_in(start = 9.19242e-06, fixed = true), volume(start = 1.2549958e-05, fixed = true)),
                aortic_arch_C46(q_in(start = -1.5797375e-05, fixed = true), volume(start = 1.0939465e-05, fixed = true)),
                aortic_arch_C64(q_in(start = -2.474353e-05, fixed = true), volume(start = 7.5165317e-06, fixed = true)),
                aortic_arch_C94(q_in(start = -2.5718626e-05, fixed = true), volume(start = 4.146925e-05, fixed = true)),
                thoracic_aorta_C96(q_in(start = -2.6482938e-05, fixed = true), volume(start = 7.4660934e-06, fixed = true)),
                thoracic_aorta_C100(q_in(start = -2.6461737e-05, fixed = true), volume(start = 5.751658e-06, fixed = true)),
                thoracic_aorta_C104(q_in(start = -2.6335032e-05, fixed = true), volume(start = 1.0871259e-05, fixed = true)),
                thoracic_aorta_C108(q_in(start = -2.5635658e-05, fixed = true), volume(start = 3.5756193e-06, fixed = true)),
                thoracic_aorta_C112(q_in(start = -2.5345582e-05, fixed = true), volume(start = 6.0616418e-05, fixed = true)),
                abdominal_aorta_C114(q_in(start = 1.0893111e-05, fixed = true), volume(start = 1.254044e-06, fixed = true)),
                abdominal_aorta_C136(q_in(start = 4.00991e-06, fixed = true), volume(start = 5.281066e-06, fixed = true)),
                abdominal_aorta_C164(q_in(start = 4.2279667e-06, fixed = true), volume(start = 1.5691138e-06, fixed = true)),
                abdominal_aorta_C176(q_in(start = -1.08182306e-07, fixed = true), volume(start = 4.229532e-06, fixed = true)),
                abdominal_aorta_C188(q_in(start = -2.630023e-06, fixed = true), volume(start = 1.7096838e-05, fixed = true)),
                abdominal_aorta_C192(q_in(start = 1.077157e-05, fixed = true), volume(start = 1.0705102e-05, fixed = true)),
                celiac_trunk_C116(volume(start = 0.00034864113, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                renal_L166(V_AKIDNEY(start = 5.5359583e-06, fixed = true), V_VKIDNEY(start = 1.2380112e-05, fixed = true), A_myo(start = 0.3076556, fixed = true), D_aff(start = 9.296135, fixed = true)),
                renal_R178(V_AKIDNEY(start = 5.5559008e-06, fixed = true), V_VKIDNEY(start = 1.237978e-05, fixed = true), A_myo(start = 0.3075598, fixed = true), D_aff(start = 9.296706, fixed = true)),
                common_iliac_R216(q_in(start = 9.564516e-06, fixed = true), volume(start = 8.958756e-06, fixed = true)),
                internal_iliac_T1_R218(volume(start = 0.00016897266, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                external_iliac_R220(q_in(start = 1.2028499e-05, fixed = true), volume(start = 5.047496e-06, fixed = true)),
                femoral_R222(q_in(start = 1.3535418e-05, fixed = true), volume(start = 1.4438342e-06, fixed = true)),
                profundus_T2_R224(volume(start = 0.00019384622, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                femoral_R226(q_in(start = 8.960533e-06, fixed = true), volume(start = 1.1971916e-05, fixed = true)),
                popliteal_R228(q_in(start = 3.6173599e-06, fixed = true), volume(start = 3.6686388e-06, fixed = true)),
                anterior_tibial_T3_R230(volume(start = 2.5145418e-05, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                popliteal_R232(q_in(start = 1.0123755e-06, fixed = true), volume(start = 1.8400289e-07, fixed = true)),
                tibiofibular_trunk_R234(q_in(start = 9.567887e-07, fixed = true), volume(start = 7.480692e-07, fixed = true)),
                posterior_tibial_T4_R236(volume(start = 2.7710359e-05, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                common_iliac_L194(q_in(start = 9.864859e-06, fixed = true), volume(start = 8.563189e-06, fixed = true)),
                internal_iliac_T1_L196(volume(start = 0.00016896534, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                external_iliac_L198(q_in(start = 1.1974767e-05, fixed = true), volume(start = 5.0461367e-06, fixed = true)),
                femoral_L200(q_in(start = 1.3458501e-05, fixed = true), volume(start = 1.4434672e-06, fixed = true)),
                profundus_T2_L202(volume(start = 0.00019383771, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                femoral_L204(q_in(start = 8.882472e-06, fixed = true), volume(start = 1.1971327e-05, fixed = true)),
                popliteal_L206(q_in(start = 3.592221e-06, fixed = true), volume(start = 3.6686374e-06, fixed = true)),
                anterior_tibial_T3_L208(volume(start = 2.5144496e-05, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                popliteal_L210(q_in(start = 1.009118e-06, fixed = true), volume(start = 1.8400266e-07, fixed = true)),
                tibiofibular_trunk_L212(q_in(start = 9.541502e-07, fixed = true), volume(start = 7.480922e-07, fixed = true)),
                posterior_tibial_T4_L214(volume(start = 2.7709239e-05, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                subclavian_R28(q_in(start = 1.2767388e-06, fixed = true), volume(start = 1.9306283e-06, fixed = true)),
                subclavian_R30(q_in(start = -2.8079825e-07, fixed = true), volume(start = 2.543392e-06, fixed = true)),
                axillary_R32(q_in(start = -5.081575e-07, fixed = true), volume(start = 2.948795e-06, fixed = true)),
                brachial_R34(q_in(start = -2.0160265e-07, fixed = true), volume(start = 4.404404e-06, fixed = true)),
                ulnar_T2_R36(q_in(start = 1.165016e-06, fixed = true), volume(start = 2.361831e-07, fixed = true)),
                ulnar_T2_R42(volume(start = 5.820723e-05, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                radial_T1_R44(volume(start = 4.7374884e-05, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                subclavian_L66(q_in(start = 6.143085e-07, fixed = true), volume(start = 4.6131377e-06, fixed = true)),
                subclavian_L78(q_in(start = -8.8105656e-07, fixed = true), volume(start = 1.8967752e-06, fixed = true)),
                axillary_L80(q_in(start = -8.5454997e-07, fixed = true), volume(start = 2.9568114e-06, fixed = true)),
                brachial_L82(q_in(start = 1.4359141e-06, fixed = true), volume(start = 1.4653359e-06, fixed = true)),
                ulnar_T2_L84(q_in(start = 1.1624112e-06, fixed = true), volume(start = 2.3610518e-07, fixed = true)),
                ulnar_T2_L90(volume(start = 5.8240552e-05, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                radial_T1_L92(volume(start = 5.0218077e-05, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                common_carotid_R6_A(q_in(start = 6.35241e-06, fixed = true), volume(start = 4.6584264e-06, fixed = true)),
                common_carotid_R6_B(q_in(start = 5.2522673e-06, fixed = true), volume(start = 3.9702495e-06, fixed = true)),
                common_carotid_R6_C(q_in(start = 4.08819e-06, fixed = true), volume(start = 2.9672976e-06, fixed = true)),
                internal_carotid_R8_A(q_in(start = 1.6946349e-06, fixed = true), volume(start = 1.2219307e-06, fixed = true)),
                internal_carotid_R8_B(q_in(start = 1.5265069e-06, fixed = true), volume(start = 7.756186e-07, fixed = true)),
                internal_carotid_R8_C(volume(start = 6.915842e-05, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                external_carotid_T2_R26(volume(start = 6.925217e-05, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                common_carotid_L48_A(q_in(start = 8.377147e-06, fixed = true), volume(start = 5.0463036e-06, fixed = true)),
                common_carotid_L48_B(q_in(start = 7.419529e-06, fixed = true), volume(start = 4.408989e-06, fixed = true)),
                common_carotid_L48_C(q_in(start = 6.073074e-06, fixed = true), volume(start = 3.898016e-06, fixed = true)),
                common_carotid_L48_D(q_in(start = 4.5422735e-06, fixed = true), volume(start = 3.1500895e-06, fixed = true)),
                internal_carotid_L50_A(q_in(start = 1.7514093e-06, fixed = true), volume(start = 1.2170023e-06, fixed = true)),
                internal_carotid_L50_B(q_in(start = 1.5256068e-06, fixed = true), volume(start = 7.725904e-07, fixed = true)),
                internal_carotid_L50_C(volume(start = 6.921058e-05, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                external_carotid_T2_L62(volume(start = 6.930172e-05, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                vertebral_L2(volume(start = 6.374356e-05, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                vertebral_R272(volume(start = 6.369791e-05, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                superior_vena_cava_C2(volume(start = 7.675305e-06, fixed = true)),
                superior_vena_cava_C88(volume(start = 1.3226042e-05, fixed = true)),
                inferior_vena_cava_C8(volume(start = 1.1510661e-05, fixed = true)),
                hepatic_vein_T1_C10(volume(start = 4.512823e-06, fixed = true)),
                inferior_vena_cava_C12(volume(start = 3.1225933e-05, fixed = true)),
                inferior_vena_cava_C16(volume(start = 2.4552435e-05, fixed = true)),
                renal_vein_T1_R18(volume(start = 7.233213e-06, fixed = true)),
                inferior_vena_cava_C20(volume(start = 1.7129344e-06, fixed = true)),
                renal_vein_T1_L22(volume(start = 6.390588e-06, fixed = true)),
                inferior_vena_cava_C24(volume(start = 6.830641e-05, fixed = true)),
                common_iliac_vein_L56(volume(start = 1.605214e-05, fixed = true), open(start = false, fixed = true)),
                common_iliac_vein_R26(volume(start = 1.47569435e-05, fixed = true), open(start = false, fixed = true)),
                external_iliac_vein_R28(volume(start = 2.1521632e-06, fixed = true)),
                internal_iliac_vein_T1_R30(volume(start = 9.202471e-06, fixed = true)),
                external_iliac_vein_R32(volume(start = 2.495985e-05, fixed = true)),
                femoral_vein_R34(volume(start = 1.0850097e-06, fixed = true)),
                femoral_vein_R38(volume(start = 8.599681e-06, fixed = true)),
                profunda_femoris_vein_T2_R40(volume(start = 2.3724006e-05, fixed = true)),
                femoral_vein_R42(volume(start = 6.0802024e-05, fixed = true)),
                femoral_vein_R46(volume(start = 3.3485273e-06, fixed = true)),
                popliteal_vein_R48(volume(start = 1.3616514e-05, fixed = true)),
                anterior_tibial_vein_T4_R50(volume(start = 3.441219e-06, fixed = true)),
                popliteal_vein_R52(volume(start = 3.028694e-06, fixed = true)),
                posterior_tibial_vein_T6_R54(volume(start = 5.7120424e-06, fixed = true)),
                external_iliac_vein_L58(volume(start = 2.1544838e-06, fixed = true)),
                internal_iliac_vein_T1_L60(volume(start = 9.46375e-06, fixed = true)),
                external_iliac_vein_L62(volume(start = 2.4500923e-05, fixed = true)),
                femoral_vein_L64(volume(start = 1.2682624e-06, fixed = true)),
                femoral_vein_L68(volume(start = 8.598445e-06, fixed = true)),
                profunda_femoris_vein_T2_L70(volume(start = 2.3720555e-05, fixed = true)),
                femoral_vein_L72(volume(start = 6.079337e-05, fixed = true)),
                femoral_vein_L76(volume(start = 3.34803e-06, fixed = true)),
                popliteal_vein_L78(volume(start = 1.3614592e-05, fixed = true)),
                anterior_tibial_vein_T4_L80(volume(start = 3.440931e-06, fixed = true)),
                popliteal_vein_L82(volume(start = 3.0282858e-06, fixed = true)),
                posterior_tibial_vein_T6_L84(volume(start = 5.711364e-06, fixed = true)),
                brachiocephalic_vein_R90(volume(start = 1.4861478e-05, fixed = true), open(start = false, fixed = true)),
                brachiocephalic_vein_L124(volume(start = 2.7914119e-05, fixed = true), open(start = false, fixed = true)),
                vertebral_vein_R92(volume(start = 9.294289e-06, fixed = true)),
                brachiocephalic_vein_R94(volume(start = 3.369085e-06, fixed = true)),
                subclavian_vein_R96(volume(start = 1.6381426e-06, fixed = true)),
                internal_jugular_vein_R122(volume(start = 6.4743836e-05, fixed = true)),
                external_jugular_vein_R98(volume(start = 4.5057945e-06, fixed = true)),
                subclavian_vein_R100(volume(start = 6.6995094e-06, fixed = true)),
                axillary_vein_R102(volume(start = 2.353918e-05, fixed = true)),
                brachial_vein_R104(volume(start = 4.514166e-06, fixed = true)),
                brachial_vein_R114(volume(start = 4.0400864e-06, fixed = true)),
                brachial_vein_R108(volume(start = 6.217446e-07, fixed = true)),
                ulnar_vein_T7_R110(volume(start = 4.9813134e-06, fixed = true)),
                brachial_vein_R118(volume(start = 3.893827e-07, fixed = true)),
                radial_vein_T3_R120(volume(start = 2.9923256e-06, fixed = true)),
                vertebral_vein_L126(volume(start = 8.71327e-06, fixed = true)),
                brachiocephalic_vein_L128(volume(start = 1.706454e-06, fixed = true)),
                subclavian_vein_L130(volume(start = 1.4600764e-06, fixed = true)),
                internal_jugular_vein_L156(volume(start = 3.9385213e-05, fixed = true)),
                external_jugular_vein_L132(volume(start = 4.428562e-06, fixed = true)),
                subclavian_vein_L134(volume(start = 6.5440818e-06, fixed = true)),
                axillary_vein_L136(volume(start = 2.3860504e-05, fixed = true)),
                brachial_vein_L138(volume(start = 4.523424e-06, fixed = true)),
                brachial_vein_L148(volume(start = 4.0493737e-06, fixed = true)),
                brachial_vein_L142(volume(start = 6.2301e-07, fixed = true)),
                ulnar_vein_T7_L144(volume(start = 4.989852e-06, fixed = true)),
                brachial_vein_L152(volume(start = 3.9027998e-07, fixed = true)),
                radial_vein_T3_L154(volume(start = 2.999753e-06, fixed = true)),
                mesenteric_artery(q_in(start = 3.157174e-06, fixed = true), volume(start = 6.5595564e-06, fixed = true)),
                splanchnic_tissue(volume(start = 0.0002529921, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                splanchnic_vein(volume(start = 3.759801e-05, fixed = true)),
                coronary_arteries(q_in(start = 1.8982256e-06, fixed = true), volume(start = 3.7181017e-08, fixed = true)),
                cardiac_tissue(volume(start = 0.00011313317, fixed = true), phi_delayed(start = 0.40262666, fixed = true)),
                coronary_veins(volume(start = 6.792444e-08, fixed = true)),
                brachial_L82_HeartLevel(q_in(start = -3.916151e-08, fixed = true), volume(start = 2.9370017e-06, fixed = true))),
              heartComponent(
                tricuspidValve(open(start = false, fixed = true)),
                pulmonaryValve(open(start = false, fixed = true), BP_max(start = 0.0, fixed = true), BP_min(start = 26600.0, fixed = true), CO_acc(start = 0.0, fixed = true)),
                mitralValve(open(start = false, fixed = true), BP_max(start = 6015.2974, fixed = true), BP_min(start = 5936.781, fixed = true), CO_acc(start = 3.97813e-05, fixed = true)),
                aorticValve(open(start = false, fixed = true), BP_max(start = 14246.663, fixed = true), BP_min(start = 12801.991, fixed = true), CO_acc(start = 3.986415e-05, fixed = true)),
                ventricles(
                  LV_wall(ym(start = 3.3174808, fixed = true), SL(start = 2.3957844, fixed = true)),
                  SEP_wall(SL(start = 1.9067048, fixed = true)),
                  RV_wall(SL(start = 1.6832005, fixed = true)),
                  calciumMechanics(tm(start = 0.46741387, fixed = true)), V_LV(start = 0.00017316084, fixed = true), V_RV(start = 5.449112e-05, fixed = true), currentWork_LV(start = 0.3549872, fixed = true), currentWork_RV(start = 0.14114492, fixed = true)),
                ra(volume(start = 1.0773902e-05, fixed = true), currentWork(start = 1.6675541, fixed = true)),
                la(volume(start = 0.00047969446, fixed = true), currentWork(start = -208.08049, fixed = true)),
                idealValve_deactivable(open(start = false, fixed = true)),
                idealValve_deactivable1(open(start = false, fixed = true)),
                sa_node(t0(start = 0.5474139, fixed = true), cardiac_cycle(start = 0.81450385, fixed = true))),
              pulmonaryComponent(
              deadVolume=0.002,
                c_pa(volume(start = 8.682211e-05, fixed = true)),
                c_pv(volume(start=1.519652e-03 + settings.V_PV_init +
                      pulmonaryComponent.deadVolume, fixed=true))),
              simplestLymphaticDynamicSpeedUp(p_vc_mean(start = 2790.2698, fixed = true), J1_s(start = 1.5008247e-08, fixed = true), v_isf(start = 0.10562639, fixed = true), v_lymph(start = 0.0035762948, fixed = true), timeSpedUp(start = 2880800.0, fixed = true), q_int(start = 0.1019317, fixed = true), v_drained(start = 0.0, fixed = true), p_vc_s(start = 275.19324, fixed = true), J1s_s(start = 1.5007667e-09, fixed = true), t0(start = 0.09, fixed = true)),
              settings(V_PV_init = 0));
          annotation ();
        end CVS_renalRegulation_HFrEF_15_ss;

        model CVS_renalRegulation_HFrEF_baro
          extends Renals_HF(
            useAutonomousPhi(y=true));
          annotation (experiment(
              Interval=0.02,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode"));
        end CVS_renalRegulation_HFrEF_baro;

        package Obsolete
          model CVS_renalRegulation
            extends CardiovascularSystem_Renals(useAutonomousPhi(y=false));
            Physiolibrary.Hydraulic.Sensors.PressureMeasure p_arterial
              annotation (Placement(transformation(extent={{-64,24},{-84,44}})));
            Modelica.Blocks.Continuous.LimPID PID(
              controllerType=Modelica.Blocks.Types.SimpleController.PI,
              k=1e-6,
              Ti=15,
              yMax=1e-7,
              yMin=-1e-7,
              initType=Modelica.Blocks.Types.Init.InitialOutput,
              y_start=0)
              annotation (Placement(transformation(extent={{-138,54},{-118,74}})));
            Physiolibrary.Types.Constants.PressureConst pressure(k(displayUnit=
                    "Pa") = 13000)
              annotation (Placement(transformation(extent={{-160,58},{-152,66}})));
            Modelica.Blocks.Continuous.LowpassButterworth lowpassButterworth(
              f=0.1,
              initType=Modelica.Blocks.Types.Init.InitialOutput,
              y_start=13000)
              annotation (Placement(transformation(extent={{-84,42},{-104,62}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedPump
                                                    unlimitedPump(
                useSolutionFlowInput=true, SolutionFlow(displayUnit="ml/min")=
                1e-06)
              annotation (Placement(transformation(extent={{-122,-18},{-102,2}})));
            Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump1(
                useSolutionFlowInput=true) annotation (Placement(transformation(
                    extent={{-122,-42},{-102,-22}})));
            Physiolibrary.Hydraulic.Components.ElasticVessel elasticVessel
              annotation (Placement(transformation(extent={{-98,-42},{-78,-22}})));
            Modelica.Blocks.Math.Gain gain(k=1) annotation (Placement(
                  transformation(
                  extent={{-10,-10},{10,10}},
                  rotation=270,
                  origin={-112,26})));
            Physiolibrary.Hydraulic.Sensors.FlowMeasure flowMeasure
              annotation (Placement(transformation(extent={{-94,2},{-74,-18}})));
          equation
            connect(pressure.y,PID. u_s)
              annotation (Line(points={{-151,62},{-142,62},{-142,64},{-140,64}},
                                                             color={0,0,127}));
            connect(lowpassButterworth.u,p_arterial. pressure)
              annotation (Line(points={{-82,52},{-88,52},{-88,30},{-80,30}},
                                                               color={0,0,127}));
            connect(lowpassButterworth.y,PID. u_m) annotation (Line(points={{-105,52},
                    {-128,52}},                         color={0,0,127}));
            connect(p_arterial.q_in, SystemicComponent.port_a) annotation (Line(
                points={{-70,28},{-58,28}},
                color={0,0,0},
                thickness=1));
            connect(elasticVessel.q_in, unlimitedPump1.q_out) annotation (Line(
                points={{-88,-32},{-102,-32}},
                color={0,0,0},
                thickness=1));
            connect(PID.y, gain.u) annotation (Line(points={{-117,64},{-112,64},{
                    -112,38}}, color={0,0,127}));
            connect(unlimitedPump.q_out, flowMeasure.q_in) annotation (Line(
                points={{-102,-8},{-94,-8}},
                color={0,0,0},
                thickness=1));
            connect(flowMeasure.volumeFlow, unlimitedPump1.solutionFlow)
              annotation (Line(points={{-84,-20},{-112,-20},{-112,-25}}, color={0,
                    0,127}));
            connect(gain.y, unlimitedPump.solutionFlow)
              annotation (Line(points={{-112,15},{-112,-1}}, color={0,0,127}));
            connect(flowMeasure.q_out, heartComponent.sv) annotation (Line(
                points={{-74,-8},{24,-8},{24,-16.4},{-16,-16.4}},
                color={0,0,0},
                thickness=1));
          end CVS_renalRegulation;

          model Renals_CHF "Renals with congestive heart failure"
            extends CardiovascularSystem_Renals(heartComponent(ventricles(LV_wall(
                      contractilityFraction=0.4), SEP_wall(contractilityFraction=
                        (0.4 + 1)/2))), settings(baro_tau_s=10,
                  heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 3500));
          end Renals_CHF;

          model Renals_CHF_VolumeCongestion
            extends Obsolete.Renals_CHF(
                               settings(V_PV_init=0));
            Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump(
                useSolutionFlowInput=true, SolutionFlow(displayUnit="m3/s"))
              annotation (Placement(transformation(extent={{60,-104},{40,-84}})));
            Modelica.Blocks.Sources.Step step(
              height=1e-05,
              offset=0,
              startTime=100)
              annotation (Placement(transformation(extent={{94,-82},{74,-62}})));
          equation
            connect(step.y, unlimitedPump.solutionFlow) annotation (Line(points={
                    {73,-72},{50,-72},{50,-87}}, color={0,0,127}));
            connect(unlimitedPump.q_out, heartComponent.sv) annotation (Line(
                points={{40,-94},{24,-94},{24,-16},{16,-16},{16,-16.4},{-16,-16.4}},
                color={0,0,0},
                thickness=1));

          end Renals_CHF_VolumeCongestion;

          model CVS_renalRegulation_healthy
            extends CVS_renalRegulation_HFrEF_noBaro(
              initVol(displayUnit="l") = 2.513001e-05,
              BPM_cutOff=15998.6864898,
              LVfunctionFraction=1);
          end CVS_renalRegulation_healthy;

          model Renals_HFpEF "Renals with pEF heart failure"
            extends CardiovascularSystem_Renals(
              heartComponent(
                ventricles(
                  LV_wall(k_passive=stiffeningFactor*settings.heart_vntr_k_passive),
                  SEP_wall(k_passive=(stiffeningFactor + 1)/2*settings.heart_vntr_k_passive))),
                settings(
                  baro_tau_s=10),
              useAutonomousPhi(y=false));
            parameter Physiolibrary.Types.Fraction  stiffeningFactor=1
              "Stiffening factor of ventricular wall";
          end Renals_HFpEF;

          model CVS_renalRegulation_HFpEF
            extends Renals_HF(
                  heartComponent(
                ventricles(
                  LV_wall(k_passive=stiffeningFactor*settings.heart_vntr_k_passive),
                  SEP_wall(k_passive=(stiffeningFactor + 1)/2*settings.heart_vntr_k_passive))),
              unlimitedPump(useSolutionFlowInput=true),
              volumeInfusionRamp(height=1e-6, startTime=60),
              settings(V_PV_init=initVol, baro_tau_s=10),
              addedVolume(volume_start=initVol));

            parameter Physiolibrary.Types.Fraction LVfunctionFraction=0.4;
            parameter Physiolibrary.Types.Fraction RVfunctionFraction=1;

          parameter Physiolibrary.Types.Pressure BPM_cutOff=13332.2387415;
            parameter Physiolibrary.Types.Volume initVol=0
              "Volume adjustment";
            parameter Physiolibrary.Types.Fraction  stiffeningFactor=1
              "Stiffening factor of ventricular wall";

          equation
           if time > 100 and brachial_pressure_mean > BPM_cutOff then
             terminate("Pressure is already too high");
           end if;
            annotation (experiment(
                StopTime=6000,
                Interval=0.02,
                Tolerance=1e-07,
                __Dymola_Algorithm="Cvode"));
          end CVS_renalRegulation_HFpEF;

          model CVS_renalRegulation_HFpEF_1700_LVOnly
            extends Obsolete.CVS_renalRegulation_HFpEF(
                                              stiffeningFactor=17, heartComponent(
                  ventricles(SEP_wall(k_passive=settings.heart_vntr_k_passive))));
            annotation (experiment(
                StopTime=36000,
                Interval=0.02,
                Tolerance=1e-06,
                __Dymola_Algorithm="Cvode"));
          end CVS_renalRegulation_HFpEF_1700_LVOnly;

          model CVS_renalRegulation_HFpEF_baro
            extends Renals_HF(
                  heartComponent(
                ventricles(
                  LV_wall(k_passive=stiffeningFactor*settings.heart_vntr_k_passive),
                  SEP_wall(k_passive=(stiffeningFactor + 1)/2*settings.heart_vntr_k_passive))),
              unlimitedPump(useSolutionFlowInput=true),
              volumeInfusionRamp(height=1e-6, startTime=60),
              settings(V_PV_init=initVol, baro_tau_s=10),
              addedVolume(volume_start=initVol),
              useAutonomousPhi(y=true));

            parameter Physiolibrary.Types.Fraction LVfunctionFraction=0.4;
            parameter Physiolibrary.Types.Fraction RVfunctionFraction=1;

          parameter Physiolibrary.Types.Pressure BPM_cutOff=13332.2387415;
            parameter Physiolibrary.Types.Volume initVol=0.001
              "Volume adjustment";
            parameter Physiolibrary.Types.Fraction  stiffeningFactor=26
              "Stiffening factor of ventricular wall";

          equation
           if time > 100 and brachial_pressure_mean > BPM_cutOff then
             terminate("Pressure is already too high");
           end if;
            annotation (experiment(
                StopTime=6000,
                Interval=0.02,
                Tolerance=1e-07,
                __Dymola_Algorithm="Cvode"));
          end CVS_renalRegulation_HFpEF_baro;
        end Obsolete;

        model CVS_renalRegulation_HFdilated_baro
          extends Renals_HF(
            heartComponent(ventricles(LV_wall(Amref=AmRefFactor*86), SEP_wall(
                    Amref=(AmRefFactor + 1)/2*39))),
            unlimitedPump(useSolutionFlowInput=true),
            volumeInfusionRamp(height=1e-6, startTime=60),
            settings(V_PV_init=initVol, baro_tau_s=10),
            addedVolume(volume_start=initVol),
            useAutonomousPhi(y=true));

        parameter Physiolibrary.Types.Pressure BPM_cutOff=13332.2387415;
          parameter Physiolibrary.Types.Volume initVol=0
            "Volume adjustment";
          parameter Physiolibrary.Types.Fraction AmRefFactor=1.2
            "Dilation factor";

        equation
         if time > 100 and brachial_pressure_mean > BPM_cutOff then
           terminate("Pressure is already too high");
         end if;
          annotation (experiment(
              StopTime=6000,
              Interval=0.02,
              Tolerance=1e-07,
              __Dymola_Algorithm="Cvode"));
        end CVS_renalRegulation_HFdilated_baro;

        model CVS_renalRegulation_HFpEF_baro_BaroSpeedUpExperiment
          extends Obsolete.CVS_renalRegulation_HFpEF_baro(
                                                 initVol=0.0012,
              volumeInfusionRamp(startTime=300));
        end CVS_renalRegulation_HFpEF_baro_BaroSpeedUpExperiment;

        package Experiments
          model CVS_TestBaroConvergence
            extends CardiovascularSystem_Renals_ss(SystemicComponent(renal_R178(
                   tau_R_K_afferent=6), renal_L166(tau_R_K_afferent=6)),
                settings(baro_fsn=0.036));
          end CVS_TestBaroConvergence;

          model CVS_HFrEF_15_ExerciseCapacity "Exercise base HR is the healthy HR"
            extends CVS_renalRegulation_HFrEF_15_ss(
                SystemicComponent(
                UseExerciseInput=true,
                cardiac_tissue(UseExercise=true),
                internal_iliac_T1_R218(UseExercise=true),
                profundus_T2_R224(UseExercise=true),
                anterior_tibial_T3_R230(UseExercise=true),
                posterior_tibial_T4_R236(UseExercise=true),
                posterior_tibial_T4_L214(UseExercise=true),
                anterior_tibial_T3_L208(UseExercise=true),
                profundus_T2_L202(UseExercise=true),
                internal_iliac_T1_L196(UseExercise=true),
                UseBaroreflexOutput=false),
              useAutonomousPhi(y=true),
              phi_fixed(nperiod=0, offset=settings.phi0));

            replaceable Components.Signals.Stepping Exercise(
              startTime=30,
              interval=40,
              increment=0.1,
              maxVal=1) constrainedby Modelica.Blocks.Interfaces.SO
              annotation (Placement(transformation(extent={{-100,52},{-80,72}})));
            output Modelica.Units.SI.Time TEjection=heartComponent.aorticValve.Ts;
            output Modelica.Units.SI.Time TFilling=heartComponent.mitralValve.Ts;
            Physiolibrary.Types.VolumeFlowRate q_exercised_avg;
            Physiolibrary.Types.VolumeFlowRate q_exercised=
              SystemicComponent.internal_iliac_T1_R218.port_a.q + SystemicComponent.profundus_T2_R224.port_a.q + SystemicComponent.anterior_tibial_T3_R230.port_a.q + SystemicComponent.posterior_tibial_T4_R236.port_a.q + SystemicComponent.posterior_tibial_T4_L214.port_a.q + SystemicComponent.anterior_tibial_T3_L208.port_a.q + SystemicComponent.profundus_T2_L202.port_a.q + SystemicComponent.internal_iliac_T1_L196.port_a.q;
            Modelica.Blocks.Math.Gain gain(k=0.75)
              annotation (Placement(transformation(extent={{-68,92},{-48,112}})));
            Modelica.Blocks.Math.Add add
              annotation (Placement(transformation(extent={{-20,98},{0,118}})));
          equation
            der(q_exercised_avg)*5 = q_exercised - q_exercised_avg;

            connect(gain.y,add. u2)
              annotation (Line(points={{-47,102},{-34,102},{-34,102},{-22,102}},
                                                           color={0,0,127}));
            connect(phi_fixed.y,add. u1) annotation (Line(points={{-35,84},{-34,84},{-34,114},
                    {-22,114}},         color={0,0,127}));
            connect(Exercise.y,gain. u) annotation (Line(points={{-79,62},{-78,62},{-78,102},
                    {-70,102}},         color={0,0,127}));
            connect(add.y, switch1.u1) annotation (Line(points={{1,108},{8,108},{8,70.2},{
                    14.3,70.2}},        color={0,0,127}));
            connect(Exercise.y, SystemicComponent.exercise_input) annotation (Line(points=
                   {{-79,62},{-40,62},{-40,36},{-28,36}}, color={0,0,127}));
          end CVS_HFrEF_15_ExerciseCapacity;

          model CVS_HFrEF_15_ExerciseCapacity_Scaled "Exercise baseline HR is the compensated steady state HR"
            extends CVS_HFrEF_15_ExerciseCapacity(phi_fixed(offset=
                    Phi_compensated), gain(k=1 - Phi_compensated));
            parameter Physiolibrary.Types.Fraction Phi_compensated=0.4
              "Starting phi for exercise, long-term baro compensated";
          end CVS_HFrEF_15_ExerciseCapacity_Scaled;

          model Test
          Modelica.Blocks.Sources.Trapezoid phi_fixed(
              offset=Phi_compensated,
              nperiod=0,
              amplitude=0.75,
              rising=2,
              width=20,
              falling=2,
              period=200,
              startTime=20)
              "Phi for when the model is not using the autonomous feedback phi from baroreflex"
              annotation (Placement(transformation(extent={{-34,-12},{-14,8}})));
            inner Components.Settings settings(
              V_PV_init(displayUnit="l") = 0,
              baro_tau_s(displayUnit="s") = 10,
              baro_f1=3.625e-03,
              initByPressure=false,
              veins_delayed_activation=false,
              heart_vntr_D_A_maxAct(displayUnit="Pa/m3") = 4.600005e+03,
              heart_vntr_D_0_maxAct=1.225000e-03,
              heart_vntr_TS_maxAct(displayUnit="s") = 1.047740e-01,
              heart_vntr_TR_maxAct(displayUnit="s") = 7.597690e-02,
              eta_vc=2.101054e-01,
              tissues_eta_Ra=3.145225e+00,
              tissues_eta_Rv=2.806250e+00,
              tissues_eta_C=5.708013e-01,
              tissues_chi_Ra(displayUnit="1") = 2.481250e+01,
              tissues_chi_Rv=1.384375e+01,
              tissues_chi_C=-3.125000e-02,
              heart_R_LA(displayUnit="(mmHg.s)/ml") = 1.655068e+06,
              heart_R_vlv(displayUnit="(mmHg.s)/ml") = 7.723515e+05,
              heart_vntr_D_0=7.479470e+00,
              heart_vntr_D_A=1.298533e+03,
              heart_vntr_TS=3.246875e-01,
              heart_vntr_TR(displayUnit="s") = 4.031250e-01,
              heart_atr_D_0=2.651364e+07,
              heart_atr_D_A=7.621357e+07,
              syst_TPR=1.287333e+08,
              syst_TR_frac(displayUnit="1") = 5.227710e+00,
              pulm_C_PA=1.635189e-08,
              pulm_R(displayUnit="(Pa.s)/m3") = 1.019753e+07,
              heart_vntr_k_passive=5.000000e+00,
              heart_vntr_SLcollagen=2.087500e+00,
              heart_vntr_PConcollagen=2.642812e+01,
              heart_vntr_PExpcollagen=2.481250e+00,
              heart_atr_TS=0.08,
              dummy=2,
              baro_fsn(displayUnit="1/min") = 0.0355333333,
              syst_art_k_E=0.4402957,
              HR_max=3.1666666666667,
              chi_phi=0.7,
              heart_R_RA(displayUnit="(dyn.s)/cm5") = settings.heart_R_LA,
              pulm_q_nom_maxq(displayUnit="l/min") = 0.00033333333333333,
              veins_UseNonLinearVeins=true,
              veins_linearE_rel=765,
              veins_linearV0_rel=0.793,
              veins_activation_tau=1,
              heart_vntr_Tact_maxAct=8.000000e-02,
              heart_vntr_Lsref=1.9,
              heart_atr_TR=2.631250e-01,
              heart_vntr_Tact=8.000000e-02,
              syst_tissues_hydrostaticLevel_correction=1,
              tissues_SV_nom=0.000695,
              pulm_C_PV=3.194206e-07,
              syst_abd_P_th_ratio=0.8,
              heart_R_A_vis(displayUnit="(dyn.s)/cm5") = 50000,
              heart_vntr_L0=1.6,
              pulm_P_PV_nom=1333.22387415,
              height=1.7132,
              tissues_CO_nom=0.000105,
              EvaluateFunctionalParams=true,
              HR_nominal=1.0666666666667,
              UseNonLinear_TissuesCompliance=true,
              baro_g=0.606258,
              baro_useAbsolutePressureTerm=false,
              baro_xi_delta0=2.688000e-01,
              pulm_R_exp=9.150000e-01,
              syst_art_UseVasoconstrictionEffect=true,
              tissues_UseStraighteningReaction2Phi=true,
              tissues_ZPV_nom=0.00210124,
              tissues_gamma=0.5,
              tissues_tau_R(displayUnit="s") = 0,
              veins_C_phi=0.09)
              annotation (Placement(transformation(extent={{-78,-6},{-58,14}})));
            Modelica.Blocks.Logical.Switch switch1
              annotation (Placement(transformation(extent={{38.25,1.75},{57.75,-17.75}})));
            Modelica.Blocks.Sources.BooleanExpression useAutonomousPhi(y=true)
              annotation (Placement(transformation(extent={{-4,-18},{16,2}})));
            replaceable Components.Signals.Stepping Exercise(
              startTime=30,
              interval=40,
              increment=0.1,
              maxVal=1) constrainedby Components.Signals.Stepping
              annotation (Placement(transformation(extent={{-78,-34},{-58,-14}})));
            Modelica.Blocks.Math.Gain gain(k=1 - Phi_compensated)
              annotation (Placement(transformation(extent={{-46,6},{-26,26}})));
            Modelica.Blocks.Math.Add add
              annotation (Placement(transformation(extent={{2,12},{22,32}})));
            Components.Signals.ConditionalConnection condHRPhi(
              disconnectedValue=settings.phi0,
              delayTransport_Enabled=false,
              delayTransport_Time=settings.Td_phi_hr,
              delayIntegral_Enabled=false,
              delayInt_Act=settings.Td_phi_hr,
              phi0=settings.phi0) annotation (Placement(transformation(extent={{46,
                      -52.741},{34,-42.074}})));
            replaceable Components.Subsystems.Baroreflex.HeartRate_HRMinMax
                                                                   heartRate(
              phi0=settings.phi0,
              HR_max=settings.HR_max,
              HR_nom=settings.HR_nominal)
              constrainedby Components.Subsystems.Baroreflex.HeartRate_HRMinMax
              annotation (Placement(transformation(extent={{0,-54},{-12,-42}})));
            parameter Physiolibrary.Types.Fraction Phi_compensated=0.4
              "Starting phi for exercise, long-term baro compensated";
          equation
            connect(useAutonomousPhi.y,switch1. u2) annotation (Line(points={{17,-8},{36.3,
                    -8}},                    color={255,0,255}));
            connect(phi_fixed.y,switch1. u3) annotation (Line(points={{-13,-2},{-10,-2},{-10,
                    4},{26,4},{26,0},{32,0},{32,-0.2},{36.3,-0.2}},
                                        color={0,0,127}));
            connect(gain.y,add. u2)
              annotation (Line(points={{-25,16},{-12,16},{-12,16},{0,16}},
                                                           color={0,0,127}));
            connect(phi_fixed.y,add. u1) annotation (Line(points={{-13,-2},{-12,-2},{-12,28},
                    {0,28}},            color={0,0,127}));
            connect(Exercise.y,gain. u) annotation (Line(points={{-57,-24},{-56,-24},{-56,
                    16},{-48,16}},      color={0,0,127}));
            connect(add.y,switch1. u1) annotation (Line(points={{23,22},{30,22},{30,-15.8},
                    {36.3,-15.8}},      color={0,0,127}));
            connect(condHRPhi.y,heartRate. phi) annotation (Line(points={{33.4,
                    -48.0001},{16,-48.0001},{16,-48},{0,-48}},
                                                color={0,0,127}));
            connect(switch1.y,condHRPhi. u) annotation (Line(points={{58.725,-8},
                    {70,-8},{70,-48.0001},{47.2,-48.0001}},
                                                 color={0,0,127}));
            annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
                  coordinateSystem(preserveAspectRatio=false)));
          end Test;

          model CVS_HFrEF_15_ExCap_Sc_Corvia
            extends CVS_HFrEF_15_ExerciseCapacity_Scaled;
            replaceable Physiolibrary.Hydraulic.Components.Resistor
              r_SystemicVenousInflow(useConductanceInput=true, Resistance=
                  settings.heart_R_RA)
              constrainedby Physiolibrary.Hydraulic.Components.Resistor
              "Resistance of the inflow to the atria"
              annotation (Placement(transformation(extent={{-10,-10},{10,10}},
                  rotation=180,
                  origin={82,-52})));
            replaceable Modelica.Blocks.Sources.Ramp shuntConductance(
              offset=0,
              startTime=0,
              height=3.7503078792283e-08,
              duration=1) constrainedby Modelica.Blocks.Sources.Ramp
              annotation (Placement(transformation(extent={{10,-80},{30,-60}})));
          equation
            connect(r_SystemicVenousInflow.q_in, SystemicComponent.port_b)
              annotation (Line(
                points={{92,-52},{96,-52},{96,28},{18,28}},
                color={0,0,0},
                thickness=1));
            connect(pulmonaryComponent.port_b,r_SystemicVenousInflow. q_out)
              annotation (Line(
                points={{-14,-52},{72,-52}},
                color={0,0,0},
                thickness=1));
            connect(shuntConductance.y,r_SystemicVenousInflow. cond) annotation (
                Line(points={{31,-70},{82,-70},{82,-58}},color={0,0,127}));
          end CVS_HFrEF_15_ExCap_Sc_Corvia;

          model CVS_HFrEF_15_ExCap_Sc_Corvia_IncRPulm
            "With increased pulmonary resistance to test the pulmonary vasodilatation hypothesis"
            extends CVS_HFrEF_15_ExCap_Sc_Corvia(settings(pulm_R=1.019753e+07*
                    1.2));
            annotation (experiment(
                StopTime=60,
                Interval=0.02,
                Tolerance=1e-06,
                __Dymola_Algorithm="Cvode"));
          end CVS_HFrEF_15_ExCap_Sc_Corvia_IncRPulm;

          model CVS_HFrEF_15_ExCap_Sc_Corvia_DecRPulm
            "With reduced pulmonary resistance to test the pulmonary vasodilatation hypothesis"
            extends CVS_HFrEF_15_ExCap_Sc_Corvia(settings(pulm_R=1.019753e+07*
                    0.8));
          end CVS_HFrEF_15_ExCap_Sc_Corvia_DecRPulm;

          model CVS_ExCap_Corvia
            extends CardiovascularSystem_Renals_ss(
                SystemicComponent(
                UseExerciseInput=true,
                cardiac_tissue(UseExercise=true),
                internal_iliac_T1_R218(UseExercise=true),
                profundus_T2_R224(UseExercise=true),
                anterior_tibial_T3_R230(UseExercise=true),
                posterior_tibial_T4_R236(UseExercise=true),
                posterior_tibial_T4_L214(UseExercise=true),
                anterior_tibial_T3_L208(UseExercise=true),
                profundus_T2_L202(UseExercise=true),
                internal_iliac_T1_L196(UseExercise=true),
                UseBaroreflexOutput=false),
              useAutonomousPhi(y=true),
              phi_fixed(nperiod=0, offset=settings.phi0));

            replaceable Components.Signals.Stepping Exercise(
              startTime=30,
              interval=40,
              increment=0.1,
              maxVal=1) constrainedby Modelica.Blocks.Interfaces.SO
              annotation (Placement(transformation(extent={{-100,52},{-80,72}})));
            output Modelica.Units.SI.Time TEjection=heartComponent.aorticValve.Ts;
            output Modelica.Units.SI.Time TFilling=heartComponent.mitralValve.Ts;
            Physiolibrary.Types.VolumeFlowRate q_exercised_avg;
            Physiolibrary.Types.VolumeFlowRate q_exercised=
              SystemicComponent.internal_iliac_T1_R218.port_a.q + SystemicComponent.profundus_T2_R224.port_a.q + SystemicComponent.anterior_tibial_T3_R230.port_a.q + SystemicComponent.posterior_tibial_T4_R236.port_a.q + SystemicComponent.posterior_tibial_T4_L214.port_a.q + SystemicComponent.anterior_tibial_T3_L208.port_a.q + SystemicComponent.profundus_T2_L202.port_a.q + SystemicComponent.internal_iliac_T1_L196.port_a.q;
            Modelica.Blocks.Math.Gain gain(k=0.75)
              annotation (Placement(transformation(extent={{-68,92},{-48,112}})));
            Modelica.Blocks.Math.Add add
              annotation (Placement(transformation(extent={{-20,98},{0,118}})));
            replaceable Physiolibrary.Hydraulic.Components.Resistor
              r_SystemicVenousInflow(useConductanceInput=true, Resistance=
                  settings.heart_R_RA)
              constrainedby Physiolibrary.Hydraulic.Components.Resistor
              "Resistance of the inflow to the atria"
              annotation (Placement(transformation(extent={{-10,-10},{10,10}},
                  rotation=180,
                  origin={82,-52})));
            replaceable Modelica.Blocks.Sources.Ramp shuntConductance(
              offset=0,
              startTime=0,
              height=3.7503078792283e-08,
              duration=1) constrainedby Modelica.Blocks.Sources.Ramp
              annotation (Placement(transformation(extent={{10,-80},{30,-60}})));
          equation
            der(q_exercised_avg)*5 = q_exercised - q_exercised_avg;

            connect(gain.y,add. u2)
              annotation (Line(points={{-47,102},{-34,102},{-34,102},{-22,102}},
                                                           color={0,0,127}));
            connect(phi_fixed.y,add. u1) annotation (Line(points={{-35,84},{-34,84},{-34,114},
                    {-22,114}},         color={0,0,127}));
            connect(Exercise.y,gain. u) annotation (Line(points={{-79,62},{-78,62},{-78,102},
                    {-70,102}},         color={0,0,127}));
            connect(add.y, switch1.u1) annotation (Line(points={{1,108},{8,108},{8,70.2},{
                    14.3,70.2}},        color={0,0,127}));
            connect(Exercise.y, SystemicComponent.exercise_input) annotation (Line(points=
                   {{-79,62},{-40,62},{-40,36},{-28,36}}, color={0,0,127}));

            connect(r_SystemicVenousInflow.q_in, SystemicComponent.port_b)
              annotation (Line(
                points={{92,-52},{96,-52},{96,28},{18,28}},
                color={0,0,0},
                thickness=1));
            connect(pulmonaryComponent.port_b,r_SystemicVenousInflow. q_out)
              annotation (Line(
                points={{-14,-52},{72,-52}},
                color={0,0,0},
                thickness=1));
            connect(shuntConductance.y,r_SystemicVenousInflow. cond) annotation (
                Line(points={{31,-70},{82,-70},{82,-58}},color={0,0,127}));
            annotation (experiment(
                StopTime=450,
                Interval=0.04,
                Tolerance=1e-06,
                __Dymola_Algorithm="Cvode"));
          end CVS_ExCap_Corvia;

          model CVS_ExCap_Corvia_IncrRPulm
            "With increased pulmonary resistance to test the pulmonary vasodilatation hypothesis"
            extends CVS_ExCap_Corvia(settings(pulm_R=1.019753e+07*1.2));
          end CVS_ExCap_Corvia_IncrRPulm;

          model CVS_ExCap_Corvia_DecRPulm
            "With reduced pulmonary resistance to test the pulmonary vasodilatation hypothesis"
            extends CVS_ExCap_Corvia(settings(pulm_R=1.019753e+07*0.8));
          end CVS_ExCap_Corvia_DecRPulm;

          model CVS_HFpEF1000_ExCap
            extends CVS_HFpEF_1000_ss(
                SystemicComponent(
                UseExerciseInput=true,
                cardiac_tissue(UseExercise=true),
                internal_iliac_T1_R218(UseExercise=true),
                profundus_T2_R224(UseExercise=true),
                anterior_tibial_T3_R230(UseExercise=true),
                posterior_tibial_T4_R236(UseExercise=true),
                posterior_tibial_T4_L214(UseExercise=true),
                anterior_tibial_T3_L208(UseExercise=true),
                profundus_T2_L202(UseExercise=true),
                internal_iliac_T1_L196(UseExercise=true),
                UseBaroreflexOutput=false),
              useAutonomousPhi(y=true),
              phi_fixed(nperiod=0, offset=Phi_compensated));

            replaceable Components.Signals.Stepping Exercise(
              startTime=30,
              interval=40,
              increment=0.1,
              maxVal=1) constrainedby Modelica.Blocks.Interfaces.SO
              annotation (Placement(transformation(extent={{-100,52},{-80,72}})));
            output Modelica.Units.SI.Time TEjection=heartComponent.aorticValve.Ts;
            output Modelica.Units.SI.Time TFilling=heartComponent.mitralValve.Ts;
            Physiolibrary.Types.VolumeFlowRate q_exercised_avg;
            Physiolibrary.Types.VolumeFlowRate q_exercised=
              SystemicComponent.internal_iliac_T1_R218.port_a.q + SystemicComponent.profundus_T2_R224.port_a.q + SystemicComponent.anterior_tibial_T3_R230.port_a.q + SystemicComponent.posterior_tibial_T4_R236.port_a.q + SystemicComponent.posterior_tibial_T4_L214.port_a.q + SystemicComponent.anterior_tibial_T3_L208.port_a.q + SystemicComponent.profundus_T2_L202.port_a.q + SystemicComponent.internal_iliac_T1_L196.port_a.q;
            Modelica.Blocks.Math.Gain gain(k=1 - Phi_compensated)
              annotation (Placement(transformation(extent={{-68,92},{-48,112}})));
            Modelica.Blocks.Math.Add add
              annotation (Placement(transformation(extent={{-20,98},{0,118}})));
            replaceable Physiolibrary.Hydraulic.Components.Resistor
              r_SystemicVenousInflow(useConductanceInput=true, Resistance=
                  settings.heart_R_RA)
              constrainedby Physiolibrary.Hydraulic.Components.Resistor
              "Resistance of the inflow to the atria"
              annotation (Placement(transformation(extent={{-10,-10},{10,10}},
                  rotation=180,
                  origin={82,-52})));
            replaceable Modelica.Blocks.Sources.Ramp shuntConductance(
              offset=0,
              startTime=0,
              height=0,
              duration=1) constrainedby Modelica.Blocks.Sources.Ramp
              annotation (Placement(transformation(extent={{10,-80},{30,-60}})));
            parameter Physiolibrary.Types.Fraction Phi_compensated=0.30;
          equation
            der(q_exercised_avg)*5 = q_exercised - q_exercised_avg;

            connect(gain.y,add. u2)
              annotation (Line(points={{-47,102},{-34,102},{-34,102},{-22,102}},
                                                           color={0,0,127}));
            connect(phi_fixed.y,add. u1) annotation (Line(points={{-35,84},{-34,84},{-34,114},
                    {-22,114}},         color={0,0,127}));
            connect(Exercise.y,gain. u) annotation (Line(points={{-79,62},{-78,62},{-78,102},
                    {-70,102}},         color={0,0,127}));
            connect(add.y, switch1.u1) annotation (Line(points={{1,108},{8,108},{8,70.2},{
                    14.3,70.2}},        color={0,0,127}));
            connect(Exercise.y, SystemicComponent.exercise_input) annotation (Line(points=
                   {{-79,62},{-40,62},{-40,36},{-28,36}}, color={0,0,127}));

            connect(r_SystemicVenousInflow.q_in, SystemicComponent.port_b)
              annotation (Line(
                points={{92,-52},{96,-52},{96,28},{18,28}},
                color={0,0,0},
                thickness=1));
            connect(pulmonaryComponent.port_b,r_SystemicVenousInflow. q_out)
              annotation (Line(
                points={{-14,-52},{72,-52}},
                color={0,0,0},
                thickness=1));
            connect(shuntConductance.y,r_SystemicVenousInflow. cond) annotation (
                Line(points={{31,-70},{82,-70},{82,-58}},color={0,0,127}));
            annotation (experiment(
                StopTime=450,
                Interval=0.04,
                Tolerance=1e-06,
                __Dymola_Algorithm="Cvode"));
          end CVS_HFpEF1000_ExCap;

          model CVS_HFpEF1000_ExCap_Corvia
            extends CVS_HFpEF1000_ExCap(shuntConductance(height=
                    3.7503078792283e-08));
          end CVS_HFpEF1000_ExCap_Corvia;

          model CVS_HFpEF1000_ExCap_Corvia_IncPulm
            extends CVS_HFpEF1000_ExCap_Corvia(settings(pulm_R=1.019753e+07*1.2));
          end CVS_HFpEF1000_ExCap_Corvia_IncPulm;

          model CVS_HFpEF1000_ExCap_Corvia_DecPulm
            extends CVS_HFpEF1000_ExCap_Corvia(settings(pulm_R=1.019753e+07*1.2));
          end CVS_HFpEF1000_ExCap_Corvia_DecPulm;

          model CVS_DilatedLV120_ExCap "Exercise base HR is the healthy HR"
            extends CVS_DilatedLV120(
              initVol=0.00088,
                SystemicComponent(
                UseExerciseInput=true,
                cardiac_tissue(UseExercise=true),
                internal_iliac_T1_R218(UseExercise=true),
                profundus_T2_R224(UseExercise=true),
                anterior_tibial_T3_R230(UseExercise=true),
                posterior_tibial_T4_R236(UseExercise=true),
                posterior_tibial_T4_L214(UseExercise=true),
                anterior_tibial_T3_L208(UseExercise=true),
                profundus_T2_L202(UseExercise=true),
                internal_iliac_T1_L196(UseExercise=true),
                UseBaroreflexOutput=false),
              useAutonomousPhi(y=true),
              phi_fixed(nperiod=0, offset=settings.phi0),
              volumeInfusionRamp(height=0));

            replaceable Components.Signals.Stepping Exercise(
              startTime=80,
              interval=40,
              increment=0.1,
              maxVal=1) constrainedby Modelica.Blocks.Interfaces.SO
              annotation (Placement(transformation(extent={{-100,52},{-80,72}})));
            output Modelica.Units.SI.Time TEjection=heartComponent.aorticValve.Ts;
            output Modelica.Units.SI.Time TFilling=heartComponent.mitralValve.Ts;
            Physiolibrary.Types.VolumeFlowRate q_exercised_avg;
            Physiolibrary.Types.VolumeFlowRate q_exercised=
              SystemicComponent.internal_iliac_T1_R218.port_a.q + SystemicComponent.profundus_T2_R224.port_a.q + SystemicComponent.anterior_tibial_T3_R230.port_a.q + SystemicComponent.posterior_tibial_T4_R236.port_a.q + SystemicComponent.posterior_tibial_T4_L214.port_a.q + SystemicComponent.anterior_tibial_T3_L208.port_a.q + SystemicComponent.profundus_T2_L202.port_a.q + SystemicComponent.internal_iliac_T1_L196.port_a.q;
            Modelica.Blocks.Math.Gain gain(k=0.75)
              annotation (Placement(transformation(extent={{-68,92},{-48,112}})));
            Modelica.Blocks.Math.Add add
              annotation (Placement(transformation(extent={{-20,98},{0,118}})));
          equation
            der(q_exercised_avg)*5 = q_exercised - q_exercised_avg;

            connect(gain.y,add. u2)
              annotation (Line(points={{-47,102},{-34,102},{-34,102},{-22,102}},
                                                           color={0,0,127}));
            connect(phi_fixed.y,add. u1) annotation (Line(points={{-35,84},{-34,84},{-34,114},
                    {-22,114}},         color={0,0,127}));
            connect(Exercise.y,gain. u) annotation (Line(points={{-79,62},{-78,62},{-78,102},
                    {-70,102}},         color={0,0,127}));
            connect(add.y, switch1.u1) annotation (Line(points={{1,108},{8,108},{8,70.2},{
                    14.3,70.2}},        color={0,0,127}));
            connect(Exercise.y, SystemicComponent.exercise_input) annotation (Line(points=
                   {{-79,62},{-40,62},{-40,36},{-28,36}}, color={0,0,127}));
          end CVS_DilatedLV120_ExCap;

          model UrineProduction
            extends CardiovascularSystem_Renals_ss;

          Physiolibrary.Types.VolumeFlowRate urineTotal = SystemicComponent.renal_L166.Q_urine*2;
          Physiolibrary.Types.VolumeFlowRate urineTotalAvg(displayUnit = "l/d");
          parameter Modelica.Units.SI.Time tau_urine = 5;

          equation
            der(urineTotalAvg)*tau_urine = urineTotal - urineTotalAvg;

          end UrineProduction;
        end Experiments;

        model CVS_HFpEF_600
          "A test case of serious HFpEF with V30 = 150ml (= nominal EDV)"
          extends Renals_HF(LV_stiff=10.0,LV_SLcollagen_f=0.95,LV_PConcollagen_f=1.1,LV_PExpcollagen_f=1.1);

        end CVS_HFpEF_600;

        model CVS_HFpEF_800 "A test case of serious HFpEF with V30 = 120ml"
          extends Renals_HF(LV_PConcollagen_f=1.0,
            LV_PExpcollagen_f=1.2,
            LV_SLcollagen_f=0.9,
            LV_stiff=15.0,
            settings(V_PV_init=0.0026),
            heartComponent(ra(enableCollagen=true, s=30), la(enableCollagen=
                    true, s=30)));

          annotation (experiment(
              StopTime=1200,
              Interval=0.05,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_HFpEF_800;

        model CVS_HFpEF_800_ss
          "Steady state initialization from 2021-07-14 11:15:13.141342 at time 1200.0"
          extends ADAN_main.SystemicTree.Variations.Renals.CVS_HFpEF_800(
              SystemicComponent(
                baroreflex_system(
                  baroreflex(phi_mean(start = 0.27994776, fixed = true), phi(start = 0.2807583, fixed = true), f1_adj(start = 0.0043587834, fixed = true)),
                  baroreceptor_aortic(fbr_auc(start = 13.41671, fixed = true), fbr_int(start = 13.416564, fixed = true), epsilon(start = 1.523588, fixed = true), s(start = 0.8418535, fixed = true)),
                  baroreceptor_carotid(fbr_auc(start = 7.163727, fixed = true), fbr_int(start = 7.163508, fixed = true), epsilon(start = 1.1695703, fixed = true), s(start = 0.9156137, fixed = true))),
                ascending_aorta_A(q(start = 1.6423666e-06, fixed = true), vol1(start = 7.828089e-06, fixed = true), vol2(start = 7.8279845e-06, fixed = true)),
                ascending_aorta_B(q_in(start = 3.301567e-06, fixed = true), volume(start = 2.4343704e-05, fixed = true)),
                ascending_aorta_C(q_in(start = 3.7759796e-06, fixed = true), volume(start = 2.2518778e-05, fixed = true)),
                ascending_aorta_D(q_in(start = 6.7093324e-06, fixed = true), volume(start = 2.056161e-05, fixed = true)),
                aortic_arch_C2(q_in(start = 9.433677e-06, fixed = true), volume(start = 1.8813396e-05, fixed = true)),
                brachiocephalic_trunk_C4(q_in(start = 4.823498e-06, fixed = true), volume(start = 1.2813621e-05, fixed = true)),
                aortic_arch_C46(q_in(start = 7.1635013e-06, fixed = true), volume(start = 1.1150601e-05, fixed = true)),
                aortic_arch_C64(q_in(start = 6.695641e-06, fixed = true), volume(start = 7.656747e-06, fixed = true)),
                aortic_arch_C94(q_in(start = 5.0432727e-06, fixed = true), volume(start = 4.2056807e-05, fixed = true)),
                thoracic_aorta_C96(q_in(start = 1.2207031e-05, fixed = true), volume(start = 7.560142e-06, fixed = true)),
                thoracic_aorta_C100(q_in(start = 1.3549397e-05, fixed = true), volume(start = 5.817063e-06, fixed = true)),
                thoracic_aorta_C104(q_in(start = 1.4623191e-05, fixed = true), volume(start = 1.0967295e-05, fixed = true)),
                thoracic_aorta_C108(q_in(start = 1.6809312e-05, fixed = true), volume(start = 3.603888e-06, fixed = true)),
                thoracic_aorta_C112(q_in(start = 1.7545864e-05, fixed = true), volume(start = 5.9425776e-05, fixed = true)),
                abdominal_aorta_C114(q_in(start = 3.931433e-05, fixed = true), volume(start = 1.228812e-06, fixed = true)),
                abdominal_aorta_C136(q_in(start = 2.9547704e-05, fixed = true), volume(start = 5.157909e-06, fixed = true)),
                abdominal_aorta_C164(q_in(start = 2.5425737e-05, fixed = true), volume(start = 1.5310801e-06, fixed = true)),
                abdominal_aorta_C176(q_in(start = 2.0076111e-05, fixed = true), volume(start = 4.1163544e-06, fixed = true)),
                abdominal_aorta_C188(q_in(start = 1.575287e-05, fixed = true), volume(start = 1.6447613e-05, fixed = true)),
                abdominal_aorta_C192(q_in(start = 2.2221082e-05, fixed = true), volume(start = 1.0212928e-05, fixed = true)),
                celiac_trunk_C116(volume(start = 0.00034421493, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                renal_L166(V_AKIDNEY(start = 4.858136e-06, fixed = true), V_VKIDNEY(start = 5.840328e-06, fixed = true), A_myo(start = 0.3032728, fixed = true), D_aff(start = 9.373029, fixed = true)),
                renal_R178(V_AKIDNEY(start = 4.855406e-06, fixed = true), V_VKIDNEY(start = 5.8403066e-06, fixed = true), A_myo(start = 0.30314773, fixed = true), D_aff(start = 9.374892, fixed = true)),
                common_iliac_R216(q_in(start = 1.298689e-05, fixed = true), volume(start = 8.466905e-06, fixed = true)),
                internal_iliac_T1_R218(volume(start = 0.00016922825, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                external_iliac_R220(q_in(start = 1.0826636e-05, fixed = true), volume(start = 4.831042e-06, fixed = true)),
                femoral_R222(q_in(start = 1.1341481e-05, fixed = true), volume(start = 1.3793968e-06, fixed = true)),
                profundus_T2_R224(volume(start = 0.00019410801, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                femoral_R226(q_in(start = 6.0067664e-06, fixed = true), volume(start = 1.1189418e-05, fixed = true)),
                popliteal_R228(q_in(start = 2.6225682e-06, fixed = true), volume(start = 3.4309896e-06, fixed = true)),
                anterior_tibial_T3_R230(volume(start = 2.5430896e-05, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                popliteal_R232(q_in(start = 8.5814673e-07, fixed = true), volume(start = 1.7725829e-07, fixed = true)),
                tibiofibular_trunk_R234(q_in(start = 8.2530784e-07, fixed = true), volume(start = 7.206747e-07, fixed = true)),
                posterior_tibial_T4_R236(volume(start = 2.7787204e-05, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                common_iliac_L194(q_in(start = 1.31240695e-05, fixed = true), volume(start = 8.098226e-06, fixed = true)),
                internal_iliac_T1_L196(volume(start = 0.00016922968, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                external_iliac_L198(q_in(start = 1.08322165e-05, fixed = true), volume(start = 4.8315337e-06, fixed = true)),
                femoral_L200(q_in(start = 1.1345365e-05, fixed = true), volume(start = 1.3795524e-06, fixed = true)),
                profundus_T2_L202(volume(start = 0.00019410907, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                femoral_L204(q_in(start = 6.007173e-06, fixed = true), volume(start = 1.1192321e-05, fixed = true)),
                popliteal_L206(q_in(start = 2.6243206e-06, fixed = true), volume(start = 3.4318803e-06, fixed = true)),
                anterior_tibial_T3_L208(volume(start = 2.543101e-05, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                popliteal_L210(q_in(start = 8.591988e-07, fixed = true), volume(start = 1.7728331e-07, fixed = true)),
                tibiofibular_trunk_L212(q_in(start = 8.2636734e-07, fixed = true), volume(start = 7.2079837e-07, fixed = true)),
                posterior_tibial_T4_L214(volume(start = 2.7787348e-05, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                subclavian_R28(q_in(start = 3.230797e-06, fixed = true), volume(start = 1.9685135e-06, fixed = true)),
                subclavian_R30(q_in(start = 1.4983226e-06, fixed = true), volume(start = 2.5889817e-06, fixed = true)),
                axillary_R32(q_in(start = 1.7352511e-06, fixed = true), volume(start = 2.9804369e-06, fixed = true)),
                brachial_R34(q_in(start = 2.0759178e-06, fixed = true), volume(start = 4.3705436e-06, fixed = true)),
                ulnar_T2_R36(q_in(start = 1.6288162e-06, fixed = true), volume(start = 2.349849e-07, fixed = true)),
                ulnar_T2_R42(volume(start = 5.841687e-05, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                radial_T1_R44(volume(start = 4.781254e-05, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                subclavian_L66(q_in(start = 2.7482793e-06, fixed = true), volume(start = 4.6881214e-06, fixed = true)),
                subclavian_L78(q_in(start = 1.3990747e-06, fixed = true), volume(start = 1.9242132e-06, fixed = true)),
                axillary_L80(q_in(start = 1.6283115e-06, fixed = true), volume(start = 2.9799312e-06, fixed = true)),
                brachial_L82(q_in(start = 2.7035926e-06, fixed = true), volume(start = 1.453132e-06, fixed = true)),
                ulnar_T2_L84(q_in(start = 1.619001e-06, fixed = true), volume(start = 2.348253e-07, fixed = true)),
                ulnar_T2_L90(volume(start = 5.8396956e-05, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                radial_T1_L92(volume(start = 5.0667553e-05, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                common_carotid_R6_A(q_in(start = 2.9344187e-06, fixed = true), volume(start = 4.7930716e-06, fixed = true)),
                common_carotid_R6_B(q_in(start = 3.4682287e-06, fixed = true), volume(start = 4.0912223e-06, fixed = true)),
                common_carotid_R6_C(q_in(start = 3.8574963e-06, fixed = true), volume(start = 3.059367e-06, fixed = true)),
                internal_carotid_R8_A(q_in(start = 2.022345e-06, fixed = true), volume(start = 1.2377039e-06, fixed = true)),
                internal_carotid_R8_B(q_in(start = 2.0610987e-06, fixed = true), volume(start = 7.848586e-07, fixed = true)),
                internal_carotid_R8_C(volume(start = 6.927776e-05, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                external_carotid_T2_R26(volume(start = 6.948144e-05, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                common_carotid_L48_A(q_in(start = 2.0232328e-06, fixed = true), volume(start = 5.1907846e-06, fixed = true)),
                common_carotid_L48_B(q_in(start = 2.758838e-06, fixed = true), volume(start = 4.558319e-06, fixed = true)),
                common_carotid_L48_C(q_in(start = 3.3203526e-06, fixed = true), volume(start = 4.0458467e-06, fixed = true)),
                common_carotid_L48_D(q_in(start = 3.7637415e-06, fixed = true), volume(start = 3.2764162e-06, fixed = true)),
                internal_carotid_L50_A(q_in(start = 2.0035695e-06, fixed = true), volume(start = 1.237556e-06, fixed = true)),
                internal_carotid_L50_B(q_in(start = 2.05246e-06, fixed = true), volume(start = 7.847791e-07, fixed = true)),
                internal_carotid_L50_C(volume(start = 6.928072e-05, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                external_carotid_T2_L62(volume(start = 6.9480055e-05, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                vertebral_L2(volume(start = 6.3887994e-05, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                vertebral_R272(volume(start = 6.3891624e-05, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                superior_vena_cava_C2(volume(start = 4.6951823e-06, fixed = true)),
                superior_vena_cava_C88(volume(start = 8.090659e-06, fixed = true)),
                inferior_vena_cava_C8(volume(start = 7.044377e-06, fixed = true)),
                hepatic_vein_T1_C10(volume(start = 2.762403e-06, fixed = true)),
                inferior_vena_cava_C12(volume(start = 1.9129506e-05, fixed = true)),
                inferior_vena_cava_C16(volume(start = 1.5056894e-05, fixed = true)),
                renal_vein_T1_R18(volume(start = 4.438818e-06, fixed = true)),
                inferior_vena_cava_C20(volume(start = 1.0505341e-06, fixed = true)),
                renal_vein_T1_L22(volume(start = 3.9233323e-06, fixed = true)),
                inferior_vena_cava_C24(volume(start = 4.1985862e-05, fixed = true)),
                common_iliac_vein_L56(volume(start = 1.0337035e-05, fixed = true), open(start = true, fixed = true)),
                common_iliac_vein_R26(volume(start = 9.498769e-06, fixed = true), open(start = true, fixed = true)),
                external_iliac_vein_R28(volume(start = 1.3860072e-06, fixed = true)),
                internal_iliac_vein_T1_R30(volume(start = 5.936816e-06, fixed = true)),
                external_iliac_vein_R32(volume(start = 1.6152111e-05, fixed = true)),
                femoral_vein_R34(volume(start = 7.0241555e-07, fixed = true)),
                femoral_vein_R38(volume(start = 5.5849187e-06, fixed = true)),
                profunda_femoris_vein_T2_R40(volume(start = 1.5880989e-05, fixed = true)),
                femoral_vein_R42(volume(start = 3.9994953e-05, fixed = true)),
                femoral_vein_R46(volume(start = 2.203208e-06, fixed = true)),
                popliteal_vein_R48(volume(start = 9.055182e-06, fixed = true)),
                anterior_tibial_vein_T4_R50(volume(start = 2.9899036e-06, fixed = true)),
                popliteal_vein_R52(volume(start = 2.0156413e-06, fixed = true)),
                posterior_tibial_vein_T6_R54(volume(start = 4.2224265e-06, fixed = true)),
                external_iliac_vein_L58(volume(start = 1.388119e-06, fixed = true)),
                internal_iliac_vein_T1_L60(volume(start = 6.10844e-06, fixed = true)),
                external_iliac_vein_L62(volume(start = 1.5861051e-05, fixed = true)),
                femoral_vein_L64(volume(start = 8.2141247e-07, fixed = true)),
                femoral_vein_L68(volume(start = 5.586598e-06, fixed = true)),
                profunda_femoris_vein_T2_L70(volume(start = 1.5885853e-05, fixed = true)),
                femoral_vein_L72(volume(start = 4.0006995e-05, fixed = true)),
                femoral_vein_L76(volume(start = 2.2038557e-06, fixed = true)),
                popliteal_vein_L78(volume(start = 9.057533e-06, fixed = true)),
                anterior_tibial_vein_T4_L80(volume(start = 2.9899322e-06, fixed = true)),
                popliteal_vein_L82(volume(start = 2.0161722e-06, fixed = true)),
                posterior_tibial_vein_T6_L84(volume(start = 4.222576e-06, fixed = true)),
                brachiocephalic_vein_R90(volume(start = 9.505823e-06, fixed = true), open(start = false, fixed = true)),
                brachiocephalic_vein_L124(volume(start = 1.7827042e-05, fixed = true), open(start = true, fixed = true)),
                vertebral_vein_R92(volume(start = 6.1822857e-06, fixed = true)),
                brachiocephalic_vein_R94(volume(start = 2.1549397e-06, fixed = true)),
                subclavian_vein_R96(volume(start = 1.0478894e-06, fixed = true)),
                internal_jugular_vein_R122(volume(start = 4.137535e-05, fixed = true)),
                external_jugular_vein_R98(volume(start = 3.0285457e-06, fixed = true)),
                subclavian_vein_R100(volume(start = 4.2859488e-06, fixed = true)),
                axillary_vein_R102(volume(start = 1.5068036e-05, fixed = true)),
                brachial_vein_R104(volume(start = 3.2693333e-06, fixed = true)),
                brachial_vein_R114(volume(start = 2.9806151e-06, fixed = true)),
                brachial_vein_R108(volume(start = 4.5597483e-07, fixed = true)),
                ulnar_vein_T7_R110(volume(start = 4.073688e-06, fixed = true)),
                brachial_vein_R118(volume(start = 2.900311e-07, fixed = true)),
                radial_vein_T3_R120(volume(start = 2.5964075e-06, fixed = true)),
                vertebral_vein_L126(volume(start = 5.7723823e-06, fixed = true)),
                brachiocephalic_vein_L128(volume(start = 1.0898158e-06, fixed = true)),
                subclavian_vein_L130(volume(start = 9.32541e-07, fixed = true)),
                internal_jugular_vein_L156(volume(start = 2.5136706e-05, fixed = true)),
                external_jugular_vein_L132(volume(start = 2.9706844e-06, fixed = true)),
                subclavian_vein_L134(volume(start = 4.1799344e-06, fixed = true)),
                axillary_vein_L136(volume(start = 1.5249268e-05, fixed = true)),
                brachial_vein_L138(volume(start = 3.2756363e-06, fixed = true)),
                brachial_vein_L148(volume(start = 3.0032902e-06, fixed = true)),
                brachial_vein_L142(volume(start = 4.568158e-07, fixed = true)),
                ulnar_vein_T7_L144(volume(start = 4.0767036e-06, fixed = true)),
                brachial_vein_L152(volume(start = 2.9228656e-07, fixed = true)),
                radial_vein_T3_L154(volume(start = 2.6137766e-06, fixed = true)),
                mesenteric_artery(q_in(start = 6.048292e-06, fixed = true), volume(start = 6.4684386e-06, fixed = true)),
                splanchnic_tissue(volume(start = 0.00024969177, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                splanchnic_vein(volume(start = 2.3041417e-05, fixed = true)),
                coronary_arteries(q_in(start = 2.6636276e-06, fixed = true), volume(start = 3.708645e-08, fixed = true)),
                cardiac_tissue(volume(start = 0.000112524685, fixed = true), phi_delayed(start = 0.2835522, fixed = true)),
                coronary_veins(volume(start = 5.995596e-08, fixed = true)),
                brachial_L82_HeartLevel(q_in(start = 2.0871746e-06, fixed = true), volume(start = 2.92306e-06, fixed = true))),
              heartComponent(
                tricuspidValve(open(start = true, fixed = true)),
                pulmonaryValve(open(start = false, fixed = true), BP_max(start = 0.0, fixed = true), BP_min(start = 26600.0, fixed = true), CO_acc(start = 0.0, fixed = true)),
                mitralValve(open(start = true, fixed = true), BP_max(start = 4025.0366, fixed = true), BP_min(start = 39996.0, fixed = true), CO_acc(start = 1.0334932e-05, fixed = true)),
                aorticValve(open(start = false, fixed = true), BP_max(start = 0.0, fixed = true), BP_min(start = 12933.552, fixed = true), CO_acc(start = -5.7426414e-10, fixed = true)),
                ventricles(
                  LV_wall(ym(start = 3.4476476, fixed = true), SL(start = 2.0002189, fixed = true)),
                  SEP_wall(SL(start = 2.155669, fixed = true)),
                  RV_wall(SL(start = 2.289637, fixed = true)),
                  calciumMechanics(tm(start = 0.8357752, fixed = true)), V_LV(start = 0.00011928713, fixed = true), V_RV(start = 0.00017965926, fixed = true), currentWork_LV(start = -0.0335467, fixed = true), currentWork_RV(start = -0.00639405, fixed = true)),
                ra(volume(start = 1.4122547e-05, fixed = true), currentWork(start = 13.482629, fixed = true)),
                la(volume(start = 7.027836e-05, fixed = true), currentWork(start = -104.577576, fixed = true)),
                idealValve_deactivable(open(start = true, fixed = true)),
                idealValve_deactivable1(open(start = true, fixed = true)),
                sa_node(t0(start = 0.046732567, fixed = true), cardiac_cycle(start = 0.05379465, fixed = true))),
              pulmonaryComponent(
                c_pa(volume(start = 5.109769e-05, fixed = true)),
                c_pv(volume(start = 9.068530e-04 + settings.V_PV_init, fixed = true))),
              simplestLymphaticDynamicSpeedUp(p_vc_mean(start = 947.1828, fixed = true), J1_s(start = 4.6657902e-08, fixed = true), v_isf(start = 0.0704317, fixed = true), v_lymph(start = 0.0014342873, fixed = true), timeSpedUp(start = 4321200.0, fixed = true), q_int(start = 0.07101688, fixed = true), v_drained(start = 0.0, fixed = true), p_vc_s(start = 84.45495, fixed = true), J1s_s(start = 4.128104e-09, fixed = true), t0(start = 0.09, fixed = true)),
              settings(V_PV_init = 0));
          annotation ();
        end CVS_HFpEF_800_ss;

        model CVS_HFpEF_1000 "A test case of serious HFpEF with V30 = 100ml"
          extends Renals_HF(LV_PConcollagen_f=1.0,
            LV_PExpcollagen_f=1.2,
            LV_SLcollagen_f=0.86,
            LV_stiff=20.0,
            settings(V_PV_init=0.0026),
            heartComponent(ra(enableCollagen=true, s=30), la(enableCollagen=
                    true, s=30)));

          annotation (experiment(
              StopTime=1200,
              Interval=0.04,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_HFpEF_1000;

        model CVS_HFpEF_1000_ss
          "Steady state initialization from 2021-07-14 11:45:55.876263 at time 1200.0"
          extends ADAN_main.SystemicTree.Variations.Renals.CVS_HFpEF_1000(
              SystemicComponent(
                baroreflex_system(
                  baroreflex(phi_mean(start = 0.30202058, fixed = true), phi(start = 0.30480477, fixed = true), f1_adj(start = 0.005043733, fixed = true)),
                  baroreceptor_aortic(fbr_auc(start = 11.458527, fixed = true), fbr_int(start = 11.458302, fixed = true), epsilon(start = 1.5107971, fixed = true), s(start = 0.85845536, fixed = true)),
                  baroreceptor_carotid(fbr_auc(start = 4.8295193, fixed = true), fbr_int(start = 1.2548858, fixed = true), epsilon(start = 1.1649706, fixed = true), s(start = 0.92487925, fixed = true))),
                ascending_aorta_A(q(start = 2.606374e-06, fixed = true), vol1(start = 7.576654e-06, fixed = true), vol2(start = 7.576374e-06, fixed = true)),
                ascending_aorta_B(q_in(start = 5.220769e-06, fixed = true), volume(start = 2.370119e-05, fixed = true)),
                ascending_aorta_C(q_in(start = 7.547728e-06, fixed = true), volume(start = 2.1924961e-05, fixed = true)),
                ascending_aorta_D(q_in(start = 1.1907113e-05, fixed = true), volume(start = 2.0019546e-05, fixed = true)),
                aortic_arch_C2(q_in(start = 1.5878635e-05, fixed = true), volume(start = 1.8316945e-05, fixed = true)),
                brachiocephalic_trunk_C4(q_in(start = 1.5088115e-06, fixed = true), volume(start = 1.25103115e-05, fixed = true)),
                aortic_arch_C46(q_in(start = 1.7997223e-05, fixed = true), volume(start = 1.0855792e-05, fixed = true)),
                aortic_arch_C64(q_in(start = 1.9977915e-05, fixed = true), volume(start = 7.453703e-06, fixed = true)),
                aortic_arch_C94(q_in(start = 1.9094903e-05, fixed = true), volume(start = 4.0906714e-05, fixed = true)),
                thoracic_aorta_C96(q_in(start = 2.7339522e-05, fixed = true), volume(start = 7.353058e-06, fixed = true)),
                thoracic_aorta_C100(q_in(start = 2.8817387e-05, fixed = true), volume(start = 5.6565395e-06, fixed = true)),
                thoracic_aorta_C104(q_in(start = 2.9958726e-05, fixed = true), volume(start = 1.06597545e-05, fixed = true)),
                thoracic_aorta_C108(q_in(start = 3.212882e-05, fixed = true), volume(start = 3.5023622e-06, fixed = true)),
                thoracic_aorta_C112(q_in(start = 3.284328e-05, fixed = true), volume(start = 5.745398e-05, fixed = true)),
                abdominal_aorta_C114(q_in(start = 4.577926e-05, fixed = true), volume(start = 1.1885089e-06, fixed = true)),
                abdominal_aorta_C136(q_in(start = 3.7119065e-05, fixed = true), volume(start = 4.9874648e-06, fixed = true)),
                abdominal_aorta_C164(q_in(start = 3.2555265e-05, fixed = true), volume(start = 1.4805049e-06, fixed = true)),
                abdominal_aorta_C176(q_in(start = 2.7103568e-05, fixed = true), volume(start = 3.9802417e-06, fixed = true)),
                abdominal_aorta_C188(q_in(start = 2.2216911e-05, fixed = true), volume(start = 1.5909562e-05, fixed = true)),
                abdominal_aorta_C192(q_in(start = 2.5457526e-05, fixed = true), volume(start = 9.89307e-06, fixed = true)),
                celiac_trunk_C116(volume(start = 0.00033902237, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                renal_L166(V_AKIDNEY(start = 4.628449e-06, fixed = true), V_VKIDNEY(start = 6.267172e-06, fixed = true), A_myo(start = 0.29766083, fixed = true), D_aff(start = 9.408223, fixed = true)),
                renal_R178(V_AKIDNEY(start = 4.624471e-06, fixed = true), V_VKIDNEY(start = 6.266802e-06, fixed = true), A_myo(start = 0.29754275, fixed = true), D_aff(start = 9.409918, fixed = true)),
                common_iliac_R216(q_in(start = 1.3615458e-05, fixed = true), volume(start = 8.239748e-06, fixed = true)),
                internal_iliac_T1_R218(volume(start = 0.0001666865, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                external_iliac_R220(q_in(start = 1.0402308e-05, fixed = true), volume(start = 4.778319e-06, fixed = true)),
                femoral_R222(q_in(start = 1.0477063e-05, fixed = true), volume(start = 1.3669596e-06, fixed = true)),
                profundus_T2_R224(volume(start = 0.00019119588, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                femoral_R226(q_in(start = 5.5261294e-06, fixed = true), volume(start = 1.1330934e-05, fixed = true)),
                popliteal_R228(q_in(start = 2.509758e-06, fixed = true), volume(start = 3.4832256e-06, fixed = true)),
                anterior_tibial_T3_R230(volume(start = 2.503386e-05, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                popliteal_R232(q_in(start = 8.604278e-07, fixed = true), volume(start = 1.7874339e-07, fixed = true)),
                tibiofibular_trunk_R234(q_in(start = 8.3143993e-07, fixed = true), volume(start = 7.2674294e-07, fixed = true)),
                posterior_tibial_T4_R236(volume(start = 2.7367474e-05, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                common_iliac_L194(q_in(start = 1.3644614e-05, fixed = true), volume(start = 7.881399e-06, fixed = true)),
                internal_iliac_T1_L196(volume(start = 0.00016668803, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                external_iliac_L198(q_in(start = 1.0382091e-05, fixed = true), volume(start = 4.778782e-06, fixed = true)),
                femoral_L200(q_in(start = 1.0458034e-05, fixed = true), volume(start = 1.3670991e-06, fixed = true)),
                profundus_T2_L202(volume(start = 0.00019119716, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                femoral_L204(q_in(start = 5.50509e-06, fixed = true), volume(start = 1.1332875e-05, fixed = true)),
                popliteal_L206(q_in(start = 2.5048223e-06, fixed = true), volume(start = 3.483805e-06, fixed = true)),
                anterior_tibial_T3_L208(volume(start = 2.5034029e-05, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                popliteal_L210(q_in(start = 8.602829e-07, fixed = true), volume(start = 1.7875956e-07, fixed = true)),
                tibiofibular_trunk_L212(q_in(start = 8.3144687e-07, fixed = true), volume(start = 7.26831e-07, fixed = true)),
                posterior_tibial_T4_L214(volume(start = 2.7367676e-05, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                subclavian_R28(q_in(start = 2.70742e-06, fixed = true), volume(start = 1.9251559e-06, fixed = true)),
                subclavian_R30(q_in(start = 1.3156331e-06, fixed = true), volume(start = 2.536562e-06, fixed = true)),
                axillary_R32(q_in(start = 1.6966991e-06, fixed = true), volume(start = 2.925416e-06, fixed = true)),
                brachial_R34(q_in(start = 2.061088e-06, fixed = true), volume(start = 4.2804936e-06, fixed = true)),
                ulnar_T2_R36(q_in(start = 1.442509e-06, fixed = true), volume(start = 2.3235916e-07, fixed = true)),
                ulnar_T2_R42(volume(start = 5.754134e-05, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                radial_T1_R44(volume(start = 4.707876e-05, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                subclavian_L66(q_in(start = 2.3588825e-06, fixed = true), volume(start = 4.5833176e-06, fixed = true)),
                subclavian_L78(q_in(start = 1.4051603e-06, fixed = true), volume(start = 1.8845323e-06, fixed = true)),
                axillary_L80(q_in(start = 1.6843786e-06, fixed = true), volume(start = 2.9200266e-06, fixed = true)),
                brachial_L82(q_in(start = 2.4716544e-06, fixed = true), volume(start = 1.4224026e-06, fixed = true)),
                ulnar_T2_L84(q_in(start = 1.4319177e-06, fixed = true), volume(start = 2.3213174e-07, fixed = true)),
                ulnar_T2_L90(volume(start = 5.752293e-05, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                radial_T1_L92(volume(start = 4.98894e-05, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                common_carotid_R6_A(q_in(start = 1.0472036e-06, fixed = true), volume(start = 4.654726e-06, fixed = true)),
                common_carotid_R6_B(q_in(start = 2.0835948e-06, fixed = true), volume(start = 3.97709e-06, fixed = true)),
                common_carotid_R6_C(q_in(start = 2.9457235e-06, fixed = true), volume(start = 2.977308e-06, fixed = true)),
                internal_carotid_R8_A(q_in(start = 1.7019369e-06, fixed = true), volume(start = 1.2242635e-06, fixed = true)),
                internal_carotid_R8_B(q_in(start = 1.8037556e-06, fixed = true), volume(start = 7.7714344e-07, fixed = true)),
                internal_carotid_R8_C(volume(start = 6.824498e-05, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                external_carotid_T2_R26(volume(start = 6.8435926e-05, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                common_carotid_L48_A(q_in(start = 1.668479e-07, fixed = true), volume(start = 5.0359117e-06, fixed = true)),
                common_carotid_L48_B(q_in(start = 1.2785528e-06, fixed = true), volume(start = 4.4275316e-06, fixed = true)),
                common_carotid_L48_C(q_in(start = 2.2010747e-06, fixed = true), volume(start = 3.9335105e-06, fixed = true)),
                common_carotid_L48_D(q_in(start = 2.9801577e-06, fixed = true), volume(start = 3.1884308e-06, fixed = true)),
                internal_carotid_L50_A(q_in(start = 1.7169305e-06, fixed = true), volume(start = 1.2240081e-06, fixed = true)),
                internal_carotid_L50_B(q_in(start = 1.8083747e-06, fixed = true), volume(start = 7.769778e-07, fixed = true)),
                internal_carotid_L50_C(volume(start = 6.824831e-05, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                external_carotid_T2_L62(volume(start = 6.843518e-05, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                vertebral_L2(volume(start = 6.292811e-05, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                vertebral_R272(volume(start = 6.293127e-05, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                superior_vena_cava_C2(volume(start = 4.731766e-06, fixed = true)),
                superior_vena_cava_C88(volume(start = 8.153668e-06, fixed = true)),
                inferior_vena_cava_C8(volume(start = 7.0982032e-06, fixed = true)),
                hepatic_vein_T1_C10(volume(start = 2.7834876e-06, fixed = true)),
                inferior_vena_cava_C12(volume(start = 1.9267445e-05, fixed = true)),
                inferior_vena_cava_C16(volume(start = 1.5158471e-05, fixed = true)),
                renal_vein_T1_R18(volume(start = 4.4688095e-06, fixed = true)),
                inferior_vena_cava_C20(volume(start = 1.0575861e-06, fixed = true)),
                renal_vein_T1_L22(volume(start = 3.9497204e-06, fixed = true)),
                inferior_vena_cava_C24(volume(start = 4.2211086e-05, fixed = true)),
                common_iliac_vein_L56(volume(start = 1.03722505e-05, fixed = true), open(start = true, fixed = true)),
                common_iliac_vein_R26(volume(start = 9.532664e-06, fixed = true), open(start = true, fixed = true)),
                external_iliac_vein_R28(volume(start = 1.3905848e-06, fixed = true)),
                internal_iliac_vein_T1_R30(volume(start = 5.955854e-06, fixed = true)),
                external_iliac_vein_R32(volume(start = 1.6156728e-05, fixed = true)),
                femoral_vein_R34(volume(start = 7.0245363e-07, fixed = true)),
                femoral_vein_R38(volume(start = 5.5750056e-06, fixed = true)),
                profunda_femoris_vein_T2_R40(volume(start = 1.5694772e-05, fixed = true)),
                femoral_vein_R42(volume(start = 3.955241e-05, fixed = true)),
                femoral_vein_R46(volume(start = 2.178543e-06, fixed = true)),
                popliteal_vein_R48(volume(start = 8.91003e-06, fixed = true)),
                anterior_tibial_vein_T4_R50(volume(start = 2.9814219e-06, fixed = true)),
                popliteal_vein_R52(volume(start = 1.9829545e-06, fixed = true)),
                posterior_tibial_vein_T6_R54(volume(start = 4.1869866e-06, fixed = true)),
                external_iliac_vein_L58(volume(start = 1.3924787e-06, fixed = true)),
                internal_iliac_vein_T1_L60(volume(start = 6.12698e-06, fixed = true)),
                external_iliac_vein_L62(volume(start = 1.5863956e-05, fixed = true)),
                femoral_vein_L64(volume(start = 8.21341e-07, fixed = true)),
                femoral_vein_L68(volume(start = 5.5759238e-06, fixed = true)),
                profunda_femoris_vein_T2_L70(volume(start = 1.5697997e-05, fixed = true)),
                femoral_vein_L72(volume(start = 3.9560382e-05, fixed = true)),
                femoral_vein_L76(volume(start = 2.178969e-06, fixed = true)),
                popliteal_vein_L78(volume(start = 8.911928e-06, fixed = true)),
                anterior_tibial_vein_T4_L80(volume(start = 2.981475e-06, fixed = true)),
                popliteal_vein_L82(volume(start = 1.983389e-06, fixed = true)),
                posterior_tibial_vein_T6_L84(volume(start = 4.187294e-06, fixed = true)),
                brachiocephalic_vein_R90(volume(start = 9.552839e-06, fixed = true), open(start = false, fixed = true)),
                brachiocephalic_vein_L124(volume(start = 1.7953884e-05, fixed = true), open(start = false, fixed = true)),
                vertebral_vein_R92(volume(start = 6.122802e-06, fixed = true)),
                brachiocephalic_vein_R94(volume(start = 2.1656106e-06, fixed = true)),
                subclavian_vein_R96(volume(start = 1.0530605e-06, fixed = true)),
                internal_jugular_vein_R122(volume(start = 4.159139e-05, fixed = true)),
                external_jugular_vein_R98(volume(start = 3.008159e-06, fixed = true)),
                subclavian_vein_R100(volume(start = 4.30711e-06, fixed = true)),
                axillary_vein_R102(volume(start = 1.51417125e-05, fixed = true)),
                brachial_vein_R104(volume(start = 3.236865e-06, fixed = true)),
                brachial_vein_R114(volume(start = 2.9537675e-06, fixed = true)),
                brachial_vein_R108(volume(start = 4.5173556e-07, fixed = true)),
                ulnar_vein_T7_R110(volume(start = 4.0605423e-06, fixed = true)),
                brachial_vein_R118(volume(start = 2.8760195e-07, fixed = true)),
                radial_vein_T3_R120(volume(start = 2.5887357e-06, fixed = true)),
                vertebral_vein_L126(volume(start = 5.7263255e-06, fixed = true)),
                brachiocephalic_vein_L128(volume(start = 1.0975663e-06, fixed = true)),
                subclavian_vein_L130(volume(start = 9.391568e-07, fixed = true)),
                internal_jugular_vein_L156(volume(start = 2.5314985e-05, fixed = true)),
                external_jugular_vein_L132(volume(start = 2.9541332e-06, fixed = true)),
                subclavian_vein_L134(volume(start = 4.2095826e-06, fixed = true)),
                axillary_vein_L136(volume(start = 1.5355996e-05, fixed = true)),
                brachial_vein_L138(volume(start = 3.243612e-06, fixed = true)),
                brachial_vein_L148(volume(start = 2.9778332e-06, fixed = true)),
                brachial_vein_L142(volume(start = 4.5262698e-07, fixed = true)),
                ulnar_vein_T7_L144(volume(start = 4.0635223e-06, fixed = true)),
                brachial_vein_L152(volume(start = 2.8999517e-07, fixed = true)),
                radial_vein_T3_L154(volume(start = 2.6057876e-06, fixed = true)),
                mesenteric_artery(q_in(start = 5.672202e-06, fixed = true), volume(start = 6.3543193e-06, fixed = true)),
                splanchnic_tissue(volume(start = 0.00024593118, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                splanchnic_vein(volume(start = 2.3209941e-05, fixed = true)),
                coronary_arteries(q_in(start = 2.3959633e-06, fixed = true), volume(start = 3.6877612e-08, fixed = true)),
                cardiac_tissue(volume(start = 0.000110816276, fixed = true), phi_delayed(start = 0.3053214, fixed = true)),
                coronary_veins(volume(start = 5.985963e-08, fixed = true)),
                brachial_L82_HeartLevel(q_in(start = 2.0784e-06, fixed = true), volume(start = 2.8615339e-06, fixed = true))),
              heartComponent(
                tricuspidValve(open(start = false, fixed = true)),
                pulmonaryValve(open(start = false, fixed = true), BP_max(start = 0.0, fixed = true), BP_min(start = 26600.0, fixed = true), CO_acc(start = 0.0, fixed = true)),
                mitralValve(open(start = false, fixed = true), BP_max(start = 5199.7104, fixed = true), BP_min(start = 5215.773, fixed = true), CO_acc(start = 1.0514309e-05, fixed = true)),
                aorticValve(open(start = false, fixed = true), BP_max(start = 0.0, fixed = true), BP_min(start = 12519.791, fixed = true), CO_acc(start = -1.1985694e-09, fixed = true)),
                ventricles(
                  LV_wall(ym(start = 3.4158032, fixed = true), SL(start = 1.9336289, fixed = true)),
                  SEP_wall(SL(start = 2.1340647, fixed = true)),
                  RV_wall(SL(start = 2.3528173, fixed = true)),
                  calciumMechanics(tm(start = 0.04274082, fixed = true)), V_LV(start = 0.00010558533, fixed = true), V_RV(start = 0.00019762112, fixed = true), currentWork_LV(start = -0.043492842, fixed = true), currentWork_RV(start = -0.015278839, fixed = true)),
                ra(volume(start = 1.43771495e-05, fixed = true), currentWork(start = 11.805758, fixed = true)),
                la(volume(start = 5.0069648e-05, fixed = true), currentWork(start = -168.03625, fixed = true)),
                idealValve_deactivable(open(start = true, fixed = true)),
                idealValve_deactivable1(open(start = true, fixed = true)),
                sa_node(t0(start = 0.12274082, fixed = true), cardiac_cycle(start = 0.14923677, fixed = true))),
              pulmonaryComponent(
                c_pa(volume(start = 6.135129e-05, fixed = true)),
                c_pv(volume(start=1.155135e-03 + settings.V_PV_init +
                      pulmonaryComponent.deadVolume, fixed=true))),
              simplestLymphaticDynamicSpeedUp(p_vc_mean(start = 1077.3146, fixed = true), J1_s(start = 4.2718753e-08, fixed = true), v_isf(start = 0.070607886, fixed = true), v_lymph(start = 0.00158447, fixed = true), timeSpedUp(start = 4321200.0, fixed = true), q_int(start = 0.070771076, fixed = true), v_drained(start = 0.0, fixed = true), p_vc_s(start = 98.51697, fixed = true), J1s_s(start = 3.7811763e-09, fixed = true), t0(start = 0.09, fixed = true)),
              settings(V_PV_init = 0));
          annotation ();
        end CVS_HFpEF_1000_ss;

        model CVS_DilatedLV120
          extends Renals_VolumeLoad(PA_cutOff=21331.5819864, settings(
                heart_vntr_xi_AmRef=1.2));
          annotation (experiment(
              StopTime=4000,
              Interval=0.06,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_DilatedLV120;

        model CVS_PAH
          extends Renals_VolumeLoad(PA_cutOff=213310.5819864, settings(pulm_R(
                  displayUnit="(dyn.s)/cm5") = 40000000));
          annotation (experiment(
              StopTime=4000,
              Interval=0.06,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_PAH;

        model CVS_renalRegulation_HFrEF_25
          extends CVS_renalRegulation_HFrEF_baro(
            LVfunctionFraction=0.25,
            settings(V_PV_init(displayUnit="l") = 0.002),
            useAutonomousPhi(y=false));
          annotation (experiment(
              StopTime=1200,
              Interval=0.04,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_renalRegulation_HFrEF_25;

        model Renals_HF_nobaro
          extends Renals_HF(
            settings(
              heart_vntr_D_0=4.85,
              starlingFactor_exp=1.25,
              heart_vntr_D_A=890.0,
              baro_tau_s=93),
            useAutonomousPhi(y=true));
          Physiolibrary.Hydraulic.Sources.UnlimitedPump
                                                  unlimitedPump(useSolutionFlowInput=true,
              SolutionFlow(displayUnit="ml/min") = 1e-06)
            annotation (Placement(transformation(extent={{-122,-10},{-102,10}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedPump unlimitedPump1(
              useSolutionFlowInput=true) annotation (Placement(transformation(
                  extent={{-122,-34},{-102,-14}})));
          Physiolibrary.Hydraulic.Components.ElasticVessel addedVolume(
              volume_start=settings.V_PV_init)
            annotation (Placement(transformation(extent={{-98,-34},{-78,-14}})));
          Physiolibrary.Hydraulic.Sensors.FlowMeasure flowMeasure
            annotation (Placement(transformation(extent={{-94,10},{-74,-10}})));
        Modelica.Blocks.Sources.Ramp volumeInfusionRamp(
            height=volumeInfusion,
            duration=0,
            offset=0,
            startTime=20)
            "Phi for when the model is not using the autonomous feedback phi from baroreflex"
            annotation (Placement(transformation(extent={{-142,10},{-122,30}})));
          parameter Physiolibrary.Types.VolumeFlowRate volumeInfusion(
              displayUnit="ml/min")=0 "Height of ramps";
        equation
          connect(addedVolume.q_in,unlimitedPump1. q_out) annotation (Line(
              points={{-88,-24},{-102,-24}},
              color={0,0,0},
              thickness=1));
          connect(unlimitedPump.q_out,flowMeasure. q_in) annotation (Line(
              points={{-102,0},{-94,0}},
              color={0,0,0},
              thickness=1));
          connect(flowMeasure.volumeFlow,unlimitedPump1. solutionFlow)
            annotation (Line(points={{-84,-12},{-112,-12},{-112,-17}}, color={0,
                  0,127}));
          connect(flowMeasure.q_out, heartComponent.sv) annotation (Line(
              points={{-74,0},{24,0},{24,-12},{-16,-12}},
              color={0,0,0},
              thickness=1));
          connect(volumeInfusionRamp.y,unlimitedPump. solutionFlow) annotation (
             Line(points={{-121,20},{-112,20},{-112,7}},  color={0,0,127}));
        end Renals_HF_nobaro;

        model Renals_HF_nobaro_baro
          extends Renals_HF_nobaro(useAutonomousPhi(y=true),
            volumeInfusionRamp(height=-volumeInfusion, offset=volumeInfusion),
            settings(baro_tau_s=10));
        end Renals_HF_nobaro_baro;

        model Renals_HF_nobaro1_4
          extends Renals_HF_nobaro(
            volumeInfusion(displayUnit="l/min") = 0,
            settings(
              V_PV_init=0,
              heart_vntr_SLrest=1.6,
              starlingFactor_exp=1.4,
              heart_vntr_D_0=2.0,
              heart_vntr_D_A=1050.0),
            volumeInfusionRamp(startTime=0));
        end Renals_HF_nobaro1_4;

        model Renals_HF_nobaro1_4_baro
          extends Renals_HF_nobaro1_4(useAutonomousPhi(y=true));
        end Renals_HF_nobaro1_4_baro;

        model Renals_HF_nobaro_VL
          "Volume loading to get better adjustment of starling curve"
          extends Renals_HF_nobaro(volumeInfusion=3.3333333333333e-06);
              parameter Physiolibrary.Types.Pressure EDP_break=6666.11937075;

        equation
          when time > 20 and EDP > EDP_break then
            terminate("Thats it");
          end when;
          annotation (experiment(
              StopTime=600,
              Interval=0.04,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end Renals_HF_nobaro_VL;

        model Renals_HF_nobaro_prescribedHR
          extends Renals_HF_nobaro(volumeInfusion=0, pulmonaryComponent(
                usePVCannula=true));
          Components.Basic.VolumeRegulation volumeRegulation(PID1(
              k(unit="1") = 1e-3,
              Ti=3,
              yMax=1e-5,
              yMin=-1e-4)) annotation (Placement(transformation(extent={{-74,-88},
                    {-54,-68}})));
          Modelica.Blocks.Sources.RealExpression targetPressure(y=P_pv)
            annotation (Placement(transformation(extent={{-108,-80},{-88,-60}})));
          Physiolibrary.Types.Constants.PressureConst P0(k=2666.4477483)
            annotation (Placement(transformation(extent={{4,-4},{-4,4}},
                rotation=180,
                origin={-98,-92})));
        equation
          connect(targetPressure.y, volumeRegulation.p_measured) annotation (
              Line(points={{-87,-70},{-80,-70},{-80,-78},{-74,-78}}, color={0,0,
                  127}));
          connect(volumeRegulation.p_target, P0.y) annotation (Line(points={{
                  -74,-88},{-88,-88},{-88,-92},{-93,-92}}, color={0,0,127}));
          connect(volumeRegulation.q_out, pulmonaryComponent.PV_cannula)
            annotation (Line(
              points={{-54,-76},{-30,-76},{-30,-62}},
              color={0,0,0},
              thickness=1));
        end Renals_HF_nobaro_prescribedHR;

      end Renals;

      package Figures
        model CVS_TiltNoBaro
          extends Impairments.TiltNoBaro.imp_noBaro;
          annotation (experiment(
              StopTime=120,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_TiltNoBaro;

        model CVS_VMNoBaro
          extends Impairments.VMNoBaro.imp_base;
        end CVS_VMNoBaro;

        model CVS_NoBaroVLin
          extends Impairments.TiltNoBaro.imp_noVcLin;
        end CVS_NoBaroVLin;

        model CVS_NoVcVlin
          extends Impairments.Normal.imp_noVcLin;
        end CVS_NoVcVlin;
      end Figures;

      package CoronaryCirculation
        model CVS_Coronaries
          extends CardiovascularSystem(SystemicComponent(cardiac_tissue(Ra(
                    displayUnit="(mmHg.s)/ml") = 1.33322387415e+20)));
          Components.Subsystems.Coronary.CoronaryCirculation
            coronaryCirculation(
            coronaryLayer_SubEpicardium(r0m(displayUnit="(mmHg.s)/ml")),
            target_q(displayUnit="l/min") = 3.73333e-06,
            inertia(I(displayUnit="mmHg.s2/ml") = 399967000.0))
            annotation (Placement(transformation(extent={{-32,0},{-12,20}})));
          Modelica.Blocks.Sources.RealExpression P_LV_src(y=P_LV)
            annotation (Placement(transformation(extent={{8,-8},{-6,8}})));
        equation
          connect(coronaryCirculation.port_b, heartComponent.sv) annotation (
              Line(
              points={{-12,10},{24,10},{24,-16.4},{-16,-16.4}},
              color={0,0,0},
              thickness=1));
          connect(coronaryCirculation.port_a, SystemicComponent.port_a)
            annotation (Line(
              points={{-32,10},{-64,10},{-64,28},{-58,28}},
              color={0,0,0},
              thickness=1));
          connect(P_LV_src.y, coronaryCirculation.intraMuscularPressure)
            annotation (Line(points={{-6.7,0},{-20,0}}, color={0,0,127}));
          annotation (experiment(
              StopTime=20,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_Coronaries;

        model CVS_CoronariesIntraMyocardium1B
          extends CardiovascularSystem(SystemicComponent(cardiac_tissue(Ra(
                    displayUnit="(mmHg.s)/ml") = 1.33322387415e+20)),
              redeclare
              Components.Subsystems.Heart.Heart_TriSegMechanicsSimple_CoronaryLAD
              heartComponent(UseThoracic_PressureInput=false));
          annotation (experiment(
              StopTime=20,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_CoronariesIntraMyocardium1B;

        model CVS_CoronariesIntraMyocardium3B
          extends CardiovascularSystem(SystemicComponent(cardiac_tissue(Ra(
                    displayUnit="(mmHg.s)/ml") = 1.33322387415e+20)),
              redeclare
              Components.Subsystems.Heart.Heart_TriSegMechanicsSimple_Coronary3B
              heartComponent(UseThoracic_PressureInput=false));
          annotation (experiment(
              StopTime=20,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_CoronariesIntraMyocardium3B;
      end CoronaryCirculation;

      package Lymphatics
        model CVS_lymphatics
          extends CardiovascularSystem(SystemicComponent(
                useCapillaryPressureOutputs=true), useAutonomousPhi(y=false));
          Components.Subsystems.Lymphatic.SimplestLymphaticDynamicSpeedUp
            simplestLymphaticDynamicSpeedUp(
            nc=23,
            tau(displayUnit="s"),
            p_int_diff=2666.4477483,
            V_normal=0.015,
            drain_start=50400,
            drain_q=8.3333333333333e-08,
            timeSpeedUpFactor(
              amplitude=360,
              width=100*10/40,
              period=40),
            lymphaticsSettleTime=43200,
            beat=heartComponent.sa_node.beat)
            annotation (Placement(transformation(extent={{40,38},{60,58}})));
          Physiolibrary.Hydraulic.Sensors.PressureMeasure pressureMeasure
            annotation (Placement(transformation(extent={{18,30},{38,50}})));
          Physiolibrary.Hydraulic.Sources.UnlimitedOutflowPump
            unlimitedOutflowPump(useSolutionFlowInput=true) annotation (
              Placement(transformation(extent={{-70,-32},{-90,-52}})));
        equation
          connect(simplestLymphaticDynamicSpeedUp.capillaryPressures,
            SystemicComponent.capillaryPressures) annotation (Line(points={{40,
                  48},{-10.2,48},{-10.2,45.6}}, color={0,0,127}));
          connect(SystemicComponent.port_b, pressureMeasure.q_in) annotation (
              Line(
              points={{18,28},{24,28},{24,34}},
              color={0,0,0},
              thickness=1));
          connect(pressureMeasure.pressure, simplestLymphaticDynamicSpeedUp.p_vc)
            annotation (Line(points={{34,36},{40,36},{40,38}}, color={0,0,127}));
          connect(simplestLymphaticDynamicSpeedUp.lymph_diff,
            unlimitedOutflowPump.solutionFlow) annotation (Line(points={{60.2,
                  38},{94,38},{94,-76},{-80,-76},{-80,-49}}, color={0,0,127}));
          connect(unlimitedOutflowPump.q_in, heartComponent.pa) annotation (
              Line(
              points={{-70,-42},{-42,-42},{-42,-16.4},{-36,-16.4}},
              color={0,0,0},
              thickness=1));
          annotation (experiment(
              StopTime=600,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end CVS_lymphatics;
      end Lymphatics;

      package Surrogates
        model CVS_4ChC "Four chambers compliance simplification"
          extends Auxiliary.partialCVS(redeclare
              Components.Subsystems.Heart.Heart_4chambers_valves heartComponent);
          Physiolibrary.Types.RealIO.HydraulicComplianceInput c_la annotation (
              Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=0,
                origin={-16,-40}), iconTransformation(
                extent={{-10,-10},{10,10}},
                origin={-58,-106},
                rotation=90)));
          Physiolibrary.Types.RealIO.HydraulicComplianceInput c_lv annotation (
              Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=0,
                origin={-38,-40}), iconTransformation(
                extent={{-10,-10},{10,10}},
                origin={62,-106},
                rotation=90)));
          Physiolibrary.Types.RealIO.HydraulicComplianceInput c_rv annotation (
              Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=0,
                origin={-32,0}), iconTransformation(
                extent={{-10,-10},{10,10}},
                origin={62,92},
                rotation=270)));
          Physiolibrary.Types.RealIO.HydraulicComplianceInput c_ra annotation (
              Placement(transformation(
                extent={{-10,-10},{10,10}},
                rotation=0,
                origin={-12,-4}), iconTransformation(
                extent={{-11,-11},{11,11}},
                rotation=270,
                origin={-57,93})));
        equation
          connect(heartComponent.c_ra, c_ra) annotation (Line(points={{-20.1,-11.9},{-20.1,
                  -4},{-12,-4}}, color={0,0,127}));
          connect(heartComponent.c_rv, c_rv)
            annotation (Line(points={{-32,-12},{-32,0}}, color={0,0,127}));
          connect(heartComponent.c_la, c_la) annotation (Line(points={{-20,-31.8},{-20,-40},
                  {-16,-40}}, color={0,0,127}));
          connect(heartComponent.c_lv, c_lv) annotation (Line(points={{-32,-31.8},{-32,-40},
                  {-38,-40}}, color={0,0,127}));
        end CVS_4ChC;

        model Test_CVS4ChC
          extends Modelica.Icons.Example;
          CVS_4ChC cVS_4ChC(settings(V_PV_init=0.001))
            annotation (Placement(transformation(extent={{30,-10},{50,10}})));
          Components.Subsystems.Heart.Auxiliary.SA_node
                            sa_node(cardiac_cycle(start=0.9817032, fixed=true))
                                    annotation (Placement(transformation(
                  rotation=0, extent={{-44,-12},{-24,8}})));
          Components.Subsystems.Heart.Auxiliary.TriSegMechanics_components.Driving_Olufsen
            driving_a(
            usePhiInput=false,
            D_0(displayUnit="Pa/m3") = 1.5e7,
            D_A(displayUnit="Pa/m3") = 1.1e8,
            TS=0.2,
            TR=0.2)
            annotation (Placement(transformation(extent={{-8,4},{12,24}})));
          Physiolibrary.Types.Constants.FrequencyConst HR0(k(displayUnit=
                  "1/min") = 1.0666666666667)
            annotation (Placement(transformation(extent={{-62,-6},{-54,2}})));
          Components.Subsystems.Heart.Auxiliary.TriSegMechanics_components.Driving_Olufsen
            driving_lv(
            usePhiInput=false,
            t0_delay=0.1,
            D_0(displayUnit="Pa/m3") = 3.2e6,
            D_A(displayUnit="Pa/m3") = 2.2e8,
            TS=0.2,
            TR=0.2,
            TR_maxAct(displayUnit="s"))
            annotation (Placement(transformation(extent={{-8,-36},{12,-16}})));
          Physiolibrary.Blocks.Math.Reciprocal rec
            annotation (Placement(transformation(extent={{24,-30},{32,-22}})));
          Physiolibrary.Blocks.Math.Reciprocal rec1
            annotation (Placement(transformation(extent={{18,10},{26,18}})));
          Components.Subsystems.Heart.Auxiliary.TriSegMechanics_components.Driving_Olufsen
            driving_rv(
            usePhiInput=false,
            t0_delay=0.1,
            D_0(displayUnit="Pa/m3") = 0.77e6,
            D_A(displayUnit="Pa/m3") = 5e7,
            TS=0.2,
            TR=0.2,
            TR_maxAct(displayUnit="s"))
            annotation (Placement(transformation(extent={{-8,-62},{12,-42}})));
          Physiolibrary.Blocks.Math.Reciprocal rec2
            annotation (Placement(transformation(extent={{24,-56},{32,-48}})));
        equation
          connect(HR0.y, sa_node.frequency)
            annotation (Line(points={{-53,-2},{-44,-2}}, color={0,0,127}));
          connect(sa_node.t0, driving_a.t0) annotation (Line(points={{-24,6},{
                  -16,6},{-16,14},{-8,14}}, color={0,0,127}));
          connect(sa_node.t0, driving_lv.t0) annotation (Line(points={{-24,6},{
                  -16,6},{-16,-26},{-8,-26}}, color={0,0,127}));
          connect(rec.u, driving_lv.D)
            annotation (Line(points={{23.2,-26},{13,-26}}, color={0,0,127}));
          connect(rec.y, cVS_4ChC.c_lv) annotation (Line(points={{32.4,-26},{
                  46.2,-26},{46.2,-10.6}}, color={0,0,127}));
          connect(driving_a.D, rec1.u)
            annotation (Line(points={{13,14},{17.2,14}}, color={0,0,127}));
          connect(rec1.y, cVS_4ChC.c_ra) annotation (Line(points={{26.4,14},{
                  34.3,14},{34.3,9.3}}, color={0,0,127}));
          connect(rec1.y, cVS_4ChC.c_la) annotation (Line(points={{26.4,14},{30,
                  14},{30,-10.6},{34.2,-10.6}}, color={0,0,127}));
          connect(driving_rv.D, rec2.u)
            annotation (Line(points={{13,-52},{23.2,-52}}, color={0,0,127}));
          connect(rec2.y, cVS_4ChC.c_rv) annotation (Line(points={{32.4,-52},{
                  56,-52},{56,9.2},{46.2,9.2}}, color={0,0,127}));
          connect(driving_rv.t0, driving_lv.t0) annotation (Line(points={{-8,
                  -52},{-16,-52},{-16,-26},{-8,-26}}, color={0,0,127}));
          annotation (experiment(
              StopTime=10,
              Interval=0.02,
              Tolerance=1e-06,
              __Dymola_Algorithm="Cvode"));
        end Test_CVS4ChC;
      end Surrogates;
    end Variations;

    package Experiments
      model Hemorrhage "A simple bleeding experiment"
        extends CardiovascularSystem(useAutonomousPhi(y=true));
        Physiolibrary.Hydraulic.Components.Pump pump(useSolutionFlowInput=true,
            SolutionFlow(displayUnit="m3/s") = 1.6666666666667e-05)
          annotation (Placement(transformation(extent={{48,-98},{68,-78}})));
        Physiolibrary.Hydraulic.Components.ElasticVessel volume_bleeded
          "A cut vein reservoir"
          annotation (Placement(transformation(extent={{80,-98},{100,-78}})));
        replaceable Modelica.Blocks.Sources.Ramp Tilt_ramp(
          height=-2.08e-6,
          offset=2.08e-6,
          startTime=240,
          duration=0)   constrainedby Modelica.Blocks.Sources.Ramp
          annotation (Placement(transformation(extent={{32,-68},{48,-52}})));
      equation
        connect(volume_bleeded.q_in, pump.q_out) annotation (Line(
            points={{90,-88},{68,-88}},
            color={0,0,0},
            thickness=1));
        connect(pump.q_in, heartComponent.sv) annotation (Line(
            points={{48,-88},{24,-88},{24,-16.4},{-16,-16.4}},
            color={0,0,0},
            thickness=1));
        connect(Tilt_ramp.y, pump.solutionFlow) annotation (Line(points={{48.8,
                -60},{58,-60},{58,-81}}, color={0,0,127}));
        annotation (experiment(
            StopTime=3600,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end Hemorrhage;

      model SimplestHeart
        annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
              coordinateSystem(preserveAspectRatio=false)));
      end SimplestHeart;

      model HFpEF
        "HFpEF phenotype: increase stiffness. Show PV loop, q_mv, HR, SV"
        extends CardiovascularSystem(heartComponent(ventricles(LV_wall(k_passive=
                   k_passive_LV), SEP_wall(k_passive=k_passive_LV))),
                                                             settings(
              baro_tau_s=10));
        parameter Real k_passive_LV=150 "mN / mm^2 / micro";
      end HFpEF;

      model HFrEF
        extends CardiovascularSystem(heartComponent(ventricles(LV_wall(
                  contractilityFraction=0.5), SEP_wall(contractilityFraction=
                    0.5))), settings(baro_tau_s=10, heart_vntr_D_A_maxAct(
                displayUnit="Pa/m3") = 3500));
        annotation (experiment(
            StopTime=40,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end HFrEF;

      model LHF_Vw
        extends Identification.Results.CVS_valsalva_PP2(heartComponent(ventricles(
                LV_wall(Vw=heartComponent.ventricles.settings.heart_vntr_xi_Vw*89*distensionFraction),
                SEP_wall(Vw=heartComponent.ventricles.settings.heart_vntr_xi_Vw*34*distensionFraction))),
            settings(baro_tau_s=10));
                parameter Physiolibrary.Types.Fraction distensionFraction = 0.2;
      end LHF_Vw;

      model HFrEF_noBaroHyperVol
        extends HFrEF(
          useAutonomousPhi(y=false),
          settings(V_PV_init=0.0036));
      end HFrEF_noBaroHyperVol;

      model LHF_AMref
        extends Identification.Results.CVS_valsalva_PP2(heartComponent(ventricles(
                LV_wall(Amref=heartComponent.ventricles.settings.heart_vntr_xi_AmRef*86
                    *distensionFraction,
                PConcollagen=PConcollagen,
                PExpcollagen=PExpcollagen),
                SEP_wall(Amref=heartComponent.ventricles.settings.heart_vntr_xi_AmRef*
                    39*distensionFraction,
                PConcollagen=PConcollagen,
                PExpcollagen=PExpcollagen),
              RV_wall(PConcollagen=PConcollagen, PExpcollagen=PExpcollagen))),
            settings(baro_tau_s=10));
                parameter Physiolibrary.Types.Fraction distensionFraction = 1.5;
        parameter Real PExpcollagen=70 "contriubtion of collagen (??)";
        parameter Real PConcollagen=0.01 "contriubtion of collagen (??)";
      end LHF_AMref;

      model HFrEF_noBaro_PC "pericardium"
        extends HFrEF_noBaroHyperVol(
        heartComponent(pericardium(enabled=true, V0=0.0005)));
        annotation (experiment(
            StopTime=30,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end HFrEF_noBaro_PC;

      model HFrEF_Baro_PC "pericardium"
        extends HFrEF(
        heartComponent(pericardium(enabled=true, V0=0.0005)), useAutonomousPhi(y=true));
        annotation (experiment(
            StopTime=120,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end HFrEF_Baro_PC;

      model HFrEF_noBaro_AC "atrial collagen"
        extends HFrEF_noBaroHyperVol(
                             heartComponent(ra(
              enableCollagen=true,
              V0_col=8e-05,
              s=50), la(
              enableCollagen=true,
              V0_col=8e-05,
              s=50)));
      end HFrEF_noBaro_AC;

      model StarlingExperiment
        extends Auxiliary.partialCVS_optimized(redeclare
            Components.Subsystems.Systemic.Systemic_CutOff SystemicComponent(
              UseBaroreflexOutput=true), useAutonomousPhi(y=false));
        Physiolibrary.Hydraulic.Sources.UnlimitedVolume postSystemicSetPressure(P=1333.22387415)
          annotation (Placement(transformation(extent={{-100,50},{-80,70}})));
        Physiolibrary.Hydraulic.Sources.UnlimitedVolume venousSetPressure(P=1333.22387415)
          annotation (Placement(transformation(extent={{80,-100},{60,-80}})));
        Physiolibrary.Hydraulic.Components.Resistor outflowResistance(Resistance(
              displayUnit="(mmHg.min)/l")=71994100.0)      annotation (Placement(
              transformation(
              extent={{-10,-10},{10,10}},
              rotation=90,
              origin={-80,18})));
        Physiolibrary.Hydraulic.Components.Resistor inflowResistance1(
            Resistance(displayUnit="(mmHg.min)/l") = 799934.32449)
                                                          annotation (Placement(
              transformation(
              extent={{-10,-10},{10,10}},
              rotation=270,
              origin={24,-70})));
        Physiolibrary.Hydraulic.Components.ElasticVessel elasticVessel(
            Compliance=7.50062E-09)
          annotation (Placement(transformation(extent={{-90,-28},{-70,-8}})));
        Physiolibrary.Hydraulic.Sensors.PressureMeasure p_arterial
          annotation (Placement(transformation(extent={{-86,-22},{-106,-2}})));
        Physiolibrary.Hydraulic.Sensors.PressureMeasure p_venous
          annotation (Placement(transformation(extent={{30,-60},{50,-40}})));

      output Physiolibrary.Types.Pressure brachial_pressure=p_arterial.pressure;

      output Physiolibrary.Types.Pressure brachial_pressure_mean(start = 0);

      Real brachial_pressure_int "integration of pressure to find the true mean";
        output Physiolibrary.Types.Pressure venous_pressure=p_venous.pressure;
        output Physiolibrary.Types.VolumeFlowRate CO(displayUnit = "l/min") = heartComponent.aorticValve.CO;
        output Physiolibrary.Types.Pressure P_LV = heartComponent.ventricles.P_LV
          "Pressure in left ventricle";
        output Physiolibrary.Types.Volume V_LV = heartComponent.ventricles.V_LV;
      output Physiolibrary.Types.Volume SV = CO/heartRate.HR;
      output Physiolibrary.Types.Frequency HR = heartRate.HR;

      Real CI = CO*1000*60/settings.BSA "Cardiac index l/min/m2";
      Physiolibrary.Types.Power CardiacPowerBrachial = brachial_pressure_mean*CO;
      Physiolibrary.Types.PowerPerMass CardiacPowerIndex = brachial_pressure_mean*CO/settings.BSA;
        output Modelica.Units.SI.Time TEjection=heartComponent.aorticValve.Ts;
        output Modelica.Units.SI.Time TFilling=heartComponent.mitralValve.Ts;
        output Physiolibrary.Types.Pressure P_pa = pulmonaryComponent.r_pa.q_in.pressure
          "Pressure in pulmonary arteries";
        output Physiolibrary.Types.Pressure P_pv = pulmonaryComponent.r_pa.q_out.pressure
          "Pressure in pulmonary veins";
        output Physiolibrary.Types.Pressure P_sv = SystemicComponent.port_b.pressure
          "Pressure in systemic vena cava";

        Physiolibrary.Types.Volume heartPulmonaryVolume=
            heartComponent.volume + pulmonaryComponent.volume;

        output Physiolibrary.Types.Pressure P_LA = heartComponent.mitralValve.q_in.pressure
          "Pressure in left atria";
        output Physiolibrary.Types.Volume V_la = heartComponent.la.volume
          "Left atrium volume output";
        output Physiolibrary.Types.VolumeFlowRate q_mv(displayUnit = "l/min") = heartComponent.mitralValve.volumeFlowRate
          "Flow in mitral valve";
        output Real SLo_max = max([heartComponent.ventricles.LV_wall.SLo, heartComponent.ventricles.RV_wall.SLo, heartComponent.ventricles.SEP_wall.SLo])
          "maximal Sarcomere length";
        output Real SLo_min = min([heartComponent.ventricles.LV_wall.SLo, heartComponent.ventricles.RV_wall.SLo, heartComponent.ventricles.SEP_wall.SLo])
          "Minimal Sarcomere length";
        output Physiolibrary.Types.Pressure P_MV_o
          "Opening pressure of the mitral valve";
        output Physiolibrary.Types.Pressure P_MV_c
          "Closing pressure of the mitral valve";

      equation

        when heartComponent.mitralValve.open then
          P_MV_o = heartComponent.mitralValve.q_in.pressure;
        end when;

        when not heartComponent.mitralValve.open then
          P_MV_c = heartComponent.mitralValve.q_in.pressure;
        end when;

        der(brachial_pressure_int) = brachial_pressure;

        when heartComponent.sa_node.beat then
          brachial_pressure_mean = brachial_pressure_int/heartComponent.sa_node.t0_last;
          reinit(brachial_pressure_int, 0);
        end when;

        connect(inflowResistance1.q_out, venousSetPressure.y) annotation (Line(
            points={{24,-80},{24,-90},{60,-90}},
            color={0,0,0},
            thickness=1));
        connect(inflowResistance1.q_in, heartComponent.sv) annotation (Line(
            points={{24,-60},{24,-16},{22,-16},{22,-12},{-16,-12}},
            color={0,0,0},
            thickness=1));
        connect(elasticVessel.q_in, SystemicComponent.port_a) annotation (Line(
            points={{-80,-18},{-64,-18},{-64,28},{-58,28}},
            color={0,0,0},
            thickness=1));
        connect(outflowResistance.q_in, elasticVessel.q_in) annotation (Line(
            points={{-80,8},{-80,-18}},
            color={0,0,0},
            thickness=1));
        connect(postSystemicSetPressure.y, outflowResistance.q_out) annotation (Line(
            points={{-80,60},{-80,28}},
            color={0,0,0},
            thickness=1));
        connect(p_arterial.q_in, elasticVessel.q_in) annotation (Line(
            points={{-92,-18},{-80,-18}},
            color={0,0,0},
            thickness=1));
        connect(p_venous.q_in, heartComponent.sv) annotation (Line(
            points={{36,-56},{24,-56},{24,-16},{22,-16},{22,-12},{-16,-12}},
            color={0,0,0},
            thickness=1));
      end StarlingExperiment;

      model StarlingExperiment_regulatedPA
        "Starling experiment with regulated mean arterial pressure"
        extends StarlingExperiment(outflowResistance(useConductanceInput=true),
            venousSetPressure(P(displayUnit="Pa") = 133.22));
        Modelica.Blocks.Continuous.LimPID PID(
          controllerType=Modelica.Blocks.Types.SimpleController.PI,
          k=100.0,
          Ti=0.1,
          yMax=1199410000,
          yMin=1e-3,
          initType=Modelica.Blocks.Types.Init.InitialOutput,
          y_start=71994100)
          annotation (Placement(transformation(extent={{-142,8},{-122,28}})));
        Physiolibrary.Types.Constants.PressureConst pressure(k=11999.01486735)
          annotation (Placement(transformation(extent={{-162,14},{-154,22}})));
        Modelica.Blocks.Continuous.LowpassButterworth lowpassButterworth(
          f=0.1,
          initType=Modelica.Blocks.Types.Init.InitialOutput,
          y_start=133.32*90)
          annotation (Placement(transformation(extent={{-110,-26},{-130,-6}})));
        Modelica.Blocks.Math.ContinuousMean continuousMean annotation (
            Placement(transformation(extent={{-112,-64},{-132,-44}})));
        Physiolibrary.Blocks.Math.Reciprocal rec
          annotation (Placement(transformation(extent={{-112,8},{-92,28}})));
      equation
        connect(pressure.y, PID.u_s)
          annotation (Line(points={{-153,18},{-144,18}}, color={0,0,127}));
        connect(lowpassButterworth.u, p_arterial.pressure)
          annotation (Line(points={{-108,-16},{-102,-16}}, color={0,0,127}));
        connect(lowpassButterworth.y, PID.u_m) annotation (Line(points={{-131,
                -16},{-146,-16},{-146,6},{-132,6}}, color={0,0,127}));
        connect(continuousMean.u, p_arterial.pressure) annotation (Line(points=
                {{-110,-54},{-106,-54},{-106,-34},{-102,-34},{-102,-16}}, color=
               {0,0,127}));
        connect(outflowResistance.cond, rec.y)
          annotation (Line(points={{-86,18},{-91,18}}, color={0,0,127}));
        connect(PID.y, rec.u)
          annotation (Line(points={{-121,18},{-114,18}}, color={0,0,127}));
      end StarlingExperiment_regulatedPA;

      model SarnoffExperiment_RH
        extends CardiovascularSystem(useAutonomousPhi(y=false), heartComponent(
              pulmonaryValve(calculateAdditionalMetrics=true), pericardium(
                enabled=false)),
          phi_fixed(amplitude=0));
        Physiolibrary.Hydraulic.Sources.UnlimitedVolume venousSetPressure(
            usePressureInput=true,                                        P(
              displayUnit="mmHg") = 2666.4477483)
          annotation (Placement(transformation(extent={{80,-98},{60,-78}})));
        Physiolibrary.Hydraulic.Components.Resistor inflowResistance1(
            Resistance(displayUnit="(mmHg.min)/l") = 799934.32449)
                                                          annotation (Placement(
              transformation(
              extent={{-10,-10},{10,10}},
              rotation=270,
              origin={24,-68})));
        Components.Signals.Stepping stepping(
          offset=6*98,
          startTime=30,
          interval=30,
          increment=6*98,
          maxVal=35.9*98)
          annotation (Placement(transformation(extent={{60,-70},{80,-50}})));

         //    output Real leftWorkGmm =
      equation
        connect(inflowResistance1.q_out,venousSetPressure. y) annotation (Line(
            points={{24,-78},{24,-88},{60,-88}},
            color={0,0,0},
            thickness=1));
        connect(inflowResistance1.q_in, heartComponent.sv) annotation (Line(
            points={{24,-58},{24,-12},{-16,-12}},
            color={0,0,0},
            thickness=1));
        connect(stepping.y, venousSetPressure.pressure) annotation (Line(points=
               {{81,-60},{94,-60},{94,-88},{80,-88}}, color={0,0,127}));
        annotation (experiment(
            StopTime=300,
            Interval=0.01,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end SarnoffExperiment_RH;

      model SarnoffExperiment_HFrEF
        extends SarnoffExperiment_RH(
          heartComponent(ventricles(LV_wall(contractilityFraction=0.5),
                SEP_wall(contractilityFraction=0.75))),
          settings(baro_tau_s=10, heart_vntr_D_A_maxAct(displayUnit="Pa/m3")=
              5000),
          useAutonomousPhi(y=true));

      end SarnoffExperiment_HFrEF;

      model SarnoffExperiment_stepping
        extends SarnoffExperiment_RH(
                                  useAutonomousPhi(y=true));
      end SarnoffExperiment_stepping;

      model SarnoffExperiment_openPericardium
        extends SarnoffExperiment_RH(
                                  heartComponent(pericardium(enabled=false)),
            stepping(
            startTime=10,
            interval=10,
            increment=2*98,
            maxVal=16*98));
      end SarnoffExperiment_openPericardium;

      model SarnoffExperiment_LH
        extends CardiovascularSystem(useAutonomousPhi(y=false), heartComponent(
              pulmonaryValve(calculateAdditionalMetrics=true), pericardium(enabled=false)));
        Physiolibrary.Hydraulic.Sources.UnlimitedVolume venousSetPressure(
            usePressureInput=false, P(displayUnit="mmHg") = 266.64477483)
          annotation (Placement(transformation(extent={{80,-98},{60,-78}})));
        Physiolibrary.Hydraulic.Components.Resistor inflowResistance1(
            Resistance(displayUnit="(mmHg.min)/l") = 799934.32449)
                                                          annotation (Placement(
              transformation(
              extent={{-10,-10},{10,10}},
              rotation=270,
              origin={24,-68})));
        Components.Signals.Stepping stepping(
          offset=6*98,
          startTime=30,
          interval=30,
          increment=6*98,
          maxVal=35.9*98)
          annotation (Placement(transformation(extent={{60,-70},{80,-50}})));

         //    output Real leftWorkGmm =

        Physiolibrary.Types.Pressure p_la_avg;
        Physiolibrary.Types.Pressure p_ra_avg;

        parameter Real P_avg_tau = 5;
      equation

        der(p_la_avg)*P_avg_tau = heartComponent.la.port_a.pressure - p_la_avg;
        der(p_ra_avg)*P_avg_tau = heartComponent.ra.port_a.pressure - p_ra_avg;

        connect(inflowResistance1.q_out,venousSetPressure. y) annotation (Line(
            points={{24,-78},{24,-88},{60,-88}},
            color={0,0,0},
            thickness=1));
        connect(inflowResistance1.q_in, heartComponent.sv) annotation (Line(
            points={{24,-58},{24,-12},{-16,-12}},
            color={0,0,0},
            thickness=1));
        connect(stepping.y, venousSetPressure.pressure) annotation (Line(points=
               {{81,-60},{94,-60},{94,-88},{80,-88}}, color={0,0,127}));
        annotation (experiment(
            StopTime=40,
            Interval=0.01,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end SarnoffExperiment_LH;

      model ArterialStiffening_fastBaro
        extends ADAN_main.SystemicTree.Exercise.CVS_exercise(settings(syst_art_k_E=0.8, baro_tau_s=10));
        annotation (experiment(
            StopTime=300,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end ArterialStiffening_fastBaro;

      model ArterialStiffening_NoBaro
        extends ArterialStiffening_fastBaro(useAutonomousPhi(y=false),
          SystemicComponent(UseExerciseInput=true),
          Exercise(startTime=10),
          phi_fixed(startTime=10));
        annotation (experiment(
            StopTime=20,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end ArterialStiffening_NoBaro;

      model CVS_tilt_BaroImpairedF0_0 "60deg tilt with impaired baroreflex"
        extends Tilt.CVS_tiltable(SystemicComponent(baroreflex_system(
                baroreceptor_aortic(f0=0))));
      end CVS_tilt_BaroImpairedF0_0;

      model CVS_tilt_BaroImpairedF0_2 "60deg tilt with impaired baroreflex"
        extends Tilt.CVS_tiltable(SystemicComponent(baroreflex_system(
                baroreceptor_aortic(f0=600))));
      end CVS_tilt_BaroImpairedF0_2;

      model CVS_tilt_BaroImpaired "60deg tilt with impaired baroreflex"
        extends Tilt.CVS_tiltable(SystemicComponent(baroreflex_system(
                baroreceptor_aortic(f0=0))), useAutonomousPhi(y=false));
      end CVS_tilt_BaroImpaired;

      model CVS_aorticRegurgitation
        extends ADAN_main.SystemicTree.Exercise.CVS_exercise(heartComponent(aorticValve(_Goff=3E-08)));

      Physiolibrary.Types.Volume CO_backflow_acc;
      Physiolibrary.Types.Volume CO_backflow;
      Physiolibrary.Types.Fraction regurgitation_frac = min(1, CO_backflow/max(CO + CO_backflow, 1e-6));
      equation
          // integrate only negative backflow
          der(CO_backflow_acc) = max(heartComponent.aorticValve.q_out.q, 0);

        when heartComponent.aorticValve.cc < heartComponent.aorticValve.epsTime then
          reinit(CO_backflow_acc, 0);
          CO_backflow = CO_backflow_acc;
        end when;

        annotation (experiment(
            StopTime=10,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end CVS_aorticRegurgitation;

      model CVS_mitralRegurgitation
        extends CardiovascularSystem(heartComponent(mitralValve(_Goff=3E-08)));
      end CVS_mitralRegurgitation;

      model CVS_aorticStenosis
        extends CardiovascularSystem(heartComponent(aorticValve(_Ron(
                  displayUnit="(mmHg.min)/l") = 10879106.813064)), settings(
              baro_tau_s=10));

      Physiolibrary.Types.Pressure p_in(start = 13e3);
      Physiolibrary.Types.Pressure p_out(start = 13e3);
      Physiolibrary.Types.Pressure dp_aortic = p_in - p_out;
        parameter Modelica.Units.SI.Time tau_avg=10;
      equation
          // integrate only during open valve
          if heartComponent.aorticValve.open then
          der(p_in)*tau_avg = heartComponent.aorticValve.q_in.pressure - p_in;
          der(p_out)*tau_avg = heartComponent.aorticValve.q_out.pressure - p_out;
          else
            der(p_in) = 0;
            der(p_out) = 0;
          end if;

        annotation (experiment(
            StopTime=10,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end CVS_aorticStenosis;

      package BaroreceptorStimulation
        model OlufsenTriSeg_valsalva_KosinskiBaro_longTs_Stimulation
          extends
            Valsalva.Experiments.OlufsenTriSeg_valsalva_KosinskiBaro_longTs(
              SystemicComponent(baroreflex_system(baroreceptor_carotid(
                    useStimulationInput=true), externalStimulation(height=10,
                    startTime=300))));
          annotation (experiment(
              StopTime=1800,
              Interval=0.02,
              Tolerance=1e-05,
              __Dymola_Algorithm="Cvode"));
        end OlufsenTriSeg_valsalva_KosinskiBaro_longTs_Stimulation;
      end BaroreceptorStimulation;

      model Hemorrhage_noBaro
        extends Hemorrhage(useAutonomousPhi(y=false));
        annotation (experiment(
            StopTime=600,
            Interval=0.04,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end Hemorrhage_noBaro;

      model CardiovascularSystem_incrConduct
        extends CardiovascularSystem(redeclare
            Components.Subsystems.Heart.Heart_TriSegMechanicsSimple_incrRes
            heartComponent(aorticValve(useChatteringProtection=true)),
            useAutonomousPhi(y=false));
      Modelica.Blocks.Sources.Ramp LA_Cond(
          height=20/3333059.685375,
          duration=60,
          offset=1/3333059.685375,
          startTime=20)
          "Phi for when the model is not using the autonomous feedback phi from baroreflex"
          annotation (Placement(transformation(extent={{-100,-20},{-80,0}})));
      equation
        connect(LA_Cond.y, heartComponent.hydraulicconductance) annotation (
            Line(points={{-79,-10},{-48,-10},{-48,-30},{-38,-30}}, color={0,0,
                127}));
      end CardiovascularSystem_incrConduct;

      model CVS_SATejection
        extends
          ADAN_main.SystemicTree.Identification.SteadyState.OlufsenTriSeg_optimized1_init(
          heartComponent(
            aorticValve(_Ron(displayUnit="(Pa.s)/m3") = 176513),
            valveInertia_aortic(enabled=true, l=0.02),
            valveInertia_Mitral(enabled=true, l=0.005),
            valveInertia_pulmonary(enabled=false)),
          useAutonomousPhi(y=false),
          settings(heart_R_vlv(displayUnit="(mmHg.s)/ml") = 266645, dummy=2));
        annotation (experiment(
            StopTime=20,
            Interval=0.02,
            Tolerance=1e-07,
            __Dymola_Algorithm="Cvode"));
      end CVS_SATejection;

      model CorviaShunt
        extends CardiovascularSystem(useAutonomousPhi(y=time > 40));
        replaceable Physiolibrary.Hydraulic.Components.Resistor
          r_SystemicVenousInflow(useConductanceInput=true, Resistance=settings.heart_R_RA)
          constrainedby Physiolibrary.Hydraulic.Components.Resistor
          "Resistance of the inflow to the atria"
          annotation (Placement(transformation(extent={{-10,-10},{10,10}},
              rotation=180,
              origin={8,-76})));
        replaceable Modelica.Blocks.Sources.Ramp shuntConductance(
          offset=0,
          startTime=20,
          height=3.7503078792283e-08,
          duration=1) constrainedby Modelica.Blocks.Sources.Ramp
          annotation (Placement(transformation(extent={{-64,-100},{-44,-80}})));
        Physiolibrary.Types.Constants.HydraulicConductanceConst
          hydraulicConductance(k(displayUnit="l/(mmHg.min)")=
            3.7503078792283e-08)
          annotation (Placement(transformation(extent={{-62,-64},{-54,-56}})));
      equation
        connect(r_SystemicVenousInflow.q_in, SystemicComponent.port_b)
          annotation (Line(
            points={{18,-76},{18,28}},
            color={0,0,0},
            thickness=1));
        connect(pulmonaryComponent.port_b, r_SystemicVenousInflow.q_out)
          annotation (Line(
            points={{-14,-52},{-14,-76},{-2,-76}},
            color={0,0,0},
            thickness=1));
        connect(shuntConductance.y, r_SystemicVenousInflow.cond) annotation (
            Line(points={{-43,-90},{8,-90},{8,-82}}, color={0,0,127}));
        annotation (experiment(
            StopTime=40,
            Interval=0.02,
            Tolerance=1e-06,
            __Dymola_Algorithm="Cvode"));
      end CorviaShunt;

      model CVS_baroVar
        extends CardiovascularSystem(settings(baro_fsn(displayUnit="Hz"),
              baro_f1=3.0e-03));
      end CVS_baroVar;

      package VolumeCompensation
        model VolumeLoading
          extends CardiovascularSystem(
            volumeInfusion(displayUnit="ml/min") = 5e-07,
                                       pulmonaryComponent(usePVCannula=false),
              useAutonomousPhi(y=true),
            volumeInfusionRamp(
              height=volumeInfusion,
              offset=0,
              startTime=400),
            settings(
              heartImp_LVcont=0.8,
              hideSystemic=false,
              hidePulmonary=true,
              hideHeart=true,
              hideLevel0=true,
              hideLevel1=true));

        parameter Physiolibrary.Types.Pressure PA_cutOff=12932.271579255
                                                              "Brachial Pressure to terminate the simulation";
                                          parameter Modelica.Units.SI.Time time_cutoff=400;

        equation
         if time_cutoff > 0 and time > time_cutoff and brachial_pressure_mean > PA_cutOff then
           terminate("Pressure is already too high");
         end if;
        end VolumeLoading;
      end VolumeCompensation;

      model CPR
        extends Valsalva.CVS_valsalva(useAutonomousPhi(y = false), thoracic_pressure_ramp(amplitude = 20*133, width = 0.3, period = 1, nperiod = 10, offset = 0, startTime = 60), phi_fixed(amplitude = 0, offset = 1), settings(HR_nominal = 1.6666666666667e-08), condHRPhi(disconnected = true),
          break heartRate);
      Modelica.Blocks.Sources.Ramp failingHeartRate(
          height=-0.999,
          offset=1,
          duration=0.1,
          startTime=5)
          "Phi for when the model is not using the autonomous feedback phi from baroreflex"
          annotation (Placement(transformation(extent={{32,-40},{12,-20}})));
      equation
        connect(failingHeartRate.y, heartComponent.frequency_input) annotation
          (Line(points={{11,-30},{-6,-30},{-6,-22},{-16,-22}}, color={0,0,127}));
      end CPR;
    end Experiments;

  annotation(preferredView="info",
  versionBuild=1,
  versionDate="2015-09-15",
  dateModified = "2015-09-15 12:49:00Z",
  revisionId="",                   Documentation(revisions="<html>
<p>Generated from <a href=\"https://models.cellml.org/workspace/4ac\">https://models.cellml.org/workspace/4ac</a> Revision: b580e909bfa88dbf598e9fd1f4b15024e676e9b6 from Date: 2019-04-08 8:13:36 AM, Message: tuning the param for veins</p>
</html>"));
  end SystemicTree;
  annotation (preferredView="info",uses(Modelica(version="4.0.0"), Physiolibrary(version="2.4.1"),
      Optimization(version="2.2.5")),
                       experiment(
      StopTime=60,
      __Dymola_NumberOfIntervals=1500,
      Tolerance=0.000001,
      __Dymola_Algorithm="Cvode"),
    version="1.1",
    conversion(from(version="", script="modelica://ADAN_main/Scripts/Dymola/ConvertFromADAN_main_1.mos")));
end ADAN_main;
